{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"EX-百度云盘去加载提示版","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://pan.baidu.com/disk/home*","*://yun.baidu.com/disk/home*","*://pan.baidu.com/s/*","*://yun.baidu.com/s/*","*://pan.baidu.com/share/link?*","*://yun.baidu.com/share/link?*","*://eyun.baidu.com/s/*","*://eyun.baidu.com/enterprise/*"],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1530109317160},"enabled":true,"position":1,"file_url":"https://greasyfork.org/scripts/39854-ex-%E7%99%BE%E5%BA%A6%E4%BA%91%E7%9B%98%E5%8E%BB%E5%8A%A0%E8%BD%BD%E6%8F%90%E7%A4%BA%E7%89%88/code/EX-%E7%99%BE%E5%BA%A6%E4%BA%91%E7%9B%98%E5%8E%BB%E5%8A%A0%E8%BD%BD%E6%8F%90%E7%A4%BA%E7%89%88.user.js","uuid":"787ce47c-7012-448e-abfa-4934629871bc","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBFWC3nmb7luqbkupHnm5jljrvliqDovb3mj5DnpLrniYgKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL2dpdGh1Yi5jb20vZ3h2di9leC1iYWlkdXl1bnBhbi8KLy8gQHN1cHBvcnRVUkwgICBodHRwczovL2dpdGh1Yi5jb20vZ3h2di9leC1iYWlkdXl1bnBhbi9pc3N1ZXMKLy8gQHZlcnNpb24gICAgICAwLjIuMi5Nb2QKLy8gQGRhdGUgICAgICAgICAwNS8wNi8yMDE4Ci8vIEBtb2RpZmllZCAgICAgMDYvMDYvMjAxOAovLyBAYXV0aG9yICAgICAgIGd4dnbjgIHnvZHlj4vku6wKLy8gQGxpY2Vuc2UgICAgICBNSVQKLy8gQGRlc2NyaXB0aW9uIOe9keebmOWGheWSjOWIhuS6q+mTvuaOpemhtemdouWdh+aYvuekultFWC3kuIvovb1d5oyJ6ZKu77yM5pSv5oyB55m+5bqm5LyB5Lia572R55uY77ybCi8vIEBkZXNjcmlwdGlvbiBbRVgt5LiL6L29XeaMiemSruWPr+S7peWunueOsO+8muiOt+WPluaWh+S7tuebtOaOpeS4i+i9vemTvuaOpSAvIOWOi+e8qeS4i+i9vemTvuaOpe+8mwovLyBAZGVzY3JpcHRpb24g5Lu25aS5L+Wkp+aWh+S7ti/ljZXmlofku7Yv5aSa5paH5Lu2IOebtOaOpeaZrumAmuS4i+i9ve+8jOWFjeiwg+eUqOW6puebmOWuouaIt+err++8mwovLyBAbWF0Y2ggICAgICAgICo6Ly9wYW4uYmFpZHUuY29tL2Rpc2svaG9tZSoKLy8gQG1hdGNoICAgICAgICAqOi8veXVuLmJhaWR1LmNvbS9kaXNrL2hvbWUqCi8vIEBtYXRjaCAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vcy8qCi8vIEBtYXRjaCAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vcy8qCi8vIEBtYXRjaCAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vc2hhcmUvbGluaz8qCi8vIEBtYXRjaCAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vc2hhcmUvbGluaz8qCi8vIEBtYXRjaCAgICAgICAgKjovL2V5dW4uYmFpZHUuY29tL3MvKgovLyBAbWF0Y2ggICAgICAgICo6Ly9leXVuLmJhaWR1LmNvbS9lbnRlcnByaXNlLyoKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1lbmQKLy8gQGdyYW50ICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQGdyYW50ICAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgIEdNX2luZm8KLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9jbGlwYm9hcmQuanMvMS41LjE2L2NsaXBib2FyZC5taW4uanMKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24ocmVxdWlyZSwgZGVmaW5lLCBQcm9taXNlKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgZnVuY3Rpb24gc2hvd0Vycm9yKG1zZykgewogICAgICAgIEdNX2FkZFN0eWxlKCcjZXJyb3JEaWFsb2d7cG9zaXRpb246IGZpeGVkO3RvcDogNzYuNXB4OyBib3R0b206IGF1dG87IGxlZnQ6IDQyM3B4OyByaWdodDogYXV0bztiYWNrZ3JvdW5kOiAjZmZmO2JvcmRlcjogMXB4IHNvbGlkICNjZWQxZDk7Ym9yZGVyLXJhZGl1czogNHB4O2JveC1zaGFkb3c6IDAgMCAzcHggI2NlZDFkOTtjb2xvcjogYmxhY2s7d29yZC1icmVhazogYnJlYWstYWxsO2Rpc3BsYXk6IGJsb2NrO3dpZHRoOiA1MjBweDtwYWRkaW5nOiAxMHB4IDIwcHg7ei1pbmRleDogOTk5OTt9I2Vycm9yRGlhbG9nIGgze2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAjY2VkMWQ5O2ZvbnQtc2l6ZTogMS41ZW07Zm9udC13ZWlnaHQ6IGJvbGQ7fScpOwogICAgICAgIHZhciAkOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgICQgPSByZXF1aXJlKCdiYXNlOndpZGdldC9saWJzL2pxdWVyeXBhY2tldC5qcycpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAkID0gZnVuY3Rpb24oc3RyKSB7CiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gc3RyOwogICAgICAgICAgICAgICAgZGl2Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHsgdGhpcy5yZW1vdmUoKTsgfTsKICAgICAgICAgICAgICAgIHJldHVybiAkOwogICAgICAgICAgICB9OwogICAgICAgICAgICAkLm9uID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geyBhcHBlbmRUbzogZnVuY3Rpb24oKSB7IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTsgfSB9OwogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB2YXIgJGRpYWxvZyA9ICQoJzxkaXYgaWQ9ImVycm9yRGlhbG9nIj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzxoMz5FWC1iYWlkdXl1bnBhbjrnqIvluo/lvILluLg8L2gzPicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iZGlhbG9nLWJvZHkiPjxwPuivt+WwneivlTxhIGhyZWY9Imh0dHBzOi8vZ3h2di5naXRodWIuaW8vZXgtYmFpZHV5dW5wYW4vRVgtYmFpZHV5dW5wYW4udXNlci5qcyIgdGFyZ2V0PSJfYmxhbmsiPuabtOaWsOiEmuacrDwvYT7miJblpI3liLbku6XkuIvkv6Hmga88YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vZ3h2di9leC1iYWlkdXl1bnBhbi9pc3N1ZXMiIHRhcmdldD0iX2JsYW5rIj7mj5DkuqRpc3N1ZTwvYT4o6K+35LiN6KaB5o+Q5Lqk6YeN5aSN55qEaXNzdWUpPC9wPicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPHA+RXhjZXB0aW9uOiAnICsgbXNnICsgJzwvcD4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzxwPlNjcmlwdCBWZXI6ICcgKyBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uICsgJzwvcD4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzxwPlRlbXBlck1vbmtleSBWZXI6ICcgKyBHTV9pbmZvLnZlcnNpb24gKyAnPC9wPicgKwogICAgICAgICAgICAgICAgICAgICAgICAnPHA+VUE6ICcgKyBuYXZpZ2F0b3IudXNlckFnZW50ICsgJzwvcD4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pjxocj48YSBjbGFzcz0iY2xvc2UiIGhyZWY9ImphdmFzY3JpcHQ6OyI+5YWz6ZetPC9hPjwvZGl2PicpOwogICAgICAgICRkaWFsb2cub24oJ2NsaWNrJywgJy5jbG9zZScsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgICRkaWFsb2cucmVtb3ZlKCk7CiAgICAgICAgfSkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7CiAgICB9CiAgICBkZWZpbmUoJ2V4LXl1bnBhbjpwYWdlSW5mbycsIGZ1bmN0aW9uKHJlcXVpcmUpIHsKICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24uaHJlZjsKICAgICAgICB2YXIgY3VycmVudFBhZ2UgPSAncGFuJzsKICAgICAgICB2YXIgbWF0Y2hzID0gewogICAgICAgICAgICAnLio6Ly9wYW4uYmFpZHUuY29tL2Rpc2svaG9tZS4qJzogJ3BhbicsCiAgICAgICAgICAgICcuKjovL3l1bi5iYWlkdS5jb20vZGlzay9ob21lLionOiAncGFuJywKICAgICAgICAgICAgJy4qOi8vcGFuLmJhaWR1LmNvbS9zLy4qJzogJ3NoYXJlJywKICAgICAgICAgICAgJy4qOi8veXVuLmJhaWR1LmNvbS9zLy4qJzogJ3NoYXJlJywKICAgICAgICAgICAgJy4qOi8vcGFuLmJhaWR1LmNvbS9zaGFyZS9saW5rPy4qJzogJ3NoYXJlJywKICAgICAgICAgICAgJy4qOi8veXVuLmJhaWR1LmNvbS9zaGFyZS9saW5rPy4qJzogJ3NoYXJlJywKICAgICAgICAgICAgJy4qOi8vZXl1bi5iYWlkdS5jb20vcy8uKic6ICdlbnRlcnByaXNlJywKICAgICAgICAgICAgJy4qOi8vZXl1bi5iYWlkdS5jb20vZW50ZXJwcmlzZS8uKic6ICdlbnRlcnByaXNlJwogICAgICAgIH07CiAgICAgICAgdmFyIFBBR0VfQ09ORklHID0gewogICAgICAgICAgICBwYW46IHsKICAgICAgICAgICAgICAgIHByZWZpeDogJ2Z1bmN0aW9uLXdpZGdldC0xOicsCiAgICAgICAgICAgICAgICBjb250YWluZXJzOiBbJy5nLWJ1dHRvbjpoYXMoLmljb24tZG93bmxvYWQpOnZpc2libGUnXSwKICAgICAgICAgICAgICAgIHN0eWxlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hhcmU6IHsKICAgICAgICAgICAgICAgIHByZWZpeDogJ2Z1bmN0aW9uLXdpZGdldC0xOicsCiAgICAgICAgICAgICAgICBjb250YWluZXJzOiBbCiAgICAgICAgICAgICAgICAgICAgJy5LS3R3YUggLngtYnV0dG9uLWJveD4uZy1idXR0b246aGFzKC5pY29uLWRvd25sb2FkKScsCiAgICAgICAgICAgICAgICAgICAgJy5tb2R1bGUtc2hhcmUtdG9wLWJhciAueC1idXR0b24tYm94Pi5nLWJ1dHRvbjpoYXMoLmljb24tZG93bmxvYWQpJwogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHN0eWxlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGVMaXN0ID0gWwogICAgICAgICAgICAgICAgICAgICAgICAnLktQRHdDRSAuUXhKeHRne3otaW5kZXg6IDI7fScsCiAgICAgICAgICAgICAgICAgICAgICAgICcubW9kdWxlLXNoYXJlLWhlYWRlciAuc2xpZGUtc2hvdy1yaWdodHt3aWR0aDogYXV0bzt9JywKICAgICAgICAgICAgICAgICAgICAgICAgJy5leC15dW5wYW4tZHJvcGRvd24tYnV0dG9uLmctZHJvcGRvd24tYnV0dG9uLmJ1dHRvbi1vcGVuIC5tZW51e3otaW5kZXg6NDE7fScsCiAgICAgICAgICAgICAgICAgICAgICAgICcubW9kdWxlLXNoYXJlLWhlYWRlciAuc2xpZGUtc2hvdy1oZWFkZXIgaDJ7d2lkdGg6MjMwcHg7fScsCiAgICAgICAgICAgICAgICAgICAgICAgICcuS1BEd0NFIC54R0xNSWFiIC5nLWRyb3Bkb3duLWJ1dHRvbi5leC15dW5wYW4tZHJvcGRvd24tYnV0dG9ue21hcmdpbjogMCA1cHg7fScKICAgICAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgICAgIEdNX2FkZFN0eWxlKHN0eWxlTGlzdC5qb2luKCcnKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVudGVycHJpc2U6IHsKICAgICAgICAgICAgICAgIHByZWZpeDogJ2J1c2luZXNzLWZ1bmN0aW9uOicsCiAgICAgICAgICAgICAgICBjb250YWluZXJzOiBbJy5idXR0b24tYm94LWNvbnRhaW5lcj4uZy1idXR0b246aGFzKDpjb250YWlucygi5LiL6L29IikpJ10sCiAgICAgICAgICAgICAgICBzdHlsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlTGlzdCA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgJy5leC15dW5wYW4tZHJvcGRvd24tYnV0dG9uIC5pY29uLWRvd25sb2Fke2JhY2tncm91bmQtaW1hZ2U6IHVybCgvYm94LXN0YXRpYy9idXNpbmVzcy1mdW5jdGlvbi9pbmZvcy9pY29uc196LnBuZz90PTE0NzYwMDQwMTQzMTMpO30nLAogICAgICAgICAgICAgICAgICAgICAgICAnLmV4LXl1bnBhbi1kcm9wZG93bi1idXR0b24gLmctYnV0dG9uOmhvdmVyIC5pY29uLWRvd25sb2Fke2JhY2tncm91bmQtcG9zaXRpb246IDBweCAtMzRweDt9JwogICAgICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICAgICAgR01fYWRkU3R5bGUoc3R5bGVMaXN0LmpvaW4oJycpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZm9yICh2YXIgbWF0Y2ggaW4gbWF0Y2hzKSB7CiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKG1hdGNoKS50ZXN0KHVybCkgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlID0gbWF0Y2hzW21hdGNoXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gUEFHRV9DT05GSUdbY3VycmVudFBhZ2VdOwogICAgfSk7CgogICAgZGVmaW5lKCdleC15dW5wYW46ZG93bmxvYWRCdG5Jbml0JywgZnVuY3Rpb24ocmVxdWlyZSkgewogICAgICAgIHZhciBjdHggPSByZXF1aXJlKCdzeXN0ZW0tY29yZTpjb250ZXh0L2NvbnRleHQuanMnKS5pbnN0YW5jZUZvclN5c3RlbTsKICAgICAgICB2YXIgJCA9IHJlcXVpcmUoJ2Jhc2U6d2lkZ2V0L2xpYnMvanF1ZXJ5cGFja2V0LmpzJyk7CiAgICAgICAgdmFyIHBhZ2VJbmZvID0gcmVxdWlyZSgnZXgteXVucGFuOnBhZ2VJbmZvJyk7CiAgICAgICAgdmFyIHByZWZpeCA9IHBhZ2VJbmZvLnByZWZpeDsKICAgICAgICB2YXIgZFNlcnYgPSBudWxsOwogICAgICAgIHJlcXVpcmUuYXN5bmMocHJlZml4ICsgJ2Rvd25sb2FkL3NlcnZpY2UvZGxpbmtTZXJ2aWNlLmpzJywgZnVuY3Rpb24oZGxpbmtTZXJ2aWNlKSB7CiAgICAgICAgICAgIGRTZXJ2ID0gZGxpbmtTZXJ2aWNlOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgbWVudSA9IFsvKiB7CiAgICAgICAgICAgIHRpdGxlOiAn5pmu6YCa5LiL6L29JywKICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSByZXF1aXJlKHByZWZpeCArICdkb3dubG9hZC9zdGFydC5qcycpOwogICAgICAgICAgICAgICAgc3RhcnQuc3RhcnQoY3R4KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXZhaWxhYmxlUHJvZHVjdDogWydwYW4nLCAnc2hhcmUnLCAnZW50ZXJwcmlzZSddCiAgICAgICAgfSwgKi97CiAgICAgICAgICAgIHRpdGxlOiAn6I635Y+W5LiL6L296ZO+5o6lJywKICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgZmV0Y2hEb3duTGlua3MgPSByZXF1aXJlKCdleC15dW5wYW46ZmV0Y2hEb3duTGlua3MuanMnKTsKICAgICAgICAgICAgICAgIGZldGNoRG93bkxpbmtzLnN0YXJ0KGN0eCwgZFNlcnYpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhdmFpbGFibGVQcm9kdWN0OiBbJ3BhbicsICdzaGFyZScsICdlbnRlcnByaXNlJ10KICAgICAgICB9LCB7CiAgICAgICAgICAgIHRpdGxlOiAn6I635Y+W5Y6L57yp6ZO+5o6lJywKICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgZmV0Y2hEb3duTGlua3MgPSByZXF1aXJlKCdleC15dW5wYW46ZmV0Y2hEb3duTGlua3MuanMnKTsKICAgICAgICAgICAgICAgIGZldGNoRG93bkxpbmtzLnN0YXJ0KGN0eCwgZFNlcnYsIHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhdmFpbGFibGVQcm9kdWN0OiBbJ3BhbicsICdzaGFyZScsICdlbnRlcnByaXNlJ10KICAgICAgICB9XTsKCiAgICAgICAgdmFyIGV4RGxCdG5Db25maWcgPSB7CiAgICAgICAgICAgIHR5cGU6ICdkcm9wZG93bicsCiAgICAgICAgICAgIHRpdGxlOiAnRVgt5LiL6L29JywKICAgICAgICAgICAgcmVzaXplOiB0cnVlLAogICAgICAgICAgICBtZW51OiBtZW51LmZpbHRlcihmdW5jdGlvbiAoYnRuKSB7CiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFByb2R1Y3QgPSBjdHgucGFnZUluZm8uY3VycmVudFByb2R1Y3Q7CiAgICAgICAgICAgICAgICByZXR1cm4gfmJ0bi5hdmFpbGFibGVQcm9kdWN0LmluZGV4T2YoY3VycmVudFByb2R1Y3QpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgaWNvbjogJ2ljb24tZG93bmxvYWQnCiAgICAgICAgfTsKICAgICAgICB2YXIgc2VsZWN0b3IgPSBwYWdlSW5mby5jb250YWluZXJzLmpvaW4oKTsKICAgICAgICAkKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uKGksIGUpIHsKICAgICAgICAgICAgdmFyIGV4RGxCdG4gPSBjdHgudWkuYnV0dG9uKGV4RGxCdG5Db25maWcpOwogICAgICAgICAgICAkKGUpLmFmdGVyKGV4RGxCdG4uZG9tLmFkZENsYXNzKCdleC15dW5wYW4tZHJvcGRvd24tYnV0dG9uJykpOwogICAgICAgICAgICBleERsQnRuLnJlc2l6ZUJ1dHRvbldpZHRoKCk7CiAgICAgICAgfSk7CiAgICAgICAgcGFnZUluZm8uc3R5bGUoKTsKICAgIH0pOwoKICAgIGRlZmluZSgnZXgteXVucGFuOmZldGNoRG93bkxpbmtzLmpzJywgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewogICAgICAgIHZhciAkID0gcmVxdWlyZSgnYmFzZTp3aWRnZXQvbGlicy9qcXVlcnlwYWNrZXQuanMnKTsKCiAgICAgICAgZnVuY3Rpb24gc3RhcnQoY3R4LCBkU2VydiwgYWxsWmlwKSB7CiAgICAgICAgICAgIHZhciBzZWxlY3RlZExpc3QgPSBjdHgubGlzdC5nZXRTZWxlY3RlZCgpOwogICAgICAgICAgICBpZiAoc2VsZWN0ZWRMaXN0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGN0eC51aS50aXAoeyBtb2RlOiAnY2F1dGlvbicsIG1zZzogJ+aCqOi/mOayoeaciemAieaLqeS4i+i9veeahOaWh+S7ticgfSk7CiAgICAgICAgICAgIGN0eC51aS50aXAoeyBtb2RlOiAnbG9hZGluZycsIG1zZzogJ+W8gOWni+ivt+axgumTvuaOpS4uLicgfSk7CgogICAgICAgICAgICB2YXIgZm9sZGVyc0xpc3QgPSBzZWxlY3RlZExpc3QuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLmlzZGlyID09PSAxOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIGZpbGVzTGlzdCA9IHNlbGVjdGVkTGlzdC5maWx0ZXIoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUuaXNkaXIgPT09IDA7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmFyIGN1cnJlbnRQcm9kdWN0ID0gY3R4LnBhZ2VJbmZvLmN1cnJlbnRQcm9kdWN0OwoKICAgICAgICAgICAgaWYgKCF+WydwYW4nLCAnc2hhcmUnLCAnZW50ZXJwcmlzZSddLmluZGV4T2YoY3VycmVudFByb2R1Y3QpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnVpLnRpcCh7IG1vZGU6ICdjYXV0aW9uJywgbXNnOiAn5aSN5Yi26ZO+5o6l5b2T5YmN6aG16Z2i5LiN5Y+v55SoJywgaGFzQ2xvc2U6IHRydWUsIGF1dG9DbG9zZTogZmFsc2UgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChmaWxlc0xpc3QubGVuZ3RoID4gMCAmJiBjdXJyZW50UHJvZHVjdCAhPT0gJ2VudGVycHJpc2UnICYmICFhbGxaaXApIHsKICAgICAgICAgICAgICAgIGZvbGRlcnNMaXN0LnVuc2hpZnQoZmlsZXNMaXN0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFtdLnB1c2guYXBwbHkoZm9sZGVyc0xpc3QsIGZpbGVzTGlzdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciByZXF1ZXN0TWV0aG9kOwogICAgICAgICAgICBpZiAoY3VycmVudFByb2R1Y3QgPT09ICdwYW4nKSB7CiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gZnVuY3Rpb24oZSwgY2IpIHsKICAgICAgICAgICAgICAgICAgICBkU2Vydi5nZXREbGlua1BhbihkU2Vydi5nZXRGc2lkTGlzdERhdGEoZSksIGFsbFppcCA/ICdiYXRjaCcgOiBlLmlzZGlyID09PSAxID8gJ2JhdGNoJyA6ICdub2xpbWl0JywgY2IsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAnUE9TVCcpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UHJvZHVjdCA9PT0gJ3NoYXJlJykgewogICAgICAgICAgICAgICAgdmFyIHl1bkRhdGEgPSByZXF1aXJlKCdkaXNrLXNoYXJlOndpZGdldC9kYXRhL3l1bkRhdGEuanMnKS5nZXQoKTsKICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBmdW5jdGlvbihlLCBjYikgewogICAgICAgICAgICAgICAgICAgIGRTZXJ2LmdldERsaW5rU2hhcmUoewogICAgICAgICAgICAgICAgICAgICAgICBzaGFyZV9pZDogeXVuRGF0YS5zaGFyZWlkLAogICAgICAgICAgICAgICAgICAgICAgICBzaGFyZV91azogeXVuRGF0YS51aywKICAgICAgICAgICAgICAgICAgICAgICAgc2lnbjogeXVuRGF0YS5zaWduLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHl1bkRhdGEudGltZXN0YW1wLAogICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBlLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBhbGxaaXAgPyAnYmF0Y2gnIDogZS5pc2RpciA9PT0gMSA/ICdiYXRjaCcgOiAnbm9saW1pdCcKICAgICAgICAgICAgICAgICAgICB9LCBjYik7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHl1bkRhdGEgPSByZXF1aXJlKCdwYWdlLWNvbW1vbjp3aWRnZXQvZGF0YS95dW5EYXRhLmpzJykuZ2V0KCk7CiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gZnVuY3Rpb24oZSwgY2IpIHsKICAgICAgICAgICAgICAgICAgICBkU2Vydi5nZXREbGlua1NoYXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVfaWQ6IHl1bkRhdGEuc2hhcmVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVfdWs6IHl1bkRhdGEudWssCiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ246IHl1bkRhdGEuc2lnbiwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB5dW5EYXRhLnRpbWVzdGFtcCwKICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogW2VdLAogICAgICAgICAgICAgICAgICAgICAgICBpc0ZvckJhdGNoOiBhbGxaaXAKICAgICAgICAgICAgICAgICAgICB9LCBjYik7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gZm9sZGVyc0xpc3QubGVuZ3RoID09PSAxID8gM2U0IDogM2UzOwogICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBmb2xkZXJzTGlzdC5tYXAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJC5leHRlbmQoe30sIGUpKTsKICAgICAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kKGUsIGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCQuZXh0ZW5kKHt9LCBlLCByZXN1bHQpKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7CiAgICAgICAgICAgICAgICBjdHgudWkuaGlkZVRpcCgpOwogICAgICAgICAgICAgICAgdmFyIGRsaW5rcyA9IFtdOwogICAgICAgICAgICAgICAgdmFyIG5lZWRUb1JldHJ5ID0gcmVzdWx0LmZpbHRlcihmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZXJybm8gIT09IDA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChuZWVkVG9SZXRyeS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgZFNlcnYuZGlhbG9nLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge30KICAgICAgICAgICAgICAgICAgICBjdHgudWkudGlwKHsKICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2NhdXRpb24nLAogICAgICAgICAgICAgICAgICAgICAgICBtc2c6IG5lZWRUb1JldHJ5Lmxlbmd0aCArICfkuKrmlofku7bor7fmsYLpk77mjqXlpLHotKUnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5lcnJubyA9PT0gMDsKICAgICAgICAgICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZS5kbGluayA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRsaW5rID0gZS5kbGluayArICImemlwbmFtZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KChlLmlzZGlyID8gJ+OAkOaWh+S7tuWkueOAkScgOiAn44CQ5paH5Lu244CRJykgKyBlLnNlcnZlcl9maWxlbmFtZSArICcuemlwJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRsaW5rcy5wdXNoKGUuZGxpbmsgJiYgZGxpbmspOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFtdLnB1c2guYXBwbHkoZGxpbmtzLCAoZS5kbGluayB8fCBlLmxpc3QgfHwgW10pLm1hcChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5kbGluazsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKGRsaW5rcy5sZW5ndGggPT09IDApIHJldHVybiBjdHgudWkudGlwKHsgbW9kZTogJ2NhdXRpb24nLCBtc2c6ICflpI3liLblpLHotKXvvJrmnKrojrflj5bliLDpk77mjqUnIH0pOwogICAgICAgICAgICAgICAgdmFyIGNsaXBib2FyZCA9IG5ldyBDbGlwYm9hcmQoJy5idG4nKTsKICAgICAgICAgICAgICAgIGNsaXBib2FyZC5vbignc3VjY2VzcycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBjdHgudWkudGlwKHsgbW9kZTogJ3N1Y2Nlc3MnLCBtc2c6ICflpI3liLbmiJDlip8nICsgZGxpbmtzLmxlbmd0aCArICfkuKrmlofku7YnIH0pOwogICAgICAgICAgICAgICAgICAgIGUuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgICAgICAgICAgICAgICBkaWFsb2cuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIGNsaXBib2FyZC5kZXN0cm95KCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNsaXBib2FyZC5vbignZXJyb3InLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LnVpLnRpcCh7IG1vZGU6ICdjYXV0aW9uJywgbXNnOiAn5aSN5Yi25aSx6LSlJyB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdmFyIHRleHQgPSAnPHRleHRhcmVhIGlkPSJiYXIiIHJvd3M9IicgKyAoKGRsaW5rcy5sZW5ndGggPiAyMCA/IDIwIDogZGxpbmtzLmxlbmd0aCkgKyAxKSArICciIHN0eWxlPSJ3aWR0aDogMTAwJTt3aGl0ZS1zcGFjZTogbm93cmFwOyI+JyArIGRsaW5rcy5qb2luKCdcbicpICsgJzwvdGV4dGFyZWE+JzsKICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSBjdHgudWkuY29uZmlybSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+ebtOaOpeS4i+i9veWcsOWdgO+8iOaUr+aMgeWLvumAieWkmuS4quaWh+S7tizmlofku7blpLnlj6/ojrflj5bljovnvKnkuIvovb3nm7Tpk77vvIknLAogICAgICAgICAgICAgICAgICAgIGJvZHk6IHRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXJlVGV4dDogJ+ehruWumicsCiAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBib2FyZCAmJiBjbGlwYm9hcmQuZGVzdG9yeSAmJiBjbGlwYm9hcmQuZGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGlhbG9nLmJ1dHRvbkluc1swXS5kb20uYXR0cih7CiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtY2xpcGJvYXJkLWFjdGlvbic6ICdjb3B5JywKICAgICAgICAgICAgICAgICAgICAnZGF0YS1jbGlwYm9hcmQtdGFyZ2V0JzogJyNiYXInCiAgICAgICAgICAgICAgICB9KS5hZGRDbGFzcygnYnRuJykub2ZmKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHNob3dFcnJvcihlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0CiAgICAgICAgfTsKICAgIH0pOwoKICAgIGRlZmluZSgnZXgteXVucGFuOnBsdWdpbkluaXQuanMnLCBmdW5jdGlvbihyZXF1aXJlKSB7CiAgICAgICAgdmFyIGN0eCA9IHJlcXVpcmUoJ3N5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcycpLmluc3RhbmNlRm9yU3lzdGVtOwogICAgICAgIHZhciAkID0gcmVxdWlyZSgnYmFzZTp3aWRnZXQvbGlicy9qcXVlcnlwYWNrZXQuanMnKTsKICAgICAgICB2YXIgcGFnZUluZm8gPSByZXF1aXJlKCdleC15dW5wYW46cGFnZUluZm8nKTsKICAgICAgICB2YXIgcHJlZml4ID0gcGFnZUluZm8ucHJlZml4OwogICAgICAgIHJlcXVpcmUuYXN5bmMocHJlZml4ICsgJ2Rvd25sb2FkL3V0aWwvY29udGV4dC5qcycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZS5nZXRDb250ZXh0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY3R4OwogICAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHZhciBkbVByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgJCh1bnNhZmVXaW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZWplY3QoJ2Rvd25sb2FkTWFuYWdlci5qcycpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAvKiByZXF1aXJlLmFzeW5jKHByZWZpeCArICdkb3dubG9hZC9zZXJ2aWNlL2Rvd25sb2FkTWFuYWdlci5qcycsIGZ1bmN0aW9uKGRtKSB7CiAgICAgICAgICAgICAgICBkbS5NT0RFX1BSRV9JTlNUQUxMID0gZG0uTU9ERV9QUkVfRE9XTkxPQUQ7CiAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIH0pOyAqLwogICAgICAgIH0pOwogICAgICAgIHZhciBnamNQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICQodW5zYWZlV2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmVqZWN0KCdndWFuamlhQ29ubmVjdG9yLmpzJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXF1aXJlLmFzeW5jKHByZWZpeCArICdkb3dubG9hZC9zZXJ2aWNlL2d1YW5qaWFDb25uZWN0b3IuanMnLCBmdW5jdGlvbihnakMpIHsKICAgICAgICAgICAgICAgIGdqQy5pbml0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnVpLnRpcCh7IG1vZGU6ICdjYXV0aW9uJywgbXNnOiAn5qOA5rWL5Yiw5q2j5Zyo6LCD55So55m+5bqm572R55uY5a6i5oi356uv77yM6Iul6ISa5pys5aSx5pWI77yM6K+35qOA5p+l5pu05paw5oiW5o+Q5LqkaXNzdWUnLCBoYXNDbG9zZTogdHJ1ZSwgYXV0b0Nsb3NlOiBmYWxzZSB9KTsKICAgICAgICAgICAgICAgICAgICB9LCA1ZTMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGRkc1Byb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgJCh1bnNhZmVXaW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZWplY3QoJ2Rvd25sb2FkRGlyZWN0U2VydmljZS5qcycpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAvKiByZXF1aXJlLmFzeW5jKHByZWZpeCArICdkb3dubG9hZC9zZXJ2aWNlL2Rvd25sb2FkRGlyZWN0U2VydmljZS5qcycsIGZ1bmN0aW9uKGREUykgewogICAgICAgICAgICAgICAgdmFyICRwcmVEbEZyYW1lID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBfID0gZERTLnN0cmFpZ2h0Zm9yd2FyZERvd25sb2FkOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBfICE9PSAnZnVuY3Rpb24nKSByZXR1cm47CiAgICAgICAgICAgICAgICBkRFMuc3RyYWlnaHRmb3J3YXJkRG93bmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBjdHgudWkudGlwKHsgbW9kZTogJ2xvYWRpbmcnLCBtc2c6ICfmraPlnKjlvIDlp4vkuIvovb0uLi4nIH0pOwogICAgICAgICAgICAgICAgICAgIGlmICgkcHJlRGxGcmFtZSA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRmcmFtZSA9ICQoJyNwY3Nkb3dubG9hZGlmcmFtZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRmcmFtZS5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmcmFtZS5yZWFkeShmdW5jdGlvbihldmVudCkgeyBjdHgudWkuaGlkZVRpcCgpOyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwcmVEbEZyYW1lID0gJGZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAxZTMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBfLmFwcGx5KGREUywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIH0pOyAqLwogICAgICAgIH0pOwogICAgICAgIFByb21pc2UuYWxsKFtkbVByb21pc2UsIGdqY1Byb21pc2UsIGRkc1Byb21pc2VdKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmVxdWlyZSgnZXgteXVucGFuOmRvd25sb2FkQnRuSW5pdCcpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihtc2cpIHsKICAgICAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NoYXJlX25vZm91bmRfZGVzJykgIT09IG51bGwpIHJldHVybjsKICAgICAgICAgICAgc2hvd0Vycm9yKG1zZyArICfliqDovb3lpLHotKUnKTsKICAgICAgICB9KTsKICAgIH0pOwogICAgdHJ5IHsKICAgICAgICByZXF1aXJlKCdleC15dW5wYW46cGx1Z2luSW5pdC5qcycpOwogICAgfSBjYXRjaCAoZXgpIHsgc2hvd0Vycm9yKGV4KTsgfQp9KSh1bnNhZmVXaW5kb3cucmVxdWlyZSwgdW5zYWZlV2luZG93LmRlZmluZSwgdW5zYWZlV2luZG93LlByb21pc2UpOw=="},{"name":"Zhihu Visitor","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["*://www.zhihu.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1530109317161},"enabled":true,"position":2,"file_url":"https://tiansh.github.io/us-else/zhihu_visitor/Zhihu_Visitor.user.js","uuid":"f4179599-ddba-4228-8a72-1bc1b37e87c7","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS90aWFuc2gKLy8gQG5hbWUgICAgICAgICAgICAgIFpoaWh1IFZpc2l0b3IKLy8gQG5hbWU6ZW4gICAgICAgICAgIFpoaWh1IFZpc2l0b3IKLy8gQG5hbWU6emggICAgICAgICAgIOefpeS5juWFjeeZu+W9lQovLyBAbmFtZTp6aC1DTiAgICAgICAg55+l5LmO5YWN55m75b2VCi8vIEBkZXNjcmlwdGlvbiAgICAgICDnn6XkuY7lhY3nmbvlvZXmn6XnnIvlm57nrZTlhajmlocKLy8gQGRlc2NyaXB0aW9uOmVuICAgIFZpZXcgemhpaHUuY29tIGFuc3dlcnMgd2l0aG91dCBzaWduIGluCi8vIEBkZXNjcmlwdGlvbjp6aCAgICDnn6XkuY7lhY3nmbvlvZXmn6XnnIvlm57nrZTlhajmloflubbmmL7npLrmm7TlpJrlm57nrZQKLy8gQGRlc2NyaXB0aW9uOnpoLUNOIOefpeS5juWFjeeZu+W9leafpeeci+WbnuetlOWFqOaWh+W5tuaYvuekuuabtOWkmuWbnuetlAovLyBAaW5jbHVkZSAgICAgICAgICAgKjovL3d3dy56aGlodS5jb20vKgovLyBAdXBkYXRlVVJMICAgICAgICAgaHR0cHM6Ly90aWFuc2guZ2l0aHViLmlvL3VzLWVsc2UvemhpaHVfdmlzaXRvci9aaGlodV9WaXNpdG9yLm1ldGEuanMKLy8gQGRvd25sb2FkVVJMICAgICAgIGh0dHBzOi8vdGlhbnNoLmdpdGh1Yi5pby91cy1lbHNlL3poaWh1X3Zpc2l0b3IvWmhpaHVfVmlzaXRvci51c2VyLmpzCi8vIEBob21lcGFnZVVSTCAgICAgICBodHRwczovL3RpYW5zaC5naXRodWIuaW8vdXMtZWxzZS96aGlodV92aXNpdG9yLwovLyBAc3VwcG9ydFVSTCAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3RpYW5zaC91cy1lbHNlL2lzc3Vlcy8KLy8gQHZlcnNpb24gICAgICAgICAgIDMuMwovLyBAZ3JhbnQgICAgICAgICAgICAgR01fYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBjb25uZWN0LXNyYyAgICAgICB3d3cuemhpaHUuY29tCi8vID09L1VzZXJTY3JpcHQ9PQoKdmFyIG1pbmEgPSBmdW5jdGlvbiAoKSB7CgogIC8vIOi/meS4quiEmuacrOS4jeWvueW3sue7j+eZu+W9leeahOWBmuS7u+S9leS6i+aDhQogIGlmIChmdW5jdGlvbiBpc0xvZ2luKCkgewogICAgcmV0dXJuICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2lnbmluLW5vYXV0aCcpOwogIH0oKSkgcmV0dXJuOwoKICAvLyDln7rnoYDlt6XlhbcKCiAgLy8g5Yik5pat5LiA5Liq5YWD57Sg5piv5ZCm5Yy56YWN54m55a6a6YCJ5oup5ZmoCiAgdmFyIG1hdGNoZXMgPSAoZnVuY3Rpb24gKCkgewogICAgdmFyIGVwID0gRWxlbWVudC5wcm90b3R5cGUsIG1hdGNoZXMgPSBlcC5tYXRjaGVzIHx8CiAgICAgIGVwLm1vek1hdGNoZXNTZWxlY3RvciB8fCBlcC5vTWF0Y2hlc1NlbGVjdG9yIHx8CiAgICAgIGVwLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBlcC5tc01hdGNoZXNTZWxlY3RvcjsKICAgIHJldHVybiBmdW5jdGlvbiAoZWxlbWVudCwgc2VsZWN0b3IpIHsKICAgICAgdHJ5IHsgcmV0dXJuIG1hdGNoZXMuY2FsbChlbGVtZW50LCBbc2VsZWN0b3JdKTsgfQogICAgICBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfQogICAgfTsKICB9KCkpOwoKICAvLyDmib7mu6HotrPmnaHku7bnmoTniLblhYPntKAKICB2YXIgcGFyZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIHNlbGVjdG9yKSB7CiAgICB3aGlsZSAoZWxlbWVudCAmJiAhbWF0Y2hlcyhlbGVtZW50LCBzZWxlY3RvcikpIHsKICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTsKICAgIH0KICAgIHJldHVybiBlbGVtZW50OwogIH07CgogIC8vIOWvueixoei9rOivt+axguWPguaVsAogIHZhciBwYXJhbSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgICByZXR1cm4gT2JqZWN0LmtleXMoZGF0YSkubWFwKGZ1bmN0aW9uIChrKSB7CiAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoaykgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtrXSk7CiAgICB9KS5qb2luKCcmJyk7CiAgfTsKCiAgLy8g5qC35byPCgogIC8vIOmakOiXj+aOieS8muWRmOWKn+iDveaMiemSrgogIEdNX2FkZFN0eWxlKGZ1bmN0aW9uICgpIHsgLyohQ1NTCiAgICAvLyDmipXnpajmoYbnmoTigJzotZ7lkIzigJ3igJzlj43lr7nigJ3nrYkKICAgIC56bS12b3RlYmFyIC5sYWJlbCwgLnptLXZvdGViYXIgLnZvdGUtYXJyb3csIC56bS12b3RlYmFyIC5kb3duLCAuem0tY29tbWVudC1mb3JtIHsgZGlzcGxheTogbm9uZTsgfQogICAgLnptLXZvdGViYXIgLmNvdW50IHsgdG9wOiA4cHg7IH0KICAgIC56bS12b3RlYmFyIC51cCB7IGhlaWdodDogNDBweDsgfQogICAgLnptLXZvdGViYXIgLnVwLCAuem0tdm90ZWJhciAuZG93biB7IGN1cnNvcjogYXV0bzsgfQogICAgaHRtbC5uby10b3VjaCAuem0tdm90ZWJhciAudXA6aG92ZXIsIGh0bWwubm8tdG91Y2ggLnptLXZvdGViYXIgLmRvd246aG92ZXIsIC56bS12b3RlYmFyIC51cC5wcmVzc2VkLCAuem0tdm90ZWJhciAuZG93bi5wcmVzc2VkIHsgY29sb3I6ICM2OThlYmY7IGJhY2tncm91bmQ6ICNlZmY2ZmE7IH0KICAgIC5mZWVkLWl0ZW0gLnptLXZvdGViYXIgeyBkaXNwbGF5OiBibG9jazsgfQogICAgLnptLXZvdGViYXI6OmFmdGVyIHsgY29udGVudDogIiAiOyBoZWlnaHQ6IDQwcHg7IHdpZHRoOiAzOHB4OyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLXRvcDogLTQwcHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQogICAgLy8g5Zue562U5LiL55qE5oyJ6ZKu77yM5oSf6LCi44CB5rKh5pyJ5biu5Yqp562JCiAgICAubWV0YS1pdGVtW25hbWU9InRoYW5rcyJdLCAubWV0YS1pdGVtW25hbWU9InNoYXJlIl0sIC5tZXRhLWl0ZW1bbmFtZT0iZmF2byJdLCAubWV0YS1pdGVtW25hbWU9Im5vaGVscCJdLCAubWV0YS1pdGVtW25hbWU9InJlcG9ydCJdLCAuem0tbWV0YS1wYW5lbCA+IC56Zy1idWxsIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAvLyDljp/nlJ/nmoTmmL7npLrlhajpg6jmjInpkq4KICAgIC50b2dnbGUtZXhwYW5kIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAvLyDigJzmm7TlpJrigJ3mjInpkq7mjInkuIvml7bnmoTmoLflvI8KICAgIC56dS1idXR0b24tbW9yZTphY3RpdmUgeyBiYWNrZ3JvdW5kOiAjZGRkOyBib3gtc2hhZG93OiBub25lOyBjdXJzb3I6IGF1dG87IH0KICAgIC8vIOeUqOaIt+S/oeaBr+eahOengeS/oeS4juWFs+azqOaMiemSru+8jOivnemimOeahOWFs+azqOaMiemSru+8jOmXrumimOeahOWFs+azqOaMiemSrgogICAgLnpoLXByb2ZpbGUtY2FyZC5tZW1iZXIgLm9wZXJhdGlvbiwKICAgIC56aC1wcm9maWxlLWNhcmQudG9waWMgLm9wZXJhdGlvbiwKICAgICN6aC1xdWVzdGlvbi1zaWRlLWhlYWRlci13cmFwIC5mb2xsb3ctYnV0dG9uIHsgZGlzcGxheTogbm9uZTsgfQogICAgLy8g6ZW/562U5qGICiAgICAuemgtc3VtbWFyeSArIC56bS1lZGl0YWJsZS1jb250ZW50IHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgfQogICovIH0udG9TdHJpbmcoKS5yZXBsYWNlKC9cclxufFxyL2csICdcbicpLnJlcGxhY2UoL1xuXHMqXC9cLy4qXG4vZywgJ1xuJykucmVwbGFjZSgvKF4uKlxuKXwoXG4uKiQpL2csICcnKSk7CgogIC8vIOiHquWKqOWkhOeQhuWbnuetlAogIHZhciBmaXhBbnN3ZXJzID0gKGZ1bmN0aW9uICgpIHsKICAgIHZhciBoYW5kbGVycyA9IFtdOwogICAgdmFyIG9ic2VydmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBmaXhlZCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChbCiAgICAgICAgJy56bS1pdGVtLWFuc3dlciArIC56bS1pdGVtLWFuc3dlciAuem0taXRlbS1yaWNoLXRleHQ6bm90KFt6dmhmc10pJywKICAgICAgICAnLmF3ZXNvbWUtYW5zd2VyLWxpc3QgLnptLWl0ZW0tcmljaC10ZXh0Om5vdChbenZoZnNdKScKICAgICAgXS5qb2luKCcsJykpLCAwKTsKICAgICAgZml4ZWQuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCd6dmhmcycsICcnKTsKICAgICAgICBoYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChmKSB7IGYoaXRlbSk7IH0pOwogICAgICB9KTsKICAgIH07CiAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihvYnNlcnZlKTsKICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgeyAnY2hpbGRMaXN0JzogdHJ1ZSwgJ3N1YnRyZWUnOiB0cnVlIH0pOwogICAgcmV0dXJuIGZ1bmN0aW9uIGZpeEFuc3dlcnMoY2FsbGJhY2spIHsgaGFuZGxlcnMucHVzaChjYWxsYmFjayk7IH07CiAgfSgpKTsKCiAgLy8g5YWo5bGA5aSE55CG54K55Ye75LqL5Lu2CiAgdmFyIGhhbmRsZUNsaWNrID0gKGZ1bmN0aW9uICgpIHsKICAgIHZhciBoYW5kbGVycyA9IFtdOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS53aGljaCAhPT0gMSkgcmV0dXJuOwogICAgICB2YXIgbWF0Y2hlZCA9IGZhbHNlLCB0YXJnZXQgPSBlLnRhcmdldCwgY2FsbGJhY2tzID0gW107CiAgICAgIGhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHsKICAgICAgICBpZiAoIW1hdGNoZXModGFyZ2V0LCBoYW5kbGVyLnNlbGVjdG9yKSkgcmV0dXJuOwogICAgICAgIG1hdGNoZWQgPSB0cnVlOyBjYWxsYmFja3MucHVzaChoYW5kbGVyLmNhbGxiYWNrKTsKICAgICAgfSk7CiAgICAgIGlmIChtYXRjaGVkKSB7IGUucHJldmVudERlZmF1bHQoKTsgZS5zdG9wUHJvcGFnYXRpb24oKTsgfQogICAgICBjYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoZikgeyBmKGUpOyB9KTsKICAgIH0sIHRydWUpOwogICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKHNlbGVjdG9yLCBjYWxsYmFjaykgewogICAgICBoYW5kbGVycy5wdXNoKHsgJ3NlbGVjdG9yJzogc2VsZWN0b3IsICdjYWxsYmFjayc6IGNhbGxiYWNrIH0pOwogICAgfTsKICB9KCkpOwoKICAvLyDmmL7npLrlm57nrZTnmoTor4TorroKICBoYW5kbGVDbGljayhbJy56aC1xdWVzdGlvbi1hbnN3ZXItd3JhcHBlcjpub3QoLmF1dG9oaWRlLWZhbHNlKSAuem0taXRlbS1hbnN3ZXJbZGF0YS1haWRdIC50b2dnbGUtY29tbWVudCcsCiAgICAnLmF3ZXNvbWUtYW5zd2VyLWxpc3QgLnptLWl0ZW0tYW5zd2VyW2RhdGEtYWlkXSAudG9nZ2xlLWNvbW1lbnQnXS5qb2luKCcsJyksCiAgZnVuY3Rpb24gc2hvd0NvbW1lbnQoZSkgewogICAgdmFyIGFucyA9IHBhcmVudChlLnRhcmdldCwgJ1tkYXRhLWFpZF0nKTsKICAgIC8vIOmBv+WFjeaYvuekuuWkmuS4quivhOiuugogICAgaWYgKGFucy5oYXNBdHRyaWJ1dGUoJ2RhdGEtY210c2hvd24nKSkgcmV0dXJuOwogICAgYW5zLnNldEF0dHJpYnV0ZSgnZGF0YS1jbXRzaG93bicsICcnKTsKICAgIC8vIOaYvuekuuivhOiuugogICAgdmFyIGlkID0gYW5zLmdldEF0dHJpYnV0ZSgnZGF0YS1haWQnKTsKICAgIHZhciBtZXRhUGFuZWwgPSBhbnMucXVlcnlTZWxlY3RvcignLnptLW1ldGEtcGFuZWwnKTsKICAgIG1ldGFQYW5lbC5jbGFzc05hbWUgPSAnem0tbWV0YS1wYW5lbCBnb29nLXNjcm9sbGZsb2F0ZXIgZm9jdXNpbic7CiAgICB2YXIgY29tbWVudEJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29tbWVudEJveC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iem0tY29tbWVudC1ib3giIHN0eWxlPSIiPjxpIGNsYXNzPSJpY29uIGljb24tc3Bpa2Ugem0tY29tbWVudC1idWJibGUiPjwvaT48ZGl2IGNsYXNzPSJ6bS1jb21tZW50LXNwaW5uZXIiPuato+WcqOWKoOi9ve+8jOivt+eojeetiSA8aSBjbGFzcz0ic3Bpbm5lci1saWdodGdyYXkiPjwvaT48L2Rpdj48L2Rpdj4nOwogICAgY29tbWVudEJveCA9IG1ldGFQYW5lbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjb21tZW50Qm94LmZpcnN0Q2hpbGQsIG1ldGFQYW5lbC5uZXh0U2libGluZyk7CiAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICdtZXRob2QnOiAnR0VUJywKICAgICAgJ3VybCc6IGxvY2F0aW9uLnByb3RvY29sICsgJy8vd3d3LnpoaWh1LmNvbS9ub2RlL0Fuc3dlckNvbW1lbnRCb3hWMj9wYXJhbXM9eyUyMmFuc3dlcl9pZCUyMiUzQSUyMicgKyBpZCArICclMjIlMkMlMjJsb2FkX2FsbCUyMiUzQWZhbHNlfScsCiAgICAgICdvbmxvYWQnOiBmdW5jdGlvbiAocmVzcCkgewogICAgICAgIGNvbW1lbnRCb3gub3V0ZXJIVE1MID0gcmVzcC5yZXNwb25zZVRleHQ7CiAgICAgICAgdmFyIGxvYWRtb3JlID0gYW5zLnF1ZXJ5U2VsZWN0b3IoJy5sb2FkLW1vcmUnKTsKICAgICAgICBpZiAobG9hZG1vcmUpIHsKICAgICAgICAgIGxvYWRtb3JlLmhyZWYgPSBhbnMucXVlcnlTZWxlY3RvcignLmFuc3dlci1kYXRlLWxpbmsnKS5ocmVmOwogICAgICAgICAgbG9hZG1vcmUudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgICAgfQogICAgICB9LAogICAgfSk7CiAgfSk7CgogIC8vIOaYvuekuuWbnuetlOaXtuS/ruWkjeWbnuetlOS4reeahOS4gOS6m+mTvuaOpeS7gOS5iOeahAogIGZpeEFuc3dlcnMoZnVuY3Rpb24gZml4SW1hZ2VzKGFucykgewogICAgLy8g6Kej5Yaz5Zu+54mH5bu26L+f5Yqg6L296Zeu6aKYCiAgICB2YXIgaW1ncyA9IGFucy5xdWVyeVNlbGVjdG9yQWxsKCdpbWdbZGF0YS1hY3R1YWxzcmNdJyk7CiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGltZ3MsIGZ1bmN0aW9uIChpbWcpIHsKICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgaW1nLmdldEF0dHJpYnV0ZSgnZGF0YS1hY3R1YWxzcmMnKSk7CiAgICB9KTsKICB9KTsKCiAgLy8g4oCc5re75Yqg6K+E6K664oCd5a2X5qC35pS55oiQ4oCcMCDmnaHor4TorrrigJ0KICBmaXhBbnN3ZXJzKGZ1bmN0aW9uIGZpeEFkZENvbW1lbnQoY29udGVudCkgewogICAgdmFyIGNvbW1lbnQgPSBwYXJlbnQoY29udGVudCwgJy56bS1pdGVtLWFuc3dlcicpLnF1ZXJ5U2VsZWN0b3IoJy5tZXRhLWl0ZW1bbmFtZT0iYWRkY29tbWVudCJdJykubGFzdENoaWxkOwogICAgdmFyIHRleHQgPSBjb21tZW50LnRleHRDb250ZW50LCByZSA9IHRleHQucmVwbGFjZSgn5re75Yqg6K+E6K66JywgJzAg5p2h6K+E6K66Jyk7CiAgICBpZiAocmUgIT09IHRleHQpIGNvbW1lbnQudGV4dENvbnRlbnQgPSByZTsKICB9KTsKCiAgLy8g5pi+56S65pu05aSa5Zue562UCiAgaGFuZGxlQ2xpY2soJy56dS1idXR0b24tbW9yZScsIChmdW5jdGlvbiAoKSB7CiAgICAvLyDmmL7npLrkuIDmnaHlm57nrZQKICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKGFucykgewogICAgICB2YXIgbGFzdEFuc3dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy56bS1pdGVtLWFuc3dlcicpOwogICAgICBsYXN0QW5zd2VyID0gbGFzdEFuc3dlcltsYXN0QW5zd2VyLmxlbmd0aCAtIDFdOwogICAgICB2YXIgcmVmID0gbGFzdEFuc3dlci5uZXh0U2libGluZzsKICAgICAgdmFyIG5ld0Fuc3dlcldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgbmV3QW5zd2VyV3JhcC5pbm5lckhUTUwgPSBhbnM7CiAgICAgIHZhciBuZXdBbnN3ZXIgPSBuZXdBbnN3ZXJXcmFwLmZpcnN0Q2hpbGQ7CiAgICAgIHJlZi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdBbnN3ZXIsIHJlZik7CiAgICB9OwoKICAgIC8vIOW3sue7j+ayoeacieabtOWkmueahOWbnuetlOS6hgogICAgdmFyIG5vbW9yZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy56dS1idXR0b24tbW9yZScpOwogICAgICBidXR0b24ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChidXR0b24pOwogICAgfTsKCiAgICAvLyDlpITnkIbmmL7npLrmm7TlpJrlm57nrZTnmoTmjInpkq4KICAgIHJldHVybiBmdW5jdGlvbiBzaG93TW9yZUJ1dHRvbihlKSB7CiAgICAgIHZhciBidXR0b24gPSBlLnRhcmdldDsKICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2xvYWRpbmcnKSkgcmV0dXJuOwogICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnbG9hZGluZycpOwoKICAgICAgdmFyIG9mZnNldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy56bS1pdGVtLWFuc3dlcicpLmxlbmd0aDsKICAgICAgdmFyIHBhZ2VzaXplID0gMjA7CiAgICAgIHZhciB1cmxfdG9rZW4gPSBOdW1iZXIobG9jYXRpb24ucGF0aG5hbWUubWF0Y2goL1wvKFxkKykkLylbMV0pOwogICAgICB2YXIgcGFyYW1zID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICd1cmxfdG9rZW4nOiB1cmxfdG9rZW4sCiAgICAgICAgJ3BhZ2VzaXplJzogcGFnZXNpemUsCiAgICAgICAgJ29mZnNldCc6IG9mZnNldCwKICAgICAgfSk7CgogICAgICB2YXIgX3hzcmYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJfeHNyZiJdJykudmFsdWU7CgogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAnX3hzcmYnOiBfeHNyZiwKICAgICAgICAnbWV0aG9kJzogJ25leHQnLAogICAgICAgICdwYXJhbXMnOiBwYXJhbXMKICAgICAgfTsKCiAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAnbWV0aG9kJzogJ1BPU1QnLAogICAgICAgICd1cmwnOiBsb2NhdGlvbi5wcm90b2NvbCArICcvL3d3dy56aGlodS5jb20vbm9kZS9RdWVzdGlvbkFuc3dlckxpc3RWMicsCiAgICAgICAgJ2hlYWRlcnMnOiB7CiAgICAgICAgICAnUmVmZXJlcic6IGxvY2F0aW9uLmhyZWYsCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsCiAgICAgICAgfSwKICAgICAgICAnZGF0YSc6IHBhcmFtKGRhdGEpLAogICAgICAgICdvbmxvYWQnOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciByZXNwID0gSlNPTi5wYXJzZShyZXNwb25zZS5yZXNwb25zZVRleHQpOwogICAgICAgICAgcmVzcC5tc2cuZm9yRWFjaChzaG93KTsKICAgICAgICAgIGlmIChyZXNwLm1zZy5sZW5ndGggPCAyMCkgbm9tb3JlKCk7CiAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpOwogICAgICAgIH0sCiAgICAgICAgJ29uZXJyb3InOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwogIH0oKSkpOwoKfTsKCmlmIChbJ2NvbXBsZXRlJywgJ2xvYWRlZCcsICdpbnRlcmFjdGl2ZSddLmluZGV4T2YoZG9jdW1lbnQucmVhZHlTdGF0ZSkgIT09IC0xKSBtaW5hKCk7CmVsc2Ugd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBtaW5hKTsK"},{"name":"True URL downloads","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":["http://192.168.*"],"orig_includes":["http://*","https://*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-body","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1530109317176},"enabled":true,"position":3,"file_url":"https://greasyfork.org/scripts/7362-true-url-downloads/code/True%20URL%20downloads.user.js","uuid":"d95c36a8-d7a4-4a41-bc8d-55fbb7181e99","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFRydWUgVVJMIGRvd25sb2FkcwovLyBAbmFtZTp6aC1DTiAgICAgVHJ1ZSBVUkwgZG93bmxvYWRzCi8vIEBuYW1lOnpoLVRXICAgICBUcnVlIFVSTCBkb3dubG9hZHMKLy8gQG5hbWU6amEgICAgICAgIOi/hembt+OAgeW/q+i7iuOAgVFR5peL6aKo44Gq44Gp44Gu5bCC5pyJ44OB44Kn44O844Oz44GM6Kej6Kqt44GV44KM44GmCi8vIEBhdXRob3IgICAgICAgICBZdWxlaSwgSG9vdGhpbgovLyBAbmFtZXNwYWNlICAgICAgWXVsZWlncUBnbWFpbC5jb20KLy8gQGRlc2NyaXB0aW9uICAgIERlY3J5cHRpb24gYW5kIERpc3BsYXkgdGhlIHJlYWwgVVJMIG9mIHRoZSBkb3dubG9hZCBsaW5rcy4ob2YgeHVubGVpLGt1YWljaGUseHVhbmZlbmc7dGh1bmRlcixmbGFzaGdldCxxcWRsKQovLyBAZGVzY3JpcHRpb246emgtQ04gICAg6L+F6Zu344CB5b+r6L2m44CBUVHml4vpo47nrYnkuJPmnInpk77op6Plr4YgRGVjcnlwdGlvbiBhbmQgRGlzcGxheSB0aGUgcmVhbCBVUkwgb2YgdGhlIGRvd25sb2FkIGxpbmtzLihvZiB4dW5sZWksa3VhaWNoZSx4dWFuZmVuZzt0aHVuZGVyLGZsYXNoZ2V0LHFxZGwpCi8vIEBkZXNjcmlwdGlvbjp6aC1UVyAgICDov4Xpm7fjgIHlv6vou4rjgIFRUeaXi+miqOetieWwiOaciemPiOino+WvhiBEZWNyeXB0aW9uIGFuZCBEaXNwbGF5IHRoZSByZWFsIFVSTCBvZiB0aGUgZG93bmxvYWQgbGlua3MuKG9mIHh1bmxlaSxrdWFpY2hlLHh1YW5mZW5nO3RodW5kZXIsZmxhc2hnZXQscXFkbCkKLy8gQGRlc2NyaXB0aW9uOmphICAgICAgIFRydWUgVVJMIGRvd25sb2FkcywgRGVjcnlwdGlvbiBhbmQgRGlzcGxheSB0aGUgcmVhbCBVUkwgb2YgdGhlIGRvd25sb2FkIGxpbmtzLihvZiB4dW5sZWksa3VhaWNoZSx4dWFuZmVuZzt0aHVuZGVyLGZsYXNoZ2V0LHFxZGwpCi8vIEB2ZXJzaW9uICAgICAgICAxLjIyLjExCi8vIEBjcmVhdGUgICAgICAgICAyMDEzLTAxLTA1Ci8vIEBpbmNsdWRlICAgICAgICBodHRwOi8vKgovLyBAaW5jbHVkZSAgICAgICAgaHR0cHM6Ly8qCi8vIEBleGNsdWRlICAgICAgICBodHRwOi8vMTkyLjE2OC4qCi8vIEBydW4tYXQgICAgICAgICBkb2N1bWVudC1ib2R5Ci8vIEBjb3B5cmlnaHQgICAgICAyMDEzKywgWXVsZWksIEhvb3RoaW4KLy8gQGdyYW50ICAgICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gQGdyYW50ICAgICAgICAgIEdNX3NldENsaXBib2FyZAovLyBAbGljZW5zZSAgICAgICAgTUlUIExpY2Vuc2UKLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9qcXVlcnkvMS43LjIvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzI2NjE1LW1hbmFnZXJsaW5rcy9jb2RlL21hbmFnZXJMaW5rcy5qcwovLyBAY29udHJpYnV0aW9uVVJMIGh0dHBzOi8vd3d3LnBheXBhbC5jb20vY2dpLWJpbi93ZWJzY3I/Y21kPV9kb25hdGlvbnMmYnVzaW5lc3M9cml4aXhpQHNpbmEuY29tJml0ZW1fbmFtZT1HcmVhc3krRm9yaytkb25hdGlvbgovLyBAY29udHJpYnV0aW9uQW1vdW50IDEKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBmdW5jdGlvbiBZdSgpIHsKICAgICAgICBkZWNvZGU2NCA9ICh3aW5kb3cuYXRvYikgPyBhdG9iIDogZGVjb2RlNjQ7CiAgICAgICAgdmFyIFJzdHIgPSAvXlxzKig/OnRodW5kZXJ8Zmxhc2hnZXR8cXFkbHxmczJ5b3UpOlwvXC8oW14nIlxzXSopL2ksCiAgICAgICAgICAgIGFmdCA9IC9eQUF8WlokfFxbRkxBU0hHRVRcXS9nLAogICAgICAgICAgICBhZmYgPSAvJi4qJHxcLyQvZzsKICAgICAgICB2YXIgVElkID0gInRpdGxlPSfilJxUcnVlVXJs4pSkJyBJRD0nXHUwMDU5XHUwMDc1JyI7CiAgICAgICAgdmFyIGJhc2U2NERlY29kZUNoYXJzID0gbmV3IEFycmF5KC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCA2MiwgLTEsIC0xLCAtMSwgNjMsIDUyLCA1MywgNTQsIDU1LCA1NiwgNTcsIDU4LCA1OSwgNjAsIDYxLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwgMTYsIDE3LCAxOCwgMTksIDIwLCAyMSwgMjIsIDIzLCAyNCwgMjUsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIDI2LCAyNywgMjgsIDI5LCAzMCwgMzEsIDMyLCAzMywgMzQsIDM1LCAzNiwgMzcsIDM4LCAzOSwgNDAsIDQxLCA0MiwgNDMsIDQ0LCA0NSwgNDYsIDQ3LCA0OCwgNDksIDUwLCA1MSwgLTEsIC0xLCAtMSwgLTEsIC0xKTsKICAgICAgICB2YXIgbGlua3NBcnIgPSBbXTsKICAgICAgICAvL+i/hembt+OAgeW/q+i9puOAgeaXi+mjjlVSTOino+eggeino+WvhuS7jui/memHjOW8gOWniwogICAgICAgIHZhciBEZWNyeXB0aW9uID0gZnVuY3Rpb24odXJsKSB7IC8v5YWI6Kej5a+G5YaN6Kej56CBCiAgICAgICAgICAgIGlmICh1cmwgIT0gJycpIHsKICAgICAgICAgICAgICAgIHZhciBzdHIgPSB1cmwuaHJlZiwKICAgICAgICAgICAgICAgICAgICBzciA9IHVybC5ocmVmOwogICAgICAgICAgICAgICAgdmFyIHR5cGUgPSAwOwogICAgICAgICAgICAgICAgaWYgKFJzdHIudGVzdChzdHIpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cjEgPSBzdHIubWF0Y2goUnN0cik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXA7CiAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gdXRmOHRvMTYoYmFzZTY0ZGVjb2RlKHN0cjFbMV0ucmVwbGFjZShhZmYsICcnKSkpLnJlcGxhY2UoYWZ0LCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFpc0NsZWFuU3RyKHRlbXApKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBkZWNvZGU2NChzdHIxWzFdLnJlcGxhY2UoYWZmLCAnJykpLnJlcGxhY2UoYWZ0LCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBkZWNvZGU2NChzdHIxWzFdLnJlcGxhY2UoYWZmLCAnJykpLnJlcGxhY2UoYWZ0LCAnJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHN0ciA9IHRlbXA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzdHIuaW5kZXhPZigiOiIpIDwgMCkgewogICAgICAgICAgICAgICAgICAgIHN0ciA9ICJodHRwOi8vIiArIHN0ci5zcGxpdCgifCIpWzBdOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IDAgJiYgL1teKFx3fFwvfFwufFw/fFw9fFwmfFw6fFxbfFxdKV0vaWcudGVzdChzdHIpKSB7CiAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyQW5zaTJVbmljb2RlKHN0cik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoc3IgIT0gc3RyKSB7CiAgICAgICAgICAgICAgICAgICAgdXJsLnRpdGxlID0gJ+KUnOatpOmTvuaOpeW3suino+WvhuKUpCc7CiAgICAgICAgICAgICAgICAgICAgdXJsLnN0eWxlLm91dGxpbmUgPSAnI2YwZiBkYXNoZWQgMnB4JzsKICAgICAgICAgICAgICAgICAgICB1cmwuaHJlZiA9IHN0cjsKICAgICAgICAgICAgICAgICAgICBpZihsaW5rc0Fyci50b1N0cmluZygpLmluZGV4T2Yoc3RyKSA9PSAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgbGlua3NBcnIucHVzaChzdHIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24obykgewogICAgICAgICAgICBpZiAoby5idXR0b24gPT0gMCAmJiAoby5jdHJsS2V5IHx8IG8ubWV0YUtleSkpIHsKICAgICAgICAgICAgICAgIGlmIChvLnRhcmdldCkgewogICAgICAgICAgICAgICAgICAgIGlmICgiSU5QVVQiID09IG8udGFyZ2V0LnRhZ05hbWUgfHwgIlRFWFRBUkVBIiA9PSBvLnRhcmdldC50YWdOYW1lKSByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgWldvcmQgPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgdmFyIFptYXQgPSBaV29yZC5tYXRjaChSc3RyKTsKICAgICAgICAgICAgICAgIHZhciBDc3QgPSAiIHN0eWxlPSdjb2xvcjpyZWQnIHRhcmdldD0nX2JsYW5rJyI7CiAgICAgICAgICAgICAgICBpZiAoWldvcmQgIT0gJycgJiYgUnN0ci50ZXN0KFpXb3JkKSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gMDsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcDsKICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSB1dGY4dG8xNihiYXNlNjRkZWNvZGUoWm1hdFsxXS5yZXBsYWNlKGFmZiwgJycpKSkucmVwbGFjZShhZnQsICcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWlzQ2xlYW5TdHIodGVtcCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGRlY29kZTY0KFptYXRbMV0ucmVwbGFjZShhZmYsICcnKSkucmVwbGFjZShhZnQsICcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGRlY29kZTY0KFptYXRbMV0ucmVwbGFjZShhZmYsICcnKSkucmVwbGFjZShhZnQsICcnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIFRsaW5rID0gdGVtcDsKICAgICAgICAgICAgICAgICAgICBpZiAoVGxpbmsgIT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFRsaW5rLmluZGV4T2YoIjovLyIpIDwgMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGxpbmsgPSAiaHR0cDovLyIgKyBUbGluazsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IDAgJiYgL1teKFx3fFwvfFwufFw/fFw9fFwmfFw6fFxbfFxdKV0vaWcudGVzdChUbGluaykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRsaW5rID0gc3RyQW5zaTJVbmljb2RlKFRsaW5rKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFRUayA9ICI8YSBocmVmPSciICsgVGxpbmsgKyAiJyAiICsgVElkICsgQ3N0ICsgIj4iICsgVGxpbmsgKyAiPC9hPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIG8udGFyZ2V0LmlubmVySFRNTCA9IG8udGFyZ2V0LmlubmVySFRNTC5yZXBsYWNlKC9hbXA7L2csICcnKS5yZXBsYWNlKFptYXRbMF0sIFRUayk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwgZmFsc2UpOwoKICAgICAgICBmdW5jdGlvbiBkZWNUaGlzKCl7CiAgICAgICAgICAgIERlY3J5cHRpb24odGhpcyk7CiAgICAgICAgfQoKICAgICAgICAvL+W8gOWni+Wvu+aJvuaJgOaciemTvuaOpeWcsOWdgAogICAgICAgIGZ1bmN0aW9uIHNlZWtVcmwoKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7CiAgICAgICAgICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2EnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgayA9IGxpbmsubGVuZ3RoOyBpIDwgazsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoL1x3K2hyZWYvaS50ZXN0KGxpbmtbaV0ub3V0ZXJIVE1MKSkgeyAvL+aemuS4vuaJgOacieS4k+eUqOmTvuWxnuaApwogICAgICAgICAgICAgICAgICAgIHZhciBsaW9uID0gbGlua1tpXS5nZXRBdHRyaWJ1dGUoIm9uY29udGV4dG1lbnUiKSxhdHRyOwogICAgICAgICAgICAgICAgICAgIGlmICgvXHcraHJlZj0vaS50ZXN0KGxpbmtbaV0ub3V0ZXJIVE1MKSkgewogICAgICAgICAgICAgICAgICAgICAgICBhdHRyID0gbGlua1tpXS5vdXRlckhUTUwubWF0Y2goL1x3K2hyZWY9L2kpLnRvU3RyaW5nKCkucmVwbGFjZSgvPS8sICcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGlua1tpXS5ocmVmID0gbGlua1tpXS5nZXRBdHRyaWJ1dGUoYXR0cik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtbaV0ucmVtb3ZlQXR0cmlidXRlKGF0dHIpOwogICAgICAgICAgICAgICAgICAgICAgICBEZWNyeXB0aW9uKGxpbmtbaV0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rW2ldLm9uY29udGV4dG1lbnUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHIgPSBsaW5rW2ldLm91dGVySFRNTC5tYXRjaCgvXHcraHJlZj0vaSkudG9TdHJpbmcoKS5yZXBsYWNlKC89LywgJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXR0cilsaW5rW2ldLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIERlY3J5cHRpb24obGlua1tpXSk7CiAgICAgICAgICAgICAgICAgICAgfSAvL+aemuS4vuWksei0peWQjuWGjeS+puWQrOWkhOeQhu+8jOWmgue9kemhteS4iuaciemUmeivrwogICAgICAgICAgICAgICAgICAgIGxpbmtbaV0ucmVtb3ZlQXR0cmlidXRlKCJvbmNvbnRleHRtZW51Iik7CiAgICAgICAgICAgICAgICAgICAgbGlua1tpXS5yZW1vdmVBdHRyaWJ1dGUoIm9uY2xpY2siKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgRGVjcnlwdGlvbihsaW5rW2ldKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZWVrVXJsKCk7CiAgICAgICAgdmFyIGlzc2Vla2luZz1mYWxzZTsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmKGRvY3VtZW50LnJlYWR5U3RhdGU9PSJjb21wbGV0ZSIgJiYgIWlzc2Vla2luZyl7CiAgICAgICAgICAgICAgICBpc3NlZWtpbmc9dHJ1ZTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBzZWVrVXJsKCk7CiAgICAgICAgICAgICAgICAgICAgaXNzZWVraW5nPWZhbHNlOwogICAgICAgICAgICAgICAgfSw1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgZnVuY3Rpb24gY29weUxpbmsoKSB7CiAgICAgICAgICAgIHNob3dMaW5rRnJhbWUoZnVuY3Rpb24ocil7CiAgICAgICAgICAgICAgICBpZihyKXsKICAgICAgICAgICAgICAgICAgICBHTV9zZXRDbGlwYm9hcmQocik7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuWkjeWItuaIkOWKn++8gSIpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuW9k+WJjemhtemdouayoeaciei1hOa6kO+8gSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgLy9HTV9yZWdpc3Rlck1lbnVDb21tYW5kKCJUcnVlIHVybCBkb3dubG9hZHMgc2VlayIsIHNlZWtVcmwpOwogICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoIlRydWUgdXJsIGxpbmtzIGNvcHkiLCBjb3B5TGluayk7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYoZS5rZXlDb2RlID09IDg4ICYmIGUuYWx0S2V5KSB7CiAgICAgICAgICAgICAgICBjb3B5TGluaygpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGZ1bmN0aW9uIEFuc2ljb2RlQ2hyKCkgewogICAgICAgICAgICByZXR1cm4gJ0ExRTgsQTFFQyxBMUE3LEExRTMsQTFDMCxBMUE0LEExQzEsQThBNCxBOEEyLEE4QTgsQThBNixBOEJBLEE4QUMsQThBQSxBOEIwLEE4QUUsQTFDMixBOEI0LEE4QjIsQThCOSxBOEExLEE4QTUsQThBNyxBOEE5LEE4QUQsQThCMSxBOEEzLEE4QUIsQThBRixBOEIzLEE4QjUsQThCNixBOEI3LEE4QjgsQTFBNixBMUE1LEE2QTEsQTZBMixBNkEzLEE2QTQsQTZBNSxBNkE2LEE2QTcsQTZBOCxBNkE5LEE2QUEsQTZBQixBNkFDLEE2QUQsQTZBRSxBNkFGLEE2QjAsQTZCMSxBNkIyLEE2QjMsQTZCNCxBNkI1LEE2QjYsQTZCNyxBNkI4LEE2QzEsQTZDMixBNkMzLEE2QzQsQTZDNSxBNkM2LEE2QzcsQTZDOCxBNkM5LEE2Q0EsQTZDQixBNkNDLEE2Q0QsQTZDRSxBNkNGLEE2RDAsQTZEMSxBNkQyLEE2RDMsQTZENCxBNkQ1LEE2RDYsQTZENyxBNkQ4LEE3QTcsQTdBMSxBN0EyLEE3QTMsQTdBNCxBN0E1LEE3QTYsQTdBOCxBN0E5LEE3QUEsQTdBQixBN0FDLEE3QUQsQTdBRSxBN0FGLEE3QjAsQTdCMSxBN0IyLEE3QjMsQTdCNCxBN0I1LEE3QjYsQTdCNyxBN0I4LEE3QjksQTdCQSxBN0JCLEE3QkMsQTdCRCxBN0JFLEE3QkYsQTdDMCxBN0MxLEE3RDEsQTdEMixBN0QzLEE3RDQsQTdENSxBN0Q2LEE3RDgsQTdEOSxBN0RBLEE3REIsQTdEQyxBN0RELEE3REUsQTdERixBN0UwLEE3RTEsQTdFMixBN0UzLEE3RTQsQTdFNSxBN0U2LEE3RTcsQTdFOCxBN0U5LEE3RUEsQTdFQixBN0VDLEE3RUQsQTdFRSxBN0VGLEE3RjAsQTdGMSxBN0Q3LEExQUEsQTFBQyxBMUFFLEExQUYsQTFCMCxBMUIxLEExQUQsQTFFQixBMUU0LEExRTUsQTFGOSxBMUU2LEExRUQsQTJGMSxBMkYyLEEyRjMsQTJGNCxBMkY1LEEyRjYsQTJGNyxBMkY4LEEyRjksQTJGQSxBMkZCLEEyRkMsQTFGQixBMUZDLEExRkEsQTFGRCxBMUNBLEExQzcsQTFDNixBMUNDLEExRDgsQTFERSxBMUNGLEExQ0UsQTFDNCxBMUM1LEExQzksQTFDOCxBMUQyLEExRDMsQTFFMCxBMURGLEExQzMsQTFDQixBMUQ3LEExRDYsQTFENSxBMUQ5LEExRDQsQTFEQyxBMURELEExREEsQTFEQixBMUQxLEExQ0QsQTFEMCxBMkQ5LEEyREEsQTJEQixBMkRDLEEyREQsQTJERSxBMkRGLEEyRTAsQTJFMSxBMkUyLEEyQzUsQTJDNixBMkM3LEEyQzgsQTJDOSxBMkNBLEEyQ0IsQTJDQyxBMkNELEEyQ0UsQTJDRixBMkQwLEEyRDEsQTJEMixBMkQzLEEyRDQsQTJENSxBMkQ2LEEyRDcsQTJEOCxBMkIxLEEyQjIsQTJCMyxBMkI0LEEyQjUsQTJCNixBMkI3LEEyQjgsQTJCOSxBMkJBLEEyQkIsQTJCQyxBMkJELEEyQkUsQTJCRixBMkMwLEEyQzEsQTJDMixBMkMzLEEyQzQsQTlBNCxBOUE1LEE5QTYsQTlBNyxBOUE4LEE5QTksQTlBQSxBOUFCLEE5QUMsQTlBRCxBOUFFLEE5QUYsQTlCMCxBOUIxLEE5QjIsQTlCMyxBOUI0LEE5QjUsQTlCNixBOUI3LEE5QjgsQTlCOSxBOUJBLEE5QkIsQTlCQyxBOUJELEE5QkUsQTlCRixBOUMwLEE5QzEsQTlDMixBOUMzLEE5QzQsQTlDNSxBOUM2LEE5QzcsQTlDOCxBOUM5LEE5Q0EsQTlDQixBOUNDLEE5Q0QsQTlDRSxBOUNGLEE5RDAsQTlEMSxBOUQyLEE5RDMsQTlENCxBOUQ1LEE5RDYsQTlENyxBOUQ4LEE5RDksQTlEQSxBOURCLEE5REMsQTlERCxBOURFLEE5REYsQTlFMCxBOUUxLEE5RTIsQTlFMyxBOUU0LEE5RTUsQTlFNixBOUU3LEE5RTgsQTlFOSxBOUVBLEE5RUIsQTlFQyxBOUVELEE5RUUsQTlFRixBMUY2LEExRjUsQTFGOCxBMUY3LEExRjQsQTFGMyxBMUYwLEExRjIsQTFGMSxBMUVGLEExRUUsQTFFMixBMUUxLEExQTEsQTFBMixBMUEzLEExQTgsQTFBOSxBMUI0LEExQjUsQTFCNixBMUI3LEExQjgsQTFCOSxBMUJBLEExQkIsQTFCRSxBMUJGLEExRkUsQTFCMixBMUIzLEExQkMsQTFCRCxBNEExLEE0QTIsQTRBMyxBNEE0LEE0QTUsQTRBNixBNEE3LEE0QTgsQTRBOSxBNEFBLEE0QUIsQTRBQyxBNEFELEE0QUUsQTRBRixBNEIwLEE0QjEsQTRCMixBNEIzLEE0QjQsQTRCNSxBNEI2LEE0QjcsQTRCOCxBNEI5LEE0QkEsQTRCQixBNEJDLEE0QkQsQTRCRSxBNEJGLEE0QzAsQTRDMSxBNEMyLEE0QzMsQTRDNCxBNEM1LEE0QzYsQTRDNyxBNEM4LEE0QzksQTRDQSxBNENCLEE0Q0MsQTRDRCxBNENFLEE0Q0YsQTREMCxBNEQxLEE0RDIsQTREMyxBNEQ0LEE0RDUsQTRENixBNEQ3LEE0RDgsQTREOSxBNERBLEE0REIsQTREQyxBNERELEE0REUsQTRERixBNEUwLEE0RTEsQTRFMixBNEUzLEE0RTQsQTRFNSxBNEU2LEE0RTcsQTRFOCxBNEU5LEE0RUEsQTRFQixBNEVDLEE0RUQsQTRFRSxBNEVGLEE0RjAsQTRGMSxBNEYyLEE0RjMsQTVBMSxBNUEyLEE1QTMsQTVBNCxBNUE1LEE1QTYsQTVBNyxBNUE4LEE1QTksQTVBQSxBNUFCLEE1QUMsQTVBRCxBNUFFLEE1QUYsQTVCMCxBNUIxLEE1QjIsQTVCMyxBNUI0LEE1QjUsQTVCNixBNUI3LEE1QjgsQTVCOSxBNUJBLEE1QkIsQTVCQyxBNUJELEE1QkUsQTVCRixBNUMwLEE1QzEsQTVDMixBNUMzLEE1QzQsQTVDNSxBNUM2LEE1QzcsQTVDOCxBNUM5LEE1Q0EsQTVDQixBNUNDLEE1Q0QsQTVDRSxBNUNGLEE1RDAsQTVEMSxBNUQyLEE1RDMsQTVENCxBNUQ1LEE1RDYsQTVENyxBNUQ4LEE1RDksQTVEQSxBNURCLEE1REMsQTVERCxBNURFLEE1REYsQTVFMCxBNUUxLEE1RTIsQTVFMyxBNUU0LEE1RTUsQTVFNixBNUU3LEE1RTgsQTVFOSxBNUVBLEE1RUIsQTVFQyxBNUVELEE1RUUsQTVFRixBNUYwLEE1RjEsQTVGMixBNUYzLEE1RjQsQTVGNSxBNUY2LEE4QzUsQThDNixBOEM3LEE4QzgsQThDOSxBOENBLEE4Q0IsQThDQyxBOENELEE4Q0UsQThDRixBOEQwLEE4RDEsQThEMixBOEQzLEE4RDQsQThENSxBOEQ2LEE4RDcsQThEOCxBOEQ5LEE4REEsQThEQixBOERDLEE4REQsQThERSxBOERGLEE4RTAsQThFMSxBOEUyLEE4RTMsQThFNCxBOEU1LEE4RTYsQThFNyxBOEU4LEE4RTksQTJFNSxBMkU2LEEyRTcsQTJFOCxBMkU5LEEyRUEsQTJFQixBMkVDLEEyRUQsQTJFRSxEMkJCLEI2QTEsQzZERixDREYyLEQ1QzksQzhGRCxDOUNGLENGQzIsRDhBMixCMkJCLEQzRUIsRDhBNCxCM0YzLEQ3QTgsQzdEMixEOEE3LENBQzAsQzdGMCxCMUZCLEQyQjUsQjRENCxCNkFCLENCQkYsRDhBOSxCNkFBLEMxQkQsRDFDRixDOUE1LEQ4QUQsQjhGNixEMUJFLEUzREMsRDZEMCxCN0UxLEI0QUUsQzFEOSxEOEJDLENERTgsQjVBNCxDRUFBLEQ2RjcsQzBGNixCRUQ5LEQ4QUYsQzRDQixCRUMzLEQ4QjEsQzNCNCxEMkU1LEQ2QUUsQ0VEQSxENUE3LEJBRjUsQjdBNixDMEQ2LEM2QjksQzVEMixDN0M3LEI5RDQsQjNDQixEMkQyLEQ4QkYsQkVDNSxDNkYyLEQyQjIsQ0ZCMCxDRkU3LENBRTksRDhDMCxDMkYyLEMyRDIsQzhFOSxDN0FDLEMxQ0IsRDNFOCxENUY5LENBQzIsQjZGRSxEOEExLEQzREEsQkZGNyxENEM2LEJCQTUsRDhDMSxDRUU1LEJFQUUsRDhBOCxEMUM3LEQwQTksRDhCRCxEOUVGLENERjYsQkZCQSxCREJCLEJBQTUsRDJFMCxCMkZBLEJBRTAsQzRCNixDRkVELEJFQTksQ0RBNCxDMUMxLEM3RDcsRDlGMSxEOUY0LEM4Q0IsRDhFOSxEMkRBLENBQjIsQzhDQSxEOEVDLEQ4RUEsRDhDNixCREY2LEM2Q0QsQjNGMCxEOEVCLEJERjEsQkRFOSxDOEQ0LEI0RDMsQzJEOCxCMkQ2LEQ3RDAsQ0FDQixDQkZCLEQ1Q0MsQjhCNixDRkM5LEQ5REEsRDhGMCxDN0FBLEQ4RUUsQjRGQSxDMUVFLEQyRDQsRDhFRCxEMkM3LEQ4RUYsQzNDNyxEMUY2LEQ2RDksRDhGMixEOEY1LEJDRkUsQkNEQixDOENFLEI3REQsQjdDMixDNkYzLEQ4RjgsRDJDMSxDRUU5LEJDQkYsQjdGQyxCN0E1LEQwREQsRDZEQSxEM0M1LEJCRUYsQkJFMSxEOEYxLEM5QTEsQ0VCMCxCNEFCLEQ4RjMsQzlDQixEOEY2LEMyRDcsRDhGNyxDRUIxLEQ4RjksQjJBRSxCOUMwLEQ5QTMsQjBFOSxDMUU2LEM5RUMsQ0JDNSxDQkM2LEQ5QTQsQjVFOCxCNUFCLENFQkIsQjVDRCxEN0ExLEQ3RjQsRDNEMyxDQ0U1LEJBQ0UsRDlBMixEOURDLEQzRTAsRDhGRCxCN0YwLEQ3RjcsRDhGRSxEOEZBLEQ5QTEsQzRFMyxEM0I2LEQ4RjQsRDlERCxEOEZCLEM1RTUsQzBEMCxEMUYwLEIwREIsQkNEMSxEOUE2LEQ5QTUsRDlBQyxEOUFFLEQ5QUIsQ0FCOSxEOUE5LEQ2QjYsQjNERSxEOUE4LEMwRkQsQ0FDQyxEOUFBLEQ5QTcsRDlCMCxCNkIxLEI5QTksRDJDMCxDRkMwLEMyQzIsQkRDNCxENUVDLEIyRTAsQzdDOCxCRkVCLEQ5QUQsRDlBRixDRUVBLEJBRUUsQzdENixCMUUzLEI0RDksQjZFRCxEOUI0LEJGQTEsRDlERSxDN0NFLEMwRkUsRDlCOCxDQkQ3LEI3RkQsRDlCNSxEOUI3LEIxQTMsRDNFMSxEOUI5LEQwQzUsRDlCNixEOUIxLEQ5QjIsQzFBOSxEOUIzLEJDRjMsRDBERSxCOEE5LEJFRTMsRDlCRCxEOUJBLEIwQjMsRDlDMixEOUM0LEIxQjYsRDlCRixCNUI5LEJFRjMsQ0NDOCxCQUYyLEQyRDAsRDlDMyxCREU4LEIzQUIsRDlDNSxCRUVCLEQ5QzYsRDlCQixDNERGLEQ5QkUsRDlDMSxEOUMwLEQ1QUUsRDZCNSxDN0UzLEQ5QzgsQkNEOSxEOUNBLEQ5QkMsRDlDQixDNkFCLEQ5QzksRDdGNixDREEzLEJEQTEsRDlDQyxDNUJDLENEQjUsRDlDRCxEOUM3LEIzQTUsQkZGRSxCOEI1LEMwRkMsQjBGOCxCNEY2LEQ5Q0UsRDlDRixCNEEyLEQ5RDAsQjRERixCMEMxLEQ5RDEsQzlCNSxDRkYxLEQ5RDIsQzFDNSxEOUQ2LEM5QUUsRDlENSxEOUQ0LEQ5RDcsQ0JEQixCREE5LEM2QTcsRDlEMyxEOUQ4LEQ5RDksQzhFNSxDMERDLEI2RjksRDhBMyxENENBLEQ0QUEsRDBENixCM0U0LEQ1RDcsQ0ZDOCxCOUUyLEJGQ0IsQzNFMixCNkQyLENEQzMsRDlFRSxEOUYwLEI1QjMsQjZCNSxCRUE0LEM4RUIsQzhBQixCMENCLEI5QUIsQzFGOSxEOUUyLEMwQkMsQjlCMixCOUQ4LEQwQ0IsQjFGOCxDNkU0LEJFREYsQjVFNCxEN0M4LEQxRjgsQkNFNixDQURFLEJDQkQsRDlFNixEOEU3LEM0REEsQjhENCxDOEJELEIyRTEsRDREOSxDM0IwLEMzRTEsREFBMixDOERGLEQwQjQsQkVGQyxDNUE5LEI5REEsREFBMyxENEE5LERBQTQsRDlGQixCNkFDLEI3RUIsQjFGOSxEOUZDLEIzRTUsQkVGNixCRkY2LEQyQjEsQzBFNCxCNkIzLEQ5RkUsRDlGRCxCRUJCLEM2RTAsRDdCQyxEQUExLEMxQjksQjVGMixDMUU4LEJDRjUsQjRENSxDMURELEM0RkQsQkNCOCxCN0IyLEI3RUYsRDlFQyxDNkJFLEJGQUQsQkJDQixCNUNBLERCQzksRDBENyxDREI5LEIwQkMsQjNGNixCQkY3LERCQ0EsQkFBRixENEU0LEI1QjYsQjVGMyxEOEQ2LEM4RDAsQjdENixDN0QwLEQ4RDcsQkZBRixEQkJCLEQ4RDgsRDBDQyxCQkFFLEVCQkUsQzFEMCxDMUY1LEQ0RjIsQjhENSxCNEI0LEIzRjUsQzlCRSxDNUQwLEM1RDksQzBGQixCMUYwLEQ4RDksQjlDRSxCNUJELEQ4REEsRDZDNixDQkEyLEM4QUYsQzlCMixCNENDLEJGQ0MsQjlGNCxEOERCLEQ4REMsQjZFNyxCQ0MxLENDRUEsQ0ZGNyxEOERELEM3QjAsQjlEMCxCREEzLENDREUsQzZDQSxEOEUwLEQ4REUsRDhERixCMEZFLEJFRTcsQ0FBMyxCQ0Y0LEI4QjEsQjhFRSxEOEUyLEJEQ0IsRDhFNCxEOEUzLEM1RkMsRDhFNSxEOEU2LEMxQTYsQzhCMCxCMEVDLEI5QTYsQkNEMyxDRUYxLERCQkQsQzFEMyxCNkFGLEQ2RkEsQzVBQyxCREQ5LERCQkUsREJCRixDMEY4LEJFQTIsQzBDRCxEQkMwLENBQzYsQjJBQSxEM0MyLEMzRTMsRDFBQixEQkMyLEMwRDUsREJDMyxCRkIxLEM0QkMsQzdEQSxEQkM0LEQ5RTgsQzlENyxCOUI0LENFRjAsRDRDOCxCMEZDLEI0RDIsRDBEOSxEOUU5LERFQ0IsRDlFQixEOEIwLEJCQUYsQjFCMSxCM0Q3LEQ4Q0UsRDREMSxCREIzLEJGRUYsQ0ZCQixEOEQwLEI3Q0IsRDhEMSxDNkE1LEM3RjgsRDJCRCxEOEQyLEM0RTQsQ0FBRSxDN0E3LEQ4QTYsQzlGRCxDRUU3LEJCREMsQjBFQixCQkFBLEQwQUQsQjFCMCxEN0U0LEQ3QkYsQjVBNSxDMkY0LEM0Q0YsQjJBOSxCMkI3LEIxRTUsREZCMixENUJDLEJGQTgsQzJBQyxEOEQ1LEMyQjEsRDhENCxDRUQ0LERBRTAsQ0VDMCxEOEI0LEMzQUUsRDNBMSxDRUEzLEJDQjQsQzhCNCxDMkQxLEJFRUQsRDBCNixEQUUxLEM3RTQsQjNBNyxCNkYyLENDRkMsQzBGQSxDMEY3LEQxQjksRDFFMSxEOEM3LEIyREUsQzBFNSxCQUYxLEQ4QzgsRDRBRCxDRkUxLEQ4QzksRDhDQSxDRkMzLEIzRjgsQkVDNyxEOENCLERCQ0MsQzhBNSxDRkQ4LEM4RkUsQjJDRSxEM0Q2LEIyRTYsQkNCMCxEM0QxLENCQUIsQjdCNCxCN0EyLENBRTUsQzhBMSxDQURDLEIxRTQsRDBGMCxDNUQxLERCQzUsQjVGRSxCRkRBLEI5QzUsQkVFNCxDMUVELERGQjYsREZCNSxENkJCLEJERDAsRDVEOSxCMEM4LEI2QTMsQkZDOSxDQ0E4LERGQjMsQ0FCNyxEM0QyLEQ4Q0YsRDJCNixCQUM1LENCQkUsQ0NCRSxERkI3LEI1RjAsREZCNCxEM0Y1LEIzRDQsQjhGNyxERkJBLEJBQ0YsQkNBQSxCNUY1LENEQUMsQzNGQixCQUYzLEMwRjQsQ0RDMixDRkYyLERGQjgsQ0ZDNSxDMkMwLERGQjksQzJGMCxCRUZELEMxREYsQ0RDQyxEMkY3LEI3Q0QsREZDMSxERkM0LEI3RjEsQjBDOSxCNkQ2LEI3RDQsQkFBQyxDQ0ZELEJGRDQsQ0JCMSxDNkY0LEQ2QTgsREZDNSxDRUUyLEIzQjMsQ0VGQyxCNEI1LENFQzcsQkFGMCxDRUUxLEQxQkQsREZDMCxCNEY0LEIzQ0EsQjhFNixERkJCLEM0QzUsREZCQyxERkJELERGQkUsQzVCQixERkJGLERGQzIsRDRCMSxERkMzLEM3QkEsQ0VEOCxDNEQ4LERGQ0EsREZDRixENkRDLERGQzksREZEQSxDRUI2LEJBQzcsREZDRSxERkM4LEM1REUsQzlFQixCQUY0LEMzRkMsQkVENyxERkM2LERGQ0QsQzVEOCxENUE2LEJBQ0QsQkVDQyxEM0JELEI4QzAsRDZFNCxERkM3LEI5QkUsQkZBNyxDMUZDLERGQ0IsREZDQyxERkQwLERGREIsREZFNSxERkQ3LERGRDYsRDdDOSxERkUzLERGRTQsRTVFQixEMkE3LERGRDIsQkZBOSxENERCLEJGQzgsREZENCxDRkNDLERGREQsRDFDQSxERkRFLEIwQTcsQzZCNyxERkQzLEJBRTUsQjZERixDRERCLEI5RkUsRDRENSxERkRGLENGRUMsQjBBNSxERkU3LERGRDEsRDFDNixERkQ1LERGRDgsREZEOSxERkRDLEJCQTksREZFMCxERkUxLERGRTIsREZFNixERkU4LEQzQjQsQjhFNyxDNUI2LERGRUEsQzlEQSxDMUE4LEM0QzQsQkZERSxDRkY4LEQ1REMsREZFRSxCMkI4LEJBREYsREZFQyxEQkMxLEQxRTQsQ0JGNCxCNEJELEIwQTYsREZGMSxDQ0M2LERGRjIsREZFRCxERkU5LERGRUIsREZFRixERkYwLEJCQkQsREZGMyxERkY0LEJCQTMsQ0FEQixDRUE4LEUwQTcsQjNBQSxFMEE2LEUwQTEsREZGRSxDREQ5LERGRkMsREZGQSxCRkQwLEQ3QzQsQzlDQyxERkY4LEIwQTEsREZGRCxERkZCLEUwQTIsRTBBOCxCN0M4LEM2QTEsQzlCNixDMEIyLERGRjUsQzVCRSxEOEM0LERGRjksQzRGNixFMEEzLEUwQTQsRTBBNSxEMEE1LEUwQjQsQ0NFNCxFMEIxLEJGQTYsRTBBRixDRUI5LEUwQUIsQzlDNixDMEFFLEUwQUUsQkFFRCxCQUIwLEUwQTksREZGNixFMEIzLEUwQjgsQjRBRCxFMEI5LENGQjIsQkFDOCxFMEIwLEQwRkEsRTBBQyxENEZCLERGRjcsQzVFNyxFMEFELEQzRjcsRTBCNixFMEI3LEUwQzQsRDBFMSxFMEJDLEUwQzksRTBDQSxFMEJFLEUwQUEsQzlBNCxFMEMxLEUwQjIsQ0FDOCxFMEMzLEUwQjUsQ0VDQixDQkMzLEUwQ0QsRTBDNixFMEMyLEUwQ0IsRTBCQSxFMEJGLEUwQzAsRTBDNSxFMEM3LEUwQzgsRTBDQyxFMEJCLENCRDQsRTBENSxFMEQ2LEUwRDIsRTBEMCxCQ0NFLEUwRDEsQjhDMixEOEM1LEQwRUEsQzJFRixFMENGLEUwQkQsRTBENCxFMEQzLEUwRDcsRTBEQyxFMEQ4LEQ2RjYsQjNCMCxEN0VDLENCQkIsRTBEQSxDRUZCLEJBRDksRTBFMSxFMERELEQyQUQsRTBFMixFMERCLEUwRDksRTBERixFMEUwLEUwREUsRTBFNCxDNkY3LEQ4QUMsRDRFQixFMEU2LENBQzksRTBFNSxCOEMxLEUwRTcsRTBFOCxFMEU5LEUwRTMsQkFCRixDQ0U3LEUwRUEsQ0ZGOSxFMEVCLEM4QzIsQkRDMCxDNEQyLEUwRUMsRTBFRCxDN0Y0LENCQzQsRTBFRSxCQkQ4LEQ4QjYsRDJGMixFMEVGLENEQzUsQjZEQSxFMEYxLEQ0QjAsQzBBNyxCNEQxLENFQTcsRTBGMCxFMEYyLEI5Q0MsQjlGQSxDREJDLEUwRjMsQzZENCxFMEY0LEQ0QjIsQzhBNixFMEY2LEUwRjUsRTBGNyxDREMxLENBQTUsRDREQSxEQkQ3LERCRDksREJEOCxCOUU3LERCREMsREJERCxCNUQ4LERCREEsREJEQixCM0ExLERCREYsQkJGOCxENkI3LERCRTAsQkVGOSxCN0JCLERCRDAsQ0NBRSxCRkIyLEJCQjUsRDdGOCxCRkQzLEJGRTksQkNFMSxDQ0IzLERCREUsQjBEMyxDRUVCLEI3RDgsRDdCOSxDNkMyLEMwQTQsQ0NCOSxEQkU3LERCRTEsQzZCQSxEQkUzLERCRTgsQzVGNyxEQkVBLERCRTksQkZDMCxEQkU2LERCRTUsQjRCOSxDMEFDLEMyQTIsREJFMixEQkU0LEQwQ0QsREJFRCxDMERELERCRjIsQjZFMixEQkYzLERCRDIsQjlCOCxENEFCLERCRUMsQkZEMSxEQkYwLERCRDEsQjVFNixEQkVCLEJGRTUsREJFRSxEQkYxLERCRjksQjlBMSxCMEEzLEMyRjEsQjNDNyxEQkVGLERCRjgsQzZEMixEQkY0LERCRjUsREJGNyxEQkY2LERCRkUsRDNGMixCMkJBLERCRkQsRENBNCxEQkZCLERCRkEsREJGQyxDNUUwLEJCRjksRENBMyxEQ0E1LENDQzMsQjZEMSxEREMwLERDQTEsRENBMixDN0I1LEI2RTksRENBNyxEQ0E2LERDQTksQjFBNCxCNUNDLEJGQjAsRDFERixCNkMyLERDQTgsQ0JGQSxFQkYzLENCREMsQ0JGRSxDQ0MxLEM4RkIsRENBQSxDQ0VFLERDQUIsREJEMyxEQ0FGLERDQUMsQkVCMyxDQUZCLERDQUQsQzlDQSxDNEI5LEM3QkQsRENBRSxENEY2LEQwRTYsQzRBQixCNkQ1LERCRDQsQjFEQSxEQkQ1LERCRDYsQkFCRSxDOEMwLENBQkYsQzhDOSxEN0IzLEM5RjksQkZDNyxCQUY4LEQyQkMsRTJCQSxCNEE2LEIxQjgsQjhCNCxDRkM0LEQ5RTcsQ0ZBNixDREUyLEQ5RUQsQjZFMCxEMkI5LEI5QkIsRTJCOSxFMkI3LEI0RjMsQ0NFQyxDQ0FCLEI3RjIsRDhCMixEMUVCLEJBQkIsQ0FBNyxDREI3LEQyQzQsQkZFNCxCQ0QwLEI2RTEsREVDNSxERUM2LERCQkMsRDFEOSxDNkU2LEM0Q0UsQjdFRSxCN0RDLEJGRkMsRDdFMCxDNkY1LEIxQkMsREVDOCxCREIxLENDRDcsREVDQSxERUM5LEI1RUMsQzlERCxCMEMyLEM1QUUsQzVBQixDNENDLEJDRTksQ0JGRCxCQUMzLEU1RjksQzhFNyxFNUZBLENERkQsRDdCMSxCOEJFLEMyRTgsQzhEMSxFNUZCLEI2Q0EsQkNDQixEMUZELEU2QTEsQzNFRSxFNkE0LEU1RkUsRTZBNSxDREQ3LEI3QzEsRTVGQyxFNUZELEU2QTMsQzRERCxFNkE4LEU2QTcsQzNDMyxDNkRFLEU2QUEsQzRCNyxFNkEyLENBQkMsQkRFMyxCOUMzLEU2QTYsRDBENSxDRUFGLEU2QTksRTZCMCxEMkE2LEJEQUEsRTZBRCxFNkFGLEMwRDEsRDJDQyxCQ0E3LEU2QjEsRDJGNixEN0NCLENERkUsQ0RERSxDMkE2LEU2QUIsRTZBQyxCREJGLEU2QUUsRTZCMyxFNkIyLEU2QjYsRTZCOCxDNEVGLEM0QzgsQkVFQSxDOUVGLEU2QjcsQjZGMCxDM0U0LEQzRTksRTZCNCxFNkI1LEM4QTIsRTZCRCxFNkI5LEM2QzUsQ0RGMSxFNkJCLEU2QkMsQkJFOSxFNkJFLEU2QkEsQzBCNyxEM0E0LEU2QkYsQzlGNCxFNkMzLEU2QzQsRDBGNixDM0JELEMzQzQsRTZDMixFNkMxLEU2QzcsQ0ZCMSxFQkY0LEU2Q0EsRTZDNSxCQ0RFLEM5QTksQkNCNSxDRkQzLEU2QzgsRTZDOSxFNkNFLEU2RDAsRTZEMSxFNkNCLEI1RDUsRTZDQyxFNkNGLEM0REIsRTZDNixFNkNELEU2RDIsRTZENCxFNkQzLEU2RDUsRDlGOCxFNkQ2LEU2RDcsRDdEMyxFNkRELEU2REUsQkZENyxENEQwLEQ3RDYsQjRFNixDQkVGLEU2REEsRDhDMyxEN0NFLEQwQTIsQzNDRixFNkRGLEJDQkUsQjlDMixFNkRCLEQxQTcsQkFBMixDMkNGLEQ4QUIsQ0FFQixFNUVFLEU2REMsQjdGNSxDOEU2LEM0RjUsRTVCMixDNEZFLENCRkMsRTVCMyxENUFDLEQzRUUsQ0FEOCxCMEIyLENCQ0UsQ0RFQSxCQUVBLEU1QjUsRTVCNCxEN0RBLEI5RDksRDZFNixCNkE4LENERjAsRDJDQixCMUE2LENBQjUsQjNFOCxDOUYzLEJGQ0QsRDBGQixDQUQyLEU1QjYsQkJDMixDRkRDLEI5QUMsRDRENyxCQUE2LEQxRTcsQ0ZGQyxCQ0QyLEU1QjcsQzhERCxCRkVELEIxRjYsQ0JERSxCQ0M1LEJDQzQsRDJGQSxDM0RDLEJGREMsQjhCQixDM0MyLEJBQUUsRDRBMixDN0RFLEM0QUYsQjJFQyxCOUQxLEU1QkIsQzFDOCxENUFGLEU1QkMsRTVCRSxCNEU3LEI2RDQsQ0JDMixEMUIwLEI1QkMsQ0FEOSxCN0UyLEM5RTQsQkRBQixDRUJFLEQ3RjAsRDBBMSxDOUQ5LEI2RkIsRTZEOCxCQ0UyLEIzQkUsQzlEMCxFNkQ5LEIzQTIsREVDQyxEM0M4LERFQ0QsRDJBMixERUNFLEJFQ0QsREVDRixDQUFDLEQyRkMsQjNERixFNUVBLEM0RTEsQkVBMSxDRUIyLEM0RjIsQkVENixDNkE4LEIyRTMsQkVEMyxDN0ZDLENDRUIsQkRFQyxDRURELENBQkEsQzZDMSxFNUVDLEQwQkMsRDVCOSxFNUVELENBRjQsQ0RDMCxDMkM1LEU1RUYsQzJDNCxFNUYwLEU1RjgsQ0RDRCxDOUJELEQyRDksRTFBOCxEM0VDLENCRUEsQzZGMSxFMUFDLEUxQTcsRTFBOSxFMUFBLEUxQUYsQjJFRCxFMUFCLEI4REEsRTFBRCxFMUFFLEUxQjAsQjVCQSxFMUIxLEUxQjMsRTFCOCxEMUQyLEUxQjYsRTFCNSxDMUVCLEUxQjcsRDRDMCxFMUIyLEUxQkEsQjBCNixFMUI0LEJGRjksRTFCOSxFMUJCLEUxQkUsRTFCQyxENkM1LENGQkYsRTFCRCxFMUJGLEMyQ0QsQjZFQixEM0Y4LEM3Q0QsQjdFNSxCRUZFLEUxQzAsRTFDMSxFMUM3LEIzRTcsQzZFOSxCNERFLEQxQzIsRTFDOCxFMUM2LEUxQzUsRTFDMyxFMUMyLEIxQzAsRDVCOCxFMUM0LEUxQ0IsRTFDQyxFMUNBLEVGRkEsRTFEMyxFMUQyLEM3QjYsRTFDOSxFMUNFLEUxRDAsRTFENCxFMUQxLEUxQ0QsRTFDRixFMUQ1LEUxRDYsRTFENyxFMUQ4LEUxREEsRTFEQixDRUExLEU3REQsQjRBOCxENkRELEQxQjIsQjNCMixCOUE0LEQ3RjMsQzdDOSxCRURFLEI5QUUsQ0VENyxCMkVFLERCQ0YsQkNCQSxEMkQxLENCQzgsQjBDRCxDRkVGLEQ5RTMsQkRFRCxCMUQyLENBRDAsQjJCQyxDQkE3LEI3QUIsQ0FBNixDRkEzLEUwRjgsRDVDQSxFMEZCLEUwRkEsQzVDMSxDQ0ZCLEMxQjEsRTBGOSxENkUzLEIyQUYsRDZDNCxCNURCLEI0RjgsRDZBMSxDRkFGLEIwRUYsRTBGQyxFMUExLEIzQTMsRTBGRCxFMEZFLEMzQjEsQzNERCxFMUEyLEI3RjksQkJDRixFMUEzLEM0QkIsRTFBNCxFMUE1LEUxQTYsQjRCMSxCOEM5LEM2QkQsQzRFQSxCMkEyLEQwRDIsRTdEQixCQkMzLEQzRDcsRDNDNCxCOUUzLEUyQ0YsRDdBRixDN0VDLEIxRDMsQjRCMixFMkQxLEQwRjIsQzJBRSxFMkQwLEJGRTIsRDNBNixCNUQ3LEUyRDIsQjVFQSxDM0VELEI4RkQsQjhBRSxDNUQzLEI3Q0YsRTJENCxFMkQzLEI2QzgsRDdGOSxDREE1LEUyRDgsRTJENixDQUZDLEJGQjUsRDNCOSxFMkQ1LEUyRDcsQzFBRSxDMEM4LEUyREIsRTJEQSxDMEFBLEMxQ0UsRTJEQyxFMkRELEUyREUsREJDOCxEMUQzLENEQTIsQkRBOCxERUMzLEQ4QTUsQkZBQSxEQkNELEQyRUMsQzZGQSxDNUFBLERFQzQsQjFENyxERkFFLENBQkQsREZCMSxCOUFELEQyRkQsQjhBNSxCQUVCLEIzREEsQjVEQyxENUM1LEMzRDYsQ0ZEMixCQkExLEU1RjMsRTVGMixFNUY0LENERTQsQzhGNSxCNUFGLEM3QkYsRTVGNixFQ0IwLEU1RTYsQjlFOSxCNUIxLEMyQkMsRTVFOCxFNUU3LEU1RTksRDJDRCxFMUVBLEQwQ0UsQ0RBRSxEMUU1LEIyQ0EsQjFFQixCMUYyLEM1RUQsRDVDMyxEM0IwLEUxREMsRTFERCxEMkRCLEIzQjksQjFDQixDREY5LEQ1RjcsRTFERSxCRUI2LEI0RkQsRTFERixCQURDLEUxRTAsQkJCMixDMkM5LEUxRTEsRDBFQyxDREJELEUxRTIsQjVDMyxDNUM3LEUxRTMsRTFFNCxEM0Y5LEUxRTUsRDFBRCxFMUU2LENFQTIsRTFFNyxCNUMyLEUxRTgsQkJENSxEMEM0LEUyRTAsQjFEOCxEMkU0LEUyRTEsQkNDOSxDOENDLEUyRTMsRUNGRSxFQ0ZELERGQUYsRTJFMixENkJFLENERkMsQzNBNixFM0MzLEQ2RDIsRTJFNyxFMkU4LEQzQzcsRTJFQyxCRkVDLEUyRUQsRTJFNSxCM0MwLEM0RUUsRTJFRSxEMEMzLEJBRjYsRTJFOSxCN0RFLEJCQjMsQ0NBQyxDQkNCLEUyRTQsRTJFNixFMkVBLEUyRUIsRTJGNyxFMkY0LEQ0RjUsRTJGMyxDNUFELEQ1RkEsQzVDMixCMkMwLEUyRUYsRTJGMixDMUFGLENCQkMsQjVBMSxFMkY5LEJDQjEsRTJGMSxEMEQ0LEQ0QjksRTJGNSxCOUQ2LEUyRjYsQzdEMyxFMkYwLEQ3REMsRURBMSxFMkY4LEVEQTUsRTJGRSxDQUQxLEMxQjUsQkJEMCxCRkQ2LEJBRTMsQ0JBMSxFREE2LEVEQTMsRURBMixCQkQ2LEVEQTcsRDBGNCxFREE0LEJBREUsQjZGNyxFM0ExLEI2QjIsQ0NGMSxCOUE3LENGQTIsQzdBMSxCRkQyLEI2RjEsRTJGQSxFMkZCLEUyRkQsRTJGQyxDNEQ1LEUzQTIsRDNDMSxFM0E3LEM3QzQsQ0ZBNCxFM0E5LEJBQjcsRTNBOCxCQkRBLEUzQTMsRTNBNCxFM0FBLEUzQTYsQ0VGMixEM0M2LEJCQkMsRDRDMyxDNEZBLEVEQTgsRDBGQyxFM0E1LEMzRjUsRTNBRCxCMUFGLEUzQjIsQkNDMixFM0FDLEI1QkYsQzdFOSxFM0IwLEJFQUEsQ0RFRixCQkYzLENDRTgsRTNBRixFM0IxLENGQTcsRTNBRSxDRUE5LEJCREQsQjVFQixCRUU1LEIyRDIsQjNDRCxCMUI5LEUzQUIsQjJEMSxCNUFDLEI5REYsQjZFOCxDRkVCLEUzQjcsQkJDQyxDOEM3LEQwQ0EsRTNCOCxCM0VFLEVEQTksRDNGQSxEM0U0LEVEQUEsRTNCOSxEMkUyLEUzQjUsRDNERSxCOEQwLEUzQjMsRTNCNixCN0RGLEUzQjQsQzBBMixFM0JBLEQ0QjgsQjRDOCxFM0JCLEJCQzUsQzlGNyxDOUU1LEM0QkQsRURBQixDMkZELEJCREIsQkZBRSxDRUJGLEUzQkMsQkZCNixCMUVGLEQ0RjcsRTNCRSxFREFELEUzQkYsQkFBOSxFREFDLEUzQkQsRTNDMCxCQUI2LEI2QUUsRDBCOCxCMEMzLEVEQUUsRURBRixDMEMxLEUzQzEsQzVCMyxFM0MyLERDQjIsRURCMCxCOEVBLENFRUMsRUFBNyxEMEU3LENBRjksQzhENixDRkI3LEIzQzksQ0VEMixCREU0LEUzREUsQkJGMixFQUE4LEQ1QkQsQzZERCxFQUE5LEVBQUEsRUFBQyxFQUFCLEVBQUUsRUFBRCxCREQ4LEVBQUYsQzJCRSxCNEMxLEI0RjcsQkJBNyxFQ0U2LEVDRTUsQjdCRixDQkY5LEIxRTIsRUNFNyxDOUM4LEVDRTgsRUNFOSxDQUQ2LERFRDAsQjJDNSxENEZBLEM2Q0IsQjBDNyxCNEYyLEM4RDMsQ0REMCxCRkI4LEJGREIsQzdBNCxENkI0LEMwQTksREVEMSxDOUE4LEQxRUYsQzVBNCxCMEU3LEIzQjYsQzhDNSxCMEUyLEI3RjYsQzVGQSxCNkYzLEQ1RDIsQjNEMCxCQ0JDLEIzQUQsQkVGMSxCMEQxLEQyRDYsQ0FFMyxEN0E1LENEQjYsQjZCNixCRkI5LEQ1REIsQjhBNyxDNUQ3LERFRDIsQkZEOSxDMkQ1LEM3QzAsQkJBNCxCMUE4LEM1RUEsQzVGQixDQ0E3LEIxQTcsQjVENixDNEE4LERFRDMsRDFCQSxCM0U5LEMzRjIsQjdGNyxENkY0LEI1QTMsQjJGMCxDNEI0LEM0RTksQzBBRCxERUQ0LEIwRTgsQzVDNCxDMUUwLEI5RDUsQkVEQyxDREQ4LEIwQ0UsQ0RDRixERUQ2LEJFRDAsRDdCRSxERUQ1LEQ1RDAsQjBERCxDNEUyLEMyQTMsQkNGMCxEM0I1LEMwQjksQzVBMSxCMkE2LEQ0RjEsQzBBOCxDQUMzLERFRDcsRDVGQyxCOUIwLEM4QUQsQ0JBOSxERUQ5LEJGQkQsQzZCNCxEN0E3LENBQjAsQzRDMyxCM0Q2LEI5RDIsRDZCOCxFQUZDLEIwQjQsQkZFNixDQ0Y0LENEREEsRDZCRixDMkNFLENFQ0UsQ0NBMixEMEFFLEM0RDMsQjVCMixERUQ4LEQ1RjUsQkNCNyxCQkQzLEIwQTQsQzVCMixCNEVDLEQ1RjEsRUFGRCxERURBLENEQTYsQ0RFQyxDRUU2LERFREMsQ0RCMSxDMEE2LEQ3QkQsREVEQixCMEM2LEJBQjQsQzlEMyxDNEYzLEJFRTgsQjJCNixDMENDLENCRjAsQkNGMSxCQkJCLEI1QjcsQzVGNSxERUU2LERFRTMsQkVERCxERURGLEI0QjcsQkRERCxERUUwLEM0RUQsQ0ZDNixCNUUwLEI2REUsQ0FEQSxCNUY0LERFRTUsRDVDNixERUUxLENDQ0QsQzZGRSxDNUM1LEQyQjQsQkVGMixDMkQzLENDQkQsQjNCOCxCREQzLEJGRDgsQ0RDNixEMURBLEI0RUIsREVFNCxERURELERFRTcsRUFGRSxDMkIwLERFRTIsRDZDMCxCNUE3LEIyRjQsREVFOCxERUYyLERFRUQsREVGMSxDOEUwLEQ3RTEsREVFRixDM0U4LENDRTEsQjJFNSxEMkJFLERFRUUsREVFQixDRUQ1LEI0QTcsQkZBQixCRUJFLEJERDIsREVFOSxENEFFLERFREUsREVFQSxDMEJGLERFRUMsQjJGMyxCOEU5LEMyQTcsQkRDMSxERUY1LERFRjgsQjJBQixCNEE0LEI0RUEsQzlBNixERUY2LENCRDEsQjhFMyxERUY3LERFRkEsREVGOSxDQ0MyLEIwRTEsQjRFRSxFNUJBLEQwQUYsQjJFQixFQkExLERFRjQsQzlFMyxERUYzLEIwREEsRDJBMSxCMUY3LENDQUYsREVGMCxDQkE0LEQ1QUEsREVGQixCNERELEM0QTYsREVGRCxDM0ZFLEM0QTEsREZBMSxDMUNDLERFRkMsQkVFRixDNkIyLEIzQzUsQzhGNixDQkJBLERFRkUsREZBNCxEN0IyLEIzQjcsQzFDMyxDN0NCLEIyQTUsQjRFOSxEN0FCLEM0RUMsREZBMixERkEzLERGQTUsQkFCMyxERkE2LEMwREUsQzlDMyxCMkQ5LEM3RTYsREZBNyxDN0RDLERGQTgsRUJBMixDQkQzLERGQUEsREZBOSxCMkMxLEM1Q0EsREZBQixENERDLEM4QzEsREZBQyxCRUYwLERGQUQsRDZBNyxFQUI3LEVCQjYsQ0FENSxEOEZDLEI4QzQsQjlBNSxCN0M1LEQ1RkUsQjlDQSxEMEE3LEY0Q0QsQjVEMCxDM0Y0LEJFQzgsRUJCNyxCMEJELEJEQ0MsQzFCMixCMUQ2LEIzQTgsQjhEMixDOUEyLEI2RDgsRUJCOCxCRUI0LENBRkQsQzdDMyxENUZCLEI3RjMsQ0VDNCxENUFCLEIxRjMsRUNCMyxCMERGLEVDQjUsQjZCNyxDMUNGLEY1RkEsRDBCMSxENUU1LENFRDMsQkRFRixCM0UyLEI4QUIsRDVCNixFREJELEI2Q0YsQ0JCOSxEMEMyLEI3QkQsRUNCNixDQUE5LEM1RDQsRUNCOSxFQ0I4LEMyQzMsRUNCNyxEMEZELEVDQkEsRUNCQixEN0U1LEVDQkMsRUNCRCxDNkVDLENFREUsQkNDOCxDOEQ1LEI1QTksQkVDOSxENkJDLEQ0RTcsRDFBRSxEMEYxLEVBQjgsRUFCOSxFQUJBLEJBQjUsQ0FCMSxCRkY1LENERkEsRUFDMCxCMEJBLEVBQkUsQzBBNSxFQUJCLEIyRkQsQzNGNyxCQkU4LEQyRDcsQ0VGNCxFQUJGLEVBQkMsRUFDMyxEMEM3LEQzQjMsQjRCQSxDM0MxLEQ3RjIsRDVEMSxDQUM3LEVBQzUsRUFDNCxFQUM3LEVBQzYsRDZFNyxDRkQ0LEVBQ0IsQkJDRSxCREZBLEM5Q0UsRUFDQyxDOUI5LENGRkUsRUFDQSxENENFLEVBQ0QsRUFDRixDREVELEVBQzksRUFDRSxDRUVFLEJCREUsQjNCRixDNkQ1LEJFQjAsQ0VGQSxDN0U3LEJFQTcsRUFEMCxENkM3LEMxQzAsRDRERCxFQUQxLENGQkUsRUFEMixDQUVFLEM1QUYsQjBCNSxFQUQ0LEVBRDMsRjRERixDNEJBLEIxQTksRTVERixFQUQ1LENBRUYsRUFENixFQUQ3LEM2RDgsRUFEOCxFQUQ5LEQ0QkIsQzdGQSxEMkI3LEI4RkMsRUFDMixCMkRDLEMyRkMsRDRGOCxDQ0U2LEQ3RUUsRDRDMixEM0QwLEVCQzMsQzVGMyxCN0ZFLEVCRDQsQ0JCNyxFQkRFLEMwQ0EsQ0RGQixCM0FGLEM2REEsRUJGQyxDNEJFLENFQjQsQzRBOSxCMUJFLEQ0RkQsQ0FGNSxENkVDLEM2RDMsQjZFNCxCQkZBLEQwRTAsQzlCMSxENEQzLEM4QTgsQjhDQixFOEJFLEM5QkMsRThCQixDMEVFLEQwRDMsQjJDNCxCNEU1LEU4QkMsRDVDOCxCNkM1LEU4QkQsQ0FGOCxCOERDLENDRjUsQzBCNCxEMUVFLEU4QkYsRThDMixCQUJDLEIxQUQsQkREQyxFQUJELEU4QzMsRThDNixFOENCLEU4Q0MsQ0JDOSxCMEU1LEJDQUIsQjlCOSxFOEMxLENERjcsRThDQSxDRUY2LEQ1RUQsQzFENixFOEM0LEMzQjYsQjlGQixENkE2LEU4QzgsQ0FFMCxENEU2LEU4QzAsRThDNSxFOEM3LEM3QjksQjdFMyxFOEM5LEJGREQsRThEMixFOEQ3LEU4RDUsQkNEQyxCQ0NGLEU4REIsRThERSxFOERBLEIxRkEsQjBEOCxDNEIzLEI4Q0MsQzZFMixDOEJFLEM4RTEsRThDRixFOEQ0LEU4RDYsQjlGMSxFOEQ4LEQ3RjUsQzRGQixFOERDLEIyRTksRThEMSxCQ0VELEJGQzIsRThDRCxENkY5LEMxRjgsQjJGMSxFOERGLENBQzEsRThEOSxENUE0LEIxRUEsRDVCQixFOENFLEU4RDAsQjZCMCxFOEQzLEU4REQsQzBCOCxDQUY3LENCQTgsQzZEQyxDMEY1LEU4RTksRDBBMyxFOEYyLEQ2RUEsRThFMCxFOEUxLEQxRjksQkFDQixCOEY5LEI4RjEsRDRENCxFOEVGLEU4RUUsRThFQyxCOUYwLENDRDIsRThFNixDRUE2LEJGRjIsQjBCOCxFOEYxLEU4RjAsRDdDMCxFOEU0LENEQTksQzlBMyxCQkI4LEJEREIsRThFQSxFOEUyLEU4RTMsRThFNSxCNUI1LEU4RTcsQzdDNSxFOEVCLEU4RUQsQkRCMCxEN0FFLEU4RjgsRThGNSxDREIwLEU4RjYsQzFCQSxFOEU4LEMzQjcsQjBGMCxFOEY0LEU4RjcsQjlBMyxDOUQyLEMzQ0UsQ0VFMCxDMEU2LENCRjMsQ0NERCxEMEI1LENBRTEsRThGMyxCQ0VDLEU4RjksQzNERSxDNkU1LEI5RjcsQjBGNCxEN0Q4LEJDQUMsQzVFRixDQ0M0LEU5QTYsQzlBRCxFOUEyLEMwRTIsQkZDMyxFOEZFLEI5RDcsRThGQixFOUE0LEQyQ0UsRTlBMyxENkIyLEQ3QjUsRTlBNyxCREI3LEU4RkMsRThGRCxFOUExLENERDYsRDJBQyxFOUIyLEU5QTksQjRBQSxCNEJCLEU5QUIsRDBBOCxFOUE1LEIzRkUsRTlBQyxDMEUzLEU5QUEsRTlCOSxFOUI4LEU5QUUsRThGQSxFOUE4LEJGQUMsRTlCMSxFOUJBLEMyQTUsRTlBRixCOEM1LEU5QUQsRDNEQyxFOUI0LEU5QjUsRTlCNyxFOUM3LEMwQzYsRTlDNSxFOUIwLEU5QkIsQjBGMSxFOUJDLEQ1QTUsRTlCRSxFOUJGLEU5QzEsQzFGMSxDOEI2LEU5QkQsRTlDMixFOUMzLEU5QjMsRTlCNixCQkIxLEU5QzAsQkNGNyxFOUM0LEU5QzYsRTlDQSxFOUNFLEIyREIsRTlDOCxCN0FFLEU5Q0IsRTlDQyxENUMxLEM0QTMsRTlEOCxCQUUxLEU5QzksRDNBMyxFOUQ0LEU5RDcsRTlEMCxFOUNGLEM3QzEsRTlEMixFOUQ5LEIzQzgsRTlEMyxDRkYwLEU5Q0QsQjNGNyxFOUQ2LEU5REEsQ0NCNCxDRkFELEU5RDUsRTlEQyxFOURCLEU5REUsRTlEMSxFOURELEU5REYsQzNDQSxDN0I3LEI0Q0UsQkJCNixEMEMwLEVDQTMsQzVCNyxEM0ZCLEVDQTQsRUNBNSxDNkRCLEJGRUUsRUNBNixFQ0E3LEQwQUEsQzdCOCxCOEU4LEVDQTgsRDZCOSxENUZELEI0Q0IsQjJCRCxDRUU0LEM2RTcsQ0RFMSxCNEY1LENCQzAsQkNERixFOUUyLEU5RTMsRDFFQSxFOUU1LEI0RjksRTlFNCxEMUIzLENBRTIsQjJEMCxFOUU4LEU5RTYsRTlFNyxENkIzLEU5RTksRTlFQSxFOUVCLEU5RUMsRUNBRixDNUI5LEI2Q0UsRDJGMyxCNUVFLEJCRDksRUNCMSxEMkUzLENFRTMsQzRCOCxDM0JGLEI2QkUsRDhCOSxCMUM4LEIxQ0YsQjFEMSxDNUZFLEIxRDAsQzNBQixENUIxLEVCQTQsQkFDMSxDQ0JBLEVCQTUsRUJBNyxFQkE4LEVCQTYsRUJBOSxFQkFCLEVCQUEsRUJBQyxDQUNGLEQ4QjUsQzNGMSxDM0E1LEM2RjgsRUJBRCxDNENBLEVCQUUsRUJBRixFQkIwLEI3RDUsQjdGQSxFQkIxLEM3RTIsRUJCMyxCQUE0LEQxRjUsQjBCMSxFQkIyLEVCQjQsQjVBQSxDMkM4LEM3RTgsRUJCNSxDQkFFLEUzREYsRDNDMCxEOURCLENEQTEsRDZBRCxDN0YzLEQ5RTAsQkJFMyxCQUJBLEUzRTIsQ0ZBQixFM0UwLEM5QzcsQkFCOSxEMUI0LEUzRTEsQzhFQSxCOUFGLEJEQUQsQjNEOCxDRURCLENDQzAsRTNFOCxFM0U5LENERjQsQ0NBRCxCQ0IzLEUzRUEsRTNFQixEMERBLEM2RkIsQjdEQSxDN0RGLEQyQ0EsQ0VENixFM0U0LEUzRUMsQzlGMixCM0MxLEUzRTcsQzZFMyxFM0U1LEVEQjMsRTNFNixDOUIzLEM1RTYsQjlCNSxDM0JCLEUzRTMsQzVCRCxDMUE0LEMyRDksQjJENyxFM0VELEJCQTYsQzRBRCxFM0YwLEJFREEsRTNGQixFM0Y1LEJBRDMsQjdEMCxEM0NELEQ2Q0UsRDVEMyxCOUMxLEQ1QjQsRDFEOCxEMEI5LEM3RjYsQzhBQSxCMkI0LEMzREEsRTNFRSxFM0ZDLEUzRUYsQjdBOCxFM0Y3LEUzRjQsQjdCQSxDNUEyLEUzRjYsQzVERCxCMkE4LEM2RkMsQzRFMCxEN0EyLEMwRTEsRTNGOSxFM0ZBLEUzRkQsQ0NBOSxFM0YzLEQzQkUsQjFDMyxFREI0LEUzRjEsRTNGMixFM0Y4LEQwQkEsQzZDMyxENEYzLEUzRkUsQkRFMCxFNEE3LEU0QTYsRDFGMyxFNEEzLEU0QTksQzhGNyxDRkI0LEU0QTgsRTRBRSxDMkU1LEI2QjQsQkRGMixFNEEyLEJBRTksRTRBQSxFNEFDLEI2RkQsRDZERSxFNEIyLEU0QUQsRTRBMSxCQkVFLENEREQsQzdBMixDNUM5LEMxRjcsRTRBNCxDN0IzLEJEQUMsQkRCRCxFNEE1LEQ3QzcsQjJFMixFNEFCLEJDQzMsRTRBRixCQkVCLEU0QjAsQzVBOCxFNEIxLEQ1RTMsQkZBMyxFNEJBLEU0QjcsRTRCQixFNEJELEM2RDYsQkFDNixDMENCLEI4QTEsRTRCNCxENEExLEJBQTMsQkRGRSxFNEJDLENEQkYsQzRGOSxDRkZCLEM5RTYsRDNCRixDRkQxLEU0QjMsRTRCOCxFNEI5LENDRTksQ0NDRSxDMEQ0LEU0QjUsQzFCMCxFNEI2LENFRDAsQkJDMSxCNUQzLEM4RjMsQkRBNyxENUM3LEM5QUMsQjhBMixFNENBLEU0Q0MsRDFDNCxEMkJBLEJBQUQsQkFENCxFNEMzLEI1RUQsRDdDRCxFNEMwLENGRkQsRTRCRixDMURDLENDQ0EsQ0FFNyxDNEQ3LENDRDQsRTRDOCxFNEM3LEU0QzEsRTRDNCxCNUFELEQzRDksRTRDNixEMkY5LEI0RTMsQkJCNCxDOUVFLEI0QkUsQkJFQyxEMUNELENDRUQsRURCNSxDN0U1LEQ0QTgsRTRDQixEN0Q1LEU0QzIsQkRBNSxFNEM1LEQzRTYsRTRDOSxDOUY4LEU0QkUsRDNFNSxDN0ZFLEI2QzksRDRGQyxCMkIzLEU0RDcsQ0VDMixFNENELENFQkMsQjhEQixFNEQ2LEJGQ0EsRDNDRSxDM0VDLEM1QzgsRTREOCxDREM0LEU0Q0YsRTRENCxFNEQ1LEJBRkUsQ0ZFNixENUJGLEU0RDIsRTREMCxFNENFLENERTUsQ0FBQSxDMEEzLEJEQTYsRTREMyxCOEM4LEU0RTcsRDRCNCxFNERCLEMxRUYsRTRFOSxEMkU3LEU0REYsRTRFMCxDRkFBLENCREQsRTREQSxFNEQxLEU0RTUsQzhEQyxFNEUzLEM0RTcsRTRFMixFNEUxLEIzRkMsRTRFOCxCNUUxLEQ3Q0MsRTRFNixCQkFDLEQ3RDIsQ0NDRixFQkY4LEU0RTQsQjlGNixENkNELEU0RDksRTREQyxDMkZBLEU0REUsQzJDQixDMEM0LEMyRDAsQjFGNSxDQ0IyLEI1Q0UsRTRFRixDNkFGLEM2RTEsRTRGNSxDMkE5LEMwRUMsRDFERCxFNEVFLEM0QUUsRTRFRCxFNEY2LEU0RjQsQzJGRSxFNERELEU0RjAsQ0FGRSxENUM0LEU0RjEsRDFGQSxFNEVCLEU0RUMsRTRGMixDRUFCLEM1Q0IsQzdCMSxDMkJBLEU0RUEsQzFDQSxDQ0I2LEIzQjEsRTRGQixFNEYzLEU0RkEsRTRGRCxFNEZDLEIzQ0UsQjNCQSxFNEY3LEU0RjksRTRGOCxDNUVDLEMwQkQsRDRFOCxFNUEyLEIwQzQsRTVBNCxFNUEzLEJDQTQsRTVBNSxFNUExLEU0RkUsQjFGNCxFNUE4LEU1QTksRTVBNixFNUE3LEU1QUEsQzZEOSxFNUFCLEU1QUQsRTVBQyxFNUFGLEU1QUUsQjlFMCxFNUIwLEU1QjEsQkJGMCxFQ0UxLEMzRjAsQjVDNixCQkQyLEMxRTksRDRFRSxCRUM0LEQ3QzYsRDRENixCMkQzLEVDQkUsRUFDMSxDMkFGLEI0QjYsRDFENyxCM0I0LEM4QjIsQkZCQixFQ0MwLEQ2Q0IsRUNCRixFQ0MxLEVDQzUsQkVFNixDQ0JGLEM1REEsQkVCQyxFQ0M2LEIxRkUsRUNDNCxENUE4LEI1RTMsRUNDMixDMUI2LEIzRTMsRUNDMyxDQkI4LEMwQzMsQ0NGRSxDMUQyLEVDQzgsQkFFNixDMEQzLEQ2RjIsRDFDQyxCRkJFLEI3QjMsQzlENSxFQ0M3LEJCRTIsQ0NDQyxCREZELEM4QzgsQ0ZBOSxDREU5LEM1RUIsQjdFOSxEMUM5LEJBQjgsRUNDOSxFQ0NBLEJCQzAsRUNDQixFQ0UyLEIxQkEsQjdEOSxCREI5LEVDQ0MsRDFFNixFQ0NELEM4QkIsRUNEMSxFQ0QzLEJCQ0QsQkNFNSxFQ0NGLEM5QjcsQzNCQSxFQ0UzLEQ1RDUsRUNEMCxENkYzLEVDRDIsRUNDRSxFQ0Q0LEVDRDUsQzlCRixDRkE4LEQwREMsRDFBQyxDOERCLEVDRDYsQ0VGNSxDQUVDLEVDREEsRUNEOSxCMEJFLEVDRDcsRUNEOCxFQ0U0LEM4QkMsQzFDNyxFQ0RDLEQxRTAsRUNEQixENEVGLEVDREQsREJDNixFQ0RFLEIxQUMsRUNERixFQ0UwLEQ3QTYsQzVDMCxFQkJDLEIwQUUsQkVGNCxCOEI4LEQyQUYsQjBENixCNUY5LEQ4QjMsQ0JBQyxFM0RELEM2QUMsQjBFNixDNUM2LEVCQjksRUJCQSxFQkJCLEQxQzAsQzVBMyxFQUYyLEM0QjIsQzRCNSxDMENFLEVBRjMsQzRDMSxDRUVGLEVBRjAsRUFGNCxDOUZDLEM3QTMsQ0NEOCxDRUZFLEVBRjUsRUFGNixDRkFDLEMwRTcsRUFGNyxCNkJGLEVBRjgsRUFGOSxFQUZBLEVBRkIsRUFGMSxDOEFFLEUxRUIsQjdCOCxFMUVDLEUxRUQsRDdCNCxFMUVFLEUxRUYsRDNDQyxFMUYxLEJGRjEsRTFGMCxCNUQyLEIxQjcsRTFGMyxFMUYyLEJBRkMsRTFGNCxCOUI3LEJFRDEsQzRGQyxCQURELEJEQzYsRTFGNSxFMUY3LEI2QzAsQ0ZDMSxDQUE4LEUxRjYsRDVGOCxEM0ZDLEUxRjgsRTFGQyxFMUY5LEUxRkEsQzBFQSxFMUZFLEUyQTEsQzBDNyxFMUZCLEUxRkQsRTJBNSxDMUQ0LEUyQTMsRTJBOCxCMkZFLEUyQTIsQzNDRCxCMkMyLEUyQTcsRTJBNixFMkE0LEUyQTksRTJBQixEMEM5LEQ2RUQsQzNBOCxFMkFDLENGRDcsRTJBRSxCQUVGLEU5RTAsRTJBRCxFMkFBLEJCQUIsRDRCMyxFMkIwLEUyQUYsRTlFMSxFMkIxLEUyQjIsRTJCMyxDQ0ExLEUyQjQsRTJCNSxEMEZFLEMyQ0EsRDNGMSxDREY1LEU3RTAsRTdFMSxCRUMxLEMyRUEsRTdFNCxFN0UzLENERTYsQzNCNSxFN0UyLEJCQjcsQ0ZENixDMUUxLEU3RTksRTdFOCxFN0Y0LEIyQTMsRTdFQSxFN0U2LEU3RUMsRTdFQixDOUJBLEQ1RTQsRTdFNSxCN0E5LEU3RTcsRTdFRSxFN0YzLEQ2RTksRTdFRCxFN0YyLEU3RjEsQjBFMCxFN0Y1LEM3RjIsQzBDNSxDMEVELEMxRjAsRTdGMCxFN0Y2LENCRjYsRThBMixFOEExLEQ3QzEsRTdGQSxFN0Y5LEU3RkIsRTdGNyxFN0ZFLEU3RkQsRTdGQyxDMUQ1LEM3RDksQzVGRCxDNUMzLEM3RUQsRThBMyxFOEE2LEU4QTUsRThBNyxCQUY3LEU3RjgsRThBNCxDOEYwLEM5QUEsRThBOSxCOUU1LEQxRkUsRThBOCxFOEFBLEU4QUQsRThBRSxDMUE3LEU4QUYsRThCMCxFOEFDLEU4QjQsRThBQixFOEIxLEU4QjUsRThCMixFOEIzLEU4QjcsRThCNixCOUNGLEYwQUMsRjBBRCxDNkIwLEIwRUEsQzhCRixDRERGLENFQ0QsRUFCMSxFQUIyLEM2QkYsQjRDOSxFQUIzLEQ1RTcsRERGOSxFQUI0LEVBQjUsRUFCNixCOENBLERGQjAsQzlGNSxDQ0YwLEM5RkEsQzlGQixEM0MzLENCQTYsQjhBNixGMEFFLEIxQzIsRTVCOCxDQ0VGLEQzQzksQkNENyxDOUVBLEI1RTcsQzREMCxCNUU5LEVFQUUsQkJBRCxFN0RFLEVFQUYsQjNBOSxFRUIyLEVFQjEsQkRFNyxFRUIwLENFQjcsQzVDRixDMUY0LERCQ0UsRUVCMyxEMEYzLEMyRDQsQzZFOCxCN0FDLEVFQjQsQjNFQixCQkZCLEVFQjUsRTdEQyxFRUI2LEJEQUUsRjFFMixDQUU4LEQyQzksRjBEQSxGMERCLEYwREMsQzFDNixCOEVELEJFQ0UsRjBERSxDNUIxLEYwREQsRDFGMSxGMEUwLEIwQ0MsQkRFQSxEMkRGLEYwREYsQjRBRixCN0U4LEYwRTYsRjBFNSxDNkEzLEYwRTEsRjBFMixCNEMzLEYwRTMsRDVFRSxDQ0RCLEJFRDIsQkNCMixGMEU4LEYwRTcsRjBFNCxCMkExLEQ2QTIsRDNCOCxCRUI3LEM4QUMsRjBFQSxEMUY3LEQ2Q0MsQkFEQixGMEU5LEI2QkIsQ0RCNCxDNkE2LEMxQTEsRjBFQixGMEVFLEYwRUQsRjBGMCxGMEVDLEJCQkUsRjBFRixDQ0I1LEYwRjIsQjNENSxCMUQ0LEYwRjMsRjBGNCxGMEY2LEI0RTEsRjBGMSxGMEY3LEYwRkEsRjBGOCxGMEY1LEYwRkQsRjBGOSxGMEZDLEYwRkUsRjFBMSxDRUMxLEYxQTQsRjFBMyxDMUY2LEYwRkIsQ0FERCxCNEYxLEIxRjEsQ0NCMSxGMUE2LEYxQTcsRjFBQyxENUNFLEYxQTksQzhCMyxGMUEyLEYxQUIsRjFBOCxGMUE1LEYxQUEsQjBBOSxGMUFELEYxQUYsRjFCMSxGMUIwLEYxQUUsRDFBMixGMUIyLEYxQjMsQjlFRixCNUM3LEIwRDcsQjBEOSxENEVELEI1QzQsQkRENCxCQkNBLEYwQTcsQjhERSxGMEE4LEIwQTgsRjBBOSxDREVFLEYwQUEsRjBBQixDNkE0LEQ2RTUsRjFFNCxGMUU1LEMzRjMsRDNEQixENkQxLEM1RTgsRDNBRixEMkU2LEVFQzEsQjBCQixENUI1LEQxQ0UsQkNFMCxCQUQwLEJGRjgsQjhDNyxCNUMxLEM1Q0MsQ0FBMixDM0NCLEVFQzIsQzRCRixCNkEyLEVERUMsQzNBNCxENkIxLENGRTAsRURFRixDNUNFLEI2REMsQ0FBMSxFREVELEVERjAsRURGMSxDM0JDLEJGQjQsRURFRSxFREY0LEVERjIsRDVFNixDM0RGLEVERjMsRURGNixENUEzLEQxQTMsRURGNSxDM0QwLEVERjcsQkZGNCxCRUVDLEVERjgsQ0NGNyxEMURCLEQ3QzUsRDVGNixFREZDLEVERkIsRURGOSxFREZBLEVERkQsQkVBNixDQkFGLEVFQTEsQjZCRCxFRUEyLEM0QzAsRURGRSxCRERFLEIyQzcsQjZDMyxFRUE1LEQ4QkEsRUVBMyxFRUE2LEMzRTksQjNGMixFRUE3LEVFQTQsQ0ZCOSxFRUE4LEMyRjcsRUVBOSxFRUFBLERFQUIsQzZCMyxDN0M2LEQ2RjUsQjVDOSxDQkIyLEVFQUIsQ0RBQixFRUFDLEQ1QjAsRUVBRCxGNkM0LERCQzcsQjRBMyxDM0FDLEYxRTYsQ0FCOCxEMkQzLEQ2QUEsRUZGMixCRUQ4LEJEQzMsRUZGMyxCNkNDLEIwQUIsQ0FBRixFREI2LEVEQjcsQ0VGOSxCN0FGLEJGRjMsRURCOCxDMkVCLEM5QjAsRURCOSxDNkY2LEJGQjMsRURCQyxDNUY4LEQxRDAsRDdBOSxFREJBLEVEQkIsRDFFMixFREJGLEVEQzAsRURDNCxFREM4LEVEQzYsRURDRSxENUU4LEVEQzksRURDNyxFREJFLEM1RTksQzZDNixDOUU5LEQ0RDIsRURDMSxFREMyLEVEQzMsRURDNSxDMEY5LEI0QTEsQjlFOCxFREQwLEVERDEsRURDQSxFRENGLENFRjgsQ0JCNixFRENDLEVEQ0QsQ0ZGNSxFREQyLEMxRjIsRDNCMixFRENCLEM4QjcsQkNFRixDNUYwLEVERDYsQjVFRixDMkI1LEIwQUQsQ0JFOSxCMUFFLEVERDQsQ0RFQixCNUUyLEVERDUsRUREMyxFREQ3LEI1RkEsRUREOCxFREQ5LEVEREMsQjFDQyxDNUY2LEJDRUUsRUREQSxDQ0JDLEIyRUEsRUREQixDNEVCLEI0QzUsQjBGNSxFRERGLEMwREEsQjRFOCxDNUNELEVEREQsQkZDNCxFRERFLEM0QTUsRURFMCxFREUxLEVERTMsQzFENyxCQkM3LEJEQjgsRURFMixFREU0LEVERTYsRURFNSxFREU3LENBQkUsRUNFQSxDMEYxLEM5RTcsRUNFQixDNkVFLEVDRUMsQzZFRCxFQ0VELEVDRjAsRDdFNixFQ0YzLEVDRjEsRUNFRSxFQ0VGLEQ3QTMsQzlGMSxDQkVFLEVDRjQsRUNGMixDRkU5LEVDRjYsQzZCMSxCQ0MwLEVDRjUsQjVCQixCQkY2LEVDRjcsRDlGNyxCREZCLEMyQkIsRUNGOCxFQ0Y5LEI4QTMsRUNGQSxFQ0ZCLEVDRkMsRDNFRCxEOEFFLEMwRUIsQzdERCxCQUNDLEQwRTMsQ0JCRCxDREJBLEI4RDEsQjFGQyxDN0VGLEQ2RDYsQkZDNixDM0VCLEVGRjUsQzNEOCxEN0UyLEVGRjcsQjNEMyxDN0Q4LEQxRUQsRDZDOCxFRkY4LEVGRjYsQkJGRCxCM0M2LEJERDUsRDJDNixCQkUwLENGQTEsRUZGQyxFRkZCLEVGRjksQjNDQyxDOUQ0LENCQjAsRUZGRSxCMERFLEQ2QzksRUZGRCxCM0VELEY2RDUsQ0VDOCxGMEEyLEYwQTEsQjVCRSxCQ0RBLEJCRkMsQjhFNSxDNEMyLEYwQTMsQ0JFQixGMEE2LEQxQTgsQkVCRixDN0VFLEYxQjYsRjFCNyxCRkQ1LEI0QTksRjFCOCxDREJCLEM3RDQsRDVBRCxGMUI5LEYxQkEsQzdDRixEMkE0LEQ2Q0YsRjFCQixCREQxLEI0QjAsQkVCRCxCNERDLENFRDEsQkZERixGMUJELEJGRkEsRjFCQyxGMUJGLEYxQkUsRjFDMCxGMUMxLEMxRkUsQzFBMixDQUZBLEQ1QkUsQkVCQSxCRUI5LEQ1QzIsQkZBMixDREFGLEYxQjUsQkRERixCNkNCLEQ2RjEsRjNDMyxGM0M0LEI4Q0QsRjNDNixGM0M3LEIwQ0EsRjNDNSxGM0M5LENCRjEsRjNDQixEMEE2LEIxQ0EsRjNDOCxGM0NGLEI1RDEsRjNENyxGM0QyLEYzRDQsRjNEMyxCN0ZCLEIxQkYsRjNDRSxGM0NBLEI1REEsRjNEMCxGM0QxLEYzRDUsRjNDRCxCQ0UzLEMxRkQsRjNENixGM0RBLEYzQ0MsQjVDOCxCREVFLEYzREMsQjdBNCxCRkYwLEQ2RkUsQ0RCMixCNEYwLEIyREYsRjNEOCxGM0Q5LEM5QjgsRjNERCxGM0RFLEYzRTEsRjNERixGM0UzLEYzRTIsRjNEQixCRkVBLEIzRUYsRjNFMCxDN0E5LEJDRjIsRjNFQixCOUJGLEYzRTQsQjJBRCxCQkZFLENCRTMsRjNFRCxGM0U5LEI5REMsRjNFRSxGM0U1LEYzRTYsRjNFQSxDMkUxLEYzRUMsRjNFRixGM0U4LEJDRkQsQ0ZFNCxGM0YwLEYzRTcsRjNGMixEN0FELEM2QUEsRjNGMyxGM0YxLEMyQTgsQjhERCxGM0Y1LEYzRjQsQjREQixGM0Y2LEYzRjcsRjNGOCxDMEJBLEMwRTksQzVGMSxGM0ZCLEYzRkEsQjREOCxGM0ZFLEYzRjksRjNGQyxGM0ZELEY0QTEsRjRBMyxCQkM5LEY0QTIsRjRBNCxCMkJFLEY0QTYsRjRBNSxCQ0FFLEMzRDcsRDlFMSxDMEUwLEY0Q0MsRDdEMSxCN0RCLEY0Q0UsQzFBMyxDNkM5LEI0RDYsRDVCMyxGNEQwLEY0Q0YsRjREMSxDQkRBLEY0RDIsRDRDMSxENkUwLEI3RTAsQzFCOCxDMUJCLEY0RDMsQkVBQyxCNEUyLEY0RDQsRjRENSxCRUFCLEY0RDYsRjREQixGNEQ3LEY0REEsQkFGRCxGNEQ4LEY0RDksQjhFMixDQ0M3LEY0REMsQjJEQSxDM0QzLEQ0RTMsQkZCNyxGNERELEM1QjQsRjRFOSxDRkI1LENFQzksQ0JEOCxDQkY3LEJERjQsRDdDRixDMERCLEQwRjUsRjRFQSxGNEVCLEY0RUMsRjdFMyxCN0IxLEY0RUQsRDdFQixGNEVFLEU2RjksQkVDMCxFNkZBLEJBRUMsRTZGQixDRkNCLEU2RkMsRDRCQyxCQ0I2LEU2RkQsRTZGRSxCQ0NELEM4RDIsQ0VCMyxFN0ExLEI0QkYsRTdBMixDOUI0LEI4RDksQzRDOSxEN0RELEMyREEsQjdENyxENkJELENFQzYsQjdDNCxDNUE2LEU3QTMsQ0ZERixFN0E0LEU3QTUsRTdBNixDMUI3LEQ3RTksQzlGMCxDRkI4LEQ2QUYsRDZENSxFN0E3LEIwRUQsRTdBOCxFN0E5LEM5REMsRDJFRixCRUFELEU3QUEsQjBGMyxDOERFLEJERTEsRTdBQixDOEM2LEU3QUMsQkJFNixCOEY4LEQxQTQsRTdBRCxDMkU3LEJFRjgsQkRDQSxDREIzLEU3QUUsRTdBRixCRUVFLEQwRTUsQ0JFNyxDQ0QwLEJDQ0MsRTdCMCxCQ0E4LEQwRjcsRTdCMSxEMEY4LEU3QjIsRTdCMyxCNEMyLEU3QjQsRTdCNSxDOUZFLENFQUMsQzNFMCxFN0I3LEIxQzEsQjNGMSxFN0I4LEU3QjksRDdEQixENUMwLEU3QkEsQzJDQyxEN0JBLEU3QkIsRTdCQyxFN0JELEJDRUEsQzNFNSxDMEMyLEU3QkUsRTdCRixCQ0E5LEU3QzAsRTdDMSxFN0I2LEI2RDAsRTdDMixFN0MzLEU3QzQsQkJCQSxCNURFLEMyQzYsQjFFMCxFN0M1LEQ0QjUsRTdDNixCOEJGLEU3QzgsRTdDNyxCN0VDLEU3QzksQjJGOCxFN0NBLEU3Q0IsRTdDQyxFN0NELEU3Q0UsRTdDRixFN0QwLEQzQTcsQ0JGNSxFN0QxLEU3RDIsRTdEMyxFN0Q0LEM5QzksRTdENSxFN0Q2LEU3RDcsRTdEOCxFN0Q5LEJEQzksRTdEQSxGM0JFLEI4RDcsQzhCMSxGM0JGLEYzQzAsRjNDMSxCOURFLENERjgsRDhFOCxCQUIxLEMyREUsRUVCNyxCN0EzLEVFQjksRUVCOCxCMEQ1LEVFQkIsRDVENixEN0VGLEQ2QzMsRUVCRCxDQUYwLEVFQkMsRUVCRSxFRUMwLEVFQkYsRDFGMixDN0JDLEMzQzAsQjhFMSxDMUU3LEY0QzYsRDBERixGNEM3LENGREIsQzhCQSxGNEM4LEY0QzksRjRDQSxGNENCLEQ5RkEsQjhGRSxFNUYxLEQzRjAsRjRFMCxDRUNDLEIzRTEsRjFCNCxEMkVFLEY0RTEsQ0ZFOCxGNEUyLEM3Q0MsQjVENCxCNEU0LEY0RTQsRjRFMyxGNEU1LEY0RTYsRjRFNyxCQUIyLEIwQkYsRjRFOCxCN0FELEQyRUQsRDJBQixDMENGLEJGQkMsRUJBMyxENURGLEVBQzgsRjFGMyxCNkY4LENCQTMsQzRDRCxGMUU3LEYxRTgsQjhGQixGMUU5LEJBQzQsRDRDNSxCMEQyLEYxRUEsRjFFQixGMUVDLEYxRUQsRjFFRSxGMUVGLEYxRjEsRjFGMCxDNUQ1LEYxRjIsQjZGQSxGMUY0LEQyQUUsREVDNyxDQkNBLEIzREMsQjVBMixCOUEyLEM0RjQsRjFGNSxGMUY2LEMxQzQsQzFGQixENkIwLEYxRjcsRjFGOCxDMUFBLEM2QjgsQkVEQixGMUY5LEI0Q0YsRjFGQSxFREIyLEVEQjEsQ0JFMCxEMkRFLENCQzEsRDVEOCxDOEUyLEMwREYsQkNBMSxFQkMxLEQwQTQsRDZFMixCNkM3LEI4RDgsRUJDMCxCOENFLEVCQkYsQjNBNixCOUM5LEQ2QUIsQjdGNCxCN0NBLEJDRTcsQjdCRSxFQkM2LEVCQzcsQjBCOSxCRkNGLEVCQzUsRDNGRCxFQkM4LEVCQzksQjdDRSxFQkMyLEVCQzQsQzlGNixENkQ3LEQ1Q0QsRDBCMixFQkNGLENFQjgsRUJEMCxCNUE4LEIxQjMsRUJEMixDQ0E1LEM1RDYsRUJEMyxFQkQxLEM1REYsRUJDRSxDQUE0LEVCRDUsQjBGQixCQUZBLEQ4QjcsRjFFMyxFQkNBLEVCQ0IsRUJDQyxFQkNELEVCRDYsRTZDMCxFQkQ5LEJGRTgsRDJDOCxFQkQ3LEVCREMsQjhFQyxFQkQ4LEJEQkEsRDBEOCxCMEI3LEVCREQsQzREQyxENkFDLEI0RTAsQzJGNixCQ0I5LEVCREEsRUJEQixENEUwLEM2RUEsQzRENCxFQkRGLEM1QTcsRDlGNSxCMkIxLEVCRTQsQkRDNSxFQkUyLEVCRTMsQjhBQyxDREQxLEVCRTUsRUJFMSxDMUIzLEM2QTIsQ0NGMyxFQkU2LEMwQjAsRDJCOCxFQkU3LEI4QUYsQjhBRCxFQkU4LEM3QkIsQ0RGMyxFQkVBLEVCRUIsRUJFRCxEMEM4LEVCRjIsRUJFRSxFQkYxLEM4RjksRDFGQyxFQkVDLEVCRTksQjhCOSxDRkQ5LEM0RTUsRUJFRixFQkYwLENDREEsQ0RDOCxCMEYyLEVCRjYsRUJGNSxCMkIyLEI4RTAsRUJGNyxCMUVDLENDQzUsQzRBNCxDRkE1LEVCRjksRUNBMixDNUYyLEVCRkEsQzlDNSxFMkRGLEVCRkUsQ0RDRSxFQ0ExLEIxREIsRDNCNyxEMkRDLEVCRkQsRUJGQixCM0JDLEVBQjAsRDdENCxGNEFCLEIzRjQsRDZDMSxENkMyLEQ1RTksQkVDQSxGNEE3LEQyQTgsRjRBOCxGNEE5LEY0QUEsQkVDQixEM0RGLEM5RTAsQzlFMSxGM0MyLENBRTYsQ0NGMixFMkI2LENCQjQsQ0VFOCxENkRCLEY0QUQsRjRBRSxGNEFGLEY0QjIsQkFCRCxGNEIzLEIwRTMsRjRCMCxGNEIxLEJEQTIsQjJENSxGNEI2LEY0QjcsQjZFNixCMkIwLENGQ0YsRjRCNCxCNEFDLEY0QjUsRjRCOCxGNEI5LENEQTcsRjRCQSxGNEJCLEY0QkMsQ0JEMixGNEJELEY0QkUsRjRCRixGNERFLEMxQkMsQkNFOCxDOUFCLEQxREUsRTVGNSxEQ0IzLEQyRDUsRENCNCxCMEFDLERDQjUsQkREQSxEQ0I5LEQ4QzIsRENCNyxEM0YzLEM5RDYsRENCQSxEQ0I2LERDQkIsQzNBMixEQ0JDLERDQzUsRENCRCxDRURGLEQ2QTUsRENDRixEQ0NELERDRDIsQkRFNixDMkFCLERDQjgsRENDQixEQ0NFLERDQkUsQjdEMixCMEM1LERDQzcsRDBCRSxEQ0MxLEJCQTgsQjdCQyxEQ0NDLERDQzYsRENCRixDN0RCLEQxQkYsRENDMCxEQ0NBLERDRDAsQ0VBRCxEQ0MyLERDQzMsRENDOCxEQ0M5LEIyRDQsRENEMSxDQkQ1LEQ0QjcsRENEQixEQ0RGLENDQTYsRENFNixDM0U3LERDREMsQkZDMSxEQ0Q5LEIwRkEsQjlCNixEQ0U1LERDRDMsRENDNCxEQ0Q2LEM4RjQsQkZFMCxDOUJCLEIxQkQsRDNBMixEQ0RBLERDRDUsQzZCQixEQ0RFLEQ3QzIsQzNBRixCN0I2LEM3RDEsQzNBOSxEQ0UyLERDRDgsRENFQixEQ0Q0LERDREQsQkVBNSxEQ0Q3LERDRTAsRENFMyxEQ0U0LERDRjgsRENFMSxEREEyLERDRTcsQkNFQixCNEM0LEMzQTMsQjJFNyxEQ0ZBLERDRjIsRENFRixEQ0ZDLERDRUUsRDJGMCxCMkU4LEM4RDcsQzhFMyxEQ0ZCLERDRUQsRENGNyxEQ0Y1LEJFQTMsRENGNCxCMkRELERDRjMsQkNGNixEQ0U4LEJCQzQsQzBGMyxCQ0Q0LERDRTksRENFQSxEQ0YxLERDRjYsRENGOSxCNUI0LEM4RDksQkJFNyxEQ0ZFLERDRkQsRDNBQixEREExLEREQTMsRERBNSxEMkYxLEREQTQsRERBNixEREE3LEQyQTksQkFDOSxEREE5LEREQjYsRERCMSxEREI0LEREQjAsQzZDRSxDMEYyLEM5QUYsRENFQyxEREFFLEREQjcsRENGMCxEREFGLEREQjgsRERBQyxEREI5LEREQjMsRERBRCxDNEFBLEREQTgsQzBCMyxDMUFCLEREQUEsRERBQixEREIyLEJCRjEsRERCNSxEM0E4LEREQkEsRERCQixDM0E3LERERDIsRERCQyxEREQxLEI5QkQsQkVENSxCRUZBLEJBQ0EsRERDQSxEREM1LEREQkYsQjJDQixEREMzLEREQ0IsQjJBNCxEREQ1LEREQkUsQzZEMCxEREQwLERERDQsQzFFMixCN0M2LEREQ0UsRERDRixEREM0LEREQkQsRERDRCxDQ0QxLEREQzksRERDMixDM0M4LEM2QkMsQ0VBRSxERENDLEREQzgsRERDMSxEREM2LEMyREMsRDNBOSxEM0FBLERERDMsQ0ZGNCxDOEY4LERERTYsRERDNyxEREUwLEMyRTQsRERFMSxEREQ3LEQ2RjgsREREOSxEREQ4LEI4RjAsRERENixDNkNGLEI2QUQsRERFMixCQUY5LEQ0RTEsRERFNyxCNEQwLEREREEsQkZGQixEREUzLEREREYsRERERCxCNUQ5LEREREIsREREQyxERERFLEJEQUYsRERFNCxEREU1LERERjUsQzNDOSxDQkUyLERERjIsRDhFMSxDNkQxLERERjQsRDVGNCxEREYzLERERjAsRERFQyxEREVGLERERTgsRDBFRSxDOEQ4LERERUUsRERFOSxEREVBLENCRjIsRERFRCxCMUNELEMwQjYsQkNCQixEREYxLERERjcsRERGNixEREVCLEM1RUUsRERGQixERUE0LERFQTMsRERGOCxDM0VGLEMyRkIsRDVFMSxDRUI1LERERkQsQjJDQyxDNEU4LENBREYsQzdCRSxEREZBLERERkMsRERGRSxERUEyLEIwQUEsQjFDRSxERUFDLERFQTYsQkRCNixDOEVGLERFQTEsREVBNSxERUE5LERFQTgsREVBNyxERUFELEQ0Q0MsREVCMyxERUFBLERFQUUsQzBEOSxCMUExLERFQjYsREVCMSxERUIyLEQxQTYsREVCNSxERUFGLERFQjAsRDBCRCxERUI0LENBRUQsREVCOSxERUI4LERFQjcsREVCQixCREU1LEIyRDgsQzNFQSxERUJBLEM1QkEsREVCQyxDQ0Q5LEI3QUEsRDRFNSxERUJELERFQkYsQzRBMixERUMxLERFQkUsREVDMCxENUJBLERFQzIsRjJBRSxCQkEyLEMyQjIsQzVCMCxDMkM3LEYyQUYsRDBFOSxEM0RELEVCQkQsQjNFNixGMkIwLEYyQjEsQ0FBRCxCQUU3LEYyQjMsRjJCNSxGMkI0LENCRTQsQ0ZCQSxGMkIyLENBQjQsRDJDRixDMkVDLENFQzMsRjJCOCxCMEY2LEYyQjcsRjJCRSxCMkNGLEQxQzEsRjJCQSxGMkJDLEQ0RTksRjJCQixGMkI2LEYyQkYsRjJCRCxGMkI5LEYyQzcsRjJDNCxGMkM2LEYyQ0EsRjJDMixGMkMwLEYyQzUsRDZGQixGMkMxLEM3RjksQzlERixGMkM4LEI5QzYsQjVCMCxGMkMzLEYyQzksRjJEMCxGMkQ2LEJCRDcsRjJENSxDRERDLEQ2RUIsRjJEMixGMkQ0LEI4RjIsRjJDQixGMkNFLEMyRjksRDVERCxGMkNDLEYyQ0QsRjJDRixGMkQzLEYyRDksRDNCQyxCNkVBLENBRjEsQjdFNCxGMkQ3LEYyRDgsRjJEQSxGMkRELEYyREIsRjJEQyxEMUQxLEYyRDEsQ0RDOSxDRUNGLEQ2QTksRjJFMyxDM0RCLEYyRTAsQzBBRixGMkVDLEYyREUsRjJFMSxGMkU4LEYyRTIsRjJFNyxGMkU2LEYyRTksRjJERixGMkU0LEYyRUEsRDNBQyxGMkU1LEIyRjUsRjJGMixEMEFCLEYyRjUsQkJDOCxGMkY5LEYyRjAsRjJGNixGMkY4LEYyRkEsRjJGMyxGMkYxLEJBRkIsQjVGQixGMkVGLEYyRjcsRjJFRCxGMkVFLEYyRUIsRjNBNixGM0EzLEYzQTIsRjJGNCxDOERBLEYyRkIsRjNBNSxDM0Y4LEYyRkQsRjNBNyxGM0E5LEYzQTQsRjJGQyxGM0FCLEYzQUEsQzJERCxGM0FFLEYzQjAsRjNBMSxGM0IxLEYzQUMsRjNBRixGMkZFLEYzQUQsRjNCMixGM0I0LEYzQTgsRjNCMyxGM0I1LEQwQjcsRjNCOCxEOUY5LEYzQjksRjNCNyxDOEU0LEYzQjYsRjNCQSxGM0JCLEI0QzAsRUVDMyxGM0JDLEYzQkQsRDFBQSxGNEFDLEQwQzYsRDBEMCxEMURDLENGQ0UsQkRENixEMUMzLEJBRTIsRTFFOSxEMkMyLEYxQzIsQjJCOSxCMUVELEYxQzMsQzlDMCxCM0M0LEQ5RjIsQ0JBNSxGMUM0LEQ2RDQsRjFDNSxGNEMwLEYxQzYsRDRBQyxGMUM3LEIwQzAsRjRDMSxGNEMyLEI0RkMsQzVEQixDQ0JCLEQwRTQsQ0RFMCxGMUM4LEQ5RjMsQjFCQixDRkFFLEI4QTQsRjFDQSxGMUNCLEIyQzMsQzFEMSxEN0IwLEYxQzksRjFDQyxGMUNFLEQ5RjYsRDJFMSxENEEzLEY0QzMsQzhCOSxGNEM0LEYxQ0QsRjFDRixCRkUzLEYxRDAsRjFENCxGMUQ2LEYxRDEsQzlEMSxDNUUxLEMyRTMsQjlGQyxGMUQzLEYxRDUsQjlEMyxGMURCLEJBRDYsQjBGRCxGMUQ5LEYxRDgsRjFEMixGMURBLEYxRDcsQzhFQyxDRENBLEYxREQsRTVCRCxGMURDLEYxREUsRjFERixDRkU1LEY0QzUsQkRGMyxGMUUwLEYxRTEsQ0VGNyxEMkFBLEYxRkIsQjhCMixCQ0ZCLEI5REIsQjlFNixDM0Q5LENBRDMsRUFFOCxDMEMwLEJFRjUsRUFFOSxFQUVBLEVBRUIsRUFFQyxFQUVELEVBRUUsRUFFRixCREM3LEY1RkIsRjVGRCxGNUZFLEY1RkMsQkRFMixGNkExLEI0QTUsRjZBMixGNkEzLEVDQjIsRDFENCxEOUVBLEY2QTQsRUVCQSxENUIyLEQzRkUsQ0NEQyxDQUM0LEU1QzAsRjZBNSxCRUFGLEM2QTksREFBNSxCQ0M2LEI2QTksQjhCQyxDOENGLEJDQTUsREFBNixEQUE3LENDRDYsQzhDMyxEQUE4LEM2RkQsRDFCNSxEMkU5LEQxQjYsQkNDNyxCREIyLEJCRTQsREFBOSxEQUFBLEQxQzgsREFBQixEMEVELEI2RUYsQzJEQixDQkNGLEI3RUQsQzlFOCxCN0MzLEJFRjcsRDZBNCxEQUFDLERBQUQsQzZDMCxEN0U3LENBQjYsRDVBOSxDQkRGLEQ1RUYsREFBRSxENkRGLEI0Q0EsREFCMCxEQUFGLEQyRUIsREFCMSxEQUIyLERBQjMsQ0FENCxEQUI0LENBQUIsREFCNSxEQUI2LEIzQ0YsRDZFRixEQUI3LEJCQjAsQjVBRSxEQUI4LERBQjksQjlFRSxEMUFGLEQyRTgsREFCQSxCOEMzLENGRUEsQjJFRixEQUJCLERBQkMsQkRFQixDRURDLEQzRUYsREFCRCxDRUYzLERBQkUsRDNENSxCQkU1LERBQkYsQ0JCNSxDQkQwLERBQzAsQzdFQixENkVFLERBQzEsQzVCNSxCNkMxLERBQzIsQjdDQyxCRkNFLERBQzMsREFDNCxDQkFELERBQzUsQjVGNyxEQUM2LEMxQzIsRDdCQixEQUM3LENDQjgsRDJFQSxDNEIxLERBQzgsQjVGRCxCQkQxLERBQzksRDBCMyxEQUNBLERBQ0IsQ0VCRCxEQUNDLERBQ0QsREFDRSxCMkY3LERBRDEsREFDRixEMUU4LERBRDAsQzNENSxEQUQyLERBRDMsREFENCxEQUQ1LEQwQkIsRDJBNSxCMEY5LERBRDYsQzdBQixEQUQ3LEJERjcsQzNBMSxEQUQ4LERBRDksQzNGRCxDQ0I3LERBREEsREFEQixDMEJFLEM2RDcsREFEQyxEQURELEM3QjQsREFERSxEQURGLEI5QzgsQkJFRCxCNkI5LEY0RjgsRjRGOSxDREUzLEY1QjksRUJFMCxDRkYzLEJCQkYsQkFDMCxENEE1LEUxRDksRjVGNCxCMUFBLEIyRjIsRjVGNSxGNUY3LEJBRDEsRjVGNixDM0IyLEY1RjksRjVGOCxCMUI0LEQ1RUEsQjhCQSxCOUIxLEIyQzYsRDRGMCxDRkNELEIwREMsRDVDQixCQkY1LEQ2Q0EsQjdCNyxDQ0IwLEM2QjYsQjFFMSxCOUJBLEQ2RkMsQjlFMSxCN0ExLEJDRkEsRUFEQSxFQURCLENDRjksQjlGMyxFQURDLEI0RkIsQzNCMyxCN0QxLEJBRDgsRUFERCxENEY0LEVBREUsQkNENixCQkRGLEVBREYsQzFERSxDMkI4LEQ0REYsRDdDQSxFQUUwLEVBRTEsRUFFNCxFQUUyLEVBRTMsQzlERSxCOEIzLEI2QzQsRUFFNSxDQUVBLEM5Q0QsQjRDRCxFMkQ5LEM1RTIsRUFFNixDMEI1LEQ3QjgsRUFFNyxEN0FDLEM4RkMsRDhEMyxEOENELEQ0REUsRDRGOSxDOUM0LEQzQUUsQjhEMyxCM0UwLEM5RTIsRjRGNixCQUQ1LEY0RjcsRDdERixGNEYxLEI4QjAsRDVENCxCOENGLEM2RjAsQjNDMyxGNEYyLEIzQUMsRDRCRCxDN0Y3LEY0RjQsRjRGMyxDQ0NCLEM4QTQsRjRGNSxEN0UzLEM1QkYsRjVDMCxGNUJCLEY1QzMsRjVDMixENkJBLEY1QzEsRDRCRSxGNUM0LEY1Q0MsQjBDRixCNUY4LEY1QzksRjVDQSxDNURDLEY1QzUsRjVDNixGNUM3LEY1Q0IsQkVFMCxGNUM4LEI4RkEsRjVEMCxGNUQzLEJGRTcsQjlGMixGNUJDLEY1Q0QsQzJCNyxDQ0Y4LEJDRjksRjVDRSxGNUNGLEY1RDEsQjZFNSxGNUQyLEY1RDUsRjVCRCxGNUQ0LEQzQkIsQjNFQyxDQ0E0LEY1RDYsRjVENyxCRUUxLEY1RDgsQ0NERixGNURCLEIyQzgsRDdEOSxGNUQ5LEY1REEsRjVEQyxGNUUyLEY1RTAsRjVERixGNURELEY1RTEsRjVERSxGNUU0LEY1RTUsQ0NFMyxFNUJGLEI1QjgsRjVFMyxGNUU4LENDQTMsRjVFNixGNUU3LEY1QkUsQjFDNCxGNUJGLEI1QzUsQjJFNCxGNUVDLEY1RTksQjZENyxGNUVELEY1RUEsRjVFQixCNERBLEQ0RUEsRjVFRSxCM0Y5LEY1RUYsRjVGMSxGNUYwLEY1RjIsRjVGMyxDOUVELEI5QUEsQzdGQixCNkUzLENDQzksRUFBNixCM0I1LEQ0RkUsQjlFQyxEMEY5LEU5RUQsRDdBQSxFOUVFLEMyRDYsQzhFRCxCQUU0LEU5RUYsRTlGMCxFOUYxLEQ2RTEsRTlGMixFOUYzLEU5RjUsRTlGNCxFOUY2LEU5RjcsQzdFMSxFOUY4LEQ0RDgsRTlGOSxCRENFLEU5RkEsRTlGQixCRENGLEU5RkMsQjhBOCxDMUJFLEU5RkQsQjFCMixCQkQ0LEI5RjUsRTlGRSxFQUExLEVBQTIsRUFBMyxCN0Y4LEJDQUQsQ0FFNCxFMENFLEQ0QUYsQ0ZCRCxENUI3LEVBQTQsRDVERSxFQUE1LEQwQzEsQjlCQyxCNEM3LEIxRDksQzBCMSxCMUU2LEIxRTcsQjFFOCxCM0JELEM4RTgsRTVDMSxCMURGLEMxQzksQjRFRixDN0E4LEQzRDgsQzZGOSxEMUI4LEI5RkQsQzJGNSxEM0FELEQ0Q0IsQkRGQyxFNUMyLEI3QjUsRTVDMyxCQkI5LEQ1RTIsQkRGOCxENEI2LENFQTUsQzFBQyxCM0Q5LENDRjYsRTVDNixFNUM0LEU1QzgsRTVDQSxFNUM3LEI1Q0YsQzZDOCxCNUZDLEU1QzUsQ0FGNixFNUM5LEMzRDQsQjFDNSxCQ0EzLEQ3QjcsQ0RDQixDQkNELENBQ0EsQ0NEMyxFNUNDLEU1Q0IsQzRFNixEMUExLEQxQjcsRTVDRCxFNUQwLENEQjgsRDZGMCxFNUNGLEI1REQsQ0RCRSxFNUQxLEI2QkEsQ0RBOCxCOUU0LENBQzUsQjNEMSxDQkQ5LEQ0RUMsRTVEMixCN0VBLEU1Q0UsRTVENSxCNEZFLEU1RDYsRTVEMyxFNUQ0LEQyREQsQzJERixCMUM2LEQzRTIsQjZERCxDQkVDLEU1RDcsRDNGNixCMUU5LEI2RjQsRTVEQSxFNUQ4LEU1RDksQjVDMCxEMkM1LEU1REMsRTVERSxFNURELEM3QjIsRDJBMyxFNURCLEQ0RTIsRDVEQSxFNUUwLEQ3RjEsRTVFMSxCMURDLEQxRkIsRTVFMixFNUU0LEU1RTMsRTVFNSxEMkQ4LEI1Q0IsRTdERixEQUY1LERBRjgsREFGNixEQUY3LERBRkEsRDBDRixDNEM3LEIwRUUsRDBCMCxEQUY5LEQzQ0EsQkFBQSxEQkEyLEM3RjEsREFGQyxEQUZCLEM5REIsREFGRCxEQkExLEQ3REUsREFGRSxDMURBLERCQTUsRDNGNCxEQkE3LERCQTQsREJBOCxCREJDLEMwQzksREJBMyxEQkE2LEQ2QTMsREJBOSxEQkFELERCQUUsREJBQyxCQUMyLEJGQTQsREJBQixEQkFBLEQ0QzcsQjJCRixEQkFGLEI5RjksREJCMCxCM0JCLEI1QTYsQjZCQyxEQkIxLEI2RjUsREJCMixCMUM5LERCQjQsREJCMyxEQkI1LERCQjcsREJCNixEQkI4LERCQjksREJCQSxEM0NGLEY0RkEsQzdGNSxEN0MzLEM1RTQsRjRGQyxGNEZELEY0RkIsQkVDNixEMEVGLEI3RDMsRDRDRCxDQ0FBLEY1QTIsRjVBMSxCQUE4LEY0RkUsQ0JENixGNUE0LEMwRDIsQjNFQSxDREFBLEY1QTUsRjVBMyxCREI0LEY1QTgsRjVBOSxCRENELEMzQjgsQkZFMSxDQkUxLEY1QUEsRjVBNixGNUE3LEM0RjAsRjVBQyxCNEJDLEQ3RUQsQjRENyxGNUFCLEY1QUUsRjVBRCxGNUFGLEQwRDEsQzNEMSxDOEE5LEY1QjAsRjVCMSxGNUIyLEY1QjMsRjVCNCxGNUI1LEY1QjcsRjVCNixGNUI4LEIyQzksRDNENCxDQUNELEMwRUYsRDZEOCxEMkIwLEMxQkYsQkRGMCxCOEFBLEJDRjgsRjZDNixGNkM3LEY2QzgsRjZDOSxGNkNBLEY2Q0MsRjZDQixGN0U5LEY2Q0QsRjZDRSxFRUM0LEVFQzUsRUVDNixENUVCLEI2QTQsRUVDOCxFRUM3LEVFQzksRUVDQSxDN0E1LEVFQ0IsRUVDQyxCN0IwLEI1RjYsRUVDRCxFRUNGLEVFQ0UsQjhDNixFRUQwLEVFRDEsRUVEMixCNkRCLEIzQUUsRDZEMyxDNEM2LEIxQjUsQjhENixFRUQzLEVFRDQsRDRCRixDN0Q1LEJFRkIsQ0VEOSxCOUIzLEVFRDYsRUVENSxFRUQ4LEVFRDcsQzVBNSxFRUQ5LEVFREEsQzdBRSxFRURCLEM3QUYsRUVEQyxCMkE3LEVFREQsRUVERSxFRURGLEVFRTAsRUVFMSxEN0VBLEVFRTIsRUVFMyxCQ0Q4LEVFRTQsRDNDQixDQ0ZBLEIyQUMsQzFFNSxFRUU1LEM3QTYsQzNBRCxFRUU2LEVFRTcsRUVFOCxFRUU5LEVFRUEsRUVFQixFRUVDLEVFRUQsRUVFRSxFRUVGLEVFRjAsRUVGMSxFRUYyLEVFRjQsRUVGMyxFRUY1LENEQUQsQzJDMSxFRUY2LEVFRjcsRUVGOCxENUExLEVFRjksQ0ZCMyxFRUZBLEVFRkIsRUVGQyxFRUZELEVGQTEsRUVGRSxFRkEyLEI4RjUsQzNGQSxFRkEzLEVGQTQsQkRDMixEMkJGLEIyRjksRUZBNSxFRkE2LEVGQTcsRDJGOCxFRkE4LEQ2RkQsRUZBOSxDNkNDLEVGQUEsRUZBQixDMUI0LEVGQUMsQ0ZGQSxDQkY4LEVGQUUsRUZBRCxCM0ZBLEI5RjgsRUZBRixFRkIwLEQwRTIsRUZCMSxFRkIyLEI3RTYsRDBCRixFRkIzLEVGQjQsRUZCNSxDOEYxLENDRTAsRUZCNixFRkI3LEVGQjgsRUZCOSxFRkJBLEQ1RTAsRUZCQixCNEVELEMzQUEsRUZCQyxFRkJELEVGQkUsRUZCRixDRUZELEVGQzAsQzJFMCxCNEI4LEQ3QjYsQkRGNSxDRkM3LEVGQzMsRUZDMSxFRkMyLEVGQzQsQjZBNyxCQ0ZDLEJFRTIsQzNDQyxFRkM1LEVGQzYsRUZDNyxFRkNGLEVGQzgsRUZDOSxFRkNBLEM3QzIsRUZGMSxCNkNELEVGQ0IsRUZDQyxFRkNELEI2QzYsQzNCRSxFRkNFLEVGRDAsRUZEMSxFRkQyLEQ1RjIsRUZEMyxDNEY3LEVGRDQsQzRGOCxFRkQ1LEVGRDYsQjhFNCxCMEY3LEVGRDcsRUZEOCxFRkQ5LEVGREEsRUZEQixFRkRDLEVGREQsRUZERSxCRUI1LEVGRTEsRUZERixFRkUwLEVGRTIsRUZFMyxDMUNELEVGRTQsRUZFNSxFRkU2LEVGRTcsRUZFOCxFRkU5LEVGRUEsRUZFQixFRkVDLEMwRDgsRUZFRCxDMUFELEVGRUUsRUZFRixFRkYwLENGRTIsQjNBNCxDM0M1LEUzQzUsQzlDMSxFM0M2LEIxRDUsQ0VDQSxCNEIzLEM4RjIsRTNDNyxDRkQwLEUzQzgsQkNFNCxFM0M5LEUzQ0EsQzNDNixENUEyLEM0RDYsQjlFQixDRUM1LEUzQ0IsQzNGNixFM0NDLEI3QTcsQjhGMyxCQUQyLEUzQ0QsRTNDRSxENEM0LEUzQ0YsRTNEMCxEMUNCLEUzRDEsRTNEMixFM0QzLEUzRDQsRDFENixFM0Q1LEIyRkIsQzBCQixFM0Q2LEMwQUIsRTNENyxFM0Q4LEUzRDksRTNEQSxFM0RCLEI4QjcsREFFMixCNkQzLERBRTQsREFFMyxEQUU2LEM4RUUsREFFNSxCN0MwLEQxRjQsRDJGNSxENUYzLEJERDcsRDdFOCxEQUU4LERBRTcsQjBBMixDREQzLERBRTksQjhCRCxCQ0NBLEMyQkQsQzJBNCxCM0MyLERBRUEsQzJBQSxDNEIwLEJEQjUsQ0ZERSxEQUVCLEM5QzIsQjFERCxEQUVDLEI2QjgsRDRCQSxCM0ZELERBRUQsRDRDOSxDRkQ1LEM1RTMsREFFRSxEQUVGLERBRjAsQzFFQSxDQ0Q1LENGREQsRDNFNyxDMkExLERBRjEsQ0JFNSxEQUYyLENCRTYsRDJGRSxCOEY0LERBRjMsQjBBRixDRkI2LEQ1Q0YsQ0JFRCxEQUY0LEUzQzQsQzFBNSxGNkJGLEY2QzAsRjZDMSxDNEQxLEM4QjgsRDFFMyxEMERCLEQxQzUsQkNBRixCOUNELEVGRjQsQjRDNixEM0JBLEY2QzIsQjNGQixGNkMzLEI1RjEsRjZDNSxEM0VBLEY2QTcsRDFBOSxGNkE5LEY2QTgsQzFFMyxDMEQ3LEIxQTIsQ0VFRCxEMEU4LEY2QUIsQ0ZGNixGNkFBLEQ1RjAsRjZBQyxDM0I5LEJCRjQsRjZBRSxGNkFELEM0REUsQzFEOCxDQkFBLENGQkMsRjZBRixGNkIwLEY2QjEsQzJCNixCMEQ0LEM1RjksRjZCMixDN0UwLEY2QTYsQkVCOCxCRUIyLEI1RTUsQjdDNyxCRkJGLEMzRDIsQzNFNixEOENDLEI4RUYsQkRGOSxEMUE1LEIwRDAsRjdCMCxGN0IxLEQwQUMsQjBCMCxGN0IyLEY3QjMsRjdCNCxDN0NBLEJFQ0YsRjdCNyxGN0I2LEIxREUsRjdCNSxGN0I4LEY3QjksQ0VBNCxDOENELEJBQUIsRThCOCxFOEI5LEU4QkEsQkVDMixEMkY0LEQ0Q0YsQzlEOCxEMkIzLEI2QTUsQzdFQSxGMUZDLENGRUUsQ0JCMyxEMEVCLEU3RUYsQ0RFNyxCOUNCLEI2RDksRjFGRCxCMEU0LENCQ0MsRjFGRSxENEE0LEMyQUQsQzFFQyxDNkM0LEJFQjEsRjJBMSxCQ0Q1LEYyQTIsRjJBMyxGMkE0LEQyQzMsQzZCNSxDREM3LEYyQTUsRDNCMSxCRkM1LENDRTIsRjJBNixGMkE3LEQxRDUsQjZFRSxGMkE4LEYyQTksQjVERixGMkFBLEYyQUIsQjJGQyxGMkFDLEYyQUQsQzhBNyxCN0U3LEVDQTksRUNBQSxFQ0FCLEVDQUMsQzZBRSxFQ0FELEVDQUUsQjdDOSxDQUIzLEUyQjgsRjdDRixGN0QwLEIyQ0QsRjdEMSxGN0QzLEY3RDIsRTJCQixCQ0EyLEUyQkMsRTJCRCxFMkJFLEUyQkYsRTJDMCxFMkMxLEI3QjksRDJGQixCREE0LENBQ0UsQjFBNSxDQkM3LEUyQzIsQjZGQyxDOEM0LEUyQzMsQkRDOCxCMUZELEUyQzQsQjZGNixFMkM1LEM0RDksRTJDNixDRkRBLEI5REQsRTJDNyxDMEExLEUyQzgsQjJGNixFMkM5LEMxRjMsRTJDQSxFMkNCLEMyRjgsRTJDQyxFMkNELEUyQ0UsQ0FENyxEOEI4LEQ5RTUsQ0ZFMyxGMEE1LERDQjAsQzJFRCxENEE2LENERDQsRDFCMSxCM0RCLEM3RkQsQjJCNSxDMkJGLEU2RTAsQ0FCQixFNkUxLEU2RTIsQkVENCxFNkUzLEQ3QTQsQ0RENSxFNkU1LEJDREQsRTZFNCxFNkU2LEU2RTcsQzJFRSxCREJFLEU2RTgsQzJFNixCQUE3LEU2RTksRTZFQSxCM0QyLEQxRTksQkZBNSxFNkVCLEM2RUYsRTZFQyxFNkVELEU2RUUsQzZBRCxFNkVGLEM5QTcsRTZGMCxFNkYxLEU2RjIsRTVCOSxFNkYzLEU2RjQsQzJFMixFNkY1LEU2RjYsRDZFOCxFNkY3LEU2RjgsQjlDNyxGN0JCLEY3QkEsRjdCRSxGN0JDLEJBQTEsRjdCRixGN0MwLEY3QzIsRjdDMSxGN0M0LEY3QzMsRjdDNSxGN0M2LEY3QzcsQ0JFOCxCOERGLEY3RDQsRjdENSxGN0Q2LEY3RDgsRjdEQSxGN0Q3LEY3REIsRjdEOSxEN0Q3LEY3REMsRjdERCxGN0RFLEY3REYsRjdFMCxEQkNCLEQ4QUEsRTVGNyxCOUVELEJGRkQsQkJFQSxGN0M5LEM2QzcsRjdDOCxGN0NBLEY3Q0MsRjdDQixGN0NELENFQkEsRjdDRSxDNEE3LEQzRTMsRjZDRixDMkIzLEY2RDAsRjZEMSxGNkQyLEY2RDMsRjZENCxGNkQ2LEIxQUIsRjZENyxGNkQ4LEY2RDksRjZEQSxGNkRCLEY2REMsRjZERCxGNkRFLENGQ0EsRjZERixGNkUwLEY2RTEsRjZFMixGNkUzLEY2RTQsQzBGMCxGNkU1LEY2RTYsRjZFNyxGNkU4LEY2RTksRjZFQSxGNkVCLEY2RUMsRjZFRCxGNkVFLEY2RUYsRjZGMCxGNkYxLEY2RjIsRjZGMyxGNkY0LEJFQTgsRjZGNSxGNkY2LEY2RjcsRjZGOCxDOEZBLEY2RjksRjZGQSxGNkZCLEY2RkMsRjZGRCxGNkZFLEY3QTEsRjdBMixGN0EzLEY3QTQsRjdBNSxGN0E2LEY3QTcsRjdBOCxCMUVFLEY3QTksRjdBQSxGN0FCLEY3QUMsRjdBRCxDMURCLEY3QUUsRjdBRixDNEYxLEYwQUYsQkNBNixGMEIwLEMzRjksQzVCOCxEMUJCLEYwQjEsRjBCMixGMEIzLEYwQjQsRjBCNSxEMUJDLEQxRUMsRjBCNyxGMEI2LEQ0QTcsQ0REMixGMEI4LEYwQkEsRjBCOSxGMEJCLEYwQkMsQjhFQixGMEJELEJBRTgsRjBCRSxGMEJGLEJFRTksRjBDMCxCNkVDLEYwQzEsRjBDMixGMEMzLEYwQzQsQzhCNSxGMEM1LEYwQzYsRjBDNyxDNUY0LEYwQzgsRjBDOSxGMENBLEY3QkQsRjBDQixGMENDLEYwQ0QsRjBDRSxGMENGLEJBRDcsRjBEMCxGMEQxLEYwRDIsRjBEMyxGMEQ0LEYwRDUsRjBENixGMEQ4LEQzQTUsRjBENyxGMEQ5LEY1QkEsQzJCOSxGN0U0LEY3RTUsRjdFNixGN0U3LEY3RTgsQzJCNCxGN0VBLEY3RUIsQzJGMyxGNEYwLEY0RUYsQzJFOSxGN0UxLEY3RTIsQkJDNixEOUU0LENBRjIsQzBFOCxGMEE0LEJBREEsQzdBRCxDNEFDLEY3RUMsRjdFRCxGN0VFLEY3RjAsRjdFRixGN0YxLEY3RjQsRjdGMyxGN0YyLEY3RjUsRjdGNixFREU5LEVERUEsRURFQixGNkJDLEY2QkQsRjZCRSxCNkE2LEQ4QkUsQjlDNCxEOEJCLERDQjEsQ0FGMyxGN0Y3LEY3RjgsRjdGOSxGN0ZCLEY3RkEsQjFDNyxGN0ZDLEY3RkQsRjdGRSxDNkVCLEVDQjQsQjNERCxGNkIzLEY2QjQsQzFFNCxGNkI1LEY2QjYsRjZCNyxGNkI4LEY2QjksRjZCQSxDOEEzLEY2QkIsQzFGQSxCOUE4LEVERTgsQjlFQSxEOURGLEEzQTEsQTNBMixBM0EzLEExRTcsQTNBNSxBM0E2LEEzQTcsQTNBOCxBM0E5LEEzQUEsQTNBQixBM0FDLEEzQUQsQTNBRSxBM0FGLEEzQjAsQTNCMSxBM0IyLEEzQjMsQTNCNCxBM0I1LEEzQjYsQTNCNyxBM0I4LEEzQjksQTNCQSxBM0JCLEEzQkMsQTNCRCxBM0JFLEEzQkYsQTNDMCxBM0MxLEEzQzIsQTNDMyxBM0M0LEEzQzUsQTNDNixBM0M3LEEzQzgsQTNDOSxBM0NBLEEzQ0IsQTNDQyxBM0NELEEzQ0UsQTNDRixBM0QwLEEzRDEsQTNEMixBM0QzLEEzRDQsQTNENSxBM0Q2LEEzRDcsQTNEOCxBM0Q5LEEzREEsQTNEQixBM0RDLEEzREQsQTNERSxBM0RGLEEzRTAsQTNFMSxBM0UyLEEzRTMsQTNFNCxBM0U1LEEzRTYsQTNFNyxBM0U4LEEzRTksQTNFQSxBM0VCLEEzRUMsQTNFRCxBM0VFLEEzRUYsQTNGMCxBM0YxLEEzRjIsQTNGMyxBM0Y0LEEzRjUsQTNGNixBM0Y3LEEzRjgsQTNGOSxBM0ZBLEEzRkIsQTNGQyxBM0ZELEExQUIsQTFFOSxBMUVBLEEzRkUsQTNBNCc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBVbmljb2RlQ2hyKCkgewogICAgICAgICAgICByZXR1cm4gJzAwQTQsMDBBNywwMEE4LDAwQjAsMDBCMSwwMEI3LDAwRDcsMDBFMCwwMEUxLDAwRTgsMDBFOSwwMEVBLDAwRUMsMDBFRCwwMEYyLDAwRjMsMDBGNywwMEY5LDAwRkEsMDBGQywwMTAxLDAxMTMsMDExQiwwMTJCLDAxNEQsMDE2QiwwMUNFLDAxRDAsMDFEMiwwMUQ0LDAxRDYsMDFEOCwwMURBLDAxREMsMDJDNywwMkM5LDAzOTEsMDM5MiwwMzkzLDAzOTQsMDM5NSwwMzk2LDAzOTcsMDM5OCwwMzk5LDAzOUEsMDM5QiwwMzlDLDAzOUQsMDM5RSwwMzlGLDAzQTAsMDNBMSwwM0EzLDAzQTQsMDNBNSwwM0E2LDAzQTcsMDNBOCwwM0E5LDAzQjEsMDNCMiwwM0IzLDAzQjQsMDNCNSwwM0I2LDAzQjcsMDNCOCwwM0I5LDAzQkEsMDNCQiwwM0JDLDAzQkQsMDNCRSwwM0JGLDAzQzAsMDNDMSwwM0MzLDAzQzQsMDNDNSwwM0M2LDAzQzcsMDNDOCwwM0M5LDA0MDEsMDQxMCwwNDExLDA0MTIsMDQxMywwNDE0LDA0MTUsMDQxNiwwNDE3LDA0MTgsMDQxOSwwNDFBLDA0MUIsMDQxQywwNDFELDA0MUUsMDQxRiwwNDIwLDA0MjEsMDQyMiwwNDIzLDA0MjQsMDQyNSwwNDI2LDA0MjcsMDQyOCwwNDI5LDA0MkEsMDQyQiwwNDJDLDA0MkQsMDQyRSwwNDJGLDA0MzAsMDQzMSwwNDMyLDA0MzMsMDQzNCwwNDM1LDA0MzYsMDQzNywwNDM4LDA0MzksMDQzQSwwNDNCLDA0M0MsMDQzRCwwNDNFLDA0M0YsMDQ0MCwwNDQxLDA0NDIsMDQ0MywwNDQ0LDA0NDUsMDQ0NiwwNDQ3LDA0NDgsMDQ0OSwwNDRBLDA0NEIsMDQ0QywwNDRELDA0NEUsMDQ0RiwwNDUxLDIwMTQsMjAxNiwyMDE4LDIwMTksMjAxQywyMDFELDIwMjYsMjAzMCwyMDMyLDIwMzMsMjAzQiwyMTAzLDIxMTYsMjE2MCwyMTYxLDIxNjIsMjE2MywyMTY0LDIxNjUsMjE2NiwyMTY3LDIxNjgsMjE2OSwyMTZBLDIxNkIsMjE5MCwyMTkxLDIxOTIsMjE5MywyMjA4LDIyMEYsMjIxMSwyMjFBLDIyMUQsMjIxRSwyMjIwLDIyMjUsMjIyNywyMjI4LDIyMjksMjIyQSwyMjJCLDIyMkUsMjIzNCwyMjM1LDIyMzYsMjIzNywyMjNELDIyNDgsMjI0QywyMjYwLDIyNjEsMjI2NCwyMjY1LDIyNkUsMjI2RiwyMjk5LDIyQTUsMjMxMiwyNDYwLDI0NjEsMjQ2MiwyNDYzLDI0NjQsMjQ2NSwyNDY2LDI0NjcsMjQ2OCwyNDY5LDI0NzQsMjQ3NSwyNDc2LDI0NzcsMjQ3OCwyNDc5LDI0N0EsMjQ3QiwyNDdDLDI0N0QsMjQ3RSwyNDdGLDI0ODAsMjQ4MSwyNDgyLDI0ODMsMjQ4NCwyNDg1LDI0ODYsMjQ4NywyNDg4LDI0ODksMjQ4QSwyNDhCLDI0OEMsMjQ4RCwyNDhFLDI0OEYsMjQ5MCwyNDkxLDI0OTIsMjQ5MywyNDk0LDI0OTUsMjQ5NiwyNDk3LDI0OTgsMjQ5OSwyNDlBLDI0OUIsMjUwMCwyNTAxLDI1MDIsMjUwMywyNTA0LDI1MDUsMjUwNiwyNTA3LDI1MDgsMjUwOSwyNTBBLDI1MEIsMjUwQywyNTBELDI1MEUsMjUwRiwyNTEwLDI1MTEsMjUxMiwyNTEzLDI1MTQsMjUxNSwyNTE2LDI1MTcsMjUxOCwyNTE5LDI1MUEsMjUxQiwyNTFDLDI1MUQsMjUxRSwyNTFGLDI1MjAsMjUyMSwyNTIyLDI1MjMsMjUyNCwyNTI1LDI1MjYsMjUyNywyNTI4LDI1MjksMjUyQSwyNTJCLDI1MkMsMjUyRCwyNTJFLDI1MkYsMjUzMCwyNTMxLDI1MzIsMjUzMywyNTM0LDI1MzUsMjUzNiwyNTM3LDI1MzgsMjUzOSwyNTNBLDI1M0IsMjUzQywyNTNELDI1M0UsMjUzRiwyNTQwLDI1NDEsMjU0MiwyNTQzLDI1NDQsMjU0NSwyNTQ2LDI1NDcsMjU0OCwyNTQ5LDI1NEEsMjU0QiwyNUEwLDI1QTEsMjVCMiwyNUIzLDI1QzYsMjVDNywyNUNCLDI1Q0UsMjVDRiwyNjA1LDI2MDYsMjY0MCwyNjQyLDMwMDAsMzAwMSwzMDAyLDMwMDMsMzAwNSwzMDA4LDMwMDksMzAwQSwzMDBCLDMwMEMsMzAwRCwzMDBFLDMwMEYsMzAxMCwzMDExLDMwMTMsMzAxNCwzMDE1LDMwMTYsMzAxNywzMDQxLDMwNDIsMzA0MywzMDQ0LDMwNDUsMzA0NiwzMDQ3LDMwNDgsMzA0OSwzMDRBLDMwNEIsMzA0QywzMDRELDMwNEUsMzA0RiwzMDUwLDMwNTEsMzA1MiwzMDUzLDMwNTQsMzA1NSwzMDU2LDMwNTcsMzA1OCwzMDU5LDMwNUEsMzA1QiwzMDVDLDMwNUQsMzA1RSwzMDVGLDMwNjAsMzA2MSwzMDYyLDMwNjMsMzA2NCwzMDY1LDMwNjYsMzA2NywzMDY4LDMwNjksMzA2QSwzMDZCLDMwNkMsMzA2RCwzMDZFLDMwNkYsMzA3MCwzMDcxLDMwNzIsMzA3MywzMDc0LDMwNzUsMzA3NiwzMDc3LDMwNzgsMzA3OSwzMDdBLDMwN0IsMzA3QywzMDdELDMwN0UsMzA3RiwzMDgwLDMwODEsMzA4MiwzMDgzLDMwODQsMzA4NSwzMDg2LDMwODcsMzA4OCwzMDg5LDMwOEEsMzA4QiwzMDhDLDMwOEQsMzA4RSwzMDhGLDMwOTAsMzA5MSwzMDkyLDMwOTMsMzBBMSwzMEEyLDMwQTMsMzBBNCwzMEE1LDMwQTYsMzBBNywzMEE4LDMwQTksMzBBQSwzMEFCLDMwQUMsMzBBRCwzMEFFLDMwQUYsMzBCMCwzMEIxLDMwQjIsMzBCMywzMEI0LDMwQjUsMzBCNiwzMEI3LDMwQjgsMzBCOSwzMEJBLDMwQkIsMzBCQywzMEJELDMwQkUsMzBCRiwzMEMwLDMwQzEsMzBDMiwzMEMzLDMwQzQsMzBDNSwzMEM2LDMwQzcsMzBDOCwzMEM5LDMwQ0EsMzBDQiwzMENDLDMwQ0QsMzBDRSwzMENGLDMwRDAsMzBEMSwzMEQyLDMwRDMsMzBENCwzMEQ1LDMwRDYsMzBENywzMEQ4LDMwRDksMzBEQSwzMERCLDMwREMsMzBERCwzMERFLDMwREYsMzBFMCwzMEUxLDMwRTIsMzBFMywzMEU0LDMwRTUsMzBFNiwzMEU3LDMwRTgsMzBFOSwzMEVBLDMwRUIsMzBFQywzMEVELDMwRUUsMzBFRiwzMEYwLDMwRjEsMzBGMiwzMEYzLDMwRjQsMzBGNSwzMEY2LDMxMDUsMzEwNiwzMTA3LDMxMDgsMzEwOSwzMTBBLDMxMEIsMzEwQywzMTBELDMxMEUsMzEwRiwzMTEwLDMxMTEsMzExMiwzMTEzLDMxMTQsMzExNSwzMTE2LDMxMTcsMzExOCwzMTE5LDMxMUEsMzExQiwzMTFDLDMxMUQsMzExRSwzMTFGLDMxMjAsMzEyMSwzMTIyLDMxMjMsMzEyNCwzMTI1LDMxMjYsMzEyNywzMTI4LDMxMjksMzIyMCwzMjIxLDMyMjIsMzIyMywzMjI0LDMyMjUsMzIyNiwzMjI3LDMyMjgsMzIyOSw0RTAwLDRFMDEsNEUwMyw0RTA3LDRFMDgsNEUwOSw0RTBBLDRFMEIsNEUwQyw0RTBELDRFMEUsNEUxMCw0RTExLDRFMTMsNEUxNCw0RTE1LDRFMTYsNEUxOCw0RTE5LDRFMUEsNEUxQiw0RTFDLDRFMUQsNEUxRSw0RTIyLDRFMjQsNEUyNSw0RTI3LDRFMjgsNEUyQSw0RTJCLDRFMkMsNEUyRCw0RTMwLDRFMzIsNEUzNCw0RTM2LDRFMzgsNEUzOSw0RTNBLDRFM0IsNEUzRCw0RTNFLDRFM0YsNEU0Myw0RTQ1LDRFNDcsNEU0OCw0RTQ5LDRFNEIsNEU0Qyw0RTRELDRFNEUsNEU0Riw0RTUwLDRFNTIsNEU1Myw0RTU0LDRFNTYsNEU1OCw0RTU5LDRFNUMsNEU1RCw0RTVFLDRFNUYsNEU2MCw0RTYxLDRFNjYsNEU2OSw0RTcwLDRFNzEsNEU3Myw0RTdFLDRFODYsNEU4OCw0RTg5LDRFOEIsNEU4Qyw0RThELDRFOEUsNEU4Riw0RTkxLDRFOTIsNEU5Myw0RTk0LDRFOTUsNEU5OCw0RTlBLDRFOUIsNEU5Riw0RUEwLDRFQTEsNEVBMiw0RUE0LDRFQTUsNEVBNiw0RUE3LDRFQTgsNEVBOSw0RUFCLDRFQUMsNEVBRCw0RUFFLDRFQjIsNEVCMyw0RUI1LDRFQkEsNEVCQiw0RUJGLDRFQzAsNEVDMSw0RUMyLDRFQzMsNEVDNCw0RUM1LDRFQzYsNEVDNyw0RUM5LDRFQ0EsNEVDQiw0RUNELDRFQ0UsNEVEMSw0RUQzLDRFRDQsNEVENSw0RUQ2LDRFRDcsNEVEOCw0RUQ5LDRFREQsNEVERSw0RURGLDRFRTEsNEVFMyw0RUU0LDRFRTUsNEVFOCw0RUVBLDRFRUIsNEVFQyw0RUYwLDRFRjIsNEVGMyw0RUY1LDRFRjYsNEVGNyw0RUZCLDRFRkQsNEVGRiw0RjAxLDRGMDksNEYwQSw0RjBELDRGMEUsNEYwRiw0RjEwLDRGMTEsNEYxNyw0RjE4LDRGMTksNEYxQSw0RjFCLDRGMUUsNEYxRiw0RjIwLDRGMjIsNEYyNCw0RjI1LDRGMjYsNEYyNyw0RjJBLDRGMkIsNEYyRiw0RjMwLDRGMzIsNEYzNCw0RjM2LDRGMzgsNEYzQSw0RjNDLDRGM0QsNEY0Myw0RjQ2LDRGNEQsNEY0RSw0RjRGLDRGNTAsNEY1MSw0RjUzLDRGNTUsNEY1Nyw0RjU4LDRGNTksNEY1QSw0RjVCLDRGNUMsNEY1RCw0RjVFLDRGNUYsNEY2MCw0RjYzLDRGNjQsNEY2NSw0RjY3LDRGNjksNEY2Qyw0RjZGLDRGNzAsNEY3Myw0Rjc0LDRGNzYsNEY3Qiw0RjdDLDRGN0UsNEY3Riw0RjgzLDRGODQsNEY4OCw0Rjg5LDRGOEIsNEY4RCw0RjhGLDRGOTEsNEY5NCw0Rjk3LDRGOUIsNEY5RCw0RkEwLDRGQTMsNEZBNSw0RkE2LDRGQTcsNEZBOCw0RkE5LDRGQUEsNEZBQyw0RkFFLDRGQUYsNEZCNSw0RkJGLDRGQzMsNEZDNCw0RkM1LDRGQ0EsNEZDRSw0RkNGLDRGRDAsNEZEMSw0RkQ3LDRGRDgsNEZEQSw0RkRDLDRGREQsNEZERSw0RkRGLDRGRTEsNEZFMyw0RkU2LDRGRTgsNEZFOSw0RkVBLDRGRUQsNEZFRSw0RkVGLDRGRjEsNEZGMyw0RkY4LDRGRkEsNEZGRSw1MDBDLDUwMEQsNTAwRiw1MDEyLDUwMTQsNTAxOCw1MDE5LDUwMUEsNTAxQyw1MDFGLDUwMjEsNTAyNSw1MDI2LDUwMjgsNTAyOSw1MDJBLDUwMkMsNTAyRCw1MDJFLDUwM0EsNTAzQyw1MDNFLDUwNDMsNTA0Nyw1MDQ4LDUwNEMsNTA0RSw1MDRGLDUwNTUsNTA1QSw1MDVDLDUwNjUsNTA2Qyw1MDc2LDUwNzcsNTA3Qiw1MDdFLDUwN0YsNTA4MCw1MDg1LDUwODgsNTA4RCw1MEEzLDUwQTUsNTBBNyw1MEE4LDUwQTksNTBBQyw1MEIyLDUwQkEsNTBCQiw1MENGLDUwRDYsNTBEQSw1MEU2LDUwRTcsNTBFQyw1MEVELDUwRUUsNTBGMyw1MEY1LDUwRkIsNTEwNiw1MTA3LDUxMEIsNTExMiw1MTIxLDUxM0YsNTE0MCw1MTQxLDUxNDMsNTE0NCw1MTQ1LDUxNDYsNTE0OCw1MTQ5LDUxNEIsNTE0RCw1MTUxLDUxNTQsNTE1NSw1MTU2LDUxNUEsNTE1Qyw1MTYyLDUxNjUsNTE2OCw1MTZCLDUxNkMsNTE2RCw1MTZFLDUxNzAsNTE3MSw1MTczLDUxNzQsNTE3NSw1MTc2LDUxNzcsNTE3OCw1MTc5LDUxN0IsNTE3Qyw1MTdELDUxODAsNTE4MSw1MTgyLDUxODUsNTE4OCw1MTg5LDUxOEMsNTE4RCw1MTkyLDUxOTUsNTE5Niw1MTk3LDUxOTksNTE5Qiw1MTlDLDUxQTAsNTFBMiw1MUE0LDUxQTUsNTFBQiw1MUFDLDUxQUYsNTFCMCw1MUIxLDUxQjIsNTFCMyw1MUI1LDUxQjYsNTFCNyw1MUJCLDUxQkMsNTFCRCw1MUMwLDUxQzQsNTFDNiw1MUM3LDUxQzksNTFDQiw1MUNDLDUxQ0YsNTFEMSw1MURCLDUxREQsNTFFMCw1MUUxLDUxRTQsNTFFQiw1MUVELDUxRUYsNTFGMCw1MUYzLDUxRjUsNTFGNiw1MUY4LDUxRjksNTFGQSw1MUZCLDUxRkMsNTFGRCw1MUZGLDUyMDAsNTIwMSw1MjAyLDUyMDMsNTIwNiw1MjA3LDUyMDgsNTIwQSw1MjBELDUyMEUsNTIxMSw1MjEyLDUyMTYsNTIxNyw1MjE4LDUyMTksNTIxQSw1MjFCLDUyMUQsNTIyMCw1MjI0LDUyMjgsNTIyOSw1MjJCLDUyMkQsNTIyRSw1MjMwLDUyMzMsNTIzNiw1MjM3LDUyMzgsNTIzOSw1MjNBLDUyM0IsNTIzRCw1MjNGLDUyNDAsNTI0MSw1MjQyLDUyNDMsNTI0QSw1MjRDLDUyNEQsNTI1MCw1MjUxLDUyNTQsNTI1Niw1MjVDLDUyNUUsNTI2MSw1MjY1LDUyNjcsNTI2OSw1MjZBLDUyNkYsNTI3Miw1MjdELDUyN0YsNTI4MSw1MjgyLDUyODgsNTI5MCw1MjkzLDUyOUIsNTI5RCw1MjlFLDUyOUYsNTJBMCw1MkExLDUyQTIsNTJBMyw1MkE4LDUyQTksNTJBQSw1MkFCLDUyQUMsNTJBRCw1MkIxLDUyQjIsNTJCMyw1MkJFLDUyQkYsNTJDMyw1MkM3LDUyQzksNTJDQiw1MkQwLDUyRDIsNTJENiw1MkQ4LDUyREYsNTJFNCw1MkYwLDUyRjksNTJGQSw1MkZFLDUyRkYsNTMwMCw1MzA1LDUzMDYsNTMwOCw1MzBELDUzMEYsNTMxMCw1MzE1LDUzMTYsNTMxNyw1MzE5LDUzMUEsNTMxRCw1MzIwLDUzMjEsNTMyMyw1MzI2LDUzMkEsNTMyRSw1MzM5LDUzM0EsNTMzQiw1MzNFLDUzM0YsNTM0MSw1MzQzLDUzNDUsNTM0Nyw1MzQ4LDUzNDksNTM0QSw1MzRFLDUzNEYsNTM1MSw1MzUyLDUzNTMsNTM1NSw1MzU2LDUzNTcsNTM1QSw1MzVDLDUzNUUsNTM1Riw1MzYwLDUzNjEsNTM2Miw1MzYzLDUzNjQsNTM2Niw1MzY3LDUzNjksNTM2Qiw1MzZFLDUzNkYsNTM3MCw1MzcxLDUzNzMsNTM3NCw1Mzc1LDUzNzcsNTM3OCw1MzdBLDUzN0YsNTM4Miw1Mzg0LDUzODUsNTM4Niw1Mzg5LDUzOEIsNTM4Qyw1MzhELDUzOTUsNTM5OCw1MzlBLDUzOUQsNTM5Riw1M0EyLDUzQTMsNTNBNSw1M0E2LDUzQTgsNTNBOSw1M0FFLDUzQjYsNTNCQiw1M0JGLDUzQzEsNTNDMiw1M0M4LDUzQzksNTNDQSw1M0NCLDUzQ0MsNTNDRCw1M0QxLDUzRDQsNTNENiw1M0Q3LDUzRDgsNTNEOSw1M0RCLDUzREYsNTNFMCw1M0UzLDUzRTQsNTNFNSw1M0U2LDUzRTgsNTNFOSw1M0VBLDUzRUIsNTNFQyw1M0VELDUzRUUsNTNFRiw1M0YwLDUzRjEsNTNGMiw1M0YzLDUzRjUsNTNGNiw1M0Y3LDUzRjgsNTNGOSw1M0ZCLDUzRkMsNTNGRCw1NDAxLDU0MDMsNTQwNCw1NDA2LDU0MDgsNTQwOSw1NDBBLDU0MEMsNTQwRCw1NDBFLDU0MEYsNTQxMCw1NDExLDU0MTIsNTQxMyw1NDE1LDU0MTYsNTQxNyw1NDFCLDU0MUQsNTQxRSw1NDFGLDU0MjAsNTQyMSw1NDIzLDU0MjYsNTQyNyw1NDI4LDU0MjksNTQyQiw1NDJDLDU0MkQsNTQyRSw1NDJGLDU0MzEsNTQzMiw1NDM0LDU0MzUsNTQzOCw1NDM5LDU0M0IsNTQzQyw1NDNFLDU0NDAsNTQ0Myw1NDQ2LDU0NDgsNTQ0QSw1NDRCLDU0NTAsNTQ1Miw1NDUzLDU0NTQsNTQ1NSw1NDU2LDU0NTcsNTQ1OCw1NDU5LDU0NUIsNTQ1Qyw1NDYyLDU0NjQsNTQ2Niw1NDY4LDU0NzEsNTQ3Miw1NDczLDU0NzUsNTQ3Niw1NDc3LDU0NzgsNTQ3Qiw1NDdDLDU0N0QsNTQ4MCw1NDgyLDU0ODQsNTQ4Niw1NDhCLDU0OEMsNTQ4RSw1NDhGLDU0OTAsNTQ5Miw1NDk0LDU0OTUsNTQ5Niw1NDk5LDU0OUEsNTQ5Qiw1NDlELDU0QTMsNTRBNCw1NEE2LDU0QTcsNTRBOCw1NEE5LDU0QUEsNTRBQiw1NEFDLDU0QUQsNTRBRiw1NEIxLDU0QjMsNTRCNCw1NEI4LDU0QkIsNTRCRCw1NEJGLDU0QzAsNTRDMSw1NEMyLDU0QzQsNTRDNiw1NEM3LDU0QzgsNTRDOSw1NENDLDU0Q0QsNTRDRSw1NENGLDU0RDAsNTREMSw1NEQyLDU0RDMsNTRENCw1NEQ1LDU0RDcsNTREOSw1NERBLDU0REMsNTRERCw1NERFLDU0REYsNTRFNSw1NEU2LDU0RTcsNTRFOCw1NEU5LDU0RUEsNTRFRCw1NEVFLDU0RjIsNTRGMyw1NEZBLDU0RkMsNTRGRCw1NEZGLDU1MDEsNTUwNiw1NTA3LDU1MDksNTUwRiw1NTEwLDU1MTEsNTUxNCw1NTFCLDU1MjAsNTUyMiw1NTIzLDU1MjQsNTUyNyw1NTJBLDU1MkMsNTUyRSw1NTJGLDU1MzAsNTUzMSw1NTMzLDU1MzcsNTUzQyw1NTNFLDU1M0YsNTU0MSw1NTQzLDU1NDQsNTU0Niw1NTQ5LDU1NEEsNTU1MCw1NTU1LDU1NTYsNTU1Qyw1NTYxLDU1NjQsNTU2NSw1NTY2LDU1NjcsNTU2QSw1NTZDLDU1NkQsNTU2RSw1NTc1LDU1NzYsNTU3Nyw1NTc4LDU1N0IsNTU3Qyw1NTdFLDU1ODAsNTU4MSw1NTgyLDU1ODMsNTU4NCw1NTg3LDU1ODgsNTU4OSw1NThBLDU1OEIsNTU4Riw1NTkxLDU1OTQsNTU5OCw1NTk5LDU1OUMsNTU5RCw1NTlGLDU1QTcsNTVCMSw1NUIzLDU1QjUsNTVCNyw1NUI5LDU1QkIsNTVCRCw1NUJFLDU1QzQsNTVDNSw1NUM5LDU1Q0MsNTVDRCw1NUQxLDU1RDIsNTVEMyw1NUQ0LDU1RDYsNTVEQyw1NURELDU1REYsNTVFMSw1NUUzLDU1RTQsNTVFNSw1NUU2LDU1RTgsNTVFQSw1NUVCLDU1RUMsNTVFRiw1NUYyLDU1RjMsNTVGNSw1NUY3LDU1RkQsNTVGRSw1NjAwLDU2MDEsNTYwOCw1NjA5LDU2MEMsNTYwRSw1NjBGLDU2MTgsNTYxQiw1NjFFLDU2MUYsNTYyMyw1NjI0LDU2MjcsNTYyQyw1NjJELDU2MzEsNTYzMiw1NjM0LDU2MzYsNTYzOSw1NjNCLDU2M0YsNTY0Qyw1NjRELDU2NEUsNTY1NCw1NjU3LDU2NTgsNTY1OSw1NjVDLDU2NjIsNTY2NCw1NjY4LDU2NjksNTY2QSw1NjZCLDU2NkMsNTY3MSw1Njc2LDU2N0IsNTY3Qyw1Njg1LDU2ODYsNTY4RSw1NjhGLDU2OTMsNTZBMyw1NkFGLDU2QjcsNTZCQyw1NkNBLDU2RDQsNTZENyw1NkRBLDU2REIsNTZERCw1NkRFLDU2REYsNTZFMCw1NkUxLDU2RTIsNTZFNCw1NkVCLDU2RUQsNTZGMCw1NkYxLDU2RjQsNTZGNSw1NkY5LDU2RkEsNTZGRCw1NkZFLDU2RkYsNTcwMyw1NzA0LDU3MDYsNTcwOCw1NzA5LDU3MEEsNTcxQyw1NzFGLDU3MjMsNTcyOCw1NzI5LDU3MkEsNTcyQyw1NzJELDU3MkUsNTcyRiw1NzMwLDU3MzMsNTczOSw1NzNBLDU3M0IsNTczRSw1NzQwLDU3NDIsNTc0Nyw1NzRBLDU3NEMsNTc0RCw1NzRFLDU3NEYsNTc1MCw1NzUxLDU3NTcsNTc1QSw1NzVCLDU3NUMsNTc1RCw1NzVFLDU3NUYsNTc2MCw1NzYxLDU3NjQsNTc2Niw1NzY4LDU3NjksNTc2QSw1NzZCLDU3NkQsNTc2Riw1NzczLDU3NzYsNTc3Nyw1NzdCLDU3N0MsNTc4Miw1NzgzLDU3ODQsNTc4NSw1Nzg2LDU3OEIsNTc4Qyw1NzkyLDU3OTMsNTc5Qiw1N0EwLDU3QTEsNTdBMiw1N0EzLDU3QTQsNTdBNiw1N0E3LDU3QTksNTdBQiw1N0FELDU3QUUsNTdCMiw1N0I0LDU3QjgsNTdDMiw1N0MzLDU3Q0IsNTdDRSw1N0NGLDU3RDIsNTdENCw1N0Q1LDU3RDgsNTdEOSw1N0RBLDU3REQsNTdERiw1N0UwLDU3RTQsNTdFRCw1N0VGLDU3RjQsNTdGOCw1N0Y5LDU3RkEsNTdGRCw1ODAwLDU4MDIsNTgwNiw1ODA3LDU4MEIsNTgwRCw1ODExLDU4MTUsNTgxOSw1ODFFLDU4MjAsNTgyMSw1ODI0LDU4MkEsNTgzMCw1ODM1LDU4NDQsNTg0Qyw1ODRELDU4NTEsNTg1NCw1ODU4LDU4NUUsNTg2NSw1ODZCLDU4NkMsNTg3RSw1ODgwLDU4ODEsNTg4Myw1ODg1LDU4ODksNTg5Miw1ODkzLDU4OTksNTg5QSw1ODlFLDU4OUYsNThBOCw1OEE5LDU4QkMsNThDMSw1OEM1LDU4RDEsNThENSw1OEU0LDU4RUIsNThFQyw1OEVFLDU4RjAsNThGMyw1OEY2LDU4RjksNTkwMiw1OTA0LDU5MDcsNTkwRCw1OTBGLDU5MTQsNTkxNSw1OTE2LDU5MTksNTkxQSw1OTFDLDU5MUYsNTkyNCw1OTI1LDU5MjcsNTkyOSw1OTJBLDU5MkIsNTkyRCw1OTJFLDU5MkYsNTkzMSw1OTM0LDU5MzcsNTkzOCw1OTM5LDU5M0EsNTkzQyw1OTQxLDU5NDIsNTk0NCw1OTQ3LDU5NDgsNTk0OSw1OTRCLDU5NEUsNTk0Riw1OTUxLDU5NTQsNTk1NSw1OTU2LDU5NTcsNTk1OCw1OTVBLDU5NjAsNTk2Miw1OTY1LDU5NzMsNTk3NCw1OTc2LDU5NzgsNTk3OSw1OTdELDU5ODEsNTk4Miw1OTgzLDU5ODQsNTk4Niw1OTg3LDU5ODgsNTk4QSw1OThELDU5OTIsNTk5Myw1OTk2LDU5OTcsNTk5OSw1OTlFLDU5QTMsNTlBNCw1OUE1LDU5QTgsNTlBOSw1OUFBLDU5QUIsNTlBRSw1OUFGLDU5QjIsNTlCOSw1OUJCLDU5QkUsNTlDNiw1OUNBLDU5Q0IsNTlEMCw1OUQxLDU5RDIsNTlEMyw1OUQ0LDU5RDcsNTlEOCw1OURBLDU5REMsNTlERCw1OUUzLDU5RTUsNTlFOCw1OUVDLDU5RjksNTlGQiw1OUZGLDVBMDEsNUEwMyw1QTA0LDVBMDUsNUEwNiw1QTA3LDVBMDgsNUEwOSw1QTBDLDVBMTEsNUExMyw1QTE4LDVBMUMsNUExRiw1QTIwLDVBMjMsNUEyNSw1QTI5LDVBMzEsNUEzMiw1QTM0LDVBMzYsNUEzQyw1QTQwLDVBNDYsNUE0OSw1QTRBLDVBNTUsNUE1QSw1QTYyLDVBNjcsNUE2QSw1QTc0LDVBNzUsNUE3Niw1QTc3LDVBN0EsNUE3Riw1QTkyLDVBOUEsNUE5Qiw1QUFBLDVBQjIsNUFCMyw1QUI1LDVBQjgsNUFCRSw1QUMxLDVBQzIsNUFDOSw1QUNDLDVBRDIsNUFENCw1QUQ2LDVBRDgsNUFEQyw1QUUwLDVBRTEsNUFFMyw1QUU2LDVBRTksNUFFQiw1QUYxLDVCMDksNUIxNiw1QjE3LDVCMzIsNUIzNCw1QjM3LDVCNDAsNUI1MCw1QjUxLDVCNTMsNUI1NCw1QjU1LDVCNTcsNUI1OCw1QjU5LDVCNUEsNUI1Qiw1QjVDLDVCNUQsNUI1Riw1QjYyLDVCNjMsNUI2NCw1QjY1LDVCNjYsNUI2OSw1QjZBLDVCNkMsNUI3MCw1QjcxLDVCNzMsNUI3NSw1QjdBLDVCN0QsNUI4MCw1QjgxLDVCODMsNUI4NCw1Qjg1LDVCODcsNUI4OCw1Qjg5LDVCOEIsNUI4Qyw1QjhGLDVCOTMsNUI5NSw1Qjk3LDVCOTgsNUI5OSw1QjlBLDVCOUIsNUI5Qyw1QjlELDVCOUUsNUJBMCw1QkExLDVCQTIsNUJBMyw1QkE0LDVCQTUsNUJBNiw1QkFBLDVCQUIsNUJCMCw1QkIzLDVCQjQsNUJCNSw1QkI2LDVCQjgsNUJCOSw1QkJELDVCQkUsNUJCRiw1QkMyLDVCQzQsNUJDNSw1QkM2LDVCQzcsNUJDQyw1QkQwLDVCRDIsNUJEMyw1QkRELDVCREUsNUJERiw1QkUxLDVCRTQsNUJFNSw1QkU4LDVCRUUsNUJGMCw1QkY4LDVCRjksNUJGQSw1QkZCLDVCRkMsNUJGRiw1QzAxLDVDMDQsNUMwNiw1QzA5LDVDMEEsNUMwRiw1QzExLDVDMTQsNUMxNSw1QzE2LDVDMTgsNUMxQSw1QzFDLDVDMUQsNUMyMiw1QzI0LDVDMjUsNUMyNyw1QzJDLDVDMzEsNUMzNCw1QzM4LDVDMzksNUMzQSw1QzNCLDVDM0MsNUMzRCw1QzNFLDVDM0YsNUM0MCw1QzQxLDVDNDIsNUM0NSw1QzQ4LDVDNDksNUM0QSw1QzRCLDVDNEUsNUM0Riw1QzUwLDVDNTEsNUM1NSw1QzU5LDVDNUUsNUM2MCw1QzYxLDVDNjMsNUM2NSw1QzY2LDVDNkUsNUM2Riw1QzcxLDVDNzksNUM3QSw1QzdGLDVDODEsNUM4Miw1Qzg4LDVDOEMsNUM4RCw1QzkwLDVDOTEsNUM5NCw1Qzk2LDVDOTcsNUM5OCw1Qzk5LDVDOUEsNUM5Qiw1QzlDLDVDQTIsNUNBMyw1Q0E5LDVDQUIsNUNBQyw1Q0FELDVDQjEsNUNCMyw1Q0I1LDVDQjcsNUNCOCw1Q0JELDVDQkYsNUNDMSw1Q0M0LDVDQ0IsNUNEMiw1Q0Q5LDVDRTEsNUNFNCw1Q0U1LDVDRTYsNUNFOCw1Q0VBLDVDRUQsNUNGMCw1Q0ZCLDVEMDIsNUQwMyw1RDA2LDVEMDcsNUQwRSw1RDE0LDVEMTYsNUQxQiw1RDFFLDVEMjQsNUQyNiw1RDI3LDVEMjksNUQyRCw1RDJFLDVEMzQsNUQzRCw1RDNFLDVENDcsNUQ0QSw1RDRCLDVENEMsNUQ1OCw1RDVCLDVENUQsNUQ2OSw1RDZCLDVENkMsNUQ2Riw1RDc0LDVEODIsNUQ5OSw1RDlELDVEQjcsNURDNSw1RENELDVEREIsNURERCw1RERFLDVERTEsNURFMiw1REU1LDVERTYsNURFNyw1REU4LDVERTksNURFQiw1REVFLDVERUYsNURGMSw1REYyLDVERjMsNURGNCw1REY3LDVERkQsNURGRSw1RTAxLDVFMDIsNUUwMyw1RTA1LDVFMDYsNUUwOCw1RTBDLDVFMEYsNUUxMCw1RTExLDVFMTQsNUUxNSw1RTE2LDVFMTgsNUUxOSw1RTFBLDVFMUIsNUUxQyw1RTFELDVFMjYsNUUyNyw1RTJELDVFMkUsNUUzMSw1RTM3LDVFMzgsNUUzQiw1RTNDLDVFM0QsNUU0Miw1RTQ0LDVFNDUsNUU0Qyw1RTU0LDVFNTUsNUU1Qiw1RTVFLDVFNjEsNUU2Miw1RTcyLDVFNzMsNUU3NCw1RTc2LDVFNzgsNUU3QSw1RTdCLDVFN0MsNUU3RCw1RTdGLDVFODAsNUU4NCw1RTg2LDVFODcsNUU4QSw1RThCLDVFOEYsNUU5MCw1RTkxLDVFOTMsNUU5NCw1RTk1LDVFOTYsNUU5Nyw1RTk5LDVFOUEsNUU5Qyw1RTlFLDVFOUYsNUVBMCw1RUE1LDVFQTYsNUVBNyw1RUFELDVFQjMsNUVCNSw1RUI2LDVFQjcsNUVCOCw1RUI5LDVFQkUsNUVDOSw1RUNBLDVFRDEsNUVEMiw1RUQzLDVFRDYsNUVEQiw1RUU4LDVFRUEsNUVGNCw1RUY2LDVFRjcsNUVGQSw1RUZFLDVFRkYsNUYwMCw1RjAxLDVGMDIsNUYwMyw1RjA0LDVGMDgsNUYwQSw1RjBCLDVGMEYsNUYxMSw1RjEzLDVGMTUsNUYxNyw1RjE4LDVGMUIsNUYxRiw1RjIwLDVGMjUsNUYyNiw1RjI3LDVGMjksNUYyQSw1RjJELDVGMkYsNUYzMSw1RjM5LDVGM0EsNUYzQyw1RjQwLDVGNTAsNUY1Miw1RjUzLDVGNTUsNUY1Niw1RjU3LDVGNTgsNUY1RCw1RjYxLDVGNjIsNUY2NCw1RjY2LDVGNjksNUY2QSw1RjZDLDVGNkQsNUY3MCw1RjcxLDVGNzMsNUY3Nyw1Rjc5LDVGN0IsNUY3Qyw1RjgwLDVGODEsNUY4Miw1Rjg0LDVGODUsNUY4Nyw1Rjg4LDVGODksNUY4QSw1RjhCLDVGOEMsNUY5MCw1RjkyLDVGOTUsNUY5Nyw1Rjk4LDVGOTksNUY5Qyw1RkExLDVGQTgsNUZBQSw1RkFELDVGQUUsNUZCNSw1RkI3LDVGQkMsNUZCRCw1RkMzLDVGQzQsNUZDNSw1RkM2LDVGQzksNUZDQyw1RkNELDVGQ0YsNUZEMCw1RkQxLDVGRDIsNUZENiw1RkQ3LDVGRDgsNUZEOSw1RkRELDVGRTAsNUZFMSw1RkU0LDVGRTcsNUZFQSw1RkVCLDVGRUQsNUZFRSw1RkYxLDVGRjUsNUZGOCw1RkZCLDVGRkQsNUZGRSw1RkZGLDYwMDAsNjAwMSw2MDAyLDYwMDMsNjAwNCw2MDA1LDYwMDYsNjAwQSw2MDBELDYwMEUsNjAwRiw2MDEyLDYwMTQsNjAxNSw2MDE2LDYwMTksNjAxQiw2MDFDLDYwMUQsNjAyMCw2MDIxLDYwMjUsNjAyNiw2MDI3LDYwMjgsNjAyOSw2MDJBLDYwMkIsNjAyRiw2MDM1LDYwM0IsNjAzQyw2MDNGLDYwNDEsNjA0Miw2MDQzLDYwNEIsNjA0RCw2MDUwLDYwNTIsNjA1NSw2MDU5LDYwNUEsNjA1RCw2MDYyLDYwNjMsNjA2NCw2MDY3LDYwNjgsNjA2OSw2MDZBLDYwNkIsNjA2Qyw2MDZELDYwNkYsNjA3MCw2MDczLDYwNzYsNjA3OCw2MDc5LDYwN0EsNjA3Qiw2MDdDLDYwN0QsNjA3Riw2MDgzLDYwODQsNjA4OSw2MDhDLDYwOEQsNjA5Miw2MDk0LDYwOTYsNjA5QSw2MDlCLDYwOUQsNjA5Riw2MEEwLDYwQTMsNjBBNiw2MEE4LDYwQUIsNjBBQyw2MEFELDYwQUYsNjBCMSw2MEIyLDYwQjQsNjBCOCw2MEJCLDYwQkMsNjBDNSw2MEM2LDYwQ0EsNjBDQiw2MEQxLDYwRDUsNjBEOCw2MERBLDYwREMsNjBERCw2MERGLDYwRTAsNjBFNiw2MEU3LDYwRTgsNjBFOSw2MEVCLDYwRUMsNjBFRCw2MEVFLDYwRUYsNjBGMCw2MEYzLDYwRjQsNjBGNiw2MEY5LDYwRkEsNjEwMCw2MTAxLDYxMDYsNjEwOCw2MTA5LDYxMEQsNjEwRSw2MTBGLDYxMTUsNjExQSw2MTFGLDYxMjAsNjEyMyw2MTI0LDYxMjYsNjEyNyw2MTJCLDYxM0YsNjE0OCw2MTRBLDYxNEMsNjE0RSw2MTUxLDYxNTUsNjE1RCw2MTYyLDYxNjcsNjE2OCw2MTcwLDYxNzUsNjE3Nyw2MThCLDYxOEUsNjE5NCw2MTlELDYxQTcsNjFBOCw2MUE5LDYxQUMsNjFCNyw2MUJFLDYxQzIsNjFDOCw2MUNBLDYxQ0IsNjFEMSw2MUQyLDYxRDQsNjFFNiw2MUY1LDYxRkYsNjIwNiw2MjA4LDYyMEEsNjIwQiw2MjBDLDYyMEQsNjIwRSw2MjBGLDYyMTAsNjIxMSw2MjEyLDYyMTUsNjIxNiw2MjE3LDYyMTgsNjIxQSw2MjFCLDYyMUYsNjIyMSw2MjIyLDYyMjQsNjIyNSw2MjJBLDYyMkMsNjIyRSw2MjMzLDYyMzQsNjIzNyw2MjNELDYyM0UsNjIzRiw2MjQwLDYyNDEsNjI0Myw2MjQ3LDYyNDgsNjI0OSw2MjRCLDYyNEMsNjI0RCw2MjRFLDYyNTEsNjI1Miw2MjUzLDYyNTQsNjI1OCw2MjVCLDYyNjMsNjI2Niw2MjY3LDYyNjksNjI2QSw2MjZCLDYyNkMsNjI2RCw2MjZFLDYyNkYsNjI3MCw2MjczLDYyNzYsNjI3OSw2MjdDLDYyN0UsNjI3Riw2MjgwLDYyODQsNjI4OSw2MjhBLDYyOTEsNjI5Miw2MjkzLDYyOTUsNjI5Niw2Mjk3LDYyOTgsNjI5QSw2MjlCLDYyOUYsNjJBMCw2MkExLDYyQTIsNjJBNCw2MkE1LDYyQTgsNjJBQiw2MkFDLDYyQjEsNjJCNSw2MkI5LDYyQkIsNjJCQyw2MkJELDYyQkYsNjJDMiw2MkM0LDYyQzUsNjJDNiw2MkM3LDYyQzgsNjJDOSw2MkNBLDYyQ0MsNjJDRCw2MkNFLDYyRDAsNjJEMiw2MkQzLDYyRDQsNjJENiw2MkQ3LDYyRDgsNjJEOSw2MkRBLDYyREIsNjJEQyw2MkRGLDYyRTIsNjJFMyw2MkU1LDYyRTYsNjJFNyw2MkU4LDYyRTksNjJFQyw2MkVELDYyRUUsNjJFRiw2MkYxLDYyRjMsNjJGNCw2MkY2LDYyRjcsNjJGQyw2MkZELDYyRkUsNjJGRiw2MzAxLDYzMDIsNjMwNyw2MzA4LDYzMDksNjMwRSw2MzExLDYzMTYsNjMxQSw2MzFCLDYzMUQsNjMxRSw2MzFGLDYzMjAsNjMyMSw2MzIyLDYzMjMsNjMyNCw2MzI1LDYzMjgsNjMyQSw2MzJCLDYzMkYsNjMzMiw2MzM5LDYzM0EsNjMzRCw2MzQyLDYzNDMsNjM0NSw2MzQ2LDYzNDksNjM0Qiw2MzRDLDYzNEQsNjM0RSw2MzRGLDYzNTAsNjM1NSw2MzVFLDYzNUYsNjM2MSw2MzYyLDYzNjMsNjM2Nyw2MzY5LDYzNkQsNjM2RSw2MzcxLDYzNzYsNjM3Nyw2MzdBLDYzN0IsNjM4MCw2MzgyLDYzODcsNjM4OCw2Mzg5LDYzOEEsNjM4Qyw2MzhFLDYzOEYsNjM5MCw2MzkyLDYzOTYsNjM5OCw2M0EwLDYzQTIsNjNBMyw2M0E1LDYzQTcsNjNBOCw2M0E5LDYzQUEsNjNBQyw2M0FELDYzQUUsNjNCMCw2M0IzLDYzQjQsNjNCNyw2M0I4LDYzQkEsNjNCQyw2M0JFLDYzQzQsNjNDNiw2M0M5LDYzQ0QsNjNDRSw2M0NGLDYzRDAsNjNEMiw2M0Q2LDYzREUsNjNFMCw2M0UxLDYzRTMsNjNFOSw2M0VBLDYzRUQsNjNGMiw2M0Y0LDYzRjYsNjNGOCw2M0ZELDYzRkYsNjQwMCw2NDAxLDY0MDIsNjQwNSw2NDBCLDY0MEMsNjQwRiw2NDEwLDY0MTMsNjQxNCw2NDFCLDY0MUMsNjQxRSw2NDIwLDY0MjEsNjQyNiw2NDJBLDY0MkMsNjQyRCw2NDM0LDY0M0EsNjQzRCw2NDNGLDY0NDEsNjQ0NCw2NDQ1LDY0NDYsNjQ0Nyw2NDQ4LDY0NEEsNjQ1Miw2NDU0LDY0NTgsNjQ1RSw2NDY3LDY0NjksNjQ2RCw2NDc4LDY0NzksNjQ3QSw2NDgyLDY0ODQsNjQ4NSw2NDg3LDY0OTEsNjQ5Miw2NDk1LDY0OTYsNjQ5OSw2NDlFLDY0QTQsNjRBOSw2NEFDLDY0QUQsNjRBRSw2NEIwLDY0QjUsNjRCNyw2NEI4LDY0QkEsNjRCQyw2NEMwLDY0QzIsNjRDNSw2NENELDY0Q0UsNjREMCw2NEQyLDY0RDcsNjREOCw2NERFLDY0RTIsNjRFNCw2NEU2LDY1MDAsNjUwOSw2NTEyLDY1MTgsNjUyNSw2NTJCLDY1MkUsNjUyRiw2NTM0LDY1MzUsNjUzNiw2NTM4LDY1MzksNjUzQiw2NTNFLDY1M0YsNjU0NSw2NTQ4LDY1NDksNjU0Qyw2NTRGLDY1NTEsNjU1NSw2NTU2LDY1NTksNjU1Qiw2NTVELDY1NUUsNjU2Miw2NTYzLDY1NjYsNjU2Qiw2NTZDLDY1NzAsNjU3Miw2NTc0LDY1NzcsNjU4Nyw2NThCLDY1OEMsNjU5MCw2NTkxLDY1OTMsNjU5Nyw2NTk5LDY1OUIsNjU5Qyw2NTlGLDY1QTEsNjVBNCw2NUE1LDY1QTcsNjVBOSw2NUFCLDY1QUQsNjVBRiw2NUIwLDY1QjksNjVCQyw2NUJELDY1QzEsNjVDMyw2NUM0LDY1QzUsNjVDNiw2NUNCLDY1Q0MsNjVDRSw2NUNGLDY1RDIsNjVENiw2NUQ3LDY1RTAsNjVFMiw2NUU1LDY1RTYsNjVFNyw2NUU4LDY1RTksNjVFQyw2NUVELDY1RUUsNjVFRiw2NUYwLDY1RjEsNjVGNiw2NUY3LDY1RkEsNjYwMCw2NjAyLDY2MDMsNjYwNiw2NjBBLDY2MEMsNjYwRSw2NjBGLDY2MTMsNjYxNCw2NjE1LDY2MTksNjYxRCw2NjFGLDY2MjAsNjYyNSw2NjI3LDY2MjgsNjYyRCw2NjJGLDY2MzEsNjYzNCw2NjM1LDY2MzYsNjYzQyw2NjNFLDY2NDEsNjY0Myw2NjRCLDY2NEMsNjY0Riw2NjUyLDY2NTMsNjY1NCw2NjU1LDY2NTYsNjY1Nyw2NjVBLDY2NUYsNjY2MSw2NjY0LDY2NjYsNjY2OCw2NjZFLDY2NkYsNjY3MCw2Njc0LDY2NzYsNjY3Nyw2NjdBLDY2N0UsNjY4Miw2Njg0LDY2ODcsNjY4Qyw2NjkxLDY2OTYsNjY5Nyw2NjlELDY2QTcsNjZBOCw2NkFFLDY2QjQsNjZCOSw2NkJFLDY2RDksNjZEQiw2NkRDLDY2REQsNjZFNiw2NkU5LDY2RjAsNjZGMiw2NkYzLDY2RjQsNjZGNyw2NkY5LDY2RkMsNjZGRSw2NkZGLDY3MDAsNjcwOCw2NzA5LDY3MEEsNjcwQiw2NzBELDY3MTAsNjcxNCw2NzE1LDY3MTcsNjcxQiw2NzFELDY3MUYsNjcyNiw2NzI4LDY3MkEsNjcyQiw2NzJDLDY3MkQsNjcyRiw2NzMxLDY3MzQsNjczNSw2NzNBLDY3M0QsNjc0MCw2NzQyLDY3NDMsNjc0Niw2NzQ4LDY3NDksNjc0Qyw2NzRFLDY3NEYsNjc1MCw2NzUxLDY3NTMsNjc1Niw2NzVDLDY3NUUsNjc1Riw2NzYwLDY3NjEsNjc2NSw2NzY4LDY3NjksNjc2QSw2NzZELDY3NkYsNjc3MCw2NzcyLDY3NzMsNjc3NSw2Nzc3LDY3N0MsNjc3RSw2NzdGLDY3ODEsNjc4NCw2Nzg3LDY3ODksNjc4Qiw2NzkwLDY3OTUsNjc5Nyw2Nzk4LDY3OUEsNjc5Qyw2NzlELDY3OUUsNjdBMiw2N0EzLDY3QTUsNjdBNyw2N0E4LDY3QUEsNjdBQiw2N0FELDY3QUYsNjdCMCw2N0IzLDY3QjUsNjdCNiw2N0I3LDY3QjgsNjdDMSw2N0MzLDY3QzQsNjdDRiw2N0QwLDY3RDEsNjdEMiw2N0QzLDY3RDQsNjdEOCw2N0Q5LDY3REEsNjdEQyw2N0RELDY3REUsNjdFMCw2N0UyLDY3RTUsNjdFOSw2N0VDLDY3RUYsNjdGMCw2N0YxLDY3RjMsNjdGNCw2N0ZELDY3RkYsNjgwMCw2ODA1LDY4MDcsNjgwOCw2ODA5LDY4MEEsNjgwQiw2ODBDLDY4MEUsNjgwRiw2ODExLDY4MTMsNjgxNiw2ODE3LDY4MUQsNjgyMSw2ODI5LDY4MkEsNjgzMiw2ODMzLDY4MzcsNjgzOCw2ODM5LDY4M0MsNjgzRCw2ODNFLDY4NDAsNjg0MSw2ODQyLDY4NDMsNjg0NCw2ODQ1LDY4NDYsNjg0OCw2ODQ5LDY4NEEsNjg0Qyw2ODRFLDY4NTAsNjg1MSw2ODUzLDY4NTQsNjg1NSw2ODYwLDY4NjEsNjg2Miw2ODYzLDY4NjQsNjg2NSw2ODY2LDY4NjcsNjg2OCw2ODY5LDY4NkIsNjg3NCw2ODc2LDY4NzcsNjg4MSw2ODgzLDY4ODUsNjg4Niw2ODhGLDY4OTMsNjg5Nyw2OEEyLDY4QTYsNjhBNyw2OEE4LDY4QUQsNjhBRiw2OEIwLDY4QjMsNjhCNSw2OEMwLDY4QzIsNjhDOSw2OENCLDY4Q0QsNjhEMiw2OEQ1LDY4RDgsNjhEQSw2OEUwLDY4RTMsNjhFRSw2OEYwLDY4RjEsNjhGNSw2OEY5LDY4RkEsNjhGQyw2OTAxLDY5MDUsNjkwQiw2OTBELDY5MEUsNjkxMCw2OTEyLDY5MUYsNjkyMCw2OTI0LDY5MkQsNjkzMCw2OTM0LDY5MzksNjkzRCw2OTNGLDY5NDIsNjk1NCw2OTU3LDY5NUEsNjk1RCw2OTVFLDY5NjAsNjk2Myw2OTY2LDY5NkIsNjk2RSw2OTcxLDY5NzcsNjk3OCw2OTc5LDY5N0MsNjk4MCw2OTgyLDY5ODQsNjk4Niw2OTg3LDY5ODgsNjk4OSw2OThELDY5OTQsNjk5NSw2OTk4LDY5OUIsNjk5Qyw2OUE3LDY5QTgsNjlBQiw2OUFELDY5QjEsNjlCNCw2OUI3LDY5QkIsNjlDMSw2OUNBLDY5Q0MsNjlDRSw2OUQwLDY5RDQsNjlEQiw2OURGLDY5RTAsNjlFRCw2OUYyLDY5RkQsNjlGRiw2QTBBLDZBMTcsNkExOCw2QTFGLDZBMjEsNkEyOCw2QTJBLDZBMkYsNkEzMSw2QTM1LDZBM0QsNkEzRSw2QTQ0LDZBNDcsNkE1MCw2QTU4LDZBNTksNkE1Qiw2QTYxLDZBNjUsNkE3MSw2QTc5LDZBN0MsNkE4MCw2QTg0LDZBOEUsNkE5MCw2QTkxLDZBOTcsNkFBMCw2QUE5LDZBQUIsNkFBQyw2QjIwLDZCMjEsNkIyMiw2QjIzLDZCMjQsNkIyNyw2QjMyLDZCMzcsNkIzOSw2QjNBLDZCM0UsNkI0Myw2QjQ2LDZCNDcsNkI0OSw2QjRDLDZCNTksNkI2Miw2QjYzLDZCNjQsNkI2NSw2QjY2LDZCNjcsNkI2QSw2Qjc5LDZCN0IsNkI3Qyw2QjgxLDZCODIsNkI4Myw2Qjg0LDZCODYsNkI4Nyw2Qjg5LDZCOEEsNkI4Qiw2QjhELDZCOTIsNkI5Myw2Qjk2LDZCOUEsNkI5Qiw2QkExLDZCQUEsNkJCMyw2QkI0LDZCQjUsNkJCNyw2QkJGLDZCQzEsNkJDMiw2QkM1LDZCQ0IsNkJDRCw2QkNGLDZCRDIsNkJEMyw2QkQ0LDZCRDUsNkJENiw2QkQ3LDZCRDksNkJEQiw2QkUxLDZCRUEsNkJFQiw2QkVGLDZCRjMsNkJGNSw2QkY5LDZCRkQsNkMwNSw2QzA2LDZDMDcsNkMwRCw2QzBGLDZDMTAsNkMxMSw2QzEzLDZDMTQsNkMxNSw2QzE2LDZDMTgsNkMxOSw2QzFBLDZDMUIsNkMxRiw2QzIxLDZDMjIsNkMyNCw2QzI2LDZDMjcsNkMyOCw2QzI5LDZDMkEsNkMyRSw2QzJGLDZDMzAsNkMzMiw2QzM0LDZDMzUsNkMzOCw2QzNELDZDNDAsNkM0MSw2QzQyLDZDNDYsNkM0Nyw2QzQ5LDZDNEEsNkM1MCw2QzU0LDZDNTUsNkM1Nyw2QzVCLDZDNUMsNkM1RCw2QzVFLDZDNUYsNkM2MCw2QzYxLDZDNjQsNkM2OCw2QzY5LDZDNkEsNkM3MCw2QzcyLDZDNzQsNkM3Niw2Qzc5LDZDN0QsNkM3RSw2QzgxLDZDODIsNkM4Myw2Qzg1LDZDODYsNkM4OCw2Qzg5LDZDOEMsNkM4Riw2QzkwLDZDOTMsNkM5NCw2Qzk5LDZDOUIsNkM5Riw2Q0ExLDZDQTMsNkNBNCw2Q0E1LDZDQTYsNkNBNyw2Q0E5LDZDQUEsNkNBQiw2Q0FELDZDQUUsNkNCMSw2Q0IyLDZDQjMsNkNCOCw2Q0I5LDZDQkIsNkNCQyw2Q0JELDZDQkUsNkNCRiw2Q0M0LDZDQzUsNkNDOSw2Q0NBLDZDQ0MsNkNEMCw2Q0QzLDZDRDQsNkNENSw2Q0Q2LDZDRDcsNkNEQiw2Q0RFLDZDRTAsNkNFMSw2Q0UyLDZDRTMsNkNFNSw2Q0U4LDZDRUEsNkNFQiw2Q0VFLDZDRUYsNkNGMCw2Q0YxLDZDRjMsNkNGNSw2Q0Y2LDZDRjcsNkNGOCw2Q0ZBLDZDRkIsNkNGQyw2Q0ZELDZDRkUsNkQwMSw2RDA0LDZEMDcsNkQwQiw2RDBDLDZEMEUsNkQxMiw2RDE3LDZEMTksNkQxQSw2RDFCLDZEMUUsNkQyNSw2RDI3LDZEMkEsNkQyQiw2RDJFLDZEMzEsNkQzMiw2RDMzLDZEMzUsNkQzOSw2RDNCLDZEM0MsNkQzRCw2RDNFLDZENDEsNkQ0Myw2RDQ1LDZENDYsNkQ0Nyw2RDQ4LDZENEEsNkQ0Qiw2RDRELDZENEUsNkQ0Riw2RDUxLDZENTIsNkQ1Myw2RDU0LDZENTksNkQ1QSw2RDVDLDZENUUsNkQ2MCw2RDYzLDZENjYsNkQ2OSw2RDZBLDZENkUsNkQ2Riw2RDc0LDZENzcsNkQ3OCw2RDdDLDZEODIsNkQ4NSw2RDg4LDZEODksNkQ4Qyw2RDhFLDZEOTEsNkQ5Myw2RDk0LDZEOTUsNkQ5Qiw2RDlELDZEOUUsNkQ5Riw2REEwLDZEQTEsNkRBMyw2REE0LDZEQTYsNkRBNyw2REE4LDZEQTksNkRBQSw2REFCLDZEQUUsNkRBRiw2REIyLDZEQjUsNkRCOCw2REJGLDZEQzAsNkRDNCw2REM1LDZEQzYsNkRDNyw2RENCLDZEQ0MsNkREMSw2REQ2LDZERDgsNkREOSw2RERELDZEREUsNkRFMCw2REUxLDZERTQsNkRFNiw2REVCLDZERUMsNkRFRSw2REYxLDZERjMsNkRGNyw2REY5LDZERkIsNkRGQyw2RTA1LDZFMEEsNkUwQyw2RTBELDZFMEUsNkUxMCw2RTExLDZFMTQsNkUxNiw2RTE3LDZFMUEsNkUxRCw2RTIwLDZFMjEsNkUyMyw2RTI0LDZFMjUsNkUyOSw2RTJCLDZFMkQsNkUyRiw2RTMyLDZFMzQsNkUzOCw2RTNBLDZFNDMsNkU0NCw2RTRELDZFNEUsNkU1Myw2RTU0LDZFNTYsNkU1OCw2RTVCLDZFNUYsNkU2Qiw2RTZFLDZFN0UsNkU3Riw2RTgzLDZFODUsNkU4Niw2RTg5LDZFOEYsNkU5MCw2RTk4LDZFOUMsNkU5Riw2RUEyLDZFQTUsNkVBNyw2RUFBLDZFQUYsNkVCMSw2RUIyLDZFQjQsNkVCNiw2RUI3LDZFQkEsNkVCQiw2RUJELDZFQzEsNkVDMiw2RUM3LDZFQ0IsNkVDRiw2RUQxLDZFRDMsNkVENCw2RUQ1LDZFRDcsNkVEQSw2RURFLDZFREYsNkVFMCw2RUUxLDZFRTIsNkVFNCw2RUU1LDZFRTYsNkVFOCw2RUU5LDZFRjQsNkVGOSw2RjAyLDZGMDYsNkYwOSw2RjBGLDZGMTMsNkYxNCw2RjE1LDZGMjAsNkYyNCw2RjI5LDZGMkEsNkYyQiw2RjJELDZGMkYsNkYzMSw2RjMzLDZGMzYsNkYzRSw2RjQ2LDZGNDcsNkY0Qiw2RjRELDZGNTgsNkY1Qyw2RjVFLDZGNjIsNkY2Niw2RjZELDZGNkUsNkY3Miw2Rjc0LDZGNzgsNkY3QSw2RjdDLDZGODQsNkY4OCw2Rjg5LDZGOEMsNkY4RCw2RjhFLDZGOUMsNkZBMSw2RkE3LDZGQjMsNkZCNiw2RkI5LDZGQzAsNkZDMiw2RkM5LDZGRDEsNkZEMiw2RkRFLDZGRTAsNkZFMSw2RkVFLDZGRUYsNzAxMSw3MDFBLDcwMUIsNzAyMyw3MDM1LDcwMzksNzA0Qyw3MDRGLDcwNUUsNzA2Qiw3MDZDLDcwNkQsNzA2Riw3MDcwLDcwNzUsNzA3Niw3MDc4LDcwN0MsNzA3RSw3MDdGLDcwODAsNzA4NSw3MDg5LDcwOEEsNzA4RSw3MDkyLDcwOTQsNzA5NSw3MDk2LDcwOTksNzA5Qyw3MDlELDcwQUIsNzBBQyw3MEFELDcwQUUsNzBBRiw3MEIxLDcwQjMsNzBCNyw3MEI4LDcwQjksNzBCQiw3MEJDLDcwQkQsNzBDMCw3MEMxLDcwQzIsNzBDMyw3MEM4LDcwQ0EsNzBEOCw3MEQ5LDcwREIsNzBERiw3MEU0LDcwRTYsNzBFNyw3MEU4LDcwRTksNzBFQiw3MEVDLDcwRUQsNzBFRiw3MEY3LDcwRjksNzBGRCw3MTA5LDcxMEEsNzExMCw3MTEzLDcxMTUsNzExNiw3MTE4LDcxMTksNzExQSw3MTI2LDcxMkYsNzEzMCw3MTMxLDcxMzYsNzE0NSw3MTRBLDcxNEMsNzE0RSw3MTVDLDcxNUUsNzE2NCw3MTY2LDcxNjcsNzE2OCw3MTZFLDcxNzIsNzE3Myw3MTc4LDcxN0EsNzE3RCw3MTg0LDcxOEEsNzE4Riw3MTk0LDcxOTgsNzE5OSw3MTlGLDcxQTAsNzFBOCw3MUFDLDcxQjMsNzFCNSw3MUI5LDcxQzMsNzFDRSw3MUQ0LDcxRDUsNzFFMCw3MUU1LDcxRTcsNzFFRSw3MUY5LDcyMDYsNzIxRCw3MjI4LDcyMkEsNzIyQyw3MjMwLDcyMzEsNzIzNSw3MjM2LDcyMzcsNzIzOCw3MjM5LDcyM0IsNzIzRCw3MjNGLDcyNDcsNzI0OCw3MjRDLDcyNEQsNzI1Miw3MjU2LDcyNTksNzI1Qiw3MjVELDcyNUYsNzI2MSw3MjYyLDcyNjYsNzI2Nyw3MjY5LDcyNkUsNzI2Riw3MjcyLDcyNzUsNzI3OSw3MjdBLDcyN0UsNzI3Riw3MjgwLDcyODEsNzI4NCw3MjhBLDcyOEIsNzI4RCw3MjhGLDcyOTIsNzI5Riw3MkFDLDcyQUQsNzJBRiw3MkIwLDcyQjQsNzJCNiw3MkI3LDcyQjgsNzJCOSw3MkMxLDcyQzIsNzJDMyw3MkM0LDcyQzgsNzJDRCw3MkNFLDcyRDAsNzJEMiw3MkQ3LDcyRDksNzJERSw3MkUwLDcyRTEsNzJFOCw3MkU5LDcyRUMsNzJFRCw3MkVFLDcyRUYsNzJGMCw3MkYxLDcyRjIsNzJGMyw3MkY0LDcyRjcsNzJGOCw3MkZBLDcyRkIsNzJGQyw3MzAxLDczMDMsNzMwQSw3MzBFLDczMTMsNzMxNSw3MzE2LDczMTcsNzMxQiw3MzFDLDczMUQsNzMxRSw3MzIxLDczMjIsNzMyNSw3MzI5LDczMkEsNzMyQiw3MzJDLDczMkUsNzMzMSw3MzM0LDczMzcsNzMzOCw3MzM5LDczM0UsNzMzRiw3MzRELDczNTAsNzM1Miw3MzU3LDczNjAsNzM2Qyw3MzZELDczNkYsNzM3RSw3Mzg0LDczODcsNzM4OSw3MzhCLDczOEUsNzM5MSw3Mzk2LDczOUIsNzM5Riw3M0EyLDczQTksNzNBQiw3M0FFLDczQUYsNzNCMCw3M0IyLDczQjMsNzNCNyw3M0JBLDczQkIsNzNDMCw3M0MyLDczQzgsNzNDOSw3M0NBLDczQ0QsNzNDRiw3M0QwLDczRDEsNzNEOSw3M0RFLDczRTAsNzNFNSw3M0U3LDczRTksNzNFRCw3M0YyLDc0MDMsNzQwNSw3NDA2LDc0MDksNzQwQSw3NDBGLDc0MTAsNzQxQSw3NDFCLDc0MjIsNzQyNSw3NDI2LDc0MjgsNzQyQSw3NDJDLDc0MkUsNzQzMCw3NDMzLDc0MzQsNzQzNSw3NDM2LDc0M0MsNzQ0MSw3NDU1LDc0NTcsNzQ1OSw3NDVBLDc0NUIsNzQ1Qyw3NDVFLDc0NUYsNzQ2RCw3NDcwLDc0NzYsNzQ3Nyw3NDdFLDc0ODAsNzQ4MSw3NDgzLDc0ODcsNzQ4Qiw3NDhFLDc0OTAsNzQ5Qyw3NDlFLDc0QTcsNzRBOCw3NEE5LDc0QkEsNzREMiw3NERDLDc0REUsNzRFMCw3NEUyLDc0RTMsNzRFNCw3NEU2LDc0RUUsNzRFRiw3NEY0LDc0RjYsNzRGNyw3NEZGLDc1MDQsNzUwRCw3NTBGLDc1MTEsNzUxMyw3NTE4LDc1MTksNzUxQSw3NTFDLDc1MUYsNzUyNSw3NTI4LDc1MjksNzUyQiw3NTJDLDc1MkQsNzUyRiw3NTMwLDc1MzEsNzUzMiw3NTMzLDc1MzUsNzUzNyw3NTM4LDc1M0EsNzUzQiw3NTNFLDc1NDAsNzU0NSw3NTQ4LDc1NEIsNzU0Qyw3NTRFLDc1NEYsNzU1NCw3NTU5LDc1NUEsNzU1Qiw3NTVDLDc1NjUsNzU2Niw3NTZBLDc1NzIsNzU3NCw3NTc4LDc1NzksNzU3Riw3NTgzLDc1ODYsNzU4Qiw3NThGLDc1OTEsNzU5Miw3NTk0LDc1OTYsNzU5Nyw3NTk5LDc1OUEsNzU5RCw3NTlGLDc1QTAsNzVBMSw3NUEzLDc1QTQsNzVBNSw3NUFCLDc1QUMsNzVBRSw3NUFGLDc1QjAsNzVCMSw3NUIyLDc1QjMsNzVCNCw3NUI1LDc1QjgsNzVCOSw3NUJDLDc1QkQsNzVCRSw3NUMyLDc1QzMsNzVDNCw3NUM1LDc1QzcsNzVDOCw3NUM5LDc1Q0EsNzVDRCw3NUQyLDc1RDQsNzVENSw3NUQ2LDc1RDgsNzVEQiw3NURFLDc1RTIsNzVFMyw3NUU0LDc1RTYsNzVFNyw3NUU4LDc1RUEsNzVFQiw3NUYwLDc1RjEsNzVGNCw3NUY5LDc1RkMsNzVGRiw3NjAwLDc2MDEsNzYwMyw3NjA1LDc2MEEsNzYwQyw3NjEwLDc2MTUsNzYxNyw3NjE4LDc2MTksNzYxQiw3NjFGLDc2MjAsNzYyMiw3NjI0LDc2MjUsNzYyNiw3NjI5LDc2MkEsNzYyQiw3NjJELDc2MzAsNzYzMyw3NjM0LDc2MzUsNzYzOCw3NjNDLDc2M0UsNzYzRiw3NjQwLDc2NDMsNzY0Qyw3NjRELDc2NTQsNzY1Niw3NjVDLDc2NUUsNzY2Myw3NjZCLDc2NkYsNzY3OCw3NjdCLDc2N0QsNzY3RSw3NjgyLDc2ODQsNzY4Niw3Njg3LDc2ODgsNzY4Qiw3NjhFLDc2OTEsNzY5Myw3Njk2LDc2OTksNzZBNCw3NkFFLDc2QjEsNzZCMiw3NkI0LDc2QkYsNzZDMiw3NkM1LDc2QzYsNzZDOCw3NkNBLDc2Q0QsNzZDRSw3NkNGLDc2RDAsNzZEMSw3NkQyLDc2RDQsNzZENiw3NkQ3LDc2RDgsNzZEQiw3NkRGLDc2RTUsNzZFRSw3NkVGLDc2RjEsNzZGMiw3NkY0LDc2RjgsNzZGOSw3NkZDLDc2RkUsNzcwMSw3NzA0LDc3MDcsNzcwOCw3NzA5LDc3MEIsNzcwRCw3NzE5LDc3MUEsNzcxRiw3NzIwLDc3MjIsNzcyNiw3NzI4LDc3MjksNzcyRCw3NzJGLDc3MzUsNzczNiw3NzM3LDc3MzgsNzczQSw3NzNDLDc3NDAsNzc0MSw3NzQzLDc3NDcsNzc1MCw3NzUxLDc3NUEsNzc1Qiw3NzYxLDc3NjIsNzc2Myw3NzY1LDc3NjYsNzc2OCw3NzZCLDc3NkMsNzc3OSw3NzdELDc3N0UsNzc3Riw3NzgwLDc3ODQsNzc4NSw3NzhDLDc3OEQsNzc4RSw3NzkxLDc3OTIsNzc5Riw3N0EwLDc3QTIsNzdBNSw3N0E3LDc3QTksNzdBQSw3N0FDLDc3QjAsNzdCMyw3N0I1LDc3QkIsNzdCRCw3N0JGLDc3Q0QsNzdENyw3N0RCLDc3REMsNzdFMiw3N0UzLDc3RTUsNzdFNyw3N0U5LDc3RUIsNzdFQyw3N0VELDc3RUUsNzdGMyw3N0Y2LDc3RjgsNzdGRCw3N0ZFLDc3RkYsNzgwMCw3ODAxLDc4MDIsNzgwOSw3ODBDLDc4MEQsNzgxMSw3ODEyLDc4MTQsNzgxNiw3ODE3LDc4MTgsNzgxQSw3ODFDLDc4MUQsNzgxRiw3ODIzLDc4MjUsNzgyNiw3ODI3LDc4MjksNzgyQyw3ODJELDc4MzAsNzgzNCw3ODM3LDc4MzgsNzgzOSw3ODNBLDc4M0IsNzgzQyw3ODNFLDc4NDAsNzg0NSw3ODQ3LDc4NEMsNzg0RSw3ODUwLDc4NTIsNzg1NSw3ODU2LDc4NTcsNzg1RCw3ODZBLDc4NkIsNzg2Qyw3ODZELDc4NkUsNzg3Nyw3ODdDLDc4ODcsNzg4OSw3ODhDLDc4OEQsNzg4RSw3ODkxLDc4OTMsNzg5Nyw3ODk4LDc4OUEsNzg5Qiw3ODlDLDc4OUYsNzhBMSw3OEEzLDc4QTUsNzhBNyw3OEIwLDc4QjEsNzhCMiw3OEIzLDc4QjQsNzhCOSw3OEJFLDc4QzEsNzhDNSw3OEM5LDc4Q0EsNzhDQiw3OEQwLDc4RDQsNzhENSw3OEQ5LDc4RTgsNzhFQyw3OEYyLDc4RjQsNzhGNyw3OEZBLDc5MDEsNzkwNSw3OTEzLDc5MUUsNzkyNCw3OTM0LDc5M0EsNzkzQiw3OTNDLDc5M0UsNzk0MCw3OTQxLDc5NDYsNzk0OCw3OTQ5LDc5NTMsNzk1Niw3OTU3LDc5NUEsNzk1Qiw3OTVDLDc5NUQsNzk1RSw3OTVGLDc5NjAsNzk2Miw3OTY1LDc5NjcsNzk2OCw3OTZELDc5NkYsNzk3Nyw3OTc4LDc5N0EsNzk4MCw3OTgxLDc5ODQsNzk4NSw3OThBLDc5OEYsNzk5QSw3OUE3LDc5QjMsNzlCOSw3OUJBLDc5QkIsNzlCRCw3OUJFLDc5QzAsNzlDMSw3OUMzLDc5QzYsNzlDOSw3OUNCLDc5Q0QsNzlEMSw3OUQyLDc5RDUsNzlEOCw3OURGLDc5RTMsNzlFNCw3OUU2LDc5RTcsNzlFOSw3OUVCLDc5RUQsNzlFRiw3OUYwLDc5RjgsNzlGQiw3OUZELDdBMDAsN0EwMiw3QTAzLDdBMDYsN0EwQiw3QTBELDdBMEUsN0ExNCw3QTE3LDdBMUEsN0ExRSw3QTIwLDdBMjMsN0EzMyw3QTM3LDdBMzksN0EzQiw3QTNDLDdBM0QsN0EzRiw3QTQ2LDdBNTEsN0E1Nyw3QTcwLDdBNzQsN0E3Niw3QTc3LDdBNzgsN0E3OSw3QTdBLDdBN0YsN0E4MCw3QTgxLDdBODMsN0E4NCw3QTg2LDdBODgsN0E4RCw3QTkxLDdBOTIsN0E5NSw3QTk2LDdBOTcsN0E5OCw3QTlDLDdBOUQsN0E5Riw3QUEwLDdBQTUsN0FBNiw3QUE4LDdBQUMsN0FBRCw3QUIzLDdBQkYsN0FDQiw3QUQ2LDdBRDksN0FERSw3QURGLDdBRTAsN0FFMyw3QUU1LDdBRTYsN0FFRCw3QUVGLDdBRjksN0FGQSw3QUZELDdBRkYsN0IwMyw3QjA0LDdCMDYsN0IwOCw3QjBBLDdCMEIsN0IwRiw3QjExLDdCMTQsN0IxNSw3QjE5LDdCMUIsN0IxRSw3QjIwLDdCMjQsN0IyNSw3QjI2LDdCMjgsN0IyQSw3QjJCLDdCMkMsN0IyRSw3QjMxLDdCMzMsN0IzOCw3QjNBLDdCM0MsN0IzRSw3QjQ1LDdCNDcsN0I0OSw3QjRCLDdCNEMsN0I0Riw3QjUwLDdCNTEsN0I1Miw3QjU0LDdCNTYsN0I1OCw3QjVBLDdCNUIsN0I1RCw3QjYwLDdCNjIsN0I2RSw3QjcxLDdCNzIsN0I3NSw3Qjc3LDdCNzksN0I3Qiw3QjdFLDdCODAsN0I4NSw3QjhELDdCOTAsN0I5NCw3Qjk1LDdCOTcsN0I5Qyw3QjlELDdCQTEsN0JBMiw3QkE2LDdCQTcsN0JBOCw3QkE5LDdCQUEsN0JBQiw3QkFDLDdCQUQsN0JCMSw3QkI0LDdCQjgsN0JDMSw3QkM2LDdCQzcsN0JDQyw3QkQxLDdCRDMsN0JEOSw3QkRBLDdCREQsN0JFMSw3QkU1LDdCRTYsN0JFQSw3QkVFLDdCRjEsN0JGNyw3QkZDLDdCRkUsN0MwNyw3QzBCLDdDMEMsN0MwRiw3QzE2LDdDMUYsN0MyNiw3QzI3LDdDMkEsN0MzOCw3QzNGLDdDNDAsN0M0MSw3QzRELDdDNzMsN0M3NCw3QzdCLDdDN0MsN0M3RCw3Qzg5LDdDOTEsN0M5Miw3Qzk1LDdDOTcsN0M5OCw3QzlDLDdDOUQsN0M5RSw3QzlGLDdDQTIsN0NBNCw3Q0E1LDdDQUEsN0NBRSw3Q0IxLDdDQjIsN0NCMyw3Q0I5LDdDQkMsN0NCRCw3Q0JFLDdDQzEsN0NDNSw3Q0M3LDdDQzgsN0NDQSw3Q0NDLDdDQ0QsN0NENSw3Q0Q2LDdDRDcsN0NEOSw3Q0RDLDdDREYsN0NFMCw3Q0U4LDdDRUYsN0NGOCw3Q0ZCLDdEMEEsN0QyMCw3RDIyLDdEMjcsN0QyQiw3RDJGLDdENkUsN0Q3Nyw3REE2LDdEQUUsN0UzQiw3RTQxLDdFNDcsN0U4Miw3RTlCLDdFOUYsN0VBMCw3RUExLDdFQTIsN0VBMyw3RUE0LDdFQTUsN0VBNiw3RUE3LDdFQTgsN0VBOSw3RUFBLDdFQUIsN0VBQyw3RUFELDdFQUYsN0VCMCw3RUIxLDdFQjIsN0VCMyw3RUI1LDdFQjYsN0VCNyw3RUI4LDdFQjksN0VCQSw3RUJELDdFQkUsN0VCRiw3RUMwLDdFQzEsN0VDMiw3RUMzLDdFQzQsN0VDNSw3RUM2LDdFQzcsN0VDOCw3RUM5LDdFQ0EsN0VDQiw3RUNDLDdFQ0QsN0VDRSw3RUNGLDdFRDAsN0VEMSw3RUQyLDdFRDMsN0VENCw3RUQ1LDdFRDcsN0VEOCw3RUQ5LDdFREEsN0VEQiw3RURDLDdFREQsN0VERSw3RURGLDdFRTAsN0VFMSw3RUUyLDdFRTMsN0VFNSw3RUU2LDdFRTcsN0VFOCw3RUU5LDdFRUEsN0VFQiw3RUVELDdFRUUsN0VFRiw3RUYwLDdFRjEsN0VGMiw3RUYzLDdFRjQsN0VGNSw3RUY2LDdFRjcsN0VGOCw3RUZBLDdFRkIsN0VGQyw3RUZELDdFRkUsN0VGRiw3RjAwLDdGMDEsN0YwMiw3RjAzLDdGMDQsN0YwNSw3RjA2LDdGMDcsN0YwOCw3RjA5LDdGMEIsN0YwQyw3RjBELDdGMEUsN0YwRiw3RjExLDdGMTIsN0YxMyw3RjE0LDdGMTUsN0YxNiw3RjE3LDdGMTgsN0YxOSw3RjFBLDdGMUIsN0YxQyw3RjFELDdGMUYsN0YyMCw3RjIxLDdGMjIsN0YyMyw3RjI0LDdGMjUsN0YyNiw3RjI3LDdGMjgsN0YyOSw3RjJBLDdGMkIsN0YyQyw3RjJELDdGMkUsN0YyRiw3RjMwLDdGMzEsN0YzMiw3RjMzLDdGMzQsN0YzNSw3RjM2LDdGMzgsN0YzQSw3RjQyLDdGNDQsN0Y0NSw3RjUwLDdGNTEsN0Y1NCw3RjU1LDdGNTcsN0Y1OCw3RjVBLDdGNUYsN0Y2MSw3RjYyLDdGNjgsN0Y2OSw3RjZBLDdGNkUsN0Y3MSw3RjcyLDdGNzQsN0Y3OSw3RjdFLDdGODEsN0Y4QSw3RjhDLDdGOEUsN0Y5NCw3RjlBLDdGOUQsN0Y5RSw3RjlGLDdGQTEsN0ZBNCw3RkE3LDdGQUYsN0ZCMCw3RkIyLDdGQjgsN0ZCOSw3RkJDLDdGQkQsN0ZCRiw3RkMxLDdGQzUsN0ZDQSw3RkNDLDdGQ0UsN0ZENCw3RkQ1LDdGRDgsN0ZERiw3RkUwLDdGRTEsN0ZFNSw3RkU2LDdGRTksN0ZFRSw3RkYwLDdGRjEsN0ZGMyw3RkZCLDdGRkMsODAwMCw4MDAxLDgwMDMsODAwNCw4MDA1LDgwMDYsODAwQiw4MDBDLDgwMEQsODAxMCw4MDEyLDgwMTQsODAxNSw4MDE2LDgwMTcsODAxOCw4MDE5LDgwMUMsODAyMCw4MDIyLDgwMjUsODAyNiw4MDI3LDgwMjgsODAyOSw4MDJBLDgwMzEsODAzMyw4MDM1LDgwMzYsODAzNyw4MDM4LDgwM0IsODAzRCw4MDNGLDgwNDIsODA0Myw4MDQ2LDgwNEEsODA0Qiw4MDRDLDgwNEQsODA1Miw4MDU0LDgwNTgsODA1QSw4MDY5LDgwNkEsODA3MSw4MDdGLDgwODAsODA4Myw4MDg0LDgwODYsODA4Nyw4MDg5LDgwOEIsODA4Qyw4MDkzLDgwOTYsODA5OCw4MDlBLDgwOUIsODA5Qyw4MDlELDgwOUYsODBBMCw4MEExLDgwQTIsODBBNCw4MEE1LDgwQTksODBBQSw4MEFCLDgwQUQsODBBRSw4MEFGLDgwQjEsODBCMiw4MEI0LDgwQjcsODBCQSw4MEJDLDgwQkQsODBCRSw4MEJGLDgwQzAsODBDMSw4MEMyLDgwQzMsODBDNCw4MEM2LDgwQ0MsODBDRCw4MENFLDgwRDYsODBENyw4MEQ5LDgwREEsODBEQiw4MERDLDgwREQsODBERSw4MEUxLDgwRTQsODBFNSw4MEU3LDgwRTgsODBFOSw4MEVBLDgwRUIsODBFQyw4MEVELDgwRUYsODBGMCw4MEYxLDgwRjIsODBGMyw4MEY0LDgwRjYsODBGOCw4MEZBLDgwRkMsODBGRCw4MTAyLDgxMDYsODEwOSw4MTBBLDgxMEQsODEwRSw4MTBGLDgxMTAsODExMSw4MTEyLDgxMTMsODExNCw4MTE2LDgxMTgsODExQSw4MTFFLDgxMkMsODEyRiw4MTMxLDgxMzIsODEzNiw4MTM4LDgxM0UsODE0Niw4MTQ4LDgxNEEsODE0Qiw4MTRDLDgxNTAsODE1MSw4MTUzLDgxNTQsODE1NSw4MTU5LDgxNUEsODE2MCw4MTY1LDgxNjcsODE2OSw4MTZELDgxNkUsODE3MCw4MTcxLDgxNzQsODE3OSw4MTdBLDgxN0IsODE3Qyw4MTdELDgxN0UsODE3Riw4MTgwLDgxODIsODE4OCw4MThBLDgxOEYsODE5MSw4MTk4LDgxOUIsODE5Qyw4MTlELDgxQTMsODFBNiw4MUE4LDgxQUEsODFCMyw4MUJBLDgxQkIsODFDMCw4MUMxLDgxQzIsODFDMyw4MUM2LDgxQ0EsODFDQyw4MUUzLDgxRTcsODFFQSw4MUVDLDgxRUQsODFGMyw4MUY0LDgxRkIsODFGQyw4MUZFLDgyMDAsODIwMSw4MjAyLDgyMDQsODIwNSw4MjA2LDgyMEMsODIwRCw4MjEwLDgyMTIsODIxNCw4MjFCLDgyMUMsODIxRSw4MjFGLDgyMjEsODIyMiw4MjIzLDgyMjgsODIyQSw4MjJCLDgyMkMsODIyRCw4MjJGLDgyMzAsODIzMSw4MjMzLDgyMzQsODIzNSw4MjM2LDgyMzcsODIzOCw4MjM5LDgyM0IsODIzRSw4MjQ0LDgyNDcsODI0OSw4MjRCLDgyNEYsODI1OCw4MjVBLDgyNUYsODI2OCw4MjZFLDgyNkYsODI3MCw4MjcyLDgyNzMsODI3NCw4Mjc5LDgyN0EsODI3RCw4MjdFLDgyN0YsODI4Miw4Mjg0LDgyODgsODI4QSw4MjhCLDgyOEQsODI4RSw4MjhGLDgyOTEsODI5Miw4Mjk3LDgyOTgsODI5OSw4MjlDLDgyOUQsODI5Riw4MkExLDgyQTQsODJBNSw4MkE2LDgyQTgsODJBOSw4MkFBLDgyQUIsODJBQyw4MkFELDgyQUUsODJBRiw4MkIwLDgyQjEsODJCMyw4MkI0LDgyQjcsODJCOCw4MkI5LDgyQkQsODJCRSw4MkMxLDgyQzQsODJDNyw4MkM4LDgyQ0EsODJDQiw4MkNDLDgyQ0QsODJDRSw4MkNGLDgyRDEsODJEMiw4MkQzLDgyRDQsODJENSw4MkQ3LDgyRDgsODJEQiw4MkRDLDgyREUsODJERiw4MkUwLDgyRTEsODJFMyw4MkU0LDgyRTUsODJFNiw4MkVCLDgyRUYsODJGMSw4MkY0LDgyRjcsODJGOSw4MkZCLDgzMDEsODMwMiw4MzAzLDgzMDQsODMwNSw4MzA2LDgzMDcsODMwOCw4MzA5LDgzMEMsODMwRSw4MzBGLDgzMTEsODMxNCw4MzE1LDgzMTcsODMxQSw4MzFCLDgzMUMsODMyNyw4MzI4LDgzMkIsODMyQyw4MzJELDgzMkYsODMzMSw4MzMzLDgzMzQsODMzNSw4MzM2LDgzMzgsODMzOSw4MzNBLDgzM0MsODM0MCw4MzQzLDgzNDYsODM0Nyw4MzQ5LDgzNEYsODM1MCw4MzUxLDgzNTIsODM1NCw4MzVBLDgzNUIsODM1Qyw4MzVFLDgzNUYsODM2MCw4MzYxLDgzNjMsODM2NCw4MzY1LDgzNjYsODM2Nyw4MzY4LDgzNjksODM2QSw4MzZCLDgzNkMsODM2RCw4MzZFLDgzNkYsODM3Nyw4Mzc4LDgzN0IsODM3Qyw4MzdELDgzODUsODM4Niw4Mzg5LDgzOEUsODM5Miw4MzkzLDgzOTgsODM5Qiw4MzlDLDgzOUUsODNBMCw4M0E4LDgzQTksODNBQSw4M0FCLDgzQjAsODNCMSw4M0IyLDgzQjMsODNCNCw4M0I2LDgzQjcsODNCOCw4M0I5LDgzQkEsODNCQyw4M0JELDgzQzAsODNDMSw4M0M1LDgzQzcsODNDQSw4M0NDLDgzQ0YsODNENCw4M0Q2LDgzRDgsODNEQyw4M0RELDgzREYsODNFMCw4M0UxLDgzRTUsODNFOSw4M0VBLDgzRjAsODNGMSw4M0YyLDgzRjgsODNGOSw4M0ZELDg0MDEsODQwMyw4NDA0LDg0MDYsODQwQiw4NDBDLDg0MEQsODQwRSw4NDBGLDg0MTEsODQxOCw4NDFDLDg0MUQsODQyNCw4NDI1LDg0MjYsODQyNyw4NDI4LDg0MzEsODQzOCw4NDNDLDg0M0QsODQ0Niw4NDUxLDg0NTcsODQ1OSw4NDVBLDg0NUIsODQ1Qyw4NDYxLDg0NjMsODQ2OSw4NDZCLDg0NkMsODQ2RCw4NDcxLDg0NzMsODQ3NSw4NDc2LDg0NzgsODQ3QSw4NDgyLDg0ODcsODQ4OCw4NDg5LDg0OEIsODQ4Qyw4NDhFLDg0OTcsODQ5OSw4NDlDLDg0QTEsODRBRiw4NEIyLDg0QjQsODRCOCw4NEI5LDg0QkEsODRCRCw4NEJGLDg0QzEsODRDNCw4NEM5LDg0Q0EsODRDRCw4NEQwLDg0RDEsODREMyw4NEQ2LDg0REQsODRERiw4NEUwLDg0RTMsODRFNSw4NEU2LDg0RUMsODRGMCw4NEZDLDg0RkYsODUwQyw4NTExLDg1MTMsODUxNyw4NTFBLDg1MUYsODUyMSw4NTJCLDg1MkMsODUzNyw4NTM4LDg1MzksODUzQSw4NTNCLDg1M0MsODUzRCw4NTQzLDg1NDgsODU0OSw4NTRBLDg1NTYsODU1OSw4NTVFLDg1NjQsODU2OCw4NTcyLDg1NzQsODU3OSw4NTdBLDg1N0IsODU3RSw4NTg0LDg1ODUsODU4Nyw4NThGLDg1OUIsODU5Qyw4NUE0LDg1QTgsODVBQSw4NUFFLDg1QUYsODVCMCw4NUI3LDg1QjksODVDMSw4NUM5LDg1Q0YsODVEMCw4NUQzLDg1RDUsODVEQyw4NUU0LDg1RTksODVGQiw4NUZGLDg2MDUsODYxMSw4NjE2LDg2MjcsODYyOSw4NjM4LDg2M0MsODY0RCw4NjRFLDg2NEYsODY1MCw4NjUxLDg2NTQsODY1QSw4NjVFLDg2NjIsODY2Qiw4NjZDLDg2NkUsODY3MSw4Njc5LDg2N0EsODY3Qiw4NjdDLDg2N0QsODY3RSw4NjdGLDg2ODAsODY4MSw4NjgyLDg2OEEsODY4Qiw4NjhDLDg2OEQsODY5Myw4Njk1LDg2OUMsODY5RCw4NkEzLDg2QTQsODZBNyw4NkE4LDg2QTksODZBQSw4NkFDLDg2QUYsODZCMCw4NkIxLDg2QjQsODZCNSw4NkI2LDg2QkEsODZDMCw4NkM0LDg2QzYsODZDNyw4NkM5LDg2Q0EsODZDQiw4NkNFLDg2Q0YsODZEMCw4NkQxLDg2RDQsODZEOCw4NkQ5LDg2REIsODZERSw4NkRGLDg2RTQsODZFOSw4NkVELDg2RUUsODZGMCw4NkYxLDg2RjIsODZGMyw4NkY0LDg2RjgsODZGOSw4NkZFLDg3MDAsODcwMiw4NzAzLDg3MDcsODcwOCw4NzA5LDg3MEEsODcwRCw4NzEyLDg3MTMsODcxNSw4NzE3LDg3MTgsODcxQSw4NzFDLDg3MUUsODcyMSw4NzIyLDg3MjMsODcyNSw4NzI5LDg3MkUsODczMSw4NzM0LDg3MzcsODczQiw4NzNFLDg3M0YsODc0Nyw4NzQ4LDg3NDksODc0Qyw4NzRFLDg3NTMsODc1Nyw4NzU5LDg3NjAsODc2Myw4NzY0LDg3NjUsODc2RSw4NzcwLDg3NzQsODc3Niw4NzdCLDg3N0MsODc3RCw4NzdFLDg3ODIsODc4Myw4Nzg1LDg3ODgsODc4Qiw4NzhELDg3OTMsODc5Nyw4NzlGLDg3QTgsODdBQiw4N0FDLDg3QUQsODdBRiw4N0IzLDg3QjUsODdCQSw4N0JELDg3QzAsODdDNiw4N0NBLDg3Q0IsODdEMSw4N0QyLDg3RDMsODdEQiw4N0UwLDg3RTUsODdFQSw4N0VFLDg3RjksODdGRSw4ODAzLDg4MEEsODgxMyw4ODE1LDg4MTYsODgxQiw4ODIxLDg4MjIsODgzMiw4ODM5LDg4M0MsODg0MCw4ODQ0LDg4NDUsODg0Qyw4ODRELDg4NTQsODg1Nyw4ODU5LDg4NjEsODg2Miw4ODYzLDg4NjQsODg2NSw4ODY4LDg4NjksODg2Qiw4ODZDLDg4NkUsODg3MCw4ODcyLDg4NzcsODg3RCw4ODdFLDg4N0YsODg4MSw4ODgyLDg4ODQsODg4NSw4ODg4LDg4OEIsODg4RCw4ODkyLDg4OTYsODg5Qyw4OEEyLDg4QTQsODhBQiw4OEFELDg4QjEsODhCNyw4OEJDLDg4QzEsODhDMiw4OEM1LDg4QzYsODhDOSw4OENFLDg4RDIsODhENCw4OEQ1LDg4RDgsODhEOSw4OERGLDg4RTIsODhFMyw4OEU0LDg4RTUsODhFOCw4OEYwLDg4RjEsODhGMyw4OEY0LDg4RjgsODhGOSw4OEZDLDg4RkUsODkwMiw4OTBBLDg5MTAsODkxMiw4OTEzLDg5MTksODkxQSw4OTFCLDg5MjEsODkyNSw4OTJBLDg5MkIsODkzMCw4OTM0LDg5MzYsODk0MSw4OTQ0LDg5NUUsODk1Riw4OTY2LDg5N0IsODk3Riw4OTgxLDg5ODMsODk4Niw4OUMxLDg5QzIsODlDNCw4OUM1LDg5QzYsODlDNyw4OUM4LDg5QzksODlDQSw4OUNCLDg5Q0MsODlDRSw4OUNGLDg5RDAsODlEMSw4OUQyLDg5RDYsODlEQSw4OURDLDg5REUsODlFMyw4OUU1LDg5RTYsODlFQiw4OUVGLDg5RjMsOEEwMCw4QTA3LDhBM0UsOEE0OCw4QTc5LDhBODksOEE4QSw4QTkzLDhCMDcsOEIyNiw4QjY2LDhCNkMsOEJBMCw4QkExLDhCQTIsOEJBMyw4QkE0LDhCQTUsOEJBNiw4QkE3LDhCQTgsOEJBOSw4QkFBLDhCQUIsOEJBRCw4QkFFLDhCQUYsOEJCMCw4QkIyLDhCQjMsOEJCNCw4QkI1LDhCQjYsOEJCNyw4QkI4LDhCQjksOEJCQSw4QkJDLDhCQkQsOEJCRSw4QkJGLDhCQzAsOEJDMSw4QkMyLDhCQzMsOEJDNCw4QkM1LDhCQzYsOEJDOCw4QkM5LDhCQ0EsOEJDQiw4QkNDLDhCQ0QsOEJDRSw4QkNGLDhCRDEsOEJEMiw4QkQzLDhCRDQsOEJENSw4QkQ2LDhCRDcsOEJEOCw4QkQ5LDhCREEsOEJEQiw4QkRDLDhCREQsOEJERSw4QkRGLDhCRTAsOEJFMSw4QkUyLDhCRTMsOEJFNCw4QkU1LDhCRTYsOEJFNyw4QkU4LDhCRTksOEJFQiw4QkVDLDhCRUQsOEJFRSw4QkVGLDhCRjAsOEJGMSw4QkYyLDhCRjMsOEJGNCw4QkY1LDhCRjYsOEJGNyw4QkY4LDhCRjksOEJGQSw4QkZCLDhCRkMsOEJGRCw4QkZFLDhCRkYsOEMwMCw4QzAxLDhDMDIsOEMwMyw4QzA0LDhDMDUsOEMwNiw4QzA3LDhDMDgsOEMwQSw4QzBCLDhDMEMsOEMwRCw4QzBFLDhDMEYsOEMxMCw4QzExLDhDMTIsOEMxMyw4QzE0LDhDMTUsOEMxNiw4QzE3LDhDMTgsOEMxOSw4QzFBLDhDMUIsOEMxQyw4QzFELDhDMUYsOEMyMCw4QzIxLDhDMjIsOEMyMyw4QzI0LDhDMjUsOEMyNiw4QzI3LDhDMjgsOEMyOSw4QzJBLDhDMkIsOEMyQyw4QzJELDhDMkUsOEMyRiw4QzMwLDhDMzEsOEMzMiw4QzMzLDhDMzQsOEMzNSw4QzM2LDhDMzcsOEM0MSw4QzQ2LDhDNDcsOEM0OSw4QzRDLDhDNTUsOEM1QSw4QzYxLDhDNjIsOEM2QSw4QzZCLDhDNzMsOEM3OCw4Qzc5LDhDN0EsOEM4Miw4Qzg1LDhDODksOEM4QSw4QzhDLDhDOTQsOEM5OCw4RDFELDhEMUUsOEQxRiw4RDIxLDhEMjIsOEQyMyw4RDI0LDhEMjUsOEQyNiw4RDI3LDhEMjgsOEQyOSw4RDJBLDhEMkIsOEQyQyw4RDJELDhEMkUsOEQyRiw4RDMwLDhEMzEsOEQzMiw4RDMzLDhEMzQsOEQzNSw4RDM2LDhEMzcsOEQzOCw4RDM5LDhEM0EsOEQzQiw4RDNDLDhEM0QsOEQzRSw4RDNGLDhENDAsOEQ0MSw4RDQyLDhENDMsOEQ0NCw4RDQ1LDhENDYsOEQ0Nyw4RDQ4LDhENDksOEQ0QSw4RDRCLDhENEMsOEQ0RCw4RDRFLDhENEYsOEQ1MCw4RDUzLDhENTQsOEQ1NSw4RDU2LDhENTgsOEQ1OSw4RDVBLDhENUIsOEQ1Qyw4RDVELDhENUUsOEQ2MCw4RDYxLDhENjIsOEQ2Myw4RDY0LDhENjYsOEQ2Nyw4RDZCLDhENkQsOEQ3MCw4RDczLDhENzQsOEQ3NSw4RDc2LDhENzcsOEQ4MSw4RDg0LDhEODUsOEQ4QSw4RDhCLDhEOTEsOEQ5NCw4RDlGLDhEQTMsOERCMSw4REIzLDhEQjQsOERCNSw4REI4LDhEQkEsOERCQyw4REJFLDhEQkYsOERDMyw4REM0LDhEQzYsOERDQiw4RENDLDhEQ0UsOERDRiw4REQxLDhERDYsOERENyw4RERBLDhEREIsOERERCw4RERFLDhEREYsOERFMyw4REU0LDhERTgsOERFQSw4REVCLDhERUMsOERFRiw4REYzLDhERjUsOERGNyw4REY4LDhERjksOERGQSw4REZCLDhERkQsOEUwNSw4RTA5LDhFMEEsOEUwQyw4RTBGLDhFMTQsOEUxRCw4RTFFLDhFMUYsOEUyMiw4RTIzLDhFMjksOEUyQSw4RTJDLDhFMkUsOEUyRiw4RTMxLDhFMzUsOEUzOSw4RTNBLDhFM0QsOEU0MCw4RTQxLDhFNDIsOEU0NCw4RTQ3LDhFNDgsOEU0OSw4RTRBLDhFNEIsOEU1MSw4RTUyLDhFNTksOEU2Niw4RTY5LDhFNkMsOEU2RCw4RTZGLDhFNzAsOEU3Miw4RTc0LDhFNzYsOEU3Qyw4RTdGLDhFODEsOEU4NSw4RTg3LDhFOEYsOEU5MCw4RTk0LDhFOUMsOEU5RSw4RUFCLDhFQUMsOEVBRiw4RUIyLDhFQkEsOEVDRSw4RjY2LDhGNjcsOEY2OCw4RjY5LDhGNkIsOEY2Qyw4RjZELDhGNkUsOEY2Riw4RjcwLDhGNzEsOEY3Miw4RjczLDhGNzQsOEY3NSw4Rjc2LDhGNzcsOEY3OCw4Rjc5LDhGN0EsOEY3Qiw4RjdDLDhGN0QsOEY3RSw4RjdGLDhGODEsOEY4Miw4RjgzLDhGODQsOEY4NSw4Rjg2LDhGODcsOEY4OCw4Rjg5LDhGOEEsOEY4Qiw4RjhELDhGOEUsOEY4Riw4RjkwLDhGOTEsOEY5Myw4Rjk0LDhGOTUsOEY5Niw4Rjk3LDhGOTgsOEY5OSw4RjlBLDhGOUIsOEY5Qyw4RjlFLDhGOUYsOEZBMyw4RkE4LDhGQTksOEZBQiw4RkIwLDhGQjEsOEZCNiw4RkI5LDhGQkQsOEZCRSw4RkMxLDhGQzIsOEZDNCw4RkM1LDhGQzcsOEZDOCw4RkNFLDhGRDAsOEZEMSw4RkQzLDhGRDQsOEZENSw4RkQ4LDhGRDksOEZEQiw4RkRDLDhGREQsOEZERSw4RkRGLDhGRTIsOEZFNCw4RkU1LDhGRTYsOEZFOCw4RkU5LDhGRUEsOEZFQiw4RkVELDhGRUUsOEZGMCw4RkYzLDhGRjcsOEZGOCw4RkY5LDhGRkQsOTAwMCw5MDAxLDkwMDIsOTAwMyw5MDA0LDkwMDUsOTAwNiw5MDA5LDkwMEEsOTAwQiw5MDBELDkwMEYsOTAxMCw5MDExLDkwMTIsOTAxNCw5MDE2LDkwMTcsOTAxQSw5MDFCLDkwMUQsOTAxRSw5MDFGLDkwMjAsOTAyMSw5MDIyLDkwMjYsOTAyRCw5MDJFLDkwMkYsOTAzNSw5MDM2LDkwMzgsOTAzQiw5MDNDLDkwM0UsOTA0MSw5MDQyLDkwNDQsOTA0Nyw5MDRELDkwNEYsOTA1MCw5MDUxLDkwNTIsOTA1Myw5MDU3LDkwNTgsOTA1Qiw5MDYyLDkwNjMsOTA2NSw5MDY4LDkwNkQsOTA2RSw5MDc0LDkwNzUsOTA3RCw5MDdGLDkwODAsOTA4Miw5MDgzLDkwODgsOTA4Qiw5MDkxLDkwOTMsOTA5NSw5MDk3LDkwOTksOTA5Qiw5MDlELDkwQTEsOTBBMiw5MEEzLDkwQTYsOTBBQSw5MEFDLDkwQUUsOTBBRiw5MEIwLDkwQjEsOTBCMyw5MEI0LDkwQjUsOTBCNiw5MEI4LDkwQjksOTBCQSw5MEJCLDkwQkUsOTBDMSw5MEM0LDkwQzUsOTBDNyw5MENBLDkwQ0UsOTBDRiw5MEQwLDkwRDEsOTBEMyw5MEQ3LDkwREIsOTBEQyw5MERELDkwRTEsOTBFMiw5MEU2LDkwRTcsOTBFOCw5MEVCLDkwRUQsOTBFRiw5MEY0LDkwRjgsOTBGRCw5MEZFLDkxMDIsOTEwNCw5MTE5LDkxMUUsOTEyMiw5MTIzLDkxMkYsOTEzMSw5MTM5LDkxNDMsOTE0Niw5MTQ5LDkxNEEsOTE0Qiw5MTRDLDkxNEQsOTE0RSw5MTRGLDkxNTAsOTE1Miw5MTU3LDkxNUEsOTE1RCw5MTVFLDkxNjEsOTE2Miw5MTYzLDkxNjQsOTE2NSw5MTY5LDkxNkEsOTE2Qyw5MTZFLDkxNkYsOTE3MCw5MTcxLDkxNzIsOTE3NCw5MTc1LDkxNzYsOTE3Nyw5MTc4LDkxNzksOTE3RCw5MTdFLDkxN0YsOTE4NSw5MTg3LDkxODksOTE4Qiw5MThDLDkxOEQsOTE5MCw5MTkxLDkxOTIsOTE5QSw5MTlCLDkxQTIsOTFBMyw5MUFBLDkxQUQsOTFBRSw5MUFGLDkxQjQsOTFCNSw5MUJBLDkxQzcsOTFDOSw5MUNBLDkxQ0MsOTFDRCw5MUNFLDkxQ0YsOTFEMSw5MURDLDkyNzQsOTI4RSw5MkFFLDkyQzgsOTMzRSw5MzZBLDkzOEYsOTNDQSw5M0Q2LDk0M0UsOTQ2Qiw5NDg1LDk0ODYsOTQ4Nyw5NDg4LDk0ODksOTQ4QSw5NDhCLDk0OEMsOTQ4RCw5NDhFLDk0OEYsOTQ5MCw5NDkyLDk0OTMsOTQ5NCw5NDk1LDk0OTcsOTQ5OSw5NDlBLDk0OUIsOTQ5Qyw5NDlELDk0OUUsOTQ5Riw5NEEwLDk0QTEsOTRBMiw5NEEzLDk0QTQsOTRBNSw5NEE2LDk0QTcsOTRBOCw5NEE5LDk0QUEsOTRBQiw5NEFDLDk0QUQsOTRBRSw5NEFGLDk0QjAsOTRCMSw5NEIyLDk0QjMsOTRCNCw5NEI1LDk0QjYsOTRCNyw5NEI4LDk0QjksOTRCQSw5NEJCLDk0QkMsOTRCRCw5NEJFLDk0QkYsOTRDMCw5NEMxLDk0QzIsOTRDMyw5NEM0LDk0QzUsOTRDNiw5NEM4LDk0QzksOTRDQSw5NENCLDk0Q0MsOTRDRCw5NENFLDk0RDAsOTREMSw5NEQyLDk0RDUsOTRENiw5NEQ3LDk0RDgsOTREOSw5NERCLDk0REMsOTRERCw5NERFLDk0REYsOTRFMCw5NEUxLDk0RTIsOTRFMyw5NEU0LDk0RTUsOTRFNyw5NEU4LDk0RTksOTRFQSw5NEVCLDk0RUMsOTRFRCw5NEVFLDk0RUYsOTRGMCw5NEYxLDk0RjIsOTRGMyw5NEY0LDk0RjUsOTRGNiw5NEY3LDk0RjgsOTRGOSw5NEZBLDk0RkMsOTRGRCw5NEZFLDk0RkYsOTUwMCw5NTAxLDk1MDIsOTUwMyw5NTA0LDk1MDUsOTUwNiw5NTA3LDk1MDgsOTUwOSw5NTBBLDk1MEIsOTUwQyw5NTBELDk1MEUsOTUwRiw5NTEwLDk1MTEsOTUxMiw5NTEzLDk1MTQsOTUxNSw5NTE2LDk1MTcsOTUxOCw5NTE5LDk1MUEsOTUxQiw5NTFELDk1MUUsOTUxRiw5NTIxLDk1MjIsOTUyMyw5NTI0LDk1MjUsOTUyNiw5NTI4LDk1MjksOTUyQSw5NTJCLDk1MkMsOTUyRCw5NTJFLDk1MkYsOTUzMCw5NTMxLDk1MzIsOTUzNCw5NTM1LDk1MzYsOTUzNyw5NTM4LDk1MzksOTUzQSw5NTNCLDk1M0MsOTUzRSw5NTNGLDk1NDAsOTU0MSw5NTQyLDk1NDQsOTU0NSw5NTQ2LDk1NDcsOTU0OSw5NTRBLDk1NEMsOTU0RCw5NTRFLDk1NEYsOTU1MCw5NTUxLDk1NTIsOTU1Myw5NTU0LDk1NTYsOTU1Nyw5NTU4LDk1NTksOTU1Qiw5NTVDLDk1NUQsOTU1RSw5NTVGLDk1NjEsOTU2Miw5NTYzLDk1NjQsOTU2NSw5NTY2LDk1NjcsOTU2OCw5NTY5LDk1NkEsOTU2Qiw5NTZDLDk1NkQsOTU2Riw5NTcwLDk1NzEsOTU3Miw5NTczLDk1NzYsOTU3Riw5NUU4LDk1RTksOTVFQSw5NUVCLDk1RUQsOTVFRSw5NUVGLDk1RjAsOTVGMSw5NUYyLDk1RjMsOTVGNCw5NUY1LDk1RjYsOTVGNyw5NUY4LDk1RjksOTVGQSw5NUZCLDk1RkMsOTVGRCw5NUZFLDk2MDAsOTYwMSw5NjAyLDk2MDMsOTYwNCw5NjA1LDk2MDYsOTYwOCw5NjA5LDk2MEEsOTYwQiw5NjBDLDk2MEQsOTYwRSw5NjBGLDk2MTAsOTYxMSw5NjEyLDk2MTQsOTYxNSw5NjE2LDk2MTcsOTYxOSw5NjFBLDk2MUMsOTYxRCw5NjFGLDk2MjEsOTYyMiw5NjJBLDk2MkUsOTYzMSw5NjMyLDk2MzMsOTYzNCw5NjM1LDk2MzYsOTYzQiw5NjNDLDk2M0QsOTYzRiw5NjQwLDk2NDIsOTY0NCw5NjQ1LDk2NDYsOTY0Nyw5NjQ4LDk2NDksOTY0Qiw5NjRDLDk2NEQsOTY1MCw5NjU0LDk2NTUsOTY1Qiw5NjVGLDk2NjEsOTY2Miw5NjY0LDk2NjcsOTY2OCw5NjY5LDk2NkEsOTY2Qyw5NjcyLDk2NzQsOTY3NSw5Njc2LDk2NzcsOTY4NSw5Njg2LDk2ODgsOTY4Qiw5NjhELDk2OEYsOTY5MCw5Njk0LDk2OTcsOTY5OCw5Njk5LDk2OUMsOTZBNyw5NkIwLDk2QjMsOTZCNiw5NkI5LDk2QkMsOTZCRCw5NkJFLDk2QzAsOTZDMSw5NkM0LDk2QzUsOTZDNiw5NkM3LDk2QzksOTZDQyw5NkNELDk2Q0UsOTZDRiw5NkQyLDk2RDUsOTZFMCw5NkU4LDk2RTksOTZFQSw5NkVGLDk2RjMsOTZGNiw5NkY3LDk2RjksOTZGRSw5NzAwLDk3MDEsOTcwNCw5NzA2LDk3MDcsOTcwOCw5NzA5LDk3MEQsOTcwRSw5NzBGLDk3MTMsOTcxNiw5NzFDLDk3MUUsOTcyQSw5NzJELDk3MzAsOTczMiw5NzM4LDk3MzksOTczRSw5NzUyLDk3NTMsOTc1Niw5NzU5LDk3NUIsOTc1RSw5NzYwLDk3NjEsOTc2Miw5NzY1LDk3NjksOTc3Myw5Nzc0LDk3NzYsOTc3Qyw5Nzg1LDk3OEIsOTc4RCw5NzkxLDk3OTIsOTc5NCw5Nzk4LDk3QTAsOTdBMyw5N0FCLDk3QUQsOTdBRiw5N0IyLDk3QjQsOTdFNiw5N0U3LDk3RTksOTdFQSw5N0VCLDk3RUMsOTdFRCw5N0YzLDk3RjUsOTdGNiw5ODc1LDk4NzYsOTg3Nyw5ODc4LDk4NzksOTg3QSw5ODdCLDk4N0MsOTg3RCw5ODdFLDk4N0YsOTg4MCw5ODgxLDk4ODIsOTg4Myw5ODg0LDk4ODUsOTg4Niw5ODg3LDk4ODgsOTg4OSw5ODhBLDk4OEMsOTg4RCw5ODhGLDk4OTAsOTg5MSw5ODkzLDk4OTQsOTg5Niw5ODk3LDk4OTgsOTg5QSw5ODlCLDk4OUMsOTg5RCw5ODlFLDk4OUYsOThBMCw5OEExLDk4QTIsOThBNCw5OEE1LDk4QTYsOThBNyw5OENFLDk4RDEsOThEMiw5OEQzLDk4RDUsOThEOCw5OEQ5LDk4REEsOThERSw5OERGLDk4RTcsOThFOCw5OTBELDk5MTAsOTkyRSw5OTU0LDk5NTUsOTk2Myw5OTY1LDk5NjcsOTk2OCw5OTY5LDk5NkEsOTk2Qiw5OTZDLDk5NkQsOTk2RSw5OTZGLDk5NzAsOTk3MSw5OTcyLDk5NzQsOTk3NSw5OTc2LDk5NzcsOTk3QSw5OTdDLDk5N0QsOTk3Riw5OTgwLDk5ODEsOTk4NCw5OTg1LDk5ODYsOTk4Nyw5OTg4LDk5OEEsOTk4Qiw5OThELDk5OEYsOTk5MCw5OTkxLDk5OTIsOTk5Myw5OTk0LDk5OTUsOTk5Niw5OTk3LDk5OTgsOTk5OSw5OUE1LDk5QTgsOUE2Qyw5QTZELDlBNkUsOUE2Riw5QTcwLDlBNzEsOUE3Myw5QTc0LDlBNzUsOUE3Niw5QTc3LDlBNzgsOUE3OSw5QTdBLDlBN0IsOUE3Qyw5QTdELDlBN0UsOUE3Riw5QTgwLDlBODEsOUE4Miw5QTg0LDlBODUsOUE4Niw5QTg3LDlBODgsOUE4QSw5QThCLDlBOEMsOUE4Riw5QTkwLDlBOTEsOUE5Miw5QTkzLDlBOTYsOUE5Nyw5QTk4LDlBOUEsOUE5Qiw5QTlDLDlBOUQsOUE5RSw5QTlGLDlBQTAsOUFBMSw5QUEyLDlBQTMsOUFBNCw5QUE1LDlBQTcsOUFBOCw5QUIwLDlBQjEsOUFCNiw5QUI3LDlBQjgsOUFCQSw5QUJDLDlBQzAsOUFDMSw5QUMyLDlBQzUsOUFDQiw5QUNDLDlBRDEsOUFEMyw5QUQ4LDlBREYsOUFFMSw5QUU2LDlBRUIsOUFFRCw5QUVGLDlBRjksOUFGQiw5QjAzLDlCMDgsOUIwRiw5QjEzLDlCMUYsOUIyMyw5QjJGLDlCMzIsOUIzQiw5QjNDLDlCNDEsOUI0Miw5QjQzLDlCNDQsOUI0NSw5QjQ3LDlCNDgsOUI0OSw5QjRELDlCNEYsOUI1MSw5QjU0LDlDN0MsOUM3Riw5QzgxLDlDODIsOUM4NSw5Qzg2LDlDODcsOUM4OCw5QzhCLDlDOEQsOUM4RSw5QzkwLDlDOTEsOUM5Miw5Qzk0LDlDOTUsOUM5QSw5QzlCLDlDOUMsOUM5RSw5QzlGLDlDQTAsOUNBMSw5Q0EyLDlDQTMsOUNBNCw5Q0E1LDlDQTYsOUNBNyw5Q0E4LDlDQTksOUNBQiw5Q0FELDlDQUUsOUNCMCw5Q0IxLDlDQjIsOUNCMyw5Q0I0LDlDQjUsOUNCNiw5Q0I3LDlDQjgsOUNCQSw5Q0JCLDlDQkMsOUNCRCw5Q0MzLDlDQzQsOUNDNSw5Q0M2LDlDQzcsOUNDQSw5Q0NCLDlDQ0MsOUNDRCw5Q0NFLDlDQ0YsOUNEMCw5Q0QzLDlDRDQsOUNENSw5Q0Q2LDlDRDcsOUNEOCw5Q0Q5LDlDREMsOUNERCw5Q0RFLDlDREYsOUNFMiw5RTFGLDlFMjAsOUUyMSw5RTIyLDlFMjMsOUUyNSw5RTI2LDlFMjgsOUUyOSw5RTJBLDlFMkIsOUUyQyw5RTJELDlFMkYsOUUzMSw5RTMyLDlFMzMsOUUzNSw5RTM2LDlFMzcsOUUzOCw5RTM5LDlFM0EsOUUzRCw5RTNFLDlFM0YsOUU0MSw5RTQyLDlFNDMsOUU0NCw5RTQ1LDlFNDYsOUU0Nyw5RTQ4LDlFNDksOUU0QSw5RTRCLDlFNEMsOUU0RSw5RTRGLDlFNTEsOUU1NSw5RTU3LDlFNTgsOUU1QSw5RTVCLDlFNUMsOUU1RSw5RTYzLDlFNjQsOUU2Niw5RTY3LDlFNjgsOUU2OSw5RTZBLDlFNkIsOUU2Qyw5RTZELDlFNzAsOUU3MSw5RTczLDlFN0UsOUU3Riw5RTgyLDlFODcsOUU4OCw5RThCLDlFOTIsOUU5Myw5RTlELDlFOUYsOUVBNiw5RUI0LDlFQjgsOUVCQiw5RUJELDlFQkUsOUVDNCw5RUM5LDlFQ0QsOUVDRSw5RUNGLDlFRDEsOUVENCw5RUQ4LDlFREIsOUVEQyw5RURELDlFREYsOUVFMCw5RUUyLDlFRTUsOUVFNyw5RUU5LDlFRUEsOUVFRiw5RUY5LDlFRkIsOUVGQyw5RUZFLDlGMEIsOUYwRCw5RjBFLDlGMTAsOUYxMyw5RjE3LDlGMTksOUYyMCw5RjIyLDlGMkMsOUYyRiw5RjM3LDlGMzksOUYzQiw5RjNELDlGM0UsOUY0NCw5RjUwLDlGNTEsOUY3Riw5RjgwLDlGODMsOUY4NCw5Rjg1LDlGODYsOUY4Nyw5Rjg4LDlGODksOUY4QSw5RjhCLDlGOEMsOUY5OSw5RjlBLDlGOUIsOUY5Riw5RkEwLEZGMDEsRkYwMixGRjAzLEZGMDQsRkYwNSxGRjA2LEZGMDcsRkYwOCxGRjA5LEZGMEEsRkYwQixGRjBDLEZGMEQsRkYwRSxGRjBGLEZGMTAsRkYxMSxGRjEyLEZGMTMsRkYxNCxGRjE1LEZGMTYsRkYxNyxGRjE4LEZGMTksRkYxQSxGRjFCLEZGMUMsRkYxRCxGRjFFLEZGMUYsRkYyMCxGRjIxLEZGMjIsRkYyMyxGRjI0LEZGMjUsRkYyNixGRjI3LEZGMjgsRkYyOSxGRjJBLEZGMkIsRkYyQyxGRjJELEZGMkUsRkYyRixGRjMwLEZGMzEsRkYzMixGRjMzLEZGMzQsRkYzNSxGRjM2LEZGMzcsRkYzOCxGRjM5LEZGM0EsRkYzQixGRjNDLEZGM0QsRkYzRSxGRjNGLEZGNDAsRkY0MSxGRjQyLEZGNDMsRkY0NCxGRjQ1LEZGNDYsRkY0NyxGRjQ4LEZGNDksRkY0QSxGRjRCLEZGNEMsRkY0RCxGRjRFLEZGNEYsRkY1MCxGRjUxLEZGNTIsRkY1MyxGRjU0LEZGNTUsRkY1NixGRjU3LEZGNTgsRkY1OSxGRjVBLEZGNUIsRkY1QyxGRjVELEZGNUUsRkZFMCxGRkUxLEZGRTMsRkZFNSc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBBbnNpVG9Vbmljb2RlKGNockNvZGUpIHsKICAgICAgICAgICAgdmFyIGNockhleCA9IGNockNvZGUudG9TdHJpbmcoMTYpOwogICAgICAgICAgICBjaHJIZXggPSAiMDAwIiArIGNockhleC50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICBjaHJIZXggPSBjaHJIZXguc3Vic3RyKGNockhleC5sZW5ndGggLSA0KTsKICAgICAgICAgICAgdmFyIGkgPSBBbnNpY29kZUNocigpLmluZGV4T2YoY2hySGV4KTsKICAgICAgICAgICAgaWYgKGkgIT0gLTEpIHsKICAgICAgICAgICAgICAgIGNockhleCA9IFVuaWNvZGVDaHIoKS5zdWJzdHIoaSwgNCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGNockhleCwgMTYpCiAgICAgICAgfQoKCiAgICAgICAgZnVuY3Rpb24gc3RyQW5zaTJVbmljb2RlKGFzQ29udGVudHMpIHsKICAgICAgICAgICAgdmFyIGxlbjEgPSBhc0NvbnRlbnRzLmxlbmd0aDsKICAgICAgICAgICAgdmFyIHRlbXAgPSAiIjsKICAgICAgICAgICAgdmFyIGNocmNvZGU7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuMTsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFyYXNjID0gYXNDb250ZW50cy5jaGFyQ29kZUF0KGkpOwogICAgICAgICAgICAgICAgaWYgKHZhcmFzYyA+IDEyNykgewogICAgICAgICAgICAgICAgICAgIGNocmNvZGUgPSBBbnNpVG9Vbmljb2RlKCh2YXJhc2MgPDwgOCkgKyBhc0NvbnRlbnRzLmNoYXJDb2RlQXQoKytpKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNocmNvZGUgPSB2YXJhc2M7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZW1wICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyY29kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRlbXA7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc0NsZWFuU3RyKHMpewogICAgICAgICAgICB2YXIgc3RyID0gZGVjb2RlVVJJKHMpOwogICAgICAgICAgICB2YXIgcGF0cm4gPSAvXihbXHU0RTAwLVx1OUZBNV18W1x1RkUzMC1cdUZGQTBdfFtBLVphLXowLTlcK1wvXD1cX1wtXC5c44CQXOOAkVxbXF1cOlx8XCFcflwjXCRcJVxeXCZcKlwoXClcK1w/XDxcPlzjgIpc44CLXEBcYF0pKyQvZ2k7CiAgICAgICAgICAgIHJldHVybihwYXRybi50ZXN0KHN0cikpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYmFzZTY0ZGVjb2RlKGEpIHsKICAgICAgICAgICAgdmFyIGIsIGMsIGQsIGUsIGYsIGcsIGg7CiAgICAgICAgICAgIGZvciAoZyA9IGEubGVuZ3RoLCBmID0gMCwgaCA9ICIiOyBnID4gZjspIHsKICAgICAgICAgICAgICAgIGRvIGIgPSBiYXNlNjREZWNvZGVDaGFyc1syNTUgJiBhLmNoYXJDb2RlQXQoZisrKV07IHdoaWxlIChnID4gZiAmJiAtMSA9PSBiKTsKICAgICAgICAgICAgICAgIGlmICgtMSA9PSBiKSBicmVhazsKICAgICAgICAgICAgICAgIGRvIGMgPSBiYXNlNjREZWNvZGVDaGFyc1syNTUgJiBhLmNoYXJDb2RlQXQoZisrKV07IHdoaWxlIChnID4gZiAmJiAtMSA9PSBjKTsKICAgICAgICAgICAgICAgIGlmICgtMSA9PSBjKSBicmVhazsKICAgICAgICAgICAgICAgIGggKz0gU3RyaW5nLmZyb21DaGFyQ29kZShiIDw8IDIgfCAoNDggJiBjKSA+PiA0KTsKICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZCA9IDI1NSAmIGEuY2hhckNvZGVBdChmKyspLCA2MSA9PSBkKSByZXR1cm4gaDsKICAgICAgICAgICAgICAgICAgICBkID0gYmFzZTY0RGVjb2RlQ2hhcnNbZF0KICAgICAgICAgICAgICAgIH0gd2hpbGUgKGcgPiBmICYmIC0xID09IGQpOwogICAgICAgICAgICAgICAgaWYgKC0xID09IGQpIGJyZWFrOwogICAgICAgICAgICAgICAgaCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgxNSAmIGMpIDw8IDQgfCAoNjAgJiBkKSA+PiAyKTsKICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZSA9IDI1NSAmIGEuY2hhckNvZGVBdChmKyspLCA2MSA9PSBlKSByZXR1cm4gaDsKICAgICAgICAgICAgICAgICAgICBlID0gYmFzZTY0RGVjb2RlQ2hhcnNbZV0KICAgICAgICAgICAgICAgIH0gd2hpbGUgKGcgPiBmICYmIC0xID09IGUpOwogICAgICAgICAgICAgICAgaWYgKC0xID09IGUpIGJyZWFrOwogICAgICAgICAgICAgICAgaCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgzICYgZCkgPDwgNiB8IGUpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGgKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHV0Zjh0bzE2KGEpIHsKICAgICAgICAgICAgdmFyIGIsIGMsIGQsIGUsIGYsIGc7CiAgICAgICAgICAgIGZvciAoYiA9ICIiLCBkID0gYS5sZW5ndGgsIGMgPSAwOyBkID4gYzspIHN3aXRjaCAoZSA9IGEuY2hhckNvZGVBdChjKyspLCBlID4+IDQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICBiICs9IGEuY2hhckF0KGMgLSAxKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgIGYgPSBhLmNoYXJDb2RlQXQoYysrKSwgYiArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgzMSAmIGUpIDw8IDYgfCA2MyAmIGYpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgICBmID0gYS5jaGFyQ29kZUF0KGMrKyksIGcgPSBhLmNoYXJDb2RlQXQoYysrKSwgYiArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgxNSAmIGUpIDw8IDEyIHwgKDYzICYgZikgPDwgNiB8ICg2MyAmIGcpIDw8IDApCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGIKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRlY29kZTY0KGlucHV0KSB7CiAgICAgICAgICAgIHZhciBrZXlTdHIgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0iOwogICAgICAgICAgICB2YXIgb3V0cHV0ID0gIiI7CiAgICAgICAgICAgIHZhciBjaHIxLCBjaHIyLCBjaHIzID0gIiI7CiAgICAgICAgICAgIHZhciBlbmMxLCBlbmMyLCBlbmMzLCBlbmM0ID0gIiI7CiAgICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCAlIDQgIT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBiYXNlNjR0ZXN0ID0gL1teQS1aYS16MC05XCtcL1w9XS9nOwogICAgICAgICAgICBpZiAoYmFzZTY0dGVzdC5leGVjKGlucHV0KSkgewogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICB9CgogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICBlbmMxID0ga2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpOwogICAgICAgICAgICAgICAgZW5jMiA9IGtleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTsKICAgICAgICAgICAgICAgIGVuYzMgPSBrZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7CiAgICAgICAgICAgICAgICBlbmM0ID0ga2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpOwoKICAgICAgICAgICAgICAgIGNocjEgPSAoZW5jMSA8PCAyKSB8IChlbmMyID4+IDQpOwogICAgICAgICAgICAgICAgY2hyMiA9ICgoZW5jMiAmIDE1KSA8PCA0KSB8IChlbmMzID4+IDIpOwogICAgICAgICAgICAgICAgY2hyMyA9ICgoZW5jMyAmIDMpIDw8IDYpIHwgZW5jNDsKICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyMSk7CiAgICAgICAgICAgICAgICBpZiAoZW5jMyAhPSA2NCkgewogICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGVuYzQgIT0gNjQpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaHIzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjaHIxID0gY2hyMiA9IGNocjMgPSAiIjsKICAgICAgICAgICAgICAgIGVuYzEgPSBlbmMyID0gZW5jMyA9IGVuYzQgPSAiIjsKCiAgICAgICAgICAgIH0gd2hpbGUgKGkgPCBpbnB1dC5sZW5ndGgpOwogICAgICAgICAgICByZXR1cm4gb3V0cHV0OwogICAgICAgIH0KICAgIH0KICAgIGlmICghd2luZG93LmNocm9tZSkgewogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgWXUsIGZhbHNlKTsKICAgIH0gZWxzZSB7CiAgICAgICAgWXUoKTsKICAgIH0KfSkoKTsKCi8vQUREIEJvb2ttYXJrOmphdmFzY3JpcHQ6KGZ1bmN0aW9uKCl7IHZhciBsaW5rPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJyk7Zm9yICh2YXIgaT0wLGs9bGluay5sZW5ndGg7IGk8azsgaSsrKXtpZigvXHcraHJlZj0vaS50ZXN0KGxpbmtbaV0ub3V0ZXJIVE1MKSl7bGlua1tpXS5ocmVmPWxpbmtbaV0uZ2V0QXR0cmlidXRlKGxpbmtbaV0ub3V0ZXJIVE1MLm1hdGNoKC9cdytocmVmPS9pKS50b1N0cmluZygpLnJlcGxhY2UoLz0vLCcnKSk7bGlua1tpXS5yZW1vdmVBdHRyaWJ1dGUoIm9uY2xpY2siKTt9ZWxzZSBpZigvXHcraHJlZi9pLnRlc3QobGlua1tpXS5vdXRlckhUTUwpKXtsaW5rW2ldLm9uY29udGV4dG1lbnUoKTtsaW5rW2ldLnJlbW92ZUF0dHJpYnV0ZSgib25jbGljayIpO319IHZvaWQoJ1l1bGVpJyk7fSkoKTsKCi8qIO+8iOaUr+aMge+8mk9wZXJhMTLvvJvlj4rmiYDmnInmtY/op4jlmajvvIzlpoJGaXJlZm9444CBQ2hyb21lc+OAgUlF44CBU2FmYXJp77yJCiAqICDop6PnoIHkuIvovb3lnLDlnYDvvIzlubbmmL7npLrnnJ/lrp7nmoTkuIvovb3lnLDlnYDvvIzlm57mmL7ljp8o5YidKeWni+mTvuaOpe+8jOWmgui/hembt+OAgeW/q+i9puOAgVFR5peL6aOO55qE5Yqg5a+G5LiL6L295Zyw5Z2ACiAqICDmnKzohJrmnKzlj6rkvZzlrabkuaDnoJTnqbblj4LogIPnlKjvvIzniYjmnYPmiYDmnIkg5LiN5b6X5rul55So44CB5ZWG55So44CB5a6D55So77yM5ZCO5p6c6Ieq6LSfCiAqLw=="},{"name":"Popup Blocker Script","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["https://*/*","http://*/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"dprm":"n1530108003611","sdc_data":"s{\"uid\":null,\"pid\":\"2cc483d58f9eca27b863a16b4f668d\",\"lastFocusedUrl\":null,\"q\":\"https://wx2.qq.com/\",\"hreferer\":\"https://wx2.qq.com/\",\"_active\":\"https://wx2.qq.com/\",\"prev\":\"https://greasyfork.org/zh-CN/scripts\"}"},"ts":1530109317181},"enabled":true,"position":4,"file_url":"https://greasyfork.org/scripts/37654-popup-blocker-script/code/Popup%20Blocker%20Script.user.js","uuid":"23146926-2e66-4303-bb6e-9fab0e9e2892","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBQb3B1cCBCbG9ja2VyIFNjcmlwdAovLyBAbmFtZTp6aC1DTiAgIOW8ueeql+mYu+atoueoi+W6j+iEmuacrAovLyBAbmFtZXNwYWNlICAgIGh0dHBzOi8vcG9wdXBibG9ja2Vyc2NyaXB0LmNvbS8KLy8gQHZlcnNpb24gICAgICAwLjIKLy8gQGRlc2NyaXB0aW9uICBUaGUgbW9zdCBlZmZpY2llbnQgdXNlciBzY3JpcHQgZm9yIGJsb2NraW5nIHBvcHVwcyBvZiBhbGwgdHlwZXMuIERlc2lnbmVkIHRvIGZpZ2h0IHRoZSBzbmVha2llc3QgcG9wdXBzIGluY2x1ZGluZyB0aGUgb25lcyBvbiBhZHVsdCBhbmQgc3RyZWFtaW5nIHdlYnNpdGVzLgovLyBAZGVzY3JpcHRpb246emgtQ04g55So5LqO6Zi75q2i5omA5pyJ57G75Z6L5by556qX55qE5pyA5pyJ5pWI55So5oi36ISa5pys44CC5Li66Ziy6IyD5pyA54uh54y+55qE5by556qX6ICM6K6+6K6h77yM5YyF5ous5oiQ5Lq65ZKM5rWB5aqS5L2T572R56uZ5LiK55qE5by556qX44CCCi8vIEBhdXRob3IgICAgICAgTWlrZSBLeXNoZW5rbwovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vKi8qCi8vIEBtYXRjaCAgICAgICAgaHR0cDovLyovKgovLyBAZ3JhbnQgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgR01fZGVsZXRlVmFsdWUKLy8gQGdyYW50IEdNX3NldFZhbHVlCi8vIEBncmFudCBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgR01fZ2V0UmVzb3VyY2VVUkwKLy8gQGdyYW50IEdNX2dldFJlc291cmNlVGV4dAovLyBAZ3JhbnQgR01fYWRkU3R5bGUKLy8gQGdyYW50IEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBjb25uZWN0ICAgICByZS5wb3B1cGJsb2NrZXJzY3JpcHQuY29tCi8vIEBjb25uZWN0ICAgICBzZWxmCi8vIEBjb25uZWN0ICAgICAqCi8vIEByZXF1aXJlIGh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzMuMi4xL2pxdWVyeS5taW4uanMKLy8gPT0vVXNlclNjcmlwdD09CmNvbnN0IExBTkcgPSB7CiAgICBFTjogewogICAgICAgICJub3RpZmljYXRpb25NZXNzYWdlIjogewogICAgICAgICAgICAibWVzc2FnZSI6ICJQb3B1cCBCbG9ja2VkIgogICAgICAgIH0sCiAgICAgICAgIm92ZXJsYXlXYXNCbG9ja2VkIjogewogICAgICAgICAgICAibWVzc2FnZSI6ICJPdmVybGF5IEJsb2NrZWQiCiAgICAgICAgfSwKICAgICAgICAiYWxsb3dPbmNlIjogewogICAgICAgICAgICAibWVzc2FnZSI6ICJTaG93IHBvcHVwIG9uY2UiCiAgICAgICAgfSwKICAgICAgICAiYWxsb3dBbHdheXMiOiB7CiAgICAgICAgICAgICJtZXNzYWdlIjogIldoaXRlbGlzdCB0aGlzIHNpdGUiCiAgICAgICAgfSwKICAgICAgICAiTlRGX2FsbG93T3ZlcmxheU9uY2UiOiB7CiAgICAgICAgICAgICJtZXNzYWdlIjogIkFsbG93IG92ZXJsYXkgb25jZSIKICAgICAgICB9CiAgICB9LAogIAogICAgIkNOIjp7CiAgICAgICAgIm5vdGlmaWNhdGlvbk1lc3NhZ2UiOiB7CiAgICAgICAgICAgICJtZXNzYWdlIjogIuW8ueeql+iiq+mYu+atoiIKICAgICAgICB9LAogICAgICAgICJvdmVybGF5V2FzQmxvY2tlZCI6IHsKICAgICAgICAgICAgIm1lc3NhZ2UiOiAi5Y+g5Yqg5by556qX6KKr6Zi75q2iIgogICAgICAgIH0sCiAgICAgICAgImFsbG93T25jZSI6IHsKICAgICAgICAgICAgIm1lc3NhZ2UiOiAi5pi+56S65LiA5qyh5by556qXIgogICAgICAgIH0sCiAgICAgICAgImFsbG93QWx3YXlzIjogewogICAgICAgICAgICAibWVzc2FnZSI6ICLlhYHorrjmraTnvZHnq5nkuIrnmoTlvLnnqpciCiAgICAgICAgfSwKICAgICAgICAiTlRGX2FsbG93T3ZlcmxheU9uY2UiOiB7CiAgICAgICAgICAgICJtZXNzYWdlIjogIuaYvuekuuS4gOasoeW8ueeqlyIKICAgICAgICB9CiAgICB9CiAgfTsKICAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwCi8qKioqKiovIAkvLyBUaGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAl2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9OwoKLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7CgovKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKQovKioqKioqLyAJCQlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsKCi8qKioqKiovIAkJLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSkKLyoqKioqKi8gCQl2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7Ci8qKioqKiovIAkJCWV4cG9ydHM6IHt9LAovKioqKioqLyAJCQlpZDogbW9kdWxlSWQsCi8qKioqKiovIAkJCWxvYWRlZDogZmFsc2UKLyoqKioqKi8gCQl9OwoKLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLyAJCW1vZHVsZS5sb2FkZWQgPSB0cnVlOwoKLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsKLyoqKioqKi8gCX0KCgovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7CgovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7CgovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOwoKLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7Ci8qKioqKiovIH0pCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKiovIChbCi8qIDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKLyoqKi8gfSksCi8qIDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSJ1c2Ugc3RyaWN0IjsKCgl2YXIgX292ZXJsYXlLaWxsZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpOwoKCXZhciBfb3ZlcmxheUtpbGxlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vdmVybGF5S2lsbGVyKTsKCgl2YXIgX2luamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgoJdmFyIF9udGZTaG93TWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgoJdmFyIF9udGZTaG93TWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9udGZTaG93TWFuYWdlcik7CgoJdmFyIF9ub3RpZmljYXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoKCXZhciBfbm90aWZpY2F0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vdGlmaWNhdGlvbik7CgoJdmFyIF9zdG9yYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCgl2YXIgX3N0b3JhZ2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RvcmFnZSk7CgoJdmFyIF9jb25zdCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7CgoJdmFyIF9jb25zdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb25zdCk7CgoJdmFyIF9hdHRyYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgoJdmFyIF9hdHRyYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F0dHJhY3QpOwoKCXZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJKGZ1bmN0aW9uICgkKSB7CgkgIEdNX2FkZFN0eWxlKCIucGItdG9hc3QtbWFpbiB7XHJcbiAgei1pbmRleDogMjE0NzQ4MzYzOSAhaW1wb3J0YW50O1xyXG4gIHBvc2l0aW9uOiBmaXhlZCAhaW1wb3J0YW50O1xyXG4gIHRvcDogLTUwcHggIWltcG9ydGFudDtcclxuICBsZWZ0OiAwcHggIWltcG9ydGFudDtcclxuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xyXG4gIGhlaWdodDogNDRweCAhaW1wb3J0YW50O1xyXG4gIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xyXG4gIGJveC1zaGFkb3c6IDAgMXB4IDAgMCAjYjZiNGI2ICFpbXBvcnRhbnQ7XHJcbiAgdHJhbnNpdGlvbjogdG9wIDAuM3M7XHJcbn1cclxuXHJcbi5wYi10b2FzdC1tYWluLW1vdmUge1xyXG4gIHRvcDogMHB4ICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5wYi10b2FzdC1tYWluLXNob3cge1xyXG4gIHRyYW5zaXRpb246IG5vbmU7XHJcbiAgdG9wOiAwcHggIWltcG9ydGFudDtcclxufVxyXG5cclxuXHJcblxyXG4jcGJfanFfdGlwc1dyYXBwZXIge1xyXG4gIHBvc2l0aW9uOiBmaXhlZCAhaW1wb3J0YW50O1xyXG4gIHdpZHRoOiAyMzBweCAhaW1wb3J0YW50O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44KTtcclxuICBib3gtc2hhZG93OiAwIDhweCAyMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpO1xyXG4gIGZvbnQtZmFtaWx5OiBcIkx1Y2lkYSBHcmFuZGVcIiwgdGFob21hLCB2ZXJkYW5hLCBhcmlhbCwgc2Fucy1zZXJpZiAhaW1wb3J0YW50O1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweCAhaW1wb3J0YW50O1xyXG4gIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7XHJcbiAgei1pbmRleDogMjE0NzQ4MzY0MSAhaW1wb3J0YW50O1xyXG4gIHBhZGRpbmc6IDE1cHggIWltcG9ydGFudDtcclxuICBmb250LXNpemU6IDE0cHggIWltcG9ydGFudDtcclxufVxyXG5cclxuI3BiX2pxX3RpcHNXcmFwcGVyOmJlZm9yZSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7XHJcbiAgdG9wOiAtMTBweCAhaW1wb3J0YW50O1xyXG4gIHJpZ2h0OiA2MHB4ICFpbXBvcnRhbnQ7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7XHJcbiAgYm9yZGVyLXJpZ2h0OiAxMHB4IHNvbGlkIHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XHJcbiAgYm9yZGVyLWJvdHRvbTogMTBweCBzb2xpZCAjMDAwICFpbXBvcnRhbnQ7XHJcbiAgYm9yZGVyLWxlZnQ6IDEwcHggc29saWQgdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcclxuICBib3JkZXItYm90dG9tLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMikgIWltcG9ydGFudDtcclxuICBjb250ZW50OiBcJ1wnICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbiNwYl9qcV90aXBzV3JhcHBlcjphZnRlciB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7XHJcbiAgdG9wOiAtOXB4ICFpbXBvcnRhbnQ7XHJcbiAgcmlnaHQ6IDYwcHggIWltcG9ydGFudDtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDtcclxuICBib3JkZXItcmlnaHQ6IDlweCBzb2xpZCB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xyXG4gIGJvcmRlci1ib3R0b206IDlweCBzb2xpZCAjMDAwICFpbXBvcnRhbnQ7XHJcbiAgYm9yZGVyLWxlZnQ6IDlweCBzb2xpZCB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xyXG4gIGNvbnRlbnQ6IFwnXCcgIWltcG9ydGFudDtcclxufVxyXG5cclxuI3BiLWxpbmstY29waWVkLW1lc3NhZ2Uge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbiAgcG9zaXRpb246IGZpeGVkO1xyXG4gIHdpZHRoOiA5MHB4O1xyXG4gIGhlaWdodDogMjlweDtcclxuICBvcGFjaXR5OiAwO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwMHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC43KTtcclxuICB6LWluZGV4OiAyMTQ3NDgzNjQxO1xyXG4gIGZvbnQtZmFtaWx5OiBcIkx1Y2lkYSBHcmFuZGVcIiwgdGFob21hLCB2ZXJkYW5hLCBhcmlhbCwgc2Fucy1zZXJpZiAhaW1wb3J0YW50O1xyXG4gIGZvbnQtc2l6ZTogMTNweDtcclxuICBsaW5lLWhlaWdodDogMjlweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbn0iKTsKCgkgIHZhciBwYk1lc3NhZ2UgPSAoMCwgX3V0aWxzLnJhbmRJZCkoKTsKCgkgIHZhciBudGZTaG93TWFuYWdlciA9IG5ldyBfbnRmU2hvd01hbmFnZXIyLmRlZmF1bHQoKTsKCgkgIHZhciBub3RpZmljYXRpb24gPSBuZXcgX25vdGlmaWNhdGlvbjIuZGVmYXVsdCh7CgkgICAgb25EaXNwbGF5OiBmdW5jdGlvbiBvbkRpc3BsYXkoX3JlZikgewoJICAgICAgdmFyIHNvdXJjZSA9IF9yZWYuc291cmNlOwoKCSAgICAgIHN3aXRjaCAoc291cmNlKSB7CgkgICAgICAgIGNhc2UgJ3BvcHVwLWJsb2NrZWQnOgoJICAgICAgICAgIC8vc2VuZEdvb2dsZUFuYWx5dGljc0V2ZW50KHtjYXRlZ29yeTogJ05vdGlmaWNhdGlvbl9iYXInLCBhY3Rpb246ICdTaG93bid9KTsKCSAgICAgICAgICBicmVhazsKCgkgICAgICAgIGNhc2UgJ3JlY2lwZS1ibG9ja2VkJzoKCSAgICAgICAgICAvL3NlbmRHb29nbGVBbmFseXRpY3NFdmVudCh7Y2F0ZWdvcnk6ICdOb3RpZmljYXRpb25fYmFyX292ZXJsYXknLCBhY3Rpb246ICdTaG93bid9KTsKCSAgICAgICAgICBicmVhazsKCSAgICAgIH0KCSAgICB9LAoJICAgIG9uQ2xvc2VDbGljazogZnVuY3Rpb24gb25DbG9zZUNsaWNrKF9yZWYyKSB7CgkgICAgICB2YXIgc291cmNlID0gX3JlZjIuc291cmNlOwoKCSAgICAgIHN3aXRjaCAoc291cmNlKSB7CgkgICAgICAgIGNhc2UgJ3BvcHVwLWJsb2NrZWQnOgoJICAgICAgICAgIC8vc2VuZEdvb2dsZUFuYWx5dGljc0V2ZW50KHtjYXRlZ29yeTogJ05vdGlmaWNhdGlvbl9iYXInLCBhY3Rpb246ICdDbGljaycsIGxhYmVsOiAnQ2xvc2UnLCBkb21haW46IGRvY3VtZW50LmRvbWFpbiB9KTsKCSAgICAgICAgICBicmVhazsKCgkgICAgICAgIGNhc2UgJ3JlY2lwZS1ibG9ja2VkJzoKCSAgICAgICAgICAvL3NlbmRHb29nbGVBbmFseXRpY3NFdmVudCh7Y2F0ZWdvcnk6ICdOb3RpZmljYXRpb25fYmFyX292ZXJsYXknLCBhY3Rpb246ICdDbGljaycsIGxhYmVsOiAnQ2xvc2UnfSk7CgkgICAgICAgICAgYnJlYWs7CgkgICAgICB9CgkgICAgfSwKCSAgICBvbkJ1dHRvbkNsaWNrOiBmdW5jdGlvbiBvbkJ1dHRvbkNsaWNrKF9yZWYzKSB7CgkgICAgICB2YXIgc291cmNlID0gX3JlZjMuc291cmNlLAoJICAgICAgICAgIGlkID0gX3JlZjMuaWQ7CgoJICAgICAgc3dpdGNoIChzb3VyY2UpIHsKCSAgICAgICAgY2FzZSAncG9wdXAtYmxvY2tlZCc6CgkgICAgICAgICAgc3dpdGNoIChpZCkgewoJICAgICAgICAgICAgY2FzZSAnYWxsb3dPbmNlJzoKCSAgICAgICAgICAgICAgLy9zZW5kR29vZ2xlQW5hbHl0aWNzRXZlbnQoe2NhdGVnb3J5OiAnTm90aWZpY2F0aW9uX2JhcicsIGFjdGlvbjogJ0NsaWNrJywgbGFiZWw6ICdBbGxvdyBvbmNlJ30pOwoJICAgICAgICAgICAgICBicmVhazsKCgkgICAgICAgICAgICBjYXNlICdhbGxvd0Fsd2F5cyc6CgkgICAgICAgICAgICAgIC8vc2VuZEdvb2dsZUFuYWx5dGljc0V2ZW50KHtjYXRlZ29yeTogJ05vdGlmaWNhdGlvbl9iYXInLCBhY3Rpb246ICdDbGljaycsIGxhYmVsOiAnQWxsb3cgYWx3YXlzJ30pOwoJICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICB9CgkgICAgICAgICAgYnJlYWs7CgoJICAgICAgICBjYXNlICdyZWNpcGUtYmxvY2tlZCc6CgkgICAgICAgICAgc3dpdGNoIChpZCkgewoJICAgICAgICAgICAgY2FzZSAnTlRGX2FsbG93T3ZlcmxheU9uY2UnOgoJICAgICAgICAgICAgICAvL3NlbmRHb29nbGVBbmFseXRpY3NFdmVudCh7Y2F0ZWdvcnk6ICdOb3RpZmljYXRpb25fYmFyX292ZXJsYXknLCBhY3Rpb246ICdDbGljaycsIGxhYmVsOiAnQWxsb3cgb25jZSd9KTsKCSAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgfQoJICAgICAgICAgIGJyZWFrOwoJICAgICAgfQoJICAgIH0KCSAgfSk7CgoJICB2YXIgb3ZlcmxheUtpbGxlciA9IG5ldyBfb3ZlcmxheUtpbGxlcjIuZGVmYXVsdCh7CgkgICAgb25SZWNpcGVGb3VuZDogZnVuY3Rpb24gb25SZWNpcGVGb3VuZChfcmVmNCkgewoJICAgICAgdmFyIGZvdW5kID0gX3JlZjQuZm91bmQ7CgoJICAgICAgbnRmU2hvd01hbmFnZXIuaXNTaG93KHsgZG9tYWluOiBkb2N1bWVudC5kb21haW4sIHR5cGU6ICdvdmVybGF5JyB9KS50aGVuKGZ1bmN0aW9uICgpIHsKCSAgICAgICAgc2hvd1JlY2lwZU92ZXJsYXlOb3J0aWZpY2F0aW9uKCk7CgkgICAgICB9KTsKCSAgICB9CgkgIH0pOwoKCSAgdmFyIHJlY2VpdmVkUmVjaXBlcyA9IGZ1bmN0aW9uIHJlY2VpdmVkUmVjaXBlcyhkYXRhKSB7CgkgICAgdmFyIHJlY2VwaWVzID0gKGRhdGEgfHwge30pLnJlY2lwZXMgfHwgW107CgoJICAgIGlmIChyZWNlcGllcy5sZW5ndGgpIHsKCSAgICAgIG92ZXJsYXlLaWxsZXIuY3JlYXRlQmxvY2tMaXN0RnJvbVJlY2VwaWVzKHJlY2VwaWVzKTsKCSAgICB9CgkgIH07CgoJICBwYXJzZVBlbmRpbmdOb3RpZmljYXRpb25QYXJhbXMoKTsKCgkgIGZ1bmN0aW9uIG1vbml0b3JCbG9ja3MoKSB7CgkgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBmdW5jdGlvbiByZWNlaXZlTWVzc2FnZShldmVudCkgewoJICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSAmJiBldmVudC5kYXRhLnR5cGUgPT0gImJsb2NrZWRXaW5kb3ciKSB7CgkgICAgICAgIGlmIChzZWxmICE9PSB0b3ApIHsKCSAgICAgICAgICAvL3Bhc3MgdGhlIG1lc3NhZ2UgdG8gcGFyZW50CgkgICAgICAgICAgdmFyIHBhcmVudE9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbiAhPSB3aW5kb3cucGFyZW50LmxvY2F0aW9uID8gZG9jdW1lbnQucmVmZXJyZXIgOiBkb2N1bWVudC5sb2NhdGlvbjsKCSAgICAgICAgICBwYXJlbnQucG9zdE1lc3NhZ2UoeyB0eXBlOiAiYmxvY2tlZFdpbmRvdyIsIGFyZ3M6IGV2ZW50LmRhdGEuYXJncyB9LCBwYXJlbnRPcmlnaW4pOwoJICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoKCSAgICAgICAgdmFyIGFyZ3MgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEuYXJncyk7CgoJICAgICAgICBudGZTaG93TWFuYWdlci5pc1Nob3coeyBkb21haW46IGRvY3VtZW50LmRvbWFpbiB9KS50aGVuKGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICBzaG93UG9wdXBCbG9ja2VkTm90aWZpY2F0aW9uKGFyZ3MsIHsgZG9tYWluOiBkb2N1bWVudC5kb21haW4gfSk7CgkgICAgICAgIH0pOwoKCSAgICAgICAgaWYgKG50ZlNob3dNYW5hZ2VyLmlzQWN0aXZlKSB7CgkgICAgICAgICAgc2V0UGVuZGluZ05vdGlmaWNhdGlvblBhcmFtcyhhcmdzKTsKCSAgICAgICAgfQoKCSAgICAgICAgLy9zZW5kR29vZ2xlQW5hbHl0aWNzRXZlbnQoe2NhdGVnb3J5OiAiR2VuZXJhbCIsIGFjdGlvbjogIkJsb2NrZWRfcG9wdXBzIiwgbGFiZWw6IGRvY3VtZW50LmRvbWFpbn0pOwoJICAgICAgfQoJICAgIH0sIGZhbHNlKTsKCSAgfQoKCSAgLy9zaG93IG5vdGlmY2F0aW9uIGFmdGVyIGEgZm9yY2UgcmVkaXJlY3Qgb2YgYSBzaXRlCgkgIC8vZXZlcnkgdGltZSBhIHBvcHVwIGlzIGJlaW5nIGJsb2NrIHRoaXMgZnVuY3Rpb24gcnVucwoJICAvL2FyZ3MgPSBwb3B1cCBkZXRhaWxzICh1cmwsIG5hbWUsIHByb3BzKQoJICBmdW5jdGlvbiBzZXRQZW5kaW5nTm90aWZpY2F0aW9uUGFyYW1zKGFyZ3MpIHsKCSAgICB2YXIgcG9wID0gKGFyZ3NbMF0gfHwgJycpICsgInwiICsgKGFyZ3NbMV0gfHwgJycpICsgInwiICsgKGFyZ3NbMl0gfHwgJycpOwoJICAgIHZhciByZWxhdGVkTGluayA9IGFyZ3NbM10gfHwgJyc7CgkgICAgdmFyIGN1cnJlbnRIb3N0ID0gbG9jYXRpb24uaG9zdDsKCSAgICB2YXIgcG9wSG9zdCA9IG5ldyBVUkwoKDAsIF91dGlscy5nZXRBYnNvbHV0ZVVSTCkoYXJnc1swXSkpLmhvc3Q7CgkgICAgLy9jaGVjayBpZiB0aGUgcG9wdXAgaXMgdGhlIHNhbWUgaG9zdCB0aGF0IHRoZSBjdXJyZW50IGRvbWFpbgoJICAgIC8vdGhpcyBmbGFncyB0aGlzIGFzIGEgcG90ZW50aWFsIHBhdHRlcm4gb2Y6IG9wZW4gdGhlIHNpdGUncyBwYWdlIGFzIGEgcG9wdXAgYW5kIHJlZGlyZWN0IHRvIGFuIGFkCgkgICAgdmFyIGlzU2FtZUhvc3RQb3B1cCA9IHBvcEhvc3QgPT0gY3VycmVudEhvc3Q7CgkgICAgLy9jaGVjayBpZiBhZCBibG9jayBmb3VuZCAtIHRoaXMgbWFrZXMgc2l0ZXMgdG8gYmUgbW9yZSBhZ3JlZXNpdmUgd2l0aCBwb3B1cHMKCSAgICB2YXIgYWJkID0gYXJnc1snYWJkJ10gPyAxIDogMDsKCSAgICB2YXIgZGF0YSA9IHsKCSAgICAgIHBvcDogcG9wLAoJICAgICAgcmVsYXRlZExpbms6IHJlbGF0ZWRMaW5rLAoJICAgICAgaG9zdDogY3VycmVudEhvc3QsCgkgICAgICBpc1NhbWVIb3N0UG9wdXA6IGlzU2FtZUhvc3RQb3B1cCwKCSAgICAgIGFiZDogYWJkLAoJICAgICAgdGltZTogRGF0ZS5ub3coKQoJICAgIH07CgoJICAgIC8vc3RvcmUgaXQgYWxsIGluIHdpbmRvdy5uYW1lLCB0aGlzIHdpbGwgcmVtYWluIGV2ZW4gaWYgdGhlIHNpdGUgaXMgcmVkaXJlY3RlZAoJICAgIHdpbmRvdy5uYW1lID0gInBwX3BlbmRpbmdfbnRmOiIgKyBidG9hKEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKCgkgICAgLy90byBwcmV2ZW50IGEgZmFsc2UgcG9zaXRpdmUKCSAgICAvL2lmIHNhbWUgdXJsIHBvcHVwIGlzIGRldGVjdGVkIGFuZCB0aGUgdXNlciBjcmVhdGVzIGEgInJlZGlyZWN0IgoJICAgIC8vYnkgY2xpY2tpbmcgYSBsaW5rLCB0aGlzIHNob3VsZCBwcmV2ZW50IHRvIHNlbmQgdGhlIHVzZXIgYmFjayB0byB0aGUgb3JpZ2luIHNpdGUKCSAgICBpZiAoZGF0YS5pc1NhbWVIb3N0UG9wdXApIHsKCSAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CgkgICAgICAgIGlmIChlLnRhcmdldC5ub2RlTmFtZSA9PSAnQScpIHsKCSAgICAgICAgICByZW1vdmVQZW5kaW5nTm90aWZpY2F0aW9uUGFyYW1zKCk7CgkgICAgICAgIH0KCSAgICAgIH0pOwoJICAgIH0KCSAgfQoKCSAgLy90aGlzIHJ1bnMgb24gZXZlcnkgcGFnZSBsb2FkIAoJICBmdW5jdGlvbiBwYXJzZVBlbmRpbmdOb3RpZmljYXRpb25QYXJhbXMoKSB7CgkgICAgaWYgKHdpbmRvdy5uYW1lICYmIHdpbmRvdy5uYW1lLmluZGV4T2YoJ3BwX3BlbmRpbmdfbnRmOicpID09IDApIHsKCSAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShhdG9iKG5hbWUuc3BsaXQoJzonKVsxXSkpOwoJICAgICAgdmFyIGZuUmVtb3ZlID0gZnVuY3Rpb24gZm5SZW1vdmUoKSB7CgkgICAgICAgIHJlbW92ZVBlbmRpbmdOb3RpZmljYXRpb25QYXJhbXMoKTsKCgkgICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCBmblJlbW92ZSk7CgkgICAgICB9OwoKCSAgICAgIC8vbWF4IDUwMDAgbXMgYmV0d2VlbiBwb3B1cCBibG9jayBhbmQgcGFnZSBsb2FkCgkgICAgICBpZiAoZGF0YS50aW1lICsgNTAwMCA+PSBEYXRlLm5vdygpKSB7CgkgICAgICAgIC8vZm9yY2UgZGlzcGxheSB0aGUgbm90aWZpY2F0aW9uCgkgICAgICAgIGlmIChkYXRhLmRpc3BsYXkpIHsKCSAgICAgICAgICBudGZTaG93TWFuYWdlci5pc1Nob3coeyBkb21haW46IGRvY3VtZW50LmRvbWFpbiB9KS50aGVuKGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIHNob3dQb3B1cEJsb2NrZWROb3RpZmljYXRpb24oZGF0YS5wb3Auc3BsaXQoJ3wnKSwgeyBwcmV2ZW50RGlzcGxheUV2ZW50OiB0cnVlLCBxdWlja09wZW46IHRydWUsIGRvbWFpbjogZG9jdW1lbnQuZG9tYWluIH0pOwoJICAgICAgICAgIH0pOwoKCSAgICAgICAgICByZW1vdmVQZW5kaW5nTm90aWZpY2F0aW9uUGFyYW1zKCk7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgdmFyIGlzRXh0ZXJuYWxTaXRlID0gZmFsc2U7CgoJICAgICAgICAgIGlmIChkYXRhLmhvc3QgIT0gbG9jYXRpb24uaG9zdCkgewoJICAgICAgICAgICAgaXNFeHRlcm5hbFNpdGUgPSB0cnVlOwoJICAgICAgICAgIH0KCgkgICAgICAgICAgLy9zZWxmIHBvcHVwICsgcmVkaXJlY3QgcGF0dGVybiAtIHJldHVybiB1c2VyIHRvIHRoZSBwb3B1cCB1cmwgYW5kIGJsb2NrIHRoZSByZWRpcmVjdGVkIHNpdGUKCSAgICAgICAgICBpZiAoaXNFeHRlcm5hbFNpdGUgJiYgZGF0YS5hYmQpIHsKCSAgICAgICAgICAgIHZhciB1cmwgPSBkYXRhLnBvcC5zcGxpdCgnfCcpWzBdOwoKCSAgICAgICAgICAgIGlmIChkYXRhLmlzU2FtZUhvc3RQb3B1cCkgewoJICAgICAgICAgICAgICBzZXRTaW5nbGVEaXNwbGF5Tm90aWZpY2F0aW9uUGFyYW1zKCk7CgoJICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJsOwoJICAgICAgICAgICAgfSBlbHNlIGlmICgvXmFib3V0OmJsYW5rL2kudGVzdCh1cmwpICYmIGRhdGEucmVsYXRlZExpbmspIHsKCSAgICAgICAgICAgICAgc2V0U2luZ2xlRGlzcGxheU5vdGlmaWNhdGlvblBhcmFtcygpOwoKCSAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IGRhdGEucmVsYXRlZExpbms7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIG50ZlNob3dNYW5hZ2VyLmlzU2hvdyh7IGRvbWFpbjogaXNFeHRlcm5hbFNpdGUgPyBkYXRhLmhvc3QgOiBkb2N1bWVudC5kb21haW4gfSkudGhlbihmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICAgIHNob3dQb3B1cEJsb2NrZWROb3RpZmljYXRpb24oZGF0YS5wb3Auc3BsaXQoJ3wnKSwgeyBwcmV2ZW50RGlzcGxheUV2ZW50OiB0cnVlLCBxdWlja09wZW46IHRydWUsIGRvbWFpbjogaXNFeHRlcm5hbFNpdGUgPyBkYXRhLmhvc3QgOiBkb2N1bWVudC5kb21haW4gfSk7CgkgICAgICAgICAgICB9KTsKCgkgICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBmblJlbW92ZSk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9IGVsc2UgewoJICAgICAgICByZW1vdmVQZW5kaW5nTm90aWZpY2F0aW9uUGFyYW1zKCk7CgkgICAgICB9CgkgICAgfQoJICB9CgoJICBmdW5jdGlvbiBzZXRTaW5nbGVEaXNwbGF5Tm90aWZpY2F0aW9uUGFyYW1zKCkgewoJICAgIHZhciBkYXRhID0gewoJICAgICAgcG9wOiBsb2NhdGlvbi5ocmVmICsgJ3x8JywKCSAgICAgIGRpc3BsYXk6IHRydWUsCgkgICAgICB0aW1lOiBEYXRlLm5vdygpCgkgICAgfTsKCgkgICAgd2luZG93Lm5hbWUgPSAncHBfcGVuZGluZ19udGY6JyArIGJ0b2EoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwoJICB9CgoJICBmdW5jdGlvbiByZW1vdmVQZW5kaW5nTm90aWZpY2F0aW9uUGFyYW1zKCkgewoJICAgIGlmICh3aW5kb3cubmFtZSAmJiB3aW5kb3cubmFtZS5pbmRleE9mKCJwcF9wZW5kaW5nX250ZjoiKSA9PSAwKSB7CgkgICAgICB3aW5kb3cubmFtZSA9ICIiOwoJICAgIH0KCSAgfQoKCSAgLy9wb3B1cCBibG9ja2VkIG5vdGlmaWNhdGlvbgoJICBmdW5jdGlvbiBzaG93UG9wdXBCbG9ja2VkTm90aWZpY2F0aW9uKGFyZ3MpIHsKCSAgICB2YXIgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwoKCSAgICB2YXIgZG9tYWluID0gcHJvcHMuZG9tYWluOwoKCSAgICBub3RpZmljYXRpb24uc2hvdyh7CgkgICAgICB0aXRsZTogKDAsIF91dGlscy5nZXRJMThOKSgnbm90aWZpY2F0aW9uTWVzc2FnZScpLAoJICAgICAgcXVpY2tPcGVuOiBwcm9wcy5xdWlja09wZW4sCgkgICAgICBzaG93SGlkZTogdHJ1ZSwKCSAgICAgIHNob3dSZXNpemU6IHRydWUsCgkgICAgICBzb3VyY2U6ICdwb3B1cC1ibG9ja2VkJywKCSAgICAgIHdpbkFyZ3M6IGFyZ3MsIC8vcG9wIHVybCAvIG5hbWUgLyB3aWR0aCArIGhlaWdodAoJICAgICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKCSAgICAgICAgcmVtb3ZlUGVuZGluZ05vdGlmaWNhdGlvblBhcmFtcygpOwoJICAgICAgfSwKCgkgICAgICBidXR0b25zOiB7CgkgICAgICAgIGFsbG93T25jZTogZnVuY3Rpb24gYWxsb3dPbmNlKCkgewoJICAgICAgICAgIG50ZlNob3dNYW5hZ2VyLmlzQWN0aXZlID0gdHJ1ZTsKCSAgICAgICAgfSwKCSAgICAgICAgYWxsb3dBbHdheXM6IGZ1bmN0aW9uIGFsbG93QWx3YXlzKCkgewoJICAgICAgICAgIF9zdG9yYWdlMi5kZWZhdWx0LmdldCgncGJfd2hpdGVsaXN0JykudGhlbihmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICB2YXIgd2hpdGVsaXN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTsKCgkgICAgICAgICAgICB3aGl0ZWxpc3QucHVzaChkb21haW4pOwoKCSAgICAgICAgICAgIF9zdG9yYWdlMi5kZWZhdWx0LnNldCgncGJfd2hpdGVsaXN0Jywgd2hpdGVsaXN0KTsKCSAgICAgICAgICB9KTsKCgkgICAgICAgICAgaWYgKCFwcm9wcy5pc0V4dGVybmFsU2l0ZSkgewoJICAgICAgICAgICAgKDAsIF91dGlscy5leGVjdXRlQ29kZSkoIndpbmRvdy5wYkV4dGVybmFsQ29tbWFuZCgwLCBcIiIgKyBwYk1lc3NhZ2UgKyAiXCIpOyIpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgfQoJICAgIH0pOwoJICB9CgoJICAvL2FuIG92ZXJsYXkgYmxvY2tlZCBieSByZWNpcGUgbm90aWZpY2F0aW9uCgkgIGZ1bmN0aW9uIHNob3dSZWNpcGVPdmVybGF5Tm9ydGlmaWNhdGlvbigpIHsKCSAgICBub3RpZmljYXRpb24uc2hvdyh7CgkgICAgICB0aXRsZTogKDAsIF91dGlscy5nZXRJMThOKSgib3ZlcmxheVdhc0Jsb2NrZWQiKSwKCSAgICAgIHNvdXJjZTogJ3JlY2lwZS1ibG9ja2VkJywKCSAgICAgIHNob3dIaWRlOiB0cnVlLAoJICAgICAgc2hvd1Jlc2l6ZTogdHJ1ZSwKCSAgICAgIGJ1dHRvbnM6IHsKCSAgICAgICAgTlRGX2FsbG93T3ZlcmxheU9uY2U6IGZ1bmN0aW9uIE5URl9hbGxvd092ZXJsYXlPbmNlKCkgewoJICAgICAgICAgIG92ZXJsYXlLaWxsZXIucmVzdG9yZSgpOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfSk7CgkgIH0KCgkgIGZ1bmN0aW9uIHNlbmRHb29nbGVBbmFseXRpY3NFdmVudChkYXRhKSB7CgkgICAgdmFyIF9kYXRhJGRvbWFpbiA9IGRhdGEuZG9tYWluLAoJICAgICAgICBkb21haW4gPSBfZGF0YSRkb21haW4gPT09IHVuZGVmaW5lZCA/IGRvY3VtZW50LmRvbWFpbiA6IF9kYXRhJGRvbWFpbjsKCgoJICAgIHNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kKHsKCSAgICAgIG5hbWU6ICJ0cmFja0V2ZW50IiwKCSAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LAoJICAgICAgYWN0aW9uOiBkYXRhLmFjdGlvbiwKCSAgICAgIGxhYmVsOiBkYXRhLmxhYmVsLAoJICAgICAgaXNDb3VudDogZGF0YS5pc0NvdW50LAoJICAgICAgZG9tYWluOiBkb21haW4KCSAgICB9KTsKCSAgfQoKCSAgZnVuY3Rpb24gaW5pdEJsb2NrRnVuY3Rpb25zKCkgewoJICAgIF9zdG9yYWdlMi5kZWZhdWx0LmdldCgncGJfd2hpdGVsaXN0JywgJ3BiX292ZXJsYXlsaXN0JywgJ3BiX3BvcHVwQmxhY2tMaXN0JykudGhlbihmdW5jdGlvbiAoc2V0dGluZ3MpIHsKCSAgICAgIHNldHRpbmdzLnBiX3doaXRlbGlzdCA9IHNldHRpbmdzLnBiX3doaXRlbGlzdCB8fCBbXTsKCSAgICAgIHNldHRpbmdzLnBiX292ZXJsYXlsaXN0ID0gc2V0dGluZ3MucGJfb3ZlcmxheWxpc3QgfHwgW107CgkgICAgICBzZXR0aW5ncy5wYl9wb3B1cEJsYWNrTGlzdCA9IHNldHRpbmdzLnBiX3BvcHVwQmxhY2tMaXN0IHx8IFtdOwoKCSAgICAgIHZhciB3aGl0ZWxpc3QgPSBzZXR0aW5ncy5wYl93aGl0ZWxpc3QuY29uY2F0KF9jb25zdDIuZGVmYXVsdC5kZWZhdWx0V2hpdGVMaXN0KTsKCgkgICAgICBpZiAoISgwLCBfdXRpbHMuaXNEb21haW5Jbkxpc3QpKGRvY3VtZW50LmRvbWFpbiwgd2hpdGVsaXN0KSkgewoJICAgICAgICB2YXIgY29kZSA9ICIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBwYl9tZXNzYWdlID0gXCIiICsgcGJNZXNzYWdlICsgIlwiO1xuICAgICAgICAgIHZhciBwYl9ibGFja2xpc3QgPSAiICsgSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3MucGJfcG9wdXBCbGFja0xpc3QpICsgIjtcbiAgICAgICAgICB2YXIgcGJfd2hpdGVsaXN0ID0gIiArIEpTT04uc3RyaW5naWZ5KHdoaXRlbGlzdCkgKyAiO1xuICAgICAgICAgICIgKyBfaW5qZWN0LmluamVjdC50b1N0cmluZygpICsgIjtcbiAgICAgICAgICBpbmplY3QoKTtcbiAgICAgICAgfSkoKTsiOwoKCSAgICAgICAgKDAsIF91dGlscy5leGVjdXRlQ29kZSkoY29kZSk7CgoJICAgICAgICAvKmFkZFNjcmlwdCh7dGV4dENvbnRlbnQ6IGAke2luamVjdC50b1N0cmluZygpfWAsIGlkOiAicGJfYmxvY2tTY3JpcHQifSk7CgkgICAgICAgIGV4ZWN1dGVDb2RlKCJ2YXIgcGJfYmxhY2tsaXN0ID0gIiArIEpTT04uc3RyaW5naWZ5KHNldHRpbmdzLnBiX3BvcHVwQmxhY2tMaXN0KSk7CgkgICAgICAgIGV4ZWN1dGVDb2RlKCJ2YXIgcGJfd2hpdGVsaXN0ID0gIiArIEpTT04uc3RyaW5naWZ5KHdoaXRlbGlzdCkpOwoJICAgICAgICBleGVjdXRlQ29kZSgiaW5qZWN0KCkiKTsqLwoJICAgICAgICBtb25pdG9yQmxvY2tzKCk7IC8vIFByZXZpb3VzbHkgdGhpcyBvbmx5IHJhbiBpZiB3aW5kb3cgPSBwYXJlbnQKCSAgICAgIH0KCSAgICB9KTsKCSAgfQoKCSAgaW5pdEJsb2NrRnVuY3Rpb25zKCk7CgoJICAvLyBibG9ja2luZyBwb3B1cHMgLSBTVEFSVAoJICBfc3RvcmFnZTIuZGVmYXVsdC5nZXQoJ3BiX3doaXRlbGlzdCcpLnRoZW4oZnVuY3Rpb24gKCkgewoJICAgIHZhciB3aGl0ZWxpc3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwoJICAgIC8vZ2V0IHdoaXRlbGlzdAoJICAgIHdoaXRlbGlzdCA9IHdoaXRlbGlzdC5jb25jYXQoX2NvbnN0Mi5kZWZhdWx0LmRlZmF1bHRXaGl0ZUxpc3QpOwoKCSAgICBpZiAoISgwLCBfdXRpbHMuaXNEb21haW5Jbkxpc3QpKGRvY3VtZW50LmRvbWFpbiwgd2hpdGVsaXN0KSkgewoJICAgICAgLy9pZiBub3QgaW4gdGhlIHdoaXRlbGlzdAoJICAgICAgJCgiaHRtbCIpLm9uKCJjbGljayIsICJhIiwgb25IeXBlckxpbmtDbGlja2VkKTsgLy8gbGlzdGVuIHRvIGFsbCBsaW5rIGVsZW1lbnRzJ3MgY2xpY2sgZXZlbnQKCSAgICB9CgkgIH0pOwoKCSAgZnVuY3Rpb24gaXNPdmVybGF5aXNoKGVsKSB7CgkgICAgdmFyIHdpbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CgkgICAgdmFyIHdpbkhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsKCgkgICAgaWYgKGVsLm91dGVyV2lkdGgoKSA+PSB3aW5XaWR0aCAqIDAuNiAmJiBlbC5vdXRlckhlaWdodCgpID49IHdpbkhlaWdodCAqIDAuNzUpIHsKCSAgICAgIHJldHVybiB0cnVlOwoJICAgIH0KCgkgICAgcmV0dXJuIGZhbHNlOwoJICB9CgoJICBmdW5jdGlvbiBvbkh5cGVyTGlua0NsaWNrZWQoZSkgewoJICAgIHZhciBlbCA9ICQodGhpcyk7CgkgICAgdmFyIGhyZWYgPSBlbC5hdHRyKCdocmVmJyk7CgkgICAgdmFyIHRhcmdldCA9IGVsLmF0dHIoJ3RhcmdldCcpIHx8ICdfc2VsZic7CgoJICAgIGlmIChocmVmICYmIGhyZWYgIT09ICcjJyAmJiB0YXJnZXQgIT09ICdfc2VsZicpIHsKCSAgICAgIC8vb25seSBpZiBoYXMgaHJlZiBhbmQgb3BlbiBpbiBuZXcgdGFiL3dpbmRvdwoJICAgICAgaWYgKGlzT3ZlcmxheWlzaChlbCkpIHsKCSAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKCSAgICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsKCSAgICAgICAgICB0eXBlOiAiYmxvY2tlZFdpbmRvdyIsCgkgICAgICAgICAgYXJnczogSlNPTi5zdHJpbmdpZnkoeyAiMCI6IGhyZWYgfSkKCSAgICAgICAgfSwgd2luZG93LnBhcmVudC5sb2NhdGlvbik7CgkgICAgICB9CgkgICAgfQoJICB9CgkgIC8vIGJsb2NraW5nIHBvcHVwcyAtIEVORAoKCSAgZnVuY3Rpb24gb3BlblVybCh1cmwsIG5vdE5ld1RhYikgewoJICAgIHNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kKHsgbmFtZTogIm9wZW5VcmwiLCB1cmw6IHVybCwgbm90TmV3VGFiOiBub3ROZXdUYWIgfSk7CgkgIH0KCgkgIC8vI1RFTVAKCSAgKGZ1bmN0aW9uICgpIHsKCSAgICAoMCwgX2F0dHJhY3QyLmRlZmF1bHQpKGZ1bmN0aW9uIChkKSB7CgkgICAgICAvKmNvbnNvbGUubG9nKHR5cGVvZiBkLCBkKTsqL3JlY2VpdmVkUmVjaXBlcyhkKTsKCSAgICB9KTsKCSAgfSkoKTsKCX0pKGpRdWVyeS5ub0NvbmZsaWN0KHRydWUpKTsKCgkvKmlmICh3aW5kb3cgPT0gdG9wKSB7CgkgIHNldFRpbWVvdXQoKCkgPT57CgkgICAgd2luZG93Lm9uZm9jdXMgPSAoKSA9PnsKCSAgICAgIHNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kKHtuYW1lOiAicGFnZSIsIHVybDogd2luZG93LmxvY2F0aW9uLmhyZWZ9KTsKCSAgICB9OwoJICB9LCAyMDAwKTsKCgkgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9ICgpID0+ewoJICAgIHNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kKHtuYW1lOiAicGFnZUNsb3NpbmciLCB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmfSk7CgkgICAgcmV0dXJuIG51bGw7CgkgIH07Cgl9CgoJZnVuY3Rpb24gc2VuZE1lc3NhZ2VUb0JhY2tncm91bmQobWVzc2FnZSl7CgkgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKG1lc3NhZ2UpOwoJfSovCgovKioqLyB9KSwKLyogMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKCXZhciBfalF1ZXJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2pRdWVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9qUXVlcnkpOwoKCXZhciBfc3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgoJdmFyIF9zdG9yYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0b3JhZ2UpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9CgoJZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOyB9CgoJZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCglmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCgl2YXIgX1Byb21pc2UgPSB0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfcmVxdWlyZV9fKCEoZnVuY3Rpb24gd2VicGFja01pc3NpbmdNb2R1bGUoKSB7IHZhciBlID0gbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgXCJlczYtcHJvbWlzZVwiIik7IGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJzsgdGhyb3cgZTsgfSgpKSkuUHJvbWlzZSA6IFByb21pc2U7CgoJdmFyIE92ZXJsYXlEZWN0ZWN0b3IgPSBmdW5jdGlvbiAoKSB7CgkgIGZ1bmN0aW9uIE92ZXJsYXlEZWN0ZWN0b3IoKSB7CgkgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE92ZXJsYXlEZWN0ZWN0b3IpOwoKCSAgICB0aGlzLndpbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CgkgICAgdGhpcy53aW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CgkgIH0KCgkgIF9jcmVhdGVDbGFzcyhPdmVybGF5RGVjdGVjdG9yLCBbewoJICAgIGtleTogJ0FMR08yJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gQUxHTzIoX3JlZikgewoJICAgICAgdmFyIHggPSBfcmVmLngsCgkgICAgICAgICAgeSA9IF9yZWYueSwKCSAgICAgICAgICBtdyA9IF9yZWYubXcsCgkgICAgICAgICAgbWggPSBfcmVmLm1oOwoKCSAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh4LCB5KTsKCSAgICAgIHZhciBvdmVybGF5ID0gdm9pZCAwOwoKCSAgICAgIGlmIChlbGVtZW50ICYmIHRoaXMubm90Um9vdEVsZW1lbnQoZWxlbWVudCkpIHsKCSAgICAgICAgZG8gewoJICAgICAgICAgIHZhciBpc092ZXJsYXlpc2ggPSB0aGlzLmlzT3ZlcmxheWlzaCh7IGVsOiBlbGVtZW50LCBtaW5XaWR0aDogbXcsIG1pbkhlaWdodDogbWggfSk7CgoJICAgICAgICAgIGlmIChpc092ZXJsYXlpc2gpIHsKCSAgICAgICAgICAgIG92ZXJsYXkgPSBlbGVtZW50OwoJICAgICAgICAgIH0KCgkgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTsKCSAgICAgICAgfSB3aGlsZSAoIW92ZXJsYXkgJiYgdGhpcy5ub3RSb290RWxlbWVudChlbGVtZW50KSk7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIG92ZXJsYXk7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnbm90Um9vdEVsZW1lbnQnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBub3RSb290RWxlbWVudChlbGVtZW50KSB7CgkgICAgICByZXR1cm4gZWxlbWVudCAhPSBkb2N1bWVudC5ib2R5ICYmIGVsZW1lbnQgIT0gZG9jdW1lbnQgJiYgZWxlbWVudCAhPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnZGV0ZWN0T3ZlcmxheUxheWVyJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gZGV0ZWN0T3ZlcmxheUxheWVyKGRldGVjdFJhbmdlKSB7CgkgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CgkgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKCSAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCgkgICAgICB0cnkgewoJICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBkZXRlY3RSYW5nZVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKCSAgICAgICAgICB2YXIgY29vcmRzID0gX3N0ZXAudmFsdWU7CgoJICAgICAgICAgIHZhciBvdmVybGF5ID0gdGhpcy5BTEdPMihjb29yZHMpOwoKCSAgICAgICAgICBpZiAob3ZlcmxheSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVjaXBlKG92ZXJsYXkpOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgfSBjYXRjaCAoZXJyKSB7CgkgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKCSAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CgkgICAgICB9IGZpbmFsbHkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7CgkgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGZpbmFsbHkgewoJICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewoJICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ2ZpbmQnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kKCkgewoJICAgICAgdmFyIGRldGVjdCA9IHsKCSAgICAgICAgQW55U2l6ZTogW3sgeDogdGhpcy53aW5XaWR0aCAvIDIsIHk6IHRoaXMud2luSGVpZ2h0IC8gMiwgbXc6IDEwMCwgbWg6IDEwMCB9LCB7IHg6IHRoaXMud2luV2lkdGggLyAyLCB5OiB0aGlzLndpbkhlaWdodCAvIDMsIG13OiAxMDAsIG1oOiAxMDAgfV0sCgkgICAgICAgIEZ1bGxTY3JlZW46IFt7IHg6IHRoaXMud2luV2lkdGggLyAyLCB5OiB0aGlzLndpbkhlaWdodCAvIDIsIG13OiB0aGlzLndpbkhlaWdodCAqIDAuOSwgbWg6IHRoaXMud2luSGVpZ2h0ICogMC45IH1dCgkgICAgICB9OwoJICAgICAgdmFyIG92ZXJsYXlzID0gW10sCgkgICAgICAgICAgcmVjaXBlID0gdm9pZCAwOwoKCSAgICAgIHJlY2lwZSA9IHRoaXMuZGV0ZWN0T3ZlcmxheUxheWVyKGRldGVjdC5BbnlTaXplKTsKCgkgICAgICBpZiAocmVjaXBlKSB7CgkgICAgICAgIG92ZXJsYXlzLnB1c2godGhpcy5oaWRlQnlSZWNpcGUocmVjaXBlKSk7CgoJICAgICAgICByZWNpcGUgPSB0aGlzLmRldGVjdE92ZXJsYXlMYXllcihkZXRlY3QuRnVsbFNjcmVlbik7CgoJICAgICAgICBpZiAocmVjaXBlKSB7CgkgICAgICAgICAgb3ZlcmxheXMucHVzaCh0aGlzLmhpZGVCeVJlY2lwZShyZWNpcGUpKTsKCSAgICAgICAgfQoJICAgICAgfQoKCSAgICAgIHJldHVybiBvdmVybGF5czsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdnZXRSZWNpcGUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWNpcGUoZWwpIHsKCSAgICAgIHZhciByZWNpcGUgPSBbXTsKCSAgICAgIHZhciBpc1NpbmdsZUluc3RhbmNlSW5Eb2N1bWVudCA9IGZ1bmN0aW9uIGlzU2luZ2xlSW5zdGFuY2VJbkRvY3VtZW50KHJlY2lwZSkgewoJICAgICAgICByZXR1cm4gKDAsIF9qUXVlcnkyLmRlZmF1bHQpKHJlY2lwZS5qb2luKCcgPiAnKSkubGVuZ3RoID09IDE7CgkgICAgICB9OwoKCSAgICAgIGRvIHsKCSAgICAgICAgdmFyIG5vZGUgPSBlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJICAgICAgICB2YXIgaWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lkJyk7CgkgICAgICAgIHZhciBjbGFzc05hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyk7CgkgICAgICAgIHZhciBzdHlsZSA9IGVsLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTsKCgkgICAgICAgIGlmIChpZCkgewoJICAgICAgICAgIHJlY2lwZS51bnNoaWZ0KCcjJyArIGlkLnRyaW0oKSk7CgoJICAgICAgICAgIGJyZWFrOwoJICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZSkgewoJICAgICAgICAgIHJlY2lwZS51bnNoaWZ0KG5vZGUgKyAnLicgKyBjbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xzKy9nLCAnLicpKTsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICByZWNpcGUudW5zaGlmdChub2RlICsgJ1tzdHlsZT0iJyArIHN0eWxlICsgJyJdJyk7CgkgICAgICAgIH0KCgkgICAgICAgIGlmIChpc1NpbmdsZUluc3RhbmNlSW5Eb2N1bWVudChyZWNpcGUpKSB7CgkgICAgICAgICAgYnJlYWs7CgkgICAgICAgIH0KCgkgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTsKCSAgICAgIH0gd2hpbGUgKGVsICE9IGRvY3VtZW50LmJvZHkpOwoKCSAgICAgIGlmIChpc1NpbmdsZUluc3RhbmNlSW5Eb2N1bWVudChyZWNpcGUpKSB7CgkgICAgICAgIHJldHVybiByZWNpcGUuam9pbignID4gJyk7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ2hpZGVCeVJlY2lwZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGVCeVJlY2lwZShyZWNpcGUpIHsKCSAgICAgIHZhciBlbCA9ICgwLCBfalF1ZXJ5Mi5kZWZhdWx0KShyZWNpcGUpOwoJICAgICAgdmFyIGNzcyA9IGVsLnByb3AoJ3N0eWxlJykuY3NzVGV4dDsKCgkgICAgICBlbC5wcm9wKCdzdHlsZScpLmNzc1RleHQgPSBjc3MgKyAnO2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50Oyc7CgoJICAgICAgcmV0dXJuIHsgZWw6IGVsLCByZWNpcGU6IHJlY2lwZSwgY3NzOiBjc3MgfTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdpc092ZXJsYXlpc2gnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBpc092ZXJsYXlpc2goX3JlZjIpIHsKCSAgICAgIHZhciBlbCA9IF9yZWYyLmVsLAoJICAgICAgICAgIG1pbldpZHRoID0gX3JlZjIubWluV2lkdGgsCgkgICAgICAgICAgbWluSGVpZ2h0ID0gX3JlZjIubWluSGVpZ2h0OwoKCSAgICAgIHZhciBjc3MgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7CgoJICAgICAgaWYgKGNzcy5kaXNwbGF5ICE9ICdub25lJyAmJiBjc3MudmlzaWJpbGl0eSAhPSAnaGlkZGVuJyAmJiAvZml4ZWR8YWJzb2x1dGUvLnRlc3QoY3NzLnBvc2l0aW9uKSAmJiAoY3NzLnpJbmRleCA9PSAnYXV0bycgfHwgcGFyc2VJbnQoY3NzLnpJbmRleCkgPj0gMCkgJiYgZWwub2Zmc2V0V2lkdGggPj0gbWluV2lkdGggJiYgZWwub2Zmc2V0SGVpZ2h0ID49IG1pbkhlaWdodCkgewoJICAgICAgICByZXR1cm4gW2VsLCBjc3MuekluZGV4ICogMV07CgkgICAgICB9CgoJICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH0KCSAgfV0pOwoKCSAgcmV0dXJuIE92ZXJsYXlEZWN0ZWN0b3I7Cgl9KCk7CgoJdmFyIE92ZXJsYXlLaWxsZXIgPSBmdW5jdGlvbiAoX092ZXJsYXlEZWN0ZWN0b3IpIHsKCSAgX2luaGVyaXRzKE92ZXJsYXlLaWxsZXIsIF9PdmVybGF5RGVjdGVjdG9yKTsKCgkgIGZ1bmN0aW9uIE92ZXJsYXlLaWxsZXIoKSB7CgkgICAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCgkgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE92ZXJsYXlLaWxsZXIpOwoKCSAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoT3ZlcmxheUtpbGxlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE92ZXJsYXlLaWxsZXIpKS5jYWxsKHRoaXMpKTsKCgkgICAgX3RoaXMuYWN0aXZlQmxvY2tMaXN0ID0gW107CgkgICAgX3RoaXMuYWN0aXZlUmVjZXBpZXNMaXN0ID0gW107CgoJICAgIF90aGlzLm9uQXV0b0RldGVjdCA9IHByb3BzLm9uQXV0b0RldGVjdCB8fCBmdW5jdGlvbiAoKSB7fTsKCSAgICBfdGhpcy5vblVzZXJSZW1vdmUgPSBwcm9wcy5vblVzZXJSZW1vdmUgfHwgZnVuY3Rpb24gKCkge307CgkgICAgX3RoaXMub25CbG9ja0xpc3RGb3VuZCA9IHByb3BzLm9uQmxvY2tMaXN0Rm91bmQgfHwgZnVuY3Rpb24gKCkge307CgkgICAgX3RoaXMub25SZWNpcGVGb3VuZCA9IHByb3BzLm9uUmVjaXBlRm91bmQgfHwgZnVuY3Rpb24gKCkge307CgkgICAgX3RoaXMub25SZWNpcGVOb3RGb3VuZCA9IHByb3BzLm9uUmVjaXBlTm90Rm91bmQgfHwgZnVuY3Rpb24gKCkge307CgoJICAgIF90aGlzLmJsYWNrTGlzdFByb21pc2UgPSBfdGhpcy5jcmVhdGVCbG9ja0xpc3RGcm9tU3RvcmFnZSgpOwoKCSAgICBpZiAod2luZG93ID09IHRvcCkgewoJICAgICAgX3RoaXMuYXV0b0RldGVjdCgpOwoJICAgIH0KCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIF9jcmVhdGVDbGFzcyhPdmVybGF5S2lsbGVyLCBbewoJICAgIGtleTogJ2hpZGUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlKHJlY2VwaWVzKSB7CgkgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCgkgICAgICB0aGlzLmxhc3QgPSBbXTsKCgkgICAgICByZWNlcGllcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWNpcGUpIHsKCSAgICAgICAgX3RoaXMyLmxhc3QucHVzaChfdGhpczIuaGlkZUJ5UmVjaXBlKHJlY2lwZSkpOwoJICAgICAgfSk7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAncmVzdG9yZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3RvcmUoKSB7CgkgICAgICB0aGlzLmxhc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewoJICAgICAgICB2YXIgZWwgPSBpdGVtLmVsLAoJICAgICAgICAgICAgcmVjaXBlID0gaXRlbS5yZWNpcGUsCgkgICAgICAgICAgICBjc3MgPSBpdGVtLmNzczsKCgoJICAgICAgICBlbC5wcm9wKCdzdHlsZScpLmNzc1RleHQgPSBjc3MgKyAnO2Rpc3BsYXk6IGJsb2NrJzsKCgkgICAgICAgIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoKDAsIF9qUXVlcnkyLmRlZmF1bHQpKCdzdHlsZS5wcC1yZW1vdmUtb3ZlcmxheScpKSkuZm9yRWFjaChmdW5jdGlvbiAoc3R5bGUpIHsKCSAgICAgICAgICBzdHlsZSA9ICgwLCBfalF1ZXJ5Mi5kZWZhdWx0KShzdHlsZSk7CgoJICAgICAgICAgIGlmIChzdHlsZS5kYXRhKCdyZWNpcGUnKSA9PSBidG9hKHJlY2lwZSkpIHsKCSAgICAgICAgICAgICgwLCBfalF1ZXJ5Mi5kZWZhdWx0KShzdHlsZSkucmVtb3ZlKCk7CgkgICAgICAgICAgfQoJICAgICAgICB9KTsKCSAgICAgIH0pOwoKCSAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpOyAvL3NvbWV0aW1lcyB0aGlzIG1ha2VzIHRoZSBvdmVybGF5IHRvIGJlIGNlbnRlcmVkIHByb3Blcmx5IHdoZW4gcmVzdG9yZWQKCSAgICB9CgoJICAgIC8vID09PT09PT0gcmVtb3ZlIG92ZXJsYXkgdHJpZ2dlcmVkIGJ5IHVzZXIgPT09PT09PT09PQoKCSAgfSwgewoJICAgIGtleTogJ3JlbW92ZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKCSAgICAgIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgoJICAgICAgdmFyIG92ZXJsYXlzID0gdGhpcy5maW5kKCk7CgoJICAgICAgaWYgKG92ZXJsYXlzLmxlbmd0aCkgewoJICAgICAgICB0aGlzLmxhc3QgPSBvdmVybGF5czsKCgkgICAgICAgIHRoaXMuY3JlYXRlR2xvYmFsQ1NTKCk7CgkgICAgICAgIHRoaXMub25Vc2VyUmVtb3ZlKHsgc3VjY2VzczogdHJ1ZSwgcmVjZXBpZXM6IG92ZXJsYXlzLm1hcChmdW5jdGlvbiAobykgewoJICAgICAgICAgICAgcmV0dXJuIG8ucmVjaXBlOwoJICAgICAgICAgIH0pLCBwcm9wczogcHJvcHMgfSk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICB0aGlzLm9uVXNlclJlbW92ZSh7IHN1Y2Nlc3M6IGZhbHNlLCBwcm9wczogcHJvcHMgfSk7CgkgICAgICB9CgkgICAgfQoKCSAgICAvLyA9PT09PSBhZGQgZm91bmQgb3ZlcmxheSB0byBsb2NhbCBibGFja2xpc3QsIDxyZW1vdmUgYWx3YXlzPiBidXR0b24gZnJvbSBub3RpZmljYXRpb24KCgkgIH0sIHsKCSAgICBrZXk6ICdhZGRUb0xvY2FsQmxhY2tsaXN0JywKCSAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVG9Mb2NhbEJsYWNrbGlzdCgpIHsKCSAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKCSAgICAgIHZhciBkb21haW4gPSBkb2N1bWVudC5kb21haW47CgkgICAgICB2YXIgdXJsID0gbG9jYXRpb24uaHJlZjsKCgkgICAgICBQQlN0b3JhZ2VTeW5jLnBiX292ZXJsYXlCbG9ja2VkTGlzdC51cGRhdGUoZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbGlzdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgoJICAgICAgICB2YXIgYmxvY2tzID0gbGlzdFtkb21haW5dIHx8IFtdOwoKCSAgICAgICAgYmxvY2tzLnB1c2goewoJICAgICAgICAgIGlkOiAnYmxvY2stJyArIGJsb2Nrcy5sZW5ndGgsCgkgICAgICAgICAgdXJsOiB1cmwsCgkgICAgICAgICAgZG9tYWluOiBkb21haW4sCgkgICAgICAgICAgcmVjaXBlOiBfdGhpczMubGFzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKCSAgICAgICAgICAgIHJldHVybiBpdGVtLnJlY2lwZTsKCSAgICAgICAgICB9KS5qb2luKCcsICcpCgkgICAgICAgIH0pOwoKCSAgICAgICAgbGlzdFtkb21haW5dID0gYmxvY2tzOwoKCSAgICAgICAgcmV0dXJuIGxpc3Q7CgkgICAgICB9KTsKCSAgICB9CgoJICAgIC8vID09PT09IHJlbW92ZSBvdmVybGF5IGZyb20gbG9jYWwgYmxhY2tsaXN0CgoJICB9LCB7CgkgICAga2V5OiAncmVtb3ZlRnJvbUxvY2FsQmxhY2tsaXN0JywKCSAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRnJvbUxvY2FsQmxhY2tsaXN0KCkgewoJICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgoJICAgICAgdmFyIGRvbWFpbiA9IGRvY3VtZW50LmRvbWFpbjsKCgkgICAgICBQQlN0b3JhZ2VTeW5jLnBiX292ZXJsYXlCbG9ja2VkTGlzdC51cGRhdGUoZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbGlzdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgoJICAgICAgICB2YXIgYmxvY2tzID0gbGlzdFtkb21haW5dIHx8IFtdOwoJICAgICAgICB2YXIgbGFzdFJlY2VwaWVzID0gX3RoaXM0Lmxhc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CgkgICAgICAgICAgcmV0dXJuIGl0ZW0ucmVjaXBlOwoJICAgICAgICB9KTsKCgkgICAgICAgIGJsb2NrcyA9IGJsb2Nrcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKCSAgICAgICAgICByZXR1cm4gbGFzdFJlY2VwaWVzLmluZGV4T2YoaXRlbS5yZWNpcGUpID09IC0xOwoJICAgICAgICB9KTsKCgkgICAgICAgIGxpc3RbZG9tYWluXSA9IGJsb2NrczsKCgkgICAgICAgIHJldHVybiBsaXN0OwoJICAgICAgfSk7CgkgICAgfQoKCSAgICAvLyA9PT09PT09IGF1dG8gYWN0aW9ucyA9PT09PT09PT09CgoJICB9LCB7CgkgICAga2V5OiAnYXV0b0RldGVjdCcsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIGF1dG9EZXRlY3QoKSB7CgkgICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCgkgICAgICB2YXIgYXR0ZW1wdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDsKCgkgICAgICBpZiAoYXR0ZW1wdCA8IDQwKSB7CgkgICAgICAgIC8vbGV0IG92ZXJsYXkgPSB0aGlzLmZpbmQoKTsKCSAgICAgICAgdmFyIGZvdW5kQmxvY2tMaXN0ID0gdGhpcy5mb3JjZUJsb2NrKHRoaXMuYWN0aXZlQmxvY2tMaXN0KTsKCSAgICAgICAgdmFyIGZvdW5kUmVjaXBlTGlzdCA9IHRoaXMuZm9yY2VCbG9jayh0aGlzLmFjdGl2ZVJlY2VwaWVzTGlzdCk7CgoJICAgICAgICAvKmlmIChvdmVybGF5ICYmICF0aGlzLmF1dG9EZXRlY3RlZCkgewoJICAgICAgICAgIGxldCByZWNpcGUgPSBidG9hKHRoaXMuZ2V0UmVjaXBlKG92ZXJsYXkpKTsKCSAgICAgICAgICAgIHRoaXMub25BdXRvRGV0ZWN0KHJlY2lwZSk7CgkgICAgICAgICAgdGhpcy5hdXRvRGV0ZWN0ZWQgPSB0cnVlOwoJICAgICAgICB9Ki8KCgkgICAgICAgIGlmIChmb3VuZEJsb2NrTGlzdC5sZW5ndGgpIHsKCSAgICAgICAgICB0aGlzLm9uQmxvY2tMaXN0Rm91bmQoeyBmb3VuZDogZm91bmRCbG9ja0xpc3QgfSk7CgkgICAgICAgIH0KCgkgICAgICAgIGlmIChmb3VuZFJlY2lwZUxpc3QubGVuZ3RoKSB7CgkgICAgICAgICAgdGhpcy5vblJlY2lwZUZvdW5kKHsgZm91bmQ6IGZvdW5kUmVjaXBlTGlzdCB9KTsKCSAgICAgICAgfQoKCSAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgX3RoaXM1LmF1dG9EZXRlY3QoKythdHRlbXB0KTsKCSAgICAgICAgfSwgMjUwKTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHRoaXMuY2hlY2tSZWNlcGllc1N1Y2Nlc3MoKTsKCSAgICAgIH0KCSAgICB9CgoJICAgIC8vYXV0byBibG9jayBhbGwgb3ZlcmxheXMgZnJvbSBsb2NhbCBkYgoKCSAgfSwgewoJICAgIGtleTogJ2NyZWF0ZUJsb2NrTGlzdEZyb21TdG9yYWdlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQmxvY2tMaXN0RnJvbVN0b3JhZ2UoKSB7CgkgICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCgkgICAgICByZXR1cm4gbmV3IF9Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CgkgICAgICAgIF9zdG9yYWdlMi5kZWZhdWx0LmdldCgncGJfb3ZlcmxheUJsb2NrZWRMaXN0JykudGhlbihmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgdmFyIGxpc3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwoKCSAgICAgICAgICBpZiAobGlzdFtkb2N1bWVudC5kb21haW5dKSB7CgkgICAgICAgICAgICBfdGhpczYuYWN0aXZlQmxvY2tMaXN0ID0gbGlzdFtkb2N1bWVudC5kb21haW5dOwoKCSAgICAgICAgICAgIF90aGlzNi5jcmVhdGVCbG9ja0NTUyhfdGhpczYuYWN0aXZlQmxvY2tMaXN0KTsKCSAgICAgICAgICB9CgoJICAgICAgICAgIHJlc29sdmUoKTsKCSAgICAgICAgfSk7CgkgICAgICB9KTsKCSAgICB9CgoJICAgIC8vYmxvY2sgYWxsIG92ZXJsYXlzIGZvdW5kIGluIHJlY2VwaWVzCgoJICB9LCB7CgkgICAga2V5OiAnY3JlYXRlQmxvY2tMaXN0RnJvbVJlY2VwaWVzJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQmxvY2tMaXN0RnJvbVJlY2VwaWVzKHJlY2VwaWVzKSB7CgkgICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCgkgICAgICAvL2xvY2FsIGJsYWNrbGlzdCBuZWVkcyB0byBiZSBsb2FkZWQgYmVmb3JlIGhhbmRlbGluZyByZWNlcGllcwoJICAgICAgdGhpcy5ibGFja0xpc3RQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYmxvY2tMaXN0ID0gX3RoaXM3LmFjdGl2ZUJsb2NrTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKCSAgICAgICAgICByZXR1cm4gaXRlbS5yZWNpcGU7CgkgICAgICAgIH0pOwoKCSAgICAgICAgcmVjZXBpZXMgPSByZWNlcGllcy5tYXAoZnVuY3Rpb24gKHJlY2lwZSkgewoJICAgICAgICAgIHJldHVybiB7CgkgICAgICAgICAgICByZWNpcGU6IHJlY2lwZSwKCSAgICAgICAgICAgIGZvdW5kOiBmYWxzZQoJICAgICAgICAgIH07CgkgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewoJICAgICAgICAgIHJldHVybiBibG9ja0xpc3QuaW5kZXhPZihpdGVtLnJlY2lwZSkgPT0gLTE7CgkgICAgICAgIH0pOwoKCSAgICAgICAgX3RoaXM3LmFjdGl2ZVJlY2VwaWVzTGlzdCA9IHJlY2VwaWVzOwoKCSAgICAgICAgX3RoaXM3LmNyZWF0ZUJsb2NrQ1NTKHJlY2VwaWVzKTsKCSAgICAgIH0pOwoJICAgIH0KCgkgICAgLy9jaGVja3Mgd2hhdCByZWNlcGllcyB3ZXJlIGZvdW5kIC8gbm90IGZvdW5kIGFuZCByZXBvcnQKCgkgIH0sIHsKCSAgICBrZXk6ICdjaGVja1JlY2VwaWVzU3VjY2VzcycsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrUmVjZXBpZXNTdWNjZXNzKCkgewoJICAgICAgdmFyIG5vdEZvdW5kID0gdGhpcy5hY3RpdmVSZWNlcGllc0xpc3QuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CgkgICAgICAgIHJldHVybiAhaXRlbS5mb3VuZDsKCSAgICAgIH0pOwoKCSAgICAgIGlmIChub3RGb3VuZC5sZW5ndGgpIHsKCSAgICAgICAgdGhpcy5vblJlY2lwZU5vdEZvdW5kKG5vdEZvdW5kKTsKCSAgICAgIH0KCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdjcmVhdGVHbG9iYWxDU1MnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVHbG9iYWxDU1MoKSB7CgkgICAgICB2YXIgaHRtbFN0eWxlID0gKDAsIF9qUXVlcnkyLmRlZmF1bHQpKCdodG1sJykuYXR0cignc3R5bGUnKTsKCSAgICAgIHZhciBib2R5U3R5bGUgPSAoMCwgX2pRdWVyeTIuZGVmYXVsdCkoJ2JvZHknKS5hdHRyKCdzdHlsZScpOwoKCSAgICAgICgwLCBfalF1ZXJ5Mi5kZWZhdWx0KSgnPHN0eWxlIHR5cGU9InRleHQvY3NzIj5odG1sLCBib2R5IHtvdmVyZmxvdzphdXRvICFpbXBvcnRhbnQ7IH08L3N0eWxlPicpLmFwcGVuZFRvKCdoZWFkJyk7CgkgICAgICAoMCwgX2pRdWVyeTIuZGVmYXVsdCkoJ2h0bWwnKS5hdHRyKCdzdHlsZScsIChodG1sU3R5bGUgPyBodG1sU3R5bGUgKyAnOycgOiAnJykgKyAnb3ZlcmZsb3c6YXV0byAhaW1wb3J0YW50OycpOwoJICAgICAgKDAsIF9qUXVlcnkyLmRlZmF1bHQpKCdib2R5JykuYXR0cignc3R5bGUnLCAoYm9keVN0eWxlID8gYm9keVN0eWxlICsgJzsnIDogJycpICsgJ292ZXJmbG93OmF1dG8gIWltcG9ydGFudDsnKTsKCSAgICB9CgoJICAgIC8vYmxvY2tzIG92ZXJsYXlzIHdpdGggY3NzIGZvciBmYXN0ZXIgYmxvY2tpbmcKCgkgIH0sIHsKCSAgICBrZXk6ICdjcmVhdGVCbG9ja0NTUycsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUJsb2NrQ1NTKGxpc3QpIHsKCSAgICAgIHRoaXMuY3JlYXRlR2xvYmFsQ1NTKCk7CgoJICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CgkgICAgICAgIHZhciBjc3MgPSBpdGVtLnJlY2lwZSArICcgeyBkaXNwbGF5Om5vbmUgIWltcG9ydGFudDsgfSc7CgoJICAgICAgICAoMCwgX2pRdWVyeTIuZGVmYXVsdCkoJzxzdHlsZSBjbGFzcz0icHAtcmVtb3ZlLW92ZXJsYXkiIGRhdGEtcmVjaXBlPSInICsgYnRvYShpdGVtLnJlY2lwZSkgKyAnIiB0eXBlPSJ0ZXh0L2NzcyI+JyArIGNzcyArICc8L3N0eWxlPicpLmFwcGVuZFRvKCdoZWFkJyk7CgkgICAgICB9KTsKCSAgICB9CgoJICAgIC8vID09PT09PT09PSBpZiBibG9jayBieSBjc3MgZG9lc24ndCB3b3JrLCB0aGlzIHdpbGwgd29yaywgYnV0IG9ubHkgYWZ0ZXIgRE9NIHJlYWR5CgoJICB9LCB7CgkgICAga2V5OiAnZm9yY2VCbG9jaycsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIGZvcmNlQmxvY2sobGlzdCkgewoJICAgICAgdmFyIGhpZGUgPSBbXTsKCgkgICAgICBsaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewoJICAgICAgICByZXR1cm4gIWl0ZW0uZm91bmQ7CgkgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CgkgICAgICAgIHZhciBvdmVybGF5ID0gKDAsIF9qUXVlcnkyLmRlZmF1bHQpKGl0ZW0ucmVjaXBlKTsKCgkgICAgICAgIGlmIChvdmVybGF5Lmxlbmd0aCkgewoJICAgICAgICAgIGl0ZW0uZm91bmQgPSB0cnVlOwoKCSAgICAgICAgICBoaWRlLnB1c2goaXRlbS5yZWNpcGUpOwoJICAgICAgICB9CgkgICAgICB9KTsKCgkgICAgICBpZiAoaGlkZS5sZW5ndGgpIHsKCSAgICAgICAgdGhpcy5oaWRlKGhpZGUpOwoJICAgICAgfQoKCSAgICAgIHJldHVybiBoaWRlOwoJICAgIH0KCSAgfV0pOwoKCSAgcmV0dXJuIE92ZXJsYXlLaWxsZXI7Cgl9KE92ZXJsYXlEZWN0ZWN0b3IpOwoKCWV4cG9ydHMuZGVmYXVsdCA9IE92ZXJsYXlLaWxsZXI7CgovKioqLyB9KSwKLyogMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIQoJICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2MS4xMi40CgkgKiBodHRwOi8vanF1ZXJ5LmNvbS8KCSAqCgkgKiBJbmNsdWRlcyBTaXp6bGUuanMKCSAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vCgkgKgoJICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKCSAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQoJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQoJICoKCSAqIERhdGU6IDIwMTYtMDUtMjBUMTc6MTdaCgkgKi8KCgkoZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHsKCgkJaWYgKCB0eXBlb2YgbW9kdWxlID09PSAib2JqZWN0IiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICJvYmplY3QiICkgewoJCQkvLyBGb3IgQ29tbW9uSlMgYW5kIENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHdoZXJlIGEgcHJvcGVyIGB3aW5kb3dgCgkJCS8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuCgkJCS8vIEZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgaGF2ZSBhIGB3aW5kb3dgIHdpdGggYSBgZG9jdW1lbnRgCgkJCS8vIChzdWNoIGFzIE5vZGUuanMpLCBleHBvc2UgYSBmYWN0b3J5IGFzIG1vZHVsZS5leHBvcnRzLgoJCQkvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLgoJCQkvLyBlLmcuIHZhciBqUXVlcnkgPSByZXF1aXJlKCJqcXVlcnkiKSh3aW5kb3cpOwoJCQkvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLgoJCQltb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5kb2N1bWVudCA/CgkJCQlmYWN0b3J5KCBnbG9iYWwsIHRydWUgKSA6CgkJCQlmdW5jdGlvbiggdyApIHsKCQkJCQlpZiAoICF3LmRvY3VtZW50ICkgewoJCQkJCQl0aHJvdyBuZXcgRXJyb3IoICJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50IiApOwoJCQkJCX0KCQkJCQlyZXR1cm4gZmFjdG9yeSggdyApOwoJCQkJfTsKCQl9IGVsc2UgewoJCQlmYWN0b3J5KCBnbG9iYWwgKTsKCQl9CgoJLy8gUGFzcyB0aGlzIGlmIHdpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXQKCX0odHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiggd2luZG93LCBub0dsb2JhbCApIHsKCgkvLyBTdXBwb3J0OiBGaXJlZm94IDE4KwoJLy8gQ2FuJ3QgYmUgaW4gc3RyaWN0IG1vZGUsIHNldmVyYWwgbGlicyBpbmNsdWRpbmcgQVNQLk5FVCB0cmFjZQoJLy8gdGhlIHN0YWNrIHZpYSBhcmd1bWVudHMuY2FsbGVyLmNhbGxlZSBhbmQgRmlyZWZveCBkaWVzIGlmCgkvLyB5b3UgdHJ5IHRvIHRyYWNlIHRocm91Z2ggInVzZSBzdHJpY3QiIGNhbGwgY2hhaW5zLiAoIzEzMzM1KQoJLy8idXNlIHN0cmljdCI7Cgl2YXIgZGVsZXRlZElkcyA9IFtdOwoKCXZhciBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDsKCgl2YXIgc2xpY2UgPSBkZWxldGVkSWRzLnNsaWNlOwoKCXZhciBjb25jYXQgPSBkZWxldGVkSWRzLmNvbmNhdDsKCgl2YXIgcHVzaCA9IGRlbGV0ZWRJZHMucHVzaDsKCgl2YXIgaW5kZXhPZiA9IGRlbGV0ZWRJZHMuaW5kZXhPZjsKCgl2YXIgY2xhc3MydHlwZSA9IHt9OwoKCXZhciB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmc7CgoJdmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7CgoJdmFyIHN1cHBvcnQgPSB7fTsKCgoKCXZhcgoJCXZlcnNpb24gPSAiMS4xMi40IiwKCgkJLy8gRGVmaW5lIGEgbG9jYWwgY29weSBvZiBqUXVlcnkKCQlqUXVlcnkgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7CgoJCQkvLyBUaGUgalF1ZXJ5IG9iamVjdCBpcyBhY3R1YWxseSBqdXN0IHRoZSBpbml0IGNvbnN0cnVjdG9yICdlbmhhbmNlZCcKCQkJLy8gTmVlZCBpbml0IGlmIGpRdWVyeSBpcyBjYWxsZWQgKGp1c3QgYWxsb3cgZXJyb3IgdG8gYmUgdGhyb3duIGlmIG5vdCBpbmNsdWRlZCkKCQkJcmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQgKTsKCQl9LAoKCQkvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgSUU8OQoJCS8vIE1ha2Ugc3VyZSB3ZSB0cmltIEJPTSBhbmQgTkJTUAoJCXJ0cmltID0gL15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLAoKCQkvLyBNYXRjaGVzIGRhc2hlZCBzdHJpbmcgZm9yIGNhbWVsaXppbmcKCQlybXNQcmVmaXggPSAvXi1tcy0vLAoJCXJkYXNoQWxwaGEgPSAvLShbXGRhLXpdKS9naSwKCgkJLy8gVXNlZCBieSBqUXVlcnkuY2FtZWxDYXNlIGFzIGNhbGxiYWNrIHRvIHJlcGxhY2UoKQoJCWZjYW1lbENhc2UgPSBmdW5jdGlvbiggYWxsLCBsZXR0ZXIgKSB7CgkJCXJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTsKCQl9OwoKCWpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7CgoJCS8vIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgalF1ZXJ5IGJlaW5nIHVzZWQKCQlqcXVlcnk6IHZlcnNpb24sCgoJCWNvbnN0cnVjdG9yOiBqUXVlcnksCgoJCS8vIFN0YXJ0IHdpdGggYW4gZW1wdHkgc2VsZWN0b3IKCQlzZWxlY3RvcjogIiIsCgoJCS8vIFRoZSBkZWZhdWx0IGxlbmd0aCBvZiBhIGpRdWVyeSBvYmplY3QgaXMgMAoJCWxlbmd0aDogMCwKCgkJdG9BcnJheTogZnVuY3Rpb24oKSB7CgkJCXJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7CgkJfSwKCgkJLy8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUgoJCS8vIEdldCB0aGUgd2hvbGUgbWF0Y2hlZCBlbGVtZW50IHNldCBhcyBhIGNsZWFuIGFycmF5CgkJZ2V0OiBmdW5jdGlvbiggbnVtICkgewoJCQlyZXR1cm4gbnVtICE9IG51bGwgPwoKCQkJCS8vIFJldHVybiBqdXN0IHRoZSBvbmUgZWxlbWVudCBmcm9tIHRoZSBzZXQKCQkJCSggbnVtIDwgMCA/IHRoaXNbIG51bSArIHRoaXMubGVuZ3RoIF0gOiB0aGlzWyBudW0gXSApIDoKCgkJCQkvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5CgkJCQlzbGljZS5jYWxsKCB0aGlzICk7CgkJfSwKCgkJLy8gVGFrZSBhbiBhcnJheSBvZiBlbGVtZW50cyBhbmQgcHVzaCBpdCBvbnRvIHRoZSBzdGFjawoJCS8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KQoJCXB1c2hTdGFjazogZnVuY3Rpb24oIGVsZW1zICkgewoKCQkJLy8gQnVpbGQgYSBuZXcgalF1ZXJ5IG1hdGNoZWQgZWxlbWVudCBzZXQKCQkJdmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApOwoKCQkJLy8gQWRkIHRoZSBvbGQgb2JqZWN0IG9udG8gdGhlIHN0YWNrIChhcyBhIHJlZmVyZW5jZSkKCQkJcmV0LnByZXZPYmplY3QgPSB0aGlzOwoJCQlyZXQuY29udGV4dCA9IHRoaXMuY29udGV4dDsKCgkJCS8vIFJldHVybiB0aGUgbmV3bHktZm9ybWVkIGVsZW1lbnQgc2V0CgkJCXJldHVybiByZXQ7CgkJfSwKCgkJLy8gRXhlY3V0ZSBhIGNhbGxiYWNrIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC4KCQllYWNoOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7CgkJCXJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2sgKTsKCQl9LAoKCQltYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHsKCQkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkubWFwKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgaSApIHsKCQkJCXJldHVybiBjYWxsYmFjay5jYWxsKCBlbGVtLCBpLCBlbGVtICk7CgkJCX0gKSApOwoJCX0sCgoJCXNsaWNlOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTsKCQl9LAoKCQlmaXJzdDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLmVxKCAwICk7CgkJfSwKCgkJbGFzdDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLmVxKCAtMSApOwoJCX0sCgoJCWVxOiBmdW5jdGlvbiggaSApIHsKCQkJdmFyIGxlbiA9IHRoaXMubGVuZ3RoLAoJCQkJaiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTsKCQkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqID49IDAgJiYgaiA8IGxlbiA/IFsgdGhpc1sgaiBdIF0gOiBbXSApOwoJCX0sCgoJCWVuZDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLnByZXZPYmplY3QgfHwgdGhpcy5jb25zdHJ1Y3RvcigpOwoJCX0sCgoJCS8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS4KCQkvLyBCZWhhdmVzIGxpa2UgYW4gQXJyYXkncyBtZXRob2QsIG5vdCBsaWtlIGEgalF1ZXJ5IG1ldGhvZC4KCQlwdXNoOiBwdXNoLAoJCXNvcnQ6IGRlbGV0ZWRJZHMuc29ydCwKCQlzcGxpY2U6IGRlbGV0ZWRJZHMuc3BsaWNlCgl9OwoKCWpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7CgkJdmFyIHNyYywgY29weUlzQXJyYXksIGNvcHksIG5hbWUsIG9wdGlvbnMsIGNsb25lLAoJCQl0YXJnZXQgPSBhcmd1bWVudHNbIDAgXSB8fCB7fSwKCQkJaSA9IDEsCgkJCWxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsCgkJCWRlZXAgPSBmYWxzZTsKCgkJLy8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvbgoJCWlmICggdHlwZW9mIHRhcmdldCA9PT0gImJvb2xlYW4iICkgewoJCQlkZWVwID0gdGFyZ2V0OwoKCQkJLy8gc2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldAoJCQl0YXJnZXQgPSBhcmd1bWVudHNbIGkgXSB8fCB7fTsKCQkJaSsrOwoJCX0KCgkJLy8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpCgkJaWYgKCB0eXBlb2YgdGFyZ2V0ICE9PSAib2JqZWN0IiAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIHRhcmdldCApICkgewoJCQl0YXJnZXQgPSB7fTsKCQl9CgoJCS8vIGV4dGVuZCBqUXVlcnkgaXRzZWxmIGlmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHBhc3NlZAoJCWlmICggaSA9PT0gbGVuZ3RoICkgewoJCQl0YXJnZXQgPSB0aGlzOwoJCQlpLS07CgkJfQoKCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCgkJCS8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXMKCQkJaWYgKCAoIG9wdGlvbnMgPSBhcmd1bWVudHNbIGkgXSApICE9IG51bGwgKSB7CgoJCQkJLy8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdAoJCQkJZm9yICggbmFtZSBpbiBvcHRpb25zICkgewoJCQkJCXNyYyA9IHRhcmdldFsgbmFtZSBdOwoJCQkJCWNvcHkgPSBvcHRpb25zWyBuYW1lIF07CgoJCQkJCS8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3AKCQkJCQlpZiAoIHRhcmdldCA9PT0gY29weSApIHsKCQkJCQkJY29udGludWU7CgkJCQkJfQoKCQkJCQkvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXMKCQkJCQlpZiAoIGRlZXAgJiYgY29weSAmJiAoIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb3B5ICkgfHwKCQkJCQkJKCBjb3B5SXNBcnJheSA9IGpRdWVyeS5pc0FycmF5KCBjb3B5ICkgKSApICkgewoKCQkJCQkJaWYgKCBjb3B5SXNBcnJheSApIHsKCQkJCQkJCWNvcHlJc0FycmF5ID0gZmFsc2U7CgkJCQkJCQljbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNBcnJheSggc3JjICkgPyBzcmMgOiBbXTsKCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQljbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggc3JjICkgPyBzcmMgOiB7fTsKCQkJCQkJfQoKCQkJCQkJLy8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtCgkJCQkJCXRhcmdldFsgbmFtZSBdID0galF1ZXJ5LmV4dGVuZCggZGVlcCwgY2xvbmUsIGNvcHkgKTsKCgkJCQkJLy8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlcwoJCQkJCX0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHsKCQkJCQkJdGFyZ2V0WyBuYW1lIF0gPSBjb3B5OwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJLy8gUmV0dXJuIHRoZSBtb2RpZmllZCBvYmplY3QKCQlyZXR1cm4gdGFyZ2V0OwoJfTsKCglqUXVlcnkuZXh0ZW5kKCB7CgoJCS8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZQoJCWV4cGFuZG86ICJqUXVlcnkiICsgKCB2ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cRC9nLCAiIiApLAoKCQkvLyBBc3N1bWUgalF1ZXJ5IGlzIHJlYWR5IHdpdGhvdXQgdGhlIHJlYWR5IG1vZHVsZQoJCWlzUmVhZHk6IHRydWUsCgoJCWVycm9yOiBmdW5jdGlvbiggbXNnICkgewoJCQl0aHJvdyBuZXcgRXJyb3IoIG1zZyApOwoJCX0sCgoJCW5vb3A6IGZ1bmN0aW9uKCkge30sCgoJCS8vIFNlZSB0ZXN0L3VuaXQvY29yZS5qcyBmb3IgZGV0YWlscyBjb25jZXJuaW5nIGlzRnVuY3Rpb24uCgkJLy8gU2luY2UgdmVyc2lvbiAxLjMsIERPTSBtZXRob2RzIGFuZCBmdW5jdGlvbnMgbGlrZSBhbGVydAoJCS8vIGFyZW4ndCBzdXBwb3J0ZWQuIFRoZXkgcmV0dXJuIGZhbHNlIG9uIElFICgjMjk2OCkuCgkJaXNGdW5jdGlvbjogZnVuY3Rpb24oIG9iaiApIHsKCQkJcmV0dXJuIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gImZ1bmN0aW9uIjsKCQl9LAoKCQlpc0FycmF5OiBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKCBvYmogKSB7CgkJCXJldHVybiBqUXVlcnkudHlwZSggb2JqICkgPT09ICJhcnJheSI7CgkJfSwKCgkJaXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7CgkJCS8qIGpzaGludCBlcWVxZXE6IGZhbHNlICovCgkJCXJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT0gb2JqLndpbmRvdzsKCQl9LAoKCQlpc051bWVyaWM6IGZ1bmN0aW9uKCBvYmogKSB7CgoJCQkvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAobnVsbHx0cnVlfGZhbHNlfCIiKQoJCQkvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzICgiMHguLi4iKQoJCQkvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU4KCQkJLy8gYWRkaW5nIDEgY29ycmVjdHMgbG9zcyBvZiBwcmVjaXNpb24gZnJvbSBwYXJzZUZsb2F0ICgjMTUxMDApCgkJCXZhciByZWFsU3RyaW5nT2JqID0gb2JqICYmIG9iai50b1N0cmluZygpOwoJCQlyZXR1cm4gIWpRdWVyeS5pc0FycmF5KCBvYmogKSAmJiAoIHJlYWxTdHJpbmdPYmogLSBwYXJzZUZsb2F0KCByZWFsU3RyaW5nT2JqICkgKyAxICkgPj0gMDsKCQl9LAoKCQlpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiggb2JqICkgewoJCQl2YXIgbmFtZTsKCQkJZm9yICggbmFtZSBpbiBvYmogKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJcmV0dXJuIHRydWU7CgkJfSwKCgkJaXNQbGFpbk9iamVjdDogZnVuY3Rpb24oIG9iaiApIHsKCQkJdmFyIGtleTsKCgkJCS8vIE11c3QgYmUgYW4gT2JqZWN0LgoJCQkvLyBCZWNhdXNlIG9mIElFLCB3ZSBhbHNvIGhhdmUgdG8gY2hlY2sgdGhlIHByZXNlbmNlIG9mIHRoZSBjb25zdHJ1Y3RvciBwcm9wZXJ0eS4KCQkJLy8gTWFrZSBzdXJlIHRoYXQgRE9NIG5vZGVzIGFuZCB3aW5kb3cgb2JqZWN0cyBkb24ndCBwYXNzIHRocm91Z2gsIGFzIHdlbGwKCQkJaWYgKCAhb2JqIHx8IGpRdWVyeS50eXBlKCBvYmogKSAhPT0gIm9iamVjdCIgfHwgb2JqLm5vZGVUeXBlIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCgkJCXRyeSB7CgoJCQkJLy8gTm90IG93biBjb25zdHJ1Y3RvciBwcm9wZXJ0eSBtdXN0IGJlIE9iamVjdAoJCQkJaWYgKCBvYmouY29uc3RydWN0b3IgJiYKCQkJCQkhaGFzT3duLmNhbGwoIG9iaiwgImNvbnN0cnVjdG9yIiApICYmCgkJCQkJIWhhc093bi5jYWxsKCBvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCAiaXNQcm90b3R5cGVPZiIgKSApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0gY2F0Y2ggKCBlICkgewoKCQkJCS8vIElFOCw5IFdpbGwgdGhyb3cgZXhjZXB0aW9ucyBvbiBjZXJ0YWluIGhvc3Qgb2JqZWN0cyAjOTg5NwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCS8vIEhhbmRsZSBpdGVyYXRpb24gb3ZlciBpbmhlcml0ZWQgcHJvcGVydGllcyBiZWZvcmUgb3duIHByb3BlcnRpZXMuCgkJCWlmICggIXN1cHBvcnQub3duRmlyc3QgKSB7CgkJCQlmb3IgKCBrZXkgaW4gb2JqICkgewoJCQkJCXJldHVybiBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTsKCQkJCX0KCQkJfQoKCQkJLy8gT3duIHByb3BlcnRpZXMgYXJlIGVudW1lcmF0ZWQgZmlyc3RseSwgc28gdG8gc3BlZWQgdXAsCgkJCS8vIGlmIGxhc3Qgb25lIGlzIG93biwgdGhlbiBhbGwgcHJvcGVydGllcyBhcmUgb3duLgoJCQlmb3IgKCBrZXkgaW4gb2JqICkge30KCgkJCXJldHVybiBrZXkgPT09IHVuZGVmaW5lZCB8fCBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTsKCQl9LAoKCQl0eXBlOiBmdW5jdGlvbiggb2JqICkgewoJCQlpZiAoIG9iaiA9PSBudWxsICkgewoJCQkJcmV0dXJuIG9iaiArICIiOwoJCQl9CgkJCXJldHVybiB0eXBlb2Ygb2JqID09PSAib2JqZWN0IiB8fCB0eXBlb2Ygb2JqID09PSAiZnVuY3Rpb24iID8KCQkJCWNsYXNzMnR5cGVbIHRvU3RyaW5nLmNhbGwoIG9iaiApIF0gfHwgIm9iamVjdCIgOgoJCQkJdHlwZW9mIG9iajsKCQl9LAoKCQkvLyBXb3JrYXJvdW5kcyBiYXNlZCBvbiBmaW5kaW5ncyBieSBKaW0gRHJpc2NvbGwKCQkvLyBodHRwOi8vd2VibG9ncy5qYXZhLm5ldC9ibG9nL2RyaXNjb2xsL2FyY2hpdmUvMjAwOS8wOS8wOC9ldmFsLWphdmFzY3JpcHQtZ2xvYmFsLWNvbnRleHQKCQlnbG9iYWxFdmFsOiBmdW5jdGlvbiggZGF0YSApIHsKCQkJaWYgKCBkYXRhICYmIGpRdWVyeS50cmltKCBkYXRhICkgKSB7CgoJCQkJLy8gV2UgdXNlIGV4ZWNTY3JpcHQgb24gSW50ZXJuZXQgRXhwbG9yZXIKCQkJCS8vIFdlIHVzZSBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gc28gdGhhdCBjb250ZXh0IGlzIHdpbmRvdwoJCQkJLy8gcmF0aGVyIHRoYW4galF1ZXJ5IGluIEZpcmVmb3gKCQkJCSggd2luZG93LmV4ZWNTY3JpcHQgfHwgZnVuY3Rpb24oIGRhdGEgKSB7CgkJCQkJd2luZG93WyAiZXZhbCIgXS5jYWxsKCB3aW5kb3csIGRhdGEgKTsgLy8ganNjczppZ25vcmUgcmVxdWlyZURvdE5vdGF0aW9uCgkJCQl9ICkoIGRhdGEgKTsKCQkJfQoJCX0sCgoJCS8vIENvbnZlcnQgZGFzaGVkIHRvIGNhbWVsQ2FzZTsgdXNlZCBieSB0aGUgY3NzIGFuZCBkYXRhIG1vZHVsZXMKCQkvLyBNaWNyb3NvZnQgZm9yZ290IHRvIGh1bXAgdGhlaXIgdmVuZG9yIHByZWZpeCAoIzk1NzIpCgkJY2FtZWxDYXNlOiBmdW5jdGlvbiggc3RyaW5nICkgewoJCQlyZXR1cm4gc3RyaW5nLnJlcGxhY2UoIHJtc1ByZWZpeCwgIm1zLSIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7CgkJfSwKCgkJbm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCQlyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTsKCQl9LAoKCQllYWNoOiBmdW5jdGlvbiggb2JqLCBjYWxsYmFjayApIHsKCQkJdmFyIGxlbmd0aCwgaSA9IDA7CgoJCQlpZiAoIGlzQXJyYXlMaWtlKCBvYmogKSApIHsKCQkJCWxlbmd0aCA9IG9iai5sZW5ndGg7CgkJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCQkJCQlpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJZm9yICggaSBpbiBvYmogKSB7CgkJCQkJaWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJcmV0dXJuIG9iajsKCQl9LAoKCQkvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgSUU8OQoJCXRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkgewoJCQlyZXR1cm4gdGV4dCA9PSBudWxsID8KCQkJCSIiIDoKCQkJCSggdGV4dCArICIiICkucmVwbGFjZSggcnRyaW0sICIiICk7CgkJfSwKCgkJLy8gcmVzdWx0cyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seQoJCW1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHsKCQkJdmFyIHJldCA9IHJlc3VsdHMgfHwgW107CgoJCQlpZiAoIGFyciAhPSBudWxsICkgewoJCQkJaWYgKCBpc0FycmF5TGlrZSggT2JqZWN0KCBhcnIgKSApICkgewoJCQkJCWpRdWVyeS5tZXJnZSggcmV0LAoJCQkJCQl0eXBlb2YgYXJyID09PSAic3RyaW5nIiA/CgkJCQkJCVsgYXJyIF0gOiBhcnIKCQkJCQkpOwoJCQkJfSBlbHNlIHsKCQkJCQlwdXNoLmNhbGwoIHJldCwgYXJyICk7CgkJCQl9CgkJCX0KCgkJCXJldHVybiByZXQ7CgkJfSwKCgkJaW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHsKCQkJdmFyIGxlbjsKCgkJCWlmICggYXJyICkgewoJCQkJaWYgKCBpbmRleE9mICkgewoJCQkJCXJldHVybiBpbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApOwoJCQkJfQoKCQkJCWxlbiA9IGFyci5sZW5ndGg7CgkJCQlpID0gaSA/IGkgPCAwID8gTWF0aC5tYXgoIDAsIGxlbiArIGkgKSA6IGkgOiAwOwoKCQkJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoKCQkJCQkvLyBTa2lwIGFjY2Vzc2luZyBpbiBzcGFyc2UgYXJyYXlzCgkJCQkJaWYgKCBpIGluIGFyciAmJiBhcnJbIGkgXSA9PT0gZWxlbSApIHsKCQkJCQkJcmV0dXJuIGk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gLTE7CgkJfSwKCgkJbWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkgewoJCQl2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsCgkJCQlqID0gMCwKCQkJCWkgPSBmaXJzdC5sZW5ndGg7CgoJCQl3aGlsZSAoIGogPCBsZW4gKSB7CgkJCQlmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGorKyBdOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCS8vIFdvcmthcm91bmQgY2FzdGluZyBvZiAubGVuZ3RoIHRvIE5hTiBvbiBvdGhlcndpc2UgYXJyYXlsaWtlIG9iamVjdHMgKGUuZy4sIE5vZGVMaXN0cykKCQkJaWYgKCBsZW4gIT09IGxlbiApIHsKCQkJCXdoaWxlICggc2Vjb25kWyBqIF0gIT09IHVuZGVmaW5lZCApIHsKCQkJCQlmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGorKyBdOwoJCQkJfQoJCQl9CgoJCQlmaXJzdC5sZW5ndGggPSBpOwoKCQkJcmV0dXJuIGZpcnN0OwoJCX0sCgoJCWdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludmVydCApIHsKCQkJdmFyIGNhbGxiYWNrSW52ZXJzZSwKCQkJCW1hdGNoZXMgPSBbXSwKCQkJCWkgPSAwLAoJCQkJbGVuZ3RoID0gZWxlbXMubGVuZ3RoLAoJCQkJY2FsbGJhY2tFeHBlY3QgPSAhaW52ZXJ0OwoKCQkJLy8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtcwoJCQkvLyB0aGF0IHBhc3MgdGhlIHZhbGlkYXRvciBmdW5jdGlvbgoJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCQkJCWNhbGxiYWNrSW52ZXJzZSA9ICFjYWxsYmFjayggZWxlbXNbIGkgXSwgaSApOwoJCQkJaWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkgewoJCQkJCW1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApOwoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gbWF0Y2hlczsKCQl9LAoKCQkvLyBhcmcgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHkKCQltYXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGFyZyApIHsKCQkJdmFyIGxlbmd0aCwgdmFsdWUsCgkJCQlpID0gMCwKCQkJCXJldCA9IFtdOwoKCQkJLy8gR28gdGhyb3VnaCB0aGUgYXJyYXksIHRyYW5zbGF0aW5nIGVhY2ggb2YgdGhlIGl0ZW1zIHRvIHRoZWlyIG5ldyB2YWx1ZXMKCQkJaWYgKCBpc0FycmF5TGlrZSggZWxlbXMgKSApIHsKCQkJCWxlbmd0aCA9IGVsZW1zLmxlbmd0aDsKCQkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoJCQkJCXZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApOwoKCQkJCQlpZiAoIHZhbHVlICE9IG51bGwgKSB7CgkJCQkJCXJldC5wdXNoKCB2YWx1ZSApOwoJCQkJCX0KCQkJCX0KCgkJCS8vIEdvIHRocm91Z2ggZXZlcnkga2V5IG9uIHRoZSBvYmplY3QsCgkJCX0gZWxzZSB7CgkJCQlmb3IgKCBpIGluIGVsZW1zICkgewoJCQkJCXZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApOwoKCQkJCQlpZiAoIHZhbHVlICE9IG51bGwgKSB7CgkJCQkJCXJldC5wdXNoKCB2YWx1ZSApOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5cwoJCQlyZXR1cm4gY29uY2F0LmFwcGx5KCBbXSwgcmV0ICk7CgkJfSwKCgkJLy8gQSBnbG9iYWwgR1VJRCBjb3VudGVyIGZvciBvYmplY3RzCgkJZ3VpZDogMSwKCgkJLy8gQmluZCBhIGZ1bmN0aW9uIHRvIGEgY29udGV4dCwgb3B0aW9uYWxseSBwYXJ0aWFsbHkgYXBwbHlpbmcgYW55CgkJLy8gYXJndW1lbnRzLgoJCXByb3h5OiBmdW5jdGlvbiggZm4sIGNvbnRleHQgKSB7CgkJCXZhciBhcmdzLCBwcm94eSwgdG1wOwoKCQkJaWYgKCB0eXBlb2YgY29udGV4dCA9PT0gInN0cmluZyIgKSB7CgkJCQl0bXAgPSBmblsgY29udGV4dCBdOwoJCQkJY29udGV4dCA9IGZuOwoJCQkJZm4gPSB0bXA7CgkJCX0KCgkJCS8vIFF1aWNrIGNoZWNrIHRvIGRldGVybWluZSBpZiB0YXJnZXQgaXMgY2FsbGFibGUsIGluIHRoZSBzcGVjCgkJCS8vIHRoaXMgdGhyb3dzIGEgVHlwZUVycm9yLCBidXQgd2Ugd2lsbCBqdXN0IHJldHVybiB1bmRlZmluZWQuCgkJCWlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCBmbiApICkgewoJCQkJcmV0dXJuIHVuZGVmaW5lZDsKCQkJfQoKCQkJLy8gU2ltdWxhdGVkIGJpbmQKCQkJYXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMiApOwoJCQlwcm94eSA9IGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIGZuLmFwcGx5KCBjb250ZXh0IHx8IHRoaXMsIGFyZ3MuY29uY2F0KCBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSApICk7CgkJCX07CgoJCQkvLyBTZXQgdGhlIGd1aWQgb2YgdW5pcXVlIGhhbmRsZXIgdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgaGFuZGxlciwgc28gaXQgY2FuIGJlIHJlbW92ZWQKCQkJcHJveHkuZ3VpZCA9IGZuLmd1aWQgPSBmbi5ndWlkIHx8IGpRdWVyeS5ndWlkKys7CgoJCQlyZXR1cm4gcHJveHk7CgkJfSwKCgkJbm93OiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuICsoIG5ldyBEYXRlKCkgKTsKCQl9LAoKCQkvLyBqUXVlcnkuc3VwcG9ydCBpcyBub3QgdXNlZCBpbiBDb3JlIGJ1dCBvdGhlciBwcm9qZWN0cyBhdHRhY2ggdGhlaXIKCQkvLyBwcm9wZXJ0aWVzIHRvIGl0IHNvIGl0IG5lZWRzIHRvIGV4aXN0LgoJCXN1cHBvcnQ6IHN1cHBvcnQKCX0gKTsKCgkvLyBKU0hpbnQgd291bGQgZXJyb3Igb24gdGhpcyBjb2RlIGR1ZSB0byB0aGUgU3ltYm9sIG5vdCBiZWluZyBkZWZpbmVkIGluIEVTNS4KCS8vIERlZmluaW5nIHRoaXMgZ2xvYmFsIGluIC5qc2hpbnRyYyB3b3VsZCBjcmVhdGUgYSBkYW5nZXIgb2YgdXNpbmcgdGhlIGdsb2JhbAoJLy8gdW5ndWFyZGVkIGluIGFub3RoZXIgcGxhY2UsIGl0IHNlZW1zIHNhZmVyIHRvIGp1c3QgZGlzYWJsZSBKU0hpbnQgZm9yIHRoZXNlCgkvLyB0aHJlZSBsaW5lcy4KCS8qIGpzaGludCBpZ25vcmU6IHN0YXJ0ICovCglpZiAoIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgKSB7CgkJalF1ZXJ5LmZuWyBTeW1ib2wuaXRlcmF0b3IgXSA9IGRlbGV0ZWRJZHNbIFN5bWJvbC5pdGVyYXRvciBdOwoJfQoJLyoganNoaW50IGlnbm9yZTogZW5kICovCgoJLy8gUG9wdWxhdGUgdGhlIGNsYXNzMnR5cGUgbWFwCglqUXVlcnkuZWFjaCggIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCggIiAiICksCglmdW5jdGlvbiggaSwgbmFtZSApIHsKCQljbGFzczJ0eXBlWyAiW29iamVjdCAiICsgbmFtZSArICJdIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpOwoJfSApOwoKCWZ1bmN0aW9uIGlzQXJyYXlMaWtlKCBvYmogKSB7CgoJCS8vIFN1cHBvcnQ6IGlPUyA4LjIgKG5vdCByZXByb2R1Y2libGUgaW4gc2ltdWxhdG9yKQoJCS8vIGBpbmAgY2hlY2sgdXNlZCB0byBwcmV2ZW50IEpJVCBlcnJvciAoZ2gtMjE0NSkKCQkvLyBoYXNPd24gaXNuJ3QgdXNlZCBoZXJlIGR1ZSB0byBmYWxzZSBuZWdhdGl2ZXMKCQkvLyByZWdhcmRpbmcgTm9kZWxpc3QgbGVuZ3RoIGluIElFCgkJdmFyIGxlbmd0aCA9ICEhb2JqICYmICJsZW5ndGgiIGluIG9iaiAmJiBvYmoubGVuZ3RoLAoJCQl0eXBlID0galF1ZXJ5LnR5cGUoIG9iaiApOwoKCQlpZiAoIHR5cGUgPT09ICJmdW5jdGlvbiIgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJcmV0dXJuIHR5cGUgPT09ICJhcnJheSIgfHwgbGVuZ3RoID09PSAwIHx8CgkJCXR5cGVvZiBsZW5ndGggPT09ICJudW1iZXIiICYmIGxlbmd0aCA+IDAgJiYgKCBsZW5ndGggLSAxICkgaW4gb2JqOwoJfQoJdmFyIFNpenpsZSA9CgkvKiEKCSAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYyLjIuMQoJICogaHR0cDovL3NpenpsZWpzLmNvbS8KCSAqCgkgKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwoJICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCgkgKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCgkgKgoJICogRGF0ZTogMjAxNS0xMC0xNwoJICovCgkoZnVuY3Rpb24oIHdpbmRvdyApIHsKCgl2YXIgaSwKCQlzdXBwb3J0LAoJCUV4cHIsCgkJZ2V0VGV4dCwKCQlpc1hNTCwKCQl0b2tlbml6ZSwKCQljb21waWxlLAoJCXNlbGVjdCwKCQlvdXRlcm1vc3RDb250ZXh0LAoJCXNvcnRJbnB1dCwKCQloYXNEdXBsaWNhdGUsCgoJCS8vIExvY2FsIGRvY3VtZW50IHZhcnMKCQlzZXREb2N1bWVudCwKCQlkb2N1bWVudCwKCQlkb2NFbGVtLAoJCWRvY3VtZW50SXNIVE1MLAoJCXJidWdneVFTQSwKCQlyYnVnZ3lNYXRjaGVzLAoJCW1hdGNoZXMsCgkJY29udGFpbnMsCgoJCS8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGEKCQlleHBhbmRvID0gInNpenpsZSIgKyAxICogbmV3IERhdGUoKSwKCQlwcmVmZXJyZWREb2MgPSB3aW5kb3cuZG9jdW1lbnQsCgkJZGlycnVucyA9IDAsCgkJZG9uZSA9IDAsCgkJY2xhc3NDYWNoZSA9IGNyZWF0ZUNhY2hlKCksCgkJdG9rZW5DYWNoZSA9IGNyZWF0ZUNhY2hlKCksCgkJY29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksCgkJc29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7CgkJCWlmICggYSA9PT0gYiApIHsKCQkJCWhhc0R1cGxpY2F0ZSA9IHRydWU7CgkJCX0KCQkJcmV0dXJuIDA7CgkJfSwKCgkJLy8gR2VuZXJhbC1wdXJwb3NlIGNvbnN0YW50cwoJCU1BWF9ORUdBVElWRSA9IDEgPDwgMzEsCgoJCS8vIEluc3RhbmNlIG1ldGhvZHMKCQloYXNPd24gPSAoe30pLmhhc093blByb3BlcnR5LAoJCWFyciA9IFtdLAoJCXBvcCA9IGFyci5wb3AsCgkJcHVzaF9uYXRpdmUgPSBhcnIucHVzaCwKCQlwdXNoID0gYXJyLnB1c2gsCgkJc2xpY2UgPSBhcnIuc2xpY2UsCgkJLy8gVXNlIGEgc3RyaXBwZWQtZG93biBpbmRleE9mIGFzIGl0J3MgZmFzdGVyIHRoYW4gbmF0aXZlCgkJLy8gaHR0cDovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81CgkJaW5kZXhPZiA9IGZ1bmN0aW9uKCBsaXN0LCBlbGVtICkgewoJCQl2YXIgaSA9IDAsCgkJCQlsZW4gPSBsaXN0Lmxlbmd0aDsKCQkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCQlpZiAoIGxpc3RbaV0gPT09IGVsZW0gKSB7CgkJCQkJcmV0dXJuIGk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIC0xOwoJCX0sCgoJCWJvb2xlYW5zID0gImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIiwKCgkJLy8gUmVndWxhciBleHByZXNzaW9ucwoKCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZQoJCXdoaXRlc3BhY2UgPSAiW1xceDIwXFx0XFxyXFxuXFxmXSIsCgoJCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCN2YWx1ZS1kZWYtaWRlbnRpZmllcgoJCWlkZW50aWZpZXIgPSAiKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLAoKCQkvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnMKCQlhdHRyaWJ1dGVzID0gIlxcWyIgKyB3aGl0ZXNwYWNlICsgIiooIiArIGlkZW50aWZpZXIgKyAiKSg/OiIgKyB3aGl0ZXNwYWNlICsKCQkJLy8gT3BlcmF0b3IgKGNhcHR1cmUgMikKCQkJIiooWypeJHwhfl0/PSkiICsgd2hpdGVzcGFjZSArCgkJCS8vICJBdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgQ1NTIGlkZW50aWZpZXJzIFtjYXB0dXJlIDVdIG9yIHN0cmluZ3MgW2NhcHR1cmUgMyBvciBjYXB0dXJlIDRdIgoJCQkiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiICsgaWRlbnRpZmllciArICIpKXwpIiArIHdoaXRlc3BhY2UgKwoJCQkiKlxcXSIsCgoJCXBzZXVkb3MgPSAiOigiICsgaWRlbnRpZmllciArICIpKD86XFwoKCIgKwoJCQkvLyBUbyByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnMgbmVlZGluZyB0b2tlbml6ZSBpbiB0aGUgcHJlRmlsdGVyLCBwcmVmZXIgYXJndW1lbnRzOgoJCQkvLyAxLiBxdW90ZWQgKGNhcHR1cmUgMzsgY2FwdHVyZSA0IG9yIGNhcHR1cmUgNSkKCQkJIignKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8IiArCgkJCS8vIDIuIHNpbXBsZSAoY2FwdHVyZSA2KQoJCQkiKCg/OlxcXFwufFteXFxcXCgpW1xcXV18IiArIGF0dHJpYnV0ZXMgKyAiKSopfCIgKwoJCQkvLyAzLiBhbnl0aGluZyBlbHNlIChjYXB0dXJlIDIpCgkJCSIuKiIgKwoJCQkiKVxcKXwpIiwKCgkJLy8gTGVhZGluZyBhbmQgbm9uLWVzY2FwZWQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgY2FwdHVyaW5nIHNvbWUgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycyBwcmVjZWRpbmcgdGhlIGxhdHRlcgoJCXJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArICIrIiwgImciICksCgkJcnRyaW0gPSBuZXcgUmVnRXhwKCAiXiIgKyB3aGl0ZXNwYWNlICsgIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIgKyB3aGl0ZXNwYWNlICsgIiskIiwgImciICksCgoJCXJjb21tYSA9IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKiwiICsgd2hpdGVzcGFjZSArICIqIiApLAoJCXJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKihbPit+XXwiICsgd2hpdGVzcGFjZSArICIpIiArIHdoaXRlc3BhY2UgKyAiKiIgKSwKCgkJcmF0dHJpYnV0ZVF1b3RlcyA9IG5ldyBSZWdFeHAoICI9IiArIHdoaXRlc3BhY2UgKyAiKihbXlxcXSdcIl0qPykiICsgd2hpdGVzcGFjZSArICIqXFxdIiwgImciICksCgoJCXJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksCgkJcmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCAiXiIgKyBpZGVudGlmaWVyICsgIiQiICksCgoJCW1hdGNoRXhwciA9IHsKCQkJIklEIjogbmV3IFJlZ0V4cCggIl4jKCIgKyBpZGVudGlmaWVyICsgIikiICksCgkJCSJDTEFTUyI6IG5ldyBSZWdFeHAoICJeXFwuKCIgKyBpZGVudGlmaWVyICsgIikiICksCgkJCSJUQUciOiBuZXcgUmVnRXhwKCAiXigiICsgaWRlbnRpZmllciArICJ8WypdKSIgKSwKCQkJIkFUVFIiOiBuZXcgUmVnRXhwKCAiXiIgKyBhdHRyaWJ1dGVzICksCgkJCSJQU0VVRE8iOiBuZXcgUmVnRXhwKCAiXiIgKyBwc2V1ZG9zICksCgkJCSJDSElMRCI6IG5ldyBSZWdFeHAoICJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiICsgd2hpdGVzcGFjZSArCgkJCQkiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIgKyB3aGl0ZXNwYWNlICsgIiooPzooWystXXwpIiArIHdoaXRlc3BhY2UgKwoJCQkJIiooXFxkKyl8KSkiICsgd2hpdGVzcGFjZSArICIqXFwpfCkiLCAiaSIgKSwKCQkJImJvb2wiOiBuZXcgUmVnRXhwKCAiXig/OiIgKyBib29sZWFucyArICIpJCIsICJpIiApLAoJCQkvLyBGb3IgdXNlIGluIGxpYnJhcmllcyBpbXBsZW1lbnRpbmcgLmlzKCkKCQkJLy8gV2UgdXNlIHRoaXMgZm9yIFBPUyBtYXRjaGluZyBpbiBgc2VsZWN0YAoJCQkibmVlZHNDb250ZXh0IjogbmV3IFJlZ0V4cCggIl4iICsgd2hpdGVzcGFjZSArICIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiICsKCQkJCXdoaXRlc3BhY2UgKyAiKigoPzotXFxkKT9cXGQqKSIgKyB3aGl0ZXNwYWNlICsgIipcXCl8KSg/PVteLV18JCkiLCAiaSIgKQoJCX0sCgoJCXJpbnB1dHMgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLAoJCXJoZWFkZXIgPSAvXmhcZCQvaSwKCgkJcm5hdGl2ZSA9IC9eW157XStce1xzKlxbbmF0aXZlIFx3LywKCgkJLy8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzCgkJcnF1aWNrRXhwciA9IC9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sCgoJCXJzaWJsaW5nID0gL1srfl0vLAoJCXJlc2NhcGUgPSAvJ3xcXC9nLAoKCQkvLyBDU1MgZXNjYXBlcyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzCgkJcnVuZXNjYXBlID0gbmV3IFJlZ0V4cCggIlxcXFwoW1xcZGEtZl17MSw2fSIgKyB3aGl0ZXNwYWNlICsgIj98KCIgKyB3aGl0ZXNwYWNlICsgIil8LikiLCAiaWciICksCgkJZnVuZXNjYXBlID0gZnVuY3Rpb24oIF8sIGVzY2FwZWQsIGVzY2FwZWRXaGl0ZXNwYWNlICkgewoJCQl2YXIgaGlnaCA9ICIweCIgKyBlc2NhcGVkIC0gMHgxMDAwMDsKCQkJLy8gTmFOIG1lYW5zIG5vbi1jb2RlcG9pbnQKCQkJLy8gU3VwcG9ydDogRmlyZWZveDwyNAoJCQkvLyBXb3JrYXJvdW5kIGVycm9uZW91cyBudW1lcmljIGludGVycHJldGF0aW9uIG9mICsiMHgiCgkJCXJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID8KCQkJCWVzY2FwZWQgOgoJCQkJaGlnaCA8IDAgPwoJCQkJCS8vIEJNUCBjb2RlcG9pbnQKCQkJCQlTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoICsgMHgxMDAwMCApIDoKCQkJCQkvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcikKCQkJCQlTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoID4+IDEwIHwgMHhEODAwLCBoaWdoICYgMHgzRkYgfCAweERDMDAgKTsKCQl9LAoKCQkvLyBVc2VkIGZvciBpZnJhbWVzCgkJLy8gU2VlIHNldERvY3VtZW50KCkKCQkvLyBSZW1vdmluZyB0aGUgZnVuY3Rpb24gd3JhcHBlciBjYXVzZXMgYSAiUGVybWlzc2lvbiBEZW5pZWQiCgkJLy8gZXJyb3IgaW4gSUUKCQl1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7CgkJCXNldERvY3VtZW50KCk7CgkJfTsKCgkvLyBPcHRpbWl6ZSBmb3IgcHVzaC5hcHBseSggXywgTm9kZUxpc3QgKQoJdHJ5IHsKCQlwdXNoLmFwcGx5KAoJCQkoYXJyID0gc2xpY2UuY2FsbCggcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMgKSksCgkJCXByZWZlcnJlZERvYy5jaGlsZE5vZGVzCgkJKTsKCQkvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMAoJCS8vIERldGVjdCBzaWxlbnRseSBmYWlsaW5nIHB1c2guYXBwbHkKCQlhcnJbIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzLmxlbmd0aCBdLm5vZGVUeXBlOwoJfSBjYXRjaCAoIGUgKSB7CgkJcHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggPwoKCQkJLy8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGUKCQkJZnVuY3Rpb24oIHRhcmdldCwgZWxzICkgewoJCQkJcHVzaF9uYXRpdmUuYXBwbHkoIHRhcmdldCwgc2xpY2UuY2FsbChlbHMpICk7CgkJCX0gOgoKCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5CgkJCWZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHsKCQkJCXZhciBqID0gdGFyZ2V0Lmxlbmd0aCwKCQkJCQlpID0gMDsKCQkJCS8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aAoJCQkJd2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fQoJCQkJdGFyZ2V0Lmxlbmd0aCA9IGogLSAxOwoJCQl9CgkJfTsKCX0KCglmdW5jdGlvbiBTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkgewoJCXZhciBtLCBpLCBlbGVtLCBuaWQsIG5pZHNlbGVjdCwgbWF0Y2gsIGdyb3VwcywgbmV3U2VsZWN0b3IsCgkJCW5ld0NvbnRleHQgPSBjb250ZXh0ICYmIGNvbnRleHQub3duZXJEb2N1bWVudCwKCgkJCS8vIG5vZGVUeXBlIGRlZmF1bHRzIHRvIDksIHNpbmNlIGNvbnRleHQgZGVmYXVsdHMgdG8gZG9jdW1lbnQKCQkJbm9kZVR5cGUgPSBjb250ZXh0ID8gY29udGV4dC5ub2RlVHlwZSA6IDk7CgoJCXJlc3VsdHMgPSByZXN1bHRzIHx8IFtdOwoKCQkvLyBSZXR1cm4gZWFybHkgZnJvbSBjYWxscyB3aXRoIGludmFsaWQgc2VsZWN0b3Igb3IgY29udGV4dAoJCWlmICggdHlwZW9mIHNlbGVjdG9yICE9PSAic3RyaW5nIiB8fCAhc2VsZWN0b3IgfHwKCQkJbm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgJiYgbm9kZVR5cGUgIT09IDExICkgewoKCQkJcmV0dXJuIHJlc3VsdHM7CgkJfQoKCQkvLyBUcnkgdG8gc2hvcnRjdXQgZmluZCBvcGVyYXRpb25zIChhcyBvcHBvc2VkIHRvIGZpbHRlcnMpIGluIEhUTUwgZG9jdW1lbnRzCgkJaWYgKCAhc2VlZCApIHsKCgkJCWlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7CgkJCQlzZXREb2N1bWVudCggY29udGV4dCApOwoJCQl9CgkJCWNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50OwoKCQkJaWYgKCBkb2N1bWVudElzSFRNTCApIHsKCgkJCQkvLyBJZiB0aGUgc2VsZWN0b3IgaXMgc3VmZmljaWVudGx5IHNpbXBsZSwgdHJ5IHVzaW5nIGEgImdldCpCeSoiIERPTSBtZXRob2QKCQkJCS8vIChleGNlcHRpbmcgRG9jdW1lbnRGcmFnbWVudCBjb250ZXh0LCB3aGVyZSB0aGUgbWV0aG9kcyBkb24ndCBleGlzdCkKCQkJCWlmICggbm9kZVR5cGUgIT09IDExICYmIChtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKSkgKSB7CgoJCQkJCS8vIElEIHNlbGVjdG9yCgkJCQkJaWYgKCAobSA9IG1hdGNoWzFdKSApIHsKCgkJCQkJCS8vIERvY3VtZW50IGNvbnRleHQKCQkJCQkJaWYgKCBub2RlVHlwZSA9PT0gOSApIHsKCQkJCQkJCWlmICggKGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICkgewoKCQkJCQkJCQkvLyBTdXBwb3J0OiBJRSwgT3BlcmEsIFdlYmtpdAoJCQkJCQkJCS8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zCgkJCQkJCQkJLy8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRAoJCQkJCQkJCWlmICggZWxlbS5pZCA9PT0gbSApIHsKCQkJCQkJCQkJcmVzdWx0cy5wdXNoKCBlbGVtICk7CgkJCQkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCQl9CgoJCQkJCQkvLyBFbGVtZW50IGNvbnRleHQKCQkJCQkJfSBlbHNlIHsKCgkJCQkJCQkvLyBTdXBwb3J0OiBJRSwgT3BlcmEsIFdlYmtpdAoJCQkJCQkJLy8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnMKCQkJCQkJCS8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSUQKCQkJCQkJCWlmICggbmV3Q29udGV4dCAmJiAoZWxlbSA9IG5ld0NvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiYKCQkJCQkJCQljb250YWlucyggY29udGV4dCwgZWxlbSApICYmCgkJCQkJCQkJZWxlbS5pZCA9PT0gbSApIHsKCgkJCQkJCQkJcmVzdWx0cy5wdXNoKCBlbGVtICk7CgkJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJLy8gVHlwZSBzZWxlY3RvcgoJCQkJCX0gZWxzZSBpZiAoIG1hdGNoWzJdICkgewoJCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7CgkJCQkJCXJldHVybiByZXN1bHRzOwoKCQkJCQkvLyBDbGFzcyBzZWxlY3RvcgoJCQkJCX0gZWxzZSBpZiAoIChtID0gbWF0Y2hbM10pICYmIHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJgoJCQkJCQljb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7CgoJCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIG0gKSApOwoJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gVGFrZSBhZHZhbnRhZ2Ugb2YgcXVlcnlTZWxlY3RvckFsbAoJCQkJaWYgKCBzdXBwb3J0LnFzYSAmJgoJCQkJCSFjb21waWxlckNhY2hlWyBzZWxlY3RvciArICIgIiBdICYmCgkJCQkJKCFyYnVnZ3lRU0EgfHwgIXJidWdneVFTQS50ZXN0KCBzZWxlY3RvciApKSApIHsKCgkJCQkJaWYgKCBub2RlVHlwZSAhPT0gMSApIHsKCQkJCQkJbmV3Q29udGV4dCA9IGNvbnRleHQ7CgkJCQkJCW5ld1NlbGVjdG9yID0gc2VsZWN0b3I7CgoJCQkJCS8vIHFTQSBsb29rcyBvdXRzaWRlIEVsZW1lbnQgY29udGV4dCwgd2hpY2ggaXMgbm90IHdoYXQgd2Ugd2FudAoJCQkJCS8vIFRoYW5rcyB0byBBbmRyZXcgRHVwb250IGZvciB0aGlzIHdvcmthcm91bmQgdGVjaG5pcXVlCgkJCQkJLy8gU3VwcG9ydDogSUUgPD04CgkJCQkJLy8gRXhjbHVkZSBvYmplY3QgZWxlbWVudHMKCQkJCQl9IGVsc2UgaWYgKCBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICJvYmplY3QiICkgewoKCQkJCQkJLy8gQ2FwdHVyZSB0aGUgY29udGV4dCBJRCwgc2V0dGluZyBpdCBmaXJzdCBpZiBuZWNlc3NhcnkKCQkJCQkJaWYgKCAobmlkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoICJpZCIgKSkgKSB7CgkJCQkJCQluaWQgPSBuaWQucmVwbGFjZSggcmVzY2FwZSwgIlxcJCYiICk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQljb250ZXh0LnNldEF0dHJpYnV0ZSggImlkIiwgKG5pZCA9IGV4cGFuZG8pICk7CgkJCQkJCX0KCgkJCQkJCS8vIFByZWZpeCBldmVyeSBzZWxlY3RvciBpbiB0aGUgbGlzdAoJCQkJCQlncm91cHMgPSB0b2tlbml6ZSggc2VsZWN0b3IgKTsKCQkJCQkJaSA9IGdyb3Vwcy5sZW5ndGg7CgkJCQkJCW5pZHNlbGVjdCA9IHJpZGVudGlmaWVyLnRlc3QoIG5pZCApID8gIiMiICsgbmlkIDogIltpZD0nIiArIG5pZCArICInXSI7CgkJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQkJZ3JvdXBzW2ldID0gbmlkc2VsZWN0ICsgIiAiICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7CgkJCQkJCX0KCQkJCQkJbmV3U2VsZWN0b3IgPSBncm91cHMuam9pbiggIiwiICk7CgoJCQkJCQkvLyBFeHBhbmQgY29udGV4dCBmb3Igc2libGluZyBzZWxlY3RvcnMKCQkJCQkJbmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8CgkJCQkJCQljb250ZXh0OwoJCQkJCX0KCgkJCQkJaWYgKCBuZXdTZWxlY3RvciApIHsKCQkJCQkJdHJ5IHsKCQkJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsCgkJCQkJCQkJbmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApCgkJCQkJCQkpOwoJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCX0gY2F0Y2ggKCBxc2FFcnJvciApIHsKCQkJCQkJfSBmaW5hbGx5IHsKCQkJCQkJCWlmICggbmlkID09PSBleHBhbmRvICkgewoJCQkJCQkJCWNvbnRleHQucmVtb3ZlQXR0cmlidXRlKCAiaWQiICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgoJCS8vIEFsbCBvdGhlcnMKCQlyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgIiQxIiApLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICk7Cgl9CgoJLyoqCgkgKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemUKCSAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGgKCSAqCXByb3BlcnR5IG5hbWUgdGhlIChzcGFjZS1zdWZmaXhlZCkgc3RyaW5nIGFuZCAoaWYgdGhlIGNhY2hlIGlzIGxhcmdlciB0aGFuIEV4cHIuY2FjaGVMZW5ndGgpCgkgKglkZWxldGluZyB0aGUgb2xkZXN0IGVudHJ5CgkgKi8KCWZ1bmN0aW9uIGNyZWF0ZUNhY2hlKCkgewoJCXZhciBrZXlzID0gW107CgoJCWZ1bmN0aW9uIGNhY2hlKCBrZXksIHZhbHVlICkgewoJCQkvLyBVc2UgKGtleSArICIgIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1NykKCQkJaWYgKCBrZXlzLnB1c2goIGtleSArICIgIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHsKCQkJCS8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllcwoJCQkJZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTsKCQkJfQoJCQlyZXR1cm4gKGNhY2hlWyBrZXkgKyAiICIgXSA9IHZhbHVlKTsKCQl9CgkJcmV0dXJuIGNhY2hlOwoJfQoKCS8qKgoJICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGUKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrCgkgKi8KCWZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7CgkJZm5bIGV4cGFuZG8gXSA9IHRydWU7CgkJcmV0dXJuIGZuOwoJfQoKCS8qKgoJICogU3VwcG9ydCB0ZXN0aW5nIHVzaW5nIGFuIGVsZW1lbnQKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdAoJICovCglmdW5jdGlvbiBhc3NlcnQoIGZuICkgewoJCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCgkJdHJ5IHsKCQkJcmV0dXJuICEhZm4oIGRpdiApOwoJCX0gY2F0Y2ggKGUpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0gZmluYWxseSB7CgkJCS8vIFJlbW92ZSBmcm9tIGl0cyBwYXJlbnQgYnkgZGVmYXVsdAoJCQlpZiAoIGRpdi5wYXJlbnROb2RlICkgewoJCQkJZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGRpdiApOwoJCQl9CgkJCS8vIHJlbGVhc2UgbWVtb3J5IGluIElFCgkJCWRpdiA9IG51bGw7CgkJfQoJfQoKCS8qKgoJICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRycwoJICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlcwoJICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkCgkgKi8KCWZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7CgkJdmFyIGFyciA9IGF0dHJzLnNwbGl0KCJ8IiksCgkJCWkgPSBhcnIubGVuZ3RoOwoKCQl3aGlsZSAoIGktLSApIHsKCQkJRXhwci5hdHRySGFuZGxlWyBhcnJbaV0gXSA9IGhhbmRsZXI7CgkJfQoJfQoKCS8qKgoJICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5ncwoJICogQHBhcmFtIHtFbGVtZW50fSBhCgkgKiBAcGFyYW0ge0VsZW1lbnR9IGIKCSAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYgoJICovCglmdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7CgkJdmFyIGN1ciA9IGIgJiYgYSwKCQkJZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiYKCQkJCSggfmIuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICkgLQoJCQkJKCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTsKCgkJLy8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzCgkJaWYgKCBkaWZmICkgewoJCQlyZXR1cm4gZGlmZjsKCQl9CgoJCS8vIENoZWNrIGlmIGIgZm9sbG93cyBhCgkJaWYgKCBjdXIgKSB7CgkJCXdoaWxlICggKGN1ciA9IGN1ci5uZXh0U2libGluZykgKSB7CgkJCQlpZiAoIGN1ciA9PT0gYiApIHsKCQkJCQlyZXR1cm4gLTE7CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiBhID8gMSA6IC0xOwoJfQoKCS8qKgoJICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlcwoJICogQHBhcmFtIHtTdHJpbmd9IHR5cGUKCSAqLwoJZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7CgkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQkJcmV0dXJuIG5hbWUgPT09ICJpbnB1dCIgJiYgZWxlbS50eXBlID09PSB0eXBlOwoJCX07Cgl9CgoJLyoqCgkgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGJ1dHRvbnMKCSAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCgkgKi8KCWZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyggdHlwZSApIHsKCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCQlyZXR1cm4gKG5hbWUgPT09ICJpbnB1dCIgfHwgbmFtZSA9PT0gImJ1dHRvbiIpICYmIGVsZW0udHlwZSA9PT0gdHlwZTsKCQl9OwoJfQoKCS8qKgoJICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBwb3NpdGlvbmFscwoJICogQHBhcmFtIHtGdW5jdGlvbn0gZm4KCSAqLwoJZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZm4gKSB7CgkJcmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7CgkJCWFyZ3VtZW50ID0gK2FyZ3VtZW50OwoJCQlyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkgewoJCQkJdmFyIGosCgkJCQkJbWF0Y2hJbmRleGVzID0gZm4oIFtdLCBzZWVkLmxlbmd0aCwgYXJndW1lbnQgKSwKCQkJCQlpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDsKCgkJCQkvLyBNYXRjaCBlbGVtZW50cyBmb3VuZCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4ZXMKCQkJCXdoaWxlICggaS0tICkgewoJCQkJCWlmICggc2VlZFsgKGogPSBtYXRjaEluZGV4ZXNbaV0pIF0gKSB7CgkJCQkJCXNlZWRbal0gPSAhKG1hdGNoZXNbal0gPSBzZWVkW2pdKTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJCX0pOwoJfQoKCS8qKgoJICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dAoJICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHQKCSAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZQoJICovCglmdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHsKCQlyZXR1cm4gY29udGV4dCAmJiB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gInVuZGVmaW5lZCIgJiYgY29udGV4dDsKCX0KCgkvLyBFeHBvc2Ugc3VwcG9ydCB2YXJzIGZvciBjb252ZW5pZW5jZQoJc3VwcG9ydCA9IFNpenpsZS5zdXBwb3J0ID0ge307CgoJLyoqCgkgKiBEZXRlY3RzIFhNTCBub2RlcwoJICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxlbSBBbiBlbGVtZW50IG9yIGEgZG9jdW1lbnQKCSAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmZiBlbGVtIGlzIGEgbm9uLUhUTUwgWE1MIG5vZGUKCSAqLwoJaXNYTUwgPSBTaXp6bGUuaXNYTUwgPSBmdW5jdGlvbiggZWxlbSApIHsKCQkvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0CgkJLy8gKHN1Y2ggYXMgbG9hZGluZyBpZnJhbWVzIGluIElFIC0gIzQ4MzMpCgkJdmFyIGRvY3VtZW50RWxlbWVudCA9IGVsZW0gJiYgKGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtKS5kb2N1bWVudEVsZW1lbnQ7CgkJcmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gIkhUTUwiIDogZmFsc2U7Cgl9OwoKCS8qKgoJICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50CgkgKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudAoJICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudAoJICovCglzZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkgewoJCXZhciBoYXNDb21wYXJlLCBwYXJlbnQsCgkJCWRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYzsKCgkJLy8gUmV0dXJuIGVhcmx5IGlmIGRvYyBpcyBpbnZhbGlkIG9yIGFscmVhZHkgc2VsZWN0ZWQKCQlpZiAoIGRvYyA9PT0gZG9jdW1lbnQgfHwgZG9jLm5vZGVUeXBlICE9PSA5IHx8ICFkb2MuZG9jdW1lbnRFbGVtZW50ICkgewoJCQlyZXR1cm4gZG9jdW1lbnQ7CgkJfQoKCQkvLyBVcGRhdGUgZ2xvYmFsIHZhcmlhYmxlcwoJCWRvY3VtZW50ID0gZG9jOwoJCWRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgkJZG9jdW1lbnRJc0hUTUwgPSAhaXNYTUwoIGRvY3VtZW50ICk7CgoJCS8vIFN1cHBvcnQ6IElFIDktMTEsIEVkZ2UKCQkvLyBBY2Nlc3NpbmcgaWZyYW1lIGRvY3VtZW50cyBhZnRlciB1bmxvYWQgdGhyb3dzICJwZXJtaXNzaW9uIGRlbmllZCIgZXJyb3JzIChqUXVlcnkgIzEzOTM2KQoJCWlmICggKHBhcmVudCA9IGRvY3VtZW50LmRlZmF1bHRWaWV3KSAmJiBwYXJlbnQudG9wICE9PSBwYXJlbnQgKSB7CgkJCS8vIFN1cHBvcnQ6IElFIDExCgkJCWlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7CgkJCQlwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciggInVubG9hZCIsIHVubG9hZEhhbmRsZXIsIGZhbHNlICk7CgoJCQkvLyBTdXBwb3J0OiBJRSA5IC0gMTAgb25seQoJCQl9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7CgkJCQlwYXJlbnQuYXR0YWNoRXZlbnQoICJvbnVubG9hZCIsIHVubG9hZEhhbmRsZXIgKTsKCQkJfQoJCX0KCgkJLyogQXR0cmlidXRlcwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCgkJLy8gU3VwcG9ydDogSUU8OAoJCS8vIFZlcmlmeSB0aGF0IGdldEF0dHJpYnV0ZSByZWFsbHkgcmV0dXJucyBhdHRyaWJ1dGVzIGFuZCBub3QgcHJvcGVydGllcwoJCS8vIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKQoJCXN1cHBvcnQuYXR0cmlidXRlcyA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQlkaXYuY2xhc3NOYW1lID0gImkiOwoJCQlyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpOwoJCX0pOwoKCQkvKiBnZXRFbGVtZW50KHMpQnkqCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCQkvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpIHJldHVybnMgb25seSBlbGVtZW50cwoJCXN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQkJZGl2LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSApOwoJCQlyZXR1cm4gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aDsKCQl9KTsKCgkJLy8gU3VwcG9ydDogSUU8OQoJCXN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApOwoKCQkvLyBTdXBwb3J0OiBJRTwxMAoJCS8vIENoZWNrIGlmIGdldEVsZW1lbnRCeUlkIHJldHVybnMgZWxlbWVudHMgYnkgbmFtZQoJCS8vIFRoZSBicm9rZW4gZ2V0RWxlbWVudEJ5SWQgbWV0aG9kcyBkb24ndCBwaWNrIHVwIHByb2dyYW1hdGljYWxseS1zZXQgbmFtZXMsCgkJLy8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0CgkJc3VwcG9ydC5nZXRCeUlkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJCWRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbzsKCQkJcmV0dXJuICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7CgkJfSk7CgoJCS8vIElEIGZpbmQgYW5kIGZpbHRlcgoJCWlmICggc3VwcG9ydC5nZXRCeUlkICkgewoJCQlFeHByLmZpbmRbIklEIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7CgkJCQlpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSAidW5kZWZpbmVkIiAmJiBkb2N1bWVudElzSFRNTCApIHsKCQkJCQl2YXIgbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7CgkJCQkJcmV0dXJuIG0gPyBbIG0gXSA6IFtdOwoJCQkJfQoJCQl9OwoJCQlFeHByLmZpbHRlclsiSUQiXSA9IGZ1bmN0aW9uKCBpZCApIHsKCQkJCXZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoJCQkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCXJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSgiaWQiKSA9PT0gYXR0cklkOwoJCQkJfTsKCQkJfTsKCQl9IGVsc2UgewoJCQkvLyBTdXBwb3J0OiBJRTYvNwoJCQkvLyBnZXRFbGVtZW50QnlJZCBpcyBub3QgcmVsaWFibGUgYXMgYSBmaW5kIHNob3J0Y3V0CgkJCWRlbGV0ZSBFeHByLmZpbmRbIklEIl07CgoJCQlFeHByLmZpbHRlclsiSUQiXSA9ICBmdW5jdGlvbiggaWQgKSB7CgkJCQl2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTsKCQkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQl2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09ICJ1bmRlZmluZWQiICYmCgkJCQkJCWVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTsKCQkJCQlyZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlID09PSBhdHRySWQ7CgkJCQl9OwoJCQl9OwoJCX0KCgkJLy8gVGFnCgkJRXhwci5maW5kWyJUQUciXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPwoJCQlmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkgewoJCQkJaWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gInVuZGVmaW5lZCIgKSB7CgkJCQkJcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApOwoKCQkJCS8vIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgZG9uJ3QgaGF2ZSBnRUJUTgoJCQkJfSBlbHNlIGlmICggc3VwcG9ydC5xc2EgKSB7CgkJCQkJcmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnICk7CgkJCQl9CgkJCX0gOgoKCQkJZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHsKCQkJCXZhciBlbGVtLAoJCQkJCXRtcCA9IFtdLAoJCQkJCWkgPSAwLAoJCQkJCS8vIEJ5IGhhcHB5IGNvaW5jaWRlbmNlLCBhIChicm9rZW4pIGdFQlROIGFwcGVhcnMgb24gRG9jdW1lbnRGcmFnbWVudCBub2RlcyB0b28KCQkJCQlyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7CgoJCQkJLy8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50cwoJCQkJaWYgKCB0YWcgPT09ICIqIiApIHsKCQkJCQl3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHsKCQkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQkJCQkJdG1wLnB1c2goIGVsZW0gKTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJcmV0dXJuIHRtcDsKCQkJCX0KCQkJCXJldHVybiByZXN1bHRzOwoJCQl9OwoKCQkvLyBDbGFzcwoJCUV4cHIuZmluZFsiQ0xBU1MiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiggY2xhc3NOYW1lLCBjb250ZXh0ICkgewoJCQlpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgIT09ICJ1bmRlZmluZWQiICYmIGRvY3VtZW50SXNIVE1MICkgewoJCQkJcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7CgkJCX0KCQl9OwoKCQkvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCQkvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0CgoJCS8vIG1hdGNoZXNTZWxlY3Rvcig6YWN0aXZlKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoSUU5L09wZXJhIDExLjUpCgkJcmJ1Z2d5TWF0Y2hlcyA9IFtdOwoKCQkvLyBxU2EoOmZvY3VzKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoQ2hyb21lIDIxKQoJCS8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvcgoJCS8vIHdoZW5ldmVyIGBkb2N1bWVudC5hY3RpdmVFbGVtZW50YCBpcyBhY2Nlc3NlZCBvbiBhbiBpZnJhbWUKCQkvLyBTbywgd2UgYWxsb3cgOmZvY3VzIHRvIHBhc3MgdGhyb3VnaCBRU0EgYWxsIHRoZSB0aW1lIHRvIGF2b2lkIHRoZSBJRSBlcnJvcgoJCS8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OAoJCXJidWdneVFTQSA9IFtdOwoKCQlpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCApKSApIHsKCQkJLy8gQnVpbGQgUVNBIHJlZ2V4CgkJCS8vIFJlZ2V4IHN0cmF0ZWd5IGFkb3B0ZWQgZnJvbSBEaWVnbyBQZXJpbmkKCQkJYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJCQkvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlCgkJCQkvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHkKCQkJCS8vIHNldHRpbmcgYSBib29sZWFuIGNvbnRlbnQgYXR0cmlidXRlLAoJCQkJLy8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2gKCQkJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMzU5CgkJCQlkb2NFbGVtLmFwcGVuZENoaWxkKCBkaXYgKS5pbm5lckhUTUwgPSAiPGEgaWQ9JyIgKyBleHBhbmRvICsgIic+PC9hPiIgKwoJCQkJCSI8c2VsZWN0IGlkPSciICsgZXhwYW5kbyArICItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+IiArCgkJCQkJIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IjsKCgkJCQkvLyBTdXBwb3J0OiBJRTgsIE9wZXJhIDExLTEyLjE2CgkJCQkvLyBOb3RoaW5nIHNob3VsZCBiZSBzZWxlY3RlZCB3aGVuIGVtcHR5IHN0cmluZ3MgZm9sbG93IF49IG9yICQ9IG9yICo9CgkJCQkvLyBUaGUgdGVzdCBhdHRyaWJ1dGUgbXVzdCBiZSB1bmtub3duIGluIE9wZXJhIGJ1dCAic2FmZSIgZm9yIFdpblJUCgkJCQkvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvaGg0NjUzODguYXNweCNhdHRyaWJ1dGVfc2VjdGlvbgoJCQkJaWYgKCBkaXYucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGggKSB7CgkJCQkJcmJ1Z2d5UVNBLnB1c2goICJbKl4kXT0iICsgd2hpdGVzcGFjZSArICIqKD86Jyd8XCJcIikiICk7CgkJCQl9CgoJCQkJLy8gU3VwcG9ydDogSUU4CgkJCQkvLyBCb29sZWFuIGF0dHJpYnV0ZXMgYW5kICJ2YWx1ZSIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseQoJCQkJaWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGggKSB7CgkJCQkJcmJ1Z2d5UVNBLnB1c2goICJcXFsiICsgd2hpdGVzcGFjZSArICIqKD86dmFsdWV8IiArIGJvb2xlYW5zICsgIikiICk7CgkJCQl9CgoJCQkJLy8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuNCwgU2FmYXJpPDcuMCssIGlPUzw3LjArLCBQaGFudG9tSlM8MS45LjgrCgkJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggIltpZH49IiArIGV4cGFuZG8gKyAiLV0iICkubGVuZ3RoICkgewoJCQkJCXJidWdneVFTQS5wdXNoKCJ+PSIpOwoJCQkJfQoKCQkJCS8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzCgkJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZAoJCQkJLy8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHMKCQkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aCApIHsKCQkJCQlyYnVnZ3lRU0EucHVzaCgiOmNoZWNrZWQiKTsKCQkJCX0KCgkJCQkvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4KwoJCQkJLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNjg1MQoJCQkJLy8gSW4tcGFnZSBgc2VsZWN0b3IjaWQgc2liaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzCgkJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggImEjIiArIGV4cGFuZG8gKyAiKyoiICkubGVuZ3RoICkgewoJCQkJCXJidWdneVFTQS5wdXNoKCIuIy4rWyt+XSIpOwoJCQkJfQoJCQl9KTsKCgkJCWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQkJLy8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzCgkJCQkvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnQKCQkJCXZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoICJ0eXBlIiwgImhpZGRlbiIgKTsKCQkJCWRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoICJuYW1lIiwgIkQiICk7CgoJCQkJLy8gU3VwcG9ydDogSUU4CgkJCQkvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGUKCQkJCWlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoICkgewoJCQkJCXJidWdneVFTQS5wdXNoKCAibmFtZSIgKyB3aGl0ZXNwYWNlICsgIipbKl4kfCF+XT89IiApOwoJCQkJfQoKCQkJCS8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpCgkJCQkvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0cwoJCQkJaWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoICkgewoJCQkJCXJidWdneVFTQS5wdXNoKCAiOmVuYWJsZWQiLCAiOmRpc2FibGVkIiApOwoJCQkJfQoKCQkJCS8vIE9wZXJhIDEwLTExIGRvZXMgbm90IHRocm93IG9uIHBvc3QtY29tbWEgaW52YWxpZCBwc2V1ZG9zCgkJCQlkaXYucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpOwoJCQkJcmJ1Z2d5UVNBLnB1c2goIiwuKjoiKTsKCQkJfSk7CgkJfQoKCQlpZiAoIChzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKG1hdGNoZXMgPSBkb2NFbGVtLm1hdGNoZXMgfHwKCQkJZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwKCQkJZG9jRWxlbS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwKCQkJZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8CgkJCWRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpICkpICkgewoKCQkJYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJCQkvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3IKCQkJCS8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpCgkJCQlzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBkaXYsICJkaXYiICk7CgoJCQkJLy8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvbgoJCQkJLy8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZAoJCQkJbWF0Y2hlcy5jYWxsKCBkaXYsICJbcyE9JyddOngiICk7CgkJCQlyYnVnZ3lNYXRjaGVzLnB1c2goICIhPSIsIHBzZXVkb3MgKTsKCQkJfSk7CgkJfQoKCQlyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKCJ8IikgKTsKCQlyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKCJ8IikgKTsKCgkJLyogQ29udGFpbnMKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCgkJaGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApOwoKCQkvLyBFbGVtZW50IGNvbnRhaW5zIGFub3RoZXIKCQkvLyBQdXJwb3NlZnVsbHkgc2VsZi1leGNsdXNpdmUKCQkvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZgoJCWNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/CgkJCWZ1bmN0aW9uKCBhLCBiICkgewoJCQkJdmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSwKCQkJCQlidXAgPSBiICYmIGIucGFyZW50Tm9kZTsKCQkJCXJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKAoJCQkJCWFkb3duLmNvbnRhaW5zID8KCQkJCQkJYWRvd24uY29udGFpbnMoIGJ1cCApIDoKCQkJCQkJYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2CgkJCQkpKTsKCQkJfSA6CgkJCWZ1bmN0aW9uKCBhLCBiICkgewoJCQkJaWYgKCBiICkgewoJCQkJCXdoaWxlICggKGIgPSBiLnBhcmVudE5vZGUpICkgewoJCQkJCQlpZiAoIGIgPT09IGEgKSB7CgkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiBmYWxzZTsKCQkJfTsKCgkJLyogU29ydGluZwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCgkJLy8gRG9jdW1lbnQgb3JkZXIgc29ydGluZwoJCXNvcnRPcmRlciA9IGhhc0NvbXBhcmUgPwoJCWZ1bmN0aW9uKCBhLCBiICkgewoKCQkJLy8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWwKCQkJaWYgKCBhID09PSBiICkgewoJCQkJaGFzRHVwbGljYXRlID0gdHJ1ZTsKCQkJCXJldHVybiAwOwoJCQl9CgoJCQkvLyBTb3J0IG9uIG1ldGhvZCBleGlzdGVuY2UgaWYgb25seSBvbmUgaW5wdXQgaGFzIGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uCgkJCXZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjsKCQkJaWYgKCBjb21wYXJlICkgewoJCQkJcmV0dXJuIGNvbXBhcmU7CgkJCX0KCgkJCS8vIENhbGN1bGF0ZSBwb3NpdGlvbiBpZiBib3RoIGlucHV0cyBiZWxvbmcgdG8gdGhlIHNhbWUgZG9jdW1lbnQKCQkJY29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID8KCQkJCWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGIgKSA6CgoJCQkJLy8gT3RoZXJ3aXNlIHdlIGtub3cgdGhleSBhcmUgZGlzY29ubmVjdGVkCgkJCQkxOwoKCQkJLy8gRGlzY29ubmVjdGVkIG5vZGVzCgkJCWlmICggY29tcGFyZSAmIDEgfHwKCQkJCSghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHsKCgkJCQkvLyBDaG9vc2UgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBpcyByZWxhdGVkIHRvIG91ciBwcmVmZXJyZWQgZG9jdW1lbnQKCQkJCWlmICggYSA9PT0gZG9jdW1lbnQgfHwgYS5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBhKSApIHsKCQkJCQlyZXR1cm4gLTE7CgkJCQl9CgkJCQlpZiAoIGIgPT09IGRvY3VtZW50IHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7CgkJCQkJcmV0dXJuIDE7CgkJCQl9CgoJCQkJLy8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXIKCQkJCXJldHVybiBzb3J0SW5wdXQgPwoJCQkJCSggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDoKCQkJCQkwOwoJCQl9CgoJCQlyZXR1cm4gY29tcGFyZSAmIDQgPyAtMSA6IDE7CgkJfSA6CgkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCS8vIEV4aXQgZWFybHkgaWYgdGhlIG5vZGVzIGFyZSBpZGVudGljYWwKCQkJaWYgKCBhID09PSBiICkgewoJCQkJaGFzRHVwbGljYXRlID0gdHJ1ZTsKCQkJCXJldHVybiAwOwoJCQl9CgoJCQl2YXIgY3VyLAoJCQkJaSA9IDAsCgkJCQlhdXAgPSBhLnBhcmVudE5vZGUsCgkJCQlidXAgPSBiLnBhcmVudE5vZGUsCgkJCQlhcCA9IFsgYSBdLAoJCQkJYnAgPSBbIGIgXTsKCgkJCS8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkCgkJCWlmICggIWF1cCB8fCAhYnVwICkgewoJCQkJcmV0dXJuIGEgPT09IGRvY3VtZW50ID8gLTEgOgoJCQkJCWIgPT09IGRvY3VtZW50ID8gMSA6CgkJCQkJYXVwID8gLTEgOgoJCQkJCWJ1cCA/IDEgOgoJCQkJCXNvcnRJbnB1dCA/CgkJCQkJKCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOgoJCQkJCTA7CgoJCQkvLyBJZiB0aGUgbm9kZXMgYXJlIHNpYmxpbmdzLCB3ZSBjYW4gZG8gYSBxdWljayBjaGVjawoJCQl9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHsKCQkJCXJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTsKCQkJfQoKCQkJLy8gT3RoZXJ3aXNlIHdlIG5lZWQgZnVsbCBsaXN0cyBvZiB0aGVpciBhbmNlc3RvcnMgZm9yIGNvbXBhcmlzb24KCQkJY3VyID0gYTsKCQkJd2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkgewoJCQkJYXAudW5zaGlmdCggY3VyICk7CgkJCX0KCQkJY3VyID0gYjsKCQkJd2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkgewoJCQkJYnAudW5zaGlmdCggY3VyICk7CgkJCX0KCgkJCS8vIFdhbGsgZG93biB0aGUgdHJlZSBsb29raW5nIGZvciBhIGRpc2NyZXBhbmN5CgkJCXdoaWxlICggYXBbaV0gPT09IGJwW2ldICkgewoJCQkJaSsrOwoJCQl9CgoJCQlyZXR1cm4gaSA/CgkJCQkvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3IKCQkJCXNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOgoKCQkJCS8vIE90aGVyd2lzZSBub2RlcyBpbiBvdXIgZG9jdW1lbnQgc29ydCBmaXJzdAoJCQkJYXBbaV0gPT09IHByZWZlcnJlZERvYyA/IC0xIDoKCQkJCWJwW2ldID09PSBwcmVmZXJyZWREb2MgPyAxIDoKCQkJCTA7CgkJfTsKCgkJcmV0dXJuIGRvY3VtZW50OwoJfTsKCglTaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHsKCQlyZXR1cm4gU2l6emxlKCBleHByLCBudWxsLCBudWxsLCBlbGVtZW50cyApOwoJfTsKCglTaXp6bGUubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24oIGVsZW0sIGV4cHIgKSB7CgkJLy8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkCgkJaWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkgewoJCQlzZXREb2N1bWVudCggZWxlbSApOwoJCX0KCgkJLy8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkCgkJZXhwciA9IGV4cHIucmVwbGFjZSggcmF0dHJpYnV0ZVF1b3RlcywgIj0nJDEnXSIgKTsKCgkJaWYgKCBzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciAmJiBkb2N1bWVudElzSFRNTCAmJgoJCQkhY29tcGlsZXJDYWNoZVsgZXhwciArICIgIiBdICYmCgkJCSggIXJidWdneU1hdGNoZXMgfHwgIXJidWdneU1hdGNoZXMudGVzdCggZXhwciApICkgJiYKCQkJKCAhcmJ1Z2d5UVNBICAgICB8fCAhcmJ1Z2d5UVNBLnRlc3QoIGV4cHIgKSApICkgewoKCQkJdHJ5IHsKCQkJCXZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTsKCgkJCQkvLyBJRSA5J3MgbWF0Y2hlc1NlbGVjdG9yIHJldHVybnMgZmFsc2Ugb24gZGlzY29ubmVjdGVkIG5vZGVzCgkJCQlpZiAoIHJldCB8fCBzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoIHx8CgkJCQkJCS8vIEFzIHdlbGwsIGRpc2Nvbm5lY3RlZCBub2RlcyBhcmUgc2FpZCB0byBiZSBpbiBhIGRvY3VtZW50CgkJCQkJCS8vIGZyYWdtZW50IGluIElFIDkKCQkJCQkJZWxlbS5kb2N1bWVudCAmJiBlbGVtLmRvY3VtZW50Lm5vZGVUeXBlICE9PSAxMSApIHsKCQkJCQlyZXR1cm4gcmV0OwoJCQkJfQoJCQl9IGNhdGNoIChlKSB7fQoJCX0KCgkJcmV0dXJuIFNpenpsZSggZXhwciwgZG9jdW1lbnQsIG51bGwsIFsgZWxlbSBdICkubGVuZ3RoID4gMDsKCX07CgoJU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7CgkJLy8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkCgkJaWYgKCAoIGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0ICkgIT09IGRvY3VtZW50ICkgewoJCQlzZXREb2N1bWVudCggY29udGV4dCApOwoJCX0KCQlyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTsKCX07CgoJU2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHsKCQkvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWQKCQlpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7CgkJCXNldERvY3VtZW50KCBlbGVtICk7CgkJfQoKCQl2YXIgZm4gPSBFeHByLmF0dHJIYW5kbGVbIG5hbWUudG9Mb3dlckNhc2UoKSBdLAoJCQkvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoalF1ZXJ5ICMxMzgwNykKCQkJdmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgPwoJCQkJZm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDoKCQkJCXVuZGVmaW5lZDsKCgkJcmV0dXJuIHZhbCAhPT0gdW5kZWZpbmVkID8KCQkJdmFsIDoKCQkJc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/CgkJCQllbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDoKCQkJCSh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgPwoJCQkJCXZhbC52YWx1ZSA6CgkJCQkJbnVsbDsKCX07CgoJU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHsKCQl0aHJvdyBuZXcgRXJyb3IoICJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiICsgbXNnICk7Cgl9OwoKCS8qKgoJICogRG9jdW1lbnQgc29ydGluZyBhbmQgcmVtb3ZpbmcgZHVwbGljYXRlcwoJICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHMKCSAqLwoJU2l6emxlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbiggcmVzdWx0cyApIHsKCQl2YXIgZWxlbSwKCQkJZHVwbGljYXRlcyA9IFtdLAoJCQlqID0gMCwKCQkJaSA9IDA7CgoJCS8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2UKCQloYXNEdXBsaWNhdGUgPSAhc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzOwoJCXNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApOwoJCXJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7CgoJCWlmICggaGFzRHVwbGljYXRlICkgewoJCQl3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHsKCQkJCWlmICggZWxlbSA9PT0gcmVzdWx0c1sgaSBdICkgewoJCQkJCWogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTsKCQkJCX0KCQkJfQoJCQl3aGlsZSAoIGotLSApIHsKCQkJCXJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTsKCQkJfQoJCX0KCgkJLy8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHMKCQkvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9zaXp6bGUvcHVsbC8yMjUKCQlzb3J0SW5wdXQgPSBudWxsOwoKCQlyZXR1cm4gcmVzdWx0czsKCX07CgoJLyoqCgkgKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSB0ZXh0IHZhbHVlIG9mIGFuIGFycmF5IG9mIERPTSBub2RlcwoJICogQHBhcmFtIHtBcnJheXxFbGVtZW50fSBlbGVtCgkgKi8KCWdldFRleHQgPSBTaXp6bGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJCXZhciBub2RlLAoJCQlyZXQgPSAiIiwKCQkJaSA9IDAsCgkJCW5vZGVUeXBlID0gZWxlbS5ub2RlVHlwZTsKCgkJaWYgKCAhbm9kZVR5cGUgKSB7CgkJCS8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5CgkJCXdoaWxlICggKG5vZGUgPSBlbGVtW2krK10pICkgewoJCQkJLy8gRG8gbm90IHRyYXZlcnNlIGNvbW1lbnQgbm9kZXMKCQkJCXJldCArPSBnZXRUZXh0KCBub2RlICk7CgkJCX0KCQl9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMSB8fCBub2RlVHlwZSA9PT0gOSB8fCBub2RlVHlwZSA9PT0gMTEgKSB7CgkJCS8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHMKCQkJLy8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1MykKCQkJaWYgKCB0eXBlb2YgZWxlbS50ZXh0Q29udGVudCA9PT0gInN0cmluZyIgKSB7CgkJCQlyZXR1cm4gZWxlbS50ZXh0Q29udGVudDsKCQkJfSBlbHNlIHsKCQkJCS8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlbgoJCQkJZm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7CgkJCQkJcmV0ICs9IGdldFRleHQoIGVsZW0gKTsKCQkJCX0KCQkJfQoJCX0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkgewoJCQlyZXR1cm4gZWxlbS5ub2RlVmFsdWU7CgkJfQoJCS8vIERvIG5vdCBpbmNsdWRlIGNvbW1lbnQgb3IgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBub2RlcwoKCQlyZXR1cm4gcmV0OwoJfTsKCglFeHByID0gU2l6emxlLnNlbGVjdG9ycyA9IHsKCgkJLy8gQ2FuIGJlIGFkanVzdGVkIGJ5IHRoZSB1c2VyCgkJY2FjaGVMZW5ndGg6IDUwLAoKCQljcmVhdGVQc2V1ZG86IG1hcmtGdW5jdGlvbiwKCgkJbWF0Y2g6IG1hdGNoRXhwciwKCgkJYXR0ckhhbmRsZToge30sCgoJCWZpbmQ6IHt9LAoKCQlyZWxhdGl2ZTogewoJCQkiPiI6IHsgZGlyOiAicGFyZW50Tm9kZSIsIGZpcnN0OiB0cnVlIH0sCgkJCSIgIjogeyBkaXI6ICJwYXJlbnROb2RlIiB9LAoJCQkiKyI6IHsgZGlyOiAicHJldmlvdXNTaWJsaW5nIiwgZmlyc3Q6IHRydWUgfSwKCQkJIn4iOiB7IGRpcjogInByZXZpb3VzU2libGluZyIgfQoJCX0sCgoJCXByZUZpbHRlcjogewoJCQkiQVRUUiI6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkJCW1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTsKCgkJCQkvLyBNb3ZlIHRoZSBnaXZlbiB2YWx1ZSB0byBtYXRjaFszXSB3aGV0aGVyIHF1b3RlZCBvciB1bnF1b3RlZAoJCQkJbWF0Y2hbM10gPSAoIG1hdGNoWzNdIHx8IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8ICIiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTsKCgkJCQlpZiAoIG1hdGNoWzJdID09PSAifj0iICkgewoJCQkJCW1hdGNoWzNdID0gIiAiICsgbWF0Y2hbM10gKyAiICI7CgkJCQl9CgoJCQkJcmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7CgkJCX0sCgoJCQkiQ0hJTEQiOiBmdW5jdGlvbiggbWF0Y2ggKSB7CgkJCQkvKiBtYXRjaGVzIGZyb20gbWF0Y2hFeHByWyJDSElMRCJdCgkJCQkJMSB0eXBlIChvbmx5fG50aHwuLi4pCgkJCQkJMiB3aGF0IChjaGlsZHxvZi10eXBlKQoJCQkJCTMgYXJndW1lbnQgKGV2ZW58b2RkfFxkKnxcZCpuKFsrLV1cZCspP3wuLi4pCgkJCQkJNCB4bi1jb21wb25lbnQgb2YgeG4reSBhcmd1bWVudCAoWystXT9cZCpufCkKCQkJCQk1IHNpZ24gb2YgeG4tY29tcG9uZW50CgkJCQkJNiB4IG9mIHhuLWNvbXBvbmVudAoJCQkJCTcgc2lnbiBvZiB5LWNvbXBvbmVudAoJCQkJCTggeSBvZiB5LWNvbXBvbmVudAoJCQkJKi8KCQkJCW1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTsKCgkJCQlpZiAoIG1hdGNoWzFdLnNsaWNlKCAwLCAzICkgPT09ICJudGgiICkgewoJCQkJCS8vIG50aC0qIHJlcXVpcmVzIGFyZ3VtZW50CgkJCQkJaWYgKCAhbWF0Y2hbM10gKSB7CgkJCQkJCVNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTsKCQkJCQl9CgoJCQkJCS8vIG51bWVyaWMgeCBhbmQgeSBwYXJhbWV0ZXJzIGZvciBFeHByLmZpbHRlci5DSElMRAoJCQkJCS8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzEKCQkJCQltYXRjaFs0XSA9ICsoIG1hdGNoWzRdID8gbWF0Y2hbNV0gKyAobWF0Y2hbNl0gfHwgMSkgOiAyICogKCBtYXRjaFszXSA9PT0gImV2ZW4iIHx8IG1hdGNoWzNdID09PSAib2RkIiApICk7CgkJCQkJbWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gIm9kZCIgKTsKCgkJCQkvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHMKCQkJCX0gZWxzZSBpZiAoIG1hdGNoWzNdICkgewoJCQkJCVNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTsKCQkJCX0KCgkJCQlyZXR1cm4gbWF0Y2g7CgkJCX0sCgoJCQkiUFNFVURPIjogZnVuY3Rpb24oIG1hdGNoICkgewoJCQkJdmFyIGV4Y2VzcywKCQkJCQl1bnF1b3RlZCA9ICFtYXRjaFs2XSAmJiBtYXRjaFsyXTsKCgkJCQlpZiAoIG1hdGNoRXhwclsiQ0hJTEQiXS50ZXN0KCBtYXRjaFswXSApICkgewoJCQkJCXJldHVybiBudWxsOwoJCQkJfQoKCQkJCS8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzCgkJCQlpZiAoIG1hdGNoWzNdICkgewoJCQkJCW1hdGNoWzJdID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgIiI7CgoJCQkJLy8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHMKCQkJCX0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJgoJCQkJCS8vIEdldCBleGNlc3MgZnJvbSB0b2tlbml6ZSAocmVjdXJzaXZlbHkpCgkJCQkJKGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJgoJCQkJCS8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpcwoJCQkJCShleGNlc3MgPSB1bnF1b3RlZC5pbmRleE9mKCAiKSIsIHVucXVvdGVkLmxlbmd0aCAtIGV4Y2VzcyApIC0gdW5xdW90ZWQubGVuZ3RoKSApIHsKCgkJCQkJLy8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXgKCQkJCQltYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTsKCQkJCQltYXRjaFsyXSA9IHVucXVvdGVkLnNsaWNlKCAwLCBleGNlc3MgKTsKCQkJCX0KCgkJCQkvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudCkKCQkJCXJldHVybiBtYXRjaC5zbGljZSggMCwgMyApOwoJCQl9CgkJfSwKCgkJZmlsdGVyOiB7CgoJCQkiVEFHIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7CgkJCQl2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTsKCQkJCXJldHVybiBub2RlTmFtZVNlbGVjdG9yID09PSAiKiIgPwoJCQkJCWZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6CgkJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJCXJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7CgkJCQkJfTsKCQkJfSwKCgkJCSJDTEFTUyI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7CgkJCQl2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArICIgIiBdOwoKCQkJCXJldHVybiBwYXR0ZXJuIHx8CgkJCQkJKHBhdHRlcm4gPSBuZXcgUmVnRXhwKCAiKF58IiArIHdoaXRlc3BhY2UgKyAiKSIgKyBjbGFzc05hbWUgKyAiKCIgKyB3aGl0ZXNwYWNlICsgInwkKSIgKSkgJiYKCQkJCQljbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCQlyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09ICJzdHJpbmciICYmIGVsZW0uY2xhc3NOYW1lIHx8IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSAhPT0gInVuZGVmaW5lZCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoImNsYXNzIikgfHwgIiIgKTsKCQkJCQl9KTsKCQkJfSwKCgkJCSJBVFRSIjogZnVuY3Rpb24oIG5hbWUsIG9wZXJhdG9yLCBjaGVjayApIHsKCQkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQl2YXIgcmVzdWx0ID0gU2l6emxlLmF0dHIoIGVsZW0sIG5hbWUgKTsKCgkJCQkJaWYgKCByZXN1bHQgPT0gbnVsbCApIHsKCQkJCQkJcmV0dXJuIG9wZXJhdG9yID09PSAiIT0iOwoJCQkJCX0KCQkJCQlpZiAoICFvcGVyYXRvciApIHsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfQoKCQkJCQlyZXN1bHQgKz0gIiI7CgoJCQkJCXJldHVybiBvcGVyYXRvciA9PT0gIj0iID8gcmVzdWx0ID09PSBjaGVjayA6CgkJCQkJCW9wZXJhdG9yID09PSAiIT0iID8gcmVzdWx0ICE9PSBjaGVjayA6CgkJCQkJCW9wZXJhdG9yID09PSAiXj0iID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPT09IDAgOgoJCQkJCQlvcGVyYXRvciA9PT0gIio9IiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOgoJCQkJCQlvcGVyYXRvciA9PT0gIiQ9IiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6CgkJCQkJCW9wZXJhdG9yID09PSAifj0iID8gKCAiICIgKyByZXN1bHQucmVwbGFjZSggcndoaXRlc3BhY2UsICIgIiApICsgIiAiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDoKCQkJCQkJb3BlcmF0b3IgPT09ICJ8PSIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArICItIiA6CgkJCQkJCWZhbHNlOwoJCQkJfTsKCQkJfSwKCgkJCSJDSElMRCI6IGZ1bmN0aW9uKCB0eXBlLCB3aGF0LCBhcmd1bWVudCwgZmlyc3QsIGxhc3QgKSB7CgkJCQl2YXIgc2ltcGxlID0gdHlwZS5zbGljZSggMCwgMyApICE9PSAibnRoIiwKCQkJCQlmb3J3YXJkID0gdHlwZS5zbGljZSggLTQgKSAhPT0gImxhc3QiLAoJCQkJCW9mVHlwZSA9IHdoYXQgPT09ICJvZi10eXBlIjsKCgkJCQlyZXR1cm4gZmlyc3QgPT09IDEgJiYgbGFzdCA9PT0gMCA/CgoJCQkJCS8vIFNob3J0Y3V0IGZvciA6bnRoLSoobikKCQkJCQlmdW5jdGlvbiggZWxlbSApIHsKCQkJCQkJcmV0dXJuICEhZWxlbS5wYXJlbnROb2RlOwoJCQkJCX0gOgoKCQkJCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQkJCQl2YXIgY2FjaGUsIHVuaXF1ZUNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBub2RlSW5kZXgsIHN0YXJ0LAoJCQkJCQkJZGlyID0gc2ltcGxlICE9PSBmb3J3YXJkID8gIm5leHRTaWJsaW5nIiA6ICJwcmV2aW91c1NpYmxpbmciLAoJCQkJCQkJcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLAoJCQkJCQkJbmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksCgkJCQkJCQl1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZSwKCQkJCQkJCWRpZmYgPSBmYWxzZTsKCgkJCQkJCWlmICggcGFyZW50ICkgewoKCQkJCQkJCS8vIDooZmlyc3R8bGFzdHxvbmx5KS0oY2hpbGR8b2YtdHlwZSkKCQkJCQkJCWlmICggc2ltcGxlICkgewoJCQkJCQkJCXdoaWxlICggZGlyICkgewoJCQkJCQkJCQlub2RlID0gZWxlbTsKCQkJCQkJCQkJd2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHsKCQkJCQkJCQkJCWlmICggb2ZUeXBlID8KCQkJCQkJCQkJCQlub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOgoJCQkJCQkJCQkJCW5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgoJCQkJCQkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCQkvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbykKCQkJCQkJCQkJc3RhcnQgPSBkaXIgPSB0eXBlID09PSAib25seSIgJiYgIXN0YXJ0ICYmICJuZXh0U2libGluZyI7CgkJCQkJCQkJfQoJCQkJCQkJCXJldHVybiB0cnVlOwoJCQkJCQkJfQoKCQkJCQkJCXN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07CgoJCQkJCQkJLy8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGAKCQkJCQkJCWlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHsKCgkJCQkJCQkJLy8gU2VlayBgZWxlbWAgZnJvbSBhIHByZXZpb3VzbHktY2FjaGVkIGluZGV4CgoJCQkJCQkJCS8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXkKCQkJCQkJCQlub2RlID0gcGFyZW50OwoJCQkJCQkJCW91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTsKCgkJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJCS8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KQoJCQkJCQkJCXVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8CgkJCQkJCQkJCShvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJCWNhY2hlID0gdW5pcXVlQ2FjaGVbIHR5cGUgXSB8fCBbXTsKCQkJCQkJCQlub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07CgkJCQkJCQkJZGlmZiA9IG5vZGVJbmRleCAmJiBjYWNoZVsgMiBdOwoJCQkJCQkJCW5vZGUgPSBub2RlSW5kZXggJiYgcGFyZW50LmNoaWxkTm9kZXNbIG5vZGVJbmRleCBdOwoKCQkJCQkJCQl3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fAoKCQkJCQkJCQkJLy8gRmFsbGJhY2sgdG8gc2Vla2luZyBgZWxlbWAgZnJvbSB0aGUgc3RhcnQKCQkJCQkJCQkJKGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7CgoJCQkJCQkJCQkvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVhawoJCQkJCQkJCQlpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7CgkJCQkJCQkJCQl1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBub2RlSW5kZXgsIGRpZmYgXTsKCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJLy8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlCgkJCQkJCQkJaWYgKCB1c2VDYWNoZSApIHsKCQkJCQkJCQkJLy8gLi4uaW4gYSBnemlwLWZyaWVuZGx5IHdheQoJCQkJCQkJCQlub2RlID0gZWxlbTsKCQkJCQkJCQkJb3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pOwoKCQkJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJCQkvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSkKCQkJCQkJCQkJdW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHwKCQkJCQkJCQkJCShvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJCQljYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107CgkJCQkJCQkJCW5vZGVJbmRleCA9IGNhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbIDEgXTsKCQkJCQkJCQkJZGlmZiA9IG5vZGVJbmRleDsKCQkJCQkJCQl9CgoJCQkJCQkJCS8vIHhtbCA6bnRoLWNoaWxkKC4uLikKCQkJCQkJCQkvLyBvciA6bnRoLWxhc3QtY2hpbGQoLi4uKSBvciA6bnRoKC1sYXN0KT8tb2YtdHlwZSguLi4pCgkJCQkJCQkJaWYgKCBkaWZmID09PSBmYWxzZSApIHsKCQkJCQkJCQkJLy8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnQKCQkJCQkJCQkJd2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHwKCQkJCQkJCQkJCShkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkgewoKCQkJCQkJCQkJCWlmICggKCBvZlR5cGUgPwoJCQkJCQkJCQkJCW5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6CgkJCQkJCQkJCQkJbm9kZS5ub2RlVHlwZSA9PT0gMSApICYmCgkJCQkJCQkJCQkJKytkaWZmICkgewoKCQkJCQkJCQkJCQkvLyBDYWNoZSB0aGUgaW5kZXggb2YgZWFjaCBlbmNvdW50ZXJlZCBlbGVtZW50CgkJCQkJCQkJCQkJaWYgKCB1c2VDYWNoZSApIHsKCQkJCQkJCQkJCQkJb3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pOwoKCQkJCQkJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJCQkJCQkvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSkKCQkJCQkJCQkJCQkJdW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHwKCQkJCQkJCQkJCQkJCShvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJCQkJCQl1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07CgkJCQkJCQkJCQkJfQoKCQkJCQkJCQkJCQlpZiAoIG5vZGUgPT09IGVsZW0gKSB7CgkJCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCgkJCQkJCQkvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZQoJCQkJCQkJZGlmZiAtPSBsYXN0OwoJCQkJCQkJcmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7CgkJCQkJCX0KCQkJCQl9OwoJCQl9LAoKCQkJIlBTRVVETyI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkgewoJCQkJLy8gcHNldWRvLWNsYXNzIG5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlCgkJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzCgkJCQkvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVycwoJCQkJLy8gUmVtZW1iZXIgdGhhdCBzZXRGaWx0ZXJzIGluaGVyaXRzIGZyb20gcHNldWRvcwoJCQkJdmFyIGFyZ3MsCgkJCQkJZm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fAoJCQkJCQlTaXp6bGUuZXJyb3IoICJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIgKyBwc2V1ZG8gKTsKCgkJCQkvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0CgkJCQkvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvbgoJCQkJLy8ganVzdCBhcyBTaXp6bGUgZG9lcwoJCQkJaWYgKCBmblsgZXhwYW5kbyBdICkgewoJCQkJCXJldHVybiBmbiggYXJndW1lbnQgKTsKCQkJCX0KCgkJCQkvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXMKCQkJCWlmICggZm4ubGVuZ3RoID4gMSApIHsKCQkJCQlhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgIiIsIGFyZ3VtZW50IF07CgkJCQkJcmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/CgkJCQkJCW1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHsKCQkJCQkJCXZhciBpZHgsCgkJCQkJCQkJbWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLAoJCQkJCQkJCWkgPSBtYXRjaGVkLmxlbmd0aDsKCQkJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQkJCWlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbaV0gKTsKCQkJCQkJCQlzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApOwoJCQkJCQkJfQoJCQkJCQl9KSA6CgkJCQkJCWZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCQkJcmV0dXJuIGZuKCBlbGVtLCAwLCBhcmdzICk7CgkJCQkJCX07CgkJCQl9CgoJCQkJcmV0dXJuIGZuOwoJCQl9CgkJfSwKCgkJcHNldWRvczogewoJCQkvLyBQb3RlbnRpYWxseSBjb21wbGV4IHBzZXVkb3MKCQkJIm5vdCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCQkvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZQoJCQkJLy8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmcKCQkJCS8vIHNwYWNlcyBhcyBjb21iaW5hdG9ycwoJCQkJdmFyIGlucHV0ID0gW10sCgkJCQkJcmVzdWx0cyA9IFtdLAoJCQkJCW1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgIiQxIiApICk7CgoJCQkJcmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/CgkJCQkJbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7CgkJCQkJCXZhciBlbGVtLAoJCQkJCQkJdW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLAoJCQkJCQkJaSA9IHNlZWQubGVuZ3RoOwoKCQkJCQkJLy8gTWF0Y2ggZWxlbWVudHMgdW5tYXRjaGVkIGJ5IGBtYXRjaGVyYAoJCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJCWlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkgewoJCQkJCQkJCXNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0pIDoKCQkJCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQkJCQlpbnB1dFswXSA9IGVsZW07CgkJCQkJCW1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTsKCQkJCQkJLy8gRG9uJ3Qga2VlcCB0aGUgZWxlbWVudCAoaXNzdWUgIzI5OSkKCQkJCQkJaW5wdXRbMF0gPSBudWxsOwoJCQkJCQlyZXR1cm4gIXJlc3VsdHMucG9wKCk7CgkJCQkJfTsKCQkJfSksCgoJCQkiaGFzIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gU2l6emxlKCBzZWxlY3RvciwgZWxlbSApLmxlbmd0aCA+IDA7CgkJCQl9OwoJCQl9KSwKCgkJCSJjb250YWlucyI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggdGV4dCApIHsKCQkJCXRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgkJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuICggZWxlbS50ZXh0Q29udGVudCB8fCBlbGVtLmlubmVyVGV4dCB8fCBnZXRUZXh0KCBlbGVtICkgKS5pbmRleE9mKCB0ZXh0ICkgPiAtMTsKCQkJCX07CgkJCX0pLAoKCQkJLy8gIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3IKCQkJLy8gaXMgYmFzZWQgc29sZWx5IG9uIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUKCQkJLy8gYmVpbmcgZXF1YWwgdG8gdGhlIGlkZW50aWZpZXIgQywKCQkJLy8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSAiLSIuCgkJCS8vIFRoZSBtYXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LgoJCQkvLyBUaGUgaWRlbnRpZmllciBDIGRvZXMgbm90IGhhdmUgdG8gYmUgYSB2YWxpZCBsYW5ndWFnZSBuYW1lLiIKCQkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkbwoJCQkibGFuZyI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7CgkJCQkvLyBsYW5nIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyCgkJCQlpZiAoICFyaWRlbnRpZmllci50ZXN0KGxhbmcgfHwgIiIpICkgewoJCQkJCVNpenpsZS5lcnJvciggInVuc3VwcG9ydGVkIGxhbmc6ICIgKyBsYW5nICk7CgkJCQl9CgkJCQlsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7CgkJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJdmFyIGVsZW1MYW5nOwoJCQkJCWRvIHsKCQkJCQkJaWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/CgkJCQkJCQllbGVtLmxhbmcgOgoJCQkJCQkJZWxlbS5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoImxhbmciKSkgKSB7CgoJCQkJCQkJZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpOwoJCQkJCQkJcmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyAiLSIgKSA9PT0gMDsKCQkJCQkJfQoJCQkJCX0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX07CgkJCX0pLAoKCQkJLy8gTWlzY2VsbGFuZW91cwoJCQkidGFyZ2V0IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDsKCQkJCXJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDsKCQkJfSwKCgkJCSJyb290IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gZWxlbSA9PT0gZG9jRWxlbTsKCQkJfSwKCgkJCSJmb2N1cyI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGVsZW0gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSAmJiAhIShlbGVtLnR5cGUgfHwgZWxlbS5ocmVmIHx8IH5lbGVtLnRhYkluZGV4KTsKCQkJfSwKCgkJCS8vIEJvb2xlYW4gcHJvcGVydGllcwoJCQkiZW5hYmxlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlOwoJCQl9LAoKCQkJImRpc2FibGVkIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTsKCQkJfSwKCgkJCSJjaGVja2VkIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHMKCQkJCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkCgkJCQl2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCQlyZXR1cm4gKG5vZGVOYW1lID09PSAiaW5wdXQiICYmICEhZWxlbS5jaGVja2VkKSB8fCAobm9kZU5hbWUgPT09ICJvcHRpb24iICYmICEhZWxlbS5zZWxlY3RlZCk7CgkJCX0sCgoJCQkic2VsZWN0ZWQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCS8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHQKCQkJCS8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHkKCQkJCWlmICggZWxlbS5wYXJlbnROb2RlICkgewoJCQkJCWVsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4OwoJCQkJfQoKCQkJCXJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlOwoJCQl9LAoKCQkJLy8gQ29udGVudHMKCQkJImVtcHR5IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2VtcHR5LXBzZXVkbwoJCQkJLy8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLAoJCQkJLy8gICBidXQgbm90IGJ5IG90aGVycyAoY29tbWVudDogODsgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbjogNzsgZXRjLikKCQkJCS8vIG5vZGVUeXBlIDwgNiB3b3JrcyBiZWNhdXNlIGF0dHJpYnV0ZXMgKDIpIGRvIG5vdCBhcHBlYXIgYXMgY2hpbGRyZW4KCQkJCWZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkgewoJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSwKCgkJCSJwYXJlbnQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiAhRXhwci5wc2V1ZG9zWyJlbXB0eSJdKCBlbGVtICk7CgkJCX0sCgoJCQkvLyBFbGVtZW50L2lucHV0IHR5cGVzCgkJCSJoZWFkZXIiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTsKCQkJfSwKCgkJCSJpbnB1dCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIHJpbnB1dHMudGVzdCggZWxlbS5ub2RlTmFtZSApOwoJCQl9LAoKCQkJImJ1dHRvbiI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCQlyZXR1cm4gbmFtZSA9PT0gImlucHV0IiAmJiBlbGVtLnR5cGUgPT09ICJidXR0b24iIHx8IG5hbWUgPT09ICJidXR0b24iOwoJCQl9LAoKCQkJInRleHQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciBhdHRyOwoJCQkJcmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gImlucHV0IiAmJgoJCQkJCWVsZW0udHlwZSA9PT0gInRleHQiICYmCgoJCQkJCS8vIFN1cHBvcnQ6IElFPDgKCQkJCQkvLyBOZXcgSFRNTDUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiwgInNlYXJjaCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gInRleHQiCgkJCQkJKCAoYXR0ciA9IGVsZW0uZ2V0QXR0cmlidXRlKCJ0eXBlIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSAidGV4dCIgKTsKCQkJfSwKCgkJCS8vIFBvc2l0aW9uLWluLWNvbGxlY3Rpb24KCQkJImZpcnN0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpIHsKCQkJCXJldHVybiBbIDAgXTsKCQkJfSksCgoJCQkibGFzdCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQkJcmV0dXJuIFsgbGVuZ3RoIC0gMSBdOwoJCQl9KSwKCgkJCSJlcSI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHsKCQkJCXJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTsKCQkJfSksCgoJCQkiZXZlbiI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQkJdmFyIGkgPSAwOwoJCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7CgkJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJCX0KCQkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJCX0pLAoKCQkJIm9kZCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQkJdmFyIGkgPSAxOwoJCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7CgkJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJCX0KCQkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJCX0pLAoKCQkJImx0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkgewoJCQkJdmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50OwoJCQkJZm9yICggOyAtLWkgPj0gMDsgKSB7CgkJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJCX0KCQkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJCX0pLAoKCQkJImd0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkgewoJCQkJdmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50OwoJCQkJZm9yICggOyArK2kgPCBsZW5ndGg7ICkgewoJCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCQl9CgkJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCQl9KQoJCX0KCX07CgoJRXhwci5wc2V1ZG9zWyJudGgiXSA9IEV4cHIucHNldWRvc1siZXEiXTsKCgkvLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvcwoJZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7CgkJRXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVJbnB1dFBzZXVkbyggaSApOwoJfQoJZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHsKCQlFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApOwoJfQoKCS8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVycwoJZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9CglzZXRGaWx0ZXJzLnByb3RvdHlwZSA9IEV4cHIuZmlsdGVycyA9IEV4cHIucHNldWRvczsKCUV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7CgoJdG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHsKCQl2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSwKCQkJc29GYXIsIGdyb3VwcywgcHJlRmlsdGVycywKCQkJY2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyAiICIgXTsKCgkJaWYgKCBjYWNoZWQgKSB7CgkJCXJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7CgkJfQoKCQlzb0ZhciA9IHNlbGVjdG9yOwoJCWdyb3VwcyA9IFtdOwoJCXByZUZpbHRlcnMgPSBFeHByLnByZUZpbHRlcjsKCgkJd2hpbGUgKCBzb0ZhciApIHsKCgkJCS8vIENvbW1hIGFuZCBmaXJzdCBydW4KCQkJaWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7CgkJCQlpZiAoIG1hdGNoICkgewoJCQkJCS8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkCgkJCQkJc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7CgkJCQl9CgkJCQlncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApOwoJCQl9CgoJCQltYXRjaGVkID0gZmFsc2U7CgoJCQkvLyBDb21iaW5hdG9ycwoJCQlpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHsKCQkJCW1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpOwoJCQkJdG9rZW5zLnB1c2goewoJCQkJCXZhbHVlOiBtYXRjaGVkLAoJCQkJCS8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZQoJCQkJCXR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCAiICIgKQoJCQkJfSk7CgkJCQlzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApOwoJCQl9CgoJCQkvLyBGaWx0ZXJzCgkJCWZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7CgkJCQlpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8CgkJCQkJKG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7CgkJCQkJbWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7CgkJCQkJdG9rZW5zLnB1c2goewoJCQkJCQl2YWx1ZTogbWF0Y2hlZCwKCQkJCQkJdHlwZTogdHlwZSwKCQkJCQkJbWF0Y2hlczogbWF0Y2gKCQkJCQl9KTsKCQkJCQlzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApOwoJCQkJfQoJCQl9CgoJCQlpZiAoICFtYXRjaGVkICkgewoJCQkJYnJlYWs7CgkJCX0KCQl9CgoJCS8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2VzcwoJCS8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZwoJCS8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2VucwoJCXJldHVybiBwYXJzZU9ubHkgPwoJCQlzb0Zhci5sZW5ndGggOgoJCQlzb0ZhciA/CgkJCQlTaXp6bGUuZXJyb3IoIHNlbGVjdG9yICkgOgoJCQkJLy8gQ2FjaGUgdGhlIHRva2VucwoJCQkJdG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7Cgl9OwoKCWZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHsKCQl2YXIgaSA9IDAsCgkJCWxlbiA9IHRva2Vucy5sZW5ndGgsCgkJCXNlbGVjdG9yID0gIiI7CgkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCXNlbGVjdG9yICs9IHRva2Vuc1tpXS52YWx1ZTsKCQl9CgkJcmV0dXJuIHNlbGVjdG9yOwoJfQoKCWZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7CgkJdmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLAoJCQljaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBkaXIgPT09ICJwYXJlbnROb2RlIiwKCQkJZG9uZU5hbWUgPSBkb25lKys7CgoJCXJldHVybiBjb21iaW5hdG9yLmZpcnN0ID8KCQkJLy8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50CgkJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCQl3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkgewoJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkgewoJCQkJCQlyZXR1cm4gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICk7CgkJCQkJfQoJCQkJfQoJCQl9IDoKCgkJCS8vIENoZWNrIGFnYWluc3QgYWxsIGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50cwoJCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQkJdmFyIG9sZENhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSwKCQkJCQluZXdDYWNoZSA9IFsgZGlycnVucywgZG9uZU5hbWUgXTsKCgkJCQkvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBjb21iaW5hdG9yIGNhY2hpbmcKCQkJCWlmICggeG1sICkgewoJCQkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkgewoJCQkJCQkJaWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHsKCQkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJd2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHsKCQkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7CgkJCQkJCQlvdXRlckNhY2hlID0gZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSk7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJLy8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpCgkJCQkJCQl1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIGVsZW0udW5pcXVlSUQgXSB8fCAob3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdID0ge30pOwoKCQkJCQkJCWlmICggKG9sZENhY2hlID0gdW5pcXVlQ2FjaGVbIGRpciBdKSAmJgoJCQkJCQkJCW9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7CgoJCQkJCQkJCS8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzCgkJCQkJCQkJcmV0dXJuIChuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCS8vIFJldXNlIG5ld2NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHMKCQkJCQkJCQl1bmlxdWVDYWNoZVsgZGlyIF0gPSBuZXdDYWNoZTsKCgkJCQkJCQkJLy8gQSBtYXRjaCBtZWFucyB3ZSdyZSBkb25lOyBhIGZhaWwgbWVhbnMgd2UgaGF2ZSB0byBrZWVwIGNoZWNraW5nCgkJCQkJCQkJaWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHsKCQkJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9OwoJfQoKCWZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHsKCQlyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/CgkJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCQl2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDsKCQkJCXdoaWxlICggaS0tICkgewoJCQkJCWlmICggIW1hdGNoZXJzW2ldKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHsKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiB0cnVlOwoJCQl9IDoKCQkJbWF0Y2hlcnNbMF07Cgl9CgoJZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkgewoJCXZhciBpID0gMCwKCQkJbGVuID0gY29udGV4dHMubGVuZ3RoOwoJCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCQlTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApOwoJCX0KCQlyZXR1cm4gcmVzdWx0czsKCX0KCglmdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkgewoJCXZhciBlbGVtLAoJCQluZXdVbm1hdGNoZWQgPSBbXSwKCQkJaSA9IDAsCgkJCWxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsCgkJCW1hcHBlZCA9IG1hcCAhPSBudWxsOwoKCQlmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQkJaWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7CgkJCQlpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHsKCQkJCQluZXdVbm1hdGNoZWQucHVzaCggZWxlbSApOwoJCQkJCWlmICggbWFwcGVkICkgewoJCQkJCQltYXAucHVzaCggaSApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIG5ld1VubWF0Y2hlZDsKCX0KCglmdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7CgkJaWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7CgkJCXBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7CgkJfQoJCWlmICggcG9zdEZpbmRlciAmJiAhcG9zdEZpbmRlclsgZXhwYW5kbyBdICkgewoJCQlwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7CgkJfQoJCXJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHsKCQkJdmFyIHRlbXAsIGksIGVsZW0sCgkJCQlwcmVNYXAgPSBbXSwKCQkJCXBvc3RNYXAgPSBbXSwKCQkJCXByZWV4aXN0aW5nID0gcmVzdWx0cy5sZW5ndGgsCgoJCQkJLy8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHQKCQkJCWVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCAiKiIsIGNvbnRleHQubm9kZVR5cGUgPyBbIGNvbnRleHQgXSA6IGNvbnRleHQsIFtdICksCgoJCQkJLy8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uCgkJCQltYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID8KCQkJCQljb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6CgkJCQkJZWxlbXMsCgoJCQkJbWF0Y2hlck91dCA9IG1hdGNoZXIgPwoJCQkJCS8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsCgkJCQkJcG9zdEZpbmRlciB8fCAoIHNlZWQgPyBwcmVGaWx0ZXIgOiBwcmVleGlzdGluZyB8fCBwb3N0RmlsdGVyICkgPwoKCQkJCQkJLy8gLi4uaW50ZXJtZWRpYXRlIHByb2Nlc3NpbmcgaXMgbmVjZXNzYXJ5CgkJCQkJCVtdIDoKCgkJCQkJCS8vIC4uLm90aGVyd2lzZSB1c2UgcmVzdWx0cyBkaXJlY3RseQoJCQkJCQlyZXN1bHRzIDoKCQkJCQltYXRjaGVySW47CgoJCQkvLyBGaW5kIHByaW1hcnkgbWF0Y2hlcwoJCQlpZiAoIG1hdGNoZXIgKSB7CgkJCQltYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApOwoJCQl9CgoJCQkvLyBBcHBseSBwb3N0RmlsdGVyCgkJCWlmICggcG9zdEZpbHRlciApIHsKCQkJCXRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApOwoJCQkJcG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApOwoKCQkJCS8vIFVuLW1hdGNoIGZhaWxpbmcgZWxlbWVudHMgYnkgbW92aW5nIHRoZW0gYmFjayB0byBtYXRjaGVySW4KCQkJCWkgPSB0ZW1wLmxlbmd0aDsKCQkJCXdoaWxlICggaS0tICkgewoJCQkJCWlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHsKCQkJCQkJbWF0Y2hlck91dFsgcG9zdE1hcFtpXSBdID0gIShtYXRjaGVySW5bIHBvc3RNYXBbaV0gXSA9IGVsZW0pOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJaWYgKCBzZWVkICkgewoJCQkJaWYgKCBwb3N0RmluZGVyIHx8IHByZUZpbHRlciApIHsKCQkJCQlpZiAoIHBvc3RGaW5kZXIgKSB7CgkJCQkJCS8vIEdldCB0aGUgZmluYWwgbWF0Y2hlck91dCBieSBjb25kZW5zaW5nIHRoaXMgaW50ZXJtZWRpYXRlIGludG8gcG9zdEZpbmRlciBjb250ZXh0cwoJCQkJCQl0ZW1wID0gW107CgkJCQkJCWkgPSBtYXRjaGVyT3V0Lmxlbmd0aDsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCQlpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgKSB7CgkJCQkJCQkJLy8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2gKCQkJCQkJCQl0ZW1wLnB1c2goIChtYXRjaGVySW5baV0gPSBlbGVtKSApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCXBvc3RGaW5kZXIoIG51bGwsIChtYXRjaGVyT3V0ID0gW10pLCB0ZW1wLCB4bWwgKTsKCQkJCQl9CgoJCQkJCS8vIE1vdmUgbWF0Y2hlZCBlbGVtZW50cyBmcm9tIHNlZWQgdG8gcmVzdWx0cyB0byBrZWVwIHRoZW0gc3luY2hyb25pemVkCgkJCQkJaSA9IG1hdGNoZXJPdXQubGVuZ3RoOwoJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQlpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiYKCQkJCQkJCSh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHsKCgkJCQkJCQlzZWVkW3RlbXBdID0gIShyZXN1bHRzW3RlbXBdID0gZWxlbSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgoJCQkvLyBBZGQgZWxlbWVudHMgdG8gcmVzdWx0cywgdGhyb3VnaCBwb3N0RmluZGVyIGlmIGRlZmluZWQKCQkJfSBlbHNlIHsKCQkJCW1hdGNoZXJPdXQgPSBjb25kZW5zZSgKCQkJCQltYXRjaGVyT3V0ID09PSByZXN1bHRzID8KCQkJCQkJbWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDoKCQkJCQkJbWF0Y2hlck91dAoJCQkJKTsKCQkJCWlmICggcG9zdEZpbmRlciApIHsKCQkJCQlwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTsKCQkJCX0gZWxzZSB7CgkJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApOwoJCQkJfQoJCQl9CgkJfSk7Cgl9CgoJZnVuY3Rpb24gbWF0Y2hlckZyb21Ub2tlbnMoIHRva2VucyApIHsKCQl2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLAoJCQlsZW4gPSB0b2tlbnMubGVuZ3RoLAoJCQlsZWFkaW5nUmVsYXRpdmUgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMF0udHlwZSBdLAoJCQlpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbIiAiXSwKCQkJaSA9IGxlYWRpbmdSZWxhdGl2ZSA/IDEgOiAwLAoKCQkJLy8gVGhlIGZvdW5kYXRpb25hbCBtYXRjaGVyIGVuc3VyZXMgdGhhdCBlbGVtZW50cyBhcmUgcmVhY2hhYmxlIGZyb20gdG9wLWxldmVsIGNvbnRleHQocykKCQkJbWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0OwoJCQl9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksCgkJCW1hdGNoQW55Q29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGluZGV4T2YoIGNoZWNrQ29udGV4dCwgZWxlbSApID4gLTE7CgkJCX0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSwKCQkJbWF0Y2hlcnMgPSBbIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCQl2YXIgcmV0ID0gKCAhbGVhZGluZ1JlbGF0aXZlICYmICggeG1sIHx8IGNvbnRleHQgIT09IG91dGVybW9zdENvbnRleHQgKSApIHx8ICgKCQkJCQkoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgPwoJCQkJCQltYXRjaENvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApIDoKCQkJCQkJbWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApOwoJCQkJLy8gQXZvaWQgaGFuZ2luZyBvbnRvIGVsZW1lbnQgKGlzc3VlICMyOTkpCgkJCQljaGVja0NvbnRleHQgPSBudWxsOwoJCQkJcmV0dXJuIHJldDsKCQkJfSBdOwoKCQlmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQkJaWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkgewoJCQkJbWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksIG1hdGNoZXIpIF07CgkJCX0gZWxzZSB7CgkJCQltYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7CgoJCQkJLy8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXIKCQkJCWlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkgewoJCQkJCS8vIEZpbmQgdGhlIG5leHQgcmVsYXRpdmUgb3BlcmF0b3IgKGlmIGFueSkgZm9yIHByb3BlciBoYW5kbGluZwoJCQkJCWogPSArK2k7CgkJCQkJZm9yICggOyBqIDwgbGVuOyBqKysgKSB7CgkJCQkJCWlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHsKCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJfQoJCQkJCXJldHVybiBzZXRNYXRjaGVyKAoJCQkJCQlpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwKCQkJCQkJaSA+IDEgJiYgdG9TZWxlY3RvcigKCQkJCQkJCS8vIElmIHRoZSBwcmVjZWRpbmcgdG9rZW4gd2FzIGEgZGVzY2VuZGFudCBjb21iaW5hdG9yLCBpbnNlcnQgYW4gaW1wbGljaXQgYW55LWVsZW1lbnQgYCpgCgkJCQkJCQl0b2tlbnMuc2xpY2UoIDAsIGkgLSAxICkuY29uY2F0KHsgdmFsdWU6IHRva2Vuc1sgaSAtIDIgXS50eXBlID09PSAiICIgPyAiKiIgOiAiIiB9KQoJCQkJCQkpLnJlcGxhY2UoIHJ0cmltLCAiJDEiICksCgkJCQkJCW1hdGNoZXIsCgkJCQkJCWkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLAoJCQkJCQlqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksCgkJCQkJCWogPCBsZW4gJiYgdG9TZWxlY3RvciggdG9rZW5zICkKCQkJCQkpOwoJCQkJfQoJCQkJbWF0Y2hlcnMucHVzaCggbWF0Y2hlciApOwoJCQl9CgkJfQoKCQlyZXR1cm4gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICk7Cgl9CgoJZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgewoJCXZhciBieVNldCA9IHNldE1hdGNoZXJzLmxlbmd0aCA+IDAsCgkJCWJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLAoJCQlzdXBlck1hdGNoZXIgPSBmdW5jdGlvbiggc2VlZCwgY29udGV4dCwgeG1sLCByZXN1bHRzLCBvdXRlcm1vc3QgKSB7CgkJCQl2YXIgZWxlbSwgaiwgbWF0Y2hlciwKCQkJCQltYXRjaGVkQ291bnQgPSAwLAoJCQkJCWkgPSAiMCIsCgkJCQkJdW5tYXRjaGVkID0gc2VlZCAmJiBbXSwKCQkJCQlzZXRNYXRjaGVkID0gW10sCgkJCQkJY29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsCgkJCQkJLy8gV2UgbXVzdCBhbHdheXMgaGF2ZSBlaXRoZXIgc2VlZCBlbGVtZW50cyBvciBvdXRlcm1vc3QgY29udGV4dAoJCQkJCWVsZW1zID0gc2VlZCB8fCBieUVsZW1lbnQgJiYgRXhwci5maW5kWyJUQUciXSggIioiLCBvdXRlcm1vc3QgKSwKCQkJCQkvLyBVc2UgaW50ZWdlciBkaXJydW5zIGlmZiB0aGlzIGlzIHRoZSBvdXRlcm1vc3QgbWF0Y2hlcgoJCQkJCWRpcnJ1bnNVbmlxdWUgPSAoZGlycnVucyArPSBjb250ZXh0QmFja3VwID09IG51bGwgPyAxIDogTWF0aC5yYW5kb20oKSB8fCAwLjEpLAoJCQkJCWxlbiA9IGVsZW1zLmxlbmd0aDsKCgkJCQlpZiAoIG91dGVybW9zdCApIHsKCQkJCQlvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dCA9PT0gZG9jdW1lbnQgfHwgY29udGV4dCB8fCBvdXRlcm1vc3Q7CgkJCQl9CgoJCQkJLy8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHMKCQkJCS8vIFN1cHBvcnQ6IElFPDksIFNhZmFyaQoJCQkJLy8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6ICJsZW5ndGgiOyBTYWZhcmk6IDxudW1iZXI+KSBtYXRjaGluZyBlbGVtZW50cyBieSBpZAoJCQkJZm9yICggOyBpICE9PSBsZW4gJiYgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkgewoJCQkJCWlmICggYnlFbGVtZW50ICYmIGVsZW0gKSB7CgkJCQkJCWogPSAwOwoJCQkJCQlpZiAoICFjb250ZXh0ICYmIGVsZW0ub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQgKSB7CgkJCQkJCQlzZXREb2N1bWVudCggZWxlbSApOwoJCQkJCQkJeG1sID0gIWRvY3VtZW50SXNIVE1MOwoJCQkJCQl9CgkJCQkJCXdoaWxlICggKG1hdGNoZXIgPSBlbGVtZW50TWF0Y2hlcnNbaisrXSkgKSB7CgkJCQkJCQlpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQgfHwgZG9jdW1lbnQsIHhtbCkgKSB7CgkJCQkJCQkJcmVzdWx0cy5wdXNoKCBlbGVtICk7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJaWYgKCBvdXRlcm1vc3QgKSB7CgkJCQkJCQlkaXJydW5zID0gZGlycnVuc1VuaXF1ZTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJLy8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVycwoJCQkJCWlmICggYnlTZXQgKSB7CgkJCQkJCS8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnMKCQkJCQkJaWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkgewoJCQkJCQkJbWF0Y2hlZENvdW50LS07CgkJCQkJCX0KCgkJCQkJCS8vIExlbmd0aGVuIHRoZSBhcnJheSBmb3IgZXZlcnkgZWxlbWVudCwgbWF0Y2hlZCBvciBub3QKCQkJCQkJaWYgKCBzZWVkICkgewoJCQkJCQkJdW5tYXRjaGVkLnB1c2goIGVsZW0gKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQkvLyBgaWAgaXMgbm93IHRoZSBjb3VudCBvZiBlbGVtZW50cyB2aXNpdGVkIGFib3ZlLCBhbmQgYWRkaW5nIGl0IHRvIGBtYXRjaGVkQ291bnRgCgkJCQkvLyBtYWtlcyB0aGUgbGF0dGVyIG5vbm5lZ2F0aXZlLgoJCQkJbWF0Y2hlZENvdW50ICs9IGk7CgoJCQkJLy8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzCgkJCQkvLyBOT1RFOiBUaGlzIGNhbiBiZSBza2lwcGVkIGlmIHRoZXJlIGFyZSBubyB1bm1hdGNoZWQgZWxlbWVudHMgKGkuZS4sIGBtYXRjaGVkQ291bnRgCgkJCQkvLyBlcXVhbHMgYGlgKSwgdW5sZXNzIHdlIGRpZG4ndCB2aXNpdCBfYW55XyBlbGVtZW50cyBpbiB0aGUgYWJvdmUgbG9vcCBiZWNhdXNlIHdlIGhhdmUKCQkJCS8vIG5vIGVsZW1lbnQgbWF0Y2hlcnMgYW5kIG5vIHNlZWQuCgkJCQkvLyBJbmNyZW1lbnRpbmcgYW4gaW5pdGlhbGx5LXN0cmluZyAiMCIgYGlgIGFsbG93cyBgaWAgdG8gcmVtYWluIGEgc3RyaW5nIG9ubHkgaW4gdGhhdAoJCQkJLy8gY2FzZSwgd2hpY2ggd2lsbCByZXN1bHQgaW4gYSAiMDAiIGBtYXRjaGVkQ291bnRgIHRoYXQgZGlmZmVycyBmcm9tIGBpYCBidXQgaXMgYWxzbwoJCQkJLy8gbnVtZXJpY2FsbHkgemVyby4KCQkJCWlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkgewoJCQkJCWogPSAwOwoJCQkJCXdoaWxlICggKG1hdGNoZXIgPSBzZXRNYXRjaGVyc1tqKytdKSApIHsKCQkJCQkJbWF0Y2hlciggdW5tYXRjaGVkLCBzZXRNYXRjaGVkLCBjb250ZXh0LCB4bWwgKTsKCQkJCQl9CgoJCQkJCWlmICggc2VlZCApIHsKCQkJCQkJLy8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZwoJCQkJCQlpZiAoIG1hdGNoZWRDb3VudCA+IDAgKSB7CgkJCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJCQlpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkgewoJCQkJCQkJCQlzZXRNYXRjaGVkW2ldID0gcG9wLmNhbGwoIHJlc3VsdHMgKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCS8vIERpc2NhcmQgaW5kZXggcGxhY2Vob2xkZXIgdmFsdWVzIHRvIGdldCBvbmx5IGFjdHVhbCBtYXRjaGVzCgkJCQkJCXNldE1hdGNoZWQgPSBjb25kZW5zZSggc2V0TWF0Y2hlZCApOwoJCQkJCX0KCgkJCQkJLy8gQWRkIG1hdGNoZXMgdG8gcmVzdWx0cwoJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIHNldE1hdGNoZWQgKTsKCgkJCQkJLy8gU2VlZGxlc3Mgc2V0IG1hdGNoZXMgc3VjY2VlZGluZyBtdWx0aXBsZSBzdWNjZXNzZnVsIG1hdGNoZXJzIHN0aXB1bGF0ZSBzb3J0aW5nCgkJCQkJaWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmCgkJCQkJCSggbWF0Y2hlZENvdW50ICsgc2V0TWF0Y2hlcnMubGVuZ3RoICkgPiAxICkgewoKCQkJCQkJU2l6emxlLnVuaXF1ZVNvcnQoIHJlc3VsdHMgKTsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzCgkJCQlpZiAoIG91dGVybW9zdCApIHsKCQkJCQlkaXJydW5zID0gZGlycnVuc1VuaXF1ZTsKCQkJCQlvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDsKCQkJCX0KCgkJCQlyZXR1cm4gdW5tYXRjaGVkOwoJCQl9OwoKCQlyZXR1cm4gYnlTZXQgPwoJCQltYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDoKCQkJc3VwZXJNYXRjaGVyOwoJfQoKCWNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7CgkJdmFyIGksCgkJCXNldE1hdGNoZXJzID0gW10sCgkJCWVsZW1lbnRNYXRjaGVycyA9IFtdLAoJCQljYWNoZWQgPSBjb21waWxlckNhY2hlWyBzZWxlY3RvciArICIgIiBdOwoKCQlpZiAoICFjYWNoZWQgKSB7CgkJCS8vIEdlbmVyYXRlIGEgZnVuY3Rpb24gb2YgcmVjdXJzaXZlIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNoZWNrIGVhY2ggZWxlbWVudAoJCQlpZiAoICFtYXRjaCApIHsKCQkJCW1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7CgkJCX0KCQkJaSA9IG1hdGNoLmxlbmd0aDsKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQljYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTsKCQkJCWlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7CgkJCQkJc2V0TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7CgkJCQl9IGVsc2UgewoJCQkJCWVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTsKCQkJCX0KCQkJfQoKCQkJLy8gQ2FjaGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uCgkJCWNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApOwoKCQkJLy8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uCgkJCWNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yOwoJCX0KCQlyZXR1cm4gY2FjaGVkOwoJfTsKCgkvKioKCSAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWQKCSAqICBzZWxlY3RvciBmdW5jdGlvbnMKCSAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIG9yIGEgcHJlLWNvbXBpbGVkCgkgKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZQoJICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0CgkgKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0c10KCSAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0CgkgKi8KCXNlbGVjdCA9IFNpenpsZS5zZWxlY3QgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7CgkJdmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsCgkJCWNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSAiZnVuY3Rpb24iICYmIHNlbGVjdG9yLAoJCQltYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTsKCgkJcmVzdWx0cyA9IHJlc3VsdHMgfHwgW107CgoJCS8vIFRyeSB0byBtaW5pbWl6ZSBvcGVyYXRpb25zIGlmIHRoZXJlIGlzIG9ubHkgb25lIHNlbGVjdG9yIGluIHRoZSBsaXN0IGFuZCBubyBzZWVkCgkJLy8gKHRoZSBsYXR0ZXIgb2Ygd2hpY2ggZ3VhcmFudGVlcyB1cyBjb250ZXh0KQoJCWlmICggbWF0Y2gubGVuZ3RoID09PSAxICkgewoKCQkJLy8gUmVkdWNlIGNvbnRleHQgaWYgdGhlIGxlYWRpbmcgY29tcG91bmQgc2VsZWN0b3IgaXMgYW4gSUQKCQkJdG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApOwoJCQlpZiAoIHRva2Vucy5sZW5ndGggPiAyICYmICh0b2tlbiA9IHRva2Vuc1swXSkudHlwZSA9PT0gIklEIiAmJgoJCQkJCXN1cHBvcnQuZ2V0QnlJZCAmJiBjb250ZXh0Lm5vZGVUeXBlID09PSA5ICYmIGRvY3VtZW50SXNIVE1MICYmCgkJCQkJRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHsKCgkJCQljb250ZXh0ID0gKCBFeHByLmZpbmRbIklEIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdOwoJCQkJaWYgKCAhY29udGV4dCApIHsKCQkJCQlyZXR1cm4gcmVzdWx0czsKCgkJCQkvLyBQcmVjb21waWxlZCBtYXRjaGVycyB3aWxsIHN0aWxsIHZlcmlmeSBhbmNlc3RyeSwgc28gc3RlcCB1cCBhIGxldmVsCgkJCQl9IGVsc2UgaWYgKCBjb21waWxlZCApIHsKCQkJCQljb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlOwoJCQkJfQoKCQkJCXNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApOwoJCQl9CgoJCQkvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nCgkJCWkgPSBtYXRjaEV4cHJbIm5lZWRzQ29udGV4dCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDsKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQl0b2tlbiA9IHRva2Vuc1tpXTsKCgkJCQkvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yCgkJCQlpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHsKCQkJCQlicmVhazsKCQkJCX0KCQkJCWlmICggKGZpbmQgPSBFeHByLmZpbmRbIHR5cGUgXSkgKSB7CgkJCQkJLy8gU2VhcmNoLCBleHBhbmRpbmcgY29udGV4dCBmb3IgbGVhZGluZyBzaWJsaW5nIGNvbWJpbmF0b3JzCgkJCQkJaWYgKCAoc2VlZCA9IGZpbmQoCgkJCQkJCXRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSwKCQkJCQkJcnNpYmxpbmcudGVzdCggdG9rZW5zWzBdLnR5cGUgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dAoJCQkJCSkpICkgewoKCQkJCQkJLy8gSWYgc2VlZCBpcyBlbXB0eSBvciBubyB0b2tlbnMgcmVtYWluLCB3ZSBjYW4gcmV0dXJuIGVhcmx5CgkJCQkJCXRva2Vucy5zcGxpY2UoIGksIDEgKTsKCQkJCQkJc2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTsKCQkJCQkJaWYgKCAhc2VsZWN0b3IgKSB7CgkJCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7CgkJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQkJfQoKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQkvLyBDb21waWxlIGFuZCBleGVjdXRlIGEgZmlsdGVyaW5nIGZ1bmN0aW9uIGlmIG9uZSBpcyBub3QgcHJvdmlkZWQKCQkvLyBQcm92aWRlIGBtYXRjaGAgdG8gYXZvaWQgcmV0b2tlbml6YXRpb24gaWYgd2UgbW9kaWZpZWQgdGhlIHNlbGVjdG9yIGFib3ZlCgkJKCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKAoJCQlzZWVkLAoJCQljb250ZXh0LAoJCQkhZG9jdW1lbnRJc0hUTUwsCgkJCXJlc3VsdHMsCgkJCSFjb250ZXh0IHx8IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHQKCQkpOwoJCXJldHVybiByZXN1bHRzOwoJfTsKCgkvLyBPbmUtdGltZSBhc3NpZ25tZW50cwoKCS8vIFNvcnQgc3RhYmlsaXR5CglzdXBwb3J0LnNvcnRTdGFibGUgPSBleHBhbmRvLnNwbGl0KCIiKS5zb3J0KCBzb3J0T3JkZXIgKS5qb2luKCIiKSA9PT0gZXhwYW5kbzsKCgkvLyBTdXBwb3J0OiBDaHJvbWUgMTQtMzUrCgkvLyBBbHdheXMgYXNzdW1lIGR1cGxpY2F0ZXMgaWYgdGhleSBhcmVuJ3QgcGFzc2VkIHRvIHRoZSBjb21wYXJpc29uIGZ1bmN0aW9uCglzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXMgPSAhIWhhc0R1cGxpY2F0ZTsKCgkvLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnQKCXNldERvY3VtZW50KCk7CgoJLy8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNykKCS8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKgoJc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdjEgKSB7CgkJLy8gU2hvdWxkIHJldHVybiAxLCBidXQgcmV0dXJucyA0IChmb2xsb3dpbmcpCgkJcmV0dXJuIGRpdjEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpICkgJiAxOwoJfSk7CgoJLy8gU3VwcG9ydDogSUU8OAoJLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgImludGVycG9sYXRpb24iCgkvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4CglpZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQlkaXYuaW5uZXJIVE1MID0gIjxhIGhyZWY9JyMnPjwvYT4iOwoJCXJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSA9PT0gIiMiIDsKCX0pICkgewoJCWFkZEhhbmRsZSggInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJCWlmICggIWlzWE1MICkgewoJCQkJcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJ0eXBlIiA/IDEgOiAyICk7CgkJCX0KCQl9KTsKCX0KCgkvLyBTdXBwb3J0OiBJRTw5CgkvLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZSgidmFsdWUiKQoJaWYgKCAhc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQlkaXYuaW5uZXJIVE1MID0gIjxpbnB1dC8+IjsKCQlkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoICJ2YWx1ZSIsICIiICk7CgkJcmV0dXJuIGRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSggInZhbHVlIiApID09PSAiIjsKCX0pICkgewoJCWFkZEhhbmRsZSggInZhbHVlIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQlpZiAoICFpc1hNTCAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJpbnB1dCIgKSB7CgkJCQlyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7CgkJCX0KCQl9KTsKCX0KCgkvLyBTdXBwb3J0OiBJRTw5CgkvLyBVc2UgZ2V0QXR0cmlidXRlTm9kZSB0byBmZXRjaCBib29sZWFucyB3aGVuIGdldEF0dHJpYnV0ZSBsaWVzCglpZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQlyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSA9PSBudWxsOwoJfSkgKSB7CgkJYWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQl2YXIgdmFsOwoJCQlpZiAoICFpc1hNTCApIHsKCQkJCXJldHVybiBlbGVtWyBuYW1lIF0gPT09IHRydWUgPyBuYW1lLnRvTG93ZXJDYXNlKCkgOgoJCQkJCQkodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgPwoJCQkJCQl2YWwudmFsdWUgOgoJCQkJCW51bGw7CgkJCX0KCQl9KTsKCX0KCglyZXR1cm4gU2l6emxlOwoKCX0pKCB3aW5kb3cgKTsKCgoKCWpRdWVyeS5maW5kID0gU2l6emxlOwoJalF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzOwoJalF1ZXJ5LmV4cHJbICI6IiBdID0galF1ZXJ5LmV4cHIucHNldWRvczsKCWpRdWVyeS51bmlxdWVTb3J0ID0galF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0OwoJalF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDsKCWpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDsKCWpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWluczsKCgoKCXZhciBkaXIgPSBmdW5jdGlvbiggZWxlbSwgZGlyLCB1bnRpbCApIHsKCQl2YXIgbWF0Y2hlZCA9IFtdLAoJCQl0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7CgoJCXdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkgewoJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCQlpZiAoIHRydW5jYXRlICYmIGpRdWVyeSggZWxlbSApLmlzKCB1bnRpbCApICkgewoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJbWF0Y2hlZC5wdXNoKCBlbGVtICk7CgkJCX0KCQl9CgkJcmV0dXJuIG1hdGNoZWQ7Cgl9OwoKCgl2YXIgc2libGluZ3MgPSBmdW5jdGlvbiggbiwgZWxlbSApIHsKCQl2YXIgbWF0Y2hlZCA9IFtdOwoKCQlmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkgewoJCQlpZiAoIG4ubm9kZVR5cGUgPT09IDEgJiYgbiAhPT0gZWxlbSApIHsKCQkJCW1hdGNoZWQucHVzaCggbiApOwoJCQl9CgkJfQoKCQlyZXR1cm4gbWF0Y2hlZDsKCX07CgoKCXZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0OwoKCXZhciByc2luZ2xlVGFnID0gKCAvXjwoW1x3LV0rKVxzKlwvPz4oPzo8XC9cMT58KSQvICk7CgoKCgl2YXIgcmlzU2ltcGxlID0gL14uW146I1xbXC4sXSokLzsKCgkvLyBJbXBsZW1lbnQgdGhlIGlkZW50aWNhbCBmdW5jdGlvbmFsaXR5IGZvciBmaWx0ZXIgYW5kIG5vdAoJZnVuY3Rpb24gd2lubm93KCBlbGVtZW50cywgcXVhbGlmaWVyLCBub3QgKSB7CgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcXVhbGlmaWVyICkgKSB7CgkJCXJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtLCBpICkgewoJCQkJLyoganNoaW50IC1XMDE4ICovCgkJCQlyZXR1cm4gISFxdWFsaWZpZXIuY2FsbCggZWxlbSwgaSwgZWxlbSApICE9PSBub3Q7CgkJCX0gKTsKCgkJfQoKCQlpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHsKCQkJcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gKCBlbGVtID09PSBxdWFsaWZpZXIgKSAhPT0gbm90OwoJCQl9ICk7CgoJCX0KCgkJaWYgKCB0eXBlb2YgcXVhbGlmaWVyID09PSAic3RyaW5nIiApIHsKCQkJaWYgKCByaXNTaW1wbGUudGVzdCggcXVhbGlmaWVyICkgKSB7CgkJCQlyZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7CgkJCX0KCgkJCXF1YWxpZmllciA9IGpRdWVyeS5maWx0ZXIoIHF1YWxpZmllciwgZWxlbWVudHMgKTsKCQl9CgoJCXJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gKCBqUXVlcnkuaW5BcnJheSggZWxlbSwgcXVhbGlmaWVyICkgPiAtMSApICE9PSBub3Q7CgkJfSApOwoJfQoKCWpRdWVyeS5maWx0ZXIgPSBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHsKCQl2YXIgZWxlbSA9IGVsZW1zWyAwIF07CgoJCWlmICggbm90ICkgewoJCQlleHByID0gIjpub3QoIiArIGV4cHIgKyAiKSI7CgkJfQoKCQlyZXR1cm4gZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgPwoJCQlqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGVsZW0sIGV4cHIgKSA/IFsgZWxlbSBdIDogW10gOgoJCQlqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDE7CgkJCX0gKSApOwoJfTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQl2YXIgaSwKCQkJCXJldCA9IFtdLAoJCQkJc2VsZiA9IHRoaXMsCgkJCQlsZW4gPSBzZWxmLmxlbmd0aDsKCgkJCWlmICggdHlwZW9mIHNlbGVjdG9yICE9PSAic3RyaW5nIiApIHsKCQkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5KCBzZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7CgkJCQkJZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHsKCQkJCQkJaWYgKCBqUXVlcnkuY29udGFpbnMoIHNlbGZbIGkgXSwgdGhpcyApICkgewoJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCX0KCQkJCQl9CgkJCQl9ICkgKTsKCQkJfQoKCQkJZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHsKCQkJCWpRdWVyeS5maW5kKCBzZWxlY3Rvciwgc2VsZlsgaSBdLCByZXQgKTsKCQkJfQoKCQkJLy8gTmVlZGVkIGJlY2F1c2UgJCggc2VsZWN0b3IsIGNvbnRleHQgKSBiZWNvbWVzICQoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApCgkJCXJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTsKCQkJcmV0LnNlbGVjdG9yID0gdGhpcy5zZWxlY3RvciA/IHRoaXMuc2VsZWN0b3IgKyAiICIgKyBzZWxlY3RvciA6IHNlbGVjdG9yOwoJCQlyZXR1cm4gcmV0OwoJCX0sCgkJZmlsdGVyOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UgKSApOwoJCX0sCgkJbm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgdHJ1ZSApICk7CgkJfSwKCQlpczogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQlyZXR1cm4gISF3aW5ub3coCgkJCQl0aGlzLAoKCQkJCS8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXQKCQkJCS8vIHNvICQoInA6Zmlyc3QiKS5pcygicDpsYXN0Iikgd29uJ3QgcmV0dXJuIHRydWUgZm9yIGEgZG9jIHdpdGggdHdvICJwIi4KCQkJCXR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIgJiYgcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApID8KCQkJCQlqUXVlcnkoIHNlbGVjdG9yICkgOgoJCQkJCXNlbGVjdG9yIHx8IFtdLAoJCQkJZmFsc2UKCQkJKS5sZW5ndGg7CgkJfQoJfSApOwoKCgkvLyBJbml0aWFsaXplIGEgalF1ZXJ5IG9iamVjdAoKCgkvLyBBIGNlbnRyYWwgcmVmZXJlbmNlIHRvIHRoZSByb290IGpRdWVyeShkb2N1bWVudCkKCXZhciByb290alF1ZXJ5LAoKCQkvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5ncwoJCS8vIFByaW9yaXRpemUgI2lkIG92ZXIgPHRhZz4gdG8gYXZvaWQgWFNTIHZpYSBsb2NhdGlvbi5oYXNoICgjOTUyMSkKCQkvLyBTdHJpY3QgSFRNTCByZWNvZ25pdGlvbiAoIzExMjkwOiBtdXN0IHN0YXJ0IHdpdGggPCkKCQlycXVpY2tFeHByID0gL14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLywKCgkJaW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByb290ICkgewoJCQl2YXIgbWF0Y2gsIGVsZW07CgoJCQkvLyBIQU5ETEU6ICQoIiIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpCgkJCWlmICggIXNlbGVjdG9yICkgewoJCQkJcmV0dXJuIHRoaXM7CgkJCX0KCgkJCS8vIGluaXQgYWNjZXB0cyBhbiBhbHRlcm5hdGUgcm9vdGpRdWVyeQoJCQkvLyBzbyBtaWdyYXRlIGNhbiBzdXBwb3J0IGpRdWVyeS5zdWIgKGdoLTIxMDEpCgkJCXJvb3QgPSByb290IHx8IHJvb3RqUXVlcnk7CgoJCQkvLyBIYW5kbGUgSFRNTCBzdHJpbmdzCgkJCWlmICggdHlwZW9mIHNlbGVjdG9yID09PSAic3RyaW5nIiApIHsKCQkJCWlmICggc2VsZWN0b3IuY2hhckF0KCAwICkgPT09ICI8IiAmJgoJCQkJCXNlbGVjdG9yLmNoYXJBdCggc2VsZWN0b3IubGVuZ3RoIC0gMSApID09PSAiPiIgJiYKCQkJCQlzZWxlY3Rvci5sZW5ndGggPj0gMyApIHsKCgkJCQkJLy8gQXNzdW1lIHRoYXQgc3RyaW5ncyB0aGF0IHN0YXJ0IGFuZCBlbmQgd2l0aCA8PiBhcmUgSFRNTCBhbmQgc2tpcCB0aGUgcmVnZXggY2hlY2sKCQkJCQltYXRjaCA9IFsgbnVsbCwgc2VsZWN0b3IsIG51bGwgXTsKCgkJCQl9IGVsc2UgewoJCQkJCW1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApOwoJCQkJfQoKCQkJCS8vIE1hdGNoIGh0bWwgb3IgbWFrZSBzdXJlIG5vIGNvbnRleHQgaXMgc3BlY2lmaWVkIGZvciAjaWQKCQkJCWlmICggbWF0Y2ggJiYgKCBtYXRjaFsgMSBdIHx8ICFjb250ZXh0ICkgKSB7CgoJCQkJCS8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KQoJCQkJCWlmICggbWF0Y2hbIDEgXSApIHsKCQkJCQkJY29udGV4dCA9IGNvbnRleHQgaW5zdGFuY2VvZiBqUXVlcnkgPyBjb250ZXh0WyAwIF0gOiBjb250ZXh0OwoKCQkJCQkJLy8gc2NyaXB0cyBpcyB0cnVlIGZvciBiYWNrLWNvbXBhdAoJCQkJCQkvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudAoJCQkJCQlqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoCgkJCQkJCQltYXRjaFsgMSBdLAoJCQkJCQkJY29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCwKCQkJCQkJCXRydWUKCQkJCQkJKSApOwoKCQkJCQkJLy8gSEFORExFOiAkKGh0bWwsIHByb3BzKQoJCQkJCQlpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbIDEgXSApICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb250ZXh0ICkgKSB7CgkJCQkJCQlmb3IgKCBtYXRjaCBpbiBjb250ZXh0ICkgewoKCQkJCQkJCQkvLyBQcm9wZXJ0aWVzIG9mIGNvbnRleHQgYXJlIGNhbGxlZCBhcyBtZXRob2RzIGlmIHBvc3NpYmxlCgkJCQkJCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkgewoJCQkJCQkJCQl0aGlzWyBtYXRjaCBdKCBjb250ZXh0WyBtYXRjaCBdICk7CgoJCQkJCQkJCS8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXMKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQl0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQlyZXR1cm4gdGhpczsKCgkJCQkJLy8gSEFORExFOiAkKCNpZCkKCQkJCQl9IGVsc2UgewoJCQkJCQllbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWyAyIF0gKTsKCgkJCQkJCS8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zCgkJCQkJCS8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgIzY5NjMKCQkJCQkJaWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHsKCgkJCQkJCQkvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgSUUgYW5kIE9wZXJhIHJldHVybiBpdGVtcwoJCQkJCQkJLy8gYnkgbmFtZSBpbnN0ZWFkIG9mIElECgkJCQkJCQlpZiAoIGVsZW0uaWQgIT09IG1hdGNoWyAyIF0gKSB7CgkJCQkJCQkJcmV0dXJuIHJvb3RqUXVlcnkuZmluZCggc2VsZWN0b3IgKTsKCQkJCQkJCX0KCgkJCQkJCQkvLyBPdGhlcndpc2UsIHdlIGluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0CgkJCQkJCQl0aGlzLmxlbmd0aCA9IDE7CgkJCQkJCQl0aGlzWyAwIF0gPSBlbGVtOwoJCQkJCQl9CgoJCQkJCQl0aGlzLmNvbnRleHQgPSBkb2N1bWVudDsKCQkJCQkJdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yOwoJCQkJCQlyZXR1cm4gdGhpczsKCQkJCQl9CgoJCQkJLy8gSEFORExFOiAkKGV4cHIsICQoLi4uKSkKCQkJCX0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkgewoJCQkJCXJldHVybiAoIGNvbnRleHQgfHwgcm9vdCApLmZpbmQoIHNlbGVjdG9yICk7CgoJCQkJLy8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpCgkJCQkvLyAod2hpY2ggaXMganVzdCBlcXVpdmFsZW50IHRvOiAkKGNvbnRleHQpLmZpbmQoZXhwcikKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApOwoJCQkJfQoKCQkJLy8gSEFORExFOiAkKERPTUVsZW1lbnQpCgkJCX0gZWxzZSBpZiAoIHNlbGVjdG9yLm5vZGVUeXBlICkgewoJCQkJdGhpcy5jb250ZXh0ID0gdGhpc1sgMCBdID0gc2VsZWN0b3I7CgkJCQl0aGlzLmxlbmd0aCA9IDE7CgkJCQlyZXR1cm4gdGhpczsKCgkJCS8vIEhBTkRMRTogJChmdW5jdGlvbikKCQkJLy8gU2hvcnRjdXQgZm9yIGRvY3VtZW50IHJlYWR5CgkJCX0gZWxzZSBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBzZWxlY3RvciApICkgewoJCQkJcmV0dXJuIHR5cGVvZiByb290LnJlYWR5ICE9PSAidW5kZWZpbmVkIiA/CgkJCQkJcm9vdC5yZWFkeSggc2VsZWN0b3IgKSA6CgoJCQkJCS8vIEV4ZWN1dGUgaW1tZWRpYXRlbHkgaWYgcmVhZHkgaXMgbm90IHByZXNlbnQKCQkJCQlzZWxlY3RvciggalF1ZXJ5ICk7CgkJCX0KCgkJCWlmICggc2VsZWN0b3Iuc2VsZWN0b3IgIT09IHVuZGVmaW5lZCApIHsKCQkJCXRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvci5zZWxlY3RvcjsKCQkJCXRoaXMuY29udGV4dCA9IHNlbGVjdG9yLmNvbnRleHQ7CgkJCX0KCgkJCXJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApOwoJCX07CgoJLy8gR2l2ZSB0aGUgaW5pdCBmdW5jdGlvbiB0aGUgalF1ZXJ5IHByb3RvdHlwZSBmb3IgbGF0ZXIgaW5zdGFudGlhdGlvbgoJaW5pdC5wcm90b3R5cGUgPSBqUXVlcnkuZm47CgoJLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZQoJcm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTsKCgoJdmFyIHJwYXJlbnRzcHJldiA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLAoKCQkvLyBtZXRob2RzIGd1YXJhbnRlZWQgdG8gcHJvZHVjZSBhIHVuaXF1ZSBzZXQgd2hlbiBzdGFydGluZyBmcm9tIGEgdW5pcXVlIHNldAoJCWd1YXJhbnRlZWRVbmlxdWUgPSB7CgkJCWNoaWxkcmVuOiB0cnVlLAoJCQljb250ZW50czogdHJ1ZSwKCQkJbmV4dDogdHJ1ZSwKCQkJcHJldjogdHJ1ZQoJCX07CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCWhhczogZnVuY3Rpb24oIHRhcmdldCApIHsKCQkJdmFyIGksCgkJCQl0YXJnZXRzID0galF1ZXJ5KCB0YXJnZXQsIHRoaXMgKSwKCQkJCWxlbiA9IHRhcmdldHMubGVuZ3RoOwoKCQkJcmV0dXJuIHRoaXMuZmlsdGVyKCBmdW5jdGlvbigpIHsKCQkJCWZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7CgkJCQkJaWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbIGkgXSApICkgewoJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCX0gKTsKCQl9LAoKCQljbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkgewoJCQl2YXIgY3VyLAoJCQkJaSA9IDAsCgkJCQlsID0gdGhpcy5sZW5ndGgsCgkJCQltYXRjaGVkID0gW10sCgkJCQlwb3MgPSBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9ycyApIHx8IHR5cGVvZiBzZWxlY3RvcnMgIT09ICJzdHJpbmciID8KCQkJCQlqUXVlcnkoIHNlbGVjdG9ycywgY29udGV4dCB8fCB0aGlzLmNvbnRleHQgKSA6CgkJCQkJMDsKCgkJCWZvciAoIDsgaSA8IGw7IGkrKyApIHsKCQkJCWZvciAoIGN1ciA9IHRoaXNbIGkgXTsgY3VyICYmIGN1ciAhPT0gY29udGV4dDsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7CgoJCQkJCS8vIEFsd2F5cyBza2lwIGRvY3VtZW50IGZyYWdtZW50cwoJCQkJCWlmICggY3VyLm5vZGVUeXBlIDwgMTEgJiYgKCBwb3MgPwoJCQkJCQlwb3MuaW5kZXgoIGN1ciApID4gLTEgOgoKCQkJCQkJLy8gRG9uJ3QgcGFzcyBub24tZWxlbWVudHMgdG8gU2l6emxlCgkJCQkJCWN1ci5ub2RlVHlwZSA9PT0gMSAmJgoJCQkJCQkJalF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBjdXIsIHNlbGVjdG9ycyApICkgKSB7CgoJCQkJCQltYXRjaGVkLnB1c2goIGN1ciApOwoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZC5sZW5ndGggPiAxID8galF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKSA6IG1hdGNoZWQgKTsKCQl9LAoKCQkvLyBEZXRlcm1pbmUgdGhlIHBvc2l0aW9uIG9mIGFuIGVsZW1lbnQgd2l0aGluCgkJLy8gdGhlIG1hdGNoZWQgc2V0IG9mIGVsZW1lbnRzCgkJaW5kZXg6IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkJLy8gTm8gYXJndW1lbnQsIHJldHVybiBpbmRleCBpbiBwYXJlbnQKCQkJaWYgKCAhZWxlbSApIHsKCQkJCXJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTsKCQkJfQoKCQkJLy8gaW5kZXggaW4gc2VsZWN0b3IKCQkJaWYgKCB0eXBlb2YgZWxlbSA9PT0gInN0cmluZyIgKSB7CgkJCQlyZXR1cm4galF1ZXJ5LmluQXJyYXkoIHRoaXNbIDAgXSwgalF1ZXJ5KCBlbGVtICkgKTsKCQkJfQoKCQkJLy8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50CgkJCXJldHVybiBqUXVlcnkuaW5BcnJheSgKCgkJCQkvLyBJZiBpdCByZWNlaXZlcyBhIGpRdWVyeSBvYmplY3QsIHRoZSBmaXJzdCBlbGVtZW50IGlzIHVzZWQKCQkJCWVsZW0uanF1ZXJ5ID8gZWxlbVsgMCBdIDogZWxlbSwgdGhpcyApOwoJCX0sCgoJCWFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkgewoJCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soCgkJCQlqUXVlcnkudW5pcXVlU29ydCgKCQkJCQlqUXVlcnkubWVyZ2UoIHRoaXMuZ2V0KCksIGpRdWVyeSggc2VsZWN0b3IsIGNvbnRleHQgKSApCgkJCQkpCgkJCSk7CgkJfSwKCgkJYWRkQmFjazogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQlyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgPwoJCQkJdGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKQoJCQkpOwoJCX0KCX0gKTsKCglmdW5jdGlvbiBzaWJsaW5nKCBjdXIsIGRpciApIHsKCQlkbyB7CgkJCWN1ciA9IGN1clsgZGlyIF07CgkJfSB3aGlsZSAoIGN1ciAmJiBjdXIubm9kZVR5cGUgIT09IDEgKTsKCgkJcmV0dXJuIGN1cjsKCX0KCglqUXVlcnkuZWFjaCggewoJCXBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7CgkJCXJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSAxMSA/IHBhcmVudCA6IG51bGw7CgkJfSwKCQlwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGRpciggZWxlbSwgInBhcmVudE5vZGUiICk7CgkJfSwKCQlwYXJlbnRzVW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHsKCQkJcmV0dXJuIGRpciggZWxlbSwgInBhcmVudE5vZGUiLCB1bnRpbCApOwoJCX0sCgkJbmV4dDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBzaWJsaW5nKCBlbGVtLCAibmV4dFNpYmxpbmciICk7CgkJfSwKCQlwcmV2OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHNpYmxpbmcoIGVsZW0sICJwcmV2aW91c1NpYmxpbmciICk7CgkJfSwKCQluZXh0QWxsOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGRpciggZWxlbSwgIm5leHRTaWJsaW5nIiApOwoJCX0sCgkJcHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBkaXIoIGVsZW0sICJwcmV2aW91c1NpYmxpbmciICk7CgkJfSwKCQluZXh0VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHsKCQkJcmV0dXJuIGRpciggZWxlbSwgIm5leHRTaWJsaW5nIiwgdW50aWwgKTsKCQl9LAoJCXByZXZVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkgewoJCQlyZXR1cm4gZGlyKCBlbGVtLCAicHJldmlvdXNTaWJsaW5nIiwgdW50aWwgKTsKCQl9LAoJCXNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHNpYmxpbmdzKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTsKCQl9LAoJCWNoaWxkcmVuOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHNpYmxpbmdzKCBlbGVtLmZpcnN0Q2hpbGQgKTsKCQl9LAoJCWNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgImlmcmFtZSIgKSA/CgkJCQllbGVtLmNvbnRlbnREb2N1bWVudCB8fCBlbGVtLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQgOgoJCQkJalF1ZXJ5Lm1lcmdlKCBbXSwgZWxlbS5jaGlsZE5vZGVzICk7CgkJfQoJfSwgZnVuY3Rpb24oIG5hbWUsIGZuICkgewoJCWpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHVudGlsLCBzZWxlY3RvciApIHsKCQkJdmFyIHJldCA9IGpRdWVyeS5tYXAoIHRoaXMsIGZuLCB1bnRpbCApOwoKCQkJaWYgKCBuYW1lLnNsaWNlKCAtNSApICE9PSAiVW50aWwiICkgewoJCQkJc2VsZWN0b3IgPSB1bnRpbDsKCQkJfQoKCQkJaWYgKCBzZWxlY3RvciAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09ICJzdHJpbmciICkgewoJCQkJcmV0ID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIHJldCApOwoJCQl9CgoJCQlpZiAoIHRoaXMubGVuZ3RoID4gMSApIHsKCgkJCQkvLyBSZW1vdmUgZHVwbGljYXRlcwoJCQkJaWYgKCAhZ3VhcmFudGVlZFVuaXF1ZVsgbmFtZSBdICkgewoJCQkJCXJldCA9IGpRdWVyeS51bmlxdWVTb3J0KCByZXQgKTsKCQkJCX0KCgkJCQkvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlcwoJCQkJaWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkgewoJCQkJCXJldCA9IHJldC5yZXZlcnNlKCk7CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7CgkJfTsKCX0gKTsKCXZhciBybm90d2hpdGUgPSAoIC9cUysvZyApOwoKCgoJLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXMKCWZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSB7CgkJdmFyIG9iamVjdCA9IHt9OwoJCWpRdWVyeS5lYWNoKCBvcHRpb25zLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSwgZnVuY3Rpb24oIF8sIGZsYWcgKSB7CgkJCW9iamVjdFsgZmxhZyBdID0gdHJ1ZTsKCQl9ICk7CgkJcmV0dXJuIG9iamVjdDsKCX0KCgkvKgoJICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6CgkgKgoJICoJb3B0aW9uczogYW4gb3B0aW9uYWwgbGlzdCBvZiBzcGFjZS1zZXBhcmF0ZWQgb3B0aW9ucyB0aGF0IHdpbGwgY2hhbmdlIGhvdwoJICoJCQl0aGUgY2FsbGJhY2sgbGlzdCBiZWhhdmVzIG9yIGEgbW9yZSB0cmFkaXRpb25hbCBvcHRpb24gb2JqZWN0CgkgKgoJICogQnkgZGVmYXVsdCBhIGNhbGxiYWNrIGxpc3Qgd2lsbCBhY3QgbGlrZSBhbiBldmVudCBjYWxsYmFjayBsaXN0IGFuZCBjYW4gYmUKCSAqICJmaXJlZCIgbXVsdGlwbGUgdGltZXMuCgkgKgoJICogUG9zc2libGUgb3B0aW9uczoKCSAqCgkgKglvbmNlOgkJCXdpbGwgZW5zdXJlIHRoZSBjYWxsYmFjayBsaXN0IGNhbiBvbmx5IGJlIGZpcmVkIG9uY2UgKGxpa2UgYSBEZWZlcnJlZCkKCSAqCgkgKgltZW1vcnk6CQkJd2lsbCBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIHZhbHVlcyBhbmQgd2lsbCBjYWxsIGFueSBjYWxsYmFjayBhZGRlZAoJICoJCQkJCWFmdGVyIHRoZSBsaXN0IGhhcyBiZWVuIGZpcmVkIHJpZ2h0IGF3YXkgd2l0aCB0aGUgbGF0ZXN0ICJtZW1vcml6ZWQiCgkgKgkJCQkJdmFsdWVzIChsaWtlIGEgRGVmZXJyZWQpCgkgKgoJICoJdW5pcXVlOgkJCXdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KQoJICoKCSAqCXN0b3BPbkZhbHNlOglpbnRlcnJ1cHQgY2FsbGluZ3Mgd2hlbiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2UKCSAqCgkgKi8KCWpRdWVyeS5DYWxsYmFja3MgPSBmdW5jdGlvbiggb3B0aW9ucyApIHsKCgkJLy8gQ29udmVydCBvcHRpb25zIGZyb20gU3RyaW5nLWZvcm1hdHRlZCB0byBPYmplY3QtZm9ybWF0dGVkIGlmIG5lZWRlZAoJCS8vICh3ZSBjaGVjayBpbiBjYWNoZSBmaXJzdCkKCQlvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09ICJzdHJpbmciID8KCQkJY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIDoKCQkJalF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTsKCgkJdmFyIC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmcKCQkJZmlyaW5nLAoKCQkJLy8gTGFzdCBmaXJlIHZhbHVlIGZvciBub24tZm9yZ2V0dGFibGUgbGlzdHMKCQkJbWVtb3J5LAoKCQkJLy8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWQKCQkJZmlyZWQsCgoJCQkvLyBGbGFnIHRvIHByZXZlbnQgZmlyaW5nCgkJCWxvY2tlZCwKCgkJCS8vIEFjdHVhbCBjYWxsYmFjayBsaXN0CgkJCWxpc3QgPSBbXSwKCgkJCS8vIFF1ZXVlIG9mIGV4ZWN1dGlvbiBkYXRhIGZvciByZXBlYXRhYmxlIGxpc3RzCgkJCXF1ZXVlID0gW10sCgoJCQkvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSBhZGQvcmVtb3ZlIGFzIG5lZWRlZCkKCQkJZmlyaW5nSW5kZXggPSAtMSwKCgkJCS8vIEZpcmUgY2FsbGJhY2tzCgkJCWZpcmUgPSBmdW5jdGlvbigpIHsKCgkJCQkvLyBFbmZvcmNlIHNpbmdsZS1maXJpbmcKCQkJCWxvY2tlZCA9IG9wdGlvbnMub25jZTsKCgkJCQkvLyBFeGVjdXRlIGNhbGxiYWNrcyBmb3IgYWxsIHBlbmRpbmcgZXhlY3V0aW9ucywKCQkJCS8vIHJlc3BlY3RpbmcgZmlyaW5nSW5kZXggb3ZlcnJpZGVzIGFuZCBydW50aW1lIGNoYW5nZXMKCQkJCWZpcmVkID0gZmlyaW5nID0gdHJ1ZTsKCQkJCWZvciAoIDsgcXVldWUubGVuZ3RoOyBmaXJpbmdJbmRleCA9IC0xICkgewoJCQkJCW1lbW9yeSA9IHF1ZXVlLnNoaWZ0KCk7CgkJCQkJd2hpbGUgKCArK2ZpcmluZ0luZGV4IDwgbGlzdC5sZW5ndGggKSB7CgoJCQkJCQkvLyBSdW4gY2FsbGJhY2sgYW5kIGNoZWNrIGZvciBlYXJseSB0ZXJtaW5hdGlvbgoJCQkJCQlpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIG1lbW9yeVsgMCBdLCBtZW1vcnlbIDEgXSApID09PSBmYWxzZSAmJgoJCQkJCQkJb3B0aW9ucy5zdG9wT25GYWxzZSApIHsKCgkJCQkJCQkvLyBKdW1wIHRvIGVuZCBhbmQgZm9yZ2V0IHRoZSBkYXRhIHNvIC5hZGQgZG9lc24ndCByZS1maXJlCgkJCQkJCQlmaXJpbmdJbmRleCA9IGxpc3QubGVuZ3RoOwoJCQkJCQkJbWVtb3J5ID0gZmFsc2U7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgoJCQkJLy8gRm9yZ2V0IHRoZSBkYXRhIGlmIHdlJ3JlIGRvbmUgd2l0aCBpdAoJCQkJaWYgKCAhb3B0aW9ucy5tZW1vcnkgKSB7CgkJCQkJbWVtb3J5ID0gZmFsc2U7CgkJCQl9CgoJCQkJZmlyaW5nID0gZmFsc2U7CgoJCQkJLy8gQ2xlYW4gdXAgaWYgd2UncmUgZG9uZSBmaXJpbmcgZm9yIGdvb2QKCQkJCWlmICggbG9ja2VkICkgewoKCQkJCQkvLyBLZWVwIGFuIGVtcHR5IGxpc3QgaWYgd2UgaGF2ZSBkYXRhIGZvciBmdXR1cmUgYWRkIGNhbGxzCgkJCQkJaWYgKCBtZW1vcnkgKSB7CgkJCQkJCWxpc3QgPSBbXTsKCgkJCQkJLy8gT3RoZXJ3aXNlLCB0aGlzIG9iamVjdCBpcyBzcGVudAoJCQkJCX0gZWxzZSB7CgkJCQkJCWxpc3QgPSAiIjsKCQkJCQl9CgkJCQl9CgkJCX0sCgoJCQkvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdAoJCQlzZWxmID0gewoKCQkJCS8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3QKCQkJCWFkZDogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCBsaXN0ICkgewoKCQkJCQkJLy8gSWYgd2UgaGF2ZSBtZW1vcnkgZnJvbSBhIHBhc3QgcnVuLCB3ZSBzaG91bGQgZmlyZSBhZnRlciBhZGRpbmcKCQkJCQkJaWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHsKCQkJCQkJCWZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGggLSAxOwoJCQkJCQkJcXVldWUucHVzaCggbWVtb3J5ICk7CgkJCQkJCX0KCgkJCQkJCSggZnVuY3Rpb24gYWRkKCBhcmdzICkgewoJCQkJCQkJalF1ZXJ5LmVhY2goIGFyZ3MsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7CgkJCQkJCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYXJnICkgKSB7CgkJCQkJCQkJCWlmICggIW9wdGlvbnMudW5pcXVlIHx8ICFzZWxmLmhhcyggYXJnICkgKSB7CgkJCQkJCQkJCQlsaXN0LnB1c2goIGFyZyApOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSBlbHNlIGlmICggYXJnICYmIGFyZy5sZW5ndGggJiYgalF1ZXJ5LnR5cGUoIGFyZyApICE9PSAic3RyaW5nIiApIHsKCgkJCQkJCQkJCS8vIEluc3BlY3QgcmVjdXJzaXZlbHkKCQkJCQkJCQkJYWRkKCBhcmcgKTsKCQkJCQkJCQl9CgkJCQkJCQl9ICk7CgkJCQkJCX0gKSggYXJndW1lbnRzICk7CgoJCQkJCQlpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkgewoJCQkJCQkJZmlyZSgpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCgkJCQkvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0CgkJCQlyZW1vdmU6IGZ1bmN0aW9uKCkgewoJCQkJCWpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7CgkJCQkJCXZhciBpbmRleDsKCQkJCQkJd2hpbGUgKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7CgkJCQkJCQlsaXN0LnNwbGljZSggaW5kZXgsIDEgKTsKCgkJCQkJCQkvLyBIYW5kbGUgZmlyaW5nIGluZGV4ZXMKCQkJCQkJCWlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7CgkJCQkJCQkJZmlyaW5nSW5kZXgtLTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0gKTsKCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gQ2hlY2sgaWYgYSBnaXZlbiBjYWxsYmFjayBpcyBpbiB0aGUgbGlzdC4KCQkJCS8vIElmIG5vIGFyZ3VtZW50IGlzIGdpdmVuLCByZXR1cm4gd2hldGhlciBvciBub3QgbGlzdCBoYXMgY2FsbGJhY2tzIGF0dGFjaGVkLgoJCQkJaGFzOiBmdW5jdGlvbiggZm4gKSB7CgkJCQkJcmV0dXJuIGZuID8KCQkJCQkJalF1ZXJ5LmluQXJyYXkoIGZuLCBsaXN0ICkgPiAtMSA6CgkJCQkJCWxpc3QubGVuZ3RoID4gMDsKCQkJCX0sCgoJCQkJLy8gUmVtb3ZlIGFsbCBjYWxsYmFja3MgZnJvbSB0aGUgbGlzdAoJCQkJZW1wdHk6IGZ1bmN0aW9uKCkgewoJCQkJCWlmICggbGlzdCApIHsKCQkJCQkJbGlzdCA9IFtdOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gRGlzYWJsZSAuZmlyZSBhbmQgLmFkZAoJCQkJLy8gQWJvcnQgYW55IGN1cnJlbnQvcGVuZGluZyBleGVjdXRpb25zCgkJCQkvLyBDbGVhciBhbGwgY2FsbGJhY2tzIGFuZCB2YWx1ZXMKCQkJCWRpc2FibGU6IGZ1bmN0aW9uKCkgewoJCQkJCWxvY2tlZCA9IHF1ZXVlID0gW107CgkJCQkJbGlzdCA9IG1lbW9yeSA9ICIiOwoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCQkJCWRpc2FibGVkOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gIWxpc3Q7CgkJCQl9LAoKCQkJCS8vIERpc2FibGUgLmZpcmUKCQkJCS8vIEFsc28gZGlzYWJsZSAuYWRkIHVubGVzcyB3ZSBoYXZlIG1lbW9yeSAoc2luY2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QpCgkJCQkvLyBBYm9ydCBhbnkgcGVuZGluZyBleGVjdXRpb25zCgkJCQlsb2NrOiBmdW5jdGlvbigpIHsKCQkJCQlsb2NrZWQgPSB0cnVlOwoJCQkJCWlmICggIW1lbW9yeSApIHsKCQkJCQkJc2VsZi5kaXNhYmxlKCk7CgkJCQkJfQoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCQkJCWxvY2tlZDogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuICEhbG9ja2VkOwoJCQkJfSwKCgkJCQkvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzCgkJCQlmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7CgkJCQkJaWYgKCAhbG9ja2VkICkgewoJCQkJCQlhcmdzID0gYXJncyB8fCBbXTsKCQkJCQkJYXJncyA9IFsgY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3MgXTsKCQkJCQkJcXVldWUucHVzaCggYXJncyApOwoJCQkJCQlpZiAoICFmaXJpbmcgKSB7CgkJCQkJCQlmaXJlKCk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9LAoKCQkJCS8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzCgkJCQlmaXJlOiBmdW5jdGlvbigpIHsKCQkJCQlzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlCgkJCQlmaXJlZDogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuICEhZmlyZWQ7CgkJCQl9CgkJCX07CgoJCXJldHVybiBzZWxmOwoJfTsKCgoJalF1ZXJ5LmV4dGVuZCggewoKCQlEZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7CgkJCXZhciB0dXBsZXMgPSBbCgoJCQkJCS8vIGFjdGlvbiwgYWRkIGxpc3RlbmVyLCBsaXN0ZW5lciBsaXN0LCBmaW5hbCBzdGF0ZQoJCQkJCVsgInJlc29sdmUiLCAiZG9uZSIsIGpRdWVyeS5DYWxsYmFja3MoICJvbmNlIG1lbW9yeSIgKSwgInJlc29sdmVkIiBdLAoJCQkJCVsgInJlamVjdCIsICJmYWlsIiwgalF1ZXJ5LkNhbGxiYWNrcyggIm9uY2UgbWVtb3J5IiApLCAicmVqZWN0ZWQiIF0sCgkJCQkJWyAibm90aWZ5IiwgInByb2dyZXNzIiwgalF1ZXJ5LkNhbGxiYWNrcyggIm1lbW9yeSIgKSBdCgkJCQldLAoJCQkJc3RhdGUgPSAicGVuZGluZyIsCgkJCQlwcm9taXNlID0gewoJCQkJCXN0YXRlOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHN0YXRlOwoJCQkJCX0sCgkJCQkJYWx3YXlzOiBmdW5jdGlvbigpIHsKCQkJCQkJZGVmZXJyZWQuZG9uZSggYXJndW1lbnRzICkuZmFpbCggYXJndW1lbnRzICk7CgkJCQkJCXJldHVybiB0aGlzOwoJCQkJCX0sCgkJCQkJdGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkgewoJCQkJCQl2YXIgZm5zID0gYXJndW1lbnRzOwoJCQkJCQlyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7CgkJCQkJCQlqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7CgkJCQkJCQkJdmFyIGZuID0galF1ZXJ5LmlzRnVuY3Rpb24oIGZuc1sgaSBdICkgJiYgZm5zWyBpIF07CgoJCQkJCQkJCS8vIGRlZmVycmVkWyBkb25lIHwgZmFpbCB8IHByb2dyZXNzIF0gZm9yIGZvcndhcmRpbmcgYWN0aW9ucyB0byBuZXdEZWZlcgoJCQkJCQkJCWRlZmVycmVkWyB0dXBsZVsgMSBdIF0oIGZ1bmN0aW9uKCkgewoJCQkJCQkJCQl2YXIgcmV0dXJuZWQgPSBmbiAmJiBmbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCQkJCQkJCWlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHsKCQkJCQkJCQkJCXJldHVybmVkLnByb21pc2UoKQoJCQkJCQkJCQkJCS5wcm9ncmVzcyggbmV3RGVmZXIubm90aWZ5ICkKCQkJCQkJCQkJCQkuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApCgkJCQkJCQkJCQkJLmZhaWwoIG5ld0RlZmVyLnJlamVjdCApOwoJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJbmV3RGVmZXJbIHR1cGxlWyAwIF0gKyAiV2l0aCIgXSgKCQkJCQkJCQkJCQl0aGlzID09PSBwcm9taXNlID8gbmV3RGVmZXIucHJvbWlzZSgpIDogdGhpcywKCQkJCQkJCQkJCQlmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50cwoJCQkJCQkJCQkJKTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0gKTsKCQkJCQkJCX0gKTsKCQkJCQkJCWZucyA9IG51bGw7CgkJCQkJCX0gKS5wcm9taXNlKCk7CgkJCQkJfSwKCgkJCQkJLy8gR2V0IGEgcHJvbWlzZSBmb3IgdGhpcyBkZWZlcnJlZAoJCQkJCS8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3QKCQkJCQlwcm9taXNlOiBmdW5jdGlvbiggb2JqICkgewoJCQkJCQlyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7CgkJCQkJfQoJCQkJfSwKCQkJCWRlZmVycmVkID0ge307CgoJCQkvLyBLZWVwIHBpcGUgZm9yIGJhY2stY29tcGF0CgkJCXByb21pc2UucGlwZSA9IHByb21pc2UudGhlbjsKCgkJCS8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHMKCQkJalF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkgewoJCQkJdmFyIGxpc3QgPSB0dXBsZVsgMiBdLAoJCQkJCXN0YXRlU3RyaW5nID0gdHVwbGVbIDMgXTsKCgkJCQkvLyBwcm9taXNlWyBkb25lIHwgZmFpbCB8IHByb2dyZXNzIF0gPSBsaXN0LmFkZAoJCQkJcHJvbWlzZVsgdHVwbGVbIDEgXSBdID0gbGlzdC5hZGQ7CgoJCQkJLy8gSGFuZGxlIHN0YXRlCgkJCQlpZiAoIHN0YXRlU3RyaW5nICkgewoJCQkJCWxpc3QuYWRkKCBmdW5jdGlvbigpIHsKCgkJCQkJCS8vIHN0YXRlID0gWyByZXNvbHZlZCB8IHJlamVjdGVkIF0KCQkJCQkJc3RhdGUgPSBzdGF0ZVN0cmluZzsKCgkJCQkJLy8gWyByZWplY3RfbGlzdCB8IHJlc29sdmVfbGlzdCBdLmRpc2FibGU7IHByb2dyZXNzX2xpc3QubG9jawoJCQkJCX0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApOwoJCQkJfQoKCQkJCS8vIGRlZmVycmVkWyByZXNvbHZlIHwgcmVqZWN0IHwgbm90aWZ5IF0KCQkJCWRlZmVycmVkWyB0dXBsZVsgMCBdIF0gPSBmdW5jdGlvbigpIHsKCQkJCQlkZWZlcnJlZFsgdHVwbGVbIDAgXSArICJXaXRoIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHByb21pc2UgOiB0aGlzLCBhcmd1bWVudHMgKTsKCQkJCQlyZXR1cm4gdGhpczsKCQkJCX07CgkJCQlkZWZlcnJlZFsgdHVwbGVbIDAgXSArICJXaXRoIiBdID0gbGlzdC5maXJlV2l0aDsKCQkJfSApOwoKCQkJLy8gTWFrZSB0aGUgZGVmZXJyZWQgYSBwcm9taXNlCgkJCXByb21pc2UucHJvbWlzZSggZGVmZXJyZWQgKTsKCgkJCS8vIENhbGwgZ2l2ZW4gZnVuYyBpZiBhbnkKCQkJaWYgKCBmdW5jICkgewoJCQkJZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTsKCQkJfQoKCQkJLy8gQWxsIGRvbmUhCgkJCXJldHVybiBkZWZlcnJlZDsKCQl9LAoKCQkvLyBEZWZlcnJlZCBoZWxwZXIKCQl3aGVuOiBmdW5jdGlvbiggc3Vib3JkaW5hdGUgLyogLCAuLi4sIHN1Ym9yZGluYXRlTiAqLyApIHsKCQkJdmFyIGkgPSAwLAoJCQkJcmVzb2x2ZVZhbHVlcyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLAoJCQkJbGVuZ3RoID0gcmVzb2x2ZVZhbHVlcy5sZW5ndGgsCgoJCQkJLy8gdGhlIGNvdW50IG9mIHVuY29tcGxldGVkIHN1Ym9yZGluYXRlcwoJCQkJcmVtYWluaW5nID0gbGVuZ3RoICE9PSAxIHx8CgkJCQkJKCBzdWJvcmRpbmF0ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggc3Vib3JkaW5hdGUucHJvbWlzZSApICkgPyBsZW5ndGggOiAwLAoKCQkJCS8vIHRoZSBtYXN0ZXIgRGVmZXJyZWQuCgkJCQkvLyBJZiByZXNvbHZlVmFsdWVzIGNvbnNpc3Qgb2Ygb25seSBhIHNpbmdsZSBEZWZlcnJlZCwganVzdCB1c2UgdGhhdC4KCQkJCWRlZmVycmVkID0gcmVtYWluaW5nID09PSAxID8gc3Vib3JkaW5hdGUgOiBqUXVlcnkuRGVmZXJyZWQoKSwKCgkJCQkvLyBVcGRhdGUgZnVuY3Rpb24gZm9yIGJvdGggcmVzb2x2ZSBhbmQgcHJvZ3Jlc3MgdmFsdWVzCgkJCQl1cGRhdGVGdW5jID0gZnVuY3Rpb24oIGksIGNvbnRleHRzLCB2YWx1ZXMgKSB7CgkJCQkJcmV0dXJuIGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJCQkJY29udGV4dHNbIGkgXSA9IHRoaXM7CgkJCQkJCXZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlOwoJCQkJCQlpZiAoIHZhbHVlcyA9PT0gcHJvZ3Jlc3NWYWx1ZXMgKSB7CgkJCQkJCQlkZWZlcnJlZC5ub3RpZnlXaXRoKCBjb250ZXh0cywgdmFsdWVzICk7CgoJCQkJCQl9IGVsc2UgaWYgKCAhKCAtLXJlbWFpbmluZyApICkgewoJCQkJCQkJZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTsKCQkJCQkJfQoJCQkJCX07CgkJCQl9LAoKCQkJCXByb2dyZXNzVmFsdWVzLCBwcm9ncmVzc0NvbnRleHRzLCByZXNvbHZlQ29udGV4dHM7CgoJCQkvLyBhZGQgbGlzdGVuZXJzIHRvIERlZmVycmVkIHN1Ym9yZGluYXRlczsgdHJlYXQgb3RoZXJzIGFzIHJlc29sdmVkCgkJCWlmICggbGVuZ3RoID4gMSApIHsKCQkJCXByb2dyZXNzVmFsdWVzID0gbmV3IEFycmF5KCBsZW5ndGggKTsKCQkJCXByb2dyZXNzQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApOwoJCQkJcmVzb2x2ZUNvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTsKCQkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoJCQkJCWlmICggcmVzb2x2ZVZhbHVlc1sgaSBdICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSApICkgewoJCQkJCQlyZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSgpCgkJCQkJCQkucHJvZ3Jlc3MoIHVwZGF0ZUZ1bmMoIGksIHByb2dyZXNzQ29udGV4dHMsIHByb2dyZXNzVmFsdWVzICkgKQoJCQkJCQkJLmRvbmUoIHVwZGF0ZUZ1bmMoIGksIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApICkKCQkJCQkJCS5mYWlsKCBkZWZlcnJlZC5yZWplY3QgKTsKCQkJCQl9IGVsc2UgewoJCQkJCQktLXJlbWFpbmluZzsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCS8vIGlmIHdlJ3JlIG5vdCB3YWl0aW5nIG9uIGFueXRoaW5nLCByZXNvbHZlIHRoZSBtYXN0ZXIKCQkJaWYgKCAhcmVtYWluaW5nICkgewoJCQkJZGVmZXJyZWQucmVzb2x2ZVdpdGgoIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApOwoJCQl9CgoJCQlyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpOwoJCX0KCX0gKTsKCgoJLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5Cgl2YXIgcmVhZHlMaXN0OwoKCWpRdWVyeS5mbi5yZWFkeSA9IGZ1bmN0aW9uKCBmbiApIHsKCgkJLy8gQWRkIHRoZSBjYWxsYmFjawoJCWpRdWVyeS5yZWFkeS5wcm9taXNlKCkuZG9uZSggZm4gKTsKCgkJcmV0dXJuIHRoaXM7Cgl9OwoKCWpRdWVyeS5leHRlbmQoIHsKCgkJLy8gSXMgdGhlIERPTSByZWFkeSB0byBiZSB1c2VkPyBTZXQgdG8gdHJ1ZSBvbmNlIGl0IG9jY3Vycy4KCQlpc1JlYWR5OiBmYWxzZSwKCgkJLy8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZQoJCS8vIHRoZSByZWFkeSBldmVudCBmaXJlcy4gU2VlICM2NzgxCgkJcmVhZHlXYWl0OiAxLAoKCQkvLyBIb2xkIChvciByZWxlYXNlKSB0aGUgcmVhZHkgZXZlbnQKCQlob2xkUmVhZHk6IGZ1bmN0aW9uKCBob2xkICkgewoJCQlpZiAoIGhvbGQgKSB7CgkJCQlqUXVlcnkucmVhZHlXYWl0Kys7CgkJCX0gZWxzZSB7CgkJCQlqUXVlcnkucmVhZHkoIHRydWUgKTsKCQkJfQoJCX0sCgoJCS8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHkKCQlyZWFkeTogZnVuY3Rpb24oIHdhaXQgKSB7CgoJCQkvLyBBYm9ydCBpZiB0aGVyZSBhcmUgcGVuZGluZyBob2xkcyBvciB3ZSdyZSBhbHJlYWR5IHJlYWR5CgkJCWlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBSZW1lbWJlciB0aGF0IHRoZSBET00gaXMgcmVhZHkKCQkJalF1ZXJ5LmlzUmVhZHkgPSB0cnVlOwoKCQkJLy8gSWYgYSBub3JtYWwgRE9NIFJlYWR5IGV2ZW50IGZpcmVkLCBkZWNyZW1lbnQsIGFuZCB3YWl0IGlmIG5lZWQgYmUKCQkJaWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIElmIHRoZXJlIGFyZSBmdW5jdGlvbnMgYm91bmQsIHRvIGV4ZWN1dGUKCQkJcmVhZHlMaXN0LnJlc29sdmVXaXRoKCBkb2N1bWVudCwgWyBqUXVlcnkgXSApOwoKCQkJLy8gVHJpZ2dlciBhbnkgYm91bmQgcmVhZHkgZXZlbnRzCgkJCWlmICggalF1ZXJ5LmZuLnRyaWdnZXJIYW5kbGVyICkgewoJCQkJalF1ZXJ5KCBkb2N1bWVudCApLnRyaWdnZXJIYW5kbGVyKCAicmVhZHkiICk7CgkJCQlqUXVlcnkoIGRvY3VtZW50ICkub2ZmKCAicmVhZHkiICk7CgkJCX0KCQl9Cgl9ICk7CgoJLyoqCgkgKiBDbGVhbi11cCBtZXRob2QgZm9yIGRvbSByZWFkeSBldmVudHMKCSAqLwoJZnVuY3Rpb24gZGV0YWNoKCkgewoJCWlmICggZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciApIHsKCQkJZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggIkRPTUNvbnRlbnRMb2FkZWQiLCBjb21wbGV0ZWQgKTsKCQkJd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoICJsb2FkIiwgY29tcGxldGVkICk7CgoJCX0gZWxzZSB7CgkJCWRvY3VtZW50LmRldGFjaEV2ZW50KCAib25yZWFkeXN0YXRlY2hhbmdlIiwgY29tcGxldGVkICk7CgkJCXdpbmRvdy5kZXRhY2hFdmVudCggIm9ubG9hZCIsIGNvbXBsZXRlZCApOwoJCX0KCX0KCgkvKioKCSAqIFRoZSByZWFkeSBldmVudCBoYW5kbGVyIGFuZCBzZWxmIGNsZWFudXAgbWV0aG9kCgkgKi8KCWZ1bmN0aW9uIGNvbXBsZXRlZCgpIHsKCgkJLy8gcmVhZHlTdGF0ZSA9PT0gImNvbXBsZXRlIiBpcyBnb29kIGVub3VnaCBmb3IgdXMgdG8gY2FsbCB0aGUgZG9tIHJlYWR5IGluIG9sZElFCgkJaWYgKCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIHx8CgkJCXdpbmRvdy5ldmVudC50eXBlID09PSAibG9hZCIgfHwKCQkJZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gImNvbXBsZXRlIiApIHsKCgkJCWRldGFjaCgpOwoJCQlqUXVlcnkucmVhZHkoKTsKCQl9Cgl9CgoJalF1ZXJ5LnJlYWR5LnByb21pc2UgPSBmdW5jdGlvbiggb2JqICkgewoJCWlmICggIXJlYWR5TGlzdCApIHsKCgkJCXJlYWR5TGlzdCA9IGpRdWVyeS5EZWZlcnJlZCgpOwoKCQkJLy8gQ2F0Y2ggY2FzZXMgd2hlcmUgJChkb2N1bWVudCkucmVhZHkoKSBpcyBjYWxsZWQKCQkJLy8gYWZ0ZXIgdGhlIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuCgkJCS8vIFN1cHBvcnQ6IElFNi0xMAoJCQkvLyBPbGRlciBJRSBzb21ldGltZXMgc2lnbmFscyAiaW50ZXJhY3RpdmUiIHRvbyBzb29uCgkJCWlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gImNvbXBsZXRlIiB8fAoJCQkJKCBkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAibG9hZGluZyIgJiYgIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCApICkgewoKCQkJCS8vIEhhbmRsZSBpdCBhc3luY2hyb25vdXNseSB0byBhbGxvdyBzY3JpcHRzIHRoZSBvcHBvcnR1bml0eSB0byBkZWxheSByZWFkeQoJCQkJd2luZG93LnNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApOwoKCQkJLy8gU3RhbmRhcmRzLWJhc2VkIGJyb3dzZXJzIHN1cHBvcnQgRE9NQ29udGVudExvYWRlZAoJCQl9IGVsc2UgaWYgKCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICkgewoKCQkJCS8vIFVzZSB0aGUgaGFuZHkgZXZlbnQgY2FsbGJhY2sKCQkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICJET01Db250ZW50TG9hZGVkIiwgY29tcGxldGVkICk7CgoJCQkJLy8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmsKCQkJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAibG9hZCIsIGNvbXBsZXRlZCApOwoKCQkJLy8gSWYgSUUgZXZlbnQgbW9kZWwgaXMgdXNlZAoJCQl9IGVsc2UgewoKCQkJCS8vIEVuc3VyZSBmaXJpbmcgYmVmb3JlIG9ubG9hZCwgbWF5YmUgbGF0ZSBidXQgc2FmZSBhbHNvIGZvciBpZnJhbWVzCgkJCQlkb2N1bWVudC5hdHRhY2hFdmVudCggIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIGNvbXBsZXRlZCApOwoKCQkJCS8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrCgkJCQl3aW5kb3cuYXR0YWNoRXZlbnQoICJvbmxvYWQiLCBjb21wbGV0ZWQgKTsKCgkJCQkvLyBJZiBJRSBhbmQgbm90IGEgZnJhbWUKCQkJCS8vIGNvbnRpbnVhbGx5IGNoZWNrIHRvIHNlZSBpZiB0aGUgZG9jdW1lbnQgaXMgcmVhZHkKCQkJCXZhciB0b3AgPSBmYWxzZTsKCgkJCQl0cnkgewoJCQkJCXRvcCA9IHdpbmRvdy5mcmFtZUVsZW1lbnQgPT0gbnVsbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgkJCQl9IGNhdGNoICggZSApIHt9CgoJCQkJaWYgKCB0b3AgJiYgdG9wLmRvU2Nyb2xsICkgewoJCQkJCSggZnVuY3Rpb24gZG9TY3JvbGxDaGVjaygpIHsKCQkJCQkJaWYgKCAhalF1ZXJ5LmlzUmVhZHkgKSB7CgoJCQkJCQkJdHJ5IHsKCgkJCQkJCQkJLy8gVXNlIHRoZSB0cmljayBieSBEaWVnbyBQZXJpbmkKCQkJCQkJCQkvLyBodHRwOi8vamF2YXNjcmlwdC5ud2JveC5jb20vSUVDb250ZW50TG9hZGVkLwoJCQkJCQkJCXRvcC5kb1Njcm9sbCggImxlZnQiICk7CgkJCQkJCQl9IGNhdGNoICggZSApIHsKCQkJCQkJCQlyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoIGRvU2Nyb2xsQ2hlY2ssIDUwICk7CgkJCQkJCQl9CgoJCQkJCQkJLy8gZGV0YWNoIGFsbCBkb20gcmVhZHkgZXZlbnRzCgkJCQkJCQlkZXRhY2goKTsKCgkJCQkJCQkvLyBhbmQgZXhlY3V0ZSBhbnkgd2FpdGluZyBmdW5jdGlvbnMKCQkJCQkJCWpRdWVyeS5yZWFkeSgpOwoJCQkJCQl9CgkJCQkJfSApKCk7CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuIHJlYWR5TGlzdC5wcm9taXNlKCBvYmogKTsKCX07CgoJLy8gS2ljayBvZmYgdGhlIERPTSByZWFkeSBjaGVjayBldmVuIGlmIHRoZSB1c2VyIGRvZXMgbm90CglqUXVlcnkucmVhZHkucHJvbWlzZSgpOwoKCgoKCS8vIFN1cHBvcnQ6IElFPDkKCS8vIEl0ZXJhdGlvbiBvdmVyIG9iamVjdCdzIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlZm9yZSBpdHMgb3duCgl2YXIgaTsKCWZvciAoIGkgaW4galF1ZXJ5KCBzdXBwb3J0ICkgKSB7CgkJYnJlYWs7Cgl9CglzdXBwb3J0Lm93bkZpcnN0ID0gaSA9PT0gIjAiOwoKCS8vIE5vdGU6IG1vc3Qgc3VwcG9ydCB0ZXN0cyBhcmUgZGVmaW5lZCBpbiB0aGVpciByZXNwZWN0aXZlIG1vZHVsZXMuCgkvLyBmYWxzZSB1bnRpbCB0aGUgdGVzdCBpcyBydW4KCXN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCA9IGZhbHNlOwoKCS8vIEV4ZWN1dGUgQVNBUCBpbiBjYXNlIHdlIG5lZWQgdG8gc2V0IGJvZHkuc3R5bGUuem9vbQoJalF1ZXJ5KCBmdW5jdGlvbigpIHsKCgkJLy8gTWluaWZpZWQ6IHZhciBhLGIsYyxkCgkJdmFyIHZhbCwgZGl2LCBib2R5LCBjb250YWluZXI7CgoJCWJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggImJvZHkiIClbIDAgXTsKCQlpZiAoICFib2R5IHx8ICFib2R5LnN0eWxlICkgewoKCQkJLy8gUmV0dXJuIGZvciBmcmFtZXNldCBkb2NzIHRoYXQgZG9uJ3QgaGF2ZSBhIGJvZHkKCQkJcmV0dXJuOwoJCX0KCgkJLy8gU2V0dXAKCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoJCWNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICk7CgkJY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSAicG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiOwoJCWJvZHkuYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApLmFwcGVuZENoaWxkKCBkaXYgKTsKCgkJaWYgKCB0eXBlb2YgZGl2LnN0eWxlLnpvb20gIT09ICJ1bmRlZmluZWQiICkgewoKCQkJLy8gU3VwcG9ydDogSUU8OAoJCQkvLyBDaGVjayBpZiBuYXRpdmVseSBibG9jay1sZXZlbCBlbGVtZW50cyBhY3QgbGlrZSBpbmxpbmUtYmxvY2sKCQkJLy8gZWxlbWVudHMgd2hlbiBzZXR0aW5nIHRoZWlyIGRpc3BsYXkgdG8gJ2lubGluZScgYW5kIGdpdmluZwoJCQkvLyB0aGVtIGxheW91dAoJCQlkaXYuc3R5bGUuY3NzVGV4dCA9ICJkaXNwbGF5OmlubGluZTttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxIjsKCgkJCXN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCA9IHZhbCA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gMzsKCQkJaWYgKCB2YWwgKSB7CgoJCQkJLy8gUHJldmVudCBJRSA2IGZyb20gYWZmZWN0aW5nIGxheW91dCBmb3IgcG9zaXRpb25lZCBlbGVtZW50cyAjMTEwNDgKCQkJCS8vIFByZXZlbnQgSUUgZnJvbSBzaHJpbmtpbmcgdGhlIGJvZHkgaW4gSUUgNyBtb2RlICMxMjg2OQoJCQkJLy8gU3VwcG9ydDogSUU8OAoJCQkJYm9keS5zdHlsZS56b29tID0gMTsKCQkJfQoJCX0KCgkJYm9keS5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7Cgl9ICk7CgoKCSggZnVuY3Rpb24oKSB7CgkJdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICk7CgoJCS8vIFN1cHBvcnQ6IElFPDkKCQlzdXBwb3J0LmRlbGV0ZUV4cGFuZG8gPSB0cnVlOwoJCXRyeSB7CgkJCWRlbGV0ZSBkaXYudGVzdDsKCQl9IGNhdGNoICggZSApIHsKCQkJc3VwcG9ydC5kZWxldGVFeHBhbmRvID0gZmFsc2U7CgkJfQoKCQkvLyBOdWxsIGVsZW1lbnRzIHRvIGF2b2lkIGxlYWtzIGluIElFLgoJCWRpdiA9IG51bGw7Cgl9ICkoKTsKCXZhciBhY2NlcHREYXRhID0gZnVuY3Rpb24oIGVsZW0gKSB7CgkJdmFyIG5vRGF0YSA9IGpRdWVyeS5ub0RhdGFbICggZWxlbS5ub2RlTmFtZSArICIgIiApLnRvTG93ZXJDYXNlKCkgXSwKCQkJbm9kZVR5cGUgPSArZWxlbS5ub2RlVHlwZSB8fCAxOwoKCQkvLyBEbyBub3Qgc2V0IGRhdGEgb24gbm9uLWVsZW1lbnQgRE9NIG5vZGVzIGJlY2F1c2UgaXQgd2lsbCBub3QgYmUgY2xlYXJlZCAoIzgzMzUpLgoJCXJldHVybiBub2RlVHlwZSAhPT0gMSAmJiBub2RlVHlwZSAhPT0gOSA/CgkJCWZhbHNlIDoKCgkJCS8vIE5vZGVzIGFjY2VwdCBkYXRhIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkOyByZWplY3Rpb24gY2FuIGJlIGNvbmRpdGlvbmFsCgkJCSFub0RhdGEgfHwgbm9EYXRhICE9PSB0cnVlICYmIGVsZW0uZ2V0QXR0cmlidXRlKCAiY2xhc3NpZCIgKSA9PT0gbm9EYXRhOwoJfTsKCgoKCgl2YXIgcmJyYWNlID0gL14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLywKCQlybXVsdGlEYXNoID0gLyhbQS1aXSkvZzsKCglmdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkgewoKCQkvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55CgkJLy8gZGF0YSBmcm9tIHRoZSBIVE1MNSBkYXRhLSogYXR0cmlidXRlCgkJaWYgKCBkYXRhID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCgkJCXZhciBuYW1lID0gImRhdGEtIiArIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCAiLSQxIiApLnRvTG93ZXJDYXNlKCk7CgoJCQlkYXRhID0gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKTsKCgkJCWlmICggdHlwZW9mIGRhdGEgPT09ICJzdHJpbmciICkgewoJCQkJdHJ5IHsKCQkJCQlkYXRhID0gZGF0YSA9PT0gInRydWUiID8gdHJ1ZSA6CgkJCQkJCWRhdGEgPT09ICJmYWxzZSIgPyBmYWxzZSA6CgkJCQkJCWRhdGEgPT09ICJudWxsIiA/IG51bGwgOgoKCQkJCQkJLy8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmcKCQkJCQkJK2RhdGEgKyAiIiA9PT0gZGF0YSA/ICtkYXRhIDoKCQkJCQkJcmJyYWNlLnRlc3QoIGRhdGEgKSA/IGpRdWVyeS5wYXJzZUpTT04oIGRhdGEgKSA6CgkJCQkJCWRhdGE7CgkJCQl9IGNhdGNoICggZSApIHt9CgoJCQkJLy8gTWFrZSBzdXJlIHdlIHNldCB0aGUgZGF0YSBzbyBpdCBpc24ndCBjaGFuZ2VkIGxhdGVyCgkJCQlqUXVlcnkuZGF0YSggZWxlbSwga2V5LCBkYXRhICk7CgoJCQl9IGVsc2UgewoJCQkJZGF0YSA9IHVuZGVmaW5lZDsKCQkJfQoJCX0KCgkJcmV0dXJuIGRhdGE7Cgl9CgoJLy8gY2hlY2tzIGEgY2FjaGUgb2JqZWN0IGZvciBlbXB0aW5lc3MKCWZ1bmN0aW9uIGlzRW1wdHlEYXRhT2JqZWN0KCBvYmogKSB7CgkJdmFyIG5hbWU7CgkJZm9yICggbmFtZSBpbiBvYmogKSB7CgoJCQkvLyBpZiB0aGUgcHVibGljIGRhdGEgb2JqZWN0IGlzIGVtcHR5LCB0aGUgcHJpdmF0ZSBpcyBzdGlsbCBlbXB0eQoJCQlpZiAoIG5hbWUgPT09ICJkYXRhIiAmJiBqUXVlcnkuaXNFbXB0eU9iamVjdCggb2JqWyBuYW1lIF0gKSApIHsKCQkJCWNvbnRpbnVlOwoJCQl9CgkJCWlmICggbmFtZSAhPT0gInRvSlNPTiIgKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9CgoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIGludGVybmFsRGF0YSggZWxlbSwgbmFtZSwgZGF0YSwgcHZ0IC8qIEludGVybmFsIFVzZSBPbmx5ICovICkgewoJCWlmICggIWFjY2VwdERhdGEoIGVsZW0gKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdmFyIHJldCwgdGhpc0NhY2hlLAoJCQlpbnRlcm5hbEtleSA9IGpRdWVyeS5leHBhbmRvLAoKCQkJLy8gV2UgaGF2ZSB0byBoYW5kbGUgRE9NIG5vZGVzIGFuZCBKUyBvYmplY3RzIGRpZmZlcmVudGx5IGJlY2F1c2UgSUU2LTcKCQkJLy8gY2FuJ3QgR0Mgb2JqZWN0IHJlZmVyZW5jZXMgcHJvcGVybHkgYWNyb3NzIHRoZSBET00tSlMgYm91bmRhcnkKCQkJaXNOb2RlID0gZWxlbS5ub2RlVHlwZSwKCgkJCS8vIE9ubHkgRE9NIG5vZGVzIG5lZWQgdGhlIGdsb2JhbCBqUXVlcnkgY2FjaGU7IEpTIG9iamVjdCBkYXRhIGlzCgkJCS8vIGF0dGFjaGVkIGRpcmVjdGx5IHRvIHRoZSBvYmplY3Qgc28gR0MgY2FuIG9jY3VyIGF1dG9tYXRpY2FsbHkKCQkJY2FjaGUgPSBpc05vZGUgPyBqUXVlcnkuY2FjaGUgOiBlbGVtLAoKCQkJLy8gT25seSBkZWZpbmluZyBhbiBJRCBmb3IgSlMgb2JqZWN0cyBpZiBpdHMgY2FjaGUgYWxyZWFkeSBleGlzdHMgYWxsb3dzCgkJCS8vIHRoZSBjb2RlIHRvIHNob3J0Y3V0IG9uIHRoZSBzYW1lIHBhdGggYXMgYSBET00gbm9kZSB3aXRoIG5vIGNhY2hlCgkJCWlkID0gaXNOb2RlID8gZWxlbVsgaW50ZXJuYWxLZXkgXSA6IGVsZW1bIGludGVybmFsS2V5IF0gJiYgaW50ZXJuYWxLZXk7CgoJCS8vIEF2b2lkIGRvaW5nIGFueSBtb3JlIHdvcmsgdGhhbiB3ZSBuZWVkIHRvIHdoZW4gdHJ5aW5nIHRvIGdldCBkYXRhIG9uIGFuCgkJLy8gb2JqZWN0IHRoYXQgaGFzIG5vIGRhdGEgYXQgYWxsCgkJaWYgKCAoICFpZCB8fCAhY2FjaGVbIGlkIF0gfHwgKCAhcHZ0ICYmICFjYWNoZVsgaWQgXS5kYXRhICkgKSAmJgoJCQlkYXRhID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG5hbWUgPT09ICJzdHJpbmciICkgewoJCQlyZXR1cm47CgkJfQoKCQlpZiAoICFpZCApIHsKCgkJCS8vIE9ubHkgRE9NIG5vZGVzIG5lZWQgYSBuZXcgdW5pcXVlIElEIGZvciBlYWNoIGVsZW1lbnQgc2luY2UgdGhlaXIgZGF0YQoJCQkvLyBlbmRzIHVwIGluIHRoZSBnbG9iYWwgY2FjaGUKCQkJaWYgKCBpc05vZGUgKSB7CgkJCQlpZCA9IGVsZW1bIGludGVybmFsS2V5IF0gPSBkZWxldGVkSWRzLnBvcCgpIHx8IGpRdWVyeS5ndWlkKys7CgkJCX0gZWxzZSB7CgkJCQlpZCA9IGludGVybmFsS2V5OwoJCQl9CgkJfQoKCQlpZiAoICFjYWNoZVsgaWQgXSApIHsKCgkJCS8vIEF2b2lkIGV4cG9zaW5nIGpRdWVyeSBtZXRhZGF0YSBvbiBwbGFpbiBKUyBvYmplY3RzIHdoZW4gdGhlIG9iamVjdAoJCQkvLyBpcyBzZXJpYWxpemVkIHVzaW5nIEpTT04uc3RyaW5naWZ5CgkJCWNhY2hlWyBpZCBdID0gaXNOb2RlID8ge30gOiB7IHRvSlNPTjogalF1ZXJ5Lm5vb3AgfTsKCQl9CgoJCS8vIEFuIG9iamVjdCBjYW4gYmUgcGFzc2VkIHRvIGpRdWVyeS5kYXRhIGluc3RlYWQgb2YgYSBrZXkvdmFsdWUgcGFpcjsgdGhpcyBnZXRzCgkJLy8gc2hhbGxvdyBjb3BpZWQgb3ZlciBvbnRvIHRoZSBleGlzdGluZyBjYWNoZQoJCWlmICggdHlwZW9mIG5hbWUgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBuYW1lID09PSAiZnVuY3Rpb24iICkgewoJCQlpZiAoIHB2dCApIHsKCQkJCWNhY2hlWyBpZCBdID0galF1ZXJ5LmV4dGVuZCggY2FjaGVbIGlkIF0sIG5hbWUgKTsKCQkJfSBlbHNlIHsKCQkJCWNhY2hlWyBpZCBdLmRhdGEgPSBqUXVlcnkuZXh0ZW5kKCBjYWNoZVsgaWQgXS5kYXRhLCBuYW1lICk7CgkJCX0KCQl9CgoJCXRoaXNDYWNoZSA9IGNhY2hlWyBpZCBdOwoKCQkvLyBqUXVlcnkgZGF0YSgpIGlzIHN0b3JlZCBpbiBhIHNlcGFyYXRlIG9iamVjdCBpbnNpZGUgdGhlIG9iamVjdCdzIGludGVybmFsIGRhdGEKCQkvLyBjYWNoZSBpbiBvcmRlciB0byBhdm9pZCBrZXkgY29sbGlzaW9ucyBiZXR3ZWVuIGludGVybmFsIGRhdGEgYW5kIHVzZXItZGVmaW5lZAoJCS8vIGRhdGEuCgkJaWYgKCAhcHZ0ICkgewoJCQlpZiAoICF0aGlzQ2FjaGUuZGF0YSApIHsKCQkJCXRoaXNDYWNoZS5kYXRhID0ge307CgkJCX0KCgkJCXRoaXNDYWNoZSA9IHRoaXNDYWNoZS5kYXRhOwoJCX0KCgkJaWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7CgkJCXRoaXNDYWNoZVsgalF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApIF0gPSBkYXRhOwoJCX0KCgkJLy8gQ2hlY2sgZm9yIGJvdGggY29udmVydGVkLXRvLWNhbWVsIGFuZCBub24tY29udmVydGVkIGRhdGEgcHJvcGVydHkgbmFtZXMKCQkvLyBJZiBhIGRhdGEgcHJvcGVydHkgd2FzIHNwZWNpZmllZAoJCWlmICggdHlwZW9mIG5hbWUgPT09ICJzdHJpbmciICkgewoKCQkJLy8gRmlyc3QgVHJ5IHRvIGZpbmQgYXMtaXMgcHJvcGVydHkgZGF0YQoJCQlyZXQgPSB0aGlzQ2FjaGVbIG5hbWUgXTsKCgkJCS8vIFRlc3QgZm9yIG51bGx8dW5kZWZpbmVkIHByb3BlcnR5IGRhdGEKCQkJaWYgKCByZXQgPT0gbnVsbCApIHsKCgkJCQkvLyBUcnkgdG8gZmluZCB0aGUgY2FtZWxDYXNlZCBwcm9wZXJ0eQoJCQkJcmV0ID0gdGhpc0NhY2hlWyBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICkgXTsKCQkJfQoJCX0gZWxzZSB7CgkJCXJldCA9IHRoaXNDYWNoZTsKCQl9CgoJCXJldHVybiByZXQ7Cgl9CgoJZnVuY3Rpb24gaW50ZXJuYWxSZW1vdmVEYXRhKCBlbGVtLCBuYW1lLCBwdnQgKSB7CgkJaWYgKCAhYWNjZXB0RGF0YSggZWxlbSApICkgewoJCQlyZXR1cm47CgkJfQoKCQl2YXIgdGhpc0NhY2hlLCBpLAoJCQlpc05vZGUgPSBlbGVtLm5vZGVUeXBlLAoKCQkJLy8gU2VlIGpRdWVyeS5kYXRhIGZvciBtb3JlIGluZm9ybWF0aW9uCgkJCWNhY2hlID0gaXNOb2RlID8galF1ZXJ5LmNhY2hlIDogZWxlbSwKCQkJaWQgPSBpc05vZGUgPyBlbGVtWyBqUXVlcnkuZXhwYW5kbyBdIDogalF1ZXJ5LmV4cGFuZG87CgoJCS8vIElmIHRoZXJlIGlzIGFscmVhZHkgbm8gY2FjaGUgZW50cnkgZm9yIHRoaXMgb2JqZWN0LCB0aGVyZSBpcyBubwoJCS8vIHB1cnBvc2UgaW4gY29udGludWluZwoJCWlmICggIWNhY2hlWyBpZCBdICkgewoJCQlyZXR1cm47CgkJfQoKCQlpZiAoIG5hbWUgKSB7CgoJCQl0aGlzQ2FjaGUgPSBwdnQgPyBjYWNoZVsgaWQgXSA6IGNhY2hlWyBpZCBdLmRhdGE7CgoJCQlpZiAoIHRoaXNDYWNoZSApIHsKCgkJCQkvLyBTdXBwb3J0IGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgbmFtZXMgZm9yIGRhdGEga2V5cwoJCQkJaWYgKCAhalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHsKCgkJCQkJLy8gdHJ5IHRoZSBzdHJpbmcgYXMgYSBrZXkgYmVmb3JlIGFueSBtYW5pcHVsYXRpb24KCQkJCQlpZiAoIG5hbWUgaW4gdGhpc0NhY2hlICkgewoJCQkJCQluYW1lID0gWyBuYW1lIF07CgkJCQkJfSBlbHNlIHsKCgkJCQkJCS8vIHNwbGl0IHRoZSBjYW1lbCBjYXNlZCB2ZXJzaW9uIGJ5IHNwYWNlcyB1bmxlc3MgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cwoJCQkJCQluYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApOwoJCQkJCQlpZiAoIG5hbWUgaW4gdGhpc0NhY2hlICkgewoJCQkJCQkJbmFtZSA9IFsgbmFtZSBdOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJbmFtZSA9IG5hbWUuc3BsaXQoICIgIiApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSBlbHNlIHsKCgkJCQkJLy8gSWYgIm5hbWUiIGlzIGFuIGFycmF5IG9mIGtleXMuLi4KCQkJCQkvLyBXaGVuIGRhdGEgaXMgaW5pdGlhbGx5IGNyZWF0ZWQsIHZpYSAoImtleSIsICJ2YWwiKSBzaWduYXR1cmUsCgkJCQkJLy8ga2V5cyB3aWxsIGJlIGNvbnZlcnRlZCB0byBjYW1lbENhc2UuCgkJCQkJLy8gU2luY2UgdGhlcmUgaXMgbm8gd2F5IHRvIHRlbGwgX2hvd18gYSBrZXkgd2FzIGFkZGVkLCByZW1vdmUKCQkJCQkvLyBib3RoIHBsYWluIGtleSBhbmQgY2FtZWxDYXNlIGtleS4gIzEyNzg2CgkJCQkJLy8gVGhpcyB3aWxsIG9ubHkgcGVuYWxpemUgdGhlIGFycmF5IGFyZ3VtZW50IHBhdGguCgkJCQkJbmFtZSA9IG5hbWUuY29uY2F0KCBqUXVlcnkubWFwKCBuYW1lLCBqUXVlcnkuY2FtZWxDYXNlICkgKTsKCQkJCX0KCgkJCQlpID0gbmFtZS5sZW5ndGg7CgkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQlkZWxldGUgdGhpc0NhY2hlWyBuYW1lWyBpIF0gXTsKCQkJCX0KCgkJCQkvLyBJZiB0aGVyZSBpcyBubyBkYXRhIGxlZnQgaW4gdGhlIGNhY2hlLCB3ZSB3YW50IHRvIGNvbnRpbnVlCgkJCQkvLyBhbmQgbGV0IHRoZSBjYWNoZSBvYmplY3QgaXRzZWxmIGdldCBkZXN0cm95ZWQKCQkJCWlmICggcHZ0ID8gIWlzRW1wdHlEYXRhT2JqZWN0KCB0aGlzQ2FjaGUgKSA6ICFqUXVlcnkuaXNFbXB0eU9iamVjdCggdGhpc0NhY2hlICkgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoJCQl9CgkJfQoKCQkvLyBTZWUgalF1ZXJ5LmRhdGEgZm9yIG1vcmUgaW5mb3JtYXRpb24KCQlpZiAoICFwdnQgKSB7CgkJCWRlbGV0ZSBjYWNoZVsgaWQgXS5kYXRhOwoKCQkJLy8gRG9uJ3QgZGVzdHJveSB0aGUgcGFyZW50IGNhY2hlIHVubGVzcyB0aGUgaW50ZXJuYWwgZGF0YSBvYmplY3QKCQkJLy8gaGFkIGJlZW4gdGhlIG9ubHkgdGhpbmcgbGVmdCBpbiBpdAoJCQlpZiAoICFpc0VtcHR5RGF0YU9iamVjdCggY2FjaGVbIGlkIF0gKSApIHsKCQkJCXJldHVybjsKCQkJfQoJCX0KCgkJLy8gRGVzdHJveSB0aGUgY2FjaGUKCQlpZiAoIGlzTm9kZSApIHsKCQkJalF1ZXJ5LmNsZWFuRGF0YSggWyBlbGVtIF0sIHRydWUgKTsKCgkJLy8gVXNlIGRlbGV0ZSB3aGVuIHN1cHBvcnRlZCBmb3IgZXhwYW5kb3Mgb3IgYGNhY2hlYCBpcyBub3QgYSB3aW5kb3cgcGVyIGlzV2luZG93ICgjMTAwODApCgkJLyoganNoaW50IGVxZXFlcTogZmFsc2UgKi8KCQl9IGVsc2UgaWYgKCBzdXBwb3J0LmRlbGV0ZUV4cGFuZG8gfHwgY2FjaGUgIT0gY2FjaGUud2luZG93ICkgewoJCQkvKiBqc2hpbnQgZXFlcWVxOiB0cnVlICovCgkJCWRlbGV0ZSBjYWNoZVsgaWQgXTsKCgkJLy8gV2hlbiBhbGwgZWxzZSBmYWlscywgdW5kZWZpbmVkCgkJfSBlbHNlIHsKCQkJY2FjaGVbIGlkIF0gPSB1bmRlZmluZWQ7CgkJfQoJfQoKCWpRdWVyeS5leHRlbmQoIHsKCQljYWNoZToge30sCgoJCS8vIFRoZSBmb2xsb3dpbmcgZWxlbWVudHMgKHNwYWNlLXN1ZmZpeGVkIHRvIGF2b2lkIE9iamVjdC5wcm90b3R5cGUgY29sbGlzaW9ucykKCQkvLyB0aHJvdyB1bmNhdGNoYWJsZSBleGNlcHRpb25zIGlmIHlvdSBhdHRlbXB0IHRvIHNldCBleHBhbmRvIHByb3BlcnRpZXMKCQlub0RhdGE6IHsKCQkJImFwcGxldCAiOiB0cnVlLAoJCQkiZW1iZWQgIjogdHJ1ZSwKCgkJCS8vIC4uLmJ1dCBGbGFzaCBvYmplY3RzICh3aGljaCBoYXZlIHRoaXMgY2xhc3NpZCkgKmNhbiogaGFuZGxlIGV4cGFuZG9zCgkJCSJvYmplY3QgIjogImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMCIKCQl9LAoKCQloYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJZWxlbSA9IGVsZW0ubm9kZVR5cGUgPyBqUXVlcnkuY2FjaGVbIGVsZW1bIGpRdWVyeS5leHBhbmRvIF0gXSA6IGVsZW1bIGpRdWVyeS5leHBhbmRvIF07CgkJCXJldHVybiAhIWVsZW0gJiYgIWlzRW1wdHlEYXRhT2JqZWN0KCBlbGVtICk7CgkJfSwKCgkJZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7CgkJCXJldHVybiBpbnRlcm5hbERhdGEoIGVsZW0sIG5hbWUsIGRhdGEgKTsKCQl9LAoKCQlyZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHsKCQkJcmV0dXJuIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSApOwoJCX0sCgoJCS8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS4KCQlfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7CgkJCXJldHVybiBpbnRlcm5hbERhdGEoIGVsZW0sIG5hbWUsIGRhdGEsIHRydWUgKTsKCQl9LAoKCQlfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7CgkJCXJldHVybiBpbnRlcm5hbFJlbW92ZURhdGEoIGVsZW0sIG5hbWUsIHRydWUgKTsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCWRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCQl2YXIgaSwgbmFtZSwgZGF0YSwKCQkJCWVsZW0gPSB0aGlzWyAwIF0sCgkJCQlhdHRycyA9IGVsZW0gJiYgZWxlbS5hdHRyaWJ1dGVzOwoKCQkJLy8gU3BlY2lhbCBleHBlY3Rpb25zIG9mIC5kYXRhIGJhc2ljYWxseSB0aHdhcnQgalF1ZXJ5LmFjY2VzcywKCQkJLy8gc28gaW1wbGVtZW50IHRoZSByZWxldmFudCBiZWhhdmlvciBvdXJzZWx2ZXMKCgkJCS8vIEdldHMgYWxsIHZhbHVlcwoJCQlpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkgewoJCQkJaWYgKCB0aGlzLmxlbmd0aCApIHsKCQkJCQlkYXRhID0galF1ZXJ5LmRhdGEoIGVsZW0gKTsKCgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFqUXVlcnkuX2RhdGEoIGVsZW0sICJwYXJzZWRBdHRycyIgKSApIHsKCQkJCQkJaSA9IGF0dHJzLmxlbmd0aDsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUUxMSsKCQkJCQkJCS8vIFRoZSBhdHRycyBlbGVtZW50cyBjYW4gYmUgbnVsbCAoIzE0ODk0KQoJCQkJCQkJaWYgKCBhdHRyc1sgaSBdICkgewoJCQkJCQkJCW5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7CgkJCQkJCQkJaWYgKCBuYW1lLmluZGV4T2YoICJkYXRhLSIgKSA9PT0gMCApIHsKCQkJCQkJCQkJbmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUuc2xpY2UoIDUgKSApOwoJCQkJCQkJCQlkYXRhQXR0ciggZWxlbSwgbmFtZSwgZGF0YVsgbmFtZSBdICk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWpRdWVyeS5fZGF0YSggZWxlbSwgInBhcnNlZEF0dHJzIiwgdHJ1ZSApOwoJCQkJCX0KCQkJCX0KCgkJCQlyZXR1cm4gZGF0YTsKCQkJfQoKCQkJLy8gU2V0cyBtdWx0aXBsZSB2YWx1ZXMKCQkJaWYgKCB0eXBlb2Yga2V5ID09PSAib2JqZWN0IiApIHsKCQkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJCWpRdWVyeS5kYXRhKCB0aGlzLCBrZXkgKTsKCQkJCX0gKTsKCQkJfQoKCQkJcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAxID8KCgkJCQkvLyBTZXRzIG9uZSB2YWx1ZQoJCQkJdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCQlqUXVlcnkuZGF0YSggdGhpcywga2V5LCB2YWx1ZSApOwoJCQkJfSApIDoKCgkJCQkvLyBHZXRzIG9uZSB2YWx1ZQoJCQkJLy8gVHJ5IHRvIGZldGNoIGFueSBpbnRlcm5hbGx5IHN0b3JlZCBkYXRhIGZpcnN0CgkJCQllbGVtID8gZGF0YUF0dHIoIGVsZW0sIGtleSwgalF1ZXJ5LmRhdGEoIGVsZW0sIGtleSApICkgOiB1bmRlZmluZWQ7CgkJfSwKCgkJcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGtleSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkucmVtb3ZlRGF0YSggdGhpcywga2V5ICk7CgkJCX0gKTsKCQl9Cgl9ICk7CgoKCWpRdWVyeS5leHRlbmQoIHsKCQlxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGRhdGEgKSB7CgkJCXZhciBxdWV1ZTsKCgkJCWlmICggZWxlbSApIHsKCQkJCXR5cGUgPSAoIHR5cGUgfHwgImZ4IiApICsgInF1ZXVlIjsKCQkJCXF1ZXVlID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCB0eXBlICk7CgoJCQkJLy8gU3BlZWQgdXAgZGVxdWV1ZSBieSBnZXR0aW5nIG91dCBxdWlja2x5IGlmIHRoaXMgaXMganVzdCBhIGxvb2t1cAoJCQkJaWYgKCBkYXRhICkgewoJCQkJCWlmICggIXF1ZXVlIHx8IGpRdWVyeS5pc0FycmF5KCBkYXRhICkgKSB7CgkJCQkJCXF1ZXVlID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCB0eXBlLCBqUXVlcnkubWFrZUFycmF5KCBkYXRhICkgKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlxdWV1ZS5wdXNoKCBkYXRhICk7CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIHF1ZXVlIHx8IFtdOwoJCQl9CgkJfSwKCgkJZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7CgkJCXR5cGUgPSB0eXBlIHx8ICJmeCI7CgoJCQl2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIGVsZW0sIHR5cGUgKSwKCQkJCXN0YXJ0TGVuZ3RoID0gcXVldWUubGVuZ3RoLAoJCQkJZm4gPSBxdWV1ZS5zaGlmdCgpLAoJCQkJaG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIHR5cGUgKSwKCQkJCW5leHQgPSBmdW5jdGlvbigpIHsKCQkJCQlqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApOwoJCQkJfTsKCgkJCS8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWwKCQkJaWYgKCBmbiA9PT0gImlucHJvZ3Jlc3MiICkgewoJCQkJZm4gPSBxdWV1ZS5zaGlmdCgpOwoJCQkJc3RhcnRMZW5ndGgtLTsKCQkJfQoKCQkJaWYgKCBmbiApIHsKCgkJCQkvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nCgkJCQkvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkCgkJCQlpZiAoIHR5cGUgPT09ICJmeCIgKSB7CgkJCQkJcXVldWUudW5zaGlmdCggImlucHJvZ3Jlc3MiICk7CgkJCQl9CgoJCQkJLy8gY2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvbgoJCQkJZGVsZXRlIGhvb2tzLnN0b3A7CgkJCQlmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApOwoJCQl9CgoJCQlpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHsKCQkJCWhvb2tzLmVtcHR5LmZpcmUoKTsKCQkJfQoJCX0sCgoJCS8vIG5vdCBpbnRlbmRlZCBmb3IgcHVibGljIGNvbnN1bXB0aW9uIC0gZ2VuZXJhdGVzIGEgcXVldWVIb29rcyBvYmplY3QsCgkJLy8gb3IgcmV0dXJucyB0aGUgY3VycmVudCBvbmUKCQlfcXVldWVIb29rczogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7CgkJCXZhciBrZXkgPSB0eXBlICsgInF1ZXVlSG9va3MiOwoJCQlyZXR1cm4galF1ZXJ5Ll9kYXRhKCBlbGVtLCBrZXkgKSB8fCBqUXVlcnkuX2RhdGEoIGVsZW0sIGtleSwgewoJCQkJZW1wdHk6IGpRdWVyeS5DYWxsYmFja3MoICJvbmNlIG1lbW9yeSIgKS5hZGQoIGZ1bmN0aW9uKCkgewoJCQkJCWpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwgdHlwZSArICJxdWV1ZSIgKTsKCQkJCQlqUXVlcnkuX3JlbW92ZURhdGEoIGVsZW0sIGtleSApOwoJCQkJfSApCgkJCX0gKTsKCQl9Cgl9ICk7CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCXF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHsKCQkJdmFyIHNldHRlciA9IDI7CgoJCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJCWRhdGEgPSB0eXBlOwoJCQkJdHlwZSA9ICJmeCI7CgkJCQlzZXR0ZXItLTsKCQkJfQoKCQkJaWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkgewoJCQkJcmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1sgMCBdLCB0eXBlICk7CgkJCX0KCgkJCXJldHVybiBkYXRhID09PSB1bmRlZmluZWQgPwoJCQkJdGhpcyA6CgkJCQl0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApOwoKCQkJCQkvLyBlbnN1cmUgYSBob29rcyBmb3IgdGhpcyBxdWV1ZQoJCQkJCWpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApOwoKCQkJCQlpZiAoIHR5cGUgPT09ICJmeCIgJiYgcXVldWVbIDAgXSAhPT0gImlucHJvZ3Jlc3MiICkgewoJCQkJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApOwoJCQkJCX0KCQkJCX0gKTsKCQl9LAoJCWRlcXVldWU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCWpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7CgkJCX0gKTsKCQl9LAoJCWNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCQlyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCAiZngiLCBbXSApOwoJCX0sCgoJCS8vIEdldCBhIHByb21pc2UgcmVzb2x2ZWQgd2hlbiBxdWV1ZXMgb2YgYSBjZXJ0YWluIHR5cGUKCQkvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdCkKCQlwcm9taXNlOiBmdW5jdGlvbiggdHlwZSwgb2JqICkgewoJCQl2YXIgdG1wLAoJCQkJY291bnQgPSAxLAoJCQkJZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSwKCQkJCWVsZW1lbnRzID0gdGhpcywKCQkJCWkgPSB0aGlzLmxlbmd0aCwKCQkJCXJlc29sdmUgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAoICEoIC0tY291bnQgKSApIHsKCQkJCQkJZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTsKCQkJCQl9CgkJCQl9OwoKCQkJaWYgKCB0eXBlb2YgdHlwZSAhPT0gInN0cmluZyIgKSB7CgkJCQlvYmogPSB0eXBlOwoJCQkJdHlwZSA9IHVuZGVmaW5lZDsKCQkJfQoJCQl0eXBlID0gdHlwZSB8fCAiZngiOwoKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQl0bXAgPSBqUXVlcnkuX2RhdGEoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyAicXVldWVIb29rcyIgKTsKCQkJCWlmICggdG1wICYmIHRtcC5lbXB0eSApIHsKCQkJCQljb3VudCsrOwoJCQkJCXRtcC5lbXB0eS5hZGQoIHJlc29sdmUgKTsKCQkJCX0KCQkJfQoJCQlyZXNvbHZlKCk7CgkJCXJldHVybiBkZWZlci5wcm9taXNlKCBvYmogKTsKCQl9Cgl9ICk7CgoKCSggZnVuY3Rpb24oKSB7CgkJdmFyIHNocmlua1dyYXBCbG9ja3NWYWw7CgoJCXN1cHBvcnQuc2hyaW5rV3JhcEJsb2NrcyA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoIHNocmlua1dyYXBCbG9ja3NWYWwgIT0gbnVsbCApIHsKCQkJCXJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsOwoJCQl9CgoJCQkvLyBXaWxsIGJlIGNoYW5nZWQgbGF0ZXIgaWYgbmVlZGVkLgoJCQlzaHJpbmtXcmFwQmxvY2tzVmFsID0gZmFsc2U7CgoJCQkvLyBNaW5pZmllZDogdmFyIGIsYyxkCgkJCXZhciBkaXYsIGJvZHksIGNvbnRhaW5lcjsKCgkJCWJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggImJvZHkiIClbIDAgXTsKCQkJaWYgKCAhYm9keSB8fCAhYm9keS5zdHlsZSApIHsKCgkJCQkvLyBUZXN0IGZpcmVkIHRvbyBlYXJseSBvciBpbiBhbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudCwgZXhpdC4KCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gU2V0dXAKCQkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQkJY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQkJY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSAicG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiOwoJCQlib2R5LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7CgoJCQkvLyBTdXBwb3J0OiBJRTYKCQkJLy8gQ2hlY2sgaWYgZWxlbWVudHMgd2l0aCBsYXlvdXQgc2hyaW5rLXdyYXAgdGhlaXIgY2hpbGRyZW4KCQkJaWYgKCB0eXBlb2YgZGl2LnN0eWxlLnpvb20gIT09ICJ1bmRlZmluZWQiICkgewoKCQkJCS8vIFJlc2V0IENTUzogYm94LXNpemluZzsgZGlzcGxheTsgbWFyZ2luOyBib3JkZXIKCQkJCWRpdi5zdHlsZS5jc3NUZXh0ID0KCgkJCQkJLy8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjMKCQkJCQkvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmcKCQkJCQkiLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDsiICsKCQkJCQkiYm94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowOyIgKwoJCQkJCSJwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxIjsKCQkJCWRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApLnN0eWxlLndpZHRoID0gIjVweCI7CgkJCQlzaHJpbmtXcmFwQmxvY2tzVmFsID0gZGl2Lm9mZnNldFdpZHRoICE9PSAzOwoJCQl9CgoJCQlib2R5LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTsKCgkJCXJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsOwoJCX07CgoJfSApKCk7Cgl2YXIgcG51bSA9ICggL1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLyApLnNvdXJjZTsKCgl2YXIgcmNzc051bSA9IG5ldyBSZWdFeHAoICJeKD86KFsrLV0pPXwpKCIgKyBwbnVtICsgIikoW2EteiVdKikkIiwgImkiICk7CgoKCXZhciBjc3NFeHBhbmQgPSBbICJUb3AiLCAiUmlnaHQiLCAiQm90dG9tIiwgIkxlZnQiIF07CgoJdmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkgewoKCQkJLy8gaXNIaWRkZW4gbWlnaHQgYmUgY2FsbGVkIGZyb20galF1ZXJ5I2ZpbHRlciBmdW5jdGlvbjsKCQkJLy8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50CgkJCWVsZW0gPSBlbCB8fCBlbGVtOwoJCQlyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgImRpc3BsYXkiICkgPT09ICJub25lIiB8fAoJCQkJIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7CgkJfTsKCgoKCWZ1bmN0aW9uIGFkanVzdENTUyggZWxlbSwgcHJvcCwgdmFsdWVQYXJ0cywgdHdlZW4gKSB7CgkJdmFyIGFkanVzdGVkLAoJCQlzY2FsZSA9IDEsCgkJCW1heEl0ZXJhdGlvbnMgPSAyMCwKCQkJY3VycmVudFZhbHVlID0gdHdlZW4gPwoJCQkJZnVuY3Rpb24oKSB7IHJldHVybiB0d2Vlbi5jdXIoKTsgfSA6CgkJCQlmdW5jdGlvbigpIHsgcmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AsICIiICk7IH0sCgkJCWluaXRpYWwgPSBjdXJyZW50VmFsdWUoKSwKCQkJdW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gIiIgOiAicHgiICksCgoJCQkvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlcwoJCQlpbml0aWFsSW5Vbml0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gInB4IiAmJiAraW5pdGlhbCApICYmCgkJCQlyY3NzTnVtLmV4ZWMoIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AgKSApOwoKCQlpZiAoIGluaXRpYWxJblVuaXQgJiYgaW5pdGlhbEluVW5pdFsgMyBdICE9PSB1bml0ICkgewoKCQkJLy8gVHJ1c3QgdW5pdHMgcmVwb3J0ZWQgYnkgalF1ZXJ5LmNzcwoJCQl1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07CgoJCQkvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uCgkJCXZhbHVlUGFydHMgPSB2YWx1ZVBhcnRzIHx8IFtdOwoKCQkJLy8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnQKCQkJaW5pdGlhbEluVW5pdCA9ICtpbml0aWFsIHx8IDE7CgoJCQlkbyB7CgoJCQkJLy8gSWYgcHJldmlvdXMgaXRlcmF0aW9uIHplcm9lZCBvdXQsIGRvdWJsZSB1bnRpbCB3ZSBnZXQgKnNvbWV0aGluZyouCgkJCQkvLyBVc2Ugc3RyaW5nIGZvciBkb3VibGluZyBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvdwoJCQkJc2NhbGUgPSBzY2FsZSB8fCAiLjUiOwoKCQkJCS8vIEFkanVzdCBhbmQgYXBwbHkKCQkJCWluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0IC8gc2NhbGU7CgkJCQlqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIGluaXRpYWxJblVuaXQgKyB1bml0ICk7CgoJCQkvLyBVcGRhdGUgc2NhbGUsIHRvbGVyYXRpbmcgemVybyBvciBOYU4gZnJvbSB0d2Vlbi5jdXIoKQoJCQkvLyBCcmVhayB0aGUgbG9vcCBpZiBzY2FsZSBpcyB1bmNoYW5nZWQgb3IgcGVyZmVjdCwgb3IgaWYgd2UndmUganVzdCBoYWQgZW5vdWdoLgoJCQl9IHdoaWxlICgKCQkJCXNjYWxlICE9PSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsICkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zCgkJCSk7CgkJfQoKCQlpZiAoIHZhbHVlUGFydHMgKSB7CgkJCWluaXRpYWxJblVuaXQgPSAraW5pdGlhbEluVW5pdCB8fCAraW5pdGlhbCB8fCAwOwoKCQkJLy8gQXBwbHkgcmVsYXRpdmUgb2Zmc2V0ICgrPS8tPSkgaWYgc3BlY2lmaWVkCgkJCWFkanVzdGVkID0gdmFsdWVQYXJ0c1sgMSBdID8KCQkJCWluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6CgkJCQkrdmFsdWVQYXJ0c1sgMiBdOwoJCQlpZiAoIHR3ZWVuICkgewoJCQkJdHdlZW4udW5pdCA9IHVuaXQ7CgkJCQl0d2Vlbi5zdGFydCA9IGluaXRpYWxJblVuaXQ7CgkJCQl0d2Vlbi5lbmQgPSBhZGp1c3RlZDsKCQkJfQoJCX0KCQlyZXR1cm4gYWRqdXN0ZWQ7Cgl9CgoKCS8vIE11bHRpZnVuY3Rpb25hbCBtZXRob2QgdG8gZ2V0IGFuZCBzZXQgdmFsdWVzIG9mIGEgY29sbGVjdGlvbgoJLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uCgl2YXIgYWNjZXNzID0gZnVuY3Rpb24oIGVsZW1zLCBmbiwga2V5LCB2YWx1ZSwgY2hhaW5hYmxlLCBlbXB0eUdldCwgcmF3ICkgewoJCXZhciBpID0gMCwKCQkJbGVuZ3RoID0gZWxlbXMubGVuZ3RoLAoJCQlidWxrID0ga2V5ID09IG51bGw7CgoJCS8vIFNldHMgbWFueSB2YWx1ZXMKCQlpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gIm9iamVjdCIgKSB7CgkJCWNoYWluYWJsZSA9IHRydWU7CgkJCWZvciAoIGkgaW4ga2V5ICkgewoJCQkJYWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVsgaSBdLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7CgkJCX0KCgkJLy8gU2V0cyBvbmUgdmFsdWUKCQl9IGVsc2UgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQljaGFpbmFibGUgPSB0cnVlOwoKCQkJaWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7CgkJCQlyYXcgPSB0cnVlOwoJCQl9CgoJCQlpZiAoIGJ1bGsgKSB7CgoJCQkJLy8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0CgkJCQlpZiAoIHJhdyApIHsKCQkJCQlmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTsKCQkJCQlmbiA9IG51bGw7CgoJCQkJLy8gLi4uZXhjZXB0IHdoZW4gZXhlY3V0aW5nIGZ1bmN0aW9uIHZhbHVlcwoJCQkJfSBlbHNlIHsKCQkJCQlidWxrID0gZm47CgkJCQkJZm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHsKCQkJCQkJcmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7CgkJCQkJfTsKCQkJCX0KCQkJfQoKCQkJaWYgKCBmbiApIHsKCQkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoJCQkJCWZuKAoJCQkJCQllbGVtc1sgaSBdLAoJCQkJCQlrZXksCgkJCQkJCXJhdyA/IHZhbHVlIDogdmFsdWUuY2FsbCggZWxlbXNbIGkgXSwgaSwgZm4oIGVsZW1zWyBpIF0sIGtleSApICkKCQkJCQkpOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gY2hhaW5hYmxlID8KCQkJZWxlbXMgOgoKCQkJLy8gR2V0cwoJCQlidWxrID8KCQkJCWZuLmNhbGwoIGVsZW1zICkgOgoJCQkJbGVuZ3RoID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7Cgl9OwoJdmFyIHJjaGVja2FibGVUeXBlID0gKCAvXig/OmNoZWNrYm94fHJhZGlvKSQvaSApOwoKCXZhciBydGFnTmFtZSA9ICggLzwoW1x3Oi1dKykvICk7CgoJdmFyIHJzY3JpcHRUeXBlID0gKCAvXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kgKTsKCgl2YXIgcmxlYWRpbmdXaGl0ZXNwYWNlID0gKCAvXlxzKy8gKTsKCgl2YXIgbm9kZU5hbWVzID0gImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8IiArCgkJCSJkZXRhaWxzfGRpYWxvZ3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8aGVhZGVyfGhncm91cHxtYWlufCIgKwoJCQkibWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iOwoKCgoJZnVuY3Rpb24gY3JlYXRlU2FmZUZyYWdtZW50KCBkb2N1bWVudCApIHsKCQl2YXIgbGlzdCA9IG5vZGVOYW1lcy5zcGxpdCggInwiICksCgkJCXNhZmVGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwoKCQlpZiAoIHNhZmVGcmFnLmNyZWF0ZUVsZW1lbnQgKSB7CgkJCXdoaWxlICggbGlzdC5sZW5ndGggKSB7CgkJCQlzYWZlRnJhZy5jcmVhdGVFbGVtZW50KAoJCQkJCWxpc3QucG9wKCkKCQkJCSk7CgkJCX0KCQl9CgkJcmV0dXJuIHNhZmVGcmFnOwoJfQoKCgkoIGZ1bmN0aW9uKCkgewoJCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApLAoJCQlmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwKCQkJaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiaW5wdXQiICk7CgoJCS8vIFNldHVwCgkJZGl2LmlubmVySFRNTCA9ICIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iOwoKCQkvLyBJRSBzdHJpcHMgbGVhZGluZyB3aGl0ZXNwYWNlIHdoZW4gLmlubmVySFRNTCBpcyB1c2VkCgkJc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSA9IGRpdi5maXJzdENoaWxkLm5vZGVUeXBlID09PSAzOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCB0Ym9keSBlbGVtZW50cyBhcmVuJ3QgYXV0b21hdGljYWxseSBpbnNlcnRlZAoJCS8vIElFIHdpbGwgaW5zZXJ0IHRoZW0gaW50byBlbXB0eSB0YWJsZXMKCQlzdXBwb3J0LnRib2R5ID0gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggInRib2R5IiApLmxlbmd0aDsKCgkJLy8gTWFrZSBzdXJlIHRoYXQgbGluayBlbGVtZW50cyBnZXQgc2VyaWFsaXplZCBjb3JyZWN0bHkgYnkgaW5uZXJIVE1MCgkJLy8gVGhpcyByZXF1aXJlcyBhIHdyYXBwZXIgZWxlbWVudCBpbiBJRQoJCXN1cHBvcnQuaHRtbFNlcmlhbGl6ZSA9ICEhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAibGluayIgKS5sZW5ndGg7CgoJCS8vIE1ha2VzIHN1cmUgY2xvbmluZyBhbiBodG1sNSBlbGVtZW50IGRvZXMgbm90IGNhdXNlIHByb2JsZW1zCgkJLy8gV2hlcmUgb3V0ZXJIVE1MIGlzIHVuZGVmaW5lZCwgdGhpcyBzdGlsbCB3b3JrcwoJCXN1cHBvcnQuaHRtbDVDbG9uZSA9CgkJCWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJuYXYiICkuY2xvbmVOb2RlKCB0cnVlICkub3V0ZXJIVE1MICE9PSAiPDpuYXY+PC86bmF2PiI7CgoJCS8vIENoZWNrIGlmIGEgZGlzY29ubmVjdGVkIGNoZWNrYm94IHdpbGwgcmV0YWluIGl0cyBjaGVja2VkCgkJLy8gdmFsdWUgb2YgdHJ1ZSBhZnRlciBhcHBlbmRlZCB0byB0aGUgRE9NIChJRTYvNykKCQlpbnB1dC50eXBlID0gImNoZWNrYm94IjsKCQlpbnB1dC5jaGVja2VkID0gdHJ1ZTsKCQlmcmFnbWVudC5hcHBlbmRDaGlsZCggaW5wdXQgKTsKCQlzdXBwb3J0LmFwcGVuZENoZWNrZWQgPSBpbnB1dC5jaGVja2VkOwoKCQkvLyBNYWtlIHN1cmUgdGV4dGFyZWEgKGFuZCBjaGVja2JveCkgZGVmYXVsdFZhbHVlIGlzIHByb3Blcmx5IGNsb25lZAoJCS8vIFN1cHBvcnQ6IElFNi1JRTExKwoJCWRpdi5pbm5lckhUTUwgPSAiPHRleHRhcmVhPng8L3RleHRhcmVhPiI7CgkJc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCA9ICEhZGl2LmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7CgoJCS8vICMxMTIxNyAtIFdlYktpdCBsb3NlcyBjaGVjayB3aGVuIHRoZSBuYW1lIGlzIGFmdGVyIHRoZSBjaGVja2VkIGF0dHJpYnV0ZQoJCWZyYWdtZW50LmFwcGVuZENoaWxkKCBkaXYgKTsKCgkJLy8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKQoJCS8vIGBuYW1lYCBhbmQgYHR5cGVgIG11c3QgdXNlIC5zZXRBdHRyaWJ1dGUgZm9yIFdXQSAoIzE0OTAxKQoJCWlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImlucHV0IiApOwoJCWlucHV0LnNldEF0dHJpYnV0ZSggInR5cGUiLCAicmFkaW8iICk7CgkJaW5wdXQuc2V0QXR0cmlidXRlKCAiY2hlY2tlZCIsICJjaGVja2VkIiApOwoJCWlucHV0LnNldEF0dHJpYnV0ZSggIm5hbWUiLCAidCIgKTsKCgkJZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApOwoKCQkvLyBTdXBwb3J0OiBTYWZhcmkgNS4xLCBpT1MgNS4xLCBBbmRyb2lkIDQueCwgQW5kcm9pZCAyLjMKCQkvLyBvbGQgV2ViS2l0IGRvZXNuJ3QgY2xvbmUgY2hlY2tlZCBzdGF0ZSBjb3JyZWN0bHkgaW4gZnJhZ21lbnRzCgkJc3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkOwoKCQkvLyBTdXBwb3J0OiBJRTw5CgkJLy8gQ2xvbmVkIGVsZW1lbnRzIGtlZXAgYXR0YWNoRXZlbnQgaGFuZGxlcnMsIHdlIHVzZSBhZGRFdmVudExpc3RlbmVyIG9uIElFOSsKCQlzdXBwb3J0Lm5vQ2xvbmVFdmVudCA9ICEhZGl2LmFkZEV2ZW50TGlzdGVuZXI7CgoJCS8vIFN1cHBvcnQ6IElFPDkKCQkvLyBTaW5jZSBhdHRyaWJ1dGVzIGFuZCBwcm9wZXJ0aWVzIGFyZSB0aGUgc2FtZSBpbiBJRSwKCQkvLyBjbGVhbkRhdGEgbXVzdCBzZXQgcHJvcGVydGllcyB0byB1bmRlZmluZWQgcmF0aGVyIHRoYW4gdXNlIHJlbW92ZUF0dHJpYnV0ZQoJCWRpdlsgalF1ZXJ5LmV4cGFuZG8gXSA9IDE7CgkJc3VwcG9ydC5hdHRyaWJ1dGVzID0gIWRpdi5nZXRBdHRyaWJ1dGUoIGpRdWVyeS5leHBhbmRvICk7Cgl9ICkoKTsKCgoJLy8gV2UgaGF2ZSB0byBjbG9zZSB0aGVzZSB0YWdzIHRvIHN1cHBvcnQgWEhUTUwgKCMxMzIwMCkKCXZhciB3cmFwTWFwID0gewoJCW9wdGlvbjogWyAxLCAiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsICI8L3NlbGVjdD4iIF0sCgkJbGVnZW5kOiBbIDEsICI8ZmllbGRzZXQ+IiwgIjwvZmllbGRzZXQ+IiBdLAoJCWFyZWE6IFsgMSwgIjxtYXA+IiwgIjwvbWFwPiIgXSwKCgkJLy8gU3VwcG9ydDogSUU4CgkJcGFyYW06IFsgMSwgIjxvYmplY3Q+IiwgIjwvb2JqZWN0PiIgXSwKCQl0aGVhZDogWyAxLCAiPHRhYmxlPiIsICI8L3RhYmxlPiIgXSwKCQl0cjogWyAyLCAiPHRhYmxlPjx0Ym9keT4iLCAiPC90Ym9keT48L3RhYmxlPiIgXSwKCQljb2w6IFsgMiwgIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwgIjwvY29sZ3JvdXA+PC90YWJsZT4iIF0sCgkJdGQ6IFsgMywgIjx0YWJsZT48dGJvZHk+PHRyPiIsICI8L3RyPjwvdGJvZHk+PC90YWJsZT4iIF0sCgoJCS8vIElFNi04IGNhbid0IHNlcmlhbGl6ZSBsaW5rLCBzY3JpcHQsIHN0eWxlLCBvciBhbnkgaHRtbDUgKE5vU2NvcGUpIHRhZ3MsCgkJLy8gdW5sZXNzIHdyYXBwZWQgaW4gYSBkaXYgd2l0aCBub24tYnJlYWtpbmcgY2hhcmFjdGVycyBpbiBmcm9udCBvZiBpdC4KCQlfZGVmYXVsdDogc3VwcG9ydC5odG1sU2VyaWFsaXplID8gWyAwLCAiIiwgIiIgXSA6IFsgMSwgIlg8ZGl2PiIsICI8L2Rpdj4iIF0KCX07CgoJLy8gU3VwcG9ydDogSUU4LUlFOQoJd3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uOwoKCXdyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7Cgl3cmFwTWFwLnRoID0gd3JhcE1hcC50ZDsKCgoJZnVuY3Rpb24gZ2V0QWxsKCBjb250ZXh0LCB0YWcgKSB7CgkJdmFyIGVsZW1zLCBlbGVtLAoJCQlpID0gMCwKCQkJZm91bmQgPSB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gInVuZGVmaW5lZCIgPwoJCQkJY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnIHx8ICIqIiApIDoKCQkJCXR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09ICJ1bmRlZmluZWQiID8KCQkJCQljb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCAiKiIgKSA6CgkJCQkJdW5kZWZpbmVkOwoKCQlpZiAoICFmb3VuZCApIHsKCQkJZm9yICggZm91bmQgPSBbXSwgZWxlbXMgPSBjb250ZXh0LmNoaWxkTm9kZXMgfHwgY29udGV4dDsKCQkJCSggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPSBudWxsOwoJCQkJaSsrCgkJCSkgewoJCQkJaWYgKCAhdGFnIHx8IGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgdGFnICkgKSB7CgkJCQkJZm91bmQucHVzaCggZWxlbSApOwoJCQkJfSBlbHNlIHsKCQkJCQlqUXVlcnkubWVyZ2UoIGZvdW5kLCBnZXRBbGwoIGVsZW0sIHRhZyApICk7CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSA/CgkJCWpRdWVyeS5tZXJnZSggWyBjb250ZXh0IF0sIGZvdW5kICkgOgoJCQlmb3VuZDsKCX0KCgoJLy8gTWFyayBzY3JpcHRzIGFzIGhhdmluZyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkCglmdW5jdGlvbiBzZXRHbG9iYWxFdmFsKCBlbGVtcywgcmVmRWxlbWVudHMgKSB7CgkJdmFyIGVsZW0sCgkJCWkgPSAwOwoJCWZvciAoIDsgKCBlbGVtID0gZWxlbXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCQkJalF1ZXJ5Ll9kYXRhKAoJCQkJZWxlbSwKCQkJCSJnbG9iYWxFdmFsIiwKCQkJCSFyZWZFbGVtZW50cyB8fCBqUXVlcnkuX2RhdGEoIHJlZkVsZW1lbnRzWyBpIF0sICJnbG9iYWxFdmFsIiApCgkJCSk7CgkJfQoJfQoKCgl2YXIgcmh0bWwgPSAvPHwmIz9cdys7LywKCQlydGJvZHkgPSAvPHRib2R5L2k7CgoJZnVuY3Rpb24gZml4RGVmYXVsdENoZWNrZWQoIGVsZW0gKSB7CgkJaWYgKCByY2hlY2thYmxlVHlwZS50ZXN0KCBlbGVtLnR5cGUgKSApIHsKCQkJZWxlbS5kZWZhdWx0Q2hlY2tlZCA9IGVsZW0uY2hlY2tlZDsKCQl9Cgl9CgoJZnVuY3Rpb24gYnVpbGRGcmFnbWVudCggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiwgaWdub3JlZCApIHsKCQl2YXIgaiwgZWxlbSwgY29udGFpbnMsCgkJCXRtcCwgdGFnLCB0Ym9keSwgd3JhcCwKCQkJbCA9IGVsZW1zLmxlbmd0aCwKCgkJCS8vIEVuc3VyZSBhIHNhZmUgZnJhZ21lbnQKCQkJc2FmZSA9IGNyZWF0ZVNhZmVGcmFnbWVudCggY29udGV4dCApLAoKCQkJbm9kZXMgPSBbXSwKCQkJaSA9IDA7CgoJCWZvciAoIDsgaSA8IGw7IGkrKyApIHsKCQkJZWxlbSA9IGVsZW1zWyBpIF07CgoJCQlpZiAoIGVsZW0gfHwgZWxlbSA9PT0gMCApIHsKCgkJCQkvLyBBZGQgbm9kZXMgZGlyZWN0bHkKCQkJCWlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gIm9iamVjdCIgKSB7CgkJCQkJalF1ZXJ5Lm1lcmdlKCBub2RlcywgZWxlbS5ub2RlVHlwZSA/IFsgZWxlbSBdIDogZWxlbSApOwoKCQkJCS8vIENvbnZlcnQgbm9uLWh0bWwgaW50byBhIHRleHQgbm9kZQoJCQkJfSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHsKCQkJCQlub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTsKCgkJCQkvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXMKCQkJCX0gZWxzZSB7CgkJCQkJdG1wID0gdG1wIHx8IHNhZmUuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApOwoKCQkJCQkvLyBEZXNlcmlhbGl6ZSBhIHN0YW5kYXJkIHJlcHJlc2VudGF0aW9uCgkJCQkJdGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyAiIiwgIiIgXSApWyAxIF0udG9Mb3dlckNhc2UoKTsKCQkJCQl3cmFwID0gd3JhcE1hcFsgdGFnIF0gfHwgd3JhcE1hcC5fZGVmYXVsdDsKCgkJCQkJdG1wLmlubmVySFRNTCA9IHdyYXBbIDEgXSArIGpRdWVyeS5odG1sUHJlZmlsdGVyKCBlbGVtICkgKyB3cmFwWyAyIF07CgoJCQkJCS8vIERlc2NlbmQgdGhyb3VnaCB3cmFwcGVycyB0byB0aGUgcmlnaHQgY29udGVudAoJCQkJCWogPSB3cmFwWyAwIF07CgkJCQkJd2hpbGUgKCBqLS0gKSB7CgkJCQkJCXRtcCA9IHRtcC5sYXN0Q2hpbGQ7CgkJCQkJfQoKCQkJCQkvLyBNYW51YWxseSBhZGQgbGVhZGluZyB3aGl0ZXNwYWNlIHJlbW92ZWQgYnkgSUUKCQkJCQlpZiAoICFzdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlICYmIHJsZWFkaW5nV2hpdGVzcGFjZS50ZXN0KCBlbGVtICkgKSB7CgkJCQkJCW5vZGVzLnB1c2goIGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoIHJsZWFkaW5nV2hpdGVzcGFjZS5leGVjKCBlbGVtIClbIDAgXSApICk7CgkJCQkJfQoKCQkJCQkvLyBSZW1vdmUgSUUncyBhdXRvaW5zZXJ0ZWQgPHRib2R5PiBmcm9tIHRhYmxlIGZyYWdtZW50cwoJCQkJCWlmICggIXN1cHBvcnQudGJvZHkgKSB7CgoJCQkJCQkvLyBTdHJpbmcgd2FzIGEgPHRhYmxlPiwgKm1heSogaGF2ZSBzcHVyaW91cyA8dGJvZHk+CgkJCQkJCWVsZW0gPSB0YWcgPT09ICJ0YWJsZSIgJiYgIXJ0Ym9keS50ZXN0KCBlbGVtICkgPwoJCQkJCQkJdG1wLmZpcnN0Q2hpbGQgOgoKCQkJCQkJCS8vIFN0cmluZyB3YXMgYSBiYXJlIDx0aGVhZD4gb3IgPHRmb290PgoJCQkJCQkJd3JhcFsgMSBdID09PSAiPHRhYmxlPiIgJiYgIXJ0Ym9keS50ZXN0KCBlbGVtICkgPwoJCQkJCQkJCXRtcCA6CgkJCQkJCQkJMDsKCgkJCQkJCWogPSBlbGVtICYmIGVsZW0uY2hpbGROb2Rlcy5sZW5ndGg7CgkJCQkJCXdoaWxlICggai0tICkgewoJCQkJCQkJaWYgKCBqUXVlcnkubm9kZU5hbWUoICggdGJvZHkgPSBlbGVtLmNoaWxkTm9kZXNbIGogXSApLCAidGJvZHkiICkgJiYKCQkJCQkJCQkhdGJvZHkuY2hpbGROb2Rlcy5sZW5ndGggKSB7CgoJCQkJCQkJCWVsZW0ucmVtb3ZlQ2hpbGQoIHRib2R5ICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWpRdWVyeS5tZXJnZSggbm9kZXMsIHRtcC5jaGlsZE5vZGVzICk7CgoJCQkJCS8vIEZpeCAjMTIzOTIgZm9yIFdlYktpdCBhbmQgSUUgPiA5CgkJCQkJdG1wLnRleHRDb250ZW50ID0gIiI7CgoJCQkJCS8vIEZpeCAjMTIzOTIgZm9yIG9sZElFCgkJCQkJd2hpbGUgKCB0bXAuZmlyc3RDaGlsZCApIHsKCQkJCQkJdG1wLnJlbW92ZUNoaWxkKCB0bXAuZmlyc3RDaGlsZCApOwoJCQkJCX0KCgkJCQkJLy8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXIgZm9yIHByb3BlciBjbGVhbnVwCgkJCQkJdG1wID0gc2FmZS5sYXN0Q2hpbGQ7CgkJCQl9CgkJCX0KCQl9CgoJCS8vIEZpeCAjMTEzNTY6IENsZWFyIGVsZW1lbnRzIGZyb20gZnJhZ21lbnQKCQlpZiAoIHRtcCApIHsKCQkJc2FmZS5yZW1vdmVDaGlsZCggdG1wICk7CgkJfQoKCQkvLyBSZXNldCBkZWZhdWx0Q2hlY2tlZCBmb3IgYW55IHJhZGlvcyBhbmQgY2hlY2tib3hlcwoJCS8vIGFib3V0IHRvIGJlIGFwcGVuZGVkIHRvIHRoZSBET00gaW4gSUUgNi83ICgjODA2MCkKCQlpZiAoICFzdXBwb3J0LmFwcGVuZENoZWNrZWQgKSB7CgkJCWpRdWVyeS5ncmVwKCBnZXRBbGwoIG5vZGVzLCAiaW5wdXQiICksIGZpeERlZmF1bHRDaGVja2VkICk7CgkJfQoKCQlpID0gMDsKCQl3aGlsZSAoICggZWxlbSA9IG5vZGVzWyBpKysgXSApICkgewoKCQkJLy8gU2tpcCBlbGVtZW50cyBhbHJlYWR5IGluIHRoZSBjb250ZXh0IGNvbGxlY3Rpb24gKHRyYWMtNDA4NykKCQkJaWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApID4gLTEgKSB7CgkJCQlpZiAoIGlnbm9yZWQgKSB7CgkJCQkJaWdub3JlZC5wdXNoKCBlbGVtICk7CgkJCQl9CgoJCQkJY29udGludWU7CgkJCX0KCgkJCWNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTsKCgkJCS8vIEFwcGVuZCB0byBmcmFnbWVudAoJCQl0bXAgPSBnZXRBbGwoIHNhZmUuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgInNjcmlwdCIgKTsKCgkJCS8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3RvcnkKCQkJaWYgKCBjb250YWlucyApIHsKCQkJCXNldEdsb2JhbEV2YWwoIHRtcCApOwoJCQl9CgoJCQkvLyBDYXB0dXJlIGV4ZWN1dGFibGVzCgkJCWlmICggc2NyaXB0cyApIHsKCQkJCWogPSAwOwoJCQkJd2hpbGUgKCAoIGVsZW0gPSB0bXBbIGorKyBdICkgKSB7CgkJCQkJaWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgIiIgKSApIHsKCQkJCQkJc2NyaXB0cy5wdXNoKCBlbGVtICk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQl0bXAgPSBudWxsOwoKCQlyZXR1cm4gc2FmZTsKCX0KCgoJKCBmdW5jdGlvbigpIHsKCQl2YXIgaSwgZXZlbnROYW1lLAoJCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoKCQkvLyBTdXBwb3J0OiBJRTw5IChsYWNrIHN1Ym1pdC9jaGFuZ2UgYnViYmxlKSwgRmlyZWZveCAobGFjayBmb2N1cyhpbiB8IG91dCkgZXZlbnRzKQoJCWZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIGNoYW5nZTogdHJ1ZSwgZm9jdXNpbjogdHJ1ZSB9ICkgewoJCQlldmVudE5hbWUgPSAib24iICsgaTsKCgkJCWlmICggISggc3VwcG9ydFsgaSBdID0gZXZlbnROYW1lIGluIHdpbmRvdyApICkgewoKCQkJCS8vIEJld2FyZSBvZiBDU1AgcmVzdHJpY3Rpb25zIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9TZWN1cml0eS9DU1ApCgkJCQlkaXYuc2V0QXR0cmlidXRlKCBldmVudE5hbWUsICJ0IiApOwoJCQkJc3VwcG9ydFsgaSBdID0gZGl2LmF0dHJpYnV0ZXNbIGV2ZW50TmFtZSBdLmV4cGFuZG8gPT09IGZhbHNlOwoJCQl9CgkJfQoKCQkvLyBOdWxsIGVsZW1lbnRzIHRvIGF2b2lkIGxlYWtzIGluIElFLgoJCWRpdiA9IG51bGw7Cgl9ICkoKTsKCgoJdmFyIHJmb3JtRWxlbXMgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksCgkJcmtleUV2ZW50ID0gL15rZXkvLAoJCXJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLAoJCXJmb2N1c01vcnBoID0gL14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLAoJCXJ0eXBlbmFtZXNwYWNlID0gL14oW14uXSopKD86XC4oLispfCkvOwoKCWZ1bmN0aW9uIHJldHVyblRydWUoKSB7CgkJcmV0dXJuIHRydWU7Cgl9CgoJZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCS8vIFN1cHBvcnQ6IElFOQoJLy8gU2VlICMxMzM5MyBmb3IgbW9yZSBpbmZvCglmdW5jdGlvbiBzYWZlQWN0aXZlRWxlbWVudCgpIHsKCQl0cnkgewoJCQlyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKCQl9IGNhdGNoICggZXJyICkgeyB9Cgl9CgoJZnVuY3Rpb24gb24oIGVsZW0sIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIG9uZSApIHsKCQl2YXIgb3JpZ0ZuLCB0eXBlOwoKCQkvLyBUeXBlcyBjYW4gYmUgYSBtYXAgb2YgdHlwZXMvaGFuZGxlcnMKCQlpZiAoIHR5cGVvZiB0eXBlcyA9PT0gIm9iamVjdCIgKSB7CgoJCQkvLyAoIHR5cGVzLU9iamVjdCwgc2VsZWN0b3IsIGRhdGEgKQoJCQlpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gInN0cmluZyIgKSB7CgoJCQkJLy8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKQoJCQkJZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7CgkJCQlzZWxlY3RvciA9IHVuZGVmaW5lZDsKCQkJfQoJCQlmb3IgKCB0eXBlIGluIHR5cGVzICkgewoJCQkJb24oIGVsZW0sIHR5cGUsIHNlbGVjdG9yLCBkYXRhLCB0eXBlc1sgdHlwZSBdLCBvbmUgKTsKCQkJfQoJCQlyZXR1cm4gZWxlbTsKCQl9CgoJCWlmICggZGF0YSA9PSBudWxsICYmIGZuID09IG51bGwgKSB7CgoJCQkvLyAoIHR5cGVzLCBmbiApCgkJCWZuID0gc2VsZWN0b3I7CgkJCWRhdGEgPSBzZWxlY3RvciA9IHVuZGVmaW5lZDsKCQl9IGVsc2UgaWYgKCBmbiA9PSBudWxsICkgewoJCQlpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIgKSB7CgoJCQkJLy8gKCB0eXBlcywgc2VsZWN0b3IsIGZuICkKCQkJCWZuID0gZGF0YTsKCQkJCWRhdGEgPSB1bmRlZmluZWQ7CgkJCX0gZWxzZSB7CgoJCQkJLy8gKCB0eXBlcywgZGF0YSwgZm4gKQoJCQkJZm4gPSBkYXRhOwoJCQkJZGF0YSA9IHNlbGVjdG9yOwoJCQkJc2VsZWN0b3IgPSB1bmRlZmluZWQ7CgkJCX0KCQl9CgkJaWYgKCBmbiA9PT0gZmFsc2UgKSB7CgkJCWZuID0gcmV0dXJuRmFsc2U7CgkJfSBlbHNlIGlmICggIWZuICkgewoJCQlyZXR1cm4gZWxlbTsKCQl9CgoJCWlmICggb25lID09PSAxICkgewoJCQlvcmlnRm4gPSBmbjsKCQkJZm4gPSBmdW5jdGlvbiggZXZlbnQgKSB7CgoJCQkJLy8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvCgkJCQlqUXVlcnkoKS5vZmYoIGV2ZW50ICk7CgkJCQlyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJfTsKCgkJCS8vIFVzZSBzYW1lIGd1aWQgc28gY2FsbGVyIGNhbiByZW1vdmUgdXNpbmcgb3JpZ0ZuCgkJCWZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApOwoJCX0KCQlyZXR1cm4gZWxlbS5lYWNoKCBmdW5jdGlvbigpIHsKCQkJalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgdHlwZXMsIGZuLCBkYXRhLCBzZWxlY3RvciApOwoJCX0gKTsKCX0KCgkvKgoJICogSGVscGVyIGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZXZlbnRzIC0tIG5vdCBwYXJ0IG9mIHRoZSBwdWJsaWMgaW50ZXJmYWNlLgoJICogUHJvcHMgdG8gRGVhbiBFZHdhcmRzJyBhZGRFdmVudCBsaWJyYXJ5IGZvciBtYW55IG9mIHRoZSBpZGVhcy4KCSAqLwoJalF1ZXJ5LmV2ZW50ID0gewoKCQlnbG9iYWw6IHt9LAoKCQlhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7CgkJCXZhciB0bXAsIGV2ZW50cywgdCwgaGFuZGxlT2JqSW4sCgkJCQlzcGVjaWFsLCBldmVudEhhbmRsZSwgaGFuZGxlT2JqLAoJCQkJaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLAoJCQkJZWxlbURhdGEgPSBqUXVlcnkuX2RhdGEoIGVsZW0gKTsKCgkJCS8vIERvbid0IGF0dGFjaCBldmVudHMgdG8gbm9EYXRhIG9yIHRleHQvY29tbWVudCBub2RlcyAoYnV0IGFsbG93IHBsYWluIG9iamVjdHMpCgkJCWlmICggIWVsZW1EYXRhICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXIKCQkJaWYgKCBoYW5kbGVyLmhhbmRsZXIgKSB7CgkJCQloYW5kbGVPYmpJbiA9IGhhbmRsZXI7CgkJCQloYW5kbGVyID0gaGFuZGxlT2JqSW4uaGFuZGxlcjsKCQkJCXNlbGVjdG9yID0gaGFuZGxlT2JqSW4uc2VsZWN0b3I7CgkJCX0KCgkJCS8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBoYW5kbGVyIGhhcyBhIHVuaXF1ZSBJRCwgdXNlZCB0byBmaW5kL3JlbW92ZSBpdCBsYXRlcgoJCQlpZiAoICFoYW5kbGVyLmd1aWQgKSB7CgkJCQloYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrOwoJCQl9CgoJCQkvLyBJbml0IHRoZSBlbGVtZW50J3MgZXZlbnQgc3RydWN0dXJlIGFuZCBtYWluIGhhbmRsZXIsIGlmIHRoaXMgaXMgdGhlIGZpcnN0CgkJCWlmICggISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7CgkJCQlldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgPSB7fTsKCQkJfQoJCQlpZiAoICEoIGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlICkgKSB7CgkJCQlldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSA9IGZ1bmN0aW9uKCBlICkgewoKCQkJCQkvLyBEaXNjYXJkIHRoZSBzZWNvbmQgZXZlbnQgb2YgYSBqUXVlcnkuZXZlbnQudHJpZ2dlcigpIGFuZAoJCQkJCS8vIHdoZW4gYW4gZXZlbnQgaXMgY2FsbGVkIGFmdGVyIGEgcGFnZSBoYXMgdW5sb2FkZWQKCQkJCQlyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gInVuZGVmaW5lZCIgJiYKCQkJCQkJKCAhZSB8fCBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgKSA/CgkJCQkJCWpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZXZlbnRIYW5kbGUuZWxlbSwgYXJndW1lbnRzICkgOgoJCQkJCQl1bmRlZmluZWQ7CgkJCQl9OwoKCQkJCS8vIEFkZCBlbGVtIGFzIGEgcHJvcGVydHkgb2YgdGhlIGhhbmRsZSBmbiB0byBwcmV2ZW50IGEgbWVtb3J5IGxlYWsKCQkJCS8vIHdpdGggSUUgbm9uLW5hdGl2ZSBldmVudHMKCQkJCWV2ZW50SGFuZGxlLmVsZW0gPSBlbGVtOwoJCQl9CgoJCQkvLyBIYW5kbGUgbXVsdGlwbGUgZXZlbnRzIHNlcGFyYXRlZCBieSBhIHNwYWNlCgkJCXR5cGVzID0gKCB0eXBlcyB8fCAiIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbICIiIF07CgkJCXQgPSB0eXBlcy5sZW5ndGg7CgkJCXdoaWxlICggdC0tICkgewoJCQkJdG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdOwoJCQkJdHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07CgkJCQluYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCAiIiApLnNwbGl0KCAiLiIgKS5zb3J0KCk7CgoJCQkJLy8gVGhlcmUgKm11c3QqIGJlIGEgdHlwZSwgbm8gYXR0YWNoaW5nIG5hbWVzcGFjZS1vbmx5IGhhbmRsZXJzCgkJCQlpZiAoICF0eXBlICkgewoJCQkJCWNvbnRpbnVlOwoJCQkJfQoKCQkJCS8vIElmIGV2ZW50IGNoYW5nZXMgaXRzIHR5cGUsIHVzZSB0aGUgc3BlY2lhbCBldmVudCBoYW5kbGVycyBmb3IgdGhlIGNoYW5nZWQgdHlwZQoJCQkJc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307CgoJCQkJLy8gSWYgc2VsZWN0b3IgZGVmaW5lZCwgZGV0ZXJtaW5lIHNwZWNpYWwgZXZlbnQgYXBpIHR5cGUsIG90aGVyd2lzZSBnaXZlbiB0eXBlCgkJCQl0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7CgoJCQkJLy8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZQoJCQkJc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307CgoJCQkJLy8gaGFuZGxlT2JqIGlzIHBhc3NlZCB0byBhbGwgZXZlbnQgaGFuZGxlcnMKCQkJCWhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoIHsKCQkJCQl0eXBlOiB0eXBlLAoJCQkJCW9yaWdUeXBlOiBvcmlnVHlwZSwKCQkJCQlkYXRhOiBkYXRhLAoJCQkJCWhhbmRsZXI6IGhhbmRsZXIsCgkJCQkJZ3VpZDogaGFuZGxlci5ndWlkLAoJCQkJCXNlbGVjdG9yOiBzZWxlY3RvciwKCQkJCQluZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLAoJCQkJCW5hbWVzcGFjZTogbmFtZXNwYWNlcy5qb2luKCAiLiIgKQoJCQkJfSwgaGFuZGxlT2JqSW4gKTsKCgkJCQkvLyBJbml0IHRoZSBldmVudCBoYW5kbGVyIHF1ZXVlIGlmIHdlJ3JlIHRoZSBmaXJzdAoJCQkJaWYgKCAhKCBoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdICkgKSB7CgkJCQkJaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSA9IFtdOwoJCQkJCWhhbmRsZXJzLmRlbGVnYXRlQ291bnQgPSAwOwoKCQkJCQkvLyBPbmx5IHVzZSBhZGRFdmVudExpc3RlbmVyL2F0dGFjaEV2ZW50IGlmIHRoZSBzcGVjaWFsIGV2ZW50cyBoYW5kbGVyIHJldHVybnMgZmFsc2UKCQkJCQlpZiAoICFzcGVjaWFsLnNldHVwIHx8CgkJCQkJCXNwZWNpYWwuc2V0dXAuY2FsbCggZWxlbSwgZGF0YSwgbmFtZXNwYWNlcywgZXZlbnRIYW5kbGUgKSA9PT0gZmFsc2UgKSB7CgoJCQkJCQkvLyBCaW5kIHRoZSBnbG9iYWwgZXZlbnQgaGFuZGxlciB0byB0aGUgZWxlbWVudAoJCQkJCQlpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHsKCQkJCQkJCWVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUsIGZhbHNlICk7CgoJCQkJCQl9IGVsc2UgaWYgKCBlbGVtLmF0dGFjaEV2ZW50ICkgewoJCQkJCQkJZWxlbS5hdHRhY2hFdmVudCggIm9uIiArIHR5cGUsIGV2ZW50SGFuZGxlICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgoJCQkJaWYgKCBzcGVjaWFsLmFkZCApIHsKCQkJCQlzcGVjaWFsLmFkZC5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTsKCgkJCQkJaWYgKCAhaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCApIHsKCQkJCQkJaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gQWRkIHRvIHRoZSBlbGVtZW50J3MgaGFuZGxlciBsaXN0LCBkZWxlZ2F0ZXMgaW4gZnJvbnQKCQkJCWlmICggc2VsZWN0b3IgKSB7CgkJCQkJaGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApOwoJCQkJfSBlbHNlIHsKCQkJCQloYW5kbGVycy5wdXNoKCBoYW5kbGVPYmogKTsKCQkJCX0KCgkJCQkvLyBLZWVwIHRyYWNrIG9mIHdoaWNoIGV2ZW50cyBoYXZlIGV2ZXIgYmVlbiB1c2VkLCBmb3IgZXZlbnQgb3B0aW1pemF0aW9uCgkJCQlqUXVlcnkuZXZlbnQuZ2xvYmFsWyB0eXBlIF0gPSB0cnVlOwoJCQl9CgoJCQkvLyBOdWxsaWZ5IGVsZW0gdG8gcHJldmVudCBtZW1vcnkgbGVha3MgaW4gSUUKCQkJZWxlbSA9IG51bGw7CgkJfSwKCgkJLy8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50CgkJcmVtb3ZlOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIHNlbGVjdG9yLCBtYXBwZWRUeXBlcyApIHsKCQkJdmFyIGosIGhhbmRsZU9iaiwgdG1wLAoJCQkJb3JpZ0NvdW50LCB0LCBldmVudHMsCgkJCQlzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwKCQkJCW5hbWVzcGFjZXMsIG9yaWdUeXBlLAoJCQkJZWxlbURhdGEgPSBqUXVlcnkuaGFzRGF0YSggZWxlbSApICYmIGpRdWVyeS5fZGF0YSggZWxlbSApOwoKCQkJaWYgKCAhZWxlbURhdGEgfHwgISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIE9uY2UgZm9yIGVhY2ggdHlwZS5uYW1lc3BhY2UgaW4gdHlwZXM7IHR5cGUgbWF5IGJlIG9taXR0ZWQKCQkJdHlwZXMgPSAoIHR5cGVzIHx8ICIiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgIiIgXTsKCQkJdCA9IHR5cGVzLmxlbmd0aDsKCQkJd2hpbGUgKCB0LS0gKSB7CgkJCQl0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107CgkJCQl0eXBlID0gb3JpZ1R5cGUgPSB0bXBbIDEgXTsKCQkJCW5hbWVzcGFjZXMgPSAoIHRtcFsgMiBdIHx8ICIiICkuc3BsaXQoICIuIiApLnNvcnQoKTsKCgkJCQkvLyBVbmJpbmQgYWxsIGV2ZW50cyAob24gdGhpcyBuYW1lc3BhY2UsIGlmIHByb3ZpZGVkKSBmb3IgdGhlIGVsZW1lbnQKCQkJCWlmICggIXR5cGUgKSB7CgkJCQkJZm9yICggdHlwZSBpbiBldmVudHMgKSB7CgkJCQkJCWpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKyB0eXBlc1sgdCBdLCBoYW5kbGVyLCBzZWxlY3RvciwgdHJ1ZSApOwoJCQkJCX0KCQkJCQljb250aW51ZTsKCQkJCX0KCgkJCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTsKCQkJCXR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTsKCQkJCWhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gfHwgW107CgkJCQl0bXAgPSB0bXBbIDIgXSAmJgoJCQkJCW5ldyBSZWdFeHAoICIoXnxcXC4pIiArIG5hbWVzcGFjZXMuam9pbiggIlxcLig/Oi4qXFwufCkiICkgKyAiKFxcLnwkKSIgKTsKCgkJCQkvLyBSZW1vdmUgbWF0Y2hpbmcgZXZlbnRzCgkJCQlvcmlnQ291bnQgPSBqID0gaGFuZGxlcnMubGVuZ3RoOwoJCQkJd2hpbGUgKCBqLS0gKSB7CgkJCQkJaGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTsKCgkJCQkJaWYgKCAoIG1hcHBlZFR5cGVzIHx8IG9yaWdUeXBlID09PSBoYW5kbGVPYmoub3JpZ1R5cGUgKSAmJgoJCQkJCQkoICFoYW5kbGVyIHx8IGhhbmRsZXIuZ3VpZCA9PT0gaGFuZGxlT2JqLmd1aWQgKSAmJgoJCQkJCQkoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmCgkJCQkJCSggIXNlbGVjdG9yIHx8IHNlbGVjdG9yID09PSBoYW5kbGVPYmouc2VsZWN0b3IgfHwKCQkJCQkJCXNlbGVjdG9yID09PSAiKioiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkgewoJCQkJCQloYW5kbGVycy5zcGxpY2UoIGosIDEgKTsKCgkJCQkJCWlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkgewoJCQkJCQkJaGFuZGxlcnMuZGVsZWdhdGVDb3VudC0tOwoJCQkJCQl9CgkJCQkJCWlmICggc3BlY2lhbC5yZW1vdmUgKSB7CgkJCQkJCQlzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQkvLyBSZW1vdmUgZ2VuZXJpYyBldmVudCBoYW5kbGVyIGlmIHdlIHJlbW92ZWQgc29tZXRoaW5nIGFuZCBubyBtb3JlIGhhbmRsZXJzIGV4aXN0CgkJCQkvLyAoYXZvaWRzIHBvdGVudGlhbCBmb3IgZW5kbGVzcyByZWN1cnNpb24gZHVyaW5nIHJlbW92YWwgb2Ygc3BlY2lhbCBldmVudCBoYW5kbGVycykKCQkJCWlmICggb3JpZ0NvdW50ICYmICFoYW5kbGVycy5sZW5ndGggKSB7CgkJCQkJaWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fAoJCQkJCQlzcGVjaWFsLnRlYXJkb3duLmNhbGwoIGVsZW0sIG5hbWVzcGFjZXMsIGVsZW1EYXRhLmhhbmRsZSApID09PSBmYWxzZSApIHsKCgkJCQkJCWpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7CgkJCQkJfQoKCQkJCQlkZWxldGUgZXZlbnRzWyB0eXBlIF07CgkJCQl9CgkJCX0KCgkJCS8vIFJlbW92ZSB0aGUgZXhwYW5kbyBpZiBpdCdzIG5vIGxvbmdlciB1c2VkCgkJCWlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGV2ZW50cyApICkgewoJCQkJZGVsZXRlIGVsZW1EYXRhLmhhbmRsZTsKCgkJCQkvLyByZW1vdmVEYXRhIGFsc28gY2hlY2tzIGZvciBlbXB0aW5lc3MgYW5kIGNsZWFycyB0aGUgZXhwYW5kbyBpZiBlbXB0eQoJCQkJLy8gc28gdXNlIGl0IGluc3RlYWQgb2YgZGVsZXRlCgkJCQlqUXVlcnkuX3JlbW92ZURhdGEoIGVsZW0sICJldmVudHMiICk7CgkJCX0KCQl9LAoKCQl0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHsKCQkJdmFyIGhhbmRsZSwgb250eXBlLCBjdXIsCgkJCQlidWJibGVUeXBlLCBzcGVjaWFsLCB0bXAsIGksCgkJCQlldmVudFBhdGggPSBbIGVsZW0gfHwgZG9jdW1lbnQgXSwKCQkJCXR5cGUgPSBoYXNPd24uY2FsbCggZXZlbnQsICJ0eXBlIiApID8gZXZlbnQudHlwZSA6IGV2ZW50LAoJCQkJbmFtZXNwYWNlcyA9IGhhc093bi5jYWxsKCBldmVudCwgIm5hbWVzcGFjZSIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdCggIi4iICkgOiBbXTsKCgkJCWN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50OwoKCQkJLy8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXMKCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIGZvY3VzL2JsdXIgbW9ycGhzIHRvIGZvY3VzaW4vb3V0OyBlbnN1cmUgd2UncmUgbm90IGZpcmluZyB0aGVtIHJpZ2h0IG5vdwoJCQlpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWlmICggdHlwZS5pbmRleE9mKCAiLiIgKSA+IC0xICkgewoKCQkJCS8vIE5hbWVzcGFjZWQgdHJpZ2dlcjsgY3JlYXRlIGEgcmVnZXhwIHRvIG1hdGNoIGV2ZW50IHR5cGUgaW4gaGFuZGxlKCkKCQkJCW5hbWVzcGFjZXMgPSB0eXBlLnNwbGl0KCAiLiIgKTsKCQkJCXR5cGUgPSBuYW1lc3BhY2VzLnNoaWZ0KCk7CgkJCQluYW1lc3BhY2VzLnNvcnQoKTsKCQkJfQoJCQlvbnR5cGUgPSB0eXBlLmluZGV4T2YoICI6IiApIDwgMCAmJiAib24iICsgdHlwZTsKCgkJCS8vIENhbGxlciBjYW4gcGFzcyBpbiBhIGpRdWVyeS5FdmVudCBvYmplY3QsIE9iamVjdCwgb3IganVzdCBhbiBldmVudCB0eXBlIHN0cmluZwoJCQlldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID8KCQkJCWV2ZW50IDoKCQkJCW5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gIm9iamVjdCIgJiYgZXZlbnQgKTsKCgkJCS8vIFRyaWdnZXIgYml0bWFzazogJiAxIGZvciBuYXRpdmUgaGFuZGxlcnM7ICYgMiBmb3IgalF1ZXJ5IChhbHdheXMgdHJ1ZSkKCQkJZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7CgkJCWV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbiggIi4iICk7CgkJCWV2ZW50LnJuYW1lc3BhY2UgPSBldmVudC5uYW1lc3BhY2UgPwoJCQkJbmV3IFJlZ0V4cCggIihefFxcLikiICsgbmFtZXNwYWNlcy5qb2luKCAiXFwuKD86LipcXC58KSIgKSArICIoXFwufCQpIiApIDoKCQkJCW51bGw7CgoJCQkvLyBDbGVhbiB1cCB0aGUgZXZlbnQgaW4gY2FzZSBpdCBpcyBiZWluZyByZXVzZWQKCQkJZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkOwoJCQlpZiAoICFldmVudC50YXJnZXQgKSB7CgkJCQlldmVudC50YXJnZXQgPSBlbGVtOwoJCQl9CgoJCQkvLyBDbG9uZSBhbnkgaW5jb21pbmcgZGF0YSBhbmQgcHJlcGVuZCB0aGUgZXZlbnQsIGNyZWF0aW5nIHRoZSBoYW5kbGVyIGFyZyBsaXN0CgkJCWRhdGEgPSBkYXRhID09IG51bGwgPwoJCQkJWyBldmVudCBdIDoKCQkJCWpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApOwoKCQkJLy8gQWxsb3cgc3BlY2lhbCBldmVudHMgdG8gZHJhdyBvdXRzaWRlIHRoZSBsaW5lcwoJCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTsKCQkJaWYgKCAhb25seUhhbmRsZXJzICYmIHNwZWNpYWwudHJpZ2dlciAmJiBzcGVjaWFsLnRyaWdnZXIuYXBwbHkoIGVsZW0sIGRhdGEgKSA9PT0gZmFsc2UgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIERldGVybWluZSBldmVudCBwcm9wYWdhdGlvbiBwYXRoIGluIGFkdmFuY2UsIHBlciBXM0MgZXZlbnRzIHNwZWMgKCM5OTUxKQoJCQkvLyBCdWJibGUgdXAgdG8gZG9jdW1lbnQsIHRoZW4gdG8gd2luZG93OyB3YXRjaCBmb3IgYSBnbG9iYWwgb3duZXJEb2N1bWVudCB2YXIgKCM5NzI0KQoJCQlpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkgewoKCQkJCWJ1YmJsZVR5cGUgPSBzcGVjaWFsLmRlbGVnYXRlVHlwZSB8fCB0eXBlOwoJCQkJaWYgKCAhcmZvY3VzTW9ycGgudGVzdCggYnViYmxlVHlwZSArIHR5cGUgKSApIHsKCQkJCQljdXIgPSBjdXIucGFyZW50Tm9kZTsKCQkJCX0KCQkJCWZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHsKCQkJCQlldmVudFBhdGgucHVzaCggY3VyICk7CgkJCQkJdG1wID0gY3VyOwoJCQkJfQoKCQkJCS8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKQoJCQkJaWYgKCB0bXAgPT09ICggZWxlbS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgKSB7CgkJCQkJZXZlbnRQYXRoLnB1c2goIHRtcC5kZWZhdWx0VmlldyB8fCB0bXAucGFyZW50V2luZG93IHx8IHdpbmRvdyApOwoJCQkJfQoJCQl9CgoJCQkvLyBGaXJlIGhhbmRsZXJzIG9uIHRoZSBldmVudCBwYXRoCgkJCWkgPSAwOwoJCQl3aGlsZSAoICggY3VyID0gZXZlbnRQYXRoWyBpKysgXSApICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkgewoKCQkJCWV2ZW50LnR5cGUgPSBpID4gMSA/CgkJCQkJYnViYmxlVHlwZSA6CgkJCQkJc3BlY2lhbC5iaW5kVHlwZSB8fCB0eXBlOwoKCQkJCS8vIGpRdWVyeSBoYW5kbGVyCgkJCQloYW5kbGUgPSAoIGpRdWVyeS5fZGF0YSggY3VyLCAiZXZlbnRzIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSAmJgoJCQkJCWpRdWVyeS5fZGF0YSggY3VyLCAiaGFuZGxlIiApOwoKCQkJCWlmICggaGFuZGxlICkgewoJCQkJCWhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7CgkJCQl9CgoJCQkJLy8gTmF0aXZlIGhhbmRsZXIKCQkJCWhhbmRsZSA9IG9udHlwZSAmJiBjdXJbIG9udHlwZSBdOwoJCQkJaWYgKCBoYW5kbGUgJiYgaGFuZGxlLmFwcGx5ICYmIGFjY2VwdERhdGEoIGN1ciApICkgewoJCQkJCWV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7CgkJCQkJaWYgKCBldmVudC5yZXN1bHQgPT09IGZhbHNlICkgewoJCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQlldmVudC50eXBlID0gdHlwZTsKCgkJCS8vIElmIG5vYm9keSBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYWN0aW9uLCBkbyBpdCBub3cKCQkJaWYgKCAhb25seUhhbmRsZXJzICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHsKCgkJCQlpZiAoCgkJCQkJKCAhc3BlY2lhbC5fZGVmYXVsdCB8fAoJCQkJCSBzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KCBldmVudFBhdGgucG9wKCksIGRhdGEgKSA9PT0gZmFsc2UKCQkJCQkpICYmIGFjY2VwdERhdGEoIGVsZW0gKQoJCQkJKSB7CgoJCQkJCS8vIENhbGwgYSBuYXRpdmUgRE9NIG1ldGhvZCBvbiB0aGUgdGFyZ2V0IHdpdGggdGhlIHNhbWUgbmFtZSBuYW1lIGFzIHRoZSBldmVudC4KCQkJCQkvLyBDYW4ndCB1c2UgYW4gLmlzRnVuY3Rpb24oKSBjaGVjayBoZXJlIGJlY2F1c2UgSUU2LzcgZmFpbHMgdGhhdCB0ZXN0LgoJCQkJCS8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MCkKCQkJCQlpZiAoIG9udHlwZSAmJiBlbGVtWyB0eXBlIF0gJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkgewoKCQkJCQkJLy8gRG9uJ3QgcmUtdHJpZ2dlciBhbiBvbkZPTyBldmVudCB3aGVuIHdlIGNhbGwgaXRzIEZPTygpIG1ldGhvZAoJCQkJCQl0bXAgPSBlbGVtWyBvbnR5cGUgXTsKCgkJCQkJCWlmICggdG1wICkgewoJCQkJCQkJZWxlbVsgb250eXBlIF0gPSBudWxsOwoJCQkJCQl9CgoJCQkJCQkvLyBQcmV2ZW50IHJlLXRyaWdnZXJpbmcgb2YgdGhlIHNhbWUgZXZlbnQsIHNpbmNlIHdlIGFscmVhZHkgYnViYmxlZCBpdCBhYm92ZQoJCQkJCQlqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdHlwZTsKCQkJCQkJdHJ5IHsKCQkJCQkJCWVsZW1bIHR5cGUgXSgpOwoJCQkJCQl9IGNhdGNoICggZSApIHsKCgkJCQkJCQkvLyBJRTw5IGRpZXMgb24gZm9jdXMvYmx1ciB0byBoaWRkZW4gZWxlbWVudCAoIzE0ODYsIzEyNTE4KQoJCQkJCQkJLy8gb25seSByZXByb2R1Y2libGUgb24gd2luWFAgSUU4IG5hdGl2ZSwgbm90IElFOSBpbiBJRTggbW9kZQoJCQkJCQl9CgkJCQkJCWpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB1bmRlZmluZWQ7CgoJCQkJCQlpZiAoIHRtcCApIHsKCQkJCQkJCWVsZW1bIG9udHlwZSBdID0gdG1wOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gZXZlbnQucmVzdWx0OwoJCX0sCgoJCWRpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7CgoJCQkvLyBNYWtlIGEgd3JpdGFibGUgalF1ZXJ5LkV2ZW50IGZyb20gdGhlIG5hdGl2ZSBldmVudCBvYmplY3QKCQkJZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApOwoKCQkJdmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLAoJCQkJaGFuZGxlclF1ZXVlID0gW10sCgkJCQlhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksCgkJCQloYW5kbGVycyA9ICggalF1ZXJ5Ll9kYXRhKCB0aGlzLCAiZXZlbnRzIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSwKCQkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9OwoKCQkJLy8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnQKCQkJYXJnc1sgMCBdID0gZXZlbnQ7CgkJCWV2ZW50LmRlbGVnYXRlVGFyZ2V0ID0gdGhpczsKCgkJCS8vIENhbGwgdGhlIHByZURpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZSwgYW5kIGxldCBpdCBiYWlsIGlmIGRlc2lyZWQKCQkJaWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIERldGVybWluZSBoYW5kbGVycwoJCQloYW5kbGVyUXVldWUgPSBqUXVlcnkuZXZlbnQuaGFuZGxlcnMuY2FsbCggdGhpcywgZXZlbnQsIGhhbmRsZXJzICk7CgoJCQkvLyBSdW4gZGVsZWdhdGVzIGZpcnN0OyB0aGV5IG1heSB3YW50IHRvIHN0b3AgcHJvcGFnYXRpb24gYmVuZWF0aCB1cwoJCQlpID0gMDsKCQkJd2hpbGUgKCAoIG1hdGNoZWQgPSBoYW5kbGVyUXVldWVbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7CgkJCQlldmVudC5jdXJyZW50VGFyZ2V0ID0gbWF0Y2hlZC5lbGVtOwoKCQkJCWogPSAwOwoJCQkJd2hpbGUgKCAoIGhhbmRsZU9iaiA9IG1hdGNoZWQuaGFuZGxlcnNbIGorKyBdICkgJiYKCQkJCQkhZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSApIHsKCgkJCQkJLy8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKQoJCQkJCS8vIGEgc3Vic2V0IG9yIGVxdWFsIHRvIHRob3NlIGluIHRoZSBib3VuZCBldmVudCAoYm90aCBjYW4gaGF2ZSBubyBuYW1lc3BhY2UpLgoJCQkJCWlmICggIWV2ZW50LnJuYW1lc3BhY2UgfHwgZXZlbnQucm5hbWVzcGFjZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7CgoJCQkJCQlldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7CgkJCQkJCWV2ZW50LmRhdGEgPSBoYW5kbGVPYmouZGF0YTsKCgkJCQkJCXJldCA9ICggKCBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgaGFuZGxlT2JqLm9yaWdUeXBlIF0gfHwge30gKS5oYW5kbGUgfHwKCQkJCQkJCWhhbmRsZU9iai5oYW5kbGVyICkuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApOwoKCQkJCQkJaWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHsKCQkJCQkJCWlmICggKCBldmVudC5yZXN1bHQgPSByZXQgKSA9PT0gZmFsc2UgKSB7CgkJCQkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCQkJCQlldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gQ2FsbCB0aGUgcG9zdERpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZQoJCQlpZiAoIHNwZWNpYWwucG9zdERpc3BhdGNoICkgewoJCQkJc3BlY2lhbC5wb3N0RGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKTsKCQkJfQoKCQkJcmV0dXJuIGV2ZW50LnJlc3VsdDsKCQl9LAoKCQloYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHsKCQkJdmFyIGksIG1hdGNoZXMsIHNlbCwgaGFuZGxlT2JqLAoJCQkJaGFuZGxlclF1ZXVlID0gW10sCgkJCQlkZWxlZ2F0ZUNvdW50ID0gaGFuZGxlcnMuZGVsZWdhdGVDb3VudCwKCQkJCWN1ciA9IGV2ZW50LnRhcmdldDsKCgkJCS8vIFN1cHBvcnQgKGF0IGxlYXN0KTogQ2hyb21lLCBJRTkKCQkJLy8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVycwoJCQkvLyBCbGFjay1ob2xlIFNWRyA8dXNlPiBpbnN0YW5jZSB0cmVlcyAoIzEzMTgwKQoJCQkvLwoJCQkvLyBTdXBwb3J0OiBGaXJlZm94PD00MisKCQkJLy8gQXZvaWQgbm9uLWxlZnQtY2xpY2sgaW4gRkYgYnV0IGRvbid0IGJsb2NrIElFIHJhZGlvIGV2ZW50cyAoIzM4NjEsIGdoLTIzNDMpCgkJCWlmICggZGVsZWdhdGVDb3VudCAmJiBjdXIubm9kZVR5cGUgJiYKCQkJCSggZXZlbnQudHlwZSAhPT0gImNsaWNrIiB8fCBpc05hTiggZXZlbnQuYnV0dG9uICkgfHwgZXZlbnQuYnV0dG9uIDwgMSApICkgewoKCQkJCS8qIGpzaGludCBlcWVxZXE6IGZhbHNlICovCgkJCQlmb3IgKCA7IGN1ciAhPSB0aGlzOyBjdXIgPSBjdXIucGFyZW50Tm9kZSB8fCB0aGlzICkgewoJCQkJCS8qIGpzaGludCBlcWVxZXE6IHRydWUgKi8KCgkJCQkJLy8gRG9uJ3QgY2hlY2sgbm9uLWVsZW1lbnRzICgjMTMyMDgpCgkJCQkJLy8gRG9uJ3QgcHJvY2VzcyBjbGlja3Mgb24gZGlzYWJsZWQgZWxlbWVudHMgKCM2OTExLCAjODE2NSwgIzExMzgyLCAjMTE3NjQpCgkJCQkJaWYgKCBjdXIubm9kZVR5cGUgPT09IDEgJiYgKCBjdXIuZGlzYWJsZWQgIT09IHRydWUgfHwgZXZlbnQudHlwZSAhPT0gImNsaWNrIiApICkgewoJCQkJCQltYXRjaGVzID0gW107CgkJCQkJCWZvciAoIGkgPSAwOyBpIDwgZGVsZWdhdGVDb3VudDsgaSsrICkgewoJCQkJCQkJaGFuZGxlT2JqID0gaGFuZGxlcnNbIGkgXTsKCgkJCQkJCQkvLyBEb24ndCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoIzEzMjAzKQoJCQkJCQkJc2VsID0gaGFuZGxlT2JqLnNlbGVjdG9yICsgIiAiOwoKCQkJCQkJCWlmICggbWF0Y2hlc1sgc2VsIF0gPT09IHVuZGVmaW5lZCApIHsKCQkJCQkJCQltYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgPwoJCQkJCQkJCQlqUXVlcnkoIHNlbCwgdGhpcyApLmluZGV4KCBjdXIgKSA+IC0xIDoKCQkJCQkJCQkJalF1ZXJ5LmZpbmQoIHNlbCwgdGhpcywgbnVsbCwgWyBjdXIgXSApLmxlbmd0aDsKCQkJCQkJCX0KCQkJCQkJCWlmICggbWF0Y2hlc1sgc2VsIF0gKSB7CgkJCQkJCQkJbWF0Y2hlcy5wdXNoKCBoYW5kbGVPYmogKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlpZiAoIG1hdGNoZXMubGVuZ3RoICkgewoJCQkJCQkJaGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogY3VyLCBoYW5kbGVyczogbWF0Y2hlcyB9ICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCgkJCS8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnMKCQkJaWYgKCBkZWxlZ2F0ZUNvdW50IDwgaGFuZGxlcnMubGVuZ3RoICkgewoJCQkJaGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogdGhpcywgaGFuZGxlcnM6IGhhbmRsZXJzLnNsaWNlKCBkZWxlZ2F0ZUNvdW50ICkgfSApOwoJCQl9CgoJCQlyZXR1cm4gaGFuZGxlclF1ZXVlOwoJCX0sCgoJCWZpeDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQlpZiAoIGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdICkgewoJCQkJcmV0dXJuIGV2ZW50OwoJCQl9CgoJCQkvLyBDcmVhdGUgYSB3cml0YWJsZSBjb3B5IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIG5vcm1hbGl6ZSBzb21lIHByb3BlcnRpZXMKCQkJdmFyIGksIHByb3AsIGNvcHksCgkJCQl0eXBlID0gZXZlbnQudHlwZSwKCQkJCW9yaWdpbmFsRXZlbnQgPSBldmVudCwKCQkJCWZpeEhvb2sgPSB0aGlzLmZpeEhvb2tzWyB0eXBlIF07CgoJCQlpZiAoICFmaXhIb29rICkgewoJCQkJdGhpcy5maXhIb29rc1sgdHlwZSBdID0gZml4SG9vayA9CgkJCQkJcm1vdXNlRXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5tb3VzZUhvb2tzIDoKCQkJCQlya2V5RXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5rZXlIb29rcyA6CgkJCQkJe307CgkJCX0KCQkJY29weSA9IGZpeEhvb2sucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdCggZml4SG9vay5wcm9wcyApIDogdGhpcy5wcm9wczsKCgkJCWV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApOwoKCQkJaSA9IGNvcHkubGVuZ3RoOwoJCQl3aGlsZSAoIGktLSApIHsKCQkJCXByb3AgPSBjb3B5WyBpIF07CgkJCQlldmVudFsgcHJvcCBdID0gb3JpZ2luYWxFdmVudFsgcHJvcCBdOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCS8vIEZpeCB0YXJnZXQgcHJvcGVydHkgKCMxOTI1KQoJCQlpZiAoICFldmVudC50YXJnZXQgKSB7CgkJCQlldmVudC50YXJnZXQgPSBvcmlnaW5hbEV2ZW50LnNyY0VsZW1lbnQgfHwgZG9jdW1lbnQ7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IFNhZmFyaSA2LTgrCgkJCS8vIFRhcmdldCBzaG91bGQgbm90IGJlIGEgdGV4dCBub2RlICgjNTA0LCAjMTMxNDMpCgkJCWlmICggZXZlbnQudGFyZ2V0Lm5vZGVUeXBlID09PSAzICkgewoJCQkJZXZlbnQudGFyZ2V0ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJLy8gRm9yIG1vdXNlL2tleSBldmVudHMsIG1ldGFLZXk9PWZhbHNlIGlmIGl0J3MgdW5kZWZpbmVkICgjMzM2OCwgIzExMzI4KQoJCQlldmVudC5tZXRhS2V5ID0gISFldmVudC5tZXRhS2V5OwoKCQkJcmV0dXJuIGZpeEhvb2suZmlsdGVyID8gZml4SG9vay5maWx0ZXIoIGV2ZW50LCBvcmlnaW5hbEV2ZW50ICkgOiBldmVudDsKCQl9LAoKCQkvLyBJbmNsdWRlcyBzb21lIGV2ZW50IHByb3BzIHNoYXJlZCBieSBLZXlFdmVudCBhbmQgTW91c2VFdmVudAoJCXByb3BzOiAoICJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSAiICsKCQkJIm1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giICkuc3BsaXQoICIgIiApLAoKCQlmaXhIb29rczoge30sCgoJCWtleUhvb2tzOiB7CgkJCXByb3BzOiAiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoICIgIiApLAoJCQlmaWx0ZXI6IGZ1bmN0aW9uKCBldmVudCwgb3JpZ2luYWwgKSB7CgoJCQkJLy8gQWRkIHdoaWNoIGZvciBrZXkgZXZlbnRzCgkJCQlpZiAoIGV2ZW50LndoaWNoID09IG51bGwgKSB7CgkJCQkJZXZlbnQud2hpY2ggPSBvcmlnaW5hbC5jaGFyQ29kZSAhPSBudWxsID8gb3JpZ2luYWwuY2hhckNvZGUgOiBvcmlnaW5hbC5rZXlDb2RlOwoJCQkJfQoKCQkJCXJldHVybiBldmVudDsKCQkJfQoJCX0sCgoJCW1vdXNlSG9va3M6IHsKCQkJcHJvcHM6ICggImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBmcm9tRWxlbWVudCBvZmZzZXRYIG9mZnNldFkgIiArCgkJCQkicGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIgKS5zcGxpdCggIiAiICksCgkJCWZpbHRlcjogZnVuY3Rpb24oIGV2ZW50LCBvcmlnaW5hbCApIHsKCQkJCXZhciBib2R5LCBldmVudERvYywgZG9jLAoJCQkJCWJ1dHRvbiA9IG9yaWdpbmFsLmJ1dHRvbiwKCQkJCQlmcm9tRWxlbWVudCA9IG9yaWdpbmFsLmZyb21FbGVtZW50OwoKCQkJCS8vIENhbGN1bGF0ZSBwYWdlWC9ZIGlmIG1pc3NpbmcgYW5kIGNsaWVudFgvWSBhdmFpbGFibGUKCQkJCWlmICggZXZlbnQucGFnZVggPT0gbnVsbCAmJiBvcmlnaW5hbC5jbGllbnRYICE9IG51bGwgKSB7CgkJCQkJZXZlbnREb2MgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudDsKCQkJCQlkb2MgPSBldmVudERvYy5kb2N1bWVudEVsZW1lbnQ7CgkJCQkJYm9keSA9IGV2ZW50RG9jLmJvZHk7CgoJCQkJCWV2ZW50LnBhZ2VYID0gb3JpZ2luYWwuY2xpZW50WCArCgkJCQkJCSggZG9jICYmIGRvYy5zY3JvbGxMZWZ0IHx8IGJvZHkgJiYgYm9keS5zY3JvbGxMZWZ0IHx8IDAgKSAtCgkJCQkJCSggZG9jICYmIGRvYy5jbGllbnRMZWZ0IHx8IGJvZHkgJiYgYm9keS5jbGllbnRMZWZ0IHx8IDAgKTsKCQkJCQlldmVudC5wYWdlWSA9IG9yaWdpbmFsLmNsaWVudFkgKwoJCQkJCQkoIGRvYyAmJiBkb2Muc2Nyb2xsVG9wICB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsVG9wICB8fCAwICkgLQoJCQkJCQkoIGRvYyAmJiBkb2MuY2xpZW50VG9wICB8fCBib2R5ICYmIGJvZHkuY2xpZW50VG9wICB8fCAwICk7CgkJCQl9CgoJCQkJLy8gQWRkIHJlbGF0ZWRUYXJnZXQsIGlmIG5lY2Vzc2FyeQoJCQkJaWYgKCAhZXZlbnQucmVsYXRlZFRhcmdldCAmJiBmcm9tRWxlbWVudCApIHsKCQkJCQlldmVudC5yZWxhdGVkVGFyZ2V0ID0gZnJvbUVsZW1lbnQgPT09IGV2ZW50LnRhcmdldCA/CgkJCQkJCW9yaWdpbmFsLnRvRWxlbWVudCA6CgkJCQkJCWZyb21FbGVtZW50OwoJCQkJfQoKCQkJCS8vIEFkZCB3aGljaCBmb3IgY2xpY2s6IDEgPT09IGxlZnQ7IDIgPT09IG1pZGRsZTsgMyA9PT0gcmlnaHQKCQkJCS8vIE5vdGU6IGJ1dHRvbiBpcyBub3Qgbm9ybWFsaXplZCwgc28gZG9uJ3QgdXNlIGl0CgkJCQlpZiAoICFldmVudC53aGljaCAmJiBidXR0b24gIT09IHVuZGVmaW5lZCApIHsKCQkJCQlldmVudC53aGljaCA9ICggYnV0dG9uICYgMSA/IDEgOiAoIGJ1dHRvbiAmIDIgPyAzIDogKCBidXR0b24gJiA0ID8gMiA6IDAgKSApICk7CgkJCQl9CgoJCQkJcmV0dXJuIGV2ZW50OwoJCQl9CgkJfSwKCgkJc3BlY2lhbDogewoJCQlsb2FkOiB7CgoJCQkJLy8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZAoJCQkJbm9CdWJibGU6IHRydWUKCQkJfSwKCQkJZm9jdXM6IHsKCgkJCQkvLyBGaXJlIG5hdGl2ZSBldmVudCBpZiBwb3NzaWJsZSBzbyBibHVyL2ZvY3VzIHNlcXVlbmNlIGlzIGNvcnJlY3QKCQkJCXRyaWdnZXI6IGZ1bmN0aW9uKCkgewoJCQkJCWlmICggdGhpcyAhPT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmZvY3VzICkgewoJCQkJCQl0cnkgewoJCQkJCQkJdGhpcy5mb2N1cygpOwoJCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCQl9IGNhdGNoICggZSApIHsKCgkJCQkJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCQkJCQkvLyBJZiB3ZSBlcnJvciBvbiBmb2N1cyB0byBoaWRkZW4gZWxlbWVudCAoIzE0ODYsICMxMjUxOCksCgkJCQkJCQkvLyBsZXQgLnRyaWdnZXIoKSBydW4gdGhlIGhhbmRsZXJzCgkJCQkJCX0KCQkJCQl9CgkJCQl9LAoJCQkJZGVsZWdhdGVUeXBlOiAiZm9jdXNpbiIKCQkJfSwKCQkJYmx1cjogewoJCQkJdHJpZ2dlcjogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCB0aGlzID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuYmx1ciApIHsKCQkJCQkJdGhpcy5ibHVyKCk7CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQl9LAoJCQkJZGVsZWdhdGVUeXBlOiAiZm9jdXNvdXQiCgkJCX0sCgkJCWNsaWNrOiB7CgoJCQkJLy8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHQKCQkJCXRyaWdnZXI6IGZ1bmN0aW9uKCkgewoJCQkJCWlmICggalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCAiaW5wdXQiICkgJiYgdGhpcy50eXBlID09PSAiY2hlY2tib3giICYmIHRoaXMuY2xpY2sgKSB7CgkJCQkJCXRoaXMuY2xpY2soKTsKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0KCQkJCX0sCgoJCQkJLy8gRm9yIGNyb3NzLWJyb3dzZXIgY29uc2lzdGVuY3ksIGRvbid0IGZpcmUgbmF0aXZlIC5jbGljaygpIG9uIGxpbmtzCgkJCQlfZGVmYXVsdDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCXJldHVybiBqUXVlcnkubm9kZU5hbWUoIGV2ZW50LnRhcmdldCwgImEiICk7CgkJCQl9CgkJCX0sCgoJCQliZWZvcmV1bmxvYWQ6IHsKCQkJCXBvc3REaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkgewoKCQkJCQkvLyBTdXBwb3J0OiBGaXJlZm94IDIwKwoJCQkJCS8vIEZpcmVmb3ggZG9lc24ndCBhbGVydCBpZiB0aGUgcmV0dXJuVmFsdWUgZmllbGQgaXMgbm90IHNldC4KCQkJCQlpZiAoIGV2ZW50LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQgKSB7CgkJCQkJCWV2ZW50Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWUgPSBldmVudC5yZXN1bHQ7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfSwKCgkJLy8gUGlnZ3liYWNrIG9uIGEgZG9ub3IgZXZlbnQgdG8gc2ltdWxhdGUgYSBkaWZmZXJlbnQgb25lCgkJc2ltdWxhdGU6IGZ1bmN0aW9uKCB0eXBlLCBlbGVtLCBldmVudCApIHsKCQkJdmFyIGUgPSBqUXVlcnkuZXh0ZW5kKAoJCQkJbmV3IGpRdWVyeS5FdmVudCgpLAoJCQkJZXZlbnQsCgkJCQl7CgkJCQkJdHlwZTogdHlwZSwKCQkJCQlpc1NpbXVsYXRlZDogdHJ1ZQoKCQkJCQkvLyBQcmV2aW91c2x5LCBgb3JpZ2luYWxFdmVudDoge31gIHdhcyBzZXQgaGVyZSwgc28gc3RvcFByb3BhZ2F0aW9uIGNhbGwKCQkJCQkvLyB3b3VsZCBub3QgYmUgdHJpZ2dlcmVkIG9uIGRvbm9yIGV2ZW50LCBzaW5jZSBpbiBvdXIgb3duCgkJCQkJLy8galF1ZXJ5LmV2ZW50LnN0b3BQcm9wYWdhdGlvbiBmdW5jdGlvbiB3ZSBoYWQgYSBjaGVjayBmb3IgZXhpc3RlbmNlIG9mCgkJCQkJLy8gb3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24gbWV0aG9kLCBzbywgY29uc2VxdWVudGx5IGl0IHdvdWxkIGJlIGEgbm9vcC4KCQkJCQkvLwoJCQkJCS8vIEd1YXJkIGZvciBzaW11bGF0ZWQgZXZlbnRzIHdhcyBtb3ZlZCB0byBqUXVlcnkuZXZlbnQuc3RvcFByb3BhZ2F0aW9uIGZ1bmN0aW9uCgkJCQkJLy8gc2luY2UgYG9yaWdpbmFsRXZlbnRgIHNob3VsZCBwb2ludCB0byB0aGUgb3JpZ2luYWwgZXZlbnQgZm9yIHRoZQoJCQkJCS8vIGNvbnN0YW5jeSB3aXRoIG90aGVyIGV2ZW50cyBhbmQgZm9yIG1vcmUgZm9jdXNlZCBsb2dpYwoJCQkJfQoJCQkpOwoKCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXIoIGUsIG51bGwsIGVsZW0gKTsKCgkJCWlmICggZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHsKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCX0KCQl9Cgl9OwoKCWpRdWVyeS5yZW1vdmVFdmVudCA9IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIgPwoJCWZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBoYW5kbGUgKSB7CgoJCQkvLyBUaGlzICJpZiIgaXMgbmVlZGVkIGZvciBwbGFpbiBvYmplY3RzCgkJCWlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkgewoJCQkJZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUgKTsKCQkJfQoJCX0gOgoJCWZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBoYW5kbGUgKSB7CgkJCXZhciBuYW1lID0gIm9uIiArIHR5cGU7CgoJCQlpZiAoIGVsZW0uZGV0YWNoRXZlbnQgKSB7CgoJCQkJLy8gIzg1NDUsICM3MDU0LCBwcmV2ZW50aW5nIG1lbW9yeSBsZWFrcyBmb3IgY3VzdG9tIGV2ZW50cyBpbiBJRTYtOAoJCQkJLy8gZGV0YWNoRXZlbnQgbmVlZGVkIHByb3BlcnR5IG9uIGVsZW1lbnQsIGJ5IG5hbWUgb2YgdGhhdCBldmVudCwKCQkJCS8vIHRvIHByb3Blcmx5IGV4cG9zZSBpdCB0byBHQwoJCQkJaWYgKCB0eXBlb2YgZWxlbVsgbmFtZSBdID09PSAidW5kZWZpbmVkIiApIHsKCQkJCQllbGVtWyBuYW1lIF0gPSBudWxsOwoJCQkJfQoKCQkJCWVsZW0uZGV0YWNoRXZlbnQoIG5hbWUsIGhhbmRsZSApOwoJCQl9CgkJfTsKCglqUXVlcnkuRXZlbnQgPSBmdW5jdGlvbiggc3JjLCBwcm9wcyApIHsKCgkJLy8gQWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IHRoZSAnbmV3JyBrZXl3b3JkCgkJaWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50ICkgKSB7CgkJCXJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7CgkJfQoKCQkvLyBFdmVudCBvYmplY3QKCQlpZiAoIHNyYyAmJiBzcmMudHlwZSApIHsKCQkJdGhpcy5vcmlnaW5hbEV2ZW50ID0gc3JjOwoJCQl0aGlzLnR5cGUgPSBzcmMudHlwZTsKCgkJCS8vIEV2ZW50cyBidWJibGluZyB1cCB0aGUgZG9jdW1lbnQgbWF5IGhhdmUgYmVlbiBtYXJrZWQgYXMgcHJldmVudGVkCgkJCS8vIGJ5IGEgaGFuZGxlciBsb3dlciBkb3duIHRoZSB0cmVlOyByZWZsZWN0IHRoZSBjb3JyZWN0IHZhbHVlLgoJCQl0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8CgkJCQkJc3JjLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHVuZGVmaW5lZCAmJgoKCQkJCQkvLyBTdXBwb3J0OiBJRSA8IDksIEFuZHJvaWQgPCA0LjAKCQkJCQlzcmMucmV0dXJuVmFsdWUgPT09IGZhbHNlID8KCQkJCXJldHVyblRydWUgOgoJCQkJcmV0dXJuRmFsc2U7CgoJCS8vIEV2ZW50IHR5cGUKCQl9IGVsc2UgewoJCQl0aGlzLnR5cGUgPSBzcmM7CgkJfQoKCQkvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdAoJCWlmICggcHJvcHMgKSB7CgkJCWpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7CgkJfQoKCQkvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZQoJCXRoaXMudGltZVN0YW1wID0gc3JjICYmIHNyYy50aW1lU3RhbXAgfHwgalF1ZXJ5Lm5vdygpOwoKCQkvLyBNYXJrIGl0IGFzIGZpeGVkCgkJdGhpc1sgalF1ZXJ5LmV4cGFuZG8gXSA9IHRydWU7Cgl9OwoKCS8vIGpRdWVyeS5FdmVudCBpcyBiYXNlZCBvbiBET00zIEV2ZW50cyBhcyBzcGVjaWZpZWQgYnkgdGhlIEVDTUFTY3JpcHQgTGFuZ3VhZ2UgQmluZGluZwoJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMy9XRC1ET00tTGV2ZWwtMy1FdmVudHMtMjAwMzAzMzEvZWNtYS1zY3JpcHQtYmluZGluZy5odG1sCglqUXVlcnkuRXZlbnQucHJvdG90eXBlID0gewoJCWNvbnN0cnVjdG9yOiBqUXVlcnkuRXZlbnQsCgkJaXNEZWZhdWx0UHJldmVudGVkOiByZXR1cm5GYWxzZSwKCQlpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsCgkJaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLAoKCQlwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7CgkJCXZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OwoKCQkJdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSByZXR1cm5UcnVlOwoJCQlpZiAoICFlICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBJZiBwcmV2ZW50RGVmYXVsdCBleGlzdHMsIHJ1biBpdCBvbiB0aGUgb3JpZ2luYWwgZXZlbnQKCQkJaWYgKCBlLnByZXZlbnREZWZhdWx0ICkgewoJCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoKCQkJLy8gU3VwcG9ydDogSUUKCQkJLy8gT3RoZXJ3aXNlIHNldCB0aGUgcmV0dXJuVmFsdWUgcHJvcGVydHkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRvIGZhbHNlCgkJCX0gZWxzZSB7CgkJCQllLnJldHVyblZhbHVlID0gZmFsc2U7CgkJCX0KCQl9LAoJCXN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7CgkJCXZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OwoKCQkJdGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7CgoJCQlpZiAoICFlIHx8IHRoaXMuaXNTaW11bGF0ZWQgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIElmIHN0b3BQcm9wYWdhdGlvbiBleGlzdHMsIHJ1biBpdCBvbiB0aGUgb3JpZ2luYWwgZXZlbnQKCQkJaWYgKCBlLnN0b3BQcm9wYWdhdGlvbiApIHsKCQkJCWUuc3RvcFByb3BhZ2F0aW9uKCk7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFCgkJCS8vIFNldCB0aGUgY2FuY2VsQnViYmxlIHByb3BlcnR5IG9mIHRoZSBvcmlnaW5hbCBldmVudCB0byB0cnVlCgkJCWUuY2FuY2VsQnViYmxlID0gdHJ1ZTsKCQl9LAoJCXN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7CgkJCXZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OwoKCQkJdGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7CgoJCQlpZiAoIGUgJiYgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gKSB7CgkJCQllLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOwoJCQl9CgoJCQl0aGlzLnN0b3BQcm9wYWdhdGlvbigpOwoJCX0KCX07CgoJLy8gQ3JlYXRlIG1vdXNlZW50ZXIvbGVhdmUgZXZlbnRzIHVzaW5nIG1vdXNlb3Zlci9vdXQgYW5kIGV2ZW50LXRpbWUgY2hlY2tzCgkvLyBzbyB0aGF0IGV2ZW50IGRlbGVnYXRpb24gd29ya3MgaW4galF1ZXJ5LgoJLy8gRG8gdGhlIHNhbWUgZm9yIHBvaW50ZXJlbnRlci9wb2ludGVybGVhdmUgYW5kIHBvaW50ZXJvdmVyL3BvaW50ZXJvdXQKCS8vCgkvLyBTdXBwb3J0OiBTYWZhcmkgNyBvbmx5CgkvLyBTYWZhcmkgc2VuZHMgbW91c2VlbnRlciB0b28gb2Z0ZW47IHNlZToKCS8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NzAyNTgKCS8vIGZvciB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIGJ1ZyAoaXQgZXhpc3RlZCBpbiBvbGRlciBDaHJvbWUgdmVyc2lvbnMgYXMgd2VsbCkuCglqUXVlcnkuZWFjaCggewoJCW1vdXNlZW50ZXI6ICJtb3VzZW92ZXIiLAoJCW1vdXNlbGVhdmU6ICJtb3VzZW91dCIsCgkJcG9pbnRlcmVudGVyOiAicG9pbnRlcm92ZXIiLAoJCXBvaW50ZXJsZWF2ZTogInBvaW50ZXJvdXQiCgl9LCBmdW5jdGlvbiggb3JpZywgZml4ICkgewoJCWpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7CgkJCWRlbGVnYXRlVHlwZTogZml4LAoJCQliaW5kVHlwZTogZml4LAoKCQkJaGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQl2YXIgcmV0LAoJCQkJCXRhcmdldCA9IHRoaXMsCgkJCQkJcmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsCgkJCQkJaGFuZGxlT2JqID0gZXZlbnQuaGFuZGxlT2JqOwoKCQkJCS8vIEZvciBtb3VzZWVudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuCgkJCQkvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvdwoJCQkJaWYgKCAhcmVsYXRlZCB8fCAoIHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSApICkgewoJCQkJCWV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7CgkJCQkJcmV0ID0gaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJCWV2ZW50LnR5cGUgPSBmaXg7CgkJCQl9CgkJCQlyZXR1cm4gcmV0OwoJCQl9CgkJfTsKCX0gKTsKCgkvLyBJRSBzdWJtaXQgZGVsZWdhdGlvbgoJaWYgKCAhc3VwcG9ydC5zdWJtaXQgKSB7CgoJCWpRdWVyeS5ldmVudC5zcGVjaWFsLnN1Ym1pdCA9IHsKCQkJc2V0dXA6IGZ1bmN0aW9uKCkgewoKCQkJCS8vIE9ubHkgbmVlZCB0aGlzIGZvciBkZWxlZ2F0ZWQgZm9ybSBzdWJtaXQgZXZlbnRzCgkJCQlpZiAoIGpRdWVyeS5ub2RlTmFtZSggdGhpcywgImZvcm0iICkgKSB7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoKCQkJCS8vIExhenktYWRkIGEgc3VibWl0IGhhbmRsZXIgd2hlbiBhIGRlc2NlbmRhbnQgZm9ybSBtYXkgcG90ZW50aWFsbHkgYmUgc3VibWl0dGVkCgkJCQlqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCAiY2xpY2suX3N1Ym1pdCBrZXlwcmVzcy5fc3VibWl0IiwgZnVuY3Rpb24oIGUgKSB7CgoJCQkJCS8vIE5vZGUgbmFtZSBjaGVjayBhdm9pZHMgYSBWTUwtcmVsYXRlZCBjcmFzaCBpbiBJRSAoIzk4MDcpCgkJCQkJdmFyIGVsZW0gPSBlLnRhcmdldCwKCQkJCQkJZm9ybSA9IGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgImlucHV0IiApIHx8IGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgImJ1dHRvbiIgKSA/CgoJCQkJCQkJLy8gU3VwcG9ydDogSUUgPD04CgkJCQkJCQkvLyBXZSB1c2UgalF1ZXJ5LnByb3AgaW5zdGVhZCBvZiBlbGVtLmZvcm0KCQkJCQkJCS8vIHRvIGFsbG93IGZpeGluZyB0aGUgSUU4IGRlbGVnYXRlZCBzdWJtaXQgaXNzdWUgKGdoLTIzMzIpCgkJCQkJCQkvLyBieSAzcmQgcGFydHkgcG9seWZpbGxzL3dvcmthcm91bmRzLgoJCQkJCQkJalF1ZXJ5LnByb3AoIGVsZW0sICJmb3JtIiApIDoKCQkJCQkJCXVuZGVmaW5lZDsKCgkJCQkJaWYgKCBmb3JtICYmICFqUXVlcnkuX2RhdGEoIGZvcm0sICJzdWJtaXQiICkgKSB7CgkJCQkJCWpRdWVyeS5ldmVudC5hZGQoIGZvcm0sICJzdWJtaXQuX3N1Ym1pdCIsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCQkJCWV2ZW50Ll9zdWJtaXRCdWJibGUgPSB0cnVlOwoJCQkJCQl9ICk7CgkJCQkJCWpRdWVyeS5fZGF0YSggZm9ybSwgInN1Ym1pdCIsIHRydWUgKTsKCQkJCQl9CgkJCQl9ICk7CgoJCQkJLy8gcmV0dXJuIHVuZGVmaW5lZCBzaW5jZSB3ZSBkb24ndCBuZWVkIGFuIGV2ZW50IGxpc3RlbmVyCgkJCX0sCgoJCQlwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHsKCgkJCQkvLyBJZiBmb3JtIHdhcyBzdWJtaXR0ZWQgYnkgdGhlIHVzZXIsIGJ1YmJsZSB0aGUgZXZlbnQgdXAgdGhlIHRyZWUKCQkJCWlmICggZXZlbnQuX3N1Ym1pdEJ1YmJsZSApIHsKCQkJCQlkZWxldGUgZXZlbnQuX3N1Ym1pdEJ1YmJsZTsKCQkJCQlpZiAoIHRoaXMucGFyZW50Tm9kZSAmJiAhZXZlbnQuaXNUcmlnZ2VyICkgewoJCQkJCQlqUXVlcnkuZXZlbnQuc2ltdWxhdGUoICJzdWJtaXQiLCB0aGlzLnBhcmVudE5vZGUsIGV2ZW50ICk7CgkJCQkJfQoJCQkJfQoJCQl9LAoKCQkJdGVhcmRvd246IGZ1bmN0aW9uKCkgewoKCQkJCS8vIE9ubHkgbmVlZCB0aGlzIGZvciBkZWxlZ2F0ZWQgZm9ybSBzdWJtaXQgZXZlbnRzCgkJCQlpZiAoIGpRdWVyeS5ub2RlTmFtZSggdGhpcywgImZvcm0iICkgKSB7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoKCQkJCS8vIFJlbW92ZSBkZWxlZ2F0ZWQgaGFuZGxlcnM7IGNsZWFuRGF0YSBldmVudHVhbGx5IHJlYXBzIHN1Ym1pdCBoYW5kbGVycyBhdHRhY2hlZCBhYm92ZQoJCQkJalF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgIi5fc3VibWl0IiApOwoJCQl9CgkJfTsKCX0KCgkvLyBJRSBjaGFuZ2UgZGVsZWdhdGlvbiBhbmQgY2hlY2tib3gvcmFkaW8gZml4CglpZiAoICFzdXBwb3J0LmNoYW5nZSApIHsKCgkJalF1ZXJ5LmV2ZW50LnNwZWNpYWwuY2hhbmdlID0gewoKCQkJc2V0dXA6IGZ1bmN0aW9uKCkgewoKCQkJCWlmICggcmZvcm1FbGVtcy50ZXN0KCB0aGlzLm5vZGVOYW1lICkgKSB7CgoJCQkJCS8vIElFIGRvZXNuJ3QgZmlyZSBjaGFuZ2Ugb24gYSBjaGVjay9yYWRpbyB1bnRpbCBibHVyOyB0cmlnZ2VyIGl0IG9uIGNsaWNrCgkJCQkJLy8gYWZ0ZXIgYSBwcm9wZXJ0eWNoYW5nZS4gRWF0IHRoZSBibHVyLWNoYW5nZSBpbiBzcGVjaWFsLmNoYW5nZS5oYW5kbGUuCgkJCQkJLy8gVGhpcyBzdGlsbCBmaXJlcyBvbmNoYW5nZSBhIHNlY29uZCB0aW1lIGZvciBjaGVjay9yYWRpbyBhZnRlciBibHVyLgoJCQkJCWlmICggdGhpcy50eXBlID09PSAiY2hlY2tib3giIHx8IHRoaXMudHlwZSA9PT0gInJhZGlvIiApIHsKCQkJCQkJalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2UiLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJCQlpZiAoIGV2ZW50Lm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lID09PSAiY2hlY2tlZCIgKSB7CgkJCQkJCQkJdGhpcy5fanVzdENoYW5nZWQgPSB0cnVlOwoJCQkJCQkJfQoJCQkJCQl9ICk7CgkJCQkJCWpRdWVyeS5ldmVudC5hZGQoIHRoaXMsICJjbGljay5fY2hhbmdlIiwgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCQkJaWYgKCB0aGlzLl9qdXN0Q2hhbmdlZCAmJiAhZXZlbnQuaXNUcmlnZ2VyICkgewoJCQkJCQkJCXRoaXMuX2p1c3RDaGFuZ2VkID0gZmFsc2U7CgkJCQkJCQl9CgoJCQkJCQkJLy8gQWxsb3cgdHJpZ2dlcmVkLCBzaW11bGF0ZWQgY2hhbmdlIGV2ZW50cyAoIzExNTAwKQoJCQkJCQkJalF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCAiY2hhbmdlIiwgdGhpcywgZXZlbnQgKTsKCQkJCQkJfSApOwoJCQkJCX0KCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgoJCQkJLy8gRGVsZWdhdGVkIGV2ZW50OyBsYXp5LWFkZCBhIGNoYW5nZSBoYW5kbGVyIG9uIGRlc2NlbmRhbnQgaW5wdXRzCgkJCQlqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCAiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsIGZ1bmN0aW9uKCBlICkgewoJCQkJCXZhciBlbGVtID0gZS50YXJnZXQ7CgoJCQkJCWlmICggcmZvcm1FbGVtcy50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgIWpRdWVyeS5fZGF0YSggZWxlbSwgImNoYW5nZSIgKSApIHsKCQkJCQkJalF1ZXJ5LmV2ZW50LmFkZCggZWxlbSwgImNoYW5nZS5fY2hhbmdlIiwgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCQkJaWYgKCB0aGlzLnBhcmVudE5vZGUgJiYgIWV2ZW50LmlzU2ltdWxhdGVkICYmICFldmVudC5pc1RyaWdnZXIgKSB7CgkJCQkJCQkJalF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCAiY2hhbmdlIiwgdGhpcy5wYXJlbnROb2RlLCBldmVudCApOwoJCQkJCQkJfQoJCQkJCQl9ICk7CgkJCQkJCWpRdWVyeS5fZGF0YSggZWxlbSwgImNoYW5nZSIsIHRydWUgKTsKCQkJCQl9CgkJCQl9ICk7CgkJCX0sCgoJCQloYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCXZhciBlbGVtID0gZXZlbnQudGFyZ2V0OwoKCQkJCS8vIFN3YWxsb3cgbmF0aXZlIGNoYW5nZSBldmVudHMgZnJvbSBjaGVja2JveC9yYWRpbywgd2UgYWxyZWFkeSB0cmlnZ2VyZWQgdGhlbSBhYm92ZQoJCQkJaWYgKCB0aGlzICE9PSBlbGVtIHx8IGV2ZW50LmlzU2ltdWxhdGVkIHx8IGV2ZW50LmlzVHJpZ2dlciB8fAoJCQkJCSggZWxlbS50eXBlICE9PSAicmFkaW8iICYmIGVsZW0udHlwZSAhPT0gImNoZWNrYm94IiApICkgewoKCQkJCQlyZXR1cm4gZXZlbnQuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJfQoJCQl9LAoKCQkJdGVhcmRvd246IGZ1bmN0aW9uKCkgewoJCQkJalF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgIi5fY2hhbmdlIiApOwoKCQkJCXJldHVybiAhcmZvcm1FbGVtcy50ZXN0KCB0aGlzLm5vZGVOYW1lICk7CgkJCX0KCQl9OwoJfQoKCS8vIFN1cHBvcnQ6IEZpcmVmb3gKCS8vIEZpcmVmb3ggZG9lc24ndCBoYXZlIGZvY3VzKGluIHwgb3V0KSBldmVudHMKCS8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njg3Nzg3CgkvLwoJLy8gU3VwcG9ydDogQ2hyb21lLCBTYWZhcmkKCS8vIGZvY3VzKGluIHwgb3V0KSBldmVudHMgZmlyZSBhZnRlciBmb2N1cyAmIGJsdXIgZXZlbnRzLAoJLy8gd2hpY2ggaXMgc3BlYyB2aW9sYXRpb24gLSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1mb2N1c2V2ZW50LWV2ZW50LW9yZGVyCgkvLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDk4NTcKCWlmICggIXN1cHBvcnQuZm9jdXNpbiApIHsKCQlqUXVlcnkuZWFjaCggeyBmb2N1czogImZvY3VzaW4iLCBibHVyOiAiZm9jdXNvdXQiIH0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7CgoJCQkvLyBBdHRhY2ggYSBzaW5nbGUgY2FwdHVyaW5nIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50IHdoaWxlIHNvbWVvbmUgd2FudHMgZm9jdXNpbi9mb2N1c291dAoJCQl2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWpRdWVyeS5ldmVudC5zaW11bGF0ZSggZml4LCBldmVudC50YXJnZXQsIGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICkgKTsKCQkJfTsKCgkJCWpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHsKCQkJCXNldHVwOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsCgkJCQkJCWF0dGFjaGVzID0galF1ZXJ5Ll9kYXRhKCBkb2MsIGZpeCApOwoKCQkJCQlpZiAoICFhdHRhY2hlcyApIHsKCQkJCQkJZG9jLmFkZEV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTsKCQkJCQl9CgkJCQkJalF1ZXJ5Ll9kYXRhKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7CgkJCQl9LAoJCQkJdGVhcmRvd246IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcywKCQkJCQkJYXR0YWNoZXMgPSBqUXVlcnkuX2RhdGEoIGRvYywgZml4ICkgLSAxOwoKCQkJCQlpZiAoICFhdHRhY2hlcyApIHsKCQkJCQkJZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTsKCQkJCQkJalF1ZXJ5Ll9yZW1vdmVEYXRhKCBkb2MsIGZpeCApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWpRdWVyeS5fZGF0YSggZG9jLCBmaXgsIGF0dGFjaGVzICk7CgkJCQkJfQoJCQkJfQoJCQl9OwoJCX0gKTsKCX0KCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgoJCW9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHsKCQkJcmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7CgkJfSwKCQlvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkgewoJCQlyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIDEgKTsKCQl9LAoJCW9mZjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZm4gKSB7CgkJCXZhciBoYW5kbGVPYmosIHR5cGU7CgkJCWlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkgewoKCQkJCS8vICggZXZlbnQgKSAgZGlzcGF0Y2hlZCBqUXVlcnkuRXZlbnQKCQkJCWhhbmRsZU9iaiA9IHR5cGVzLmhhbmRsZU9iajsKCQkJCWpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoCgkJCQkJaGFuZGxlT2JqLm5hbWVzcGFjZSA/CgkJCQkJCWhhbmRsZU9iai5vcmlnVHlwZSArICIuIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOgoJCQkJCQloYW5kbGVPYmoub3JpZ1R5cGUsCgkJCQkJaGFuZGxlT2JqLnNlbGVjdG9yLAoJCQkJCWhhbmRsZU9iai5oYW5kbGVyCgkJCQkpOwoJCQkJcmV0dXJuIHRoaXM7CgkJCX0KCQkJaWYgKCB0eXBlb2YgdHlwZXMgPT09ICJvYmplY3QiICkgewoKCQkJCS8vICggdHlwZXMtb2JqZWN0IFssIHNlbGVjdG9yXSApCgkJCQlmb3IgKCB0eXBlIGluIHR5cGVzICkgewoJCQkJCXRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApOwoJCQkJfQoJCQkJcmV0dXJuIHRoaXM7CgkJCX0KCQkJaWYgKCBzZWxlY3RvciA9PT0gZmFsc2UgfHwgdHlwZW9mIHNlbGVjdG9yID09PSAiZnVuY3Rpb24iICkgewoKCQkJCS8vICggdHlwZXMgWywgZm5dICkKCQkJCWZuID0gc2VsZWN0b3I7CgkJCQlzZWxlY3RvciA9IHVuZGVmaW5lZDsKCQkJfQoJCQlpZiAoIGZuID09PSBmYWxzZSApIHsKCQkJCWZuID0gcmV0dXJuRmFsc2U7CgkJCX0KCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7CgkJCX0gKTsKCQl9LAoKCQl0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgdGhpcyApOwoJCQl9ICk7CgkJfSwKCQl0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7CgkJCXZhciBlbGVtID0gdGhpc1sgMCBdOwoJCQlpZiAoIGVsZW0gKSB7CgkJCQlyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTsKCQkJfQoJCX0KCX0gKTsKCgoJdmFyIHJpbmxpbmVqUXVlcnkgPSAvIGpRdWVyeVxkKz0iKD86bnVsbHxcZCspIi9nLAoJCXJub3NoaW1jYWNoZSA9IG5ldyBSZWdFeHAoICI8KD86IiArIG5vZGVOYW1lcyArICIpW1xccy8+XSIsICJpIiApLAoJCXJ4aHRtbFRhZyA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLAoKCQkvLyBTdXBwb3J0OiBJRSAxMC0xMSwgRWRnZSAxMDI0MCsKCQkvLyBJbiBJRS9FZGdlIHVzaW5nIHJlZ2V4IGdyb3VwcyBoZXJlIGNhdXNlcyBzZXZlcmUgc2xvd2Rvd25zLgoJCS8vIFNlZSBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzE3MzY1MTIvCgkJcm5vSW5uZXJodG1sID0gLzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksCgoJCS8vIGNoZWNrZWQ9ImNoZWNrZWQiIG9yIGNoZWNrZWQKCQlyY2hlY2tlZCA9IC9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLAoJCXJzY3JpcHRUeXBlTWFza2VkID0gL150cnVlXC8oLiopLywKCQlyY2xlYW5TY3JpcHQgPSAvXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csCgkJc2FmZUZyYWdtZW50ID0gY3JlYXRlU2FmZUZyYWdtZW50KCBkb2N1bWVudCApLAoJCWZyYWdtZW50RGl2ID0gc2FmZUZyYWdtZW50LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApICk7CgoJLy8gU3VwcG9ydDogSUU8OAoJLy8gTWFuaXB1bGF0aW5nIHRhYmxlcyByZXF1aXJlcyBhIHRib2R5CglmdW5jdGlvbiBtYW5pcHVsYXRpb25UYXJnZXQoIGVsZW0sIGNvbnRlbnQgKSB7CgkJcmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgInRhYmxlIiApICYmCgkJCWpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCAidHIiICkgPwoKCQkJZWxlbS5nZXRFbGVtZW50c0J5VGFnTmFtZSggInRib2R5IiApWyAwIF0gfHwKCQkJCWVsZW0uYXBwZW5kQ2hpbGQoIGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCAidGJvZHkiICkgKSA6CgkJCWVsZW07Cgl9CgoJLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvbgoJZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHsKCQllbGVtLnR5cGUgPSAoIGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sICJ0eXBlIiApICE9PSBudWxsICkgKyAiLyIgKyBlbGVtLnR5cGU7CgkJcmV0dXJuIGVsZW07Cgl9CglmdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkgewoJCXZhciBtYXRjaCA9IHJzY3JpcHRUeXBlTWFza2VkLmV4ZWMoIGVsZW0udHlwZSApOwoJCWlmICggbWF0Y2ggKSB7CgkJCWVsZW0udHlwZSA9IG1hdGNoWyAxIF07CgkJfSBlbHNlIHsKCQkJZWxlbS5yZW1vdmVBdHRyaWJ1dGUoICJ0eXBlIiApOwoJCX0KCQlyZXR1cm4gZWxlbTsKCX0KCglmdW5jdGlvbiBjbG9uZUNvcHlFdmVudCggc3JjLCBkZXN0ICkgewoJCWlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSB8fCAhalF1ZXJ5Lmhhc0RhdGEoIHNyYyApICkgewoJCQlyZXR1cm47CgkJfQoKCQl2YXIgdHlwZSwgaSwgbCwKCQkJb2xkRGF0YSA9IGpRdWVyeS5fZGF0YSggc3JjICksCgkJCWN1ckRhdGEgPSBqUXVlcnkuX2RhdGEoIGRlc3QsIG9sZERhdGEgKSwKCQkJZXZlbnRzID0gb2xkRGF0YS5ldmVudHM7CgoJCWlmICggZXZlbnRzICkgewoJCQlkZWxldGUgY3VyRGF0YS5oYW5kbGU7CgkJCWN1ckRhdGEuZXZlbnRzID0ge307CgoJCQlmb3IgKCB0eXBlIGluIGV2ZW50cyApIHsKCQkJCWZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkgewoJCQkJCWpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gbWFrZSB0aGUgY2xvbmVkIHB1YmxpYyBkYXRhIG9iamVjdCBhIGNvcHkgZnJvbSB0aGUgb3JpZ2luYWwKCQlpZiAoIGN1ckRhdGEuZGF0YSApIHsKCQkJY3VyRGF0YS5kYXRhID0galF1ZXJ5LmV4dGVuZCgge30sIGN1ckRhdGEuZGF0YSApOwoJCX0KCX0KCglmdW5jdGlvbiBmaXhDbG9uZU5vZGVJc3N1ZXMoIHNyYywgZGVzdCApIHsKCQl2YXIgbm9kZU5hbWUsIGUsIGRhdGE7CgoJCS8vIFdlIGRvIG5vdCBuZWVkIHRvIGRvIGFueXRoaW5nIGZvciBub24tRWxlbWVudHMKCQlpZiAoIGRlc3Qubm9kZVR5cGUgIT09IDEgKSB7CgkJCXJldHVybjsKCQl9CgoJCW5vZGVOYW1lID0gZGVzdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoKCQkvLyBJRTYtOCBjb3BpZXMgZXZlbnRzIGJvdW5kIHZpYSBhdHRhY2hFdmVudCB3aGVuIHVzaW5nIGNsb25lTm9kZS4KCQlpZiAoICFzdXBwb3J0Lm5vQ2xvbmVFdmVudCAmJiBkZXN0WyBqUXVlcnkuZXhwYW5kbyBdICkgewoJCQlkYXRhID0galF1ZXJ5Ll9kYXRhKCBkZXN0ICk7CgoJCQlmb3IgKCBlIGluIGRhdGEuZXZlbnRzICkgewoJCQkJalF1ZXJ5LnJlbW92ZUV2ZW50KCBkZXN0LCBlLCBkYXRhLmhhbmRsZSApOwoJCQl9CgoJCQkvLyBFdmVudCBkYXRhIGdldHMgcmVmZXJlbmNlZCBpbnN0ZWFkIG9mIGNvcGllZCBpZiB0aGUgZXhwYW5kbyBnZXRzIGNvcGllZCB0b28KCQkJZGVzdC5yZW1vdmVBdHRyaWJ1dGUoIGpRdWVyeS5leHBhbmRvICk7CgkJfQoKCQkvLyBJRSBibGFua3MgY29udGVudHMgd2hlbiBjbG9uaW5nIHNjcmlwdHMsIGFuZCB0cmllcyB0byBldmFsdWF0ZSBuZXdseS1zZXQgdGV4dAoJCWlmICggbm9kZU5hbWUgPT09ICJzY3JpcHQiICYmIGRlc3QudGV4dCAhPT0gc3JjLnRleHQgKSB7CgkJCWRpc2FibGVTY3JpcHQoIGRlc3QgKS50ZXh0ID0gc3JjLnRleHQ7CgkJCXJlc3RvcmVTY3JpcHQoIGRlc3QgKTsKCgkJLy8gSUU2LTEwIGltcHJvcGVybHkgY2xvbmVzIGNoaWxkcmVuIG9mIG9iamVjdCBlbGVtZW50cyB1c2luZyBjbGFzc2lkLgoJCS8vIElFMTAgdGhyb3dzIE5vTW9kaWZpY2F0aW9uQWxsb3dlZEVycm9yIGlmIHBhcmVudCBpcyBudWxsLCAjMTIxMzIuCgkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJvYmplY3QiICkgewoJCQlpZiAoIGRlc3QucGFyZW50Tm9kZSApIHsKCQkJCWRlc3Qub3V0ZXJIVE1MID0gc3JjLm91dGVySFRNTDsKCQkJfQoKCQkJLy8gVGhpcyBwYXRoIGFwcGVhcnMgdW5hdm9pZGFibGUgZm9yIElFOS4gV2hlbiBjbG9uaW5nIGFuIG9iamVjdAoJCQkvLyBlbGVtZW50IGluIElFOSwgdGhlIG91dGVySFRNTCBzdHJhdGVneSBhYm92ZSBpcyBub3Qgc3VmZmljaWVudC4KCQkJLy8gSWYgdGhlIHNyYyBoYXMgaW5uZXJIVE1MIGFuZCB0aGUgZGVzdGluYXRpb24gZG9lcyBub3QsCgkJCS8vIGNvcHkgdGhlIHNyYy5pbm5lckhUTUwgaW50byB0aGUgZGVzdC5pbm5lckhUTUwuICMxMDMyNAoJCQlpZiAoIHN1cHBvcnQuaHRtbDVDbG9uZSAmJiAoIHNyYy5pbm5lckhUTUwgJiYgIWpRdWVyeS50cmltKCBkZXN0LmlubmVySFRNTCApICkgKSB7CgkJCQlkZXN0LmlubmVySFRNTCA9IHNyYy5pbm5lckhUTUw7CgkJCX0KCgkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJpbnB1dCIgJiYgcmNoZWNrYWJsZVR5cGUudGVzdCggc3JjLnR5cGUgKSApIHsKCgkJCS8vIElFNi04IGZhaWxzIHRvIHBlcnNpc3QgdGhlIGNoZWNrZWQgc3RhdGUgb2YgYSBjbG9uZWQgY2hlY2tib3gKCQkJLy8gb3IgcmFkaW8gYnV0dG9uLiBXb3JzZSwgSUU2LTcgZmFpbCB0byBnaXZlIHRoZSBjbG9uZWQgZWxlbWVudAoJCQkvLyBhIGNoZWNrZWQgYXBwZWFyYW5jZSBpZiB0aGUgZGVmYXVsdENoZWNrZWQgdmFsdWUgaXNuJ3QgYWxzbyBzZXQKCgkJCWRlc3QuZGVmYXVsdENoZWNrZWQgPSBkZXN0LmNoZWNrZWQgPSBzcmMuY2hlY2tlZDsKCgkJCS8vIElFNi03IGdldCBjb25mdXNlZCBhbmQgZW5kIHVwIHNldHRpbmcgdGhlIHZhbHVlIG9mIGEgY2xvbmVkCgkJCS8vIGNoZWNrYm94L3JhZGlvIGJ1dHRvbiB0byBhbiBlbXB0eSBzdHJpbmcgaW5zdGVhZCBvZiAib24iCgkJCWlmICggZGVzdC52YWx1ZSAhPT0gc3JjLnZhbHVlICkgewoJCQkJZGVzdC52YWx1ZSA9IHNyYy52YWx1ZTsKCQkJfQoKCQkvLyBJRTYtOCBmYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZAoJCS8vIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zCgkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJvcHRpb24iICkgewoJCQlkZXN0LmRlZmF1bHRTZWxlY3RlZCA9IGRlc3Quc2VsZWN0ZWQgPSBzcmMuZGVmYXVsdFNlbGVjdGVkOwoKCQkvLyBJRTYtOCBmYWlscyB0byBzZXQgdGhlIGRlZmF1bHRWYWx1ZSB0byB0aGUgY29ycmVjdCB2YWx1ZSB3aGVuCgkJLy8gY2xvbmluZyBvdGhlciB0eXBlcyBvZiBpbnB1dCBmaWVsZHMKCQl9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gImlucHV0IiB8fCBub2RlTmFtZSA9PT0gInRleHRhcmVhIiApIHsKCQkJZGVzdC5kZWZhdWx0VmFsdWUgPSBzcmMuZGVmYXVsdFZhbHVlOwoJCX0KCX0KCglmdW5jdGlvbiBkb21NYW5pcCggY29sbGVjdGlvbiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKSB7CgoJCS8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXMKCQlhcmdzID0gY29uY2F0LmFwcGx5KCBbXSwgYXJncyApOwoKCQl2YXIgZmlyc3QsIG5vZGUsIGhhc1NjcmlwdHMsCgkJCXNjcmlwdHMsIGRvYywgZnJhZ21lbnQsCgkJCWkgPSAwLAoJCQlsID0gY29sbGVjdGlvbi5sZW5ndGgsCgkJCWlOb0Nsb25lID0gbCAtIDEsCgkJCXZhbHVlID0gYXJnc1sgMCBdLAoJCQlpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7CgoJCS8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdAoJCWlmICggaXNGdW5jdGlvbiB8fAoJCQkJKCBsID4gMSAmJiB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciICYmCgkJCQkJIXN1cHBvcnQuY2hlY2tDbG9uZSAmJiByY2hlY2tlZC50ZXN0KCB2YWx1ZSApICkgKSB7CgkJCXJldHVybiBjb2xsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHsKCQkJCXZhciBzZWxmID0gY29sbGVjdGlvbi5lcSggaW5kZXggKTsKCQkJCWlmICggaXNGdW5jdGlvbiApIHsKCQkJCQlhcmdzWyAwIF0gPSB2YWx1ZS5jYWxsKCB0aGlzLCBpbmRleCwgc2VsZi5odG1sKCkgKTsKCQkJCX0KCQkJCWRvbU1hbmlwKCBzZWxmLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApOwoJCQl9ICk7CgkJfQoKCQlpZiAoIGwgKSB7CgkJCWZyYWdtZW50ID0gYnVpbGRGcmFnbWVudCggYXJncywgY29sbGVjdGlvblsgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCBjb2xsZWN0aW9uLCBpZ25vcmVkICk7CgkJCWZpcnN0ID0gZnJhZ21lbnQuZmlyc3RDaGlsZDsKCgkJCWlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7CgkJCQlmcmFnbWVudCA9IGZpcnN0OwoJCQl9CgoJCQkvLyBSZXF1aXJlIGVpdGhlciBuZXcgY29udGVudCBvciBhbiBpbnRlcmVzdCBpbiBpZ25vcmVkIGVsZW1lbnRzIHRvIGludm9rZSB0aGUgY2FsbGJhY2sKCQkJaWYgKCBmaXJzdCB8fCBpZ25vcmVkICkgewoJCQkJc2NyaXB0cyA9IGpRdWVyeS5tYXAoIGdldEFsbCggZnJhZ21lbnQsICJzY3JpcHQiICksIGRpc2FibGVTY3JpcHQgKTsKCQkJCWhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDsKCgkJCQkvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtCgkJCQkvLyBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBiZWNhdXNlIGl0IGNhbiBlbmQgdXAKCQkJCS8vIGJlaW5nIGVtcHRpZWQgaW5jb3JyZWN0bHkgaW4gY2VydGFpbiBzaXR1YXRpb25zICgjODA3MCkuCgkJCQlmb3IgKCA7IGkgPCBsOyBpKysgKSB7CgkJCQkJbm9kZSA9IGZyYWdtZW50OwoKCQkJCQlpZiAoIGkgIT09IGlOb0Nsb25lICkgewoJCQkJCQlub2RlID0galF1ZXJ5LmNsb25lKCBub2RlLCB0cnVlLCB0cnVlICk7CgoJCQkJCQkvLyBLZWVwIHJlZmVyZW5jZXMgdG8gY2xvbmVkIHNjcmlwdHMgZm9yIGxhdGVyIHJlc3RvcmF0aW9uCgkJCQkJCWlmICggaGFzU2NyaXB0cyApIHsKCgkJCQkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgUGhhbnRvbUpTPDIKCQkJCQkJCS8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXQKCQkJCQkJCWpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCAic2NyaXB0IiApICk7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWNhbGxiYWNrLmNhbGwoIGNvbGxlY3Rpb25bIGkgXSwgbm9kZSwgaSApOwoJCQkJfQoKCQkJCWlmICggaGFzU2NyaXB0cyApIHsKCQkJCQlkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50OwoKCQkJCQkvLyBSZWVuYWJsZSBzY3JpcHRzCgkJCQkJalF1ZXJ5Lm1hcCggc2NyaXB0cywgcmVzdG9yZVNjcmlwdCApOwoKCQkJCQkvLyBFdmFsdWF0ZSBleGVjdXRhYmxlIHNjcmlwdHMgb24gZmlyc3QgZG9jdW1lbnQgaW5zZXJ0aW9uCgkJCQkJZm9yICggaSA9IDA7IGkgPCBoYXNTY3JpcHRzOyBpKysgKSB7CgkJCQkJCW5vZGUgPSBzY3JpcHRzWyBpIF07CgkJCQkJCWlmICggcnNjcmlwdFR5cGUudGVzdCggbm9kZS50eXBlIHx8ICIiICkgJiYKCQkJCQkJCSFqUXVlcnkuX2RhdGEoIG5vZGUsICJnbG9iYWxFdmFsIiApICYmCgkJCQkJCQlqUXVlcnkuY29udGFpbnMoIGRvYywgbm9kZSApICkgewoKCQkJCQkJCWlmICggbm9kZS5zcmMgKSB7CgoJCQkJCQkJCS8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50CgkJCQkJCQkJaWYgKCBqUXVlcnkuX2V2YWxVcmwgKSB7CgkJCQkJCQkJCWpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMgKTsKCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWpRdWVyeS5nbG9iYWxFdmFsKAoJCQkJCQkJCQkoIG5vZGUudGV4dCB8fCBub2RlLnRleHRDb250ZW50IHx8IG5vZGUuaW5uZXJIVE1MIHx8ICIiICkKCQkJCQkJCQkJCS5yZXBsYWNlKCByY2xlYW5TY3JpcHQsICIiICkKCQkJCQkJCQkpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCS8vIEZpeCAjMTE4MDk6IEF2b2lkIGxlYWtpbmcgbWVtb3J5CgkJCQlmcmFnbWVudCA9IGZpcnN0ID0gbnVsbDsKCQkJfQoJCX0KCgkJcmV0dXJuIGNvbGxlY3Rpb247Cgl9CgoJZnVuY3Rpb24gcmVtb3ZlKCBlbGVtLCBzZWxlY3Rvciwga2VlcERhdGEgKSB7CgkJdmFyIG5vZGUsCgkJCWVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgZWxlbSApIDogZWxlbSwKCQkJaSA9IDA7CgoJCWZvciAoIDsgKCBub2RlID0gZWxlbXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCgkJCWlmICggIWtlZXBEYXRhICYmIG5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIG5vZGUgKSApOwoJCQl9CgoJCQlpZiAoIG5vZGUucGFyZW50Tm9kZSApIHsKCQkJCWlmICgga2VlcERhdGEgJiYgalF1ZXJ5LmNvbnRhaW5zKCBub2RlLm93bmVyRG9jdW1lbnQsIG5vZGUgKSApIHsKCQkJCQlzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIG5vZGUsICJzY3JpcHQiICkgKTsKCQkJCX0KCQkJCW5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggbm9kZSApOwoJCQl9CgkJfQoKCQlyZXR1cm4gZWxlbTsKCX0KCglqUXVlcnkuZXh0ZW5kKCB7CgkJaHRtbFByZWZpbHRlcjogZnVuY3Rpb24oIGh0bWwgKSB7CgkJCXJldHVybiBodG1sLnJlcGxhY2UoIHJ4aHRtbFRhZywgIjwkMT48LyQyPiIgKTsKCQl9LAoKCQljbG9uZTogZnVuY3Rpb24oIGVsZW0sIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkgewoJCQl2YXIgZGVzdEVsZW1lbnRzLCBub2RlLCBjbG9uZSwgaSwgc3JjRWxlbWVudHMsCgkJCQlpblBhZ2UgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApOwoKCQkJaWYgKCBzdXBwb3J0Lmh0bWw1Q2xvbmUgfHwgalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgfHwKCQkJCSFybm9zaGltY2FjaGUudGVzdCggIjwiICsgZWxlbS5ub2RlTmFtZSArICI+IiApICkgewoKCQkJCWNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKTsKCgkJCS8vIElFPD04IGRvZXMgbm90IHByb3Blcmx5IGNsb25lIGRldGFjaGVkLCB1bmtub3duIGVsZW1lbnQgbm9kZXMKCQkJfSBlbHNlIHsKCQkJCWZyYWdtZW50RGl2LmlubmVySFRNTCA9IGVsZW0ub3V0ZXJIVE1MOwoJCQkJZnJhZ21lbnREaXYucmVtb3ZlQ2hpbGQoIGNsb25lID0gZnJhZ21lbnREaXYuZmlyc3RDaGlsZCApOwoJCQl9CgoJCQlpZiAoICggIXN1cHBvcnQubm9DbG9uZUV2ZW50IHx8ICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICkgJiYKCQkJCQkoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgZWxlbS5ub2RlVHlwZSA9PT0gMTEgKSAmJiAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7CgoJCQkJLy8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzIKCQkJCWRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTsKCQkJCXNyY0VsZW1lbnRzID0gZ2V0QWxsKCBlbGVtICk7CgoJCQkJLy8gRml4IGFsbCBJRSBjbG9uaW5nIGlzc3VlcwoJCQkJZm9yICggaSA9IDA7ICggbm9kZSA9IHNyY0VsZW1lbnRzWyBpIF0gKSAhPSBudWxsOyArK2kgKSB7CgoJCQkJCS8vIEVuc3VyZSB0aGF0IHRoZSBkZXN0aW5hdGlvbiBub2RlIGlzIG5vdCBudWxsOyBGaXhlcyAjOTU4NwoJCQkJCWlmICggZGVzdEVsZW1lbnRzWyBpIF0gKSB7CgkJCQkJCWZpeENsb25lTm9kZUlzc3Vlcyggbm9kZSwgZGVzdEVsZW1lbnRzWyBpIF0gKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCS8vIENvcHkgdGhlIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCB0byB0aGUgY2xvbmUKCQkJaWYgKCBkYXRhQW5kRXZlbnRzICkgewoJCQkJaWYgKCBkZWVwRGF0YUFuZEV2ZW50cyApIHsKCQkJCQlzcmNFbGVtZW50cyA9IHNyY0VsZW1lbnRzIHx8IGdldEFsbCggZWxlbSApOwoJCQkJCWRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7CgoJCQkJCWZvciAoIGkgPSAwOyAoIG5vZGUgPSBzcmNFbGVtZW50c1sgaSBdICkgIT0gbnVsbDsgaSsrICkgewoJCQkJCQljbG9uZUNvcHlFdmVudCggbm9kZSwgZGVzdEVsZW1lbnRzWyBpIF0gKTsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCWNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApOwoJCQkJfQoJCQl9CgoJCQkvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5CgkJCWRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsICJzY3JpcHQiICk7CgkJCWlmICggZGVzdEVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7CgkJCQlzZXRHbG9iYWxFdmFsKCBkZXN0RWxlbWVudHMsICFpblBhZ2UgJiYgZ2V0QWxsKCBlbGVtLCAic2NyaXB0IiApICk7CgkJCX0KCgkJCWRlc3RFbGVtZW50cyA9IHNyY0VsZW1lbnRzID0gbm9kZSA9IG51bGw7CgoJCQkvLyBSZXR1cm4gdGhlIGNsb25lZCBzZXQKCQkJcmV0dXJuIGNsb25lOwoJCX0sCgoJCWNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zLCAvKiBpbnRlcm5hbCAqLyBmb3JjZUFjY2VwdERhdGEgKSB7CgkJCXZhciBlbGVtLCB0eXBlLCBpZCwgZGF0YSwKCQkJCWkgPSAwLAoJCQkJaW50ZXJuYWxLZXkgPSBqUXVlcnkuZXhwYW5kbywKCQkJCWNhY2hlID0galF1ZXJ5LmNhY2hlLAoJCQkJYXR0cmlidXRlcyA9IHN1cHBvcnQuYXR0cmlidXRlcywKCQkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbDsKCgkJCWZvciAoIDsgKCBlbGVtID0gZWxlbXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCQkJCWlmICggZm9yY2VBY2NlcHREYXRhIHx8IGFjY2VwdERhdGEoIGVsZW0gKSApIHsKCgkJCQkJaWQgPSBlbGVtWyBpbnRlcm5hbEtleSBdOwoJCQkJCWRhdGEgPSBpZCAmJiBjYWNoZVsgaWQgXTsKCgkJCQkJaWYgKCBkYXRhICkgewoJCQkJCQlpZiAoIGRhdGEuZXZlbnRzICkgewoJCQkJCQkJZm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHsKCQkJCQkJCQlpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHsKCQkJCQkJCQkJalF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSApOwoKCQkJCQkJCQkvLyBUaGlzIGlzIGEgc2hvcnRjdXQgdG8gYXZvaWQgalF1ZXJ5LmV2ZW50LnJlbW92ZSdzIG92ZXJoZWFkCgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJalF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJLy8gUmVtb3ZlIGNhY2hlIG9ubHkgaWYgaXQgd2FzIG5vdCBhbHJlYWR5IHJlbW92ZWQgYnkgalF1ZXJ5LmV2ZW50LnJlbW92ZQoJCQkJCQlpZiAoIGNhY2hlWyBpZCBdICkgewoKCQkJCQkJCWRlbGV0ZSBjYWNoZVsgaWQgXTsKCgkJCQkJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCQkJCQkvLyBJRSBkb2VzIG5vdCBhbGxvdyB1cyB0byBkZWxldGUgZXhwYW5kbyBwcm9wZXJ0aWVzIGZyb20gbm9kZXMKCQkJCQkJCS8vIElFIGNyZWF0ZXMgZXhwYW5kbyBhdHRyaWJ1dGVzIGFsb25nIHdpdGggdGhlIHByb3BlcnR5CgkJCQkJCQkvLyBJRSBkb2VzIG5vdCBoYXZlIGEgcmVtb3ZlQXR0cmlidXRlIGZ1bmN0aW9uIG9uIERvY3VtZW50IG5vZGVzCgkJCQkJCQlpZiAoICFhdHRyaWJ1dGVzICYmIHR5cGVvZiBlbGVtLnJlbW92ZUF0dHJpYnV0ZSAhPT0gInVuZGVmaW5lZCIgKSB7CgkJCQkJCQkJZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIGludGVybmFsS2V5ICk7CgoJCQkJCQkJLy8gV2Via2l0ICYgQmxpbmsgcGVyZm9ybWFuY2Ugc3VmZmVycyB3aGVuIGRlbGV0aW5nIHByb3BlcnRpZXMKCQkJCQkJCS8vIGZyb20gRE9NIG5vZGVzLCBzbyBzZXQgdG8gdW5kZWZpbmVkIGluc3RlYWQKCQkJCQkJCS8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNzg2MDcKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJZWxlbVsgaW50ZXJuYWxLZXkgXSA9IHVuZGVmaW5lZDsKCQkJCQkJCX0KCgkJCQkJCQlkZWxldGVkSWRzLnB1c2goIGlkICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9ICk7CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoKCQkvLyBLZWVwIGRvbU1hbmlwIGV4cG9zZWQgdW50aWwgMy4wIChnaC0yMjI1KQoJCWRvbU1hbmlwOiBkb21NYW5pcCwKCgkJZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yLCB0cnVlICk7CgkJfSwKCgkJcmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJCXJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yICk7CgkJfSwKCgkJdGV4dDogZnVuY3Rpb24oIHZhbHVlICkgewoJCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCQlyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/CgkJCQkJalF1ZXJ5LnRleHQoIHRoaXMgKSA6CgkJCQkJdGhpcy5lbXB0eSgpLmFwcGVuZCgKCQkJCQkJKCB0aGlzWyAwIF0gJiYgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKS5jcmVhdGVUZXh0Tm9kZSggdmFsdWUgKQoJCQkJCSk7CgkJCX0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7CgkJfSwKCgkJYXBwZW5kOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJaWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7CgkJCQkJdmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApOwoJCQkJCXRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApOwoJCQkJfQoJCQl9ICk7CgkJfSwKCgkJcHJlcGVuZDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCWlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkgewoJCQkJCXZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTsKCQkJCQl0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApOwoJCQkJfQoJCQl9ICk7CgkJfSwKCgkJYmVmb3JlOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJaWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7CgkJCQkJdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApOwoJCQkJfQoJCQl9ICk7CgkJfSwKCgkJYWZ0ZXI6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlpZiAoIHRoaXMucGFyZW50Tm9kZSApIHsKCQkJCQl0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzLm5leHRTaWJsaW5nICk7CgkJCQl9CgkJCX0gKTsKCQl9LAoKCQllbXB0eTogZnVuY3Rpb24oKSB7CgkJCXZhciBlbGVtLAoJCQkJaSA9IDA7CgoJCQlmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCgkJCQkvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3MKCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTsKCQkJCX0KCgkJCQkvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2RlcwoJCQkJd2hpbGUgKCBlbGVtLmZpcnN0Q2hpbGQgKSB7CgkJCQkJZWxlbS5yZW1vdmVDaGlsZCggZWxlbS5maXJzdENoaWxkICk7CgkJCQl9CgoJCQkJLy8gSWYgdGhpcyBpcyBhIHNlbGVjdCwgZW5zdXJlIHRoYXQgaXQgZGlzcGxheXMgZW1wdHkgKCMxMjMzNikKCQkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJCWlmICggZWxlbS5vcHRpb25zICYmIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgInNlbGVjdCIgKSApIHsKCQkJCQllbGVtLm9wdGlvbnMubGVuZ3RoID0gMDsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIHRoaXM7CgkJfSwKCgkJY2xvbmU6IGZ1bmN0aW9uKCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHsKCQkJZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50czsKCQkJZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzOwoKCQkJcmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHsKCQkJCXJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7CgkJCX0gKTsKCQl9LAoKCQlodG1sOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJCXZhciBlbGVtID0gdGhpc1sgMCBdIHx8IHt9LAoJCQkJCWkgPSAwLAoJCQkJCWwgPSB0aGlzLmxlbmd0aDsKCgkJCQlpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7CgkJCQkJcmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDEgPwoJCQkJCQllbGVtLmlubmVySFRNTC5yZXBsYWNlKCByaW5saW5lalF1ZXJ5LCAiIiApIDoKCQkJCQkJdW5kZWZpbmVkOwoJCQkJfQoKCQkJCS8vIFNlZSBpZiB3ZSBjYW4gdGFrZSBhIHNob3J0Y3V0IGFuZCBqdXN0IHVzZSBpbm5lckhUTUwKCQkJCWlmICggdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiAmJiAhcm5vSW5uZXJodG1sLnRlc3QoIHZhbHVlICkgJiYKCQkJCQkoIHN1cHBvcnQuaHRtbFNlcmlhbGl6ZSB8fCAhcm5vc2hpbWNhY2hlLnRlc3QoIHZhbHVlICkgICkgJiYKCQkJCQkoIHN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UgfHwgIXJsZWFkaW5nV2hpdGVzcGFjZS50ZXN0KCB2YWx1ZSApICkgJiYKCQkJCQkhd3JhcE1hcFsgKCBydGFnTmFtZS5leGVjKCB2YWx1ZSApIHx8IFsgIiIsICIiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHsKCgkJCQkJdmFsdWUgPSBqUXVlcnkuaHRtbFByZWZpbHRlciggdmFsdWUgKTsKCgkJCQkJdHJ5IHsKCQkJCQkJZm9yICggOyBpIDwgbDsgaSsrICkgewoKCQkJCQkJCS8vIFJlbW92ZSBlbGVtZW50IG5vZGVzIGFuZCBwcmV2ZW50IG1lbW9yeSBsZWFrcwoJCQkJCQkJZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTsKCQkJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJCQkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTsKCQkJCQkJCQllbGVtLmlubmVySFRNTCA9IHZhbHVlOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQllbGVtID0gMDsKCgkJCQkJLy8gSWYgdXNpbmcgaW5uZXJIVE1MIHRocm93cyBhbiBleGNlcHRpb24sIHVzZSB0aGUgZmFsbGJhY2sgbWV0aG9kCgkJCQkJfSBjYXRjaCAoIGUgKSB7fQoJCQkJfQoKCQkJCWlmICggZWxlbSApIHsKCQkJCQl0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApOwoJCQkJfQoJCQl9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApOwoJCX0sCgoJCXJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHsKCQkJdmFyIGlnbm9yZWQgPSBbXTsKCgkJCS8vIE1ha2UgdGhlIGNoYW5nZXMsIHJlcGxhY2luZyBlYWNoIG5vbi1pZ25vcmVkIGNvbnRleHQgZWxlbWVudCB3aXRoIHRoZSBuZXcgY29udGVudAoJCQlyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwoKCQkJCWlmICggalF1ZXJ5LmluQXJyYXkoIHRoaXMsIGlnbm9yZWQgKSA8IDAgKSB7CgkJCQkJalF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTsKCQkJCQlpZiAoIHBhcmVudCApIHsKCQkJCQkJcGFyZW50LnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApOwoJCQkJCX0KCQkJCX0KCgkJCS8vIEZvcmNlIGNhbGxiYWNrIGludm9jYXRpb24KCQkJfSwgaWdub3JlZCApOwoJCX0KCX0gKTsKCglqUXVlcnkuZWFjaCggewoJCWFwcGVuZFRvOiAiYXBwZW5kIiwKCQlwcmVwZW5kVG86ICJwcmVwZW5kIiwKCQlpbnNlcnRCZWZvcmU6ICJiZWZvcmUiLAoJCWluc2VydEFmdGVyOiAiYWZ0ZXIiLAoJCXJlcGxhY2VBbGw6ICJyZXBsYWNlV2l0aCIKCX0sIGZ1bmN0aW9uKCBuYW1lLCBvcmlnaW5hbCApIHsKCQlqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJdmFyIGVsZW1zLAoJCQkJaSA9IDAsCgkJCQlyZXQgPSBbXSwKCQkJCWluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSwKCQkJCWxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMTsKCgkJCWZvciAoIDsgaSA8PSBsYXN0OyBpKysgKSB7CgkJCQllbGVtcyA9IGkgPT09IGxhc3QgPyB0aGlzIDogdGhpcy5jbG9uZSggdHJ1ZSApOwoJCQkJalF1ZXJ5KCBpbnNlcnRbIGkgXSApWyBvcmlnaW5hbCBdKCBlbGVtcyApOwoKCQkJCS8vIE1vZGVybiBicm93c2VycyBjYW4gYXBwbHkgalF1ZXJ5IGNvbGxlY3Rpb25zIGFzIGFycmF5cywgYnV0IG9sZElFIG5lZWRzIGEgLmdldCgpCgkJCQlwdXNoLmFwcGx5KCByZXQsIGVsZW1zLmdldCgpICk7CgkJCX0KCgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7CgkJfTsKCX0gKTsKCgoJdmFyIGlmcmFtZSwKCQllbGVtZGlzcGxheSA9IHsKCgkJCS8vIFN1cHBvcnQ6IEZpcmVmb3gKCQkJLy8gV2UgaGF2ZSB0byBwcmUtZGVmaW5lIHRoZXNlIHZhbHVlcyBmb3IgRkYgKCMxMDIyNykKCQkJSFRNTDogImJsb2NrIiwKCQkJQk9EWTogImJsb2NrIgoJCX07CgoJLyoqCgkgKiBSZXRyaWV2ZSB0aGUgYWN0dWFsIGRpc3BsYXkgb2YgYSBlbGVtZW50CgkgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBub2RlTmFtZSBvZiB0aGUgZWxlbWVudAoJICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3QKCSAqLwoKCS8vIENhbGxlZCBvbmx5IGZyb20gd2l0aGluIGRlZmF1bHREaXNwbGF5CglmdW5jdGlvbiBhY3R1YWxEaXNwbGF5KCBuYW1lLCBkb2MgKSB7CgkJdmFyIGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSwKCgkJCWRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtWyAwIF0sICJkaXNwbGF5IiApOwoKCQkvLyBXZSBkb24ndCBoYXZlIGFueSBkYXRhIHN0b3JlZCBvbiB0aGUgZWxlbWVudCwKCQkvLyBzbyB1c2UgImRldGFjaCIgbWV0aG9kIGFzIGZhc3Qgd2F5IHRvIGdldCByaWQgb2YgdGhlIGVsZW1lbnQKCQllbGVtLmRldGFjaCgpOwoKCQlyZXR1cm4gZGlzcGxheTsKCX0KCgkvKioKCSAqIFRyeSB0byBkZXRlcm1pbmUgdGhlIGRlZmF1bHQgZGlzcGxheSB2YWx1ZSBvZiBhbiBlbGVtZW50CgkgKiBAcGFyYW0ge1N0cmluZ30gbm9kZU5hbWUKCSAqLwoJZnVuY3Rpb24gZGVmYXVsdERpc3BsYXkoIG5vZGVOYW1lICkgewoJCXZhciBkb2MgPSBkb2N1bWVudCwKCQkJZGlzcGxheSA9IGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdOwoKCQlpZiAoICFkaXNwbGF5ICkgewoJCQlkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApOwoKCQkJLy8gSWYgdGhlIHNpbXBsZSB3YXkgZmFpbHMsIHJlYWQgZnJvbSBpbnNpZGUgYW4gaWZyYW1lCgkJCWlmICggZGlzcGxheSA9PT0gIm5vbmUiIHx8ICFkaXNwbGF5ICkgewoKCQkJCS8vIFVzZSB0aGUgYWxyZWFkeS1jcmVhdGVkIGlmcmFtZSBpZiBwb3NzaWJsZQoJCQkJaWZyYW1lID0gKCBpZnJhbWUgfHwgalF1ZXJ5KCAiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIgKSApCgkJCQkJLmFwcGVuZFRvKCBkb2MuZG9jdW1lbnRFbGVtZW50ICk7CgoJCQkJLy8gQWx3YXlzIHdyaXRlIGEgbmV3IEhUTUwgc2tlbGV0b24gc28gV2Via2l0IGFuZCBGaXJlZm94IGRvbid0IGNob2tlIG9uIHJldXNlCgkJCQlkb2MgPSAoIGlmcmFtZVsgMCBdLmNvbnRlbnRXaW5kb3cgfHwgaWZyYW1lWyAwIF0uY29udGVudERvY3VtZW50ICkuZG9jdW1lbnQ7CgoJCQkJLy8gU3VwcG9ydDogSUUKCQkJCWRvYy53cml0ZSgpOwoJCQkJZG9jLmNsb3NlKCk7CgoJCQkJZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTsKCQkJCWlmcmFtZS5kZXRhY2goKTsKCQkJfQoKCQkJLy8gU3RvcmUgdGhlIGNvcnJlY3QgZGVmYXVsdCBkaXNwbGF5CgkJCWVsZW1kaXNwbGF5WyBub2RlTmFtZSBdID0gZGlzcGxheTsKCQl9CgoJCXJldHVybiBkaXNwbGF5OwoJfQoJdmFyIHJtYXJnaW4gPSAoIC9ebWFyZ2luLyApOwoKCXZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCAiXigiICsgcG51bSArICIpKD8hcHgpW2EteiVdKyQiLCAiaSIgKTsKCgl2YXIgc3dhcCA9IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHsKCQl2YXIgcmV0LCBuYW1lLAoJCQlvbGQgPSB7fTsKCgkJLy8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzCgkJZm9yICggbmFtZSBpbiBvcHRpb25zICkgewoJCQlvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTsKCQkJZWxlbS5zdHlsZVsgbmFtZSBdID0gb3B0aW9uc1sgbmFtZSBdOwoJCX0KCgkJcmV0ID0gY2FsbGJhY2suYXBwbHkoIGVsZW0sIGFyZ3MgfHwgW10gKTsKCgkJLy8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzCgkJZm9yICggbmFtZSBpbiBvcHRpb25zICkgewoJCQllbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTsKCQl9CgoJCXJldHVybiByZXQ7Cgl9OwoKCgl2YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoKCgoJKCBmdW5jdGlvbigpIHsKCQl2YXIgcGl4ZWxQb3NpdGlvblZhbCwgcGl4ZWxNYXJnaW5SaWdodFZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsCgkJCXJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCwgcmVsaWFibGVNYXJnaW5SaWdodFZhbCwgcmVsaWFibGVNYXJnaW5MZWZ0VmFsLAoJCQljb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApLAoJCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoKCQkvLyBGaW5pc2ggZWFybHkgaW4gbGltaXRlZCAobm9uLWJyb3dzZXIpIGVudmlyb25tZW50cwoJCWlmICggIWRpdi5zdHlsZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJZGl2LnN0eWxlLmNzc1RleHQgPSAiZmxvYXQ6bGVmdDtvcGFjaXR5Oi41IjsKCgkJLy8gU3VwcG9ydDogSUU8OQoJCS8vIE1ha2Ugc3VyZSB0aGF0IGVsZW1lbnQgb3BhY2l0eSBleGlzdHMgKGFzIG9wcG9zZWQgdG8gZmlsdGVyKQoJCXN1cHBvcnQub3BhY2l0eSA9IGRpdi5zdHlsZS5vcGFjaXR5ID09PSAiMC41IjsKCgkJLy8gVmVyaWZ5IHN0eWxlIGZsb2F0IGV4aXN0ZW5jZQoJCS8vIChJRSB1c2VzIHN0eWxlRmxvYXQgaW5zdGVhZCBvZiBjc3NGbG9hdCkKCQlzdXBwb3J0LmNzc0Zsb2F0ID0gISFkaXYuc3R5bGUuY3NzRmxvYXQ7CgoJCWRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9ICJjb250ZW50LWJveCI7CgkJZGl2LmNsb25lTm9kZSggdHJ1ZSApLnN0eWxlLmJhY2tncm91bmRDbGlwID0gIiI7CgkJc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgPSBkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPT09ICJjb250ZW50LWJveCI7CgoJCWNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICk7CgkJY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSAiYm9yZGVyOjA7d2lkdGg6OHB4O2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDsiICsKCQkJInBhZGRpbmc6MDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZSI7CgkJZGl2LmlubmVySFRNTCA9ICIiOwoJCWNvbnRhaW5lci5hcHBlbmRDaGlsZCggZGl2ICk7CgoJCS8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zCgkJLy8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nCgkJc3VwcG9ydC5ib3hTaXppbmcgPSBkaXYuc3R5bGUuYm94U2l6aW5nID09PSAiIiB8fCBkaXYuc3R5bGUuTW96Qm94U2l6aW5nID09PSAiIiB8fAoJCQlkaXYuc3R5bGUuV2Via2l0Qm94U2l6aW5nID09PSAiIjsKCgkJalF1ZXJ5LmV4dGVuZCggc3VwcG9ydCwgewoJCQlyZWxpYWJsZUhpZGRlbk9mZnNldHM6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBwaXhlbFBvc2l0aW9uVmFsID09IG51bGwgKSB7CgkJCQkJY29tcHV0ZVN0eWxlVGVzdHMoKTsKCQkJCX0KCQkJCXJldHVybiByZWxpYWJsZUhpZGRlbk9mZnNldHNWYWw7CgkJCX0sCgoJCQlib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7CgoJCQkJLy8gV2UncmUgY2hlY2tpbmcgZm9yIHBpeGVsUG9zaXRpb25WYWwgaGVyZSBpbnN0ZWFkIG9mIGJveFNpemluZ1JlbGlhYmxlVmFsCgkJCQkvLyBzaW5jZSB0aGF0IGNvbXByZXNzZXMgYmV0dGVyIGFuZCB0aGV5J3JlIGNvbXB1dGVkIHRvZ2V0aGVyIGFueXdheS4KCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7CgkJCX0sCgoJCQlwaXhlbE1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHsKCgkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMC00LjMKCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gcGl4ZWxNYXJnaW5SaWdodFZhbDsKCQkJfSwKCgkJCXBpeGVsUG9zaXRpb246IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBwaXhlbFBvc2l0aW9uVmFsID09IG51bGwgKSB7CgkJCQkJY29tcHV0ZVN0eWxlVGVzdHMoKTsKCQkJCX0KCQkJCXJldHVybiBwaXhlbFBvc2l0aW9uVmFsOwoJCQl9LAoKCQkJcmVsaWFibGVNYXJnaW5SaWdodDogZnVuY3Rpb24oKSB7CgoJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMKCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gcmVsaWFibGVNYXJnaW5SaWdodFZhbDsKCQkJfSwKCgkJCXJlbGlhYmxlTWFyZ2luTGVmdDogZnVuY3Rpb24oKSB7CgoJCQkJLy8gU3VwcG9ydDogSUUgPD04IG9ubHksIEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIEZpcmVmb3ggPD0zIC0gMzcKCQkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCQl9CgkJCQlyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsOwoJCQl9CgkJfSApOwoKCQlmdW5jdGlvbiBjb21wdXRlU3R5bGVUZXN0cygpIHsKCQkJdmFyIGNvbnRlbnRzLCBkaXZTdHlsZSwKCQkJCWRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCgkJCS8vIFNldHVwCgkJCWRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggY29udGFpbmVyICk7CgoJCQlkaXYuc3R5bGUuY3NzVGV4dCA9CgoJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMKCQkJCS8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZwoJCQkJIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDsiICsKCQkJCSJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrOyIgKwoJCQkJIm1hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7IiArCgkJCQkidG9wOjElO3dpZHRoOjUwJSI7CgoJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCS8vIEFzc3VtZSByZWFzb25hYmxlIHZhbHVlcyBpbiB0aGUgYWJzZW5jZSBvZiBnZXRDb21wdXRlZFN0eWxlCgkJCXBpeGVsUG9zaXRpb25WYWwgPSBib3hTaXppbmdSZWxpYWJsZVZhbCA9IHJlbGlhYmxlTWFyZ2luTGVmdFZhbCA9IGZhbHNlOwoJCQlwaXhlbE1hcmdpblJpZ2h0VmFsID0gcmVsaWFibGVNYXJnaW5SaWdodFZhbCA9IHRydWU7CgoJCQkvLyBDaGVjayBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzbyB0aGF0IHRoaXMgY29kZSBpcyBub3QgcnVuIGluIElFPDkuCgkJCWlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7CgkJCQlkaXZTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBkaXYgKTsKCQkJCXBpeGVsUG9zaXRpb25WYWwgPSAoIGRpdlN0eWxlIHx8IHt9ICkudG9wICE9PSAiMSUiOwoJCQkJcmVsaWFibGVNYXJnaW5MZWZ0VmFsID0gKCBkaXZTdHlsZSB8fCB7fSApLm1hcmdpbkxlZnQgPT09ICIycHgiOwoJCQkJYm94U2l6aW5nUmVsaWFibGVWYWwgPSAoIGRpdlN0eWxlIHx8IHsgd2lkdGg6ICI0cHgiIH0gKS53aWR0aCA9PT0gIjRweCI7CgoJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seQoJCQkJLy8gU29tZSBzdHlsZXMgY29tZSBiYWNrIHdpdGggcGVyY2VudGFnZSB2YWx1ZXMsIGV2ZW4gdGhvdWdoIHRoZXkgc2hvdWxkbid0CgkJCQlkaXYuc3R5bGUubWFyZ2luUmlnaHQgPSAiNTAlIjsKCQkJCXBpeGVsTWFyZ2luUmlnaHRWYWwgPSAoIGRpdlN0eWxlIHx8IHsgbWFyZ2luUmlnaHQ6ICI0cHgiIH0gKS5tYXJnaW5SaWdodCA9PT0gIjRweCI7CgoJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMgb25seQoJCQkJLy8gRGl2IHdpdGggZXhwbGljaXQgd2lkdGggYW5kIG5vIG1hcmdpbi1yaWdodCBpbmNvcnJlY3RseQoJCQkJLy8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyICgjMzMzMykKCQkJCS8vIFdlYktpdCBCdWcgMTMzNDMgLSBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgd3JvbmcgdmFsdWUgZm9yIG1hcmdpbi1yaWdodAoJCQkJY29udGVudHMgPSBkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICkgKTsKCgkJCQkvLyBSZXNldCBDU1M6IGJveC1zaXppbmc7IGRpc3BsYXk7IG1hcmdpbjsgYm9yZGVyOyBwYWRkaW5nCgkJCQljb250ZW50cy5zdHlsZS5jc3NUZXh0ID0gZGl2LnN0eWxlLmNzc1RleHQgPQoKCQkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMwoJCQkJCS8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZwoJCQkJCSItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94OyIgKwoJCQkJCSJib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIjsKCQkJCWNvbnRlbnRzLnN0eWxlLm1hcmdpblJpZ2h0ID0gY29udGVudHMuc3R5bGUud2lkdGggPSAiMCI7CgkJCQlkaXYuc3R5bGUud2lkdGggPSAiMXB4IjsKCgkJCQlyZWxpYWJsZU1hcmdpblJpZ2h0VmFsID0KCQkJCQkhcGFyc2VGbG9hdCggKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggY29udGVudHMgKSB8fCB7fSApLm1hcmdpblJpZ2h0ICk7CgoJCQkJZGl2LnJlbW92ZUNoaWxkKCBjb250ZW50cyApOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRTYtOAoJCQkvLyBGaXJzdCBjaGVjayB0aGF0IGdldENsaWVudFJlY3RzIHdvcmtzIGFzIGV4cGVjdGVkCgkJCS8vIENoZWNrIGlmIHRhYmxlIGNlbGxzIHN0aWxsIGhhdmUgb2Zmc2V0V2lkdGgvSGVpZ2h0IHdoZW4gdGhleSBhcmUgc2V0CgkJCS8vIHRvIGRpc3BsYXk6bm9uZSBhbmQgdGhlcmUgYXJlIHN0aWxsIG90aGVyIHZpc2libGUgdGFibGUgY2VsbHMgaW4gYQoJCQkvLyB0YWJsZSByb3c7IGlmIHNvLCBvZmZzZXRXaWR0aC9IZWlnaHQgYXJlIG5vdCByZWxpYWJsZSBmb3IgdXNlIHdoZW4KCQkJLy8gZGV0ZXJtaW5pbmcgaWYgYW4gZWxlbWVudCBoYXMgYmVlbiBoaWRkZW4gZGlyZWN0bHkgdXNpbmcKCQkJLy8gZGlzcGxheTpub25lIChpdCBpcyBzdGlsbCBzYWZlIHRvIHVzZSBvZmZzZXRzIGlmIGEgcGFyZW50IGVsZW1lbnQgaXMKCQkJLy8gaGlkZGVuOyBkb24gc2FmZXR5IGdvZ2dsZXMgYW5kIHNlZSBidWcgIzQ1MTIgZm9yIG1vcmUgaW5mb3JtYXRpb24pLgoJCQlkaXYuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCQkJcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsID0gZGl2LmdldENsaWVudFJlY3RzKCkubGVuZ3RoID09PSAwOwoJCQlpZiAoIHJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCApIHsKCQkJCWRpdi5zdHlsZS5kaXNwbGF5ID0gIiI7CgkJCQlkaXYuaW5uZXJIVE1MID0gIjx0YWJsZT48dHI+PHRkPjwvdGQ+PHRkPnQ8L3RkPjwvdHI+PC90YWJsZT4iOwoJCQkJZGl2LmNoaWxkTm9kZXNbIDAgXS5zdHlsZS5ib3JkZXJDb2xsYXBzZSA9ICJzZXBhcmF0ZSI7CgkJCQljb250ZW50cyA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggInRkIiApOwoJCQkJY29udGVudHNbIDAgXS5zdHlsZS5jc3NUZXh0ID0gIm1hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MDtkaXNwbGF5Om5vbmUiOwoJCQkJcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsID0gY29udGVudHNbIDAgXS5vZmZzZXRIZWlnaHQgPT09IDA7CgkJCQlpZiAoIHJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCApIHsKCQkJCQljb250ZW50c1sgMCBdLnN0eWxlLmRpc3BsYXkgPSAiIjsKCQkJCQljb250ZW50c1sgMSBdLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkJCQkJcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsID0gY29udGVudHNbIDAgXS5vZmZzZXRIZWlnaHQgPT09IDA7CgkJCQl9CgkJCX0KCgkJCS8vIFRlYXJkb3duCgkJCWRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7CgkJfQoKCX0gKSgpOwoKCgl2YXIgZ2V0U3R5bGVzLCBjdXJDU1MsCgkJcnBvc2l0aW9uID0gL14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvOwoKCWlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7CgkJZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7CgoJCQkvLyBTdXBwb3J0OiBJRTw9MTErLCBGaXJlZm94PD0zMCsgKCMxNTA5OCwgIzE0MTUwKQoJCQkvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHMKCQkJLy8gRkYgbWVhbndoaWxlIHRocm93cyBvbiBmcmFtZSBlbGVtZW50cyB0aHJvdWdoICJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlIgoJCQl2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsKCgkJCWlmICggIXZpZXcgfHwgIXZpZXcub3BlbmVyICkgewoJCQkJdmlldyA9IHdpbmRvdzsKCQkJfQoKCQkJcmV0dXJuIHZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbSApOwoJCX07CgoJCWN1ckNTUyA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBjb21wdXRlZCApIHsKCQkJdmFyIHdpZHRoLCBtaW5XaWR0aCwgbWF4V2lkdGgsIHJldCwKCQkJCXN0eWxlID0gZWxlbS5zdHlsZTsKCgkJCWNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7CgoJCQkvLyBnZXRQcm9wZXJ0eVZhbHVlIGlzIG9ubHkgbmVlZGVkIGZvciAuY3NzKCdmaWx0ZXInKSBpbiBJRTksIHNlZSAjMTI1MzcKCQkJcmV0ID0gY29tcHV0ZWQgPyBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCBuYW1lICkgfHwgY29tcHV0ZWRbIG5hbWUgXSA6IHVuZGVmaW5lZDsKCgkJCS8vIFN1cHBvcnQ6IE9wZXJhIDEyLjF4IG9ubHkKCQkJLy8gRmFsbCBiYWNrIHRvIHN0eWxlIGV2ZW4gd2l0aG91dCBjb21wdXRlZAoJCQkvLyBjb21wdXRlZCBpcyB1bmRlZmluZWQgZm9yIGVsZW1zIG9uIGRvY3VtZW50IGZyYWdtZW50cwoJCQlpZiAoICggcmV0ID09PSAiIiB8fCByZXQgPT09IHVuZGVmaW5lZCApICYmICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkgewoJCQkJcmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7CgkJCX0KCgkJCWlmICggY29tcHV0ZWQgKSB7CgoJCQkJLy8gQSB0cmlidXRlIHRvIHRoZSAiYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkcyIKCQkJCS8vIENocm9tZSA8IDE3IGFuZCBTYWZhcmkgNS4wIHVzZXMgImNvbXB1dGVkIHZhbHVlIgoJCQkJLy8gaW5zdGVhZCBvZiAidXNlZCB2YWx1ZSIgZm9yIG1hcmdpbi1yaWdodAoJCQkJLy8gU2FmYXJpIDUuMS43IChhdCBsZWFzdCkgcmV0dXJucyBwZXJjZW50YWdlIGZvciBhIGxhcmdlciBzZXQgb2YgdmFsdWVzLAoJCQkJLy8gYnV0IHdpZHRoIHNlZW1zIHRvIGJlIHJlbGlhYmx5IHBpeGVscwoJCQkJLy8gdGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOgoJCQkJLy8gaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3Nzb20vI3Jlc29sdmVkLXZhbHVlcwoJCQkJaWYgKCAhc3VwcG9ydC5waXhlbE1hcmdpblJpZ2h0KCkgJiYgcm51bW5vbnB4LnRlc3QoIHJldCApICYmIHJtYXJnaW4udGVzdCggbmFtZSApICkgewoKCQkJCQkvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzCgkJCQkJd2lkdGggPSBzdHlsZS53aWR0aDsKCQkJCQltaW5XaWR0aCA9IHN0eWxlLm1pbldpZHRoOwoJCQkJCW1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7CgoJCQkJCS8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXQKCQkJCQlzdHlsZS5taW5XaWR0aCA9IHN0eWxlLm1heFdpZHRoID0gc3R5bGUud2lkdGggPSByZXQ7CgkJCQkJcmV0ID0gY29tcHV0ZWQud2lkdGg7CgoJCQkJCS8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXMKCQkJCQlzdHlsZS53aWR0aCA9IHdpZHRoOwoJCQkJCXN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7CgkJCQkJc3R5bGUubWF4V2lkdGggPSBtYXhXaWR0aDsKCQkJCX0KCQkJfQoKCQkJLy8gU3VwcG9ydDogSUUKCQkJLy8gSUUgcmV0dXJucyB6SW5kZXggdmFsdWUgYXMgYW4gaW50ZWdlci4KCQkJcmV0dXJuIHJldCA9PT0gdW5kZWZpbmVkID8KCQkJCXJldCA6CgkJCQlyZXQgKyAiIjsKCQl9OwoJfSBlbHNlIGlmICggZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSApIHsKCQlnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGVsZW0uY3VycmVudFN0eWxlOwoJCX07CgoJCWN1ckNTUyA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBjb21wdXRlZCApIHsKCQkJdmFyIGxlZnQsIHJzLCByc0xlZnQsIHJldCwKCQkJCXN0eWxlID0gZWxlbS5zdHlsZTsKCgkJCWNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7CgkJCXJldCA9IGNvbXB1dGVkID8gY29tcHV0ZWRbIG5hbWUgXSA6IHVuZGVmaW5lZDsKCgkJCS8vIEF2b2lkIHNldHRpbmcgcmV0IHRvIGVtcHR5IHN0cmluZyBoZXJlCgkJCS8vIHNvIHdlIGRvbid0IGRlZmF1bHQgdG8gYXV0bwoJCQlpZiAoIHJldCA9PSBudWxsICYmIHN0eWxlICYmIHN0eWxlWyBuYW1lIF0gKSB7CgkJCQlyZXQgPSBzdHlsZVsgbmFtZSBdOwoJCQl9CgoJCQkvLyBGcm9tIHRoZSBhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzCgkJCS8vIGh0dHA6Ly9lcmlrLmVhZS5uZXQvYXJjaGl2ZXMvMjAwNy8wNy8yNy8xOC41NC4xNS8jY29tbWVudC0xMDIyOTEKCgkJCS8vIElmIHdlJ3JlIG5vdCBkZWFsaW5nIHdpdGggYSByZWd1bGFyIHBpeGVsIG51bWJlcgoJCQkvLyBidXQgYSBudW1iZXIgdGhhdCBoYXMgYSB3ZWlyZCBlbmRpbmcsIHdlIG5lZWQgdG8gY29udmVydCBpdCB0byBwaXhlbHMKCQkJLy8gYnV0IG5vdCBwb3NpdGlvbiBjc3MgYXR0cmlidXRlcywgYXMgdGhvc2UgYXJlCgkJCS8vIHByb3BvcnRpb25hbCB0byB0aGUgcGFyZW50IGVsZW1lbnQgaW5zdGVhZAoJCQkvLyBhbmQgd2UgY2FuJ3QgbWVhc3VyZSB0aGUgcGFyZW50IGluc3RlYWQgYmVjYXVzZSBpdAoJCQkvLyBtaWdodCB0cmlnZ2VyIGEgInN0YWNraW5nIGRvbGxzIiBwcm9ibGVtCgkJCWlmICggcm51bW5vbnB4LnRlc3QoIHJldCApICYmICFycG9zaXRpb24udGVzdCggbmFtZSApICkgewoKCQkJCS8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXMKCQkJCWxlZnQgPSBzdHlsZS5sZWZ0OwoJCQkJcnMgPSBlbGVtLnJ1bnRpbWVTdHlsZTsKCQkJCXJzTGVmdCA9IHJzICYmIHJzLmxlZnQ7CgoJCQkJLy8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dAoJCQkJaWYgKCByc0xlZnQgKSB7CgkJCQkJcnMubGVmdCA9IGVsZW0uY3VycmVudFN0eWxlLmxlZnQ7CgkJCQl9CgkJCQlzdHlsZS5sZWZ0ID0gbmFtZSA9PT0gImZvbnRTaXplIiA/ICIxZW0iIDogcmV0OwoJCQkJcmV0ID0gc3R5bGUucGl4ZWxMZWZ0ICsgInB4IjsKCgkJCQkvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzCgkJCQlzdHlsZS5sZWZ0ID0gbGVmdDsKCQkJCWlmICggcnNMZWZ0ICkgewoJCQkJCXJzLmxlZnQgPSByc0xlZnQ7CgkJCQl9CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IElFCgkJCS8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuCgkJCXJldHVybiByZXQgPT09IHVuZGVmaW5lZCA/CgkJCQlyZXQgOgoJCQkJcmV0ICsgIiIgfHwgImF1dG8iOwoJCX07Cgl9CgoKCgoJZnVuY3Rpb24gYWRkR2V0SG9va0lmKCBjb25kaXRpb25GbiwgaG9va0ZuICkgewoKCQkvLyBEZWZpbmUgdGhlIGhvb2ssIHdlJ2xsIGNoZWNrIG9uIHRoZSBmaXJzdCBydW4gaWYgaXQncyByZWFsbHkgbmVlZGVkLgoJCXJldHVybiB7CgkJCWdldDogZnVuY3Rpb24oKSB7CgkJCQlpZiAoIGNvbmRpdGlvbkZuKCkgKSB7CgoJCQkJCS8vIEhvb2sgbm90IG5lZWRlZCAob3IgaXQncyBub3QgcG9zc2libGUgdG8gdXNlIGl0IGR1ZQoJCQkJCS8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC4KCQkJCQlkZWxldGUgdGhpcy5nZXQ7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCS8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLgoJCQkJcmV0dXJuICggdGhpcy5nZXQgPSBob29rRm4gKS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCX0KCQl9OwoJfQoKCgl2YXIKCgkJCXJhbHBoYSA9IC9hbHBoYVwoW14pXSpcKS9pLAoJCXJvcGFjaXR5ID0gL29wYWNpdHlccyo9XHMqKFteKV0qKS9pLAoKCQkvLyBzd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlIGV4Y2VwdAoJCS8vICJ0YWJsZSIsICJ0YWJsZS1jZWxsIiwgb3IgInRhYmxlLWNhcHRpb24iCgkJLy8gc2VlIGhlcmUgZm9yIGRpc3BsYXkgdmFsdWVzOgoJCS8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXkKCQlyZGlzcGxheXN3YXAgPSAvXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sCgkJcm51bXNwbGl0ID0gbmV3IFJlZ0V4cCggIl4oIiArIHBudW0gKyAiKSguKikkIiwgImkiICksCgoJCWNzc1Nob3cgPSB7IHBvc2l0aW9uOiAiYWJzb2x1dGUiLCB2aXNpYmlsaXR5OiAiaGlkZGVuIiwgZGlzcGxheTogImJsb2NrIiB9LAoJCWNzc05vcm1hbFRyYW5zZm9ybSA9IHsKCQkJbGV0dGVyU3BhY2luZzogIjAiLAoJCQlmb250V2VpZ2h0OiAiNDAwIgoJCX0sCgoJCWNzc1ByZWZpeGVzID0gWyAiV2Via2l0IiwgIk8iLCAiTW96IiwgIm1zIiBdLAoJCWVtcHR5U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApLnN0eWxlOwoKCgkvLyByZXR1cm4gYSBjc3MgcHJvcGVydHkgbWFwcGVkIHRvIGEgcG90ZW50aWFsbHkgdmVuZG9yIHByZWZpeGVkIHByb3BlcnR5CglmdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHsKCgkJLy8gc2hvcnRjdXQgZm9yIG5hbWVzIHRoYXQgYXJlIG5vdCB2ZW5kb3IgcHJlZml4ZWQKCQlpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHsKCQkJcmV0dXJuIG5hbWU7CgkJfQoKCQkvLyBjaGVjayBmb3IgdmVuZG9yIHByZWZpeGVkIG5hbWVzCgkJdmFyIGNhcE5hbWUgPSBuYW1lLmNoYXJBdCggMCApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKCAxICksCgkJCWkgPSBjc3NQcmVmaXhlcy5sZW5ndGg7CgoJCXdoaWxlICggaS0tICkgewoJCQluYW1lID0gY3NzUHJlZml4ZXNbIGkgXSArIGNhcE5hbWU7CgkJCWlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkgewoJCQkJcmV0dXJuIG5hbWU7CgkJCX0KCQl9Cgl9CgoJZnVuY3Rpb24gc2hvd0hpZGUoIGVsZW1lbnRzLCBzaG93ICkgewoJCXZhciBkaXNwbGF5LCBlbGVtLCBoaWRkZW4sCgkJCXZhbHVlcyA9IFtdLAoJCQlpbmRleCA9IDAsCgkJCWxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsKCgkJZm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHsKCQkJZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdOwoJCQlpZiAoICFlbGVtLnN0eWxlICkgewoJCQkJY29udGludWU7CgkJCX0KCgkJCXZhbHVlc1sgaW5kZXggXSA9IGpRdWVyeS5fZGF0YSggZWxlbSwgIm9sZGRpc3BsYXkiICk7CgkJCWRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXk7CgkJCWlmICggc2hvdyApIHsKCgkJCQkvLyBSZXNldCB0aGUgaW5saW5lIGRpc3BsYXkgb2YgdGhpcyBlbGVtZW50IHRvIGxlYXJuIGlmIGl0IGlzCgkJCQkvLyBiZWluZyBoaWRkZW4gYnkgY2FzY2FkZWQgcnVsZXMgb3Igbm90CgkJCQlpZiAoICF2YWx1ZXNbIGluZGV4IF0gJiYgZGlzcGxheSA9PT0gIm5vbmUiICkgewoJCQkJCWVsZW0uc3R5bGUuZGlzcGxheSA9ICIiOwoJCQkJfQoKCQkJCS8vIFNldCBlbGVtZW50cyB3aGljaCBoYXZlIGJlZW4gb3ZlcnJpZGRlbiB3aXRoIGRpc3BsYXk6IG5vbmUKCQkJCS8vIGluIGEgc3R5bGVzaGVldCB0byB3aGF0ZXZlciB0aGUgZGVmYXVsdCBicm93c2VyIHN0eWxlIGlzCgkJCQkvLyBmb3Igc3VjaCBhbiBlbGVtZW50CgkJCQlpZiAoIGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gIiIgJiYgaXNIaWRkZW4oIGVsZW0gKSApIHsKCQkJCQl2YWx1ZXNbIGluZGV4IF0gPQoJCQkJCQlqUXVlcnkuX2RhdGEoIGVsZW0sICJvbGRkaXNwbGF5IiwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSApOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJaGlkZGVuID0gaXNIaWRkZW4oIGVsZW0gKTsKCgkJCQlpZiAoIGRpc3BsYXkgJiYgZGlzcGxheSAhPT0gIm5vbmUiIHx8ICFoaWRkZW4gKSB7CgkJCQkJalF1ZXJ5Ll9kYXRhKAoJCQkJCQllbGVtLAoJCQkJCQkib2xkZGlzcGxheSIsCgkJCQkJCWhpZGRlbiA/IGRpc3BsYXkgOiBqUXVlcnkuY3NzKCBlbGVtLCAiZGlzcGxheSIgKQoJCQkJCSk7CgkJCQl9CgkJCX0KCQl9CgoJCS8vIFNldCB0aGUgZGlzcGxheSBvZiBtb3N0IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wCgkJLy8gdG8gYXZvaWQgdGhlIGNvbnN0YW50IHJlZmxvdwoJCWZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7CgkJCWVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTsKCQkJaWYgKCAhZWxlbS5zdHlsZSApIHsKCQkJCWNvbnRpbnVlOwoJCQl9CgkJCWlmICggIXNob3cgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSAibm9uZSIgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSAiIiApIHsKCQkJCWVsZW0uc3R5bGUuZGlzcGxheSA9IHNob3cgPyB2YWx1ZXNbIGluZGV4IF0gfHwgIiIgOiAibm9uZSI7CgkJCX0KCQl9CgoJCXJldHVybiBlbGVtZW50czsKCX0KCglmdW5jdGlvbiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIHN1YnRyYWN0ICkgewoJCXZhciBtYXRjaGVzID0gcm51bXNwbGl0LmV4ZWMoIHZhbHVlICk7CgkJcmV0dXJuIG1hdGNoZXMgPwoKCQkJLy8gR3VhcmQgYWdhaW5zdCB1bmRlZmluZWQgInN1YnRyYWN0IiwgZS5nLiwgd2hlbiB1c2VkIGFzIGluIGNzc0hvb2tzCgkJCU1hdGgubWF4KCAwLCBtYXRjaGVzWyAxIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAyIF0gfHwgInB4IiApIDoKCQkJdmFsdWU7Cgl9CgoJZnVuY3Rpb24gYXVnbWVudFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhLCBpc0JvcmRlckJveCwgc3R5bGVzICkgewoJCXZhciBpID0gZXh0cmEgPT09ICggaXNCb3JkZXJCb3ggPyAiYm9yZGVyIiA6ICJjb250ZW50IiApID8KCgkJCS8vIElmIHdlIGFscmVhZHkgaGF2ZSB0aGUgcmlnaHQgbWVhc3VyZW1lbnQsIGF2b2lkIGF1Z21lbnRhdGlvbgoJCQk0IDoKCgkJCS8vIE90aGVyd2lzZSBpbml0aWFsaXplIGZvciBob3Jpem9udGFsIG9yIHZlcnRpY2FsIHByb3BlcnRpZXMKCQkJbmFtZSA9PT0gIndpZHRoIiA/IDEgOiAwLAoKCQkJdmFsID0gMDsKCgkJZm9yICggOyBpIDwgNDsgaSArPSAyICkgewoKCQkJLy8gYm90aCBib3ggbW9kZWxzIGV4Y2x1ZGUgbWFyZ2luLCBzbyBhZGQgaXQgaWYgd2Ugd2FudCBpdAoJCQlpZiAoIGV4dHJhID09PSAibWFyZ2luIiApIHsKCQkJCXZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBleHRyYSArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTsKCQkJfQoKCQkJaWYgKCBpc0JvcmRlckJveCApIHsKCgkJCQkvLyBib3JkZXItYm94IGluY2x1ZGVzIHBhZGRpbmcsIHNvIHJlbW92ZSBpdCBpZiB3ZSB3YW50IGNvbnRlbnQKCQkJCWlmICggZXh0cmEgPT09ICJjb250ZW50IiApIHsKCQkJCQl2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgInBhZGRpbmciICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApOwoJCQkJfQoKCQkJCS8vIGF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGJvcmRlciBub3IgbWFyZ2luLCBzbyByZW1vdmUgYm9yZGVyCgkJCQlpZiAoIGV4dHJhICE9PSAibWFyZ2luIiApIHsKCQkJCQl2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgImJvcmRlciIgKyBjc3NFeHBhbmRbIGkgXSArICJXaWR0aCIsIHRydWUsIHN0eWxlcyApOwoJCQkJfQoJCQl9IGVsc2UgewoKCQkJCS8vIGF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQsIHNvIGFkZCBwYWRkaW5nCgkJCQl2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgInBhZGRpbmciICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApOwoKCQkJCS8vIGF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQgbm9yIHBhZGRpbmcsIHNvIGFkZCBib3JkZXIKCQkJCWlmICggZXh0cmEgIT09ICJwYWRkaW5nIiApIHsKCQkJCQl2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgImJvcmRlciIgKyBjc3NFeHBhbmRbIGkgXSArICJXaWR0aCIsIHRydWUsIHN0eWxlcyApOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gdmFsOwoJfQoKCWZ1bmN0aW9uIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICkgewoKCQkvLyBTdGFydCB3aXRoIG9mZnNldCBwcm9wZXJ0eSwgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgYm9yZGVyLWJveCB2YWx1ZQoJCXZhciB2YWx1ZUlzQm9yZGVyQm94ID0gdHJ1ZSwKCQkJdmFsID0gbmFtZSA9PT0gIndpZHRoIiA/IGVsZW0ub2Zmc2V0V2lkdGggOiBlbGVtLm9mZnNldEhlaWdodCwKCQkJc3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksCgkJCWlzQm9yZGVyQm94ID0gc3VwcG9ydC5ib3hTaXppbmcgJiYKCQkJCWpRdWVyeS5jc3MoIGVsZW0sICJib3hTaXppbmciLCBmYWxzZSwgc3R5bGVzICkgPT09ICJib3JkZXItYm94IjsKCgkJLy8gc29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkCgkJLy8gc3ZnIC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjQ5Mjg1CgkJLy8gTWF0aE1MIC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDkxNjY4CgkJaWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHsKCgkJCS8vIEZhbGwgYmFjayB0byBjb21wdXRlZCB0aGVuIHVuY29tcHV0ZWQgY3NzIGlmIG5lY2Vzc2FyeQoJCQl2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApOwoJCQlpZiAoIHZhbCA8IDAgfHwgdmFsID09IG51bGwgKSB7CgkJCQl2YWwgPSBlbGVtLnN0eWxlWyBuYW1lIF07CgkJCX0KCgkJCS8vIENvbXB1dGVkIHVuaXQgaXMgbm90IHBpeGVscy4gU3RvcCBoZXJlIGFuZCByZXR1cm4uCgkJCWlmICggcm51bW5vbnB4LnRlc3QoIHZhbCApICkgewoJCQkJcmV0dXJuIHZhbDsKCQkJfQoKCQkJLy8gd2UgbmVlZCB0aGUgY2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXMKCQkJLy8gZm9yIGdldENvbXB1dGVkU3R5bGUgc2lsZW50bHkgZmFsbHMgYmFjayB0byB0aGUgcmVsaWFibGUgZWxlbS5zdHlsZQoJCQl2YWx1ZUlzQm9yZGVyQm94ID0gaXNCb3JkZXJCb3ggJiYKCQkJCSggc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IHZhbCA9PT0gZWxlbS5zdHlsZVsgbmFtZSBdICk7CgoJCQkvLyBOb3JtYWxpemUgIiIsIGF1dG8sIGFuZCBwcmVwYXJlIGZvciBleHRyYQoJCQl2YWwgPSBwYXJzZUZsb2F0KCB2YWwgKSB8fCAwOwoJCX0KCgkJLy8gdXNlIHRoZSBhY3RpdmUgYm94LXNpemluZyBtb2RlbCB0byBhZGQvc3VidHJhY3QgaXJyZWxldmFudCBzdHlsZXMKCQlyZXR1cm4gKCB2YWwgKwoJCQlhdWdtZW50V2lkdGhPckhlaWdodCgKCQkJCWVsZW0sCgkJCQluYW1lLAoJCQkJZXh0cmEgfHwgKCBpc0JvcmRlckJveCA/ICJib3JkZXIiIDogImNvbnRlbnQiICksCgkJCQl2YWx1ZUlzQm9yZGVyQm94LAoJCQkJc3R5bGVzCgkJCSkKCQkpICsgInB4IjsKCX0KCglqUXVlcnkuZXh0ZW5kKCB7CgoJCS8vIEFkZCBpbiBzdHlsZSBwcm9wZXJ0eSBob29rcyBmb3Igb3ZlcnJpZGluZyB0aGUgZGVmYXVsdAoJCS8vIGJlaGF2aW9yIG9mIGdldHRpbmcgYW5kIHNldHRpbmcgYSBzdHlsZSBwcm9wZXJ0eQoJCWNzc0hvb2tzOiB7CgkJCW9wYWNpdHk6IHsKCQkJCWdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoJCQkJCWlmICggY29tcHV0ZWQgKSB7CgoJCQkJCQkvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eQoJCQkJCQl2YXIgcmV0ID0gY3VyQ1NTKCBlbGVtLCAib3BhY2l0eSIgKTsKCQkJCQkJcmV0dXJuIHJldCA9PT0gIiIgPyAiMSIgOiByZXQ7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfSwKCgkJLy8gRG9uJ3QgYXV0b21hdGljYWxseSBhZGQgInB4IiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzCgkJY3NzTnVtYmVyOiB7CgkJCSJhbmltYXRpb25JdGVyYXRpb25Db3VudCI6IHRydWUsCgkJCSJjb2x1bW5Db3VudCI6IHRydWUsCgkJCSJmaWxsT3BhY2l0eSI6IHRydWUsCgkJCSJmbGV4R3JvdyI6IHRydWUsCgkJCSJmbGV4U2hyaW5rIjogdHJ1ZSwKCQkJImZvbnRXZWlnaHQiOiB0cnVlLAoJCQkibGluZUhlaWdodCI6IHRydWUsCgkJCSJvcGFjaXR5IjogdHJ1ZSwKCQkJIm9yZGVyIjogdHJ1ZSwKCQkJIm9ycGhhbnMiOiB0cnVlLAoJCQkid2lkb3dzIjogdHJ1ZSwKCQkJInpJbmRleCI6IHRydWUsCgkJCSJ6b29tIjogdHJ1ZQoJCX0sCgoJCS8vIEFkZCBpbiBwcm9wZXJ0aWVzIHdob3NlIG5hbWVzIHlvdSB3aXNoIHRvIGZpeCBiZWZvcmUKCQkvLyBzZXR0aW5nIG9yIGdldHRpbmcgdGhlIHZhbHVlCgkJY3NzUHJvcHM6IHsKCgkJCS8vIG5vcm1hbGl6ZSBmbG9hdCBjc3MgcHJvcGVydHkKCQkJImZsb2F0Ijogc3VwcG9ydC5jc3NGbG9hdCA/ICJjc3NGbG9hdCIgOiAic3R5bGVGbG9hdCIKCQl9LAoKCQkvLyBHZXQgYW5kIHNldCB0aGUgc3R5bGUgcHJvcGVydHkgb24gYSBET00gTm9kZQoJCXN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkgewoKCQkJLy8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzCgkJCWlmICggIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4IHx8ICFlbGVtLnN0eWxlICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWUKCQkJdmFyIHJldCwgdHlwZSwgaG9va3MsCgkJCQlvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSwKCQkJCXN0eWxlID0gZWxlbS5zdHlsZTsKCgkJCW5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwKCQkJCSggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIG9yaWdOYW1lICkgfHwgb3JpZ05hbWUgKTsKCgkJCS8vIGdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24KCQkJLy8gZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgdmVyc2lvbgoJCQlob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTsKCgkJCS8vIENoZWNrIGlmIHdlJ3JlIHNldHRpbmcgYSB2YWx1ZQoJCQlpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7CgkJCQl0eXBlID0gdHlwZW9mIHZhbHVlOwoKCQkJCS8vIENvbnZlcnQgIis9IiBvciAiLT0iIHRvIHJlbGF0aXZlIG51bWJlcnMgKCM3MzQ1KQoJCQkJaWYgKCB0eXBlID09PSAic3RyaW5nIiAmJiAoIHJldCA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKSApICYmIHJldFsgMSBdICkgewoJCQkJCXZhbHVlID0gYWRqdXN0Q1NTKCBlbGVtLCBuYW1lLCByZXQgKTsKCgkJCQkJLy8gRml4ZXMgYnVnICM5MjM3CgkJCQkJdHlwZSA9ICJudW1iZXIiOwoJCQkJfQoKCQkJCS8vIE1ha2Ugc3VyZSB0aGF0IG51bGwgYW5kIE5hTiB2YWx1ZXMgYXJlbid0IHNldC4gU2VlOiAjNzExNgoJCQkJaWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJLy8gSWYgYSBudW1iZXIgd2FzIHBhc3NlZCBpbiwgYWRkIHRoZSB1bml0IChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpCgkJCQlpZiAoIHR5cGUgPT09ICJudW1iZXIiICkgewoJCQkJCXZhbHVlICs9IHJldCAmJiByZXRbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gPyAiIiA6ICJweCIgKTsKCQkJCX0KCgkJCQkvLyBGaXhlcyAjODkwOCwgaXQgY2FuIGJlIGRvbmUgbW9yZSBjb3JyZWN0bHkgYnkgc3BlY2lmaW5nIHNldHRlcnMgaW4gY3NzSG9va3MsCgkJCQkvLyBidXQgaXQgd291bGQgbWVhbiB0byBkZWZpbmUgZWlnaHQKCQkJCS8vIChmb3IgZXZlcnkgcHJvYmxlbWF0aWMgcHJvcGVydHkpIGlkZW50aWNhbCBmdW5jdGlvbnMKCQkJCWlmICggIXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlICYmIHZhbHVlID09PSAiIiAmJiBuYW1lLmluZGV4T2YoICJiYWNrZ3JvdW5kIiApID09PSAwICkgewoJCQkJCXN0eWxlWyBuYW1lIF0gPSAiaW5oZXJpdCI7CgkJCQl9CgoJCQkJLy8gSWYgYSBob29rIHdhcyBwcm92aWRlZCwgdXNlIHRoYXQgdmFsdWUsIG90aGVyd2lzZSBqdXN0IHNldCB0aGUgc3BlY2lmaWVkIHZhbHVlCgkJCQlpZiAoICFob29rcyB8fCAhKCAic2V0IiBpbiBob29rcyApIHx8CgkJCQkJKCB2YWx1ZSA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkgewoKCQkJCQkvLyBTdXBwb3J0OiBJRQoJCQkJCS8vIFN3YWxsb3cgZXJyb3JzIGZyb20gJ2ludmFsaWQnIENTUyB2YWx1ZXMgKCM1NTA5KQoJCQkJCXRyeSB7CgkJCQkJCXN0eWxlWyBuYW1lIF0gPSB2YWx1ZTsKCQkJCQl9IGNhdGNoICggZSApIHt9CgkJCQl9CgoJCQl9IGVsc2UgewoKCQkJCS8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBub24tY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZQoJCQkJaWYgKCBob29rcyAmJiAiZ2V0IiBpbiBob29rcyAmJgoJCQkJCSggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBmYWxzZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7CgoJCQkJCXJldHVybiByZXQ7CgkJCQl9CgoJCQkJLy8gT3RoZXJ3aXNlIGp1c3QgZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBzdHlsZSBvYmplY3QKCQkJCXJldHVybiBzdHlsZVsgbmFtZSBdOwoJCQl9CgkJfSwKCgkJY3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHsKCQkJdmFyIG51bSwgdmFsLCBob29rcywKCQkJCW9yaWdOYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApOwoKCQkJLy8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lCgkJCW5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwKCQkJCSggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIG9yaWdOYW1lICkgfHwgb3JpZ05hbWUgKTsKCgkJCS8vIGdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24KCQkJLy8gZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgdmVyc2lvbgoJCQlob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTsKCgkJCS8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlCgkJCWlmICggaG9va3MgJiYgImdldCIgaW4gaG9va3MgKSB7CgkJCQl2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7CgkJCX0KCgkJCS8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0CgkJCWlmICggdmFsID09PSB1bmRlZmluZWQgKSB7CgkJCQl2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApOwoJCQl9CgoJCQkvL2NvbnZlcnQgIm5vcm1hbCIgdG8gY29tcHV0ZWQgdmFsdWUKCQkJaWYgKCB2YWwgPT09ICJub3JtYWwiICYmIG5hbWUgaW4gY3NzTm9ybWFsVHJhbnNmb3JtICkgewoJCQkJdmFsID0gY3NzTm9ybWFsVHJhbnNmb3JtWyBuYW1lIF07CgkJCX0KCgkJCS8vIFJldHVybiwgY29udmVydGluZyB0byBudW1iZXIgaWYgZm9yY2VkIG9yIGEgcXVhbGlmaWVyIHdhcyBwcm92aWRlZCBhbmQgdmFsIGxvb2tzIG51bWVyaWMKCQkJaWYgKCBleHRyYSA9PT0gIiIgfHwgZXh0cmEgKSB7CgkJCQludW0gPSBwYXJzZUZsb2F0KCB2YWwgKTsKCQkJCXJldHVybiBleHRyYSA9PT0gdHJ1ZSB8fCBpc0Zpbml0ZSggbnVtICkgPyBudW0gfHwgMCA6IHZhbDsKCQkJfQoJCQlyZXR1cm4gdmFsOwoJCX0KCX0gKTsKCglqUXVlcnkuZWFjaCggWyAiaGVpZ2h0IiwgIndpZHRoIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQlqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSA9IHsKCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQsIGV4dHJhICkgewoJCQkJaWYgKCBjb21wdXRlZCApIHsKCgkJCQkJLy8gY2VydGFpbiBlbGVtZW50cyBjYW4gaGF2ZSBkaW1lbnNpb24gaW5mbyBpZiB3ZSBpbnZpc2libHkgc2hvdyB0aGVtCgkJCQkJLy8gaG93ZXZlciwgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdCBmcm9tIHRoaXMKCQkJCQlyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sICJkaXNwbGF5IiApICkgJiYKCQkJCQkJZWxlbS5vZmZzZXRXaWR0aCA9PT0gMCA/CgkJCQkJCQlzd2FwKCBlbGVtLCBjc3NTaG93LCBmdW5jdGlvbigpIHsKCQkJCQkJCQlyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTsKCQkJCQkJCX0gKSA6CgkJCQkJCQlnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApOwoJCQkJfQoJCQl9LAoKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIGV4dHJhICkgewoJCQkJdmFyIHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApOwoJCQkJcmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgZXh0cmEgPwoJCQkJCWF1Z21lbnRXaWR0aE9ySGVpZ2h0KAoJCQkJCQllbGVtLAoJCQkJCQluYW1lLAoJCQkJCQlleHRyYSwKCQkJCQkJc3VwcG9ydC5ib3hTaXppbmcgJiYKCQkJCQkJCWpRdWVyeS5jc3MoIGVsZW0sICJib3hTaXppbmciLCBmYWxzZSwgc3R5bGVzICkgPT09ICJib3JkZXItYm94IiwKCQkJCQkJc3R5bGVzCgkJCQkJKSA6IDAKCQkJCSk7CgkJCX0KCQl9OwoJfSApOwoKCWlmICggIXN1cHBvcnQub3BhY2l0eSApIHsKCQlqUXVlcnkuY3NzSG9va3Mub3BhY2l0eSA9IHsKCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7CgoJCQkJLy8gSUUgdXNlcyBmaWx0ZXJzIGZvciBvcGFjaXR5CgkJCQlyZXR1cm4gcm9wYWNpdHkudGVzdCggKCBjb21wdXRlZCAmJiBlbGVtLmN1cnJlbnRTdHlsZSA/CgkJCQkJZWxlbS5jdXJyZW50U3R5bGUuZmlsdGVyIDoKCQkJCQllbGVtLnN0eWxlLmZpbHRlciApIHx8ICIiICkgPwoJCQkJCQkoIDAuMDEgKiBwYXJzZUZsb2F0KCBSZWdFeHAuJDEgKSApICsgIiIgOgoJCQkJCQljb21wdXRlZCA/ICIxIiA6ICIiOwoJCQl9LAoKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQl2YXIgc3R5bGUgPSBlbGVtLnN0eWxlLAoJCQkJCWN1cnJlbnRTdHlsZSA9IGVsZW0uY3VycmVudFN0eWxlLAoJCQkJCW9wYWNpdHkgPSBqUXVlcnkuaXNOdW1lcmljKCB2YWx1ZSApID8gImFscGhhKG9wYWNpdHk9IiArIHZhbHVlICogMTAwICsgIikiIDogIiIsCgkJCQkJZmlsdGVyID0gY3VycmVudFN0eWxlICYmIGN1cnJlbnRTdHlsZS5maWx0ZXIgfHwgc3R5bGUuZmlsdGVyIHx8ICIiOwoKCQkJCS8vIElFIGhhcyB0cm91YmxlIHdpdGggb3BhY2l0eSBpZiBpdCBkb2VzIG5vdCBoYXZlIGxheW91dAoJCQkJLy8gRm9yY2UgaXQgYnkgc2V0dGluZyB0aGUgem9vbSBsZXZlbAoJCQkJc3R5bGUuem9vbSA9IDE7CgoJCQkJLy8gaWYgc2V0dGluZyBvcGFjaXR5IHRvIDEsIGFuZCBubyBvdGhlciBmaWx0ZXJzIGV4aXN0IC0KCQkJCS8vIGF0dGVtcHQgdG8gcmVtb3ZlIGZpbHRlciBhdHRyaWJ1dGUgIzY2NTIKCQkJCS8vIGlmIHZhbHVlID09PSAiIiwgdGhlbiByZW1vdmUgaW5saW5lIG9wYWNpdHkgIzEyNjg1CgkJCQlpZiAoICggdmFsdWUgPj0gMSB8fCB2YWx1ZSA9PT0gIiIgKSAmJgoJCQkJCQlqUXVlcnkudHJpbSggZmlsdGVyLnJlcGxhY2UoIHJhbHBoYSwgIiIgKSApID09PSAiIiAmJgoJCQkJCQlzdHlsZS5yZW1vdmVBdHRyaWJ1dGUgKSB7CgoJCQkJCS8vIFNldHRpbmcgc3R5bGUuZmlsdGVyIHRvIG51bGwsICIiICYgIiAiIHN0aWxsIGxlYXZlICJmaWx0ZXI6IiBpbiB0aGUgY3NzVGV4dAoJCQkJCS8vIGlmICJmaWx0ZXI6IiBpcyBwcmVzZW50IGF0IGFsbCwgY2xlYXJUeXBlIGlzIGRpc2FibGVkLCB3ZSB3YW50IHRvIGF2b2lkIHRoaXMKCQkJCQkvLyBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUgaXMgSUUgT25seSwgYnV0IHNvIGFwcGFyZW50bHkgaXMgdGhpcyBjb2RlIHBhdGguLi4KCQkJCQlzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoICJmaWx0ZXIiICk7CgoJCQkJCS8vIGlmIHRoZXJlIGlzIG5vIGZpbHRlciBzdHlsZSBhcHBsaWVkIGluIGEgY3NzIHJ1bGUKCQkJCQkvLyBvciB1bnNldCBpbmxpbmUgb3BhY2l0eSwgd2UgYXJlIGRvbmUKCQkJCQlpZiAoIHZhbHVlID09PSAiIiB8fCBjdXJyZW50U3R5bGUgJiYgIWN1cnJlbnRTdHlsZS5maWx0ZXIgKSB7CgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gb3RoZXJ3aXNlLCBzZXQgbmV3IGZpbHRlciB2YWx1ZXMKCQkJCXN0eWxlLmZpbHRlciA9IHJhbHBoYS50ZXN0KCBmaWx0ZXIgKSA/CgkJCQkJZmlsdGVyLnJlcGxhY2UoIHJhbHBoYSwgb3BhY2l0eSApIDoKCQkJCQlmaWx0ZXIgKyAiICIgKyBvcGFjaXR5OwoJCQl9CgkJfTsKCX0KCglqUXVlcnkuY3NzSG9va3MubWFyZ2luUmlnaHQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodCwKCQlmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7CgkJCWlmICggY29tcHV0ZWQgKSB7CgkJCQlyZXR1cm4gc3dhcCggZWxlbSwgeyAiZGlzcGxheSI6ICJpbmxpbmUtYmxvY2siIH0sCgkJCQkJY3VyQ1NTLCBbIGVsZW0sICJtYXJnaW5SaWdodCIgXSApOwoJCQl9CgkJfQoJKTsKCglqUXVlcnkuY3NzSG9va3MubWFyZ2luTGVmdCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpbkxlZnQsCgkJZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoJCQlpZiAoIGNvbXB1dGVkICkgewoJCQkJcmV0dXJuICgKCQkJCQlwYXJzZUZsb2F0KCBjdXJDU1MoIGVsZW0sICJtYXJnaW5MZWZ0IiApICkgfHwKCgkJCQkJLy8gU3VwcG9ydDogSUU8PTExKwoJCQkJCS8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgaW4gSUUgdGhyb3dzIGFuIGVycm9yCgkJCQkJLy8gU3VwcG9ydDogSUU4IG9ubHkKCQkJCQkvLyBnZXRDbGllbnRSZWN0cygpIGVycm9ycyBvbiBkaXNjb25uZWN0ZWQgZWxlbXMKCQkJCQkoIGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgPwoJCQkJCQllbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLQoJCQkJCQkJc3dhcCggZWxlbSwgeyBtYXJnaW5MZWZ0OiAwIH0sIGZ1bmN0aW9uKCkgewoJCQkJCQkJCXJldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7CgkJCQkJCQl9ICkgOgoJCQkJCQkwCgkJCQkJKQoJCQkJKSArICJweCI7CgkJCX0KCQl9CgkpOwoKCS8vIFRoZXNlIGhvb2tzIGFyZSB1c2VkIGJ5IGFuaW1hdGUgdG8gZXhwYW5kIHByb3BlcnRpZXMKCWpRdWVyeS5lYWNoKCB7CgkJbWFyZ2luOiAiIiwKCQlwYWRkaW5nOiAiIiwKCQlib3JkZXI6ICJXaWR0aCIKCX0sIGZ1bmN0aW9uKCBwcmVmaXgsIHN1ZmZpeCApIHsKCQlqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdID0gewoJCQlleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJCXZhciBpID0gMCwKCQkJCQlleHBhbmRlZCA9IHt9LAoKCQkJCQkvLyBhc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmcKCQkJCQlwYXJ0cyA9IHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgPyB2YWx1ZS5zcGxpdCggIiAiICkgOiBbIHZhbHVlIF07CgoJCQkJZm9yICggOyBpIDwgNDsgaSsrICkgewoJCQkJCWV4cGFuZGVkWyBwcmVmaXggKyBjc3NFeHBhbmRbIGkgXSArIHN1ZmZpeCBdID0KCQkJCQkJcGFydHNbIGkgXSB8fCBwYXJ0c1sgaSAtIDIgXSB8fCBwYXJ0c1sgMCBdOwoJCQkJfQoKCQkJCXJldHVybiBleHBhbmRlZDsKCQkJfQoJCX07CgoJCWlmICggIXJtYXJnaW4udGVzdCggcHJlZml4ICkgKSB7CgkJCWpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7CgkJfQoJfSApOwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQljc3M6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHsKCQkJcmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkgewoJCQkJdmFyIHN0eWxlcywgbGVuLAoJCQkJCW1hcCA9IHt9LAoJCQkJCWkgPSAwOwoKCQkJCWlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHsKCQkJCQlzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTsKCQkJCQlsZW4gPSBuYW1lLmxlbmd0aDsKCgkJCQkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCQkJCW1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTsKCQkJCQl9CgoJCQkJCXJldHVybiBtYXA7CgkJCQl9CgoJCQkJcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgPwoJCQkJCWpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSwgdmFsdWUgKSA6CgkJCQkJalF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApOwoJCQl9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTsKCQl9LAoJCXNob3c6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTsKCQl9LAoJCWhpZGU6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTsKCQl9LAoJCXRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkgewoJCQlpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gImJvb2xlYW4iICkgewoJCQkJcmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTsKCQkJfQoKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlpZiAoIGlzSGlkZGVuKCB0aGlzICkgKSB7CgkJCQkJalF1ZXJ5KCB0aGlzICkuc2hvdygpOwoJCQkJfSBlbHNlIHsKCQkJCQlqUXVlcnkoIHRoaXMgKS5oaWRlKCk7CgkJCQl9CgkJCX0gKTsKCQl9Cgl9ICk7CgoKCWZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHsKCQlyZXR1cm4gbmV3IFR3ZWVuLnByb3RvdHlwZS5pbml0KCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApOwoJfQoJalF1ZXJ5LlR3ZWVuID0gVHdlZW47CgoJVHdlZW4ucHJvdG90eXBlID0gewoJCWNvbnN0cnVjdG9yOiBUd2VlbiwKCQlpbml0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcsIHVuaXQgKSB7CgkJCXRoaXMuZWxlbSA9IGVsZW07CgkJCXRoaXMucHJvcCA9IHByb3A7CgkJCXRoaXMuZWFzaW5nID0gZWFzaW5nIHx8IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHQ7CgkJCXRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CgkJCXRoaXMuc3RhcnQgPSB0aGlzLm5vdyA9IHRoaXMuY3VyKCk7CgkJCXRoaXMuZW5kID0gZW5kOwoJCQl0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gIiIgOiAicHgiICk7CgkJfSwKCQljdXI6IGZ1bmN0aW9uKCkgewoJCQl2YXIgaG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdOwoKCQkJcmV0dXJuIGhvb2tzICYmIGhvb2tzLmdldCA/CgkJCQlob29rcy5nZXQoIHRoaXMgKSA6CgkJCQlUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KCB0aGlzICk7CgkJfSwKCQlydW46IGZ1bmN0aW9uKCBwZXJjZW50ICkgewoJCQl2YXIgZWFzZWQsCgkJCQlob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07CgoJCQlpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHsKCQkJCXRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKAoJCQkJCXBlcmNlbnQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHBlcmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvbgoJCQkJKTsKCQkJfSBlbHNlIHsKCQkJCXRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50OwoJCQl9CgkJCXRoaXMubm93ID0gKCB0aGlzLmVuZCAtIHRoaXMuc3RhcnQgKSAqIGVhc2VkICsgdGhpcy5zdGFydDsKCgkJCWlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7CgkJCQl0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKCB0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzICk7CgkJCX0KCgkJCWlmICggaG9va3MgJiYgaG9va3Muc2V0ICkgewoJCQkJaG9va3Muc2V0KCB0aGlzICk7CgkJCX0gZWxzZSB7CgkJCQlUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KCB0aGlzICk7CgkJCX0KCQkJcmV0dXJuIHRoaXM7CgkJfQoJfTsKCglUd2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGUgPSBUd2Vlbi5wcm90b3R5cGU7CgoJVHdlZW4ucHJvcEhvb2tzID0gewoJCV9kZWZhdWx0OiB7CgkJCWdldDogZnVuY3Rpb24oIHR3ZWVuICkgewoJCQkJdmFyIHJlc3VsdDsKCgkJCQkvLyBVc2UgYSBwcm9wZXJ0eSBvbiB0aGUgZWxlbWVudCBkaXJlY3RseSB3aGVuIGl0IGlzIG5vdCBhIERPTSBlbGVtZW50LAoJCQkJLy8gb3Igd2hlbiB0aGVyZSBpcyBubyBtYXRjaGluZyBzdHlsZSBwcm9wZXJ0eSB0aGF0IGV4aXN0cy4KCQkJCWlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAhPT0gMSB8fAoJCQkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSAhPSBudWxsICYmIHR3ZWVuLmVsZW0uc3R5bGVbIHR3ZWVuLnByb3AgXSA9PSBudWxsICkgewoJCQkJCXJldHVybiB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF07CgkJCQl9CgoJCQkJLy8gcGFzc2luZyBhbiBlbXB0eSBzdHJpbmcgYXMgYSAzcmQgcGFyYW1ldGVyIHRvIC5jc3Mgd2lsbCBhdXRvbWF0aWNhbGx5CgkJCQkvLyBhdHRlbXB0IGEgcGFyc2VGbG9hdCBhbmQgZmFsbGJhY2sgdG8gYSBzdHJpbmcgaWYgdGhlIHBhcnNlIGZhaWxzCgkJCQkvLyBzbywgc2ltcGxlIHZhbHVlcyBzdWNoIGFzICIxMHB4IiBhcmUgcGFyc2VkIHRvIEZsb2F0LgoJCQkJLy8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyAicm90YXRlKDFyYWQpIiBhcmUgcmV0dXJuZWQgYXMgaXMuCgkJCQlyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCAiIiApOwoKCQkJCS8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgImF1dG8iIGFyZSBjb252ZXJ0ZWQgdG8gMC4KCQkJCXJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gImF1dG8iID8gMCA6IHJlc3VsdDsKCQkJfSwKCQkJc2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7CgoJCQkJLy8gdXNlIHN0ZXAgaG9vayBmb3IgYmFjayBjb21wYXQgLSB1c2UgY3NzSG9vayBpZiBpdHMgdGhlcmUgLSB1c2UgLnN0eWxlIGlmIGl0cwoJCQkJLy8gYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUKCQkJCWlmICggalF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSApIHsKCQkJCQlqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdKCB0d2VlbiApOwoJCQkJfSBlbHNlIGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSA9PT0gMSAmJgoJCQkJCSggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8CgkJCQkJCWpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7CgkJCQkJalF1ZXJ5LnN0eWxlKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCB0d2Vlbi5ub3cgKyB0d2Vlbi51bml0ICk7CgkJCQl9IGVsc2UgewoJCQkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdzsKCQkJCX0KCQkJfQoJCX0KCX07CgoJLy8gU3VwcG9ydDogSUUgPD05CgkvLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXMKCglUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wID0gVHdlZW4ucHJvcEhvb2tzLnNjcm9sbExlZnQgPSB7CgkJc2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7CgkJCWlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAmJiB0d2Vlbi5lbGVtLnBhcmVudE5vZGUgKSB7CgkJCQl0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7CgkJCX0KCQl9Cgl9OwoKCWpRdWVyeS5lYXNpbmcgPSB7CgkJbGluZWFyOiBmdW5jdGlvbiggcCApIHsKCQkJcmV0dXJuIHA7CgkJfSwKCQlzd2luZzogZnVuY3Rpb24oIHAgKSB7CgkJCXJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDI7CgkJfSwKCQlfZGVmYXVsdDogInN3aW5nIgoJfTsKCglqUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDsKCgkvLyBCYWNrIENvbXBhdCA8MS44IGV4dGVuc2lvbiBwb2ludAoJalF1ZXJ5LmZ4LnN0ZXAgPSB7fTsKCgoKCgl2YXIKCQlmeE5vdywgdGltZXJJZCwKCQlyZnh0eXBlcyA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLywKCQlycnVuID0gL3F1ZXVlSG9va3MkLzsKCgkvLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5CglmdW5jdGlvbiBjcmVhdGVGeE5vdygpIHsKCQl3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCWZ4Tm93ID0gdW5kZWZpbmVkOwoJCX0gKTsKCQlyZXR1cm4gKCBmeE5vdyA9IGpRdWVyeS5ub3coKSApOwoJfQoKCS8vIEdlbmVyYXRlIHBhcmFtZXRlcnMgdG8gY3JlYXRlIGEgc3RhbmRhcmQgYW5pbWF0aW9uCglmdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkgewoJCXZhciB3aGljaCwKCQkJYXR0cnMgPSB7IGhlaWdodDogdHlwZSB9LAoJCQlpID0gMDsKCgkJLy8gaWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLAoJCS8vIGlmIHdlIGRvbid0IGluY2x1ZGUgd2lkdGgsIHN0ZXAgdmFsdWUgaXMgMiB0byBza2lwIG92ZXIgTGVmdCBhbmQgUmlnaHQKCQlpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDsKCQlmb3IgKCA7IGkgPCA0IDsgaSArPSAyIC0gaW5jbHVkZVdpZHRoICkgewoJCQl3aGljaCA9IGNzc0V4cGFuZFsgaSBdOwoJCQlhdHRyc1sgIm1hcmdpbiIgKyB3aGljaCBdID0gYXR0cnNbICJwYWRkaW5nIiArIHdoaWNoIF0gPSB0eXBlOwoJCX0KCgkJaWYgKCBpbmNsdWRlV2lkdGggKSB7CgkJCWF0dHJzLm9wYWNpdHkgPSBhdHRycy53aWR0aCA9IHR5cGU7CgkJfQoKCQlyZXR1cm4gYXR0cnM7Cgl9CgoJZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7CgkJdmFyIHR3ZWVuLAoJCQljb2xsZWN0aW9uID0gKCBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXSApLmNvbmNhdCggQW5pbWF0aW9uLnR3ZWVuZXJzWyAiKiIgXSApLAoJCQlpbmRleCA9IDAsCgkJCWxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoOwoJCWZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7CgkJCWlmICggKCB0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApICkgKSB7CgoJCQkJLy8gd2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHkKCQkJCXJldHVybiB0d2VlbjsKCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHsKCQkvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovCgkJdmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIHR3ZWVuLCBob29rcywgb2xkZmlyZSwgZGlzcGxheSwgY2hlY2tEaXNwbGF5LAoJCQlhbmltID0gdGhpcywKCQkJb3JpZyA9IHt9LAoJCQlzdHlsZSA9IGVsZW0uc3R5bGUsCgkJCWhpZGRlbiA9IGVsZW0ubm9kZVR5cGUgJiYgaXNIaWRkZW4oIGVsZW0gKSwKCQkJZGF0YVNob3cgPSBqUXVlcnkuX2RhdGEoIGVsZW0sICJmeHNob3ciICk7CgoJCS8vIGhhbmRsZSBxdWV1ZTogZmFsc2UgcHJvbWlzZXMKCQlpZiAoICFvcHRzLnF1ZXVlICkgewoJCQlob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgImZ4IiApOwoJCQlpZiAoIGhvb2tzLnVucXVldWVkID09IG51bGwgKSB7CgkJCQlob29rcy51bnF1ZXVlZCA9IDA7CgkJCQlvbGRmaXJlID0gaG9va3MuZW1wdHkuZmlyZTsKCQkJCWhvb2tzLmVtcHR5LmZpcmUgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAoICFob29rcy51bnF1ZXVlZCApIHsKCQkJCQkJb2xkZmlyZSgpOwoJCQkJCX0KCQkJCX07CgkJCX0KCQkJaG9va3MudW5xdWV1ZWQrKzsKCgkJCWFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHsKCgkJCQkvLyBkb2luZyB0aGlzIG1ha2VzIHN1cmUgdGhhdCB0aGUgY29tcGxldGUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZAoJCQkJLy8gYmVmb3JlIHRoaXMgY29tcGxldGVzCgkJCQlhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7CgkJCQkJaG9va3MudW5xdWV1ZWQtLTsKCQkJCQlpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sICJmeCIgKS5sZW5ndGggKSB7CgkJCQkJCWhvb2tzLmVtcHR5LmZpcmUoKTsKCQkJCQl9CgkJCQl9ICk7CgkJCX0gKTsKCQl9CgoJCS8vIGhlaWdodC93aWR0aCBvdmVyZmxvdyBwYXNzCgkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICggImhlaWdodCIgaW4gcHJvcHMgfHwgIndpZHRoIiBpbiBwcm9wcyApICkgewoKCQkJLy8gTWFrZSBzdXJlIHRoYXQgbm90aGluZyBzbmVha3Mgb3V0CgkJCS8vIFJlY29yZCBhbGwgMyBvdmVyZmxvdyBhdHRyaWJ1dGVzIGJlY2F1c2UgSUUgZG9lcyBub3QKCQkJLy8gY2hhbmdlIHRoZSBvdmVyZmxvdyBhdHRyaWJ1dGUgd2hlbiBvdmVyZmxvd1ggYW5kCgkJCS8vIG92ZXJmbG93WSBhcmUgc2V0IHRvIHRoZSBzYW1lIHZhbHVlCgkJCW9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdOwoKCQkJLy8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGgKCQkJLy8gYW5pbWF0aW9ucyBvbiBpbmxpbmUgZWxlbWVudHMgdGhhdCBhcmUgaGF2aW5nIHdpZHRoL2hlaWdodCBhbmltYXRlZAoJCQlkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgImRpc3BsYXkiICk7CgoJCQkvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSAibm9uZSIKCQkJY2hlY2tEaXNwbGF5ID0gZGlzcGxheSA9PT0gIm5vbmUiID8KCQkJCWpRdWVyeS5fZGF0YSggZWxlbSwgIm9sZGRpc3BsYXkiICkgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXk7CgoJCQlpZiAoIGNoZWNrRGlzcGxheSA9PT0gImlubGluZSIgJiYgalF1ZXJ5LmNzcyggZWxlbSwgImZsb2F0IiApID09PSAibm9uZSIgKSB7CgoJCQkJLy8gaW5saW5lLWxldmVsIGVsZW1lbnRzIGFjY2VwdCBpbmxpbmUtYmxvY2s7CgkJCQkvLyBibG9jay1sZXZlbCBlbGVtZW50cyBuZWVkIHRvIGJlIGlubGluZSB3aXRoIGxheW91dAoJCQkJaWYgKCAhc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0IHx8IGRlZmF1bHREaXNwbGF5KCBlbGVtLm5vZGVOYW1lICkgPT09ICJpbmxpbmUiICkgewoJCQkJCXN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsKCQkJCX0gZWxzZSB7CgkJCQkJc3R5bGUuem9vbSA9IDE7CgkJCQl9CgkJCX0KCQl9CgoJCWlmICggb3B0cy5vdmVyZmxvdyApIHsKCQkJc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKCQkJaWYgKCAhc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzKCkgKSB7CgkJCQlhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7CgkJCQkJc3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07CgkJCQkJc3R5bGUub3ZlcmZsb3dYID0gb3B0cy5vdmVyZmxvd1sgMSBdOwoJCQkJCXN0eWxlLm92ZXJmbG93WSA9IG9wdHMub3ZlcmZsb3dbIDIgXTsKCQkJCX0gKTsKCQkJfQoJCX0KCgkJLy8gc2hvdy9oaWRlIHBhc3MKCQlmb3IgKCBwcm9wIGluIHByb3BzICkgewoJCQl2YWx1ZSA9IHByb3BzWyBwcm9wIF07CgkJCWlmICggcmZ4dHlwZXMuZXhlYyggdmFsdWUgKSApIHsKCQkJCWRlbGV0ZSBwcm9wc1sgcHJvcCBdOwoJCQkJdG9nZ2xlID0gdG9nZ2xlIHx8IHZhbHVlID09PSAidG9nZ2xlIjsKCQkJCWlmICggdmFsdWUgPT09ICggaGlkZGVuID8gImhpZGUiIDogInNob3ciICkgKSB7CgoJCQkJCS8vIElmIHRoZXJlIGlzIGRhdGFTaG93IGxlZnQgb3ZlciBmcm9tIGEgc3RvcHBlZCBoaWRlIG9yIHNob3cKCQkJCQkvLyBhbmQgd2UgYXJlIGdvaW5nIHRvIHByb2NlZWQgd2l0aCBzaG93LCB3ZSBzaG91bGQgcHJldGVuZCB0byBiZSBoaWRkZW4KCQkJCQlpZiAoIHZhbHVlID09PSAic2hvdyIgJiYgZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSAhPT0gdW5kZWZpbmVkICkgewoJCQkJCQloaWRkZW4gPSB0cnVlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCX0KCQkJCX0KCQkJCW9yaWdbIHByb3AgXSA9IGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gfHwgalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wICk7CgoJCQkvLyBBbnkgbm9uLWZ4IHZhbHVlIHN0b3BzIHVzIGZyb20gcmVzdG9yaW5nIHRoZSBvcmlnaW5hbCBkaXNwbGF5IHZhbHVlCgkJCX0gZWxzZSB7CgkJCQlkaXNwbGF5ID0gdW5kZWZpbmVkOwoJCQl9CgkJfQoKCQlpZiAoICFqUXVlcnkuaXNFbXB0eU9iamVjdCggb3JpZyApICkgewoJCQlpZiAoIGRhdGFTaG93ICkgewoJCQkJaWYgKCAiaGlkZGVuIiBpbiBkYXRhU2hvdyApIHsKCQkJCQloaWRkZW4gPSBkYXRhU2hvdy5oaWRkZW47CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlkYXRhU2hvdyA9IGpRdWVyeS5fZGF0YSggZWxlbSwgImZ4c2hvdyIsIHt9ICk7CgkJCX0KCgkJCS8vIHN0b3JlIHN0YXRlIGlmIGl0cyB0b2dnbGUgLSBlbmFibGVzIC5zdG9wKCkudG9nZ2xlKCkgdG8gInJldmVyc2UiCgkJCWlmICggdG9nZ2xlICkgewoJCQkJZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjsKCQkJfQoJCQlpZiAoIGhpZGRlbiApIHsKCQkJCWpRdWVyeSggZWxlbSApLnNob3coKTsKCQkJfSBlbHNlIHsKCQkJCWFuaW0uZG9uZSggZnVuY3Rpb24oKSB7CgkJCQkJalF1ZXJ5KCBlbGVtICkuaGlkZSgpOwoJCQkJfSApOwoJCQl9CgkJCWFuaW0uZG9uZSggZnVuY3Rpb24oKSB7CgkJCQl2YXIgcHJvcDsKCQkJCWpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwgImZ4c2hvdyIgKTsKCQkJCWZvciAoIHByb3AgaW4gb3JpZyApIHsKCQkJCQlqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIG9yaWdbIHByb3AgXSApOwoJCQkJfQoJCQl9ICk7CgkJCWZvciAoIHByb3AgaW4gb3JpZyApIHsKCQkJCXR3ZWVuID0gY3JlYXRlVHdlZW4oIGhpZGRlbiA/IGRhdGFTaG93WyBwcm9wIF0gOiAwLCBwcm9wLCBhbmltICk7CgoJCQkJaWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7CgkJCQkJZGF0YVNob3dbIHByb3AgXSA9IHR3ZWVuLnN0YXJ0OwoJCQkJCWlmICggaGlkZGVuICkgewoJCQkJCQl0d2Vlbi5lbmQgPSB0d2Vlbi5zdGFydDsKCQkJCQkJdHdlZW4uc3RhcnQgPSBwcm9wID09PSAid2lkdGgiIHx8IHByb3AgPT09ICJoZWlnaHQiID8gMSA6IDA7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCS8vIElmIHRoaXMgaXMgYSBub29wIGxpa2UgLmhpZGUoKS5oaWRlKCksIHJlc3RvcmUgYW4gb3ZlcndyaXR0ZW4gZGlzcGxheSB2YWx1ZQoJCX0gZWxzZSBpZiAoICggZGlzcGxheSA9PT0gIm5vbmUiID8gZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXkgKSA9PT0gImlubGluZSIgKSB7CgkJCXN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5OwoJCX0KCX0KCglmdW5jdGlvbiBwcm9wRmlsdGVyKCBwcm9wcywgc3BlY2lhbEVhc2luZyApIHsKCQl2YXIgaW5kZXgsIG5hbWUsIGVhc2luZywgdmFsdWUsIGhvb2tzOwoKCQkvLyBjYW1lbENhc2UsIHNwZWNpYWxFYXNpbmcgYW5kIGV4cGFuZCBjc3NIb29rIHBhc3MKCQlmb3IgKCBpbmRleCBpbiBwcm9wcyApIHsKCQkJbmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIGluZGV4ICk7CgkJCWVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTsKCQkJdmFsdWUgPSBwcm9wc1sgaW5kZXggXTsKCQkJaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHsKCQkJCWVhc2luZyA9IHZhbHVlWyAxIF07CgkJCQl2YWx1ZSA9IHByb3BzWyBpbmRleCBdID0gdmFsdWVbIDAgXTsKCQkJfQoKCQkJaWYgKCBpbmRleCAhPT0gbmFtZSApIHsKCQkJCXByb3BzWyBuYW1lIF0gPSB2YWx1ZTsKCQkJCWRlbGV0ZSBwcm9wc1sgaW5kZXggXTsKCQkJfQoKCQkJaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTsKCQkJaWYgKCBob29rcyAmJiAiZXhwYW5kIiBpbiBob29rcyApIHsKCQkJCXZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApOwoJCQkJZGVsZXRlIHByb3BzWyBuYW1lIF07CgoJCQkJLy8gbm90IHF1aXRlICQuZXh0ZW5kLCB0aGlzIHdvbnQgb3ZlcndyaXRlIGtleXMgYWxyZWFkeSBwcmVzZW50LgoJCQkJLy8gYWxzbyAtIHJldXNpbmcgJ2luZGV4JyBmcm9tIGFib3ZlIGJlY2F1c2Ugd2UgaGF2ZSB0aGUgY29ycmVjdCAibmFtZSIKCQkJCWZvciAoIGluZGV4IGluIHZhbHVlICkgewoJCQkJCWlmICggISggaW5kZXggaW4gcHJvcHMgKSApIHsKCQkJCQkJcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTsKCQkJCQkJc3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZzsKCQkJCQl9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlzcGVjaWFsRWFzaW5nWyBuYW1lIF0gPSBlYXNpbmc7CgkJCX0KCQl9Cgl9CgoJZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkgewoJCXZhciByZXN1bHQsCgkJCXN0b3BwZWQsCgkJCWluZGV4ID0gMCwKCQkJbGVuZ3RoID0gQW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLAoJCQlkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLmFsd2F5cyggZnVuY3Rpb24oKSB7CgoJCQkJLy8gZG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yCgkJCQlkZWxldGUgdGljay5lbGVtOwoJCQl9ICksCgkJCXRpY2sgPSBmdW5jdGlvbigpIHsKCQkJCWlmICggc3RvcHBlZCApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQl2YXIgY3VycmVudFRpbWUgPSBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLAoJCQkJCXJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSwKCgkJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMKCQkJCQkvLyBBcmNoYWljIGNyYXNoIGJ1ZyB3b24ndCBhbGxvdyB1cyB0byB1c2UgYDEgLSAoIDAuNSB8fCAwIClgICgjMTI0OTcpCgkJCQkJdGVtcCA9IHJlbWFpbmluZyAvIGFuaW1hdGlvbi5kdXJhdGlvbiB8fCAwLAoJCQkJCXBlcmNlbnQgPSAxIC0gdGVtcCwKCQkJCQlpbmRleCA9IDAsCgkJCQkJbGVuZ3RoID0gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg7CgoJCQkJZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7CgkJCQkJYW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTsKCQkJCX0KCgkJCQlkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgcGVyY2VudCwgcmVtYWluaW5nIF0gKTsKCgkJCQlpZiAoIHBlcmNlbnQgPCAxICYmIGxlbmd0aCApIHsKCQkJCQlyZXR1cm4gcmVtYWluaW5nOwoJCQkJfSBlbHNlIHsKCQkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24gXSApOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfSwKCQkJYW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSggewoJCQkJZWxlbTogZWxlbSwKCQkJCXByb3BzOiBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcGVydGllcyApLAoJCQkJb3B0czogalF1ZXJ5LmV4dGVuZCggdHJ1ZSwgewoJCQkJCXNwZWNpYWxFYXNpbmc6IHt9LAoJCQkJCWVhc2luZzogalF1ZXJ5LmVhc2luZy5fZGVmYXVsdAoJCQkJfSwgb3B0aW9ucyApLAoJCQkJb3JpZ2luYWxQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLAoJCQkJb3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLAoJCQkJc3RhcnRUaW1lOiBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLAoJCQkJZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sCgkJCQl0d2VlbnM6IFtdLAoJCQkJY3JlYXRlVHdlZW46IGZ1bmN0aW9uKCBwcm9wLCBlbmQgKSB7CgkJCQkJdmFyIHR3ZWVuID0galF1ZXJ5LlR3ZWVuKCBlbGVtLCBhbmltYXRpb24ub3B0cywgcHJvcCwgZW5kLAoJCQkJCQkJYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1sgcHJvcCBdIHx8IGFuaW1hdGlvbi5vcHRzLmVhc2luZyApOwoJCQkJCWFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTsKCQkJCQlyZXR1cm4gdHdlZW47CgkJCQl9LAoJCQkJc3RvcDogZnVuY3Rpb24oIGdvdG9FbmQgKSB7CgkJCQkJdmFyIGluZGV4ID0gMCwKCgkJCQkJCS8vIGlmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVucwoJCQkJCQkvLyBvdGhlcndpc2Ugd2Ugc2tpcCB0aGlzIHBhcnQKCQkJCQkJbGVuZ3RoID0gZ290b0VuZCA/IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoIDogMDsKCQkJCQlpZiAoIHN0b3BwZWQgKSB7CgkJCQkJCXJldHVybiB0aGlzOwoJCQkJCX0KCQkJCQlzdG9wcGVkID0gdHJ1ZTsKCQkJCQlmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHsKCQkJCQkJYW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTsKCQkJCQl9CgoJCQkJCS8vIHJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWUKCQkJCQkvLyBvdGhlcndpc2UsIHJlamVjdAoJCQkJCWlmICggZ290b0VuZCApIHsKCQkJCQkJZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIDEsIDAgXSApOwoJCQkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTsKCQkJCQl9CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCX0gKSwKCQkJcHJvcHMgPSBhbmltYXRpb24ucHJvcHM7CgoJCXByb3BGaWx0ZXIoIHByb3BzLCBhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nICk7CgoJCWZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkgewoJCQlyZXN1bHQgPSBBbmltYXRpb24ucHJlZmlsdGVyc1sgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIGVsZW0sIHByb3BzLCBhbmltYXRpb24ub3B0cyApOwoJCQlpZiAoIHJlc3VsdCApIHsKCQkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHJlc3VsdC5zdG9wICkgKSB7CgkJCQkJalF1ZXJ5Ll9xdWV1ZUhvb2tzKCBhbmltYXRpb24uZWxlbSwgYW5pbWF0aW9uLm9wdHMucXVldWUgKS5zdG9wID0KCQkJCQkJalF1ZXJ5LnByb3h5KCByZXN1bHQuc3RvcCwgcmVzdWx0ICk7CgkJCQl9CgkJCQlyZXR1cm4gcmVzdWx0OwoJCQl9CgkJfQoKCQlqUXVlcnkubWFwKCBwcm9wcywgY3JlYXRlVHdlZW4sIGFuaW1hdGlvbiApOwoKCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkgewoJCQlhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTsKCQl9CgoJCWpRdWVyeS5meC50aW1lcigKCQkJalF1ZXJ5LmV4dGVuZCggdGljaywgewoJCQkJZWxlbTogZWxlbSwKCQkJCWFuaW06IGFuaW1hdGlvbiwKCQkJCXF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZQoJCQl9ICkKCQkpOwoKCQkvLyBhdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9ucwoJCXJldHVybiBhbmltYXRpb24ucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzICkKCQkJLmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlICkKCQkJLmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKQoJCQkuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTsKCX0KCglqUXVlcnkuQW5pbWF0aW9uID0galF1ZXJ5LmV4dGVuZCggQW5pbWF0aW9uLCB7CgoJCXR3ZWVuZXJzOiB7CgkJCSIqIjogWyBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7CgkJCQl2YXIgdHdlZW4gPSB0aGlzLmNyZWF0ZVR3ZWVuKCBwcm9wLCB2YWx1ZSApOwoJCQkJYWRqdXN0Q1NTKCB0d2Vlbi5lbGVtLCBwcm9wLCByY3NzTnVtLmV4ZWMoIHZhbHVlICksIHR3ZWVuICk7CgkJCQlyZXR1cm4gdHdlZW47CgkJCX0gXQoJCX0sCgoJCXR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7CgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHByb3BzICkgKSB7CgkJCQljYWxsYmFjayA9IHByb3BzOwoJCQkJcHJvcHMgPSBbICIqIiBdOwoJCQl9IGVsc2UgewoJCQkJcHJvcHMgPSBwcm9wcy5tYXRjaCggcm5vdHdoaXRlICk7CgkJCX0KCgkJCXZhciBwcm9wLAoJCQkJaW5kZXggPSAwLAoJCQkJbGVuZ3RoID0gcHJvcHMubGVuZ3RoOwoKCQkJZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7CgkJCQlwcm9wID0gcHJvcHNbIGluZGV4IF07CgkJCQlBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSA9IEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdOwoJCQkJQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0udW5zaGlmdCggY2FsbGJhY2sgKTsKCQkJfQoJCX0sCgoJCXByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLAoKCQlwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHsKCQkJaWYgKCBwcmVwZW5kICkgewoJCQkJQW5pbWF0aW9uLnByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTsKCQkJfSBlbHNlIHsKCQkJCUFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7CgkJCX0KCQl9Cgl9ICk7CgoJalF1ZXJ5LnNwZWVkID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGZuICkgewoJCXZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09ICJvYmplY3QiID8galF1ZXJ5LmV4dGVuZCgge30sIHNwZWVkICkgOiB7CgkJCWNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8CgkJCQlqUXVlcnkuaXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCwKCQkJZHVyYXRpb246IHNwZWVkLAoJCQllYXNpbmc6IGZuICYmIGVhc2luZyB8fCBlYXNpbmcgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCBlYXNpbmcgKSAmJiBlYXNpbmcKCQl9OwoKCQlvcHQuZHVyYXRpb24gPSBqUXVlcnkuZngub2ZmID8gMCA6IHR5cGVvZiBvcHQuZHVyYXRpb24gPT09ICJudW1iZXIiID8gb3B0LmR1cmF0aW9uIDoKCQkJb3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgPwoJCQkJalF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF0gOiBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0OwoKCQkvLyBub3JtYWxpemUgb3B0LnF1ZXVlIC0gdHJ1ZS91bmRlZmluZWQvbnVsbCAtPiAiZngiCgkJaWYgKCBvcHQucXVldWUgPT0gbnVsbCB8fCBvcHQucXVldWUgPT09IHRydWUgKSB7CgkJCW9wdC5xdWV1ZSA9ICJmeCI7CgkJfQoKCQkvLyBRdWV1ZWluZwoJCW9wdC5vbGQgPSBvcHQuY29tcGxldGU7CgoJCW9wdC5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHQub2xkICkgKSB7CgkJCQlvcHQub2xkLmNhbGwoIHRoaXMgKTsKCQkJfQoKCQkJaWYgKCBvcHQucXVldWUgKSB7CgkJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7CgkJCX0KCQl9OwoKCQlyZXR1cm4gb3B0OwoJfTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkgewoKCQkJLy8gc2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwCgkJCXJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW4gKS5jc3MoICJvcGFjaXR5IiwgMCApLnNob3coKQoKCQkJCS8vIGFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZAoJCQkJLmVuZCgpLmFuaW1hdGUoIHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTsKCQl9LAoJCWFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJdmFyIGVtcHR5ID0galF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3AgKSwKCQkJCW9wdGFsbCA9IGpRdWVyeS5zcGVlZCggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSwKCQkJCWRvQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7CgoJCQkJCS8vIE9wZXJhdGUgb24gYSBjb3B5IG9mIHByb3Agc28gcGVyLXByb3BlcnR5IGVhc2luZyB3b24ndCBiZSBsb3N0CgkJCQkJdmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApOwoKCQkJCQkvLyBFbXB0eSBhbmltYXRpb25zLCBvciBmaW5pc2hpbmcgcmVzb2x2ZXMgaW1tZWRpYXRlbHkKCQkJCQlpZiAoIGVtcHR5IHx8IGpRdWVyeS5fZGF0YSggdGhpcywgImZpbmlzaCIgKSApIHsKCQkJCQkJYW5pbS5zdG9wKCB0cnVlICk7CgkJCQkJfQoJCQkJfTsKCQkJCWRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uOwoKCQkJcmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgPwoJCQkJdGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDoKCQkJCXRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTsKCQl9LAoJCXN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkgewoJCQl2YXIgc3RvcFF1ZXVlID0gZnVuY3Rpb24oIGhvb2tzICkgewoJCQkJdmFyIHN0b3AgPSBob29rcy5zdG9wOwoJCQkJZGVsZXRlIGhvb2tzLnN0b3A7CgkJCQlzdG9wKCBnb3RvRW5kICk7CgkJCX07CgoJCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJCWdvdG9FbmQgPSBjbGVhclF1ZXVlOwoJCQkJY2xlYXJRdWV1ZSA9IHR5cGU7CgkJCQl0eXBlID0gdW5kZWZpbmVkOwoJCQl9CgkJCWlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHsKCQkJCXRoaXMucXVldWUoIHR5cGUgfHwgImZ4IiwgW10gKTsKCQkJfQoKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgZGVxdWV1ZSA9IHRydWUsCgkJCQkJaW5kZXggPSB0eXBlICE9IG51bGwgJiYgdHlwZSArICJxdWV1ZUhvb2tzIiwKCQkJCQl0aW1lcnMgPSBqUXVlcnkudGltZXJzLAoJCQkJCWRhdGEgPSBqUXVlcnkuX2RhdGEoIHRoaXMgKTsKCgkJCQlpZiAoIGluZGV4ICkgewoJCQkJCWlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7CgkJCQkJCXN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJZm9yICggaW5kZXggaW4gZGF0YSApIHsKCQkJCQkJaWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCAmJiBycnVuLnRlc3QoIGluZGV4ICkgKSB7CgkJCQkJCQlzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkgewoJCQkJCWlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYKCQkJCQkJKCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7CgoJCQkJCQl0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7CgkJCQkJCWRlcXVldWUgPSBmYWxzZTsKCQkJCQkJdGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gc3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZAoJCQkJLy8gdGltZXJzIGN1cnJlbnRseSB3aWxsIGNhbGwgdGhlaXIgY29tcGxldGUgY2FsbGJhY2tzLCB3aGljaCB3aWxsIGRlcXVldWUKCQkJCS8vIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kCgkJCQlpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7CgkJCQkJalF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTsKCQkJCX0KCQkJfSApOwoJCX0sCgkJZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHsKCQkJaWYgKCB0eXBlICE9PSBmYWxzZSApIHsKCQkJCXR5cGUgPSB0eXBlIHx8ICJmeCI7CgkJCX0KCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgaW5kZXgsCgkJCQkJZGF0YSA9IGpRdWVyeS5fZGF0YSggdGhpcyApLAoJCQkJCXF1ZXVlID0gZGF0YVsgdHlwZSArICJxdWV1ZSIgXSwKCQkJCQlob29rcyA9IGRhdGFbIHR5cGUgKyAicXVldWVIb29rcyIgXSwKCQkJCQl0aW1lcnMgPSBqUXVlcnkudGltZXJzLAoJCQkJCWxlbmd0aCA9IHF1ZXVlID8gcXVldWUubGVuZ3RoIDogMDsKCgkJCQkvLyBlbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhCgkJCQlkYXRhLmZpbmlzaCA9IHRydWU7CgoJCQkJLy8gZW1wdHkgdGhlIHF1ZXVlIGZpcnN0CgkJCQlqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7CgoJCQkJaWYgKCBob29rcyAmJiBob29rcy5zdG9wICkgewoJCQkJCWhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApOwoJCQkJfQoKCQkJCS8vIGxvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtCgkJCQlmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkgewoJCQkJCWlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgewoJCQkJCQl0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7CgkJCQkJCXRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7CgkJCQkJfQoJCQkJfQoKCQkJCS8vIGxvb2sgZm9yIGFueSBhbmltYXRpb25zIGluIHRoZSBvbGQgcXVldWUgYW5kIGZpbmlzaCB0aGVtCgkJCQlmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkgewoJCQkJCWlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkgewoJCQkJCQlxdWV1ZVsgaW5kZXggXS5maW5pc2guY2FsbCggdGhpcyApOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyB0dXJuIG9mZiBmaW5pc2hpbmcgZmxhZwoJCQkJZGVsZXRlIGRhdGEuZmluaXNoOwoJCQl9ICk7CgkJfQoJfSApOwoKCWpRdWVyeS5lYWNoKCBbICJ0b2dnbGUiLCAic2hvdyIsICJoaWRlIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQl2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTsKCQlqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJcmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSAiYm9vbGVhbiIgPwoJCQkJY3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDoKCQkJCXRoaXMuYW5pbWF0ZSggZ2VuRngoIG5hbWUsIHRydWUgKSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTsKCQl9OwoJfSApOwoKCS8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnMKCWpRdWVyeS5lYWNoKCB7CgkJc2xpZGVEb3duOiBnZW5GeCggInNob3ciICksCgkJc2xpZGVVcDogZ2VuRngoICJoaWRlIiApLAoJCXNsaWRlVG9nZ2xlOiBnZW5GeCggInRvZ2dsZSIgKSwKCQlmYWRlSW46IHsgb3BhY2l0eTogInNob3ciIH0sCgkJZmFkZU91dDogeyBvcGFjaXR5OiAiaGlkZSIgfSwKCQlmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6ICJ0b2dnbGUiIH0KCX0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHsKCQlqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJcmV0dXJuIHRoaXMuYW5pbWF0ZSggcHJvcHMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7CgkJfTsKCX0gKTsKCglqUXVlcnkudGltZXJzID0gW107CglqUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkgewoJCXZhciB0aW1lciwKCQkJdGltZXJzID0galF1ZXJ5LnRpbWVycywKCQkJaSA9IDA7CgoJCWZ4Tm93ID0galF1ZXJ5Lm5vdygpOwoKCQlmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7CgkJCXRpbWVyID0gdGltZXJzWyBpIF07CgoJCQkvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWQKCQkJaWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7CgkJCQl0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTsKCQkJfQoJCX0KCgkJaWYgKCAhdGltZXJzLmxlbmd0aCApIHsKCQkJalF1ZXJ5LmZ4LnN0b3AoKTsKCQl9CgkJZnhOb3cgPSB1bmRlZmluZWQ7Cgl9OwoKCWpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHsKCQlqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7CgkJaWYgKCB0aW1lcigpICkgewoJCQlqUXVlcnkuZnguc3RhcnQoKTsKCQl9IGVsc2UgewoJCQlqUXVlcnkudGltZXJzLnBvcCgpOwoJCX0KCX07CgoJalF1ZXJ5LmZ4LmludGVydmFsID0gMTM7CgoJalF1ZXJ5LmZ4LnN0YXJ0ID0gZnVuY3Rpb24oKSB7CgkJaWYgKCAhdGltZXJJZCApIHsKCQkJdGltZXJJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApOwoJCX0KCX07CgoJalF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHsKCQl3aW5kb3cuY2xlYXJJbnRlcnZhbCggdGltZXJJZCApOwoJCXRpbWVySWQgPSBudWxsOwoJfTsKCglqUXVlcnkuZnguc3BlZWRzID0gewoJCXNsb3c6IDYwMCwKCQlmYXN0OiAyMDAsCgoJCS8vIERlZmF1bHQgc3BlZWQKCQlfZGVmYXVsdDogNDAwCgl9OwoKCgkvLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uCgkvLyBodHRwOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDEwMDMyNDAxNDc0Ny9odHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvCglqUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHsKCQl0aW1lID0galF1ZXJ5LmZ4ID8galF1ZXJ5LmZ4LnNwZWVkc1sgdGltZSBdIHx8IHRpbWUgOiB0aW1lOwoJCXR5cGUgPSB0eXBlIHx8ICJmeCI7CgoJCXJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7CgkJCXZhciB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoIG5leHQsIHRpbWUgKTsKCQkJaG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkgewoJCQkJd2luZG93LmNsZWFyVGltZW91dCggdGltZW91dCApOwoJCQl9OwoJCX0gKTsKCX07CgoKCSggZnVuY3Rpb24oKSB7CgkJdmFyIGEsCgkJCWlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImlucHV0IiApLAoJCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApLAoJCQlzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAic2VsZWN0IiApLAoJCQlvcHQgPSBzZWxlY3QuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJvcHRpb24iICkgKTsKCgkJLy8gU2V0dXAKCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoJCWRpdi5zZXRBdHRyaWJ1dGUoICJjbGFzc05hbWUiLCAidCIgKTsKCQlkaXYuaW5uZXJIVE1MID0gIiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiI7CgkJYSA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggImEiIClbIDAgXTsKCgkJLy8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKQoJCS8vIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSkKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoICJ0eXBlIiwgImNoZWNrYm94IiApOwoJCWRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKTsKCgkJYSA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggImEiIClbIDAgXTsKCgkJLy8gRmlyc3QgYmF0Y2ggb2YgdGVzdHMuCgkJYS5zdHlsZS5jc3NUZXh0ID0gInRvcDoxcHgiOwoKCQkvLyBUZXN0IHNldEF0dHJpYnV0ZSBvbiBjYW1lbENhc2UgY2xhc3MuCgkJLy8gSWYgaXQgd29ya3MsIHdlIG5lZWQgYXR0ckZpeGVzIHdoZW4gZG9pbmcgZ2V0L3NldEF0dHJpYnV0ZSAoaWU2LzcpCgkJc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGUgPSBkaXYuY2xhc3NOYW1lICE9PSAidCI7CgoJCS8vIEdldCB0aGUgc3R5bGUgaW5mb3JtYXRpb24gZnJvbSBnZXRBdHRyaWJ1dGUKCQkvLyAoSUUgdXNlcyAuY3NzVGV4dCBpbnN0ZWFkKQoJCXN1cHBvcnQuc3R5bGUgPSAvdG9wLy50ZXN0KCBhLmdldEF0dHJpYnV0ZSggInN0eWxlIiApICk7CgoJCS8vIE1ha2Ugc3VyZSB0aGF0IFVSTHMgYXJlbid0IG1hbmlwdWxhdGVkCgkJLy8gKElFIG5vcm1hbGl6ZXMgaXQgYnkgZGVmYXVsdCkKCQlzdXBwb3J0LmhyZWZOb3JtYWxpemVkID0gYS5nZXRBdHRyaWJ1dGUoICJocmVmIiApID09PSAiL2EiOwoKCQkvLyBDaGVjayB0aGUgZGVmYXVsdCBjaGVja2JveC9yYWRpbyB2YWx1ZSAoIiIgb24gV2ViS2l0OyAib24iIGVsc2V3aGVyZSkKCQlzdXBwb3J0LmNoZWNrT24gPSAhIWlucHV0LnZhbHVlOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCBhIHNlbGVjdGVkLWJ5LWRlZmF1bHQgb3B0aW9uIGhhcyBhIHdvcmtpbmcgc2VsZWN0ZWQgcHJvcGVydHkuCgkJLy8gKFdlYktpdCBkZWZhdWx0cyB0byBmYWxzZSBpbnN0ZWFkIG9mIHRydWUsIElFIHRvbywgaWYgaXQncyBpbiBhbiBvcHRncm91cCkKCQlzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkOwoKCQkvLyBUZXN0cyBmb3IgZW5jdHlwZSBzdXBwb3J0IG9uIGEgZm9ybSAoIzY3NDMpCgkJc3VwcG9ydC5lbmN0eXBlID0gISFkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZm9ybSIgKS5lbmN0eXBlOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCB0aGUgb3B0aW9ucyBpbnNpZGUgZGlzYWJsZWQgc2VsZWN0cyBhcmVuJ3QgbWFya2VkIGFzIGRpc2FibGVkCgkJLy8gKFdlYktpdCBtYXJrcyB0aGVtIGFzIGRpc2FibGVkKQoJCXNlbGVjdC5kaXNhYmxlZCA9IHRydWU7CgkJc3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7CgoJCS8vIFN1cHBvcnQ6IElFOCBvbmx5CgkJLy8gQ2hlY2sgaWYgd2UgY2FuIHRydXN0IGdldEF0dHJpYnV0ZSgidmFsdWUiKQoJCWlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImlucHV0IiApOwoJCWlucHV0LnNldEF0dHJpYnV0ZSggInZhbHVlIiwgIiIgKTsKCQlzdXBwb3J0LmlucHV0ID0gaW5wdXQuZ2V0QXR0cmlidXRlKCAidmFsdWUiICkgPT09ICIiOwoKCQkvLyBDaGVjayBpZiBhbiBpbnB1dCBtYWludGFpbnMgaXRzIHZhbHVlIGFmdGVyIGJlY29taW5nIGEgcmFkaW8KCQlpbnB1dC52YWx1ZSA9ICJ0IjsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoICJ0eXBlIiwgInJhZGlvIiApOwoJCXN1cHBvcnQucmFkaW9WYWx1ZSA9IGlucHV0LnZhbHVlID09PSAidCI7Cgl9ICkoKTsKCgoJdmFyIHJyZXR1cm4gPSAvXHIvZywKCQlyc3BhY2VzID0gL1tceDIwXHRcclxuXGZdKy9nOwoKCWpRdWVyeS5mbi5leHRlbmQoIHsKCQl2YWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJdmFyIGhvb2tzLCByZXQsIGlzRnVuY3Rpb24sCgkJCQllbGVtID0gdGhpc1sgMCBdOwoKCQkJaWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJCWlmICggZWxlbSApIHsKCQkJCQlob29rcyA9IGpRdWVyeS52YWxIb29rc1sgZWxlbS50eXBlIF0gfHwKCQkJCQkJalF1ZXJ5LnZhbEhvb2tzWyBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTsKCgkJCQkJaWYgKAoJCQkJCQlob29rcyAmJgoJCQkJCQkiZ2V0IiBpbiBob29rcyAmJgoJCQkJCQkoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgInZhbHVlIiApICkgIT09IHVuZGVmaW5lZAoJCQkJCSkgewoJCQkJCQlyZXR1cm4gcmV0OwoJCQkJCX0KCgkJCQkJcmV0ID0gZWxlbS52YWx1ZTsKCgkJCQkJcmV0dXJuIHR5cGVvZiByZXQgPT09ICJzdHJpbmciID8KCgkJCQkJCS8vIGhhbmRsZSBtb3N0IGNvbW1vbiBzdHJpbmcgY2FzZXMKCQkJCQkJcmV0LnJlcGxhY2UoIHJyZXR1cm4sICIiICkgOgoKCQkJCQkJLy8gaGFuZGxlIGNhc2VzIHdoZXJlIHZhbHVlIGlzIG51bGwvdW5kZWYgb3IgbnVtYmVyCgkJCQkJCXJldCA9PSBudWxsID8gIiIgOiByZXQ7CgkJCQl9CgoJCQkJcmV0dXJuOwoJCQl9CgoJCQlpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7CgoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHsKCQkJCXZhciB2YWw7CgoJCQkJaWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkgewoJCQkJCXJldHVybjsKCQkJCX0KCgkJCQlpZiAoIGlzRnVuY3Rpb24gKSB7CgkJCQkJdmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTsKCQkJCX0gZWxzZSB7CgkJCQkJdmFsID0gdmFsdWU7CgkJCQl9CgoJCQkJLy8gVHJlYXQgbnVsbC91bmRlZmluZWQgYXMgIiI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmcKCQkJCWlmICggdmFsID09IG51bGwgKSB7CgkJCQkJdmFsID0gIiI7CgkJCQl9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSAibnVtYmVyIiApIHsKCQkJCQl2YWwgKz0gIiI7CgkJCQl9IGVsc2UgaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsICkgKSB7CgkJCQkJdmFsID0galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCQkJCXJldHVybiB2YWx1ZSA9PSBudWxsID8gIiIgOiB2YWx1ZSArICIiOwoJCQkJCX0gKTsKCQkJCX0KCgkJCQlob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTsKCgkJCQkvLyBJZiBzZXQgcmV0dXJucyB1bmRlZmluZWQsIGZhbGwgYmFjayB0byBub3JtYWwgc2V0dGluZwoJCQkJaWYgKCAhaG9va3MgfHwgISggInNldCIgaW4gaG9va3MgKSB8fCBob29rcy5zZXQoIHRoaXMsIHZhbCwgInZhbHVlIiApID09PSB1bmRlZmluZWQgKSB7CgkJCQkJdGhpcy52YWx1ZSA9IHZhbDsKCQkJCX0KCQkJfSApOwoJCX0KCX0gKTsKCglqUXVlcnkuZXh0ZW5kKCB7CgkJdmFsSG9va3M6IHsKCQkJb3B0aW9uOiB7CgkJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCXZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCAidmFsdWUiICk7CgkJCQkJcmV0dXJuIHZhbCAhPSBudWxsID8KCQkJCQkJdmFsIDoKCgkJCQkJCS8vIFN1cHBvcnQ6IElFMTAtMTErCgkJCQkJCS8vIG9wdGlvbi50ZXh0IHRocm93cyBleGNlcHRpb25zICgjMTQ2ODYsICMxNDg1OCkKCQkJCQkJLy8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2UKCQkJCQkJLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jc3RyaXAtYW5kLWNvbGxhcHNlLXdoaXRlc3BhY2UKCQkJCQkJalF1ZXJ5LnRyaW0oIGpRdWVyeS50ZXh0KCBlbGVtICkgKS5yZXBsYWNlKCByc3BhY2VzLCAiICIgKTsKCQkJCX0KCQkJfSwKCQkJc2VsZWN0OiB7CgkJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCXZhciB2YWx1ZSwgb3B0aW9uLAoJCQkJCQlvcHRpb25zID0gZWxlbS5vcHRpb25zLAoJCQkJCQlpbmRleCA9IGVsZW0uc2VsZWN0ZWRJbmRleCwKCQkJCQkJb25lID0gZWxlbS50eXBlID09PSAic2VsZWN0LW9uZSIgfHwgaW5kZXggPCAwLAoJCQkJCQl2YWx1ZXMgPSBvbmUgPyBudWxsIDogW10sCgkJCQkJCW1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLAoJCQkJCQlpID0gaW5kZXggPCAwID8KCQkJCQkJCW1heCA6CgkJCQkJCQlvbmUgPyBpbmRleCA6IDA7CgoJCQkJCS8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIHNlbGVjdGVkIG9wdGlvbnMKCQkJCQlmb3IgKCA7IGkgPCBtYXg7IGkrKyApIHsKCQkJCQkJb3B0aW9uID0gb3B0aW9uc1sgaSBdOwoKCQkJCQkJLy8gb2xkSUUgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpCgkJCQkJCWlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJgoKCQkJCQkJCQkvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwCgkJCQkJCQkJKCBzdXBwb3J0Lm9wdERpc2FibGVkID8KCQkJCQkJCQkJIW9wdGlvbi5kaXNhYmxlZCA6CgkJCQkJCQkJCW9wdGlvbi5nZXRBdHRyaWJ1dGUoICJkaXNhYmxlZCIgKSA9PT0gbnVsbCApICYmCgkJCQkJCQkJKCAhb3B0aW9uLnBhcmVudE5vZGUuZGlzYWJsZWQgfHwKCQkJCQkJCQkJIWpRdWVyeS5ub2RlTmFtZSggb3B0aW9uLnBhcmVudE5vZGUsICJvcHRncm91cCIgKSApICkgewoKCQkJCQkJCS8vIEdldCB0aGUgc3BlY2lmaWMgdmFsdWUgZm9yIHRoZSBvcHRpb24KCQkJCQkJCXZhbHVlID0galF1ZXJ5KCBvcHRpb24gKS52YWwoKTsKCgkJCQkJCQkvLyBXZSBkb24ndCBuZWVkIGFuIGFycmF5IGZvciBvbmUgc2VsZWN0cwoJCQkJCQkJaWYgKCBvbmUgKSB7CgkJCQkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJCQkJfQoKCQkJCQkJCS8vIE11bHRpLVNlbGVjdHMgcmV0dXJuIGFuIGFycmF5CgkJCQkJCQl2YWx1ZXMucHVzaCggdmFsdWUgKTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJcmV0dXJuIHZhbHVlczsKCQkJCX0sCgoJCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQkJdmFyIG9wdGlvblNldCwgb3B0aW9uLAoJCQkJCQlvcHRpb25zID0gZWxlbS5vcHRpb25zLAoJCQkJCQl2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLAoJCQkJCQlpID0gb3B0aW9ucy5sZW5ndGg7CgoJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQlvcHRpb24gPSBvcHRpb25zWyBpIF07CgoJCQkJCQlpZiAoIGpRdWVyeS5pbkFycmF5KCBqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldCggb3B0aW9uICksIHZhbHVlcyApID4gLTEgKSB7CgoJCQkJCQkJLy8gU3VwcG9ydDogSUU2CgkJCQkJCQkvLyBXaGVuIG5ldyBvcHRpb24gZWxlbWVudCBpcyBhZGRlZCB0byBzZWxlY3QgYm94IHdlIG5lZWQgdG8KCQkJCQkJCS8vIGZvcmNlIHJlZmxvdyBvZiBuZXdseSBhZGRlZCBub2RlIGluIG9yZGVyIHRvIHdvcmthcm91bmQgZGVsYXkKCQkJCQkJCS8vIG9mIGluaXRpYWxpemF0aW9uIHByb3BlcnRpZXMKCQkJCQkJCXRyeSB7CgkJCQkJCQkJb3B0aW9uLnNlbGVjdGVkID0gb3B0aW9uU2V0ID0gdHJ1ZTsKCgkJCQkJCQl9IGNhdGNoICggXyApIHsKCgkJCQkJCQkJLy8gV2lsbCBiZSBleGVjdXRlZCBvbmx5IGluIElFNgoJCQkJCQkJCW9wdGlvbi5zY3JvbGxIZWlnaHQ7CgkJCQkJCQl9CgoJCQkJCQl9IGVsc2UgewoJCQkJCQkJb3B0aW9uLnNlbGVjdGVkID0gZmFsc2U7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0CgkJCQkJaWYgKCAhb3B0aW9uU2V0ICkgewoJCQkJCQllbGVtLnNlbGVjdGVkSW5kZXggPSAtMTsKCQkJCQl9CgoJCQkJCXJldHVybiBvcHRpb25zOwoJCQkJfQoJCQl9CgkJfQoJfSApOwoKCS8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyCglqUXVlcnkuZWFjaCggWyAicmFkaW8iLCAiY2hlY2tib3giIF0sIGZ1bmN0aW9uKCkgewoJCWpRdWVyeS52YWxIb29rc1sgdGhpcyBdID0gewoJCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHsKCQkJCWlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7CgkJCQkJcmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeSggZWxlbSApLnZhbCgpLCB2YWx1ZSApID4gLTEgKTsKCQkJCX0KCQkJfQoJCX07CgkJaWYgKCAhc3VwcG9ydC5jaGVja09uICkgewoJCQlqUXVlcnkudmFsSG9va3NbIHRoaXMgXS5nZXQgPSBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggInZhbHVlIiApID09PSBudWxsID8gIm9uIiA6IGVsZW0udmFsdWU7CgkJCX07CgkJfQoJfSApOwoKCgoKCXZhciBub2RlSG9vaywgYm9vbEhvb2ssCgkJYXR0ckhhbmRsZSA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGUsCgkJcnVzZURlZmF1bHQgPSAvXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLAoJCWdldFNldEF0dHJpYnV0ZSA9IHN1cHBvcnQuZ2V0U2V0QXR0cmlidXRlLAoJCWdldFNldElucHV0ID0gc3VwcG9ydC5pbnB1dDsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJYXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkgewoJCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkuYXR0ciwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7CgkJfSwKCgkJcmVtb3ZlQXR0cjogZnVuY3Rpb24oIG5hbWUgKSB7CgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJalF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTsKCQkJfSApOwoJCX0KCX0gKTsKCglqUXVlcnkuZXh0ZW5kKCB7CgkJYXR0cjogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkgewoJCQl2YXIgcmV0LCBob29rcywKCQkJCW5UeXBlID0gZWxlbS5ub2RlVHlwZTsKCgkJCS8vIERvbid0IGdldC9zZXQgYXR0cmlidXRlcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXMKCQkJaWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJLy8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQKCQkJaWYgKCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgPT09ICJ1bmRlZmluZWQiICkgewoJCQkJcmV0dXJuIGpRdWVyeS5wcm9wKCBlbGVtLCBuYW1lLCB2YWx1ZSApOwoJCQl9CgoJCQkvLyBBbGwgYXR0cmlidXRlcyBhcmUgbG93ZXJjYXNlCgkJCS8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWQKCQkJaWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7CgkJCQluYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpOwoJCQkJaG9va3MgPSBqUXVlcnkuYXR0ckhvb2tzWyBuYW1lIF0gfHwKCQkJCQkoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiBub2RlSG9vayApOwoJCQl9CgoJCQlpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7CgkJCQlpZiAoIHZhbHVlID09PSBudWxsICkgewoJCQkJCWpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCWlmICggaG9va3MgJiYgInNldCIgaW4gaG9va3MgJiYKCQkJCQkoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7CgkJCQkJcmV0dXJuIHJldDsKCQkJCX0KCgkJCQllbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyAiIiApOwoJCQkJcmV0dXJuIHZhbHVlOwoJCQl9CgoJCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHsKCQkJCXJldHVybiByZXQ7CgkJCX0KCgkJCXJldCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIG5hbWUgKTsKCgkJCS8vIE5vbi1leGlzdGVudCBhdHRyaWJ1dGVzIHJldHVybiBudWxsLCB3ZSBub3JtYWxpemUgdG8gdW5kZWZpbmVkCgkJCXJldHVybiByZXQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJldDsKCQl9LAoKCQlhdHRySG9va3M6IHsKCQkJdHlwZTogewoJCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQkJaWYgKCAhc3VwcG9ydC5yYWRpb1ZhbHVlICYmIHZhbHVlID09PSAicmFkaW8iICYmCgkJCQkJCWpRdWVyeS5ub2RlTmFtZSggZWxlbSwgImlucHV0IiApICkgewoKCQkJCQkJLy8gU2V0dGluZyB0aGUgdHlwZSBvbiBhIHJhZGlvIGJ1dHRvbiBhZnRlciB0aGUgdmFsdWUgcmVzZXRzIHRoZSB2YWx1ZSBpbiBJRTgtOQoJCQkJCQkvLyBSZXNldCB2YWx1ZSB0byBkZWZhdWx0IGluIGNhc2UgdHlwZSBpcyBzZXQgYWZ0ZXIgdmFsdWUgZHVyaW5nIGNyZWF0aW9uCgkJCQkJCXZhciB2YWwgPSBlbGVtLnZhbHVlOwoJCQkJCQllbGVtLnNldEF0dHJpYnV0ZSggInR5cGUiLCB2YWx1ZSApOwoJCQkJCQlpZiAoIHZhbCApIHsKCQkJCQkJCWVsZW0udmFsdWUgPSB2YWw7CgkJCQkJCX0KCQkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0sCgoJCXJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHsKCQkJdmFyIG5hbWUsIHByb3BOYW1lLAoJCQkJaSA9IDAsCgkJCQlhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7CgoJCQlpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQkJd2hpbGUgKCAoIG5hbWUgPSBhdHRyTmFtZXNbIGkrKyBdICkgKSB7CgkJCQkJcHJvcE5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7CgoJCQkJCS8vIEJvb2xlYW4gYXR0cmlidXRlcyBnZXQgc3BlY2lhbCB0cmVhdG1lbnQgKCMxMDg3MCkKCQkJCQlpZiAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApICkgewoKCQkJCQkJLy8gU2V0IGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgdG8gZmFsc2UKCQkJCQkJaWYgKCBnZXRTZXRJbnB1dCAmJiBnZXRTZXRBdHRyaWJ1dGUgfHwgIXJ1c2VEZWZhdWx0LnRlc3QoIG5hbWUgKSApIHsKCQkJCQkJCWVsZW1bIHByb3BOYW1lIF0gPSBmYWxzZTsKCgkJCQkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJCQkJLy8gQWxzbyBjbGVhciBkZWZhdWx0Q2hlY2tlZC9kZWZhdWx0U2VsZWN0ZWQgKGlmIGFwcHJvcHJpYXRlKQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJZWxlbVsgalF1ZXJ5LmNhbWVsQ2FzZSggImRlZmF1bHQtIiArIG5hbWUgKSBdID0KCQkJCQkJCQllbGVtWyBwcm9wTmFtZSBdID0gZmFsc2U7CgkJCQkJCX0KCgkJCQkJLy8gU2VlICM5Njk5IGZvciBleHBsYW5hdGlvbiBvZiB0aGlzIGFwcHJvYWNoIChzZXR0aW5nIGZpcnN0LCB0aGVuIHJlbW92YWwpCgkJCQkJfSBlbHNlIHsKCQkJCQkJalF1ZXJ5LmF0dHIoIGVsZW0sIG5hbWUsICIiICk7CgkJCQkJfQoKCQkJCQllbGVtLnJlbW92ZUF0dHJpYnV0ZSggZ2V0U2V0QXR0cmlidXRlID8gbmFtZSA6IHByb3BOYW1lICk7CgkJCQl9CgkJCX0KCQl9Cgl9ICk7CgoJLy8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlcwoJYm9vbEhvb2sgPSB7CgkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7CgkJCWlmICggdmFsdWUgPT09IGZhbHNlICkgewoKCQkJCS8vIFJlbW92ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2hlbiBzZXQgdG8gZmFsc2UKCQkJCWpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7CgkJCX0gZWxzZSBpZiAoIGdldFNldElucHV0ICYmIGdldFNldEF0dHJpYnV0ZSB8fCAhcnVzZURlZmF1bHQudGVzdCggbmFtZSApICkgewoKCQkJCS8vIElFPDggbmVlZHMgdGhlICpwcm9wZXJ0eSogbmFtZQoJCQkJZWxlbS5zZXRBdHRyaWJ1dGUoICFnZXRTZXRBdHRyaWJ1dGUgJiYgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lLCBuYW1lICk7CgoJCQl9IGVsc2UgewoKCQkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJCS8vIFVzZSBkZWZhdWx0Q2hlY2tlZCBhbmQgZGVmYXVsdFNlbGVjdGVkIGZvciBvbGRJRQoJCQkJZWxlbVsgalF1ZXJ5LmNhbWVsQ2FzZSggImRlZmF1bHQtIiArIG5hbWUgKSBdID0gZWxlbVsgbmFtZSBdID0gdHJ1ZTsKCQkJfQoJCQlyZXR1cm4gbmFtZTsKCQl9Cgl9OwoKCWpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1x3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkgewoJCXZhciBnZXR0ZXIgPSBhdHRySGFuZGxlWyBuYW1lIF0gfHwgalF1ZXJ5LmZpbmQuYXR0cjsKCgkJaWYgKCBnZXRTZXRJbnB1dCAmJiBnZXRTZXRBdHRyaWJ1dGUgfHwgIXJ1c2VEZWZhdWx0LnRlc3QoIG5hbWUgKSApIHsKCQkJYXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCQkJdmFyIHJldCwgaGFuZGxlOwoJCQkJaWYgKCAhaXNYTUwgKSB7CgoJCQkJCS8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3AgYnkgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBnZXR0ZXIKCQkJCQloYW5kbGUgPSBhdHRySGFuZGxlWyBuYW1lIF07CgkJCQkJYXR0ckhhbmRsZVsgbmFtZSBdID0gcmV0OwoJCQkJCXJldCA9IGdldHRlciggZWxlbSwgbmFtZSwgaXNYTUwgKSAhPSBudWxsID8KCQkJCQkJbmFtZS50b0xvd2VyQ2FzZSgpIDoKCQkJCQkJbnVsbDsKCQkJCQlhdHRySGFuZGxlWyBuYW1lIF0gPSBoYW5kbGU7CgkJCQl9CgkJCQlyZXR1cm4gcmV0OwoJCQl9OwoJCX0gZWxzZSB7CgkJCWF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHsKCQkJCWlmICggIWlzWE1MICkgewoJCQkJCXJldHVybiBlbGVtWyBqUXVlcnkuY2FtZWxDYXNlKCAiZGVmYXVsdC0iICsgbmFtZSApIF0gPwoJCQkJCQluYW1lLnRvTG93ZXJDYXNlKCkgOgoJCQkJCQludWxsOwoJCQkJfQoJCQl9OwoJCX0KCX0gKTsKCgkvLyBmaXggb2xkSUUgYXR0cm9wZXJ0aWVzCglpZiAoICFnZXRTZXRJbnB1dCB8fCAhZ2V0U2V0QXR0cmlidXRlICkgewoJCWpRdWVyeS5hdHRySG9va3MudmFsdWUgPSB7CgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkgewoJCQkJaWYgKCBqUXVlcnkubm9kZU5hbWUoIGVsZW0sICJpbnB1dCIgKSApIHsKCgkJCQkJLy8gRG9lcyBub3QgcmV0dXJuIHNvIHRoYXQgc2V0QXR0cmlidXRlIGlzIGFsc28gdXNlZAoJCQkJCWVsZW0uZGVmYXVsdFZhbHVlID0gdmFsdWU7CgkJCQl9IGVsc2UgewoKCQkJCQkvLyBVc2Ugbm9kZUhvb2sgaWYgZGVmaW5lZCAoIzE5NTQpOyBvdGhlcndpc2Ugc2V0QXR0cmlidXRlIGlzIGZpbmUKCQkJCQlyZXR1cm4gbm9kZUhvb2sgJiYgbm9kZUhvb2suc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApOwoJCQkJfQoJCQl9CgkJfTsKCX0KCgkvLyBJRTYvNyBkbyBub3Qgc3VwcG9ydCBnZXR0aW5nL3NldHRpbmcgc29tZSBhdHRyaWJ1dGVzIHdpdGggZ2V0L3NldEF0dHJpYnV0ZQoJaWYgKCAhZ2V0U2V0QXR0cmlidXRlICkgewoKCQkvLyBVc2UgdGhpcyBmb3IgYW55IGF0dHJpYnV0ZSBpbiBJRTYvNwoJCS8vIFRoaXMgZml4ZXMgYWxtb3N0IGV2ZXJ5IElFNi83IGlzc3VlCgkJbm9kZUhvb2sgPSB7CgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkgewoKCQkJCS8vIFNldCB0aGUgZXhpc3Rpbmcgb3IgY3JlYXRlIGEgbmV3IGF0dHJpYnV0ZSBub2RlCgkJCQl2YXIgcmV0ID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICk7CgkJCQlpZiAoICFyZXQgKSB7CgkJCQkJZWxlbS5zZXRBdHRyaWJ1dGVOb2RlKAoJCQkJCQkoIHJldCA9IGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoIG5hbWUgKSApCgkJCQkJKTsKCQkJCX0KCgkJCQlyZXQudmFsdWUgPSB2YWx1ZSArPSAiIjsKCgkJCQkvLyBCcmVhayBhc3NvY2lhdGlvbiB3aXRoIGNsb25lZCBlbGVtZW50cyBieSBhbHNvIHVzaW5nIHNldEF0dHJpYnV0ZSAoIzk2NDYpCgkJCQlpZiAoIG5hbWUgPT09ICJ2YWx1ZSIgfHwgdmFsdWUgPT09IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgKSB7CgkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJfQoJCQl9CgkJfTsKCgkJLy8gU29tZSBhdHRyaWJ1dGVzIGFyZSBjb25zdHJ1Y3RlZCB3aXRoIGVtcHR5LXN0cmluZyB2YWx1ZXMgd2hlbiBub3QgZGVmaW5lZAoJCWF0dHJIYW5kbGUuaWQgPSBhdHRySGFuZGxlLm5hbWUgPSBhdHRySGFuZGxlLmNvb3JkcyA9CgkJCWZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHsKCQkJCXZhciByZXQ7CgkJCQlpZiAoICFpc1hNTCApIHsKCQkJCQlyZXR1cm4gKCByZXQgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKSApICYmIHJldC52YWx1ZSAhPT0gIiIgPwoJCQkJCQlyZXQudmFsdWUgOgoJCQkJCQludWxsOwoJCQkJfQoJCQl9OwoKCQkvLyBGaXhpbmcgdmFsdWUgcmV0cmlldmFsIG9uIGEgYnV0dG9uIHJlcXVpcmVzIHRoaXMgbW9kdWxlCgkJalF1ZXJ5LnZhbEhvb2tzLmJ1dHRvbiA9IHsKCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHsKCQkJCXZhciByZXQgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKTsKCQkJCWlmICggcmV0ICYmIHJldC5zcGVjaWZpZWQgKSB7CgkJCQkJcmV0dXJuIHJldC52YWx1ZTsKCQkJCX0KCQkJfSwKCQkJc2V0OiBub2RlSG9vay5zZXQKCQl9OwoKCQkvLyBTZXQgY29udGVudGVkaXRhYmxlIHRvIGZhbHNlIG9uIHJlbW92YWxzKCMxMDQyOSkKCQkvLyBTZXR0aW5nIHRvIGVtcHR5IHN0cmluZyB0aHJvd3MgYW4gZXJyb3IgYXMgYW4gaW52YWxpZCB2YWx1ZQoJCWpRdWVyeS5hdHRySG9va3MuY29udGVudGVkaXRhYmxlID0gewoJCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHsKCQkJCW5vZGVIb29rLnNldCggZWxlbSwgdmFsdWUgPT09ICIiID8gZmFsc2UgOiB2YWx1ZSwgbmFtZSApOwoJCQl9CgkJfTsKCgkJLy8gU2V0IHdpZHRoIGFuZCBoZWlnaHQgdG8gYXV0byBpbnN0ZWFkIG9mIDAgb24gZW1wdHkgc3RyaW5nKCBCdWcgIzgxNTAgKQoJCS8vIFRoaXMgaXMgZm9yIHJlbW92YWxzCgkJalF1ZXJ5LmVhY2goIFsgIndpZHRoIiwgImhlaWdodCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7CgkJCWpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSA9IHsKCQkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQkJCWlmICggdmFsdWUgPT09ICIiICkgewoJCQkJCQllbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgImF1dG8iICk7CgkJCQkJCXJldHVybiB2YWx1ZTsKCQkJCQl9CgkJCQl9CgkJCX07CgkJfSApOwoJfQoKCWlmICggIXN1cHBvcnQuc3R5bGUgKSB7CgkJalF1ZXJ5LmF0dHJIb29rcy5zdHlsZSA9IHsKCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCgkJCQkvLyBSZXR1cm4gdW5kZWZpbmVkIGluIHRoZSBjYXNlIG9mIGVtcHR5IHN0cmluZwoJCQkJLy8gTm90ZTogSUUgdXBwZXJjYXNlcyBjc3MgcHJvcGVydHkgbmFtZXMsIGJ1dCBpZiB3ZSB3ZXJlIHRvIC50b0xvd2VyQ2FzZSgpCgkJCQkvLyAuY3NzVGV4dCwgdGhhdCB3b3VsZCBkZXN0cm95IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gVVJMJ3MsIGxpa2UgaW4gImJhY2tncm91bmQiCgkJCQlyZXR1cm4gZWxlbS5zdHlsZS5jc3NUZXh0IHx8IHVuZGVmaW5lZDsKCQkJfSwKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQlyZXR1cm4gKCBlbGVtLnN0eWxlLmNzc1RleHQgPSB2YWx1ZSArICIiICk7CgkJCX0KCQl9OwoJfQoKCgoKCXZhciByZm9jdXNhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksCgkJcmNsaWNrYWJsZSA9IC9eKD86YXxhcmVhKSQvaTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJcHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkgewoJCQlyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkucHJvcCwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7CgkJfSwKCgkJcmVtb3ZlUHJvcDogZnVuY3Rpb24oIG5hbWUgKSB7CgkJCW5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7CgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoKCQkJCS8vIHRyeS9jYXRjaCBoYW5kbGVzIGNhc2VzIHdoZXJlIElFIGJhbGtzIChzdWNoIGFzIHJlbW92aW5nIGEgcHJvcGVydHkgb24gd2luZG93KQoJCQkJdHJ5IHsKCQkJCQl0aGlzWyBuYW1lIF0gPSB1bmRlZmluZWQ7CgkJCQkJZGVsZXRlIHRoaXNbIG5hbWUgXTsKCQkJCX0gY2F0Y2ggKCBlICkge30KCQkJfSApOwoJCX0KCX0gKTsKCglqUXVlcnkuZXh0ZW5kKCB7CgkJcHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkgewoJCQl2YXIgcmV0LCBob29rcywKCQkJCW5UeXBlID0gZWxlbS5ub2RlVHlwZTsKCgkJCS8vIERvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXMKCQkJaWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJaWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7CgoJCQkJLy8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rcwoJCQkJbmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTsKCQkJCWhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdOwoJCQl9CgoJCQlpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7CgkJCQlpZiAoIGhvb2tzICYmICJzZXQiIGluIGhvb2tzICYmCgkJCQkJKCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkgewoJCQkJCXJldHVybiByZXQ7CgkJCQl9CgoJCQkJcmV0dXJuICggZWxlbVsgbmFtZSBdID0gdmFsdWUgKTsKCQkJfQoKCQkJaWYgKCBob29rcyAmJiAiZ2V0IiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7CgkJCQlyZXR1cm4gcmV0OwoJCQl9CgoJCQlyZXR1cm4gZWxlbVsgbmFtZSBdOwoJCX0sCgoJCXByb3BIb29rczogewoJCQl0YWJJbmRleDogewoJCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCgkJCQkJLy8gZWxlbS50YWJJbmRleCBkb2Vzbid0IGFsd2F5cyByZXR1cm4gdGhlCgkJCQkJLy8gY29ycmVjdCB2YWx1ZSB3aGVuIGl0IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgc2V0CgkJCQkJLy8gaHR0cDovL2ZsdWlkcHJvamVjdC5vcmcvYmxvZy8yMDA4LzAxLzA5L2dldHRpbmctc2V0dGluZy1hbmQtcmVtb3ZpbmctdGFiaW5kZXgtdmFsdWVzLXdpdGgtamF2YXNjcmlwdC8KCQkJCQkvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzEyMDcyKQoJCQkJCXZhciB0YWJpbmRleCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sICJ0YWJpbmRleCIgKTsKCgkJCQkJcmV0dXJuIHRhYmluZGV4ID8KCQkJCQkJcGFyc2VJbnQoIHRhYmluZGV4LCAxMCApIDoKCQkJCQkJcmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHwKCQkJCQkJCXJjbGlja2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApICYmIGVsZW0uaHJlZiA/CgkJCQkJCQkJMCA6CgkJCQkJCQkJLTE7CgkJCQl9CgkJCX0KCQl9LAoKCQlwcm9wRml4OiB7CgkJCSJmb3IiOiAiaHRtbEZvciIsCgkJCSJjbGFzcyI6ICJjbGFzc05hbWUiCgkJfQoJfSApOwoKCS8vIFNvbWUgYXR0cmlidXRlcyByZXF1aXJlIGEgc3BlY2lhbCBjYWxsIG9uIElFCgkvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4CglpZiAoICFzdXBwb3J0LmhyZWZOb3JtYWxpemVkICkgewoKCQkvLyBocmVmL3NyYyBwcm9wZXJ0eSBzaG91bGQgZ2V0IHRoZSBmdWxsIG5vcm1hbGl6ZWQgVVJMICgjMTAyOTkvIzEyOTE1KQoJCWpRdWVyeS5lYWNoKCBbICJocmVmIiwgInNyYyIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7CgkJCWpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXSA9IHsKCQkJCWdldDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCA0ICk7CgkJCQl9CgkJCX07CgkJfSApOwoJfQoKCS8vIFN1cHBvcnQ6IFNhZmFyaSwgSUU5KwoJLy8gQWNjZXNzaW5nIHRoZSBzZWxlY3RlZEluZGV4IHByb3BlcnR5CgkvLyBmb3JjZXMgdGhlIGJyb3dzZXIgdG8gcmVzcGVjdCBzZXR0aW5nIHNlbGVjdGVkCgkvLyBvbiB0aGUgb3B0aW9uCgkvLyBUaGUgZ2V0dGVyIGVuc3VyZXMgYSBkZWZhdWx0IG9wdGlvbiBpcyBzZWxlY3RlZAoJLy8gd2hlbiBpbiBhbiBvcHRncm91cAoJaWYgKCAhc3VwcG9ydC5vcHRTZWxlY3RlZCApIHsKCQlqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0gewoJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJdmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTsKCgkJCQlpZiAoIHBhcmVudCApIHsKCQkJCQlwYXJlbnQuc2VsZWN0ZWRJbmRleDsKCgkJCQkJLy8gTWFrZSBzdXJlIHRoYXQgaXQgYWxzbyB3b3JrcyB3aXRoIG9wdGdyb3Vwcywgc2VlICM1NzAxCgkJCQkJaWYgKCBwYXJlbnQucGFyZW50Tm9kZSApIHsKCQkJCQkJcGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gbnVsbDsKCQkJfSwKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7CgkJCQlpZiAoIHBhcmVudCApIHsKCQkJCQlwYXJlbnQuc2VsZWN0ZWRJbmRleDsKCgkJCQkJaWYgKCBwYXJlbnQucGFyZW50Tm9kZSApIHsKCQkJCQkJcGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9OwoJfQoKCWpRdWVyeS5lYWNoKCBbCgkJInRhYkluZGV4IiwKCQkicmVhZE9ubHkiLAoJCSJtYXhMZW5ndGgiLAoJCSJjZWxsU3BhY2luZyIsCgkJImNlbGxQYWRkaW5nIiwKCQkicm93U3BhbiIsCgkJImNvbFNwYW4iLAoJCSJ1c2VNYXAiLAoJCSJmcmFtZUJvcmRlciIsCgkJImNvbnRlbnRFZGl0YWJsZSIKCV0sIGZ1bmN0aW9uKCkgewoJCWpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7Cgl9ICk7CgoJLy8gSUU2LzcgY2FsbCBlbmN0eXBlIGVuY29kaW5nCglpZiAoICFzdXBwb3J0LmVuY3R5cGUgKSB7CgkJalF1ZXJ5LnByb3BGaXguZW5jdHlwZSA9ICJlbmNvZGluZyI7Cgl9CgoKCgoJdmFyIHJjbGFzcyA9IC9bXHRcclxuXGZdL2c7CgoJZnVuY3Rpb24gZ2V0Q2xhc3MoIGVsZW0gKSB7CgkJcmV0dXJuIGpRdWVyeS5hdHRyKCBlbGVtLCAiY2xhc3MiICkgfHwgIiI7Cgl9CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCWFkZENsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCXZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSwKCQkJCWkgPSAwOwoKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHsKCQkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkgewoJCQkJCWpRdWVyeSggdGhpcyApLmFkZENsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCBnZXRDbGFzcyggdGhpcyApICkgKTsKCQkJCX0gKTsKCQkJfQoKCQkJaWYgKCB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciICYmIHZhbHVlICkgewoJCQkJY2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTsKCgkJCQl3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7CgkJCQkJY3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApOwoJCQkJCWN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYKCQkJCQkJKCAiICIgKyBjdXJWYWx1ZSArICIgIiApLnJlcGxhY2UoIHJjbGFzcywgIiAiICk7CgoJCQkJCWlmICggY3VyICkgewoJCQkJCQlqID0gMDsKCQkJCQkJd2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHsKCQkJCQkJCWlmICggY3VyLmluZGV4T2YoICIgIiArIGNsYXp6ICsgIiAiICkgPCAwICkgewoJCQkJCQkJCWN1ciArPSBjbGF6eiArICIgIjsKCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJLy8gb25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy4KCQkJCQkJZmluYWxWYWx1ZSA9IGpRdWVyeS50cmltKCBjdXIgKTsKCQkJCQkJaWYgKCBjdXJWYWx1ZSAhPT0gZmluYWxWYWx1ZSApIHsKCQkJCQkJCWpRdWVyeS5hdHRyKCBlbGVtLCAiY2xhc3MiLCBmaW5hbFZhbHVlICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0aGlzOwoJCX0sCgoJCXJlbW92ZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCXZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSwKCQkJCWkgPSAwOwoKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHsKCQkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkgewoJCQkJCWpRdWVyeSggdGhpcyApLnJlbW92ZUNsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCBnZXRDbGFzcyggdGhpcyApICkgKTsKCQkJCX0gKTsKCQkJfQoKCQkJaWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJCXJldHVybiB0aGlzLmF0dHIoICJjbGFzcyIsICIiICk7CgkJCX0KCgkJCWlmICggdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiAmJiB2YWx1ZSApIHsKCQkJCWNsYXNzZXMgPSB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107CgoJCQkJd2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkgewoJCQkJCWN1clZhbHVlID0gZ2V0Q2xhc3MoIGVsZW0gKTsKCgkJCQkJLy8gVGhpcyBleHByZXNzaW9uIGlzIGhlcmUgZm9yIGJldHRlciBjb21wcmVzc2liaWxpdHkgKHNlZSBhZGRDbGFzcykKCQkJCQljdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmCgkJCQkJCSggIiAiICsgY3VyVmFsdWUgKyAiICIgKS5yZXBsYWNlKCByY2xhc3MsICIgIiApOwoKCQkJCQlpZiAoIGN1ciApIHsKCQkJCQkJaiA9IDA7CgkJCQkJCXdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7CgoJCQkJCQkJLy8gUmVtb3ZlICphbGwqIGluc3RhbmNlcwoJCQkJCQkJd2hpbGUgKCBjdXIuaW5kZXhPZiggIiAiICsgY2xhenogKyAiICIgKSA+IC0xICkgewoJCQkJCQkJCWN1ciA9IGN1ci5yZXBsYWNlKCAiICIgKyBjbGF6eiArICIgIiwgIiAiICk7CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCS8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuCgkJCQkJCWZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7CgkJCQkJCWlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7CgkJCQkJCQlqUXVlcnkuYXR0ciggZWxlbSwgImNsYXNzIiwgZmluYWxWYWx1ZSApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gdGhpczsKCQl9LAoKCQl0b2dnbGVDbGFzczogZnVuY3Rpb24oIHZhbHVlLCBzdGF0ZVZhbCApIHsKCQkJdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7CgoJCQlpZiAoIHR5cGVvZiBzdGF0ZVZhbCA9PT0gImJvb2xlYW4iICYmIHR5cGUgPT09ICJzdHJpbmciICkgewoJCQkJcmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7CgkJCX0KCgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7CgkJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHsKCQkJCQlqUXVlcnkoIHRoaXMgKS50b2dnbGVDbGFzcygKCQkJCQkJdmFsdWUuY2FsbCggdGhpcywgaSwgZ2V0Q2xhc3MoIHRoaXMgKSwgc3RhdGVWYWwgKSwKCQkJCQkJc3RhdGVWYWwKCQkJCQkpOwoJCQkJfSApOwoJCQl9CgoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCXZhciBjbGFzc05hbWUsIGksIHNlbGYsIGNsYXNzTmFtZXM7CgoJCQkJaWYgKCB0eXBlID09PSAic3RyaW5nIiApIHsKCgkJCQkJLy8gVG9nZ2xlIGluZGl2aWR1YWwgY2xhc3MgbmFtZXMKCQkJCQlpID0gMDsKCQkJCQlzZWxmID0galF1ZXJ5KCB0aGlzICk7CgkJCQkJY2xhc3NOYW1lcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTsKCgkJCQkJd2hpbGUgKCAoIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdICkgKSB7CgoJCQkJCQkvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3QKCQkJCQkJaWYgKCBzZWxmLmhhc0NsYXNzKCBjbGFzc05hbWUgKSApIHsKCQkJCQkJCXNlbGYucmVtb3ZlQ2xhc3MoIGNsYXNzTmFtZSApOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJc2VsZi5hZGRDbGFzcyggY2xhc3NOYW1lICk7CgkJCQkJCX0KCQkJCQl9CgoJCQkJLy8gVG9nZ2xlIHdob2xlIGNsYXNzIG5hbWUKCQkJCX0gZWxzZSBpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdHlwZSA9PT0gImJvb2xlYW4iICkgewoJCQkJCWNsYXNzTmFtZSA9IGdldENsYXNzKCB0aGlzICk7CgkJCQkJaWYgKCBjbGFzc05hbWUgKSB7CgoJCQkJCQkvLyBzdG9yZSBjbGFzc05hbWUgaWYgc2V0CgkJCQkJCWpRdWVyeS5fZGF0YSggdGhpcywgIl9fY2xhc3NOYW1lX18iLCBjbGFzc05hbWUgKTsKCQkJCQl9CgoJCQkJCS8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkICJmYWxzZSIsCgkJCQkJLy8gdGhlbiByZW1vdmUgdGhlIHdob2xlIGNsYXNzbmFtZSAoaWYgdGhlcmUgd2FzIG9uZSwgdGhlIGFib3ZlIHNhdmVkIGl0KS4KCQkJCQkvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLAoJCQkJCS8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC4KCQkJCQlqUXVlcnkuYXR0ciggdGhpcywgImNsYXNzIiwKCQkJCQkJY2xhc3NOYW1lIHx8IHZhbHVlID09PSBmYWxzZSA/CgkJCQkJCSIiIDoKCQkJCQkJalF1ZXJ5Ll9kYXRhKCB0aGlzLCAiX19jbGFzc05hbWVfXyIgKSB8fCAiIgoJCQkJCSk7CgkJCQl9CgkJCX0gKTsKCQl9LAoKCQloYXNDbGFzczogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQl2YXIgY2xhc3NOYW1lLCBlbGVtLAoJCQkJaSA9IDA7CgoJCQljbGFzc05hbWUgPSAiICIgKyBzZWxlY3RvciArICIgIjsKCQkJd2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkgewoJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmCgkJCQkJKCAiICIgKyBnZXRDbGFzcyggZWxlbSApICsgIiAiICkucmVwbGFjZSggcmNsYXNzLCAiICIgKQoJCQkJCQkuaW5kZXhPZiggY2xhc3NOYW1lICkgPiAtMQoJCQkJKSB7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CgkJCX0KCgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9ICk7CgoKCgoJLy8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvbgoKCglqUXVlcnkuZWFjaCggKCAiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgIiArCgkJIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlICIgKwoJCSJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51IiApLnNwbGl0KCAiICIgKSwKCQlmdW5jdGlvbiggaSwgbmFtZSApIHsKCgkJLy8gSGFuZGxlIGV2ZW50IGJpbmRpbmcKCQlqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBkYXRhLCBmbiApIHsKCQkJcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID8KCQkJCXRoaXMub24oIG5hbWUsIG51bGwsIGRhdGEsIGZuICkgOgoJCQkJdGhpcy50cmlnZ2VyKCBuYW1lICk7CgkJfTsKCX0gKTsKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgkJaG92ZXI6IGZ1bmN0aW9uKCBmbk92ZXIsIGZuT3V0ICkgewoJCQlyZXR1cm4gdGhpcy5tb3VzZWVudGVyKCBmbk92ZXIgKS5tb3VzZWxlYXZlKCBmbk91dCB8fCBmbk92ZXIgKTsKCQl9Cgl9ICk7CgoKCXZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjsKCgl2YXIgbm9uY2UgPSBqUXVlcnkubm93KCk7CgoJdmFyIHJxdWVyeSA9ICggL1w/LyApOwoKCgoJdmFyIHJ2YWxpZHRva2VucyA9IC8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7CgoJalF1ZXJ5LnBhcnNlSlNPTiA9IGZ1bmN0aW9uKCBkYXRhICkgewoKCQkvLyBBdHRlbXB0IHRvIHBhcnNlIHVzaW5nIHRoZSBuYXRpdmUgSlNPTiBwYXJzZXIgZmlyc3QKCQlpZiAoIHdpbmRvdy5KU09OICYmIHdpbmRvdy5KU09OLnBhcnNlICkgewoKCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMKCQkJLy8gV29ya2Fyb3VuZCBmYWlsdXJlIHRvIHN0cmluZy1jYXN0IG51bGwgaW5wdXQKCQkJcmV0dXJuIHdpbmRvdy5KU09OLnBhcnNlKCBkYXRhICsgIiIgKTsKCQl9CgoJCXZhciByZXF1aXJlTm9uQ29tbWEsCgkJCWRlcHRoID0gbnVsbCwKCQkJc3RyID0galF1ZXJ5LnRyaW0oIGRhdGEgKyAiIiApOwoKCQkvLyBHdWFyZCBhZ2FpbnN0IGludmFsaWQgKGFuZCBwb3NzaWJseSBkYW5nZXJvdXMpIGlucHV0IGJ5IGVuc3VyaW5nIHRoYXQgbm90aGluZyByZW1haW5zCgkJLy8gYWZ0ZXIgcmVtb3ZpbmcgdmFsaWQgdG9rZW5zCgkJcmV0dXJuIHN0ciAmJiAhalF1ZXJ5LnRyaW0oIHN0ci5yZXBsYWNlKCBydmFsaWR0b2tlbnMsIGZ1bmN0aW9uKCB0b2tlbiwgY29tbWEsIG9wZW4sIGNsb3NlICkgewoKCQkJLy8gRm9yY2UgdGVybWluYXRpb24gaWYgd2Ugc2VlIGEgbWlzcGxhY2VkIGNvbW1hCgkJCWlmICggcmVxdWlyZU5vbkNvbW1hICYmIGNvbW1hICkgewoJCQkJZGVwdGggPSAwOwoJCQl9CgoJCQkvLyBQZXJmb3JtIG5vIG1vcmUgcmVwbGFjZW1lbnRzIGFmdGVyIHJldHVybmluZyB0byBvdXRlcm1vc3QgZGVwdGgKCQkJaWYgKCBkZXB0aCA9PT0gMCApIHsKCQkJCXJldHVybiB0b2tlbjsKCQkJfQoKCQkJLy8gQ29tbWFzIG11c3Qgbm90IGZvbGxvdyAiWyIsICJ7Iiwgb3IgIiwiCgkJCXJlcXVpcmVOb25Db21tYSA9IG9wZW4gfHwgY29tbWE7CgoJCQkvLyBEZXRlcm1pbmUgbmV3IGRlcHRoCgkJCS8vIGFycmF5L29iamVjdCBvcGVuICgiWyIgb3IgInsiKTogZGVwdGggKz0gdHJ1ZSAtIGZhbHNlIChpbmNyZW1lbnQpCgkJCS8vIGFycmF5L29iamVjdCBjbG9zZSAoIl0iIG9yICJ9Iik6IGRlcHRoICs9IGZhbHNlIC0gdHJ1ZSAoZGVjcmVtZW50KQoJCQkvLyBvdGhlciBjYXNlcyAoIiwiIG9yIHByaW1pdGl2ZSk6IGRlcHRoICs9IHRydWUgLSB0cnVlIChudW1lcmljIGNhc3QpCgkJCWRlcHRoICs9ICFjbG9zZSAtICFvcGVuOwoKCQkJLy8gUmVtb3ZlIHRoaXMgdG9rZW4KCQkJcmV0dXJuICIiOwoJCX0gKSApID8KCQkJKCBGdW5jdGlvbiggInJldHVybiAiICsgc3RyICkgKSgpIDoKCQkJalF1ZXJ5LmVycm9yKCAiSW52YWxpZCBKU09OOiAiICsgZGF0YSApOwoJfTsKCgoJLy8gQ3Jvc3MtYnJvd3NlciB4bWwgcGFyc2luZwoJalF1ZXJ5LnBhcnNlWE1MID0gZnVuY3Rpb24oIGRhdGEgKSB7CgkJdmFyIHhtbCwgdG1wOwoJCWlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09ICJzdHJpbmciICkgewoJCQlyZXR1cm4gbnVsbDsKCQl9CgkJdHJ5IHsKCQkJaWYgKCB3aW5kb3cuRE9NUGFyc2VyICkgeyAvLyBTdGFuZGFyZAoJCQkJdG1wID0gbmV3IHdpbmRvdy5ET01QYXJzZXIoKTsKCQkJCXhtbCA9IHRtcC5wYXJzZUZyb21TdHJpbmcoIGRhdGEsICJ0ZXh0L3htbCIgKTsKCQkJfSBlbHNlIHsgLy8gSUUKCQkJCXhtbCA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCggIk1pY3Jvc29mdC5YTUxET00iICk7CgkJCQl4bWwuYXN5bmMgPSAiZmFsc2UiOwoJCQkJeG1sLmxvYWRYTUwoIGRhdGEgKTsKCQkJfQoJCX0gY2F0Y2ggKCBlICkgewoJCQl4bWwgPSB1bmRlZmluZWQ7CgkJfQoJCWlmICggIXhtbCB8fCAheG1sLmRvY3VtZW50RWxlbWVudCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJwYXJzZXJlcnJvciIgKS5sZW5ndGggKSB7CgkJCWpRdWVyeS5lcnJvciggIkludmFsaWQgWE1MOiAiICsgZGF0YSApOwoJCX0KCQlyZXR1cm4geG1sOwoJfTsKCgoJdmFyCgkJcmhhc2ggPSAvIy4qJC8sCgkJcnRzID0gLyhbPyZdKV89W14mXSovLAoKCQkvLyBJRSBsZWF2ZXMgYW4gXHIgY2hhcmFjdGVyIGF0IEVPTAoJCXJoZWFkZXJzID0gL14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9tZywKCgkJLy8gIzc2NTMsICM4MTI1LCAjODE1MjogbG9jYWwgcHJvdG9jb2wgZGV0ZWN0aW9uCgkJcmxvY2FsUHJvdG9jb2wgPSAvXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLywKCQlybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLywKCQlycHJvdG9jb2wgPSAvXlwvXC8vLAoJCXJ1cmwgPSAvXihbXHcuKy1dKzopKD86XC9cLyg/OlteXC8/I10qQHwpKFteXC8/IzpdKikoPzo6KFxkKyl8KXwpLywKCgkJLyogUHJlZmlsdGVycwoJCSAqIDEpIFRoZXkgYXJlIHVzZWZ1bCB0byBpbnRyb2R1Y2UgY3VzdG9tIGRhdGFUeXBlcyAoc2VlIGFqYXgvanNvbnAuanMgZm9yIGFuIGV4YW1wbGUpCgkJICogMikgVGhlc2UgYXJlIGNhbGxlZDoKCQkgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0CgkJICogICAgLSBBRlRFUiBwYXJhbSBzZXJpYWxpemF0aW9uIChzLmRhdGEgaXMgYSBzdHJpbmcgaWYgcy5wcm9jZXNzRGF0YSBpcyB0cnVlKQoJCSAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGUKCQkgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sICIqIiBjYW4gYmUgdXNlZAoJCSAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gIioiIGlmIG5lZWRlZAoJCSAqLwoJCXByZWZpbHRlcnMgPSB7fSwKCgkJLyogVHJhbnNwb3J0cyBiaW5kaW5ncwoJCSAqIDEpIGtleSBpcyB0aGUgZGF0YVR5cGUKCQkgKiAyKSB0aGUgY2F0Y2hhbGwgc3ltYm9sICIqIiBjYW4gYmUgdXNlZAoJCSAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvICIqIiBpZiBuZWVkZWQKCQkgKi8KCQl0cmFuc3BvcnRzID0ge30sCgoJCS8vIEF2b2lkIGNvbW1lbnQtcHJvbG9nIGNoYXIgc2VxdWVuY2UgKCMxMDA5OCk7IG11c3QgYXBwZWFzZSBsaW50IGFuZCBldmFkZSBjb21wcmVzc2lvbgoJCWFsbFR5cGVzID0gIiovIi5jb25jYXQoICIqIiApLAoKCQkvLyBEb2N1bWVudCBsb2NhdGlvbgoJCWFqYXhMb2NhdGlvbiA9IGxvY2F0aW9uLmhyZWYsCgoJCS8vIFNlZ21lbnQgbG9jYXRpb24gaW50byBwYXJ0cwoJCWFqYXhMb2NQYXJ0cyA9IHJ1cmwuZXhlYyggYWpheExvY2F0aW9uLnRvTG93ZXJDYXNlKCkgKSB8fCBbXTsKCgkvLyBCYXNlICJjb25zdHJ1Y3RvciIgZm9yIGpRdWVyeS5hamF4UHJlZmlsdGVyIGFuZCBqUXVlcnkuYWpheFRyYW5zcG9ydAoJZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7CgoJCS8vIGRhdGFUeXBlRXhwcmVzc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gIioiCgkJcmV0dXJuIGZ1bmN0aW9uKCBkYXRhVHlwZUV4cHJlc3Npb24sIGZ1bmMgKSB7CgoJCQlpZiAoIHR5cGVvZiBkYXRhVHlwZUV4cHJlc3Npb24gIT09ICJzdHJpbmciICkgewoJCQkJZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjsKCQkJCWRhdGFUeXBlRXhwcmVzc2lvbiA9ICIqIjsKCQkJfQoKCQkJdmFyIGRhdGFUeXBlLAoJCQkJaSA9IDAsCgkJCQlkYXRhVHlwZXMgPSBkYXRhVHlwZUV4cHJlc3Npb24udG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107CgoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBmdW5jICkgKSB7CgoJCQkJLy8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvbgoJCQkJd2hpbGUgKCAoIGRhdGFUeXBlID0gZGF0YVR5cGVzWyBpKysgXSApICkgewoKCQkJCQkvLyBQcmVwZW5kIGlmIHJlcXVlc3RlZAoJCQkJCWlmICggZGF0YVR5cGUuY2hhckF0KCAwICkgPT09ICIrIiApIHsKCQkJCQkJZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8ICIqIjsKCQkJCQkJKCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS51bnNoaWZ0KCBmdW5jICk7CgoJCQkJCS8vIE90aGVyd2lzZSBhcHBlbmQKCQkJCQl9IGVsc2UgewoJCQkJCQkoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnB1c2goIGZ1bmMgKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9OwoJfQoKCS8vIEJhc2UgaW5zcGVjdGlvbiBmdW5jdGlvbiBmb3IgcHJlZmlsdGVycyBhbmQgdHJhbnNwb3J0cwoJZnVuY3Rpb24gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSwgb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApIHsKCgkJdmFyIGluc3BlY3RlZCA9IHt9LAoJCQlzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTsKCgkJZnVuY3Rpb24gaW5zcGVjdCggZGF0YVR5cGUgKSB7CgkJCXZhciBzZWxlY3RlZDsKCQkJaW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTsKCQkJalF1ZXJ5LmVhY2goIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSwgZnVuY3Rpb24oIF8sIHByZWZpbHRlck9yRmFjdG9yeSApIHsKCQkJCXZhciBkYXRhVHlwZU9yVHJhbnNwb3J0ID0gcHJlZmlsdGVyT3JGYWN0b3J5KCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICk7CgkJCQlpZiAoIHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0ID09PSAic3RyaW5nIiAmJgoJCQkJCSFzZWVraW5nVHJhbnNwb3J0ICYmICFpbnNwZWN0ZWRbIGRhdGFUeXBlT3JUcmFuc3BvcnQgXSApIHsKCgkJCQkJb3B0aW9ucy5kYXRhVHlwZXMudW5zaGlmdCggZGF0YVR5cGVPclRyYW5zcG9ydCApOwoJCQkJCWluc3BlY3QoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9IGVsc2UgaWYgKCBzZWVraW5nVHJhbnNwb3J0ICkgewoJCQkJCXJldHVybiAhKCBzZWxlY3RlZCA9IGRhdGFUeXBlT3JUcmFuc3BvcnQgKTsKCQkJCX0KCQkJfSApOwoJCQlyZXR1cm4gc2VsZWN0ZWQ7CgkJfQoKCQlyZXR1cm4gaW5zcGVjdCggb3B0aW9ucy5kYXRhVHlwZXNbIDAgXSApIHx8ICFpbnNwZWN0ZWRbICIqIiBdICYmIGluc3BlY3QoICIqIiApOwoJfQoKCS8vIEEgc3BlY2lhbCBleHRlbmQgZm9yIGFqYXggb3B0aW9ucwoJLy8gdGhhdCB0YWtlcyAiZmxhdCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpCgkvLyBGaXhlcyAjOTg4NwoJZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7CgkJdmFyIGRlZXAsIGtleSwKCQkJZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9OwoKCQlmb3IgKCBrZXkgaW4gc3JjICkgewoJCQlpZiAoIHNyY1sga2V5IF0gIT09IHVuZGVmaW5lZCApIHsKCQkJCSggZmxhdE9wdGlvbnNbIGtleSBdID8gdGFyZ2V0IDogKCBkZWVwIHx8ICggZGVlcCA9IHt9ICkgKSApWyBrZXkgXSA9IHNyY1sga2V5IF07CgkJCX0KCQl9CgkJaWYgKCBkZWVwICkgewoJCQlqUXVlcnkuZXh0ZW5kKCB0cnVlLCB0YXJnZXQsIGRlZXAgKTsKCQl9CgoJCXJldHVybiB0YXJnZXQ7Cgl9CgoJLyogSGFuZGxlcyByZXNwb25zZXMgdG8gYW4gYWpheCByZXF1ZXN0OgoJICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSkKCSAqIC0gcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZQoJICovCglmdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkgewoJCXZhciBmaXJzdERhdGFUeXBlLCBjdCwgZmluYWxEYXRhVHlwZSwgdHlwZSwKCQkJY29udGVudHMgPSBzLmNvbnRlbnRzLAoJCQlkYXRhVHlwZXMgPSBzLmRhdGFUeXBlczsKCgkJLy8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3MKCQl3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSAiKiIgKSB7CgkJCWRhdGFUeXBlcy5zaGlmdCgpOwoJCQlpZiAoIGN0ID09PSB1bmRlZmluZWQgKSB7CgkJCQljdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoICJDb250ZW50LVR5cGUiICk7CgkJCX0KCQl9CgoJCS8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZQoJCWlmICggY3QgKSB7CgkJCWZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7CgkJCQlpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkgewoJCQkJCWRhdGFUeXBlcy51bnNoaWZ0KCB0eXBlICk7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQl9CgoJCS8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcmVzcG9uc2UgZm9yIHRoZSBleHBlY3RlZCBkYXRhVHlwZQoJCWlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkgewoJCQlmaW5hbERhdGFUeXBlID0gZGF0YVR5cGVzWyAwIF07CgkJfSBlbHNlIHsKCgkJCS8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXMKCQkJZm9yICggdHlwZSBpbiByZXNwb25zZXMgKSB7CgkJCQlpZiAoICFkYXRhVHlwZXNbIDAgXSB8fCBzLmNvbnZlcnRlcnNbIHR5cGUgKyAiICIgKyBkYXRhVHlwZXNbIDAgXSBdICkgewoJCQkJCWZpbmFsRGF0YVR5cGUgPSB0eXBlOwoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJaWYgKCAhZmlyc3REYXRhVHlwZSApIHsKCQkJCQlmaXJzdERhdGFUeXBlID0gdHlwZTsKCQkJCX0KCQkJfQoKCQkJLy8gT3IganVzdCB1c2UgZmlyc3Qgb25lCgkJCWZpbmFsRGF0YVR5cGUgPSBmaW5hbERhdGFUeXBlIHx8IGZpcnN0RGF0YVR5cGU7CgkJfQoKCQkvLyBJZiB3ZSBmb3VuZCBhIGRhdGFUeXBlCgkJLy8gV2UgYWRkIHRoZSBkYXRhVHlwZSB0byB0aGUgbGlzdCBpZiBuZWVkZWQKCQkvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlCgkJaWYgKCBmaW5hbERhdGFUeXBlICkgewoJCQlpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkgewoJCQkJZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTsKCQkJfQoJCQlyZXR1cm4gcmVzcG9uc2VzWyBmaW5hbERhdGFUeXBlIF07CgkJfQoJfQoKCS8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2UKCSAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZQoJICovCglmdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7CgkJdmFyIGNvbnYyLCBjdXJyZW50LCBjb252LCB0bXAsIHByZXYsCgkJCWNvbnZlcnRlcnMgPSB7fSwKCgkJCS8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb24KCQkJZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTsKCgkJLy8gQ3JlYXRlIGNvbnZlcnRlcnMgbWFwIHdpdGggbG93ZXJjYXNlZCBrZXlzCgkJaWYgKCBkYXRhVHlwZXNbIDEgXSApIHsKCQkJZm9yICggY29udiBpbiBzLmNvbnZlcnRlcnMgKSB7CgkJCQljb252ZXJ0ZXJzWyBjb252LnRvTG93ZXJDYXNlKCkgXSA9IHMuY29udmVydGVyc1sgY29udiBdOwoJCQl9CgkJfQoKCQljdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7CgoJCS8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlCgkJd2hpbGUgKCBjdXJyZW50ICkgewoKCQkJaWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7CgkJCQlqcVhIUlsgcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdIF0gPSByZXNwb25zZTsKCQkJfQoKCQkJLy8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWQKCQkJaWYgKCAhcHJldiAmJiBpc1N1Y2Nlc3MgJiYgcy5kYXRhRmlsdGVyICkgewoJCQkJcmVzcG9uc2UgPSBzLmRhdGFGaWx0ZXIoIHJlc3BvbnNlLCBzLmRhdGFUeXBlICk7CgkJCX0KCgkJCXByZXYgPSBjdXJyZW50OwoJCQljdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7CgoJCQlpZiAoIGN1cnJlbnQgKSB7CgoJCQkJLy8gVGhlcmUncyBvbmx5IHdvcmsgdG8gZG8gaWYgY3VycmVudCBkYXRhVHlwZSBpcyBub24tYXV0bwoJCQkJaWYgKCBjdXJyZW50ID09PSAiKiIgKSB7CgoJCQkJCWN1cnJlbnQgPSBwcmV2OwoKCQkJCS8vIENvbnZlcnQgcmVzcG9uc2UgaWYgcHJldiBkYXRhVHlwZSBpcyBub24tYXV0byBhbmQgZGlmZmVycyBmcm9tIGN1cnJlbnQKCQkJCX0gZWxzZSBpZiAoIHByZXYgIT09ICIqIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkgewoKCQkJCQkvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlcgoJCQkJCWNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgIiAiICsgY3VycmVudCBdIHx8IGNvbnZlcnRlcnNbICIqICIgKyBjdXJyZW50IF07CgoJCQkJCS8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyCgkJCQkJaWYgKCAhY29udiApIHsKCQkJCQkJZm9yICggY29udjIgaW4gY29udmVydGVycyApIHsKCgkJCQkJCQkvLyBJZiBjb252MiBvdXRwdXRzIGN1cnJlbnQKCQkJCQkJCXRtcCA9IGNvbnYyLnNwbGl0KCAiICIgKTsKCQkJCQkJCWlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7CgoJCQkJCQkJCS8vIElmIHByZXYgY2FuIGJlIGNvbnZlcnRlZCB0byBhY2NlcHRlZCBpbnB1dAoJCQkJCQkJCWNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgIiAiICsgdG1wWyAwIF0gXSB8fAoJCQkJCQkJCQljb252ZXJ0ZXJzWyAiKiAiICsgdG1wWyAwIF0gXTsKCQkJCQkJCQlpZiAoIGNvbnYgKSB7CgoJCQkJCQkJCQkvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzCgkJCQkJCQkJCWlmICggY29udiA9PT0gdHJ1ZSApIHsKCQkJCQkJCQkJCWNvbnYgPSBjb252ZXJ0ZXJzWyBjb252MiBdOwoKCQkJCQkJCQkJLy8gT3RoZXJ3aXNlLCBpbnNlcnQgdGhlIGludGVybWVkaWF0ZSBkYXRhVHlwZQoJCQkJCQkJCQl9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkgewoJCQkJCQkJCQkJY3VycmVudCA9IHRtcFsgMCBdOwoJCQkJCQkJCQkJZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7CgkJCQkJCQkJCX0KCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoKCQkJCQkvLyBBcHBseSBjb252ZXJ0ZXIgKGlmIG5vdCBhbiBlcXVpdmFsZW5jZSkKCQkJCQlpZiAoIGNvbnYgIT09IHRydWUgKSB7CgoJCQkJCQkvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtCgkJCQkJCWlmICggY29udiAmJiBzWyAidGhyb3dzIiBdICkgeyAvLyBqc2NzOmlnbm9yZSByZXF1aXJlRG90Tm90YXRpb24KCQkJCQkJCXJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJcmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApOwoJCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJc3RhdGU6ICJwYXJzZXJlcnJvciIsCgkJCQkJCQkJCWVycm9yOiBjb252ID8gZSA6ICJObyBjb252ZXJzaW9uIGZyb20gIiArIHByZXYgKyAiIHRvICIgKyBjdXJyZW50CgkJCQkJCQkJfTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIHsgc3RhdGU6ICJzdWNjZXNzIiwgZGF0YTogcmVzcG9uc2UgfTsKCX0KCglqUXVlcnkuZXh0ZW5kKCB7CgoJCS8vIENvdW50ZXIgZm9yIGhvbGRpbmcgdGhlIG51bWJlciBvZiBhY3RpdmUgcXVlcmllcwoJCWFjdGl2ZTogMCwKCgkJLy8gTGFzdC1Nb2RpZmllZCBoZWFkZXIgY2FjaGUgZm9yIG5leHQgcmVxdWVzdAoJCWxhc3RNb2RpZmllZDoge30sCgkJZXRhZzoge30sCgoJCWFqYXhTZXR0aW5nczogewoJCQl1cmw6IGFqYXhMb2NhdGlvbiwKCQkJdHlwZTogIkdFVCIsCgkJCWlzTG9jYWw6IHJsb2NhbFByb3RvY29sLnRlc3QoIGFqYXhMb2NQYXJ0c1sgMSBdICksCgkJCWdsb2JhbDogdHJ1ZSwKCQkJcHJvY2Vzc0RhdGE6IHRydWUsCgkJCWFzeW5jOiB0cnVlLAoJCQljb250ZW50VHlwZTogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsCgkJCS8qCgkJCXRpbWVvdXQ6IDAsCgkJCWRhdGE6IG51bGwsCgkJCWRhdGFUeXBlOiBudWxsLAoJCQl1c2VybmFtZTogbnVsbCwKCQkJcGFzc3dvcmQ6IG51bGwsCgkJCWNhY2hlOiBudWxsLAoJCQl0aHJvd3M6IGZhbHNlLAoJCQl0cmFkaXRpb25hbDogZmFsc2UsCgkJCWhlYWRlcnM6IHt9LAoJCQkqLwoKCQkJYWNjZXB0czogewoJCQkJIioiOiBhbGxUeXBlcywKCQkJCXRleHQ6ICJ0ZXh0L3BsYWluIiwKCQkJCWh0bWw6ICJ0ZXh0L2h0bWwiLAoJCQkJeG1sOiAiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsCgkJCQlqc29uOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0IgoJCQl9LAoKCQkJY29udGVudHM6IHsKCQkJCXhtbDogL1xieG1sXGIvLAoJCQkJaHRtbDogL1xiaHRtbC8sCgkJCQlqc29uOiAvXGJqc29uXGIvCgkJCX0sCgoJCQlyZXNwb25zZUZpZWxkczogewoJCQkJeG1sOiAicmVzcG9uc2VYTUwiLAoJCQkJdGV4dDogInJlc3BvbnNlVGV4dCIsCgkJCQlqc29uOiAicmVzcG9uc2VKU09OIgoJCQl9LAoKCQkJLy8gRGF0YSBjb252ZXJ0ZXJzCgkJCS8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCAiKiIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlCgkJCWNvbnZlcnRlcnM6IHsKCgkJCQkvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHQKCQkJCSIqIHRleHQiOiBTdHJpbmcsCgoJCQkJLy8gVGV4dCB0byBodG1sICh0cnVlID0gbm8gdHJhbnNmb3JtYXRpb24pCgkJCQkidGV4dCBodG1sIjogdHJ1ZSwKCgkJCQkvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uCgkJCQkidGV4dCBqc29uIjogalF1ZXJ5LnBhcnNlSlNPTiwKCgkJCQkvLyBQYXJzZSB0ZXh0IGFzIHhtbAoJCQkJInRleHQgeG1sIjogalF1ZXJ5LnBhcnNlWE1MCgkJCX0sCgoJCQkvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOgoJCQkvLyB5b3UgY2FuIGFkZCB5b3VyIG93biBjdXN0b20gb3B0aW9ucyBoZXJlIGlmCgkJCS8vIGFuZCB3aGVuIHlvdSBjcmVhdGUgb25lIHRoYXQgc2hvdWxkbid0IGJlCgkJCS8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKQoJCQlmbGF0T3B0aW9uczogewoJCQkJdXJsOiB0cnVlLAoJCQkJY29udGV4dDogdHJ1ZQoJCQl9CgkJfSwKCgkJLy8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXQKCQkvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuCgkJLy8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy4KCQlhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkgewoJCQlyZXR1cm4gc2V0dGluZ3MgPwoKCQkJCS8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0CgkJCQlhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6CgoJCQkJLy8gRXh0ZW5kaW5nIGFqYXhTZXR0aW5ncwoJCQkJYWpheEV4dGVuZCggalF1ZXJ5LmFqYXhTZXR0aW5ncywgdGFyZ2V0ICk7CgkJfSwKCgkJYWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksCgkJYWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksCgoJCS8vIE1haW4gbWV0aG9kCgkJYWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHsKCgkJCS8vIElmIHVybCBpcyBhbiBvYmplY3QsIHNpbXVsYXRlIHByZS0xLjUgc2lnbmF0dXJlCgkJCWlmICggdHlwZW9mIHVybCA9PT0gIm9iamVjdCIgKSB7CgkJCQlvcHRpb25zID0gdXJsOwoJCQkJdXJsID0gdW5kZWZpbmVkOwoJCQl9CgoJCQkvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdAoJCQlvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCgkJCXZhcgoKCQkJCS8vIENyb3NzLWRvbWFpbiBkZXRlY3Rpb24gdmFycwoJCQkJcGFydHMsCgoJCQkJLy8gTG9vcCB2YXJpYWJsZQoJCQkJaSwKCgkJCQkvLyBVUkwgd2l0aG91dCBhbnRpLWNhY2hlIHBhcmFtCgkJCQljYWNoZVVSTCwKCgkJCQkvLyBSZXNwb25zZSBoZWFkZXJzIGFzIHN0cmluZwoJCQkJcmVzcG9uc2VIZWFkZXJzU3RyaW5nLAoKCQkJCS8vIHRpbWVvdXQgaGFuZGxlCgkJCQl0aW1lb3V0VGltZXIsCgoJCQkJLy8gVG8ga25vdyBpZiBnbG9iYWwgZXZlbnRzIGFyZSB0byBiZSBkaXNwYXRjaGVkCgkJCQlmaXJlR2xvYmFscywKCgkJCQl0cmFuc3BvcnQsCgoJCQkJLy8gUmVzcG9uc2UgaGVhZGVycwoJCQkJcmVzcG9uc2VIZWFkZXJzLAoKCQkJCS8vIENyZWF0ZSB0aGUgZmluYWwgb3B0aW9ucyBvYmplY3QKCQkJCXMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLAoKCQkJCS8vIENhbGxiYWNrcyBjb250ZXh0CgkJCQljYWxsYmFja0NvbnRleHQgPSBzLmNvbnRleHQgfHwgcywKCgkJCQkvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uCgkJCQlnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYKCQkJCQkoIGNhbGxiYWNrQ29udGV4dC5ub2RlVHlwZSB8fCBjYWxsYmFja0NvbnRleHQuanF1ZXJ5ICkgPwoJCQkJCQlqUXVlcnkoIGNhbGxiYWNrQ29udGV4dCApIDoKCQkJCQkJalF1ZXJ5LmV2ZW50LAoKCQkJCS8vIERlZmVycmVkcwoJCQkJZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSwKCQkJCWNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKCAib25jZSBtZW1vcnkiICksCgoJCQkJLy8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3MKCQkJCXN0YXR1c0NvZGUgPSBzLnN0YXR1c0NvZGUgfHwge30sCgoJCQkJLy8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSkKCQkJCXJlcXVlc3RIZWFkZXJzID0ge30sCgkJCQlyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sCgoJCQkJLy8gVGhlIGpxWEhSIHN0YXRlCgkJCQlzdGF0ZSA9IDAsCgoJCQkJLy8gRGVmYXVsdCBhYm9ydCBtZXNzYWdlCgkJCQlzdHJBYm9ydCA9ICJjYW5jZWxlZCIsCgoJCQkJLy8gRmFrZSB4aHIKCQkJCWpxWEhSID0gewoJCQkJCXJlYWR5U3RhdGU6IDAsCgoJCQkJCS8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWQKCQkJCQlnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24oIGtleSApIHsKCQkJCQkJdmFyIG1hdGNoOwoJCQkJCQlpZiAoIHN0YXRlID09PSAyICkgewoJCQkJCQkJaWYgKCAhcmVzcG9uc2VIZWFkZXJzICkgewoJCQkJCQkJCXJlc3BvbnNlSGVhZGVycyA9IHt9OwoJCQkJCQkJCXdoaWxlICggKCBtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApICkgKSB7CgkJCQkJCQkJCXJlc3BvbnNlSGVhZGVyc1sgbWF0Y2hbIDEgXS50b0xvd2VyQ2FzZSgpIF0gPSBtYXRjaFsgMiBdOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCW1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdOwoJCQkJCQl9CgkJCQkJCXJldHVybiBtYXRjaCA9PSBudWxsID8gbnVsbCA6IG1hdGNoOwoJCQkJCX0sCgoJCQkJCS8vIFJhdyBzdHJpbmcKCQkJCQlnZXRBbGxSZXNwb25zZUhlYWRlcnM6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gc3RhdGUgPT09IDIgPyByZXNwb25zZUhlYWRlcnNTdHJpbmcgOiBudWxsOwoJCQkJCX0sCgoJCQkJCS8vIENhY2hlcyB0aGUgaGVhZGVyCgkJCQkJc2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkgewoJCQkJCQl2YXIgbG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7CgkJCQkJCWlmICggIXN0YXRlICkgewoJCQkJCQkJbmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdIHx8IG5hbWU7CgkJCQkJCQlyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7CgkJCQkJCX0KCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJfSwKCgkJCQkJLy8gT3ZlcnJpZGVzIHJlc3BvbnNlIGNvbnRlbnQtdHlwZSBoZWFkZXIKCQkJCQlvdmVycmlkZU1pbWVUeXBlOiBmdW5jdGlvbiggdHlwZSApIHsKCQkJCQkJaWYgKCAhc3RhdGUgKSB7CgkJCQkJCQlzLm1pbWVUeXBlID0gdHlwZTsKCQkJCQkJfQoJCQkJCQlyZXR1cm4gdGhpczsKCQkJCQl9LAoKCQkJCQkvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrcwoJCQkJCXN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7CgkJCQkJCXZhciBjb2RlOwoJCQkJCQlpZiAoIG1hcCApIHsKCQkJCQkJCWlmICggc3RhdGUgPCAyICkgewoJCQkJCQkJCWZvciAoIGNvZGUgaW4gbWFwICkgewoKCQkJCQkJCQkJLy8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFjayBpbiBhIHdheSB0aGF0IHByZXNlcnZlcyBvbGQgb25lcwoJCQkJCQkJCQlzdGF0dXNDb2RlWyBjb2RlIF0gPSBbIHN0YXR1c0NvZGVbIGNvZGUgXSwgbWFwWyBjb2RlIF0gXTsKCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoKCQkJCQkJCQkvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3MKCQkJCQkJCQlqcVhIUi5hbHdheXMoIG1hcFsganFYSFIuc3RhdHVzIF0gKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlyZXR1cm4gdGhpczsKCQkJCQl9LAoKCQkJCQkvLyBDYW5jZWwgdGhlIHJlcXVlc3QKCQkJCQlhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7CgkJCQkJCXZhciBmaW5hbFRleHQgPSBzdGF0dXNUZXh0IHx8IHN0ckFib3J0OwoJCQkJCQlpZiAoIHRyYW5zcG9ydCApIHsKCQkJCQkJCXRyYW5zcG9ydC5hYm9ydCggZmluYWxUZXh0ICk7CgkJCQkJCX0KCQkJCQkJZG9uZSggMCwgZmluYWxUZXh0ICk7CgkJCQkJCXJldHVybiB0aGlzOwoJCQkJCX0KCQkJCX07CgoJCQkvLyBBdHRhY2ggZGVmZXJyZWRzCgkJCWRlZmVycmVkLnByb21pc2UoIGpxWEhSICkuY29tcGxldGUgPSBjb21wbGV0ZURlZmVycmVkLmFkZDsKCQkJanFYSFIuc3VjY2VzcyA9IGpxWEhSLmRvbmU7CgkJCWpxWEhSLmVycm9yID0ganFYSFIuZmFpbDsKCgkJCS8vIFJlbW92ZSBoYXNoIGNoYXJhY3RlciAoIzc1MzE6IGFuZCBzdHJpbmcgcHJvbW90aW9uKQoJCQkvLyBBZGQgcHJvdG9jb2wgaWYgbm90IHByb3ZpZGVkICgjNTg2NjogSUU3IGlzc3VlIHdpdGggcHJvdG9jb2wtbGVzcyB1cmxzKQoJCQkvLyBIYW5kbGUgZmFsc3kgdXJsIGluIHRoZSBzZXR0aW5ncyBvYmplY3QgKCMxMDA5MzogY29uc2lzdGVuY3kgd2l0aCBvbGQgc2lnbmF0dXJlKQoJCQkvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGUKCQkJcy51cmwgPSAoICggdXJsIHx8IHMudXJsIHx8IGFqYXhMb2NhdGlvbiApICsgIiIgKQoJCQkJLnJlcGxhY2UoIHJoYXNoLCAiIiApCgkJCQkucmVwbGFjZSggcnByb3RvY29sLCBhamF4TG9jUGFydHNbIDEgXSArICIvLyIgKTsKCgkJCS8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNAoJCQlzLnR5cGUgPSBvcHRpb25zLm1ldGhvZCB8fCBvcHRpb25zLnR5cGUgfHwgcy5tZXRob2QgfHwgcy50eXBlOwoKCQkJLy8gRXh0cmFjdCBkYXRhVHlwZXMgbGlzdAoJCQlzLmRhdGFUeXBlcyA9IGpRdWVyeS50cmltKCBzLmRhdGFUeXBlIHx8ICIqIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgIiIgXTsKCgkJCS8vIEEgY3Jvc3MtZG9tYWluIHJlcXVlc3QgaXMgaW4gb3JkZXIgd2hlbiB3ZSBoYXZlIGEgcHJvdG9jb2w6aG9zdDpwb3J0IG1pc21hdGNoCgkJCWlmICggcy5jcm9zc0RvbWFpbiA9PSBudWxsICkgewoJCQkJcGFydHMgPSBydXJsLmV4ZWMoIHMudXJsLnRvTG93ZXJDYXNlKCkgKTsKCQkJCXMuY3Jvc3NEb21haW4gPSAhISggcGFydHMgJiYKCQkJCQkoIHBhcnRzWyAxIF0gIT09IGFqYXhMb2NQYXJ0c1sgMSBdIHx8IHBhcnRzWyAyIF0gIT09IGFqYXhMb2NQYXJ0c1sgMiBdIHx8CgkJCQkJCSggcGFydHNbIDMgXSB8fCAoIHBhcnRzWyAxIF0gPT09ICJodHRwOiIgPyAiODAiIDogIjQ0MyIgKSApICE9PQoJCQkJCQkJKCBhamF4TG9jUGFydHNbIDMgXSB8fCAoIGFqYXhMb2NQYXJ0c1sgMSBdID09PSAiaHR0cDoiID8gIjgwIiA6ICI0NDMiICkgKSApCgkJCQkpOwoJCQl9CgoJCQkvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmcKCQkJaWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJiB0eXBlb2Ygcy5kYXRhICE9PSAic3RyaW5nIiApIHsKCQkJCXMuZGF0YSA9IGpRdWVyeS5wYXJhbSggcy5kYXRhLCBzLnRyYWRpdGlvbmFsICk7CgkJCX0KCgkJCS8vIEFwcGx5IHByZWZpbHRlcnMKCQkJaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMsIHMsIG9wdGlvbnMsIGpxWEhSICk7CgoJCQkvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhIHByZWZpbHRlciwgc3RvcCB0aGVyZQoJCQlpZiAoIHN0YXRlID09PSAyICkgewoJCQkJcmV0dXJuIGpxWEhSOwoJCQl9CgoJCQkvLyBXZSBjYW4gZmlyZSBnbG9iYWwgZXZlbnRzIGFzIG9mIG5vdyBpZiBhc2tlZCB0bwoJCQkvLyBEb24ndCBmaXJlIGV2ZW50cyBpZiBqUXVlcnkuZXZlbnQgaXMgdW5kZWZpbmVkIGluIGFuIEFNRC11c2FnZSBzY2VuYXJpbyAoIzE1MTE4KQoJCQlmaXJlR2xvYmFscyA9IGpRdWVyeS5ldmVudCAmJiBzLmdsb2JhbDsKCgkJCS8vIFdhdGNoIGZvciBhIG5ldyBzZXQgb2YgcmVxdWVzdHMKCQkJaWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7CgkJCQlqUXVlcnkuZXZlbnQudHJpZ2dlciggImFqYXhTdGFydCIgKTsKCQkJfQoKCQkJLy8gVXBwZXJjYXNlIHRoZSB0eXBlCgkJCXMudHlwZSA9IHMudHlwZS50b1VwcGVyQ2FzZSgpOwoKCQkJLy8gRGV0ZXJtaW5lIGlmIHJlcXVlc3QgaGFzIGNvbnRlbnQKCQkJcy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7CgoJCQkvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2UKCQkJLy8gYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyIGxhdGVyIG9uCgkJCWNhY2hlVVJMID0gcy51cmw7CgoJCQkvLyBNb3JlIG9wdGlvbnMgaGFuZGxpbmcgZm9yIHJlcXVlc3RzIHdpdGggbm8gY29udGVudAoJCQlpZiAoICFzLmhhc0NvbnRlbnQgKSB7CgoJCQkJLy8gSWYgZGF0YSBpcyBhdmFpbGFibGUsIGFwcGVuZCBkYXRhIHRvIHVybAoJCQkJaWYgKCBzLmRhdGEgKSB7CgkJCQkJY2FjaGVVUkwgPSAoIHMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyAiJiIgOiAiPyIgKSArIHMuZGF0YSApOwoKCQkJCQkvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5CgkJCQkJZGVsZXRlIHMuZGF0YTsKCQkJCX0KCgkJCQkvLyBBZGQgYW50aS1jYWNoZSBpbiB1cmwgaWYgbmVlZGVkCgkJCQlpZiAoIHMuY2FjaGUgPT09IGZhbHNlICkgewoJCQkJCXMudXJsID0gcnRzLnRlc3QoIGNhY2hlVVJMICkgPwoKCQkJCQkJLy8gSWYgdGhlcmUgaXMgYWxyZWFkeSBhICdfJyBwYXJhbWV0ZXIsIHNldCBpdHMgdmFsdWUKCQkJCQkJY2FjaGVVUkwucmVwbGFjZSggcnRzLCAiJDFfPSIgKyBub25jZSsrICkgOgoKCQkJCQkJLy8gT3RoZXJ3aXNlIGFkZCBvbmUgdG8gdGhlIGVuZAoJCQkJCQljYWNoZVVSTCArICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyAiJiIgOiAiPyIgKSArICJfPSIgKyBub25jZSsrOwoJCQkJfQoJCQl9CgoJCQkvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLgoJCQlpZiAoIHMuaWZNb2RpZmllZCApIHsKCQkJCWlmICggalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApIHsKCQkJCQlqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCAiSWYtTW9kaWZpZWQtU2luY2UiLCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICk7CgkJCQl9CgkJCQlpZiAoIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICkgewoJCQkJCWpxWEhSLnNldFJlcXVlc3RIZWFkZXIoICJJZi1Ob25lLU1hdGNoIiwgalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKTsKCQkJCX0KCQkJfQoKCQkJLy8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50CgkJCWlmICggcy5kYXRhICYmIHMuaGFzQ29udGVudCAmJiBzLmNvbnRlbnRUeXBlICE9PSBmYWxzZSB8fCBvcHRpb25zLmNvbnRlbnRUeXBlICkgewoJCQkJanFYSFIuc2V0UmVxdWVzdEhlYWRlciggIkNvbnRlbnQtVHlwZSIsIHMuY29udGVudFR5cGUgKTsKCQkJfQoKCQkJLy8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZQoJCQlqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKAoJCQkJIkFjY2VwdCIsCgkJCQlzLmRhdGFUeXBlc1sgMCBdICYmIHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdID8KCQkJCQlzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSArCgkJCQkJCSggcy5kYXRhVHlwZXNbIDAgXSAhPT0gIioiID8gIiwgIiArIGFsbFR5cGVzICsgIjsgcT0wLjAxIiA6ICIiICkgOgoJCQkJCXMuYWNjZXB0c1sgIioiIF0KCQkJKTsKCgkJCS8vIENoZWNrIGZvciBoZWFkZXJzIG9wdGlvbgoJCQlmb3IgKCBpIGluIHMuaGVhZGVycyApIHsKCQkJCWpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIGksIHMuaGVhZGVyc1sgaSBdICk7CgkJCX0KCgkJCS8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnQKCQkJaWYgKCBzLmJlZm9yZVNlbmQgJiYKCQkJCSggcy5iZWZvcmVTZW5kLmNhbGwoIGNhbGxiYWNrQ29udGV4dCwganFYSFIsIHMgKSA9PT0gZmFsc2UgfHwgc3RhdGUgPT09IDIgKSApIHsKCgkJCQkvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm4KCQkJCXJldHVybiBqcVhIUi5hYm9ydCgpOwoJCQl9CgoJCQkvLyBhYm9ydGluZyBpcyBubyBsb25nZXIgYSBjYW5jZWxsYXRpb24KCQkJc3RyQWJvcnQgPSAiYWJvcnQiOwoKCQkJLy8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzCgkJCWZvciAoIGkgaW4geyBzdWNjZXNzOiAxLCBlcnJvcjogMSwgY29tcGxldGU6IDEgfSApIHsKCQkJCWpxWEhSWyBpIF0oIHNbIGkgXSApOwoJCQl9CgoJCQkvLyBHZXQgdHJhbnNwb3J0CgkJCXRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApOwoKCQkJLy8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0CgkJCWlmICggIXRyYW5zcG9ydCApIHsKCQkJCWRvbmUoIC0xLCAiTm8gVHJhbnNwb3J0IiApOwoJCQl9IGVsc2UgewoJCQkJanFYSFIucmVhZHlTdGF0ZSA9IDE7CgoJCQkJLy8gU2VuZCBnbG9iYWwgZXZlbnQKCQkJCWlmICggZmlyZUdsb2JhbHMgKSB7CgkJCQkJZ2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoICJhamF4U2VuZCIsIFsganFYSFIsIHMgXSApOwoJCQkJfQoKCQkJCS8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGFqYXhTZW5kLCBzdG9wIHRoZXJlCgkJCQlpZiAoIHN0YXRlID09PSAyICkgewoJCQkJCXJldHVybiBqcVhIUjsKCQkJCX0KCgkJCQkvLyBUaW1lb3V0CgkJCQlpZiAoIHMuYXN5bmMgJiYgcy50aW1lb3V0ID4gMCApIHsKCQkJCQl0aW1lb3V0VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCQkJCWpxWEhSLmFib3J0KCAidGltZW91dCIgKTsKCQkJCQl9LCBzLnRpbWVvdXQgKTsKCQkJCX0KCgkJCQl0cnkgewoJCQkJCXN0YXRlID0gMTsKCQkJCQl0cmFuc3BvcnQuc2VuZCggcmVxdWVzdEhlYWRlcnMsIGRvbmUgKTsKCQkJCX0gY2F0Y2ggKCBlICkgewoKCQkJCQkvLyBQcm9wYWdhdGUgZXhjZXB0aW9uIGFzIGVycm9yIGlmIG5vdCBkb25lCgkJCQkJaWYgKCBzdGF0ZSA8IDIgKSB7CgkJCQkJCWRvbmUoIC0xLCBlICk7CgoJCQkJCS8vIFNpbXBseSByZXRocm93IG90aGVyd2lzZQoJCQkJCX0gZWxzZSB7CgkJCQkJCXRocm93IGU7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkvLyBDYWxsYmFjayBmb3Igd2hlbiBldmVyeXRoaW5nIGlzIGRvbmUKCQkJZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7CgkJCQl2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLAoJCQkJCXN0YXR1c1RleHQgPSBuYXRpdmVTdGF0dXNUZXh0OwoKCQkJCS8vIENhbGxlZCBvbmNlCgkJCQlpZiAoIHN0YXRlID09PSAyICkgewoJCQkJCXJldHVybjsKCQkJCX0KCgkJCQkvLyBTdGF0ZSBpcyAiZG9uZSIgbm93CgkJCQlzdGF0ZSA9IDI7CgoJCQkJLy8gQ2xlYXIgdGltZW91dCBpZiBpdCBleGlzdHMKCQkJCWlmICggdGltZW91dFRpbWVyICkgewoJCQkJCXdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXRUaW1lciApOwoJCQkJfQoKCQkJCS8vIERlcmVmZXJlbmNlIHRyYW5zcG9ydCBmb3IgZWFybHkgZ2FyYmFnZSBjb2xsZWN0aW9uCgkJCQkvLyAobm8gbWF0dGVyIGhvdyBsb25nIHRoZSBqcVhIUiBvYmplY3Qgd2lsbCBiZSB1c2VkKQoJCQkJdHJhbnNwb3J0ID0gdW5kZWZpbmVkOwoKCQkJCS8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnMKCQkJCXJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgIiI7CgoJCQkJLy8gU2V0IHJlYWR5U3RhdGUKCQkJCWpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7CgoJCQkJLy8gRGV0ZXJtaW5lIGlmIHN1Y2Nlc3NmdWwKCQkJCWlzU3VjY2VzcyA9IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0OwoKCQkJCS8vIEdldCByZXNwb25zZSBkYXRhCgkJCQlpZiAoIHJlc3BvbnNlcyApIHsKCQkJCQlyZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTsKCQkJCX0KCgkJCQkvLyBDb252ZXJ0IG5vIG1hdHRlciB3aGF0ICh0aGF0IHdheSByZXNwb25zZVhYWCBmaWVsZHMgYXJlIGFsd2F5cyBzZXQpCgkJCQlyZXNwb25zZSA9IGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApOwoKCQkJCS8vIElmIHN1Y2Nlc3NmdWwsIGhhbmRsZSB0eXBlIGNoYWluaW5nCgkJCQlpZiAoIGlzU3VjY2VzcyApIHsKCgkJCQkJLy8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS4KCQkJCQlpZiAoIHMuaWZNb2RpZmllZCApIHsKCQkJCQkJbW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggIkxhc3QtTW9kaWZpZWQiICk7CgkJCQkJCWlmICggbW9kaWZpZWQgKSB7CgkJCQkJCQlqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7CgkJCQkJCX0KCQkJCQkJbW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggImV0YWciICk7CgkJCQkJCWlmICggbW9kaWZpZWQgKSB7CgkJCQkJCQlqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQkvLyBpZiBubyBjb250ZW50CgkJCQkJaWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09ICJIRUFEIiApIHsKCQkJCQkJc3RhdHVzVGV4dCA9ICJub2NvbnRlbnQiOwoKCQkJCQkvLyBpZiBub3QgbW9kaWZpZWQKCQkJCQl9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHsKCQkJCQkJc3RhdHVzVGV4dCA9ICJub3Rtb2RpZmllZCI7CgoJCQkJCS8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdAoJCQkJCX0gZWxzZSB7CgkJCQkJCXN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTsKCQkJCQkJc3VjY2VzcyA9IHJlc3BvbnNlLmRhdGE7CgkJCQkJCWVycm9yID0gcmVzcG9uc2UuZXJyb3I7CgkJCQkJCWlzU3VjY2VzcyA9ICFlcnJvcjsKCQkJCQl9CgkJCQl9IGVsc2UgewoKCQkJCQkvLyBXZSBleHRyYWN0IGVycm9yIGZyb20gc3RhdHVzVGV4dAoJCQkJCS8vIHRoZW4gbm9ybWFsaXplIHN0YXR1c1RleHQgYW5kIHN0YXR1cyBmb3Igbm9uLWFib3J0cwoJCQkJCWVycm9yID0gc3RhdHVzVGV4dDsKCQkJCQlpZiAoIHN0YXR1cyB8fCAhc3RhdHVzVGV4dCApIHsKCQkJCQkJc3RhdHVzVGV4dCA9ICJlcnJvciI7CgkJCQkJCWlmICggc3RhdHVzIDwgMCApIHsKCQkJCQkJCXN0YXR1cyA9IDA7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgoJCQkJLy8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3QKCQkJCWpxWEhSLnN0YXR1cyA9IHN0YXR1czsKCQkJCWpxWEhSLnN0YXR1c1RleHQgPSAoIG5hdGl2ZVN0YXR1c1RleHQgfHwgc3RhdHVzVGV4dCApICsgIiI7CgoJCQkJLy8gU3VjY2Vzcy9FcnJvcgoJCQkJaWYgKCBpc1N1Y2Nlc3MgKSB7CgkJCQkJZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBzdWNjZXNzLCBzdGF0dXNUZXh0LCBqcVhIUiBdICk7CgkJCQl9IGVsc2UgewoJCQkJCWRlZmVycmVkLnJlamVjdFdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCwgZXJyb3IgXSApOwoJCQkJfQoKCQkJCS8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzCgkJCQlqcVhIUi5zdGF0dXNDb2RlKCBzdGF0dXNDb2RlICk7CgkJCQlzdGF0dXNDb2RlID0gdW5kZWZpbmVkOwoKCQkJCWlmICggZmlyZUdsb2JhbHMgKSB7CgkJCQkJZ2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIGlzU3VjY2VzcyA/ICJhamF4U3VjY2VzcyIgOiAiYWpheEVycm9yIiwKCQkJCQkJWyBqcVhIUiwgcywgaXNTdWNjZXNzID8gc3VjY2VzcyA6IGVycm9yIF0gKTsKCQkJCX0KCgkJCQkvLyBDb21wbGV0ZQoJCQkJY29tcGxldGVEZWZlcnJlZC5maXJlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0IF0gKTsKCgkJCQlpZiAoIGZpcmVHbG9iYWxzICkgewoJCQkJCWdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCAiYWpheENvbXBsZXRlIiwgWyBqcVhIUiwgcyBdICk7CgoJCQkJCS8vIEhhbmRsZSB0aGUgZ2xvYmFsIEFKQVggY291bnRlcgoJCQkJCWlmICggISggLS1qUXVlcnkuYWN0aXZlICkgKSB7CgkJCQkJCWpRdWVyeS5ldmVudC50cmlnZ2VyKCAiYWpheFN0b3AiICk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlyZXR1cm4ganFYSFI7CgkJfSwKCgkJZ2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7CgkJCXJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCAianNvbiIgKTsKCQl9LAoKCQlnZXRTY3JpcHQ6IGZ1bmN0aW9uKCB1cmwsIGNhbGxiYWNrICkgewoJCQlyZXR1cm4galF1ZXJ5LmdldCggdXJsLCB1bmRlZmluZWQsIGNhbGxiYWNrLCAic2NyaXB0IiApOwoJCX0KCX0gKTsKCglqUXVlcnkuZWFjaCggWyAiZ2V0IiwgInBvc3QiIF0sIGZ1bmN0aW9uKCBpLCBtZXRob2QgKSB7CgkJalF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkgewoKCQkJLy8gc2hpZnQgYXJndW1lbnRzIGlmIGRhdGEgYXJndW1lbnQgd2FzIG9taXR0ZWQKCQkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZGF0YSApICkgewoJCQkJdHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7CgkJCQljYWxsYmFjayA9IGRhdGE7CgkJCQlkYXRhID0gdW5kZWZpbmVkOwoJCQl9CgoJCQkvLyBUaGUgdXJsIGNhbiBiZSBhbiBvcHRpb25zIG9iamVjdCAod2hpY2ggdGhlbiBtdXN0IGhhdmUgLnVybCkKCQkJcmV0dXJuIGpRdWVyeS5hamF4KCBqUXVlcnkuZXh0ZW5kKCB7CgkJCQl1cmw6IHVybCwKCQkJCXR5cGU6IG1ldGhvZCwKCQkJCWRhdGFUeXBlOiB0eXBlLAoJCQkJZGF0YTogZGF0YSwKCQkJCXN1Y2Nlc3M6IGNhbGxiYWNrCgkJCX0sIGpRdWVyeS5pc1BsYWluT2JqZWN0KCB1cmwgKSAmJiB1cmwgKSApOwoJCX07Cgl9ICk7CgoKCWpRdWVyeS5fZXZhbFVybCA9IGZ1bmN0aW9uKCB1cmwgKSB7CgkJcmV0dXJuIGpRdWVyeS5hamF4KCB7CgkJCXVybDogdXJsLAoKCQkJLy8gTWFrZSB0aGlzIGV4cGxpY2l0LCBzaW5jZSB1c2VyIGNhbiBvdmVycmlkZSB0aGlzIHRocm91Z2ggYWpheFNldHVwICgjMTEyNjQpCgkJCXR5cGU6ICJHRVQiLAoJCQlkYXRhVHlwZTogInNjcmlwdCIsCgkJCWNhY2hlOiB0cnVlLAoJCQlhc3luYzogZmFsc2UsCgkJCWdsb2JhbDogZmFsc2UsCgkJCSJ0aHJvd3MiOiB0cnVlCgkJfSApOwoJfTsKCgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCXdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkgewoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7CgkJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHsKCQkJCQlqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApOwoJCQkJfSApOwoJCQl9CgoJCQlpZiAoIHRoaXNbIDAgXSApIHsKCgkJCQkvLyBUaGUgZWxlbWVudHMgdG8gd3JhcCB0aGUgdGFyZ2V0IGFyb3VuZAoJCQkJdmFyIHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApOwoKCQkJCWlmICggdGhpc1sgMCBdLnBhcmVudE5vZGUgKSB7CgkJCQkJd3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbIDAgXSApOwoJCQkJfQoKCQkJCXdyYXAubWFwKCBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZWxlbSA9IHRoaXM7CgoJCQkJCXdoaWxlICggZWxlbS5maXJzdENoaWxkICYmIGVsZW0uZmlyc3RDaGlsZC5ub2RlVHlwZSA9PT0gMSApIHsKCQkJCQkJZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsKCQkJCQl9CgoJCQkJCXJldHVybiBlbGVtOwoJCQkJfSApLmFwcGVuZCggdGhpcyApOwoJCQl9CgoJCQlyZXR1cm4gdGhpczsKCQl9LAoKCQl3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkgewoJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7CgkJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHsKCQkJCQlqUXVlcnkoIHRoaXMgKS53cmFwSW5uZXIoIGh0bWwuY2FsbCggdGhpcywgaSApICk7CgkJCQl9ICk7CgkJCX0KCgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJdmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSwKCQkJCQljb250ZW50cyA9IHNlbGYuY29udGVudHMoKTsKCgkJCQlpZiAoIGNvbnRlbnRzLmxlbmd0aCApIHsKCQkJCQljb250ZW50cy53cmFwQWxsKCBodG1sICk7CgoJCQkJfSBlbHNlIHsKCQkJCQlzZWxmLmFwcGVuZCggaHRtbCApOwoJCQkJfQoJCQl9ICk7CgkJfSwKCgkJd3JhcDogZnVuY3Rpb24oIGh0bWwgKSB7CgkJCXZhciBpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKTsKCgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQkJalF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaXNGdW5jdGlvbiA/IGh0bWwuY2FsbCggdGhpcywgaSApIDogaHRtbCApOwoJCQl9ICk7CgkJfSwKCgkJdW53cmFwOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlpZiAoICFqUXVlcnkubm9kZU5hbWUoIHRoaXMsICJib2R5IiApICkgewoJCQkJCWpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTsKCQkJCX0KCQkJfSApLmVuZCgpOwoJCX0KCX0gKTsKCgoJZnVuY3Rpb24gZ2V0RGlzcGxheSggZWxlbSApIHsKCQlyZXR1cm4gZWxlbS5zdHlsZSAmJiBlbGVtLnN0eWxlLmRpc3BsYXkgfHwgalF1ZXJ5LmNzcyggZWxlbSwgImRpc3BsYXkiICk7Cgl9CgoJZnVuY3Rpb24gZmlsdGVySGlkZGVuKCBlbGVtICkgewoKCQkvLyBEaXNjb25uZWN0ZWQgZWxlbWVudHMgYXJlIGNvbnNpZGVyZWQgaGlkZGVuCgkJaWYgKCAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQsIGVsZW0gKSApIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXdoaWxlICggZWxlbSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQlpZiAoIGdldERpc3BsYXkoIGVsZW0gKSA9PT0gIm5vbmUiIHx8IGVsZW0udHlwZSA9PT0gImhpZGRlbiIgKSB7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCQllbGVtID0gZWxlbS5wYXJlbnROb2RlOwoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgoJalF1ZXJ5LmV4cHIuZmlsdGVycy5oaWRkZW4gPSBmdW5jdGlvbiggZWxlbSApIHsKCgkJLy8gU3VwcG9ydDogT3BlcmEgPD0gMTIuMTIKCQkvLyBPcGVyYSByZXBvcnRzIG9mZnNldFdpZHRocyBhbmQgb2Zmc2V0SGVpZ2h0cyBsZXNzIHRoYW4gemVybyBvbiBzb21lIGVsZW1lbnRzCgkJcmV0dXJuIHN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzKCkgPwoJCQkoIGVsZW0ub2Zmc2V0V2lkdGggPD0gMCAmJiBlbGVtLm9mZnNldEhlaWdodCA8PSAwICYmCgkJCQkhZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApIDoKCQkJCWZpbHRlckhpZGRlbiggZWxlbSApOwoJfTsKCglqUXVlcnkuZXhwci5maWx0ZXJzLnZpc2libGUgPSBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4gIWpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuKCBlbGVtICk7Cgl9OwoKCgoKCXZhciByMjAgPSAvJTIwL2csCgkJcmJyYWNrZXQgPSAvXFtcXSQvLAoJCXJDUkxGID0gL1xyP1xuL2csCgkJcnN1Ym1pdHRlclR5cGVzID0gL14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLAoJCXJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTsKCglmdW5jdGlvbiBidWlsZFBhcmFtcyggcHJlZml4LCBvYmosIHRyYWRpdGlvbmFsLCBhZGQgKSB7CgkJdmFyIG5hbWU7CgoJCWlmICggalF1ZXJ5LmlzQXJyYXkoIG9iaiApICkgewoKCQkJLy8gU2VyaWFsaXplIGFycmF5IGl0ZW0uCgkJCWpRdWVyeS5lYWNoKCBvYmosIGZ1bmN0aW9uKCBpLCB2ICkgewoJCQkJaWYgKCB0cmFkaXRpb25hbCB8fCByYnJhY2tldC50ZXN0KCBwcmVmaXggKSApIHsKCgkJCQkJLy8gVHJlYXQgZWFjaCBhcnJheSBpdGVtIGFzIGEgc2NhbGFyLgoJCQkJCWFkZCggcHJlZml4LCB2ICk7CgoJCQkJfSBlbHNlIHsKCgkJCQkJLy8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguCgkJCQkJYnVpbGRQYXJhbXMoCgkJCQkJCXByZWZpeCArICJbIiArICggdHlwZW9mIHYgPT09ICJvYmplY3QiICYmIHYgIT0gbnVsbCA/IGkgOiAiIiApICsgIl0iLAoJCQkJCQl2LAoJCQkJCQl0cmFkaXRpb25hbCwKCQkJCQkJYWRkCgkJCQkJKTsKCQkJCX0KCQkJfSApOwoKCQl9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgalF1ZXJ5LnR5cGUoIG9iaiApID09PSAib2JqZWN0IiApIHsKCgkJCS8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS4KCQkJZm9yICggbmFtZSBpbiBvYmogKSB7CgkJCQlidWlsZFBhcmFtcyggcHJlZml4ICsgIlsiICsgbmFtZSArICJdIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTsKCQkJfQoKCQl9IGVsc2UgewoKCQkJLy8gU2VyaWFsaXplIHNjYWxhciBpdGVtLgoJCQlhZGQoIHByZWZpeCwgb2JqICk7CgkJfQoJfQoKCS8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mCgkvLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmcKCWpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHsKCQl2YXIgcHJlZml4LAoJCQlzID0gW10sCgkJCWFkZCA9IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoKCQkJCS8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgcmV0dXJuIGl0cyB2YWx1ZQoJCQkJdmFsdWUgPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSA/IHZhbHVlKCkgOiAoIHZhbHVlID09IG51bGwgPyAiIiA6IHZhbHVlICk7CgkJCQlzWyBzLmxlbmd0aCBdID0gZW5jb2RlVVJJQ29tcG9uZW50KCBrZXkgKSArICI9IiArIGVuY29kZVVSSUNvbXBvbmVudCggdmFsdWUgKTsKCQkJfTsKCgkJLy8gU2V0IHRyYWRpdGlvbmFsIHRvIHRydWUgZm9yIGpRdWVyeSA8PSAxLjMuMiBiZWhhdmlvci4KCQlpZiAoIHRyYWRpdGlvbmFsID09PSB1bmRlZmluZWQgKSB7CgkJCXRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsOwoJCX0KCgkJLy8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy4KCQlpZiAoIGpRdWVyeS5pc0FycmF5KCBhICkgfHwgKCBhLmpxdWVyeSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGEgKSApICkgewoKCQkJLy8gU2VyaWFsaXplIHRoZSBmb3JtIGVsZW1lbnRzCgkJCWpRdWVyeS5lYWNoKCBhLCBmdW5jdGlvbigpIHsKCQkJCWFkZCggdGhpcy5uYW1lLCB0aGlzLnZhbHVlICk7CgkJCX0gKTsKCgkJfSBlbHNlIHsKCgkJCS8vIElmIHRyYWRpdGlvbmFsLCBlbmNvZGUgdGhlICJvbGQiIHdheSAodGhlIHdheSAxLjMuMiBvciBvbGRlcgoJCQkvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS4KCQkJZm9yICggcHJlZml4IGluIGEgKSB7CgkJCQlidWlsZFBhcmFtcyggcHJlZml4LCBhWyBwcmVmaXggXSwgdHJhZGl0aW9uYWwsIGFkZCApOwoJCQl9CgkJfQoKCQkvLyBSZXR1cm4gdGhlIHJlc3VsdGluZyBzZXJpYWxpemF0aW9uCgkJcmV0dXJuIHMuam9pbiggIiYiICkucmVwbGFjZSggcjIwLCAiKyIgKTsKCX07CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCXNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7CgkJCXJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApOwoJCX0sCgkJc2VyaWFsaXplQXJyYXk6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkgewoKCQkJCS8vIENhbiBhZGQgcHJvcEhvb2sgZm9yICJlbGVtZW50cyIgdG8gZmlsdGVyIG9yIGFkZCBmb3JtIGVsZW1lbnRzCgkJCQl2YXIgZWxlbWVudHMgPSBqUXVlcnkucHJvcCggdGhpcywgImVsZW1lbnRzIiApOwoJCQkJcmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7CgkJCX0gKQoJCQkuZmlsdGVyKCBmdW5jdGlvbigpIHsKCQkJCXZhciB0eXBlID0gdGhpcy50eXBlOwoKCQkJCS8vIFVzZSAuaXMoIjpkaXNhYmxlZCIpIHNvIHRoYXQgZmllbGRzZXRbZGlzYWJsZWRdIHdvcmtzCgkJCQlyZXR1cm4gdGhpcy5uYW1lICYmICFqUXVlcnkoIHRoaXMgKS5pcyggIjpkaXNhYmxlZCIgKSAmJgoJCQkJCXJzdWJtaXR0YWJsZS50ZXN0KCB0aGlzLm5vZGVOYW1lICkgJiYgIXJzdWJtaXR0ZXJUeXBlcy50ZXN0KCB0eXBlICkgJiYKCQkJCQkoIHRoaXMuY2hlY2tlZCB8fCAhcmNoZWNrYWJsZVR5cGUudGVzdCggdHlwZSApICk7CgkJCX0gKQoJCQkubWFwKCBmdW5jdGlvbiggaSwgZWxlbSApIHsKCQkJCXZhciB2YWwgPSBqUXVlcnkoIHRoaXMgKS52YWwoKTsKCgkJCQlyZXR1cm4gdmFsID09IG51bGwgPwoJCQkJCW51bGwgOgoJCQkJCWpRdWVyeS5pc0FycmF5KCB2YWwgKSA/CgkJCQkJCWpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbCApIHsKCQkJCQkJCXJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgIlxyXG4iICkgfTsKCQkJCQkJfSApIDoKCQkJCQkJeyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsICJcclxuIiApIH07CgkJCX0gKS5nZXQoKTsKCQl9Cgl9ICk7CgoKCS8vIENyZWF0ZSB0aGUgcmVxdWVzdCBvYmplY3QKCS8vIChUaGlzIGlzIHN0aWxsIGF0dGFjaGVkIHRvIGFqYXhTZXR0aW5ncyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSkKCWpRdWVyeS5hamF4U2V0dGluZ3MueGhyID0gd2luZG93LkFjdGl2ZVhPYmplY3QgIT09IHVuZGVmaW5lZCA/CgoJCS8vIFN1cHBvcnQ6IElFNi1JRTgKCQlmdW5jdGlvbigpIHsKCgkJCS8vIFhIUiBjYW5ub3QgYWNjZXNzIGxvY2FsIGZpbGVzLCBhbHdheXMgdXNlIEFjdGl2ZVggZm9yIHRoYXQgY2FzZQoJCQlpZiAoIHRoaXMuaXNMb2NhbCApIHsKCQkJCXJldHVybiBjcmVhdGVBY3RpdmVYSFIoKTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogSUUgOS0xMQoJCQkvLyBJRSBzZWVtcyB0byBlcnJvciBvbiBjcm9zcy1kb21haW4gUEFUQ0ggcmVxdWVzdHMgd2hlbiBBY3RpdmVYIFhIUgoJCQkvLyBpcyB1c2VkLiBJbiBJRSA5KyBhbHdheXMgdXNlIHRoZSBuYXRpdmUgWEhSLgoJCQkvLyBOb3RlOiB0aGlzIGNvbmRpdGlvbiB3b24ndCBjYXRjaCBFZGdlIGFzIGl0IGRvZXNuJ3QgZGVmaW5lCgkJCS8vIGRvY3VtZW50LmRvY3VtZW50TW9kZSBidXQgaXQgYWxzbyBkb2Vzbid0IHN1cHBvcnQgQWN0aXZlWCBzbyBpdCB3b24ndAoJCQkvLyByZWFjaCB0aGlzIGNvZGUuCgkJCWlmICggZG9jdW1lbnQuZG9jdW1lbnRNb2RlID4gOCApIHsKCQkJCXJldHVybiBjcmVhdGVTdGFuZGFyZFhIUigpOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCS8vIG9sZElFIFhIUiBkb2VzIG5vdCBzdXBwb3J0IG5vbi1SRkMyNjE2IG1ldGhvZHMgKCMxMzI0MCkKCQkJLy8gU2VlIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9tczUzNjY0OCh2PXZzLjg1KS5hc3B4CgkJCS8vIGFuZCBodHRwOi8vd3d3LnczLm9yZy9Qcm90b2NvbHMvcmZjMjYxNi9yZmMyNjE2LXNlYzkuaHRtbCNzZWM5CgkJCS8vIEFsdGhvdWdoIHRoaXMgY2hlY2sgZm9yIHNpeCBtZXRob2RzIGluc3RlYWQgb2YgZWlnaHQKCQkJLy8gc2luY2UgSUUgYWxzbyBkb2VzIG5vdCBzdXBwb3J0ICJ0cmFjZSIgYW5kICJjb25uZWN0IgoJCQlyZXR1cm4gL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QoIHRoaXMudHlwZSApICYmCgkJCQljcmVhdGVTdGFuZGFyZFhIUigpIHx8IGNyZWF0ZUFjdGl2ZVhIUigpOwoJCX0gOgoKCQkvLyBGb3IgYWxsIG90aGVyIGJyb3dzZXJzLCB1c2UgdGhlIHN0YW5kYXJkIFhNTEh0dHBSZXF1ZXN0IG9iamVjdAoJCWNyZWF0ZVN0YW5kYXJkWEhSOwoKCXZhciB4aHJJZCA9IDAsCgkJeGhyQ2FsbGJhY2tzID0ge30sCgkJeGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTsKCgkvLyBTdXBwb3J0OiBJRTwxMAoJLy8gT3BlbiByZXF1ZXN0cyBtdXN0IGJlIG1hbnVhbGx5IGFib3J0ZWQgb24gdW5sb2FkICgjNTI4MCkKCS8vIFNlZSBodHRwczovL3N1cHBvcnQubWljcm9zb2Z0LmNvbS9rYi8yODU2NzQ2IGZvciBtb3JlIGluZm8KCWlmICggd2luZG93LmF0dGFjaEV2ZW50ICkgewoJCXdpbmRvdy5hdHRhY2hFdmVudCggIm9udW5sb2FkIiwgZnVuY3Rpb24oKSB7CgkJCWZvciAoIHZhciBrZXkgaW4geGhyQ2FsbGJhY2tzICkgewoJCQkJeGhyQ2FsbGJhY2tzWyBrZXkgXSggdW5kZWZpbmVkLCB0cnVlICk7CgkJCX0KCQl9ICk7Cgl9CgoJLy8gRGV0ZXJtaW5lIHN1cHBvcnQgcHJvcGVydGllcwoJc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCAid2l0aENyZWRlbnRpYWxzIiBpbiB4aHJTdXBwb3J0ZWQgKTsKCXhoclN1cHBvcnRlZCA9IHN1cHBvcnQuYWpheCA9ICEheGhyU3VwcG9ydGVkOwoKCS8vIENyZWF0ZSB0cmFuc3BvcnQgaWYgdGhlIGJyb3dzZXIgY2FuIHByb3ZpZGUgYW4geGhyCglpZiAoIHhoclN1cHBvcnRlZCApIHsKCgkJalF1ZXJ5LmFqYXhUcmFuc3BvcnQoIGZ1bmN0aW9uKCBvcHRpb25zICkgewoKCQkJLy8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdAoJCQlpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluIHx8IHN1cHBvcnQuY29ycyApIHsKCgkJCQl2YXIgY2FsbGJhY2s7CgoJCQkJcmV0dXJuIHsKCQkJCQlzZW5kOiBmdW5jdGlvbiggaGVhZGVycywgY29tcGxldGUgKSB7CgkJCQkJCXZhciBpLAoJCQkJCQkJeGhyID0gb3B0aW9ucy54aHIoKSwKCQkJCQkJCWlkID0gKyt4aHJJZDsKCgkJCQkJCS8vIE9wZW4gdGhlIHNvY2tldAoJCQkJCQl4aHIub3BlbigKCQkJCQkJCW9wdGlvbnMudHlwZSwKCQkJCQkJCW9wdGlvbnMudXJsLAoJCQkJCQkJb3B0aW9ucy5hc3luYywKCQkJCQkJCW9wdGlvbnMudXNlcm5hbWUsCgkJCQkJCQlvcHRpb25zLnBhc3N3b3JkCgkJCQkJCSk7CgoJCQkJCQkvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkCgkJCQkJCWlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7CgkJCQkJCQlmb3IgKCBpIGluIG9wdGlvbnMueGhyRmllbGRzICkgewoJCQkJCQkJCXhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTsKCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJLy8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZAoJCQkJCQlpZiAoIG9wdGlvbnMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7CgkJCQkJCQl4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApOwoJCQkJCQl9CgoJCQkJCQkvLyBYLVJlcXVlc3RlZC1XaXRoIGhlYWRlcgoJCQkJCQkvLyBGb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzLCBzZWVpbmcgYXMgY29uZGl0aW9ucyBmb3IgYSBwcmVmbGlnaHQgYXJlCgkJCQkJCS8vIGFraW4gdG8gYSBqaWdzYXcgcHV6emxlLCB3ZSBzaW1wbHkgbmV2ZXIgc2V0IGl0IHRvIGJlIHN1cmUuCgkJCQkJCS8vIChpdCBjYW4gYWx3YXlzIGJlIHNldCBvbiBhIHBlci1yZXF1ZXN0IGJhc2lzIG9yIGV2ZW4gdXNpbmcgYWpheFNldHVwKQoJCQkJCQkvLyBGb3Igc2FtZS1kb21haW4gcmVxdWVzdHMsIHdvbid0IGNoYW5nZSBoZWFkZXIgaWYgYWxyZWFkeSBwcm92aWRlZC4KCQkJCQkJaWYgKCAhb3B0aW9ucy5jcm9zc0RvbWFpbiAmJiAhaGVhZGVyc1sgIlgtUmVxdWVzdGVkLVdpdGgiIF0gKSB7CgkJCQkJCQloZWFkZXJzWyAiWC1SZXF1ZXN0ZWQtV2l0aCIgXSA9ICJYTUxIdHRwUmVxdWVzdCI7CgkJCQkJCX0KCgkJCQkJCS8vIFNldCBoZWFkZXJzCgkJCQkJCWZvciAoIGkgaW4gaGVhZGVycyApIHsKCgkJCQkJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCQkJCQkvLyBJRSdzIEFjdGl2ZVhPYmplY3QgdGhyb3dzIGEgJ1R5cGUgTWlzbWF0Y2gnIGV4Y2VwdGlvbiB3aGVuIHNldHRpbmcKCQkJCQkJCS8vIHJlcXVlc3QgaGVhZGVyIHRvIGEgbnVsbC12YWx1ZS4KCQkJCQkJCS8vCgkJCQkJCQkvLyBUbyBrZWVwIGNvbnNpc3RlbnQgd2l0aCBvdGhlciBYSFIgaW1wbGVtZW50YXRpb25zLCBjYXN0IHRoZSB2YWx1ZQoJCQkJCQkJLy8gdG8gc3RyaW5nIGFuZCBpZ25vcmUgYHVuZGVmaW5lZGAuCgkJCQkJCQlpZiAoIGhlYWRlcnNbIGkgXSAhPT0gdW5kZWZpbmVkICkgewoJCQkJCQkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBoZWFkZXJzWyBpIF0gKyAiIiApOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQkvLyBEbyBzZW5kIHRoZSByZXF1ZXN0CgkJCQkJCS8vIFRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbiB3aGljaCBpcyBhY3R1YWxseQoJCQkJCQkvLyBoYW5kbGVkIGluIGpRdWVyeS5hamF4IChzbyBubyB0cnkvY2F0Y2ggaGVyZSkKCQkJCQkJeGhyLnNlbmQoICggb3B0aW9ucy5oYXNDb250ZW50ICYmIG9wdGlvbnMuZGF0YSApIHx8IG51bGwgKTsKCgkJCQkJCS8vIExpc3RlbmVyCgkJCQkJCWNhbGxiYWNrID0gZnVuY3Rpb24oIF8sIGlzQWJvcnQgKSB7CgkJCQkJCQl2YXIgc3RhdHVzLCBzdGF0dXNUZXh0LCByZXNwb25zZXM7CgoJCQkJCQkJLy8gV2FzIG5ldmVyIGNhbGxlZCBhbmQgaXMgYWJvcnRlZCBvciBjb21wbGV0ZQoJCQkJCQkJaWYgKCBjYWxsYmFjayAmJiAoIGlzQWJvcnQgfHwgeGhyLnJlYWR5U3RhdGUgPT09IDQgKSApIHsKCgkJCQkJCQkJLy8gQ2xlYW4gdXAKCQkJCQkJCQlkZWxldGUgeGhyQ2FsbGJhY2tzWyBpZCBdOwoJCQkJCQkJCWNhbGxiYWNrID0gdW5kZWZpbmVkOwoJCQkJCQkJCXhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBqUXVlcnkubm9vcDsKCgkJCQkJCQkJLy8gQWJvcnQgbWFudWFsbHkgaWYgbmVlZGVkCgkJCQkJCQkJaWYgKCBpc0Fib3J0ICkgewoJCQkJCQkJCQlpZiAoIHhoci5yZWFkeVN0YXRlICE9PSA0ICkgewoJCQkJCQkJCQkJeGhyLmFib3J0KCk7CgkJCQkJCQkJCX0KCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlyZXNwb25zZXMgPSB7fTsKCQkJCQkJCQkJc3RhdHVzID0geGhyLnN0YXR1czsKCgkJCQkJCQkJCS8vIFN1cHBvcnQ6IElFPDEwCgkJCQkJCQkJCS8vIEFjY2Vzc2luZyBiaW5hcnktZGF0YSByZXNwb25zZVRleHQgdGhyb3dzIGFuIGV4Y2VwdGlvbgoJCQkJCQkJCQkvLyAoIzExNDI2KQoJCQkJCQkJCQlpZiAoIHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ID09PSAic3RyaW5nIiApIHsKCQkJCQkJCQkJCXJlc3BvbnNlcy50ZXh0ID0geGhyLnJlc3BvbnNlVGV4dDsKCQkJCQkJCQkJfQoKCQkJCQkJCQkJLy8gRmlyZWZveCB0aHJvd3MgYW4gZXhjZXB0aW9uIHdoZW4gYWNjZXNzaW5nCgkJCQkJCQkJCS8vIHN0YXR1c1RleHQgZm9yIGZhdWx0eSBjcm9zcy1kb21haW4gcmVxdWVzdHMKCQkJCQkJCQkJdHJ5IHsKCQkJCQkJCQkJCXN0YXR1c1RleHQgPSB4aHIuc3RhdHVzVGV4dDsKCQkJCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgoJCQkJCQkJCQkJLy8gV2Ugbm9ybWFsaXplIHdpdGggV2Via2l0IGdpdmluZyBhbiBlbXB0eSBzdGF0dXNUZXh0CgkJCQkJCQkJCQlzdGF0dXNUZXh0ID0gIiI7CgkJCQkJCQkJCX0KCgkJCQkJCQkJCS8vIEZpbHRlciBzdGF0dXMgZm9yIG5vbiBzdGFuZGFyZCBiZWhhdmlvcnMKCgkJCQkJCQkJCS8vIElmIHRoZSByZXF1ZXN0IGlzIGxvY2FsIGFuZCB3ZSBoYXZlIGRhdGE6IGFzc3VtZSBhIHN1Y2Nlc3MKCQkJCQkJCQkJLy8gKHN1Y2Nlc3Mgd2l0aCBubyBkYXRhIHdvbid0IGdldCBub3RpZmllZCwgdGhhdCdzIHRoZSBiZXN0IHdlCgkJCQkJCQkJCS8vIGNhbiBkbyBnaXZlbiBjdXJyZW50IGltcGxlbWVudGF0aW9ucykKCQkJCQkJCQkJaWYgKCAhc3RhdHVzICYmIG9wdGlvbnMuaXNMb2NhbCAmJiAhb3B0aW9ucy5jcm9zc0RvbWFpbiApIHsKCQkJCQkJCQkJCXN0YXR1cyA9IHJlc3BvbnNlcy50ZXh0ID8gMjAwIDogNDA0OwoKCQkJCQkJCQkJLy8gSUUgLSAjMTQ1MDogc29tZXRpbWVzIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDQKCQkJCQkJCQkJfSBlbHNlIGlmICggc3RhdHVzID09PSAxMjIzICkgewoJCQkJCQkJCQkJc3RhdHVzID0gMjA0OwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoKCQkJCQkJCS8vIENhbGwgY29tcGxldGUgaWYgbmVlZGVkCgkJCQkJCQlpZiAoIHJlc3BvbnNlcyApIHsKCQkJCQkJCQljb21wbGV0ZSggc3RhdHVzLCBzdGF0dXNUZXh0LCByZXNwb25zZXMsIHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSApOwoJCQkJCQkJfQoJCQkJCQl9OwoKCQkJCQkJLy8gRG8gc2VuZCB0aGUgcmVxdWVzdAoJCQkJCQkvLyBgeGhyLnNlbmRgIG1heSByYWlzZSBhbiBleGNlcHRpb24sIGJ1dCBpdCB3aWxsIGJlCgkJCQkJCS8vIGhhbmRsZWQgaW4galF1ZXJ5LmFqYXggKHNvIG5vIHRyeS9jYXRjaCBoZXJlKQoJCQkJCQlpZiAoICFvcHRpb25zLmFzeW5jICkgewoKCQkJCQkJCS8vIElmIHdlJ3JlIGluIHN5bmMgbW9kZSB3ZSBmaXJlIHRoZSBjYWxsYmFjawoJCQkJCQkJY2FsbGJhY2soKTsKCQkJCQkJfSBlbHNlIGlmICggeGhyLnJlYWR5U3RhdGUgPT09IDQgKSB7CgoJCQkJCQkJLy8gKElFNiAmIElFNykgaWYgaXQncyBpbiBjYWNoZSBhbmQgaGFzIGJlZW4KCQkJCQkJCS8vIHJldHJpZXZlZCBkaXJlY3RseSB3ZSBuZWVkIHRvIGZpcmUgdGhlIGNhbGxiYWNrCgkJCQkJCQl3aW5kb3cuc2V0VGltZW91dCggY2FsbGJhY2sgKTsKCQkJCQkJfSBlbHNlIHsKCgkJCQkJCQkvLyBSZWdpc3RlciB0aGUgY2FsbGJhY2ssIGJ1dCBkZWxheSBpdCBpbiBjYXNlIGB4aHIuc2VuZGAgdGhyb3dzCgkJCQkJCQkvLyBBZGQgdG8gdGhlIGxpc3Qgb2YgYWN0aXZlIHhociBjYWxsYmFja3MKCQkJCQkJCXhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSB4aHJDYWxsYmFja3NbIGlkIF0gPSBjYWxsYmFjazsKCQkJCQkJfQoJCQkJCX0sCgoJCQkJCWFib3J0OiBmdW5jdGlvbigpIHsKCQkJCQkJaWYgKCBjYWxsYmFjayApIHsKCQkJCQkJCWNhbGxiYWNrKCB1bmRlZmluZWQsIHRydWUgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX07CgkJCX0KCQl9ICk7Cgl9CgoJLy8gRnVuY3Rpb25zIHRvIGNyZWF0ZSB4aHJzCglmdW5jdGlvbiBjcmVhdGVTdGFuZGFyZFhIUigpIHsKCQl0cnkgewoJCQlyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpOwoJCX0gY2F0Y2ggKCBlICkge30KCX0KCglmdW5jdGlvbiBjcmVhdGVBY3RpdmVYSFIoKSB7CgkJdHJ5IHsKCQkJcmV0dXJuIG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCggIk1pY3Jvc29mdC5YTUxIVFRQIiApOwoJCX0gY2F0Y2ggKCBlICkge30KCX0KCgoKCgkvLyBJbnN0YWxsIHNjcmlwdCBkYXRhVHlwZQoJalF1ZXJ5LmFqYXhTZXR1cCggewoJCWFjY2VwdHM6IHsKCQkJc2NyaXB0OiAidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCAiICsKCQkJCSJhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQiCgkJfSwKCQljb250ZW50czogewoJCQlzY3JpcHQ6IC9cYig/OmphdmF8ZWNtYSlzY3JpcHRcYi8KCQl9LAoJCWNvbnZlcnRlcnM6IHsKCQkJInRleHQgc2NyaXB0IjogZnVuY3Rpb24oIHRleHQgKSB7CgkJCQlqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApOwoJCQkJcmV0dXJuIHRleHQ7CgkJCX0KCQl9Cgl9ICk7CgoJLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBnbG9iYWwKCWpRdWVyeS5hamF4UHJlZmlsdGVyKCAic2NyaXB0IiwgZnVuY3Rpb24oIHMgKSB7CgkJaWYgKCBzLmNhY2hlID09PSB1bmRlZmluZWQgKSB7CgkJCXMuY2FjaGUgPSBmYWxzZTsKCQl9CgkJaWYgKCBzLmNyb3NzRG9tYWluICkgewoJCQlzLnR5cGUgPSAiR0VUIjsKCQkJcy5nbG9iYWwgPSBmYWxzZTsKCQl9Cgl9ICk7CgoJLy8gQmluZCBzY3JpcHQgdGFnIGhhY2sgdHJhbnNwb3J0CglqUXVlcnkuYWpheFRyYW5zcG9ydCggInNjcmlwdCIsIGZ1bmN0aW9uKCBzICkgewoKCQkvLyBUaGlzIHRyYW5zcG9ydCBvbmx5IGRlYWxzIHdpdGggY3Jvc3MgZG9tYWluIHJlcXVlc3RzCgkJaWYgKCBzLmNyb3NzRG9tYWluICkgewoKCQkJdmFyIHNjcmlwdCwKCQkJCWhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGpRdWVyeSggImhlYWQiIClbIDAgXSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgoJCQlyZXR1cm4gewoKCQkJCXNlbmQ6IGZ1bmN0aW9uKCBfLCBjYWxsYmFjayApIHsKCgkJCQkJc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggInNjcmlwdCIgKTsKCgkJCQkJc2NyaXB0LmFzeW5jID0gdHJ1ZTsKCgkJCQkJaWYgKCBzLnNjcmlwdENoYXJzZXQgKSB7CgkJCQkJCXNjcmlwdC5jaGFyc2V0ID0gcy5zY3JpcHRDaGFyc2V0OwoJCQkJCX0KCgkJCQkJc2NyaXB0LnNyYyA9IHMudXJsOwoKCQkJCQkvLyBBdHRhY2ggaGFuZGxlcnMgZm9yIGFsbCBicm93c2VycwoJCQkJCXNjcmlwdC5vbmxvYWQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oIF8sIGlzQWJvcnQgKSB7CgoJCQkJCQlpZiAoIGlzQWJvcnQgfHwgIXNjcmlwdC5yZWFkeVN0YXRlIHx8IC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoIHNjcmlwdC5yZWFkeVN0YXRlICkgKSB7CgoJCQkJCQkJLy8gSGFuZGxlIG1lbW9yeSBsZWFrIGluIElFCgkJCQkJCQlzY3JpcHQub25sb2FkID0gc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7CgoJCQkJCQkJLy8gUmVtb3ZlIHRoZSBzY3JpcHQKCQkJCQkJCWlmICggc2NyaXB0LnBhcmVudE5vZGUgKSB7CgkJCQkJCQkJc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApOwoJCQkJCQkJfQoKCQkJCQkJCS8vIERlcmVmZXJlbmNlIHRoZSBzY3JpcHQKCQkJCQkJCXNjcmlwdCA9IG51bGw7CgoJCQkJCQkJLy8gQ2FsbGJhY2sgaWYgbm90IGFib3J0CgkJCQkJCQlpZiAoICFpc0Fib3J0ICkgewoJCQkJCQkJCWNhbGxiYWNrKCAyMDAsICJzdWNjZXNzIiApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfTsKCgkJCQkJLy8gQ2lyY3VtdmVudCBJRTYgYnVncyB3aXRoIGJhc2UgZWxlbWVudHMgKCMyNzA5IGFuZCAjNDM3OCkgYnkgcHJlcGVuZGluZwoJCQkJCS8vIFVzZSBuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiB0byBhdm9pZCBvdXIgZG9tTWFuaXAgQUpBWCB0cmlja2VyeQoJCQkJCWhlYWQuaW5zZXJ0QmVmb3JlKCBzY3JpcHQsIGhlYWQuZmlyc3RDaGlsZCApOwoJCQkJfSwKCgkJCQlhYm9ydDogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCBzY3JpcHQgKSB7CgkJCQkJCXNjcmlwdC5vbmxvYWQoIHVuZGVmaW5lZCwgdHJ1ZSApOwoJCQkJCX0KCQkJCX0KCQkJfTsKCQl9Cgl9ICk7CgoKCgoJdmFyIG9sZENhbGxiYWNrcyA9IFtdLAoJCXJqc29ucCA9IC8oPSlcPyg/PSZ8JCl8XD9cPy87CgoJLy8gRGVmYXVsdCBqc29ucCBzZXR0aW5ncwoJalF1ZXJ5LmFqYXhTZXR1cCggewoJCWpzb25wOiAiY2FsbGJhY2siLAoJCWpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkgewoJCQl2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArICJfIiArICggbm9uY2UrKyApICk7CgkJCXRoaXNbIGNhbGxiYWNrIF0gPSB0cnVlOwoJCQlyZXR1cm4gY2FsbGJhY2s7CgkJfQoJfSApOwoKCS8vIERldGVjdCwgbm9ybWFsaXplIG9wdGlvbnMgYW5kIGluc3RhbGwgY2FsbGJhY2tzIGZvciBqc29ucCByZXF1ZXN0cwoJalF1ZXJ5LmFqYXhQcmVmaWx0ZXIoICJqc29uIGpzb25wIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkgewoKCQl2YXIgY2FsbGJhY2tOYW1lLCBvdmVyd3JpdHRlbiwgcmVzcG9uc2VDb250YWluZXIsCgkJCWpzb25Qcm9wID0gcy5qc29ucCAhPT0gZmFsc2UgJiYgKCByanNvbnAudGVzdCggcy51cmwgKSA/CgkJCQkidXJsIiA6CgkJCQl0eXBlb2Ygcy5kYXRhID09PSAic3RyaW5nIiAmJgoJCQkJCSggcy5jb250ZW50VHlwZSB8fCAiIiApCgkJCQkJCS5pbmRleE9mKCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiApID09PSAwICYmCgkJCQkJcmpzb25wLnRlc3QoIHMuZGF0YSApICYmICJkYXRhIgoJCQkpOwoKCQkvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgImpzb25wIiBvciB3ZSBoYXZlIGEgcGFyYW1ldGVyIHRvIHNldAoJCWlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gImpzb25wIiApIHsKCgkJCS8vIEdldCBjYWxsYmFjayBuYW1lLCByZW1lbWJlcmluZyBwcmVleGlzdGluZyB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggaXQKCQkJY2FsbGJhY2tOYW1lID0gcy5qc29ucENhbGxiYWNrID0galF1ZXJ5LmlzRnVuY3Rpb24oIHMuanNvbnBDYWxsYmFjayApID8KCQkJCXMuanNvbnBDYWxsYmFjaygpIDoKCQkJCXMuanNvbnBDYWxsYmFjazsKCgkJCS8vIEluc2VydCBjYWxsYmFjayBpbnRvIHVybCBvciBmb3JtIGRhdGEKCQkJaWYgKCBqc29uUHJvcCApIHsKCQkJCXNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgIiQxIiArIGNhbGxiYWNrTmFtZSApOwoJCQl9IGVsc2UgaWYgKCBzLmpzb25wICE9PSBmYWxzZSApIHsKCQkJCXMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIHMudXJsICkgPyAiJiIgOiAiPyIgKSArIHMuanNvbnAgKyAiPSIgKyBjYWxsYmFja05hbWU7CgkJCX0KCgkJCS8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb24KCQkJcy5jb252ZXJ0ZXJzWyAic2NyaXB0IGpzb24iIF0gPSBmdW5jdGlvbigpIHsKCQkJCWlmICggIXJlc3BvbnNlQ29udGFpbmVyICkgewoJCQkJCWpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgIiB3YXMgbm90IGNhbGxlZCIgKTsKCQkJCX0KCQkJCXJldHVybiByZXNwb25zZUNvbnRhaW5lclsgMCBdOwoJCQl9OwoKCQkJLy8gZm9yY2UganNvbiBkYXRhVHlwZQoJCQlzLmRhdGFUeXBlc1sgMCBdID0gImpzb24iOwoKCQkJLy8gSW5zdGFsbCBjYWxsYmFjawoJCQlvdmVyd3JpdHRlbiA9IHdpbmRvd1sgY2FsbGJhY2tOYW1lIF07CgkJCXdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHsKCQkJCXJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzOwoJCQl9OwoKCQkJLy8gQ2xlYW4tdXAgZnVuY3Rpb24gKGZpcmVzIGFmdGVyIGNvbnZlcnRlcnMpCgkJCWpxWEhSLmFsd2F5cyggZnVuY3Rpb24oKSB7CgoJCQkJLy8gSWYgcHJldmlvdXMgdmFsdWUgZGlkbid0IGV4aXN0IC0gcmVtb3ZlIGl0CgkJCQlpZiAoIG92ZXJ3cml0dGVuID09PSB1bmRlZmluZWQgKSB7CgkJCQkJalF1ZXJ5KCB3aW5kb3cgKS5yZW1vdmVQcm9wKCBjYWxsYmFja05hbWUgKTsKCgkJCQkvLyBPdGhlcndpc2UgcmVzdG9yZSBwcmVleGlzdGluZyB2YWx1ZQoJCQkJfSBlbHNlIHsKCQkJCQl3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47CgkJCQl9CgoJCQkJLy8gU2F2ZSBiYWNrIGFzIGZyZWUKCQkJCWlmICggc1sgY2FsbGJhY2tOYW1lIF0gKSB7CgoJCQkJCS8vIG1ha2Ugc3VyZSB0aGF0IHJlLXVzaW5nIHRoZSBvcHRpb25zIGRvZXNuJ3Qgc2NyZXcgdGhpbmdzIGFyb3VuZAoJCQkJCXMuanNvbnBDYWxsYmFjayA9IG9yaWdpbmFsU2V0dGluZ3MuanNvbnBDYWxsYmFjazsKCgkJCQkJLy8gc2F2ZSB0aGUgY2FsbGJhY2sgbmFtZSBmb3IgZnV0dXJlIHVzZQoJCQkJCW9sZENhbGxiYWNrcy5wdXNoKCBjYWxsYmFja05hbWUgKTsKCQkJCX0KCgkJCQkvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2UKCQkJCWlmICggcmVzcG9uc2VDb250YWluZXIgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7CgkJCQkJb3ZlcndyaXR0ZW4oIHJlc3BvbnNlQ29udGFpbmVyWyAwIF0gKTsKCQkJCX0KCgkJCQlyZXNwb25zZUNvbnRhaW5lciA9IG92ZXJ3cml0dGVuID0gdW5kZWZpbmVkOwoJCQl9ICk7CgoJCQkvLyBEZWxlZ2F0ZSB0byBzY3JpcHQKCQkJcmV0dXJuICJzY3JpcHQiOwoJCX0KCX0gKTsKCgoKCgkvLyBkYXRhOiBzdHJpbmcgb2YgaHRtbAoJLy8gY29udGV4dCAob3B0aW9uYWwpOiBJZiBzcGVjaWZpZWQsIHRoZSBmcmFnbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhpcyBjb250ZXh0LAoJLy8gZGVmYXVsdHMgdG8gZG9jdW1lbnQKCS8vIGtlZXBTY3JpcHRzIChvcHRpb25hbCk6IElmIHRydWUsIHdpbGwgaW5jbHVkZSBzY3JpcHRzIHBhc3NlZCBpbiB0aGUgaHRtbCBzdHJpbmcKCWpRdWVyeS5wYXJzZUhUTUwgPSBmdW5jdGlvbiggZGF0YSwgY29udGV4dCwga2VlcFNjcmlwdHMgKSB7CgkJaWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gInN0cmluZyIgKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCQlpZiAoIHR5cGVvZiBjb250ZXh0ID09PSAiYm9vbGVhbiIgKSB7CgkJCWtlZXBTY3JpcHRzID0gY29udGV4dDsKCQkJY29udGV4dCA9IGZhbHNlOwoJCX0KCQljb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDsKCgkJdmFyIHBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApLAoJCQlzY3JpcHRzID0gIWtlZXBTY3JpcHRzICYmIFtdOwoKCQkvLyBTaW5nbGUgdGFnCgkJaWYgKCBwYXJzZWQgKSB7CgkJCXJldHVybiBbIGNvbnRleHQuY3JlYXRlRWxlbWVudCggcGFyc2VkWyAxIF0gKSBdOwoJCX0KCgkJcGFyc2VkID0gYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTsKCgkJaWYgKCBzY3JpcHRzICYmIHNjcmlwdHMubGVuZ3RoICkgewoJCQlqUXVlcnkoIHNjcmlwdHMgKS5yZW1vdmUoKTsKCQl9CgoJCXJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBwYXJzZWQuY2hpbGROb2RlcyApOwoJfTsKCgoJLy8gS2VlcCBhIGNvcHkgb2YgdGhlIG9sZCBsb2FkIG1ldGhvZAoJdmFyIF9sb2FkID0galF1ZXJ5LmZuLmxvYWQ7CgoJLyoqCgkgKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlCgkgKi8KCWpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHsKCQlpZiAoIHR5cGVvZiB1cmwgIT09ICJzdHJpbmciICYmIF9sb2FkICkgewoJCQlyZXR1cm4gX2xvYWQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCX0KCgkJdmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSwKCQkJc2VsZiA9IHRoaXMsCgkJCW9mZiA9IHVybC5pbmRleE9mKCAiICIgKTsKCgkJaWYgKCBvZmYgPiAtMSApIHsKCQkJc2VsZWN0b3IgPSBqUXVlcnkudHJpbSggdXJsLnNsaWNlKCBvZmYsIHVybC5sZW5ndGggKSApOwoJCQl1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApOwoJCX0KCgkJLy8gSWYgaXQncyBhIGZ1bmN0aW9uCgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcGFyYW1zICkgKSB7CgoJCQkvLyBXZSBhc3N1bWUgdGhhdCBpdCdzIHRoZSBjYWxsYmFjawoJCQljYWxsYmFjayA9IHBhcmFtczsKCQkJcGFyYW1zID0gdW5kZWZpbmVkOwoKCQkvLyBPdGhlcndpc2UsIGJ1aWxkIGEgcGFyYW0gc3RyaW5nCgkJfSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09ICJvYmplY3QiICkgewoJCQl0eXBlID0gIlBPU1QiOwoJCX0KCgkJLy8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3QKCQlpZiAoIHNlbGYubGVuZ3RoID4gMCApIHsKCQkJalF1ZXJ5LmFqYXgoIHsKCQkJCXVybDogdXJsLAoKCQkJCS8vIElmICJ0eXBlIiB2YXJpYWJsZSBpcyB1bmRlZmluZWQsIHRoZW4gIkdFVCIgbWV0aG9kIHdpbGwgYmUgdXNlZC4KCQkJCS8vIE1ha2UgdmFsdWUgb2YgdGhpcyBmaWVsZCBleHBsaWNpdCBzaW5jZQoJCQkJLy8gdXNlciBjYW4gb3ZlcnJpZGUgaXQgdGhyb3VnaCBhamF4U2V0dXAgbWV0aG9kCgkJCQl0eXBlOiB0eXBlIHx8ICJHRVQiLAoJCQkJZGF0YVR5cGU6ICJodG1sIiwKCQkJCWRhdGE6IHBhcmFtcwoJCQl9ICkuZG9uZSggZnVuY3Rpb24oIHJlc3BvbnNlVGV4dCApIHsKCgkJCQkvLyBTYXZlIHJlc3BvbnNlIGZvciB1c2UgaW4gY29tcGxldGUgY2FsbGJhY2sKCQkJCXJlc3BvbnNlID0gYXJndW1lbnRzOwoKCQkJCXNlbGYuaHRtbCggc2VsZWN0b3IgPwoKCQkJCQkvLyBJZiBhIHNlbGVjdG9yIHdhcyBzcGVjaWZpZWQsIGxvY2F0ZSB0aGUgcmlnaHQgZWxlbWVudHMgaW4gYSBkdW1teSBkaXYKCQkJCQkvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnMKCQkJCQlqUXVlcnkoICI8ZGl2PiIgKS5hcHBlbmQoIGpRdWVyeS5wYXJzZUhUTUwoIHJlc3BvbnNlVGV4dCApICkuZmluZCggc2VsZWN0b3IgKSA6CgoJCQkJCS8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0CgkJCQkJcmVzcG9uc2VUZXh0ICk7CgoJCQkvLyBJZiB0aGUgcmVxdWVzdCBzdWNjZWVkcywgdGhpcyBmdW5jdGlvbiBnZXRzICJkYXRhIiwgInN0YXR1cyIsICJqcVhIUiIKCQkJLy8gYnV0IHRoZXkgYXJlIGlnbm9yZWQgYmVjYXVzZSByZXNwb25zZSB3YXMgc2V0IGFib3ZlLgoJCQkvLyBJZiBpdCBmYWlscywgdGhpcyBmdW5jdGlvbiBnZXRzICJqcVhIUiIsICJzdGF0dXMiLCAiZXJyb3IiCgkJCX0gKS5hbHdheXMoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkgewoJCQkJc2VsZi5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCQljYWxsYmFjay5hcHBseSggdGhpcywgcmVzcG9uc2UgfHwgWyBqcVhIUi5yZXNwb25zZVRleHQsIHN0YXR1cywganFYSFIgXSApOwoJCQkJfSApOwoJCQl9ICk7CgkJfQoKCQlyZXR1cm4gdGhpczsKCX07CgoKCgoJLy8gQXR0YWNoIGEgYnVuY2ggb2YgZnVuY3Rpb25zIGZvciBoYW5kbGluZyBjb21tb24gQUpBWCBldmVudHMKCWpRdWVyeS5lYWNoKCBbCgkJImFqYXhTdGFydCIsCgkJImFqYXhTdG9wIiwKCQkiYWpheENvbXBsZXRlIiwKCQkiYWpheEVycm9yIiwKCQkiYWpheFN1Y2Nlc3MiLAoJCSJhamF4U2VuZCIKCV0sIGZ1bmN0aW9uKCBpLCB0eXBlICkgewoJCWpRdWVyeS5mblsgdHlwZSBdID0gZnVuY3Rpb24oIGZuICkgewoJCQlyZXR1cm4gdGhpcy5vbiggdHlwZSwgZm4gKTsKCQl9OwoJfSApOwoKCgoKCWpRdWVyeS5leHByLmZpbHRlcnMuYW5pbWF0ZWQgPSBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4galF1ZXJ5LmdyZXAoIGpRdWVyeS50aW1lcnMsIGZ1bmN0aW9uKCBmbiApIHsKCQkJcmV0dXJuIGVsZW0gPT09IGZuLmVsZW07CgkJfSApLmxlbmd0aDsKCX07CgoKCgoKCS8qKgoJICogR2V0cyBhIHdpbmRvdyBmcm9tIGFuIGVsZW1lbnQKCSAqLwoJZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkgewoJCXJldHVybiBqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSA/CgkJCWVsZW0gOgoJCQllbGVtLm5vZGVUeXBlID09PSA5ID8KCQkJCWVsZW0uZGVmYXVsdFZpZXcgfHwgZWxlbS5wYXJlbnRXaW5kb3cgOgoJCQkJZmFsc2U7Cgl9CgoJalF1ZXJ5Lm9mZnNldCA9IHsKCQlzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkgewoJCQl2YXIgY3VyUG9zaXRpb24sIGN1ckxlZnQsIGN1ckNTU1RvcCwgY3VyVG9wLCBjdXJPZmZzZXQsIGN1ckNTU0xlZnQsIGNhbGN1bGF0ZVBvc2l0aW9uLAoJCQkJcG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCAicG9zaXRpb24iICksCgkJCQljdXJFbGVtID0galF1ZXJ5KCBlbGVtICksCgkJCQlwcm9wcyA9IHt9OwoKCQkJLy8gc2V0IHBvc2l0aW9uIGZpcnN0LCBpbi1jYXNlIHRvcC9sZWZ0IGFyZSBzZXQgZXZlbiBvbiBzdGF0aWMgZWxlbQoJCQlpZiAoIHBvc2l0aW9uID09PSAic3RhdGljIiApIHsKCQkJCWVsZW0uc3R5bGUucG9zaXRpb24gPSAicmVsYXRpdmUiOwoJCQl9CgoJCQljdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpOwoJCQljdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCAidG9wIiApOwoJCQljdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgImxlZnQiICk7CgkJCWNhbGN1bGF0ZVBvc2l0aW9uID0gKCBwb3NpdGlvbiA9PT0gImFic29sdXRlIiB8fCBwb3NpdGlvbiA9PT0gImZpeGVkIiApICYmCgkJCQlqUXVlcnkuaW5BcnJheSggImF1dG8iLCBbIGN1ckNTU1RvcCwgY3VyQ1NTTGVmdCBdICkgPiAtMTsKCgkJCS8vIG5lZWQgdG8gYmUgYWJsZSB0byBjYWxjdWxhdGUgcG9zaXRpb24gaWYgZWl0aGVyIHRvcCBvciBsZWZ0CgkJCS8vIGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZAoJCQlpZiAoIGNhbGN1bGF0ZVBvc2l0aW9uICkgewoJCQkJY3VyUG9zaXRpb24gPSBjdXJFbGVtLnBvc2l0aW9uKCk7CgkJCQljdXJUb3AgPSBjdXJQb3NpdGlvbi50b3A7CgkJCQljdXJMZWZ0ID0gY3VyUG9zaXRpb24ubGVmdDsKCQkJfSBlbHNlIHsKCQkJCWN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7CgkJCQljdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7CgkJCX0KCgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIG9wdGlvbnMgKSApIHsKCgkJCQkvLyBVc2UgalF1ZXJ5LmV4dGVuZCBoZXJlIHRvIGFsbG93IG1vZGlmaWNhdGlvbiBvZiBjb29yZGluYXRlcyBhcmd1bWVudCAoZ2gtMTg0OCkKCQkJCW9wdGlvbnMgPSBvcHRpb25zLmNhbGwoIGVsZW0sIGksIGpRdWVyeS5leHRlbmQoIHt9LCBjdXJPZmZzZXQgKSApOwoJCQl9CgoJCQlpZiAoIG9wdGlvbnMudG9wICE9IG51bGwgKSB7CgkJCQlwcm9wcy50b3AgPSAoIG9wdGlvbnMudG9wIC0gY3VyT2Zmc2V0LnRvcCApICsgY3VyVG9wOwoJCQl9CgkJCWlmICggb3B0aW9ucy5sZWZ0ICE9IG51bGwgKSB7CgkJCQlwcm9wcy5sZWZ0ID0gKCBvcHRpb25zLmxlZnQgLSBjdXJPZmZzZXQubGVmdCApICsgY3VyTGVmdDsKCQkJfQoKCQkJaWYgKCAidXNpbmciIGluIG9wdGlvbnMgKSB7CgkJCQlvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7CgkJCX0gZWxzZSB7CgkJCQljdXJFbGVtLmNzcyggcHJvcHMgKTsKCQkJfQoJCX0KCX07CgoJalF1ZXJ5LmZuLmV4dGVuZCggewoJCW9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgkJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJCXJldHVybiBvcHRpb25zID09PSB1bmRlZmluZWQgPwoJCQkJCXRoaXMgOgoJCQkJCXRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCQkJCWpRdWVyeS5vZmZzZXQuc2V0T2Zmc2V0KCB0aGlzLCBvcHRpb25zLCBpICk7CgkJCQkJfSApOwoJCQl9CgoJCQl2YXIgZG9jRWxlbSwgd2luLAoJCQkJYm94ID0geyB0b3A6IDAsIGxlZnQ6IDAgfSwKCQkJCWVsZW0gPSB0aGlzWyAwIF0sCgkJCQlkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDsKCgkJCWlmICggIWRvYyApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7CgoJCQkvLyBNYWtlIHN1cmUgaXQncyBub3QgYSBkaXNjb25uZWN0ZWQgRE9NIG5vZGUKCQkJaWYgKCAhalF1ZXJ5LmNvbnRhaW5zKCBkb2NFbGVtLCBlbGVtICkgKSB7CgkJCQlyZXR1cm4gYm94OwoJCQl9CgoJCQkvLyBJZiB3ZSBkb24ndCBoYXZlIGdCQ1IsIGp1c3QgdXNlIDAsMCByYXRoZXIgdGhhbiBlcnJvcgoJCQkvLyBCbGFja0JlcnJ5IDUsIGlPUyAzIChvcmlnaW5hbCBpUGhvbmUpCgkJCWlmICggdHlwZW9mIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSAidW5kZWZpbmVkIiApIHsKCQkJCWJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgkJCX0KCQkJd2luID0gZ2V0V2luZG93KCBkb2MgKTsKCQkJcmV0dXJuIHsKCQkJCXRvcDogYm94LnRvcCAgKyAoIHdpbi5wYWdlWU9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbFRvcCApICAtICggZG9jRWxlbS5jbGllbnRUb3AgIHx8IDAgKSwKCQkJCWxlZnQ6IGJveC5sZWZ0ICsgKCB3aW4ucGFnZVhPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxMZWZ0ICkgLSAoIGRvY0VsZW0uY2xpZW50TGVmdCB8fCAwICkKCQkJfTsKCQl9LAoKCQlwb3NpdGlvbjogZnVuY3Rpb24oKSB7CgkJCWlmICggIXRoaXNbIDAgXSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJdmFyIG9mZnNldFBhcmVudCwgb2Zmc2V0LAoJCQkJcGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfSwKCQkJCWVsZW0gPSB0aGlzWyAwIF07CgoJCQkvLyBGaXhlZCBlbGVtZW50cyBhcmUgb2Zmc2V0IGZyb20gd2luZG93IChwYXJlbnRPZmZzZXQgPSB7dG9wOjAsIGxlZnQ6IDB9LAoJCQkvLyBiZWNhdXNlIGl0IGlzIGl0cyBvbmx5IG9mZnNldCBwYXJlbnQKCQkJaWYgKCBqUXVlcnkuY3NzKCBlbGVtLCAicG9zaXRpb24iICkgPT09ICJmaXhlZCIgKSB7CgoJCQkJLy8gd2UgYXNzdW1lIHRoYXQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIGF2YWlsYWJsZSB3aGVuIGNvbXB1dGVkIHBvc2l0aW9uIGlzIGZpeGVkCgkJCQlvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoJCQl9IGVsc2UgewoKCQkJCS8vIEdldCAqcmVhbCogb2Zmc2V0UGFyZW50CgkJCQlvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudCgpOwoKCQkJCS8vIEdldCBjb3JyZWN0IG9mZnNldHMKCQkJCW9mZnNldCA9IHRoaXMub2Zmc2V0KCk7CgkJCQlpZiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudFsgMCBdLCAiaHRtbCIgKSApIHsKCQkJCQlwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0KCk7CgkJCQl9CgoJCQkJLy8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzCgkJCQlwYXJlbnRPZmZzZXQudG9wICArPSBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnRbIDAgXSwgImJvcmRlclRvcFdpZHRoIiwgdHJ1ZSApOwoJCQkJcGFyZW50T2Zmc2V0LmxlZnQgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sICJib3JkZXJMZWZ0V2lkdGgiLCB0cnVlICk7CgkJCX0KCgkJCS8vIFN1YnRyYWN0IHBhcmVudCBvZmZzZXRzIGFuZCBlbGVtZW50IG1hcmdpbnMKCQkJLy8gbm90ZTogd2hlbiBhbiBlbGVtZW50IGhhcyBtYXJnaW46IGF1dG8gdGhlIG9mZnNldExlZnQgYW5kIG1hcmdpbkxlZnQKCQkJLy8gYXJlIHRoZSBzYW1lIGluIFNhZmFyaSBjYXVzaW5nIG9mZnNldC5sZWZ0IHRvIGluY29ycmVjdGx5IGJlIDAKCQkJcmV0dXJuIHsKCQkJCXRvcDogIG9mZnNldC50b3AgIC0gcGFyZW50T2Zmc2V0LnRvcCAtIGpRdWVyeS5jc3MoIGVsZW0sICJtYXJnaW5Ub3AiLCB0cnVlICksCgkJCQlsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgIm1hcmdpbkxlZnQiLCB0cnVlICkKCQkJfTsKCQl9LAoKCQlvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkgewoJCQkJdmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50OwoKCQkJCXdoaWxlICggb2Zmc2V0UGFyZW50ICYmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50LCAiaHRtbCIgKSAmJgoJCQkJCWpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgInBvc2l0aW9uIiApID09PSAic3RhdGljIiApICkgewoJCQkJCW9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7CgkJCQl9CgkJCQlyZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50RWxlbWVudDsKCQkJfSApOwoJCX0KCX0gKTsKCgkvLyBDcmVhdGUgc2Nyb2xsTGVmdCBhbmQgc2Nyb2xsVG9wIG1ldGhvZHMKCWpRdWVyeS5lYWNoKCB7IHNjcm9sbExlZnQ6ICJwYWdlWE9mZnNldCIsIHNjcm9sbFRvcDogInBhZ2VZT2Zmc2V0IiB9LCBmdW5jdGlvbiggbWV0aG9kLCBwcm9wICkgewoJCXZhciB0b3AgPSAvWS8udGVzdCggcHJvcCApOwoKCQlqUXVlcnkuZm5bIG1ldGhvZCBdID0gZnVuY3Rpb24oIHZhbCApIHsKCQkJcmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkgewoJCQkJdmFyIHdpbiA9IGdldFdpbmRvdyggZWxlbSApOwoKCQkJCWlmICggdmFsID09PSB1bmRlZmluZWQgKSB7CgkJCQkJcmV0dXJuIHdpbiA/ICggcHJvcCBpbiB3aW4gKSA/IHdpblsgcHJvcCBdIDoKCQkJCQkJd2luLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsgbWV0aG9kIF0gOgoJCQkJCQllbGVtWyBtZXRob2QgXTsKCQkJCX0KCgkJCQlpZiAoIHdpbiApIHsKCQkJCQl3aW4uc2Nyb2xsVG8oCgkJCQkJCSF0b3AgPyB2YWwgOiBqUXVlcnkoIHdpbiApLnNjcm9sbExlZnQoKSwKCQkJCQkJdG9wID8gdmFsIDogalF1ZXJ5KCB3aW4gKS5zY3JvbGxUb3AoKQoJCQkJCSk7CgoJCQkJfSBlbHNlIHsKCQkJCQllbGVtWyBtZXRob2QgXSA9IHZhbDsKCQkJCX0KCQkJfSwgbWV0aG9kLCB2YWwsIGFyZ3VtZW50cy5sZW5ndGgsIG51bGwgKTsKCQl9OwoJfSApOwoKCS8vIFN1cHBvcnQ6IFNhZmFyaTw3LTgrLCBDaHJvbWU8MzctNDQrCgkvLyBBZGQgdGhlIHRvcC9sZWZ0IGNzc0hvb2tzIHVzaW5nIGpRdWVyeS5mbi5wb3NpdGlvbgoJLy8gV2Via2l0IGJ1ZzogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTI5MDg0CgkvLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0CgkvLyByYXRoZXIgdGhhbiBtYWtlIHRoZSBjc3MgbW9kdWxlIGRlcGVuZCBvbiB0aGUgb2Zmc2V0IG1vZHVsZSwgd2UganVzdCBjaGVjayBmb3IgaXQgaGVyZQoJalF1ZXJ5LmVhY2goIFsgInRvcCIsICJsZWZ0IiBdLCBmdW5jdGlvbiggaSwgcHJvcCApIHsKCQlqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLAoJCQlmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7CgkJCQlpZiAoIGNvbXB1dGVkICkgewoJCQkJCWNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7CgoJCQkJCS8vIGlmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldAoJCQkJCXJldHVybiBybnVtbm9ucHgudGVzdCggY29tcHV0ZWQgKSA/CgkJCQkJCWpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArICJweCIgOgoJCQkJCQljb21wdXRlZDsKCQkJCX0KCQkJfQoJCSk7Cgl9ICk7CgoKCS8vIENyZWF0ZSBpbm5lckhlaWdodCwgaW5uZXJXaWR0aCwgaGVpZ2h0LCB3aWR0aCwgb3V0ZXJIZWlnaHQgYW5kIG91dGVyV2lkdGggbWV0aG9kcwoJalF1ZXJ5LmVhY2goIHsgSGVpZ2h0OiAiaGVpZ2h0IiwgV2lkdGg6ICJ3aWR0aCIgfSwgZnVuY3Rpb24oIG5hbWUsIHR5cGUgKSB7CgkJalF1ZXJ5LmVhY2goIHsgcGFkZGluZzogImlubmVyIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsICIiOiAib3V0ZXIiICsgbmFtZSB9LAoJCWZ1bmN0aW9uKCBkZWZhdWx0RXh0cmEsIGZ1bmNOYW1lICkgewoKCQkJLy8gbWFyZ2luIGlzIG9ubHkgZm9yIG91dGVySGVpZ2h0LCBvdXRlcldpZHRoCgkJCWpRdWVyeS5mblsgZnVuY05hbWUgXSA9IGZ1bmN0aW9uKCBtYXJnaW4sIHZhbHVlICkgewoJCQkJdmFyIGNoYWluYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggJiYgKCBkZWZhdWx0RXh0cmEgfHwgdHlwZW9mIG1hcmdpbiAhPT0gImJvb2xlYW4iICksCgkJCQkJZXh0cmEgPSBkZWZhdWx0RXh0cmEgfHwgKCBtYXJnaW4gPT09IHRydWUgfHwgdmFsdWUgPT09IHRydWUgPyAibWFyZ2luIiA6ICJib3JkZXIiICk7CgoJCQkJcmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIHZhbHVlICkgewoJCQkJCXZhciBkb2M7CgoJCQkJCWlmICggalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7CgoJCQkJCQkvLyBBcyBvZiA1LzgvMjAxMiB0aGlzIHdpbGwgeWllbGQgaW5jb3JyZWN0IHJlc3VsdHMgZm9yIE1vYmlsZSBTYWZhcmksIGJ1dCB0aGVyZQoJCQkJCQkvLyBpc24ndCBhIHdob2xlIGxvdCB3ZSBjYW4gZG8uIFNlZSBwdWxsIHJlcXVlc3QgYXQgdGhpcyBVUkwgZm9yIGRpc2N1c3Npb246CgkJCQkJCS8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNzY0CgkJCQkJCXJldHVybiBlbGVtLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsgImNsaWVudCIgKyBuYW1lIF07CgkJCQkJfQoKCQkJCQkvLyBHZXQgZG9jdW1lbnQgd2lkdGggb3IgaGVpZ2h0CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkgewoJCQkJCQlkb2MgPSBlbGVtLmRvY3VtZW50RWxlbWVudDsKCgkJCQkJCS8vIEVpdGhlciBzY3JvbGxbV2lkdGgvSGVpZ2h0XSBvciBvZmZzZXRbV2lkdGgvSGVpZ2h0XSBvciBjbGllbnRbV2lkdGgvSGVpZ2h0XSwKCQkJCQkJLy8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0CgkJCQkJCS8vIHVuZm9ydHVuYXRlbHksIHRoaXMgY2F1c2VzIGJ1ZyAjMzgzOCBpbiBJRTYvOCBvbmx5LAoJCQkJCQkvLyBidXQgdGhlcmUgaXMgY3VycmVudGx5IG5vIGdvb2QsIHNtYWxsIHdheSB0byBmaXggaXQuCgkJCQkJCXJldHVybiBNYXRoLm1heCgKCQkJCQkJCWVsZW0uYm9keVsgInNjcm9sbCIgKyBuYW1lIF0sIGRvY1sgInNjcm9sbCIgKyBuYW1lIF0sCgkJCQkJCQllbGVtLmJvZHlbICJvZmZzZXQiICsgbmFtZSBdLCBkb2NbICJvZmZzZXQiICsgbmFtZSBdLAoJCQkJCQkJZG9jWyAiY2xpZW50IiArIG5hbWUgXQoJCQkJCQkpOwoJCQkJCX0KCgkJCQkJcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPwoKCQkJCQkJLy8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdAoJCQkJCQlqUXVlcnkuY3NzKCBlbGVtLCB0eXBlLCBleHRyYSApIDoKCgkJCQkJCS8vIFNldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnQKCQkJCQkJalF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTsKCQkJCX0sIHR5cGUsIGNoYWluYWJsZSA/IG1hcmdpbiA6IHVuZGVmaW5lZCwgY2hhaW5hYmxlLCBudWxsICk7CgkJCX07CgkJfSApOwoJfSApOwoKCglqUXVlcnkuZm4uZXh0ZW5kKCB7CgoJCWJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZGF0YSwgZm4gKSB7CgkJCXJldHVybiB0aGlzLm9uKCB0eXBlcywgbnVsbCwgZGF0YSwgZm4gKTsKCQl9LAoJCXVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHsKCQkJcmV0dXJuIHRoaXMub2ZmKCB0eXBlcywgbnVsbCwgZm4gKTsKCQl9LAoKCQlkZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4gKSB7CgkJCXJldHVybiB0aGlzLm9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7CgkJfSwKCQl1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHsKCgkJCS8vICggbmFtZXNwYWNlICkgb3IgKCBzZWxlY3RvciwgdHlwZXMgWywgZm5dICkKCQkJcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPwoJCQkJdGhpcy5vZmYoIHNlbGVjdG9yLCAiKioiICkgOgoJCQkJdGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCAiKioiLCBmbiApOwoJCX0KCX0gKTsKCgkvLyBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldAoJalF1ZXJ5LmZuLnNpemUgPSBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5sZW5ndGg7Cgl9OwoKCWpRdWVyeS5mbi5hbmRTZWxmID0galF1ZXJ5LmZuLmFkZEJhY2s7CgoKCgoJLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyCgkvLyBmaWxlcyB0aGF0IG1heSB1c2UgZGVmaW5lLCBidXQgbm90IHZpYSBhIHByb3BlciBjb25jYXRlbmF0aW9uIHNjcmlwdCB0aGF0CgkvLyB1bmRlcnN0YW5kcyBhbm9ueW1vdXMgQU1EIG1vZHVsZXMuIEEgbmFtZWQgQU1EIGlzIHNhZmVzdCBhbmQgbW9zdCByb2J1c3QKCS8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmUKCS8vIGRlcml2ZWQgZnJvbSBmaWxlIG5hbWVzLCBhbmQgalF1ZXJ5IGlzIG5vcm1hbGx5IGRlbGl2ZXJlZCBpbiBhIGxvd2VyY2FzZQoJLy8gZmlsZSBuYW1lLiBEbyB0aGlzIGFmdGVyIGNyZWF0aW5nIHRoZSBnbG9iYWwgc28gdGhhdCBpZiBhbiBBTUQgbW9kdWxlIHdhbnRzCgkvLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuCgoJLy8gTm90ZSB0aGF0IGZvciBtYXhpbXVtIHBvcnRhYmlsaXR5LCBsaWJyYXJpZXMgdGhhdCBhcmUgbm90IGpRdWVyeSBzaG91bGQKCS8vIGRlY2xhcmUgdGhlbXNlbHZlcyBhcyBhbm9ueW1vdXMgbW9kdWxlcywgYW5kIGF2b2lkIHNldHRpbmcgYSBnbG9iYWwgaWYgYW4KCS8vIEFNRCBsb2FkZXIgaXMgcHJlc2VudC4galF1ZXJ5IGlzIGEgc3BlY2lhbCBjYXNlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlCgkvLyBodHRwczovL2dpdGh1Yi5jb20vanJidXJrZS9yZXF1aXJlanMvd2lraS9VcGRhdGluZy1leGlzdGluZy1saWJyYXJpZXMjd2lraS1hbm9uCgoJaWYgKCB0cnVlICkgewoJCSEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4galF1ZXJ5OwoJCX0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTsKCX0KCgoKCXZhcgoKCQkvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGUKCQlfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSwKCgkJLy8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGUKCQlfJCA9IHdpbmRvdy4kOwoKCWpRdWVyeS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oIGRlZXAgKSB7CgkJaWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkgewoJCQl3aW5kb3cuJCA9IF8kOwoJCX0KCgkJaWYgKCBkZWVwICYmIHdpbmRvdy5qUXVlcnkgPT09IGpRdWVyeSApIHsKCQkJd2luZG93LmpRdWVyeSA9IF9qUXVlcnk7CgkJfQoKCQlyZXR1cm4galF1ZXJ5OwoJfTsKCgkvLyBFeHBvc2UgalF1ZXJ5IGFuZCAkIGlkZW50aWZpZXJzLCBldmVuIGluCgkvLyBBTUQgKCM3MTAyI2NvbW1lbnQ6MTAsIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNTU3KQoJLy8gYW5kIENvbW1vbkpTIGZvciBicm93c2VyIGVtdWxhdG9ycyAoIzEzNTY2KQoJaWYgKCAhbm9HbG9iYWwgKSB7CgkJd2luZG93LmpRdWVyeSA9IHdpbmRvdy4kID0galF1ZXJ5OwoJfQoKCXJldHVybiBqUXVlcnk7Cgl9KSk7CgoKLyoqKi8gfSksCi8qIDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSJ1c2Ugc3RyaWN0IjsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgICAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfUHJvbWlzZSA9IHR5cGVvZiBQcm9taXNlID09PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19yZXF1aXJlX18oIShmdW5jdGlvbiB3ZWJwYWNrTWlzc2luZ01vZHVsZSgpIHsgdmFyIGUgPSBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSBcImVzNi1wcm9taXNlXCIiKTsgZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnOyB0aHJvdyBlOyB9KCkpKS5Qcm9taXNlIDogUHJvbWlzZTsKCgl2YXIgU3RvcmFnZSA9IHsKCSAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CgoJICAgICAgICByZXR1cm4gbmV3IF9Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CgkgICAgICAgICAgICB2YXIgaXRlbXMgPSBbXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoX2FyZ3VtZW50cykpOwoKCSAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT0gMSkgewoJICAgICAgICAgICAgICAgIHJlc29sdmUoR01fZ2V0VmFsdWUoaXRlbXNbMF0pKTsKCSAgICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTsKCgkgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewoJICAgICAgICAgICAgICAgICAgICBkYXRhW2l0ZW1dID0gR01fZ2V0VmFsdWUoaXRlbSk7CgkgICAgICAgICAgICAgICAgfSk7CgoJICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0pOwoJICAgIH0sCgkgICAgc2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkgewoJICAgICAgICBHTV9zZXRWYWx1ZShrZXksIHZhbHVlKTsKCSAgICB9Cgl9OwoKCWV4cG9ydHMuZGVmYXVsdCA9IFN0b3JhZ2U7CgovKioqLyB9KSwKLyogNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5pbmplY3QgPSBpbmplY3Q7CglleHBvcnRzLnJlc3RvcmVXaW5kb3dPcGVuID0gcmVzdG9yZVdpbmRvd09wZW47CgkvKioKCSAqIGluamVjdHMgYSBjb2RlIHRvIHRoZSBwYWdlIGNvbnRleHQgdGhhdCBkb2VzIHRoZSBmb2xsb3dpbmc6CgkgKiByZXBsYWNlIHRoZSB3aW5kb3cub3BlbiBmdW5jdGlvbiB3aXRoIGEgZnVuY3Rpb24gdGhhdCBjaGVja3MgaWYgdGhlIHdpbmRvdy5vcGVuIHdhcyBleGVjdXRlZCBkdWUgdG8gYW4gZXZlbnQuCgkgKiBpZiBzbywgdGhlbiBpdCBjaGVja3Mgd2hvIHRyaWdnZXJlZCB0aGUgZXZlbnQuIGlmIGl0J3MgdGhlIGRvY3VtZW50IG9yIHRoZSBib2R5IGVsZW1lbnRzLCB0aGUgY2FsbCBpcyBibG9ja2VkLgoJICogYW5vdGhlciBwcm90ZWN0aW9uLCBpcyBjbG9zaW5nIHdpbmRvd3MgdGhhdCBnb3QgYmx1cmVkIGJ5IGNhbGxpbmcgd2luZG93LmJsdXIoKSwgbGVzcyB0aGVuIGEgc2Vjb25kIGZyb20gaXRzIGNyZWF0aW9uLgoJICogY2hlY2sgb3V0IHRoZSBmb290ZXIgZm9yIGFub3RoZXIgd2F5IHdlYnNpdGVzIHRyeSB0byBvcGVuIGEgbmV3IHdpbmRvdy4KCSAqIEByZXR1cm4gbm90aGluZwoJICovCglmdW5jdGlvbiBpbmplY3QoKSB7CgkgIHZhciBvcmlnaW5hbE9wZW5XbmRGbktleSA9ICJvcmlnaW5hbE9wZW5GdW5jdGlvbiI7CgkgIHZhciBvcmlnaW5hbFdpbmRvd09wZW5GbiA9IHdpbmRvdy5vcGVuOwoJICB2YXIgb3JpZ2luYWxDcmVhdGVFbGVtZW50Rm4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50OwoJICB2YXIgb3JpZ2luYWxBcHBlbmRDaGlsZEZuID0gSFRNTEVsZW1lbnQucHJvdG90eXBlLmFwcGVuZENoaWxkOwoJICB2YXIgb3JpZ2luYWxDcmVhdGVFdmVudEZuID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQ7CgkgIHZhciB3aW5kb3dzV2l0aE5hbWVzID0ge307CgkgIHZhciB0aW1lU2luY2VDcmVhdGVBRWxlbWVudCA9IDA7CgkgIHZhciBsYXN0Q3JlYXRlZEFFbGVtZW50ID0gbnVsbDsKCSAgdmFyIGZ1bGxTY3JlZW5PcGVuVGltZSA9IHZvaWQgMDsKCSAgdmFyIHdpbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CgkgIHZhciB3aW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CgkgIHZhciBhYmQgPSBmYWxzZTsKCSAgdmFyIGxhc3RCbG9ja1RpbWUgPSB2b2lkIDA7CgkgIHZhciBwYXJlbnRPcmlnaW4gPSB3aW5kb3cubG9jYXRpb24gIT0gd2luZG93LnBhcmVudC5sb2NhdGlvbiA/IGRvY3VtZW50LnJlZmVycmVyIHx8IHdpbmRvdy5wYXJlbnQubG9jYXRpb24gfHwgJyonIDogZG9jdW1lbnQubG9jYXRpb247CgkgIHZhciBwYXJlbnRSZWYgPSB3aW5kb3cucGFyZW50OwoKCSAgLy93aW5kb3dbb3JpZ2luYWxPcGVuV25kRm5LZXldID0gd2luZG93Lm9wZW47IC8vIHNhdmUgdGhlIG9yaWdpbmFsIG9wZW4gd2luZG93IGFzIGdsb2JhbCBwYXJhbQoJICBmdW5jdGlvbiBnZXRBYnNvbHV0ZVVSTChiYXNlVVJMKSB7CgkgICAgaWYgKC9eYWJvdXQ6YmxhbmsvaS50ZXN0KGJhc2VVUkwpKSB7CgkgICAgICByZXR1cm4gYmFzZVVSTDsKCSAgICB9CgoJICAgIGlmICgvXihodHRwcz86KT9cL1wvLy50ZXN0KGJhc2VVUkwpKSB7CgkgICAgICByZXR1cm4gYmFzZVVSTDsKCSAgICB9CgoJICAgIGJhc2VVUkwgPSBsb2NhdGlvbi5vcmlnaW4gKyAoIS9eXC8vLnRlc3QoYmFzZVVSTCkgPyAnLycgOiAnJykgKyBiYXNlVVJMOwoKCSAgICByZXR1cm4gYmFzZVVSTDsKCSAgfQoKCSAgZnVuY3Rpb24gbmV3V2luZG93T3BlbkZuKCkgewoJICAgIHZhciBvcGVuV25kQXJndW1lbnRzID0gYXJndW1lbnRzOwoJICAgIHZhciB1c2VPcmlnaW5hbE9wZW5XbmQgPSB0cnVlOwoJICAgIHZhciBnZW5lcmF0ZWRXaW5kb3cgPSBudWxsOwoKCSAgICBmdW5jdGlvbiBnZXRXaW5kb3dOYW1lKG9wZW5XbmRBcmd1bWVudHMpIHsKCSAgICAgIHZhciB3aW5kb3dOYW1lID0gb3BlblduZEFyZ3VtZW50c1sxXTsKCSAgICAgIGlmICh3aW5kb3dOYW1lICE9IG51bGwgJiYgIVsiX2JsYW5rIiwgIl9wYXJlbnQiLCAiX3NlbGYiLCAiX3RvcCJdLmluY2x1ZGVzKHdpbmRvd05hbWUpKSB7CgkgICAgICAgIHJldHVybiB3aW5kb3dOYW1lOwoJICAgICAgfQoKCSAgICAgIHJldHVybiBudWxsOwoJICAgIH0KCgkgICAgZnVuY3Rpb24gY29weU1pc3NpbmdQcm9wZXJ0aWVzKHNyYywgZGVzdCkgewoJICAgICAgdmFyIHByb3AgPSB2b2lkIDA7CgkgICAgICBmb3IgKHByb3AgaW4gc3JjKSB7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgaWYgKGRlc3RbcHJvcF0gPT09IHVuZGVmaW5lZCAmJiBzcmNbcHJvcF0pIHsKCSAgICAgICAgICAgIGRlc3RbcHJvcF0gPSBzcmNbcHJvcF07CgkgICAgICAgICAgfQoJICAgICAgICB9IGNhdGNoIChlKSB7fQoJICAgICAgfQoJICAgICAgcmV0dXJuIGRlc3Q7CgkgICAgfQoKCSAgICBmdW5jdGlvbiBpc1BhcmVudFdpbmRvdygpIHsKCSAgICAgIHRyeSB7CgkgICAgICAgIHJldHVybiAhIShwYXJlbnQuV2luZG93ICYmIGNhcHR1cmluZ0VsZW1lbnQgaW5zdGFuY2VvZiBwYXJlbnQuV2luZG93KTsKCSAgICAgIH0gY2F0Y2ggKGUpIHsKCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgfQoJICAgIH0KCgkgICAgZnVuY3Rpb24gaXNPdmVybGF5aXNoKGVsKSB7CgkgICAgICB2YXIgc3R5bGUgPSBlbCAmJiBlbC5zdHlsZTsKCgkgICAgICBpZiAoc3R5bGUgJiYgL2ZpeGVkfGFic29sdXRlLy50ZXN0KHN0eWxlLnBvc2l0aW9uKSAmJiBlbC5vZmZzZXRXaWR0aCA+PSB3aW5XaWR0aCAqIDAuNiAmJiBlbC5vZmZzZXRIZWlnaHQgPj0gd2luSGVpZ2h0ICogMC43NSkgewoJICAgICAgICByZXR1cm4gdHJ1ZTsKCSAgICAgIH0KCgkgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoKCSAgICB2YXIgY2FwdHVyaW5nRWxlbWVudCA9IG51bGw7IC8vIHRoZSBlbGVtZW50IHdobyByZWdpc3RlcmVkIHRvIHRoZSBldmVudAoJICAgIHZhciBzcmNFbGVtZW50ID0gbnVsbDsgLy8gdGhlIGNsaWNrZWQgb24gZWxlbWVudAoJICAgIHZhciBjbG9zZXN0UGFyZW50TGluayA9IG51bGw7CgoJICAgIGlmICh3aW5kb3cuZXZlbnQgIT0gbnVsbCkgewoJICAgICAgY2FwdHVyaW5nRWxlbWVudCA9IHdpbmRvdy5ldmVudC5jdXJyZW50VGFyZ2V0OwoJICAgICAgc3JjRWxlbWVudCA9IHdpbmRvdy5ldmVudC5zcmNFbGVtZW50OwoJICAgIH0KCgkgICAgaWYgKHNyY0VsZW1lbnQgIT0gbnVsbCAmJiBzcmNFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsKCSAgICAgIGNsb3Nlc3RQYXJlbnRMaW5rID0gc3JjRWxlbWVudC5jbG9zZXN0KCdhJyk7CgoJICAgICAgaWYgKGNsb3Nlc3RQYXJlbnRMaW5rICYmIGNsb3Nlc3RQYXJlbnRMaW5rLmhyZWYpIHsKCSAgICAgICAgb3BlblduZEFyZ3VtZW50c1szXSA9IGNsb3Nlc3RQYXJlbnRMaW5rLmhyZWY7CgkgICAgICB9CgkgICAgfQoKCSAgICAvL2NhbGxlZSB3aWxsIG5vdCB3b3JrIGluIEVTNiBvciBzdGljdCBtb2RlCgkgICAgdHJ5IHsKCSAgICAgIGlmIChjYXB0dXJpbmdFbGVtZW50ID09IG51bGwpIHsKCSAgICAgICAgdmFyIGNhbGxlciA9IG9wZW5XbmRBcmd1bWVudHMuY2FsbGVlOwoJICAgICAgICB3aGlsZSAoY2FsbGVyLmFyZ3VtZW50cyAhPSBudWxsICYmIGNhbGxlci5hcmd1bWVudHMuY2FsbGVlLmNhbGxlciAhPSBudWxsKSB7CgkgICAgICAgICAgY2FsbGVyID0gY2FsbGVyLmFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjYWxsZXIuYXJndW1lbnRzICE9IG51bGwgJiYgY2FsbGVyLmFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGNhbGxlci5hcmd1bWVudHNbMF0uY3VycmVudFRhcmdldCAhPSBudWxsKSB7CgkgICAgICAgICAgY2FwdHVyaW5nRWxlbWVudCA9IGNhbGxlci5hcmd1bWVudHNbMF0uY3VycmVudFRhcmdldDsKCSAgICAgICAgfQoJICAgICAgfQoJICAgIH0gY2F0Y2ggKGUpIHt9CgoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoJICAgIC8vIEJsb2NrZWQgaWYgYSBjbGljayBvbiBiYWNrZ3JvdW5kIGVsZW1lbnQgb2NjdXJyZWQgKDxib2R5PiBvciBkb2N1bWVudCkKCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCSAgICBpZiAoY2FwdHVyaW5nRWxlbWVudCA9PSBudWxsKSB7CgkgICAgICB3aW5kb3cucGJyZWFzb24gPSAnQmxvY2tlZCBhIG5ldyB3aW5kb3cgb3BlbmVkIHdpdGhvdXQgYW55IHVzZXIgaW50ZXJhY3Rpb24nOwoJICAgICAgdXNlT3JpZ2luYWxPcGVuV25kID0gZmFsc2U7CgkgICAgfSBlbHNlIGlmIChjYXB0dXJpbmdFbGVtZW50ICE9IG51bGwgJiYgKGNhcHR1cmluZ0VsZW1lbnQgaW5zdGFuY2VvZiBXaW5kb3cgfHwgaXNQYXJlbnRXaW5kb3coY2FwdHVyaW5nRWxlbWVudCkgfHwgY2FwdHVyaW5nRWxlbWVudCA9PT0gZG9jdW1lbnQgfHwgY2FwdHVyaW5nRWxlbWVudC5VUkwgIT0gbnVsbCAmJiBjYXB0dXJpbmdFbGVtZW50LmJvZHkgIT0gbnVsbCB8fCBjYXB0dXJpbmdFbGVtZW50Lm5vZGVOYW1lICE9IG51bGwgJiYgKGNhcHR1cmluZ0VsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSAiYm9keSIgfHwgY2FwdHVyaW5nRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09ICJkb2N1bWVudCIpKSkgewoJICAgICAgd2luZG93LnBicmVhc29uID0gJ0Jsb2NrZWQgYSBuZXcgd2luZG93IG9wZW5lZCB3aXRoIFVSTDogJyArIG9wZW5XbmRBcmd1bWVudHNbMF0gKyAnIGJlY2F1c2UgaXQgd2FzIHRyaWdnZXJlZCBieSB0aGUgJyArIGNhcHR1cmluZ0VsZW1lbnQubm9kZU5hbWUgKyAnIGVsZW1lbnQnOwoJICAgICAgdXNlT3JpZ2luYWxPcGVuV25kID0gZmFsc2U7CgkgICAgfSBlbHNlIGlmIChpc092ZXJsYXlpc2goY2FwdHVyaW5nRWxlbWVudCkpIHsKCSAgICAgIHdpbmRvdy5wYnJlYXNvbiA9ICdCbG9ja2VkIGEgbmV3IHdpbmRvdyBvcGVuZWQgd2hlbiBjbGlja2luZyBvbiBhbiBlbGVtZW50IHRoYXQgc2VlbXMgdG8gYmUgYW4gb3ZlcmxheSc7CgkgICAgICB1c2VPcmlnaW5hbE9wZW5XbmQgPSBmYWxzZTsKCSAgICB9IGVsc2UgewoJICAgICAgdXNlT3JpZ2luYWxPcGVuV25kID0gdHJ1ZTsKCSAgICB9CgkgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoKCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCSAgICAvLyBCbG9jayBpZiBhIGZ1bGwgc2NyZWVuIHdhcyBqdXN0IGluaXRpYXRlZCB3aGlsZSBvcGVuaW5nIHRoaXMgdXJsLgoJICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCSAgICB2YXIgZnVsbFNjcmVlbkVsZW1lbnQgPSBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC5tb3pGdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudDsKCSAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBmdWxsU2NyZWVuT3BlblRpbWUgPCAxMDAwIHx8IGlzTmFOKGZ1bGxTY3JlZW5PcGVuVGltZSkgJiYgaXNEb2N1bWVudEluRnVsbFNjcmVlbk1vZGUoKSkgewoKCSAgICAgIHdpbmRvdy5wYnJlYXNvbiA9ICdCbG9ja2VkIGEgbmV3IHdpbmRvdyBvcGVuZWQgd2l0aCBVUkw6ICcgKyBvcGVuV25kQXJndW1lbnRzWzBdICsgJyBiZWNhdXNlIGEgZnVsbCBzY3JlZW4gd2FzIGp1c3QgaW5pdGlhdGVkIHdoaWxlIG9wZW5pbmcgdGhpcyB1cmwuJzsKCgkgICAgICAvKiBKUkEgUkVNT1ZFRAoJICAgICAgIGlmICh3aW5kb3dbc2NyaXB0X3BhcmFtcy5mdWxsU2NyZWVuRm5LZXldKSB7CgkgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh3aW5kb3dbc2NyaXB0X3BhcmFtcy5mdWxsU2NyZWVuRm5LZXldKTsKCSAgICAgICB9CgkgICAgICAgKi8KCgkgICAgICBpZiAoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHsKCSAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsKCSAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikgewoJICAgICAgICBkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7CgkgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW4pIHsKCSAgICAgICAgZG9jdW1lbnQud2Via2l0Q2FuY2VsRnVsbFNjcmVlbigpOwoJICAgICAgfQoKCSAgICAgIHVzZU9yaWdpbmFsT3BlblduZCA9IGZhbHNlOwoJICAgIH0KCSAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCSAgICB2YXIgb3BlblVybCA9IG9wZW5XbmRBcmd1bWVudHNbMF07CgkgICAgdmFyIGluV2hpdGVsaXN0ID0gaXNJbldoaXRlbGlzdChvcGVuVXJsKTsKCgkgICAgaWYgKGluV2hpdGVsaXN0KSB7CgkgICAgICB1c2VPcmlnaW5hbE9wZW5XbmQgPSB0cnVlOwoJICAgIH0gZWxzZSBpZiAoaXNJbkJsYWNrbGlzdChvcGVuVXJsKSkgewoJICAgICAgdXNlT3JpZ2luYWxPcGVuV25kID0gZmFsc2U7CgkgICAgfQoKCSAgICBpZiAodXNlT3JpZ2luYWxPcGVuV25kID09IHRydWUpIHsKCSAgICAgIGdlbmVyYXRlZFdpbmRvdyA9IG9yaWdpbmFsV2luZG93T3BlbkZuLmFwcGx5KHRoaXMsIG9wZW5XbmRBcmd1bWVudHMpOwoJICAgICAgLy8gc2F2ZSB0aGUgd2luZG93IGJ5IG5hbWUsIGZvciBsYXR0ZXIgdXNlLgoJICAgICAgdmFyIHdpbmRvd05hbWUgPSBnZXRXaW5kb3dOYW1lKG9wZW5XbmRBcmd1bWVudHMpOwoJICAgICAgaWYgKHdpbmRvd05hbWUgIT0gbnVsbCkgewoJICAgICAgICB3aW5kb3dzV2l0aE5hbWVzW3dpbmRvd05hbWVdID0gZ2VuZXJhdGVkV2luZG93OwoJICAgICAgfQoKCSAgICAgIC8vIDJuZCBsaW5lIG9mIGRlZmVuY2U6IGFsbG93IHdpbmRvdyB0byBvcGVuIGJ1dCBtb25pdG9yIGNhcmVmdWxseS4uLgoKCSAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoJICAgICAgLy8gS2lsbCB3aW5kb3cgaWYgYSBibHVyIChyZW1vdmUgZm9jdXMpIGlzIGNhbGxlZCB0byB0aGF0IHdpbmRvdwoJICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkgICAgICBpZiAoZ2VuZXJhdGVkV2luZG93ICE9PSB3aW5kb3cpIHsKCSAgICAgICAgdmFyIG9wZW5UaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgkgICAgICAgIHZhciBvcmlnaW5hbFduZEJsdXJGbiA9IGdlbmVyYXRlZFdpbmRvdy5ibHVyOwoJICAgICAgICBnZW5lcmF0ZWRXaW5kb3cuYmx1ciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBvcGVuVGltZSA8IDEwMDAgJiYgIWluV2hpdGVsaXN0IC8qIG9uZSBzZWNvbmQgKi8pIHsKCSAgICAgICAgICAgICAgd2luZG93LnBicmVhc29uID0gJ0Jsb2NrZWQgYSBuZXcgd2luZG93IG9wZW5lZCB3aXRoIFVSTDogJyArIG9wZW5XbmRBcmd1bWVudHNbMF0gKyAnIGJlY2F1c2UgYSBpdCB3YXMgYmx1cmVkJzsKCSAgICAgICAgICAgICAgZ2VuZXJhdGVkV2luZG93LmNsb3NlKCk7CgkgICAgICAgICAgICAgIGJsb2NrZWRXbmROb3RpZmljYXRpb24ob3BlblduZEFyZ3VtZW50cyk7CgkgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgb3JpZ2luYWxXbmRCbHVyRm4oKTsKCSAgICAgICAgICB9CgkgICAgICAgIH07CgkgICAgICB9CgkgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCSAgICB9IGVsc2UgewoJICAgICAgLy8gKHVzZU9yaWdpbmFsT3BlblduZCA9PSBmYWxzZSkKCSAgICAgIHZhciBfbG9jYXRpb24gPSB7CgkgICAgICAgIGhyZWY6IG9wZW5XbmRBcmd1bWVudHNbMF0KCSAgICAgIH07CgkgICAgICBfbG9jYXRpb24ucmVwbGFjZSA9IGZ1bmN0aW9uICh1cmwpIHsKCSAgICAgICAgX2xvY2F0aW9uLmhyZWYgPSB1cmw7CgkgICAgICB9OwoKCSAgICAgIGdlbmVyYXRlZFdpbmRvdyA9IHsKCSAgICAgICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9LAoJICAgICAgICB0ZXN0OiBmdW5jdGlvbiB0ZXN0KCkgewoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9LAoJICAgICAgICBibHVyOiBmdW5jdGlvbiBibHVyKCkgewoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9LAoJICAgICAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7CgkgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgIH0sCgkgICAgICAgIHNob3dNb2RlbGVzc0RpYWxvZzogZnVuY3Rpb24gc2hvd01vZGVsZXNzRGlhbG9nKCkgewoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9LAoJICAgICAgICBzaG93TW9kYWxEaWFsb2c6IGZ1bmN0aW9uIHNob3dNb2RhbERpYWxvZygpIHsKCSAgICAgICAgICByZXR1cm4gdHJ1ZTsKCSAgICAgICAgfSwKCSAgICAgICAgcHJvbXB0OiBmdW5jdGlvbiBwcm9tcHQoKSB7CgkgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgIH0sCgkgICAgICAgIGNvbmZpcm06IGZ1bmN0aW9uIGNvbmZpcm0oKSB7CgkgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgIH0sCgkgICAgICAgIGFsZXJ0OiBmdW5jdGlvbiBhbGVydCgpIHsKCSAgICAgICAgICByZXR1cm4gdHJ1ZTsKCSAgICAgICAgfSwKCSAgICAgICAgbW92ZVRvOiBmdW5jdGlvbiBtb3ZlVG8oKSB7CgkgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgIH0sCgkgICAgICAgIG1vdmVCeTogZnVuY3Rpb24gbW92ZUJ5KCkgewoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9LAoJICAgICAgICByZXNpemVUbzogZnVuY3Rpb24gcmVzaXplVG8oKSB7CgkgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgIH0sCgkgICAgICAgIHJlc2l6ZUJ5OiBmdW5jdGlvbiByZXNpemVCeSgpIHsKCSAgICAgICAgICByZXR1cm4gdHJ1ZTsKCSAgICAgICAgfSwKCSAgICAgICAgc2Nyb2xsQnk6IGZ1bmN0aW9uIHNjcm9sbEJ5KCkgewoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9LAoJICAgICAgICBzY3JvbGxUbzogZnVuY3Rpb24gc2Nyb2xsVG8oKSB7CgkgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgIH0sCgkgICAgICAgIGdldFNlbGVjdGlvbjogZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKCkgewoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9LAoJICAgICAgICBvbnVubG9hZDogZnVuY3Rpb24gb251bmxvYWQoKSB7CgkgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgIH0sCgkgICAgICAgIHByaW50OiBmdW5jdGlvbiBwcmludCgpIHsKCSAgICAgICAgICByZXR1cm4gdHJ1ZTsKCSAgICAgICAgfSwKCSAgICAgICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHsKCSAgICAgICAgICByZXR1cm4gdGhpczsKCSAgICAgICAgfSwKCgkgICAgICAgIG9wZW5lcjogd2luZG93LAoJICAgICAgICBjbG9zZWQ6IGZhbHNlLAoJICAgICAgICBpbm5lckhlaWdodDogNDgwLAoJICAgICAgICBpbm5lcldpZHRoOiA2NDAsCgkgICAgICAgIG5hbWU6IG9wZW5XbmRBcmd1bWVudHNbMV0sCgkgICAgICAgIGxvY2F0aW9uOiBfbG9jYXRpb24sCgkgICAgICAgIGRvY3VtZW50OiB7IGxvY2F0aW9uOiBfbG9jYXRpb24gfQoJICAgICAgfTsKCgkgICAgICBjb3B5TWlzc2luZ1Byb3BlcnRpZXMod2luZG93LCBnZW5lcmF0ZWRXaW5kb3cpOwoKCSAgICAgIGdlbmVyYXRlZFdpbmRvdy53aW5kb3cgPSBnZW5lcmF0ZWRXaW5kb3c7CgoJICAgICAgdmFyIF93aW5kb3dOYW1lID0gZ2V0V2luZG93TmFtZShvcGVuV25kQXJndW1lbnRzKTsKCSAgICAgIGlmIChfd2luZG93TmFtZSAhPSBudWxsKSB7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgLy8gb3JpZ2luYWxXaW5kb3dPcGVuRm4oIiIsIHdpbmRvd05hbWUpLmNsb3NlKCk7CgkgICAgICAgICAgd2luZG93c1dpdGhOYW1lc1tfd2luZG93TmFtZV0uY2xvc2UoKTsKCSAgICAgICAgfSBjYXRjaCAoZXJyKSB7fQoJICAgICAgfQoKCSAgICAgIHZhciBmbkdldFVybCA9IGZ1bmN0aW9uIGZuR2V0VXJsKCkgewoJICAgICAgICB2YXIgdXJsID0gdm9pZCAwOwoJICAgICAgICBpZiAoIShnZW5lcmF0ZWRXaW5kb3cubG9jYXRpb24gaW5zdGFuY2VvZiBPYmplY3QpKSB7CgkgICAgICAgICAgdXJsID0gZ2VuZXJhdGVkV2luZG93LmxvY2F0aW9uOwoJICAgICAgICB9IGVsc2UgaWYgKCEoZ2VuZXJhdGVkV2luZG93LmRvY3VtZW50LmxvY2F0aW9uIGluc3RhbmNlb2YgT2JqZWN0KSkgewoJICAgICAgICAgIHVybCA9IGdlbmVyYXRlZFdpbmRvdy5kb2N1bWVudC5sb2NhdGlvbjsKCSAgICAgICAgfSBlbHNlIGlmIChfbG9jYXRpb24uaHJlZiAhPSBudWxsKSB7CgkgICAgICAgICAgdXJsID0gX2xvY2F0aW9uLmhyZWY7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgdXJsID0gb3BlblduZEFyZ3VtZW50c1swXTsKCSAgICAgICAgfQoJICAgICAgICBvcGVuV25kQXJndW1lbnRzWzBdID0gdXJsOwoKCSAgICAgICAgYmxvY2tlZFduZE5vdGlmaWNhdGlvbihvcGVuV25kQXJndW1lbnRzKTsKCSAgICAgIH07CgoJICAgICAgLy93aHkgc2V0IHRpbWVvdXQ/ICBpZiBhbnlvbmUgZmluZHMgYSByZWFzb24gZm9yIGl0LCBwbGVhc2Ugd3JpdGUgaXQgaGVyZQoJICAgICAgLy9pbiBpZnJhbWVzIGl0IG1ha2VzIHByb2JsZW1zIHNvIGknbSBhdm9pZGluZyBpdCB0aGVyZQoJICAgICAgaWYgKHRvcCA9PSBzZWxmKSB7CgkgICAgICAgIHNldFRpbWVvdXQoZm5HZXRVcmwsIDEwMCk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBmbkdldFVybCgpOwoJICAgICAgfQoJICAgIH0KCgkgICAgcmV0dXJuIGdlbmVyYXRlZFdpbmRvdzsKCSAgfQoKCSAgZnVuY3Rpb24gcGJXaW5kb3dPcGVuKCkgewoJICAgIHRyeSB7CgkgICAgICByZXR1cm4gbmV3V2luZG93T3BlbkZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkgICAgfSBjYXRjaCAoZXJyKSB7CgkgICAgICByZXR1cm4gbnVsbDsKCSAgICB9CgkgIH0KCgkgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoJICAvLyBSZXBsYWNlIHRoZSB3aW5kb3cgb3BlbiBtZXRob2Qgd2l0aCBQb3BlciBCbG9ja2VyJ3MKCSAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkgIHdpbmRvdy5vcGVuID0gcGJXaW5kb3dPcGVuOwoJICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgoJICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkgIC8vIE1vbml0b3IgZHluYW1pYyBodG1sIGVsZW1lbnQgY3JlYXRpb24gdG8gcHJldmVudCBnZW5lcmF0aW5nIDxhPiBlbGVtZW50cyB3aXRoIGNsaWNrIGRpc3BhdGNoaW5nIGV2ZW50CgkgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCSAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmFwcGVuZENoaWxkID0gZnVuY3Rpb24gKCkgewoJICAgIHZhciBuZXdFbGVtZW50ID0gb3JpZ2luYWxBcHBlbmRDaGlsZEZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgoJICAgIGlmIChuZXdFbGVtZW50Lm5vZGVOYW1lID09ICdJRlJBTUUnICYmIG5ld0VsZW1lbnQuY29udGVudFdpbmRvdykgewoJICAgICAgdHJ5IHsKCSAgICAgICAgdmFyIGNvZGUgPSAnKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcGJfYmxhY2tsaXN0ID0gJyArIEpTT04uc3RyaW5naWZ5KHBiX2JsYWNrbGlzdCkgKyAnO1xuICAgICAgICAgIHZhciBwYl93aGl0ZWxpc3QgPSAnICsgSlNPTi5zdHJpbmdpZnkocGJfd2hpdGVsaXN0KSArICc7XG4gICAgICAgICAgJyArIGluamVjdC50b1N0cmluZygpICsgJztcbiAgICAgICAgICBpbmplY3QoKTtcbiAgICAgICAgfSkoKTsnOwoKCSAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtzLnRleHQgPSBjb2RlOwoKCSAgICAgICAgbmV3RWxlbWVudC5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7CgkgICAgICB9IGNhdGNoIChlKSB7fQoJICAgIH0KCgkgICAgcmV0dXJuIG5ld0VsZW1lbnQ7CgkgIH07CgoJICBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKCkgewoKCSAgICB2YXIgbmV3RWxlbWVudCA9IG9yaWdpbmFsQ3JlYXRlRWxlbWVudEZuLmFwcGx5KGRvY3VtZW50LCBhcmd1bWVudHMpOwoKCSAgICBpZiAoYXJndW1lbnRzWzBdID09ICJhIiB8fCBhcmd1bWVudHNbMF0gPT0gIkEiKSB7CgoJICAgICAgdGltZVNpbmNlQ3JlYXRlQUVsZW1lbnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCgkgICAgICB2YXIgb3JpZ2luYWxEaXNwYXRjaEV2ZW50Rm4gPSBuZXdFbGVtZW50LmRpc3BhdGNoRXZlbnQ7CgoJICAgICAgbmV3RWxlbWVudC5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7CgkgICAgICAgIGlmIChldmVudC50eXBlICE9IG51bGwgJiYgKCcnICsgZXZlbnQudHlwZSkudG9Mb2NhbGVMb3dlckNhc2UoKSA9PSAiY2xpY2siKSB7CgkgICAgICAgICAgaWYgKCFpc0luV2hpdGVsaXN0KG5ld0VsZW1lbnQuaHJlZikpIHsKCSAgICAgICAgICAgIHdpbmRvdy5wYnJlYXNvbiA9ICJibG9ja2VkIGR1ZSB0byBhbiBleHBsaWNpdCBkaXNwYXRjaEV2ZW50IGV2ZW50IHdpdGggdHlwZSAnY2xpY2snIG9uIGFuICdhJyB0YWciOwoKCSAgICAgICAgICAgIGJsb2NrZWRXbmROb3RpZmljYXRpb24oeyAiMCI6IG5ld0VsZW1lbnQuaHJlZiB9KTsKCgkgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCgkgICAgICAgIHJldHVybiBvcmlnaW5hbERpc3BhdGNoRXZlbnRGbi5jYWxsKHRoaXMsIGV2ZW50KTsKCSAgICAgIH07CgoJICAgICAgbGFzdENyZWF0ZWRBRWxlbWVudCA9IG5ld0VsZW1lbnQ7CgkgICAgfQoKCSAgICByZXR1cm4gbmV3RWxlbWVudDsKCSAgfTsKCSAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoKCSAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgkgIC8vIEJsb2NrIGFydGlmaWNpYWwgbW91c2UgY2xpY2sgb24gZnJhc2hseSBjcmVhdGVkIDxhPiBlbGVtZW50cwoJICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCSAgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgdHJ5IHsKCSAgICAgIGlmIChhcmd1bWVudHNbMF0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygibW91c2UiKSAmJiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRpbWVTaW5jZUNyZWF0ZUFFbGVtZW50IDw9IDUwKSB7CgkgICAgICAgIHZhciBvcGVuVXJsRG9tYWluID0gdm9pZCAwLAoJICAgICAgICAgICAgdG9wVXJsID0gdm9pZCAwLAoJICAgICAgICAgICAgdG9wRG9tYWluID0gdm9pZCAwOwoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICBvcGVuVXJsRG9tYWluID0gbmV3IFVSTChsYXN0Q3JlYXRlZEFFbGVtZW50LmhyZWYpLmhvc3RuYW1lOwoJICAgICAgICB9IGNhdGNoIChlKSB7fQoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICB0b3BVcmwgPSB3aW5kb3cubG9jYXRpb24gIT0gd2luZG93LnBhcmVudC5sb2NhdGlvbiA/IGRvY3VtZW50LnJlZmVycmVyIDogZG9jdW1lbnQubG9jYXRpb24uaHJlZjsKCSAgICAgICAgfSBjYXRjaCAoZSkge30KCgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgdG9wRG9tYWluID0gbmV3IFVSTCh0b3BVcmwpLmhvc3RuYW1lOwoJICAgICAgICB9IGNhdGNoIChlKSB7fQoKCSAgICAgICAgLy9ibG9jayBpZiB0aGUgb3JpZ2luIGlzIG5vdCBzYW1lCgkgICAgICAgIHZhciBpc1NlbGZEb21haW4gPSBvcGVuVXJsRG9tYWluID09IHRvcERvbWFpbjsKCgkgICAgICAgIGlmIChsYXN0Q3JlYXRlZEFFbGVtZW50LmhyZWYudHJpbSgpICYmICFpc0luV2hpdGVsaXN0KGxhc3RDcmVhdGVkQUVsZW1lbnQuaHJlZikgJiYgIWlzU2VsZkRvbWFpbikgewoJICAgICAgICAgIC8vdGhpcyBtYWtlcyB0b28gbXVjaCBmYWxzZSBwb3NpdGl2ZSBzbyB3ZSBkbyBub3QgZGlzcGxheSB0aGUgdG9hc3QgbWVzc2FnZQoJICAgICAgICAgIHdpbmRvdy5wYnJlYXNvbiA9ICdCbG9ja2VkIGJlY2F1c2UgXCdhXCcgZWxlbWVudCB3YXMgcmVjZW50bHkgY3JlYXRlZCBhbmQgJyArIGFyZ3VtZW50c1swXSArICcgZXZlbnQgd2FzIGNyZWF0ZWQgc2hvcnRseSBhZnRlcic7CgkgICAgICAgICAgYXJndW1lbnRzWzBdID0gbGFzdENyZWF0ZWRBRWxlbWVudC5ocmVmOwoKCSAgICAgICAgICBibG9ja2VkV25kTm90aWZpY2F0aW9uKHsgIjAiOiBsYXN0Q3JlYXRlZEFFbGVtZW50LmhyZWYgfSk7CgoJICAgICAgICAgIHJldHVybiB7CgkgICAgICAgICAgICB0eXBlOiAnY2xpY2snLAoJICAgICAgICAgICAgaW5pdE1vdXNlRXZlbnQ6IGZ1bmN0aW9uIGluaXRNb3VzZUV2ZW50KCkge30KCSAgICAgICAgICB9OwoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgcmV0dXJuIG9yaWdpbmFsQ3JlYXRlRXZlbnRGbi5hcHBseShkb2N1bWVudCwgYXJndW1lbnRzKTsKCSAgICB9IGNhdGNoIChlcnIpIHt9CgkgIH07CgkgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCgkgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoJICAvLyBNb25pdG9yIGZ1bGwgc2NyZWVuIHJlcXVlc3RzCgkgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoJICBmdW5jdGlvbiBvbkZ1bGxTY3JlZW4oaXNJbkZ1bGxTY3JlZW5Nb2RlKSB7CgkgICAgaWYgKGlzSW5GdWxsU2NyZWVuTW9kZSkgewoJICAgICAgZnVsbFNjcmVlbk9wZW5UaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgkgICAgfSBlbHNlIHsKCSAgICAgIGZ1bGxTY3JlZW5PcGVuVGltZSA9IE5hTjsKCSAgICB9CgkgIH0KCgkgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCSAgZnVuY3Rpb24gaXNEb2N1bWVudEluRnVsbFNjcmVlbk1vZGUoKSB7CgkgICAgLy8gTm90ZSB0aGF0IHRoZSBicm93c2VyIGZ1bGxzY3JlZW4gKHRyaWdnZXJlZCBieSBzaG9ydCBrZXlzKSBtaWdodAoJICAgIC8vIGJlIGNvbnNpZGVyZWQgZGlmZmVyZW50IGZyb20gY29udGVudCBmdWxsc2NyZWVuIHdoZW4gZXhwZWN0aW5nIGEgYm9vbGVhbgoJICAgIHJldHVybiBkb2N1bWVudC5mdWxsU2NyZWVuRWxlbWVudCAmJiBkb2N1bWVudC5mdWxsU2NyZWVuRWxlbWVudCAhPT0gbnVsbCB8fCAvLyBhbHRlcm5hdGl2ZSBzdGFuZGFyZCBtZXRob2RzCgkgICAgZG9jdW1lbnQubW96RnVsbHNjcmVlbkVsZW1lbnQgIT0gbnVsbCB8fCBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCAhPSBudWxsOyAvLyBjdXJyZW50IHdvcmtpbmcgbWV0aG9kcwoJICB9CgoJICBmdW5jdGlvbiBpc0luV2hpdGVsaXN0KHVybCkgewoJICAgIHJldHVybiBpc0luTGlzdCh1cmwsIHBiX3doaXRlbGlzdCk7CgkgIH0KCgkgIGZ1bmN0aW9uIGlzSW5CbGFja2xpc3QodXJsKSB7CgkgICAgcmV0dXJuIGlzSW5MaXN0KHVybCwgcGJfYmxhY2tsaXN0KTsKCSAgfQoKCSAgZnVuY3Rpb24gaXNJbkxpc3QodXJsLCBsaXN0KSB7CgkgICAgaWYgKGxpc3QpIHsKCSAgICAgIHJldHVybiBsaXN0LnNvbWUoZnVuY3Rpb24gKGxpKSB7CgkgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCJodHRwcz86Ly8od3d3XC58LipcLik/IiArIGxpICsgIisiKS50ZXN0KHVybCk7CgkgICAgICB9KTsKCSAgICB9IGVsc2UgewoJICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH0KCSAgfQoKCSAgZnVuY3Rpb24gYmxvY2tlZFduZE5vdGlmaWNhdGlvbihvcGVuV25kQXJndW1lbnRzKSB7CgkgICAgLy90aGlzIGlzIHRvIHByZXZlbnQgYSBzaXRlIHRoYXQgInN0dWNrIiBvbiB0cnlpbmcgdG8gb3BlbiBhIG5ldyB3aW5kb3cgdG8gc2VuZCBlbmRsZXNzIGNhbGxzIHRvIHRoZSBleHRlbnNpb24KCSAgICBpZiAoIWxhc3RCbG9ja1RpbWUgfHwgbGFzdEJsb2NrVGltZSA8IERhdGUubm93KCkgLSAxMDAwKSB7CgkgICAgICBvcGVuV25kQXJndW1lbnRzWyIwIl0gPSBnZXRBYnNvbHV0ZVVSTChvcGVuV25kQXJndW1lbnRzWyIwIl0pOwoJICAgICAgb3BlblduZEFyZ3VtZW50c1siYWJkIl0gPSBhYmQ7CgoJICAgICAgcGFyZW50UmVmLnBvc3RNZXNzYWdlKHsgdHlwZTogImJsb2NrZWRXaW5kb3ciLCBhcmdzOiBKU09OLnN0cmluZ2lmeShvcGVuV25kQXJndW1lbnRzKSB9LCBwYXJlbnRPcmlnaW4pOwoJICAgIH0KCgkgICAgbGFzdEJsb2NrVGltZSA9IERhdGUubm93KCk7CgkgIH0KCgkgIC8vZGV0ZWN0IGFkYmxvY2sgdG8gYWRqdXN0IHBvcHVwIGJsb2NraW5nIGJlaGF2aW9yIHRvIG5vdCBjb2xsaWRlIHdpdGggYWRibG9jawoJICBmdW5jdGlvbiBkZXRlY3RBZGJsb2NrKCkgewoJICAgIHRyeSB7CgkgICAgICB2YXIgdGVzdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CgkgICAgICB0ZXN0ZXIuaW5uZXJIVE1MID0gJyZuYnNwOyc7CgkgICAgICB0ZXN0ZXIuY2xhc3NOYW1lID0gJ2Fkc2JveCc7CgkgICAgICB0ZXN0ZXIuc3R5bGUuY3NzVGV4dCA9ICJwb3NpdGlvbjphYnNvbHV0ZTt0b3AtMTAwMHB4O2xlZnQ6LTEwMDBweDsiOwoKCSAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGVzdGVyKTsKCgkgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0ZXN0ZXIub2Zmc2V0SGVpZ2h0ID09PSAwKSB7CgkgICAgICAgICAgYWJkID0gdHJ1ZTsKCSAgICAgICAgfQoKCSAgICAgICAgdGVzdGVyLnJlbW92ZSgpOwoJICAgICAgfSwgMTAwKTsKCSAgICB9IGNhdGNoIChlKSB7fQoJICB9CgoJICBmdW5jdGlvbiBleGVjdXRlQ29tbWFuZChjb21tYW5kSWQsIG1lc3NhZ2VJZCkgewoJICAgIGlmIChtZXNzYWdlSWQgPT0gcGJfbWVzc2FnZSkgewoJICAgICAgc3dpdGNoIChjb21tYW5kSWQpIHsKCSAgICAgICAgY2FzZSAwOgoJICAgICAgICAgIC8vb2ZmCgkgICAgICAgICAgd2luZG93Lm9wZW4gPSBvcmlnaW5hbFdpbmRvd09wZW5GbjsKCSAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gb3JpZ2luYWxDcmVhdGVFbGVtZW50Rm47CgkgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPSBvcmlnaW5hbENyZWF0ZUV2ZW50Rm47CgkgICAgICAgICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmFwcGVuZENoaWxkID0gb3JpZ2luYWxBcHBlbmRDaGlsZEZuOwoJICAgICAgICAgIGJyZWFrOwoKCSAgICAgICAgY2FzZSAxOgoJICAgICAgICAgIC8vYWxsb3cgb25jZQoJICAgICAgICAgIGJyZWFrOwoJICAgICAgfQoJICAgIH0KCSAgfQoKCSAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZnVsbHNjcmVlbmNoYW5nZSIsIGZ1bmN0aW9uICgpIHsKCSAgICBvbkZ1bGxTY3JlZW4oZG9jdW1lbnQuZnVsbHNjcmVlbik7CgkgIH0sIGZhbHNlKTsKCgkgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vemZ1bGxzY3JlZW5jaGFuZ2UiLCBmdW5jdGlvbiAoKSB7CgkgICAgb25GdWxsU2NyZWVuKGRvY3VtZW50Lm1vekZ1bGxTY3JlZW4pOwoJICB9LCBmYWxzZSk7CgoJICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlIiwgZnVuY3Rpb24gKCkgewoJICAgIG9uRnVsbFNjcmVlbihkb2N1bWVudC53ZWJraXRJc0Z1bGxTY3JlZW4pOwoJICB9LCBmYWxzZSk7CgoJICAvL2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PnsKCSAgZGV0ZWN0QWRibG9jaygpOwoJICAvL30sIGZhbHNlKTsKCgkgIChmdW5jdGlvbiAoKSB7CgkgICAgd2luZG93LnBiRXh0ZXJuYWxDb21tYW5kID0gZnVuY3Rpb24gKGNvbW1hbmRJZCwgbWVzc2FnZUlkKSB7CgkgICAgICBleGVjdXRlQ29tbWFuZChjb21tYW5kSWQsIG1lc3NhZ2VJZCk7CgkgICAgfTsKCSAgfSkoKTsKCX0KCglmdW5jdGlvbiByZXN0b3JlV2luZG93T3BlbigpIHsKCSAgd2luZG93Lm9wZW4gPSB3aW5kb3dbIm9yaWdpbmFsT3BlbkZ1bmN0aW9uIl07Cgl9CgoJLyoKCSAoKikgYSBqcXVlcnkgcGx1Z2luIChodHRwczovL2dpdGh1Yi5jb20vaHBidW5pYXQvanF1ZXJ5LXBvcHVuZGVyL2Jsb2IvbWFzdGVyL3NyYy9qcXVlcnkucG9wdW5kZXIuanMpIHwgJC5wb3B1bmRlci5oZWxwZXIub3BlbgoKCSAoKikgYW5vdGhlciBqcXVlcnkgcGx1Z2luIChodHRwczovL2dpdGh1Yi5jb20vdHVraS9qcy1wb3B1bmRlci8pCgoJIFRoZSBmdWxsLXNjcmVlbiB0cmljawoJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCSAoKikgYW5vdGhlciB3YXkgc2l0ZXMgdHJ5IHRvIG9wZW4gbmV3IHdpbmRvd3MsIGlzIHRvIHB1dCBhIGxpbmsgaW5zaWRlIHRoZSBwYWdlIGFuZCBnZW5lcmF0ZSBhIGNsaWNrIG9uIGl0LgoJIHRoZSBsaW5rIG9wZW5zIGEgbmV3IHRhYiB3aXRoIGEgbmFtZSwgYW5kIHRoZW4gdGhleSB0cnkgdG8gY2FsbCB3aW5kb3cub3BlbiB3aXRoIHRoYXQgbmFtZSBhIGNoYW5nZSB0aGUgdGFiJ3MgdXJsLgoJIGZvciBleGFtcGxlOgoKCSB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKCSB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50cyIpOwoJIHZhciByYW5kID0gTWF0aC5yYW5kb20oKTsKCSBhLnRhcmdldCA9ICJfdGFiIiArIHJhbmQudG9TdHJpbmcoKTsKCSBhLmhyZWYgPSAiYWJvdXQ6YmxhbmsiOwoJIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CgkgZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIHRydWUsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwgMCwgbnVsbCk7CgkgYS5kaXNwYXRjaEV2ZW50KGUpOwoJIHdpbmRvdy5vcGVuKCJhYm91dDpibGFuayIsICJfdGFiIiArIHJhbmQudG9TdHJpbmcoKSkuY2xvc2UoKTsKCgkgKCopIFRoZXkgb3BlbiBmdWxsIHNjcmVlbiBtb2RlIC0+IG9wZW4gYSBwb3B1cCB3aW5kb3cgLT4gZXhpdCBmdWxsIHNjcmVlbiBtb2RlLCB0aHVzIGl0IGdvZXMgYmVuZWF0aCB0aGUgd2luZG93CgoJIFRoZSBjcmVhdGUgZWxlbWVudCAmIGV2ZW50IHRyaWNrCgkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgkgKCopIFRoZSB3ZWJzaXRlIHdpbGwgY3JlYXRlIGFuIDxhPiBlbGVtZW50IGFuZCBhbHNvIGEgTW91c2VFdmVudHMgZXZlbnQsIHRoYXQgd2lsbCBhdXRvIGNsaWNrIG9uIGl0LgoJIFRoaXMgd2lsbCBtYWtlIGEgd2luZG93IHRvIG9wZW4gYW5kIHdpdGhvdXQgdGhlIHdpbmRvdy5vcGVuCgoJICgqKSBodHRwOi8vdG9ycmVudHMudG8vCgoJIFBvcC11bmRlciB0ZXN0IHdlYnNpdGVzOgoJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoJIGh0dHA6Ly93d3cuYWQ0Z2FtZS5jb20vcG9wdW5kZXIvCgkgaHR0cDovL3Rlc3QuZ2x1ay5uYW1lL3Rlc3QyL3BvcDMvPyMKCSBodHRwOi8vY3BtbmV0d29yay5hZGJvb3RoLmNvbS9lbi9wb3B1bmRlcgoJIGh0dHA6Ly93d3cudmNtdWsuY29tL3BvcHRlc3QuaHRtbAoJIGh0dHA6Ly9hZmZwbGF5Ym9vay5jb20vcG9wdGVzdC9leGl0MS90ZXN0Lmh0bWwKCgkgTm90IGJsb2NrZWQgYnkgQWRCbG9jazoKCgkgaHR0cDovL2RlbW8uZHluYW1pY294eWdlbi5jb20vUG9wLVVuZGVyCgkgaHR0cDovL21pcm9kZXguYmxvZ3Nwb3QuY28uaWwvMjAxMy8xMC93b3JraW5nLXBvcHVuZGVyLXNjcmlwdC1vbi1jaHJvbWUuaHRtbAoJIGh0dHA6Ly93d3cuYWR2ZXJ0c2VydmUuY29tL2V4YW1wbGVzL3BvcHVwcy5odG1sCgkgaHR0cDovL3d3dy5odG1sZ29vZGllcy5jb20vYmV5b25kL2phdmFzY3JpcHQvYXJ0aWNsZS5waHAvMzQ3MTI0MQoJICovCgovKioqLyB9KSwKLyogNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKCXZhciBfc3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgoJdmFyIF9zdG9yYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0b3JhZ2UpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgoJdmFyIF9Qcm9taXNlID0gdHlwZW9mIFByb21pc2UgPT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX3JlcXVpcmVfXyghKGZ1bmN0aW9uIHdlYnBhY2tNaXNzaW5nTW9kdWxlKCkgeyB2YXIgZSA9IG5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlIFwiZXM2LXByb21pc2VcIiIpOyBlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7IHRocm93IGU7IH0oKSkpLlByb21pc2UgOiBQcm9taXNlOwoKCXZhciBOdGZTaG93TWFuYWdlciA9IGZ1bmN0aW9uICgpIHsKCSAgZnVuY3Rpb24gTnRmU2hvd01hbmFnZXIoKSB7CgkgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE50ZlNob3dNYW5hZ2VyKTsKCgkgICAgdGhpcy5pc0FjdGl2ZSA9IHsgcG9wOiB0cnVlLCBvdmVybGF5OiB0cnVlLCB0aXA6IHRydWUgfTsKCSAgfQoKCSAgX2NyZWF0ZUNsYXNzKE50ZlNob3dNYW5hZ2VyLCBbewoJICAgIGtleTogJ2lzU2hvdycsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2hvdygpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgdmFyIHByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCSAgICAgIHZhciBkb21haW4gPSBwcm9wcy5kb21haW4sCgkgICAgICAgICAgX3Byb3BzJHR5cGUgPSBwcm9wcy50eXBlLAoJICAgICAgICAgIHR5cGUgPSBfcHJvcHMkdHlwZSA9PT0gdW5kZWZpbmVkID8gJ3BvcCcgOiBfcHJvcHMkdHlwZTsKCgkgICAgICByZXR1cm4gbmV3IF9Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CgkgICAgICAgIF9zdG9yYWdlMi5kZWZhdWx0LmdldCgncGJfaGlkZU5vdGlmaWNhdGlvbnMnLCAnZG9Ob3RTaG93Tm90aWZ5TGlzdCcsICdwYl9sYXN0Tm90aWZpY2F0aW9uRGlzcGxheScpLnRoZW4oZnVuY3Rpb24gKHNldHRpbmdzKSB7CgkgICAgICAgICAgdmFyIGlzR2xvYmFsSGlkZGVuID0gc2V0dGluZ3MucGJfaGlkZU5vdGlmaWNhdGlvbnMgfHwgZmFsc2U7CgkgICAgICAgICAgdmFyIGhpZGRlblNpdGVzTGlzdCA9IHNldHRpbmdzLmRvTm90U2hvd05vdGlmeUxpc3QgfHwgW107CgkgICAgICAgICAgdmFyIGxhc3REaXNwbGF5ID0gc2V0dGluZ3MucGJfbGFzdE5vdGlmaWNhdGlvbkRpc3BsYXkgfHwge307CgoJICAgICAgICAgIGlmIChfdGhpcy5pc0FjdGl2ZVt0eXBlXSAmJiBfdGhpcy5jaGVja0xhc3REaXNwbGF5KHsgZG9tYWluOiBkb21haW4sIHR5cGU6IHR5cGUsIGxhc3REaXNwbGF5OiBsYXN0RGlzcGxheSB9KSAmJiAhaXNHbG9iYWxIaWRkZW4gJiYgIV90aGlzLmNoZWNrSXNIaWRkZW4oeyBoaWRkZW5TaXRlc0xpc3Q6IGhpZGRlblNpdGVzTGlzdCwgZG9tYWluOiBkb21haW4gfSkpIHsKCSAgICAgICAgICAgIF90aGlzLmlzQWN0aXZlW3R5cGVdID0gZmFsc2U7CgoJICAgICAgICAgICAgX3RoaXMudXBkYXRlTGFzdERpc3BsYXkoeyBkb21haW46IGRvbWFpbiwgdHlwZTogdHlwZSB9KTsKCSAgICAgICAgICAgIHJlc29sdmUoKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0pOwoJICAgICAgfSk7CgkgICAgfQoKCSAgICAvL2NoZWNrIGlmIHVzZXIgYWRkZWQgdGhpcyBzaXRlIHRvIGRvbid0IHNob3cgYWdhaW4gZm9yIDMwIGRheXMKCgkgIH0sIHsKCSAgICBrZXk6ICdjaGVja0lzSGlkZGVuJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tJc0hpZGRlbihfcmVmKSB7CgkgICAgICB2YXIgaGlkZGVuU2l0ZXNMaXN0ID0gX3JlZi5oaWRkZW5TaXRlc0xpc3QsCgkgICAgICAgICAgZG9tYWluID0gX3JlZi5kb21haW47CgoJICAgICAgdmFyIGl0ZW0gPSBoaWRkZW5TaXRlc0xpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewoJICAgICAgICByZXR1cm4gaXRlbS5kb21haW4gPT0gZG9tYWluOwoJICAgICAgfSk7CgoJICAgICAgaWYgKGl0ZW0gJiYgaXRlbS50aW1lKSB7CgkgICAgICAgIHZhciB0aW1lID0gbmV3IERhdGUoaXRlbS50aW1lKTsKCSAgICAgICAgdmFyIHRpbWUzMGRheXMgPSBuZXcgRGF0ZSh0aW1lLnNldERhdGUodGltZS5nZXREYXRlKCkgKyAzMCkpOwoJICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKCgkgICAgICAgIGlmIChub3cgPD0gdGltZTMwZGF5cykgewoJICAgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH0KCgkgICAgLy9vdmVybGF5IG5vdGlmaWNhdGlvbiBuZWVkcyB0byBiZSBzaG93biBvbmx5IG9uY2UgaW4gMjQgaG91cnMKCSAgICAvL292ZXJsYXkgdGlwIG5vdGlmaWNhdGlvbiBuZWVkcyB0byBiZSBzaG93biBvbmNlIGEgbW9udGgKCgkgIH0sIHsKCSAgICBrZXk6ICdjaGVja0xhc3REaXNwbGF5JywKCSAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tMYXN0RGlzcGxheShfcmVmMikgewoJICAgICAgdmFyIGRvbWFpbiA9IF9yZWYyLmRvbWFpbiwKCSAgICAgICAgICB0eXBlID0gX3JlZjIudHlwZSwKCSAgICAgICAgICBsYXN0RGlzcGxheSA9IF9yZWYyLmxhc3REaXNwbGF5OwoKCSAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCSAgICAgIHZhciBsYXN0ID0gbGFzdERpc3BsYXlbdHlwZV07CgoJICAgICAgaWYgKCFsYXN0KSB7CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgICAgfQoKCSAgICAgIHN3aXRjaCAodHlwZSkgewoJICAgICAgICBjYXNlICdvdmVybGF5JzoKCSAgICAgICAgICBsYXN0ID0gbGFzdFtkb21haW5dOwoKCSAgICAgICAgICBpZiAobGFzdCAmJiBsYXN0ICsgMTAwMCAqIDYwICogNjAgKiAyNCA+IG5vdykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgIH0KCSAgICAgICAgICBicmVhazsKCgkgICAgICAgIGNhc2UgJ3RpcCc6CgkgICAgICAgICAgaWYgKGxhc3QgKyAxMDAwICogNjAgKiA2MCAqIDI0ICogMzAgPiBub3cpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgICB9CgkgICAgICAgICAgYnJlYWs7CgkgICAgICB9CgoJICAgICAgcmV0dXJuIHRydWU7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAndXBkYXRlTGFzdERpc3BsYXknLAoJICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVMYXN0RGlzcGxheShfcmVmMykgewoJICAgICAgdmFyIGRvbWFpbiA9IF9yZWYzLmRvbWFpbiwKCSAgICAgICAgICB0eXBlID0gX3JlZjMudHlwZTsKCgkgICAgICBfc3RvcmFnZTIuZGVmYXVsdC5nZXQoJ3BiX2xhc3ROb3RpZmljYXRpb25EaXNwbGF5JykudGhlbihmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBkaXNwbGF5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCgkgICAgICAgIHN3aXRjaCAodHlwZSkgewoJICAgICAgICAgIGNhc2UgJ292ZXJsYXknOgoJICAgICAgICAgICAgZGlzcGxheVt0eXBlXSA9IGRpc3BsYXlbdHlwZV0gfHwge307CgkgICAgICAgICAgICBkaXNwbGF5W3R5cGVdW2RvbWFpbl0gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCSAgICAgICAgICAgIGJyZWFrOwoKCSAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgZGlzcGxheVt0eXBlXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoJICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgIH0KCgkgICAgICAgIF9zdG9yYWdlMi5kZWZhdWx0LnNldCgncGJfbGFzdE5vdGlmaWNhdGlvbkRpc3BsYXknLCBkaXNwbGF5KTsKCSAgICAgIH0pOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ3VwZGF0ZURvbnRTaG93JywKCSAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRG9udFNob3coX3JlZjQpIHsKCSAgICAgIHZhciBkb21haW4gPSBfcmVmNC5kb21haW47CgoJICAgICAgUEJTdG9yYWdlU3luYy5kb05vdFNob3dOb3RpZnlMaXN0LnVwZGF0ZShmdW5jdGlvbiAoZG9Ob3RTaG93TGlzdCkgewoJICAgICAgICBkb05vdFNob3dMaXN0ID0gZG9Ob3RTaG93TGlzdC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKCSAgICAgICAgICByZXR1cm4gaXRlbS5kb21haW4gIT0gZG9tYWluOwoJICAgICAgICB9KTsKCSAgICAgICAgZG9Ob3RTaG93TGlzdC5wdXNoKHsKCSAgICAgICAgICBkb21haW46IGRvbWFpbiwKCSAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQoJICAgICAgICB9KTsKCgkgICAgICAgIHJldHVybiBkb05vdFNob3dMaXN0OwoJICAgICAgfSk7CgkgICAgfQoJICB9XSk7CgoJICByZXR1cm4gTnRmU2hvd01hbmFnZXI7Cgl9KCk7CgoJZXhwb3J0cy5kZWZhdWx0ID0gTnRmU2hvd01hbmFnZXI7CgovKioqLyB9KSwKLyogNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKCXZhciBfalF1ZXJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2pRdWVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9qUXVlcnkpOwoKCXZhciBfc3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgoJdmFyIF9zdG9yYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0b3JhZ2UpOwoKCXZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgoJdmFyIE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgZnVuY3Rpb24gTm90aWZpY2F0aW9uKCkgewoJICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgIHZhciBwcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgoJICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOb3RpZmljYXRpb24pOwoKCSAgICB0aGlzLnF1ZXVlID0gW107CgkgICAgdGhpcy5wcm9wcyA9IHByb3BzOwoJICAgIHRoaXMubm90aWZpY2F0aW9uSFRNTCA9ICI8aHRtbD5cclxuCTxoZWFkPlxyXG4JCTxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5cclxuCQkqIHtcclxuCQkJYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuCQkJZm9udC1mYW1pbHk6IFwiQXJpYWxcIiwgXCJzYW5zLXNlcmlmXCI7XHJcbgkJfVxyXG5cclxuCQlodG1sLCBib2R5IHtcclxuCQkJbWFyZ2luOiAwcHg7XHJcbgkJCXBhZGRpbmc6IDBweDtcclxuCQkJb3ZlcmZsb3c6IGhpZGRlbjsgXHJcbgkJCWNvbG9yOiAjMDAwO1xyXG4JCX1cclxuXHJcbgkJLmhpZGRlbiB7XHJcbgkJCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcclxuCQl9XHJcblxyXG4JCS5tZXNzYWdlIHtcclxuCQkJZGlzcGxheTogZmxleDtcclxuCQkJYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuCQkJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbgkJCXdpZHRoOiAxMDAlO1xyXG4JCQloZWlnaHQ6IDEwMCU7XHJcbgkJCWJhY2tncm91bmQ6ICNmMmYyZjI7XHJcbgkJfVxyXG5cclxuCQkvKiBpY29uICovXHJcbgkJLm1lc3NhZ2UtaWNvbiB7XHJcbgkJCWhlaWdodDogMTZweDtcclxuCQkJbWluLXdpZHRoOiAxNXB4O1xyXG4JCQliYWNrZ3JvdW5kOiB1cmwoXCdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUE4QUFBQVFDQVlBQUFHK1VSV1NBQUFBQVhOU1IwSUFyczRjNlFBQUFibEpSRUZVS0JWOVV6Rkx3MUFRenIzV0p1bmdVTENMVHFLTDdlaFNkSFhXVFp4RVZIUlFRWEJ3OGk4SUlrcFJGOEhCVFZlZEhQUVh0Q29JTHU2Q0JVMGl6WHQrOTlLTEVVTWZKSGYzdnUvdTNYMHZjUnlzbHVlOUtYWWNZMGFzdGEvSGNubXU1YnFHT0dxWHk3TW1qcStvVUppekc0ejhjbnRlMjNYSDJFMVNYUGNLbEZrRTE3WThCNUtpUU4yUUlFMWg1OG4zRzhhWUpXM01Lc2YxS0tLWFNtVXc2UkFibXFnS1FwVkJYdHphOStmbk9UMTYzakt5VG9ub0ZvU1pCRTdldG9tSk1EempjZzdSVFJhMHZsSVh0bTBCVUczRktaWHVPSjdvZEY0S0F0akppUUxTdXFPNzNidk5VdWsyYlk1Sm1ET1ZKdGI2L2c4b1ZjVGEyY2JmM3p0NWdoSlUwbUJHcU9kSmhsamJiVjRXRTlKUjhnZ3BLS1hZUHZ2KzFJRG50Y0lnYUVLOWVhWFVBdXdCWTdVd1RPVXU4a1oyc2Y1ZGZCcngxOWMxbEEwRlEvSVErM3loa09GQkVaMzBsU0tybXhUaHkyWWZ4YXIvVGhZU1RwM0VUREdyRHVKV3VxLzFqdmpGdHU4Zk9WcXZHNkpMdExFTGdIb0p3MEpDY2lQalQ0dHZCY05kckdIakdFbTVBZ281YTBGTXZ2MWFGRFh4UUZTMW5TWDA4OUhwUis1SitHRVhrYmlIWVVmL0ZTQjZoUjZIOVNEWS93R2t1NjdIc0ZmMXlRQUFBQUJKUlU1RXJrSmdnZz09XCcpO1xyXG4gICAgICBtYXJnaW4tcmlnaHQ6IDEycHg7XHJcbiAgICB9XHJcblxyXG4JCS8qIHRleHQgKi9cclxuCQkubWVzc2FnZS10aXRsZSB7XHJcbgkJCWZvbnQtZmFtaWx5OiBBcmlhbDtcclxuCQkJZm9udC1zaXplOiAxNnB4O1xyXG4JCQlmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgY29sb3I6ICNkNDA3MDc7XHJcbiAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xyXG4JCX1cclxuXHJcbgkJLyogY2xvc2UgKi9cclxuCQkubWVzc2FnZS1jbG9zZSB7XHJcbgkJCXBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuCQkJdG9wOiAxMnB4O1xyXG4JCQlyaWdodDogMTJweDtcclxuCQkJd2lkdGg6IDE2cHg7XHJcbgkJCWhlaWdodDogMTZweDtcclxuCQkJYmFja2dyb3VuZDogdXJsKFwnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUFYTlNSMElBcnM0YzZRQUFBWGxKUkVGVU9CR3RVMHRLQTBFUXJXb1RCNHdtaWlidVBJQ0N3UU9JNGtMd0htNUVWeDdFbGNHTjl4QmNpT0lCSkVJOGdEc3pTc3hQR0JPbjdWZVRna0pIVUxCaHBtdGUxYXYvTUgwNUwvMWtMVTFIKzVUU3JpZGVnWnJKUDVLalMrZUs1NHR6VWN0U1dEKzg5OVB4NjlzSk14MEUyU2x1YjJaT3ZhZXo2dnpNY1pEZm9STUhJRDkzaHhkQnVXTUpQOGtoeU5WU3BiUUhKeElKa1MxNVBCcDk0MW9NdHVEQWlLWG1qL0c5cHQxczNsSDgxS2JOclcyS29rZ2NKVWxDdHpmWFZGMnVVYjIrSVJqS2NWT0ZkWWVHS1JsUlFPNzF1a0lBVWNuQW9OTk13QUdYNDg2ZzVZbFd4VzE0V1VLNVhCRVlaTWcyS3loQ0F4KzQzUm4yaWZ5c1dFNWUxZ21nUEhKbXlvUGNjVTM4L09weXNpVEcxRVpIWkR5Mko4WlVGc3hod3hSRWc5QnRXelBxdGs2MGljS1I3UXpyaVpFQUtCU0xNaXBiTTBhcFRqQkcyT0RJR01IRlIyamthV2prSVdRY1JGSERETW5EdUZGYktCMzl6eXBqcDdIYkliR0dscU9SN1ozcHVLSC9BWFNTZ1RYNjYrLzhDVEliN3phUTNhWjRBQUFBQUVsRlRrU3VRbUNDXCcpIG5vLXJlcGVhdDtcclxuCQkJb2JqZWN0LWZpdDogY29udGFpbjtcclxuCQkJY3Vyc29yOiBwb2ludGVyO1xyXG4JCX1cclxuXHJcbgkJLyogYnV0dG9ucyAqL1xyXG4JCS5tZXNzYWdlLWJ1dHRvbnMge1xyXG4JCQlkaXNwbGF5OiBmbGV4O1xyXG4JCX1cclxuXHJcbgkJCS5tZXNzYWdlLWJ1dHRvbnMgPiBkaXYge1xyXG4gICAgICAgIGhlaWdodDogMjhweDtcclxuCQkJCWN1cnNvcjogcG9pbnRlcjtcclxuCQkJCWZvbnQtc2l6ZTogMTRweDtcclxuCQkJCWJhY2tncm91bmQtY29sb3I6ICNkZWRlZGU7XHJcbiAgICAgICAgYm94LXNoYWRvdzogMCAxcHggMCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTtcclxuICAgICAgICBib3JkZXI6IHNvbGlkIDFweCAjYjZiNGI2O1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICBjb2xvcjogIzVhNWE1YTtcclxuICAgICAgICBwYWRkaW5nOiAwIDE1cHg7XHJcbiAgICAgICAgbWFyZ2luOiAwIDhweDtcclxuICAgICAgICBsaW5lLWhlaWdodDogMjVweDtcclxuCQkJfVxyXG5cclxuCQkJLm1lc3NhZ2UtYnV0dG9ucyA+IGRpdjpob3ZlciB7XHJcbgkJCQliYWNrZ3JvdW5kLWNvbG9yOiAjZWZmM2Y4O1xyXG4JCQl9XHJcbgkJPC9zdHlsZT5cclxuCQlcclxuICAgIDxzY3JpcHQ+XHJcbiAgICAgIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIAkvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4vKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4vKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyAJCXZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIAkJCWV4cG9ydHM6IHt9LFxuLyoqKioqKi8gCQkJaWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gCQkJbG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gCQl9O1xuXG4vKioqKioqLyAJCS8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyAJCW1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4vKioqKioqLyAJCS8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIAl9XG5cblxuLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoe1xuXG4vKioqLyAwOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4JXCJ1c2Ugc3RyaWN0XCI7XG5cbgl2YXIgX2NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblxuCXZhciBfY29uc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29uc3QpO1xuXG4JdmFyIF9tZXNzYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cbglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4JKGZ1bmN0aW9uICgpIHtcbgkgIHZhciBkYXRhID0gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoXCcvL0BEQVRBXCcpKTtcblxuCSAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcJ0RPTUNvbnRlbnRMb2FkZWRcJywgZnVuY3Rpb24gKCkge1xuCSAgICBzaG93Tm90aWZpY2F0aW9uKGRhdGEpO1xuCSAgfSk7XG5cbgkgIGZ1bmN0aW9uIHNob3dOb3RpZmljYXRpb24oZGF0YSkge1xuCSAgICB2YXIgbWVzc2FnZSA9IG5ldyBfbWVzc2FnZS5NZXNzYWdlKHtcbgkgICAgICBjb25maWc6IF9jb25zdDIuZGVmYXVsdCxcbgkgICAgICBpZDogZGF0YS5pZCxcbgkgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbgkgICAgICBzdWJUaXRsZTogZGF0YS5zdWJUaXRsZSxcbgkgICAgICBpY29uOiBkYXRhLmljb24sXG4JICAgICAgc2hvd0hpZGU6IGRhdGEuc2hvd0hpZGUsXG4JICAgICAgc2hvd1Jlc2l6ZTogZGF0YS5zaG93UmVzaXplLFxuCSAgICAgIHNvdXJjZTogZGF0YS5zb3VyY2UsXG4JICAgICAgc2l6ZTogZGF0YS5zaXplLFxuCSAgICAgIGJ1dHRvbnM6IGRhdGEuYnV0dG9ucyxcbgkgICAgICBwcm9wczogZGF0YS5wcm9wc1xuCSAgICB9KTtcbgkgIH1cbgl9KSgpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gOTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuCVwidXNlIHN0cmljdFwiO1xuXG4JT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4JICB2YWx1ZTogdHJ1ZVxuCX0pO1xuCXZhciBDb25maWcgPSB7XG4JICBcImRlZmF1bHRXaGl0ZUxpc3RcIjogW1wiZW5nYWdlLndpeGFwcHMubmV0XCIsIFwibGlua2VkaW4uY29tXCIsIFwiZ29vZ2xlXCIsIFwid3d3LmdtYWlsLmNvbVwiLCBcInd3dy5waW50ZXJlc3QuY29tXCIsIFwid3d3LnlvdXR1YmUuY29tXCIsIFwid3d3LmZhY2Vib29rLmNvbVwiLCBcInNlYXJjaC55YWhvby5jb21cIiwgXCJjaHJvbWU6Ly9uZXd0YWJcIiwgXCJ3d3cuZm9vZC5jb21cIl0sXG4JICBcImRlZmF1bHRCbGFja0xpc3RcIjogW1wiYWRydW5uclwiLCBcInN1Y2Nlc3Nmb3J5dS5jbGlja2Z1bm5lbHMuY29tXCIsIFwiZm1vdmllcy5zZVwiLCBcImluLTM2NS10YWdlbi5pbmZvXCIsIFwiNTAwMC1zZXR0aW1hbmFsZS5jb21cIiwgXCJzaG9wLm1henp1Z2lvaWVsbGkuY29tXCIsIFwibWF4aWdvc3NpcC5jb21cIiwgXCJscC55YXppemltLmNvbVwiLCBcImJleW91cnhmcmllbmQuY29tXCIsIFwiOTl0YWIuY29tXCIsIFwienpxcnQuY29tXCIsIFwiY2FudWNrLW1ldGhvZC5uZXRcIiwgXCJiZXdvbWVubHkuY29tXCIsIFwicGxheW5vdy5ndXJ1XCIsIFwiZGF0aW5nZm9yeW91LTQ4ZTEua3hjZG4uY29tXCIsIFwidHJhZmZpY25ldHdvcmthZHMyNC5jb21cIiwgXCJzaXN0ZW1hZGVkaW5lcm9ncmF0aXMuY29tXCIsIFwiY2FudWNrbWV0aG9kcHJvZml0LmNvXCIsIFwiY29uc3VtZXJyZXNlYXJjaG5ldHdvcmsuY29tXCIsIFwic2VjdXJlbWFjZml4LmNvbVwiLCBcInp6M2QzLnJ1XCIsIFwiemQxLnF1ZWJlYy1iaW4uY29tXCIsIFwiaG90LWdhbWVzNHlvdS54eXpcIiwgXCJvbS5lbHZlbmFyLmNvbVwiLCBcInN1cGVycGNjbGVhbnVwLmNvbVwiLCBcImdvbWVkaWF6LmNvbVwiLCBcImp1ZGl0aGkueHl6XCIsIFwiZnJlZS5hdG96bWFudWFscy5jb21cIiwgXCJ5b3Vyc3VjY2Vzcy5yYXZwYWdlLmNvLmlsXCIsIFwiMTIzaG9wLmlyXCIsIFwicXVpemNsaWVudGUucHdcIiwgXCJhdXNzaWVtZXRob2QuYml6XCIsIFwiaGxwbm93cC1jLmNvbVwiLCBcInBpY2J1bXBlci5jb21cIiwgXCJzaGFuZWxlc3MuY29tXCIsIFwiYW5hY29uZGFtb25zdGVyLmNvbVwiLCBcImFsdHJrMS5jb21cIiwgXCJoZWFsdGgudG9kYXlkaWV0cy5jb21cIiwgXCJkb3dubG9hZC53ZWF0aGVyYmxpbmsuY29tXCIsIFwiaGFwcHlsdWtldGguY29tXCIsIFwiZ28uYW1laW5mby5jb21cIiwgXCI1MGthd2Vlay5uZXRcIiwgXCJ0aGVwb3Juc3VydmV5LmNvbVwiLCBcIm9mc2lpdGUucnVcIiwgXCJmdWxsdGFiLmNvbVwiLCBcIjEwMDBzcGlucy5jb21cIiwgXCJ0aW1lMnBsYXktb25saW5lLm5ldFwiLCBcInZpbnRhY2Fycy5jb21cIiwgXCJ3ZWxjb21lLnB1c3N5c2FnYS5jb21cIiwgXCJmcmVlLWRlc2t0b3AtZ2FtZXMuY29tXCIsIFwiZG93bmxvYWQudGVsZXZpc2lvbmZhbmF0aWMuY29tXCIsIFwidGhlcHJvZml0c21ha2VyLm5ldFwiLCBcInNnYWQuaW5mb1wiLCBcImFsZ29jYXNobWFzdGVyLm5ldFwiLCBcInN1bm1ha2VyLmNvbVwiLCBcInRvcHZpcGRyZWFtcy5jb21cIiwgXCJ3YXRjaG15Z2lybGZyaWVuZC5nZnBvcm52aWRlb3MuY29tXCIsIFwiZmlsZXNoYXJlZmFuYXRpYy5jb21cIiwgXCJzYWZlZG93bmxvYWRodWIuY29tXCIsIFwiN2F3bGFsYWxhbS5ibG9nc3BvdC5jb21cIiwgXCJ0dnBsdXNuZXd0YWIuY29tXCIsIFwidHJlbmRpbmdwYXRyb2wuY29tXCIsIFwibW9uZXltb3JuaW5nLmNvbVwiLCBcImlmaWxleW91LmNvbVwiLCBcImNsYXNzaWZpZWRjYW5hZGEuY2FcIiwgXCJmaXJlZmFuLmNvbVwiLCBcIm1ldGhvZGUtYmluYWlyZS5jb21cIiwgXCJsZXRtZXRlbGwuY29tXCIsIFwia2VuZHVrdHVyLmNvbVwiLCBcImdldGFmdWsuY29tXCIsIFwieW90cmFsZXBsYWhudGUucnVcIiwgXCJqYWNrcG90Ljg4YmV0by5jb21cIiwgXCJwd3d5c3lkaC5jb21cIiwgXCJzZWFyY2gucXVlcnlyb3V0ZXIuY29tXCIsIFwidi5sdnp0eHkuY29tXCIsIFwicHVzc3lzYWdhLmNvbVwiLCBcInNhZmZhbWV0aG9kLmNvbVwiLCBcInByZXp6b25saW5lLmNvbVwiLCBcInNlYXJjaHByaXZhY3kud2Vic2l0ZVwiLCBcIjNkMjgxOTIxNmViNGUxMDM1ODc5LTdjMjQ4ZGUwYzk5NzQ1NDA2ZTliNzQ5ZmM4NmVjM2U0LnNzbC5jZjEucmFja2Nkbi5jb21cIiwgXCJvbmx5MmRhdGUuY29tXCIsIFwibXlzYWdhZ2FtZS5jb21cIiwgXCJ0aGVtaWxsaW9uYWlyZWlucGpzLm5ldFwiLCBcIndsdC5rZDIyNDQuY29tXCIsIFwicXVpY2twcml2YWN5Y2hlY2suY29tXCIsIFwiaG90Y2hhdGRhdGUuY29tXCIsIFwiYXV0b3RyYWRlcmJvdC5jb21cIiwgXCJ6MS56ZWRvLmNvbVwiLCBcInlvdWx1Y2t5MjAxNC5jb21cIiwgXCJ0cmFmZmljLmdldG15YWRzLmNvbVwiLCBcImFwcGNsb3VkcHJvdGVjdGVkLmNvbVwiLCBcInNhZmVuc2VjdXJlLmNvbS1hbGxzaXRlczMueHl6XCIsIFwibmV3cG9wdGFiLmNvbVwiLCBcInN0YXRpYy53aWxsaWFtaGlsbC5jb21cIiwgXCJteWhlYWx0aHlibG9nLmNvXCIsIFwiZ3JlYXRlc3Rtb2JpZGVhbHMuY29tXCIsIFwic3dlZXRjbGFyaXR5LmNvbVwiLCBcIm1naWQuY29tXCIsIFwic2VjdXJlcGNjdXJlLmNvbVwiLCBcImF1dG9wZW5nZWJ5Z2dlci5jb21cIiwgXCJhbTE1Lm5ldFwiLCBcImVzLnJlaW1hZ2VwbHVzLmNvbVwiLCBcIm8yLnByb21vcy1pbmZvLmNvbVwiLCBcIml0LnJlaW1hZ2VwbHVzLmNvbVwiLCBcIndlc3RzbHV0cy5jb21cIiwgXCJzcGluYW5kd2luLmNvbS1zZXIucHdcIiwgXCJyZWltYWdlcGx1cy5jb21cIiwgXCJ2b2RhZm9uZS5wcm9tb3MtaW5mby5jb21cIiwgXCJ2aW5ubWF0cGVuZ2FyLnNlXCIsIFwibW92aWUuaWVuam95YXBwcy5jb21cIiwgXCJsb3ZlNHNpbmdsZS5jb21cIiwgXCJvcmlnaW4uZ2V0cHJpY2UuY29tLmF1XCIsIFwib2hteWRhdGluZy5jb21cIiwgXCJscC53YW50LXRvLXdpbi5jb21cIiwgXCJ5YWJ1bGV0Y2hyb21lLnJ1XCIsIFwiYmFtZGFkLm5ldFwiLCBcImdvdG9zaXRlbm93LmNvbVwiLCBcInZjcnlwdC5wd1wiLCBcIm5ld3RhYnR2LmNvbVwiLCBcIm1vbi5zZXRzdS54eXpcIiwgXCJ5b3Vmb3Jnb3R0b3JlbmV3eW91cmhvc3RpbmcuY29tXCIsIFwiem9uZS10ZWxlY2hhcmdlbWVudC53c1wiLCBcImxhbmQucGNrZWVwZXIuc29mdHdhcmVcIiwgXCJhZC5hZHBvcC0xLmNvbVwiLCBcImFkdmFuY2VkcGN0b29scy5jb21cIiwgXCJ2aWRlb3MucmFuZG9scGhjb3VudHloZXJhbGR0cmlidW5lLmNvbVwiLCBcIndlYi1zdGFydC5vcmdcIiwgXCJzb2Z0cmVhZHlub3cuaW5zdGFsbHVwZ3JhZGVub3dmcmVzaGFuZGZvcnlvdS53ZWJzaXRlXCIsIFwidXBsb2Qud3NcIiwgXCJwb3JuaHViY2FzaW5vLmNvbVwiLCBcIm1heGJldC5yb1wiLCBcIjIwMTZwcml6ZWZlZWQuY29tXCIsIFwidGhldmlkZW8ubWVcIiwgXCJ3YW50dWJhZC5jb21cIiwgXCJ0YXZhbmVyby5jb21cIiwgXCJ4Y3VzbXkuY2x1YlwiLCBcImRhY2xpcHMuaW5cIiwgXCJnYXltZW5vZnBvcm4ub25saW5lXCIsIFwiamFja3BvdGNpdHljYXNpbm8uY29tXCIsIFwiaXRhbGlhbi1tZXRob2QuY29tXCIsIFwiZ2V0c2VhcmNoaW5jb2duaXRvLmNvbVwiLCBcInlvdWp1c3R3b25wcml6ZS5jb21cIiwgXCJmaW5hbnotbmFjaHJpY2h0ZW4ubWVcIiwgXCJxdWl6Y2xpZW50ZS5zaXRlXCIsIFwiZGEucmVpbWFnZXBsdXMuY29tXCIsIFwiamthbmltZS5uZXRcIiwgXCJicml0bW9uZXltZXRob2QuY29tXCIsIFwidWFlLnNvdXEuY29tXCIsIFwia2EuYXp6ZXIubmV0XCIsIFwic2FmZW5zZWN1cmUueHl6XCIsIFwiOHQuaG9vdGluZ3JoZWprei5vbmxpbmVcIiwgXCJ3d3c2LmJsaW5reC5jb21cIiwgXCJ3aXp6Y2FzdGVyLmNvbVwiLCBcImNvbXBhcmFpc29uLXByaXguY29tXCIsIFwidm9kbG9ja2VyLmxvbFwiLCBcImZyLnJlaW1hZ2VwbHVzLmNvbVwiLCBcImZyZWUuZnJvbWRvY3RvcGRmLmNvbVwiLCBcInVzZXJzY2xvdWQuY29tXCIsIFwibXlwcml2YXRlc2VhcmNoLmNvbVwiLCBcImZhbmxpOTAuY25cIiwgXCJ0dXR0aWNvZGljaXNjb250by5pdFwiLCBcIm1lZGlhZGVjLmNvbVwiLCBcImdvZ2FtZWdvLnRoZXdoaXpwcm9kdWN0cy5jb21cIiwgXCJkb3dubG9hZC53ZWF0aGVyYmxpbmsuY29tXCIsIFwiZnJlZS52aWRlb2Rvd25sb2FkY29udmVydGVyLmNvbVwiLCBcIndlLWFyZS1nYW1lcnMuY29tXCIsIFwic2Vzc28uY29tbXVuaXR5YWR1bHQubmV0XCIsIFwibHAuYmxwbW92aWVzLmNvbVwiLCBcInNlYXJjaC5xdWVyeXJvdXRlci5jb21cIiwgXCJiYmItam9oYW5uZXNidXJnLmxvY2Fsc3BlY2lmaWMuY29tXCIsIFwibHAuYmxwbW92aWVzLmNvbVwiLCBcImdvLnBwaXhlbG0uY29tXCIsIFwicjAucnVcIiwgXCJzZXNzby5jb21tdW5pdHlhZHVsdC5uZXRcIiwgXCJiYmItam9oYW5uZXNidXJnLmxvY2Fsc3BlY2lmaWMuY29tXCIsIFwicHBpeGVsbS5jb21cIiwgXCJjeWJlcmd1YXJkaWFuc3BlLmluZm9cIiwgXCJ3ZS1hcmUtZ2FtZXJzLmNvbVwiLCBcImxvZ2luZmFzdGVyLmNvbS9uZXdcIiwgXCJ3d3cuYWxmYWNhcnQuY29tXCIsIFwid3d3LmZvcmVzZWUuY29tXCIsIFwibW9iaWxlLXdpbi5jb21cIiwgXCJ3d3cucGx1c25ldHdvcmsuY29tXCIsIFwid3d3LmFtaWNhZmFybWFjaWEuY29tXCIsIFwid3d3LmllbmpveWFwcHMuY29tXCIsIFwiY2hlYXBjaGVhcC5pb1wiLCBcInNjcmVlbmFkZGljdC50aGV3aGl6cHJvZHVjdHMuY29tXCIsIFwibm92YS5yYW1ibGVyLnJ1XCIsIFwiZnJlZS5nYW1pbmd3b25kZXJsYW5kLmNvbVwiLCBcInA5MzI4dWplaXcxLnJ1XCIsIFwibW9iaWxlY2FzaW5vY2x1Yi5jby51a1wiLCBcInBmaHN5c3RlbS5jb21cIiwgXCJyZWd0dW5ldXAuY29tXCIsIFwidGhlcHJvZml0c21ha2VyLm5ldFwiLCBcImJvZG9ncHJvbW90aW9ucy5ldVwiLCBcImhlcm9lc3JlcGxheS5vcmdcIiwgXCJmaW5hbmNpYWxzZWNyZXRzLmluZm9cIiwgXCJteW1vbmV5bWFraW5nYXBwLmNvbVwiLCBcInN1bm1ha2VyLmNvbVwiLCBcIjg4OGNhc2luby1wcm9tb3Rpb25zLmNvbVwiLCBcInZvZ2xpb3Nlc3NvLmNvbVwiLCBcInNjaWVuY2VyZW1peC5jb21cIiwgXCJhbGxpbm9uZWRvY3MuY29tXCIsIFwiYXJhYmlhLnN0YXJ6cGxheS5jb21cIiwgXCJhbGxpcmlzaGNhc2luby5jb21cIiwgXCJhZHZhbmNlcGN0b29scy5pbmZvXCIsIFwibW92aWUuaWVuam95YXBwcy5jb21cIiwgXCJzdXJ2ZXlmb3JtMDAxLnMzLXdlYnNpdGUtdXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cIiwgXCJtZ3MxODguY29tXCIsIFwicGZoc3lzdGVtLmNvbVwiLCBcImxwZXZhLmNvbVwiLCBcImRkc2g4LmNvbVwiLCBcInRoZXByb2ZpdHNtYWtlci5uZXRcIiwgXCJiMi5panF1ZXJ5MTEuY29tXCIsIFwic3BvcnRoZXJvLnRoZXdoaXptYXJrZXRpbmcuY29tXCIsIFwic2VjdXJlZmFzdG1hYy50ZWNoXCIsIFwic2Vlbi1vbi1zY3JlZW4udGhld2hpem1hcmtldGluZy5jb21cIiwgXCIxMDAwc3BpbnMuY29tXCIsIFwic2VhcmNoLnF1ZXJ5cm91dGVyLmNvbVwiLCBcInBmaHN5c3RlbS5jb21cIiwgXCJyZWltYWdlcGx1cy5jb21cIiwgXCJvZmZlci5hbGliYWJhLmNvbVwiLCBcInNlYXJjaGxpc3RpbmdzLm9yZ1wiLCBcInNlYXJjaC5xdWVyeXJvdXRlci5jb21cIiwgXCJzZWFyY2gucXVlcnlyb3V0ZXIuY29tXCIsIFwibXliaW5hcnlvcHRpb25zcm9ib3QuY29tXCIsIFwiZHVwbGljYXNoYXBwLmNvbVwiLCBcInNlYXJjaC5xdWVyeXJvdXRlci5jb21cIiwgXCJiZXN0Z2FtZS5kaXJlY3RvcnlcIiwgXCJkcm9pZGNsdWIubmV0XCIsIFwiLnJpdmFsby5jb21cIiwgXCJ5b3Vyc3VwZXJwcml6ZS5jb21cIiwgXCJtZWRpYWV4cGxhaW5lZC5jb21cIiwgXCJvbS5lbHZlbmFyLmNvbVwiLCBcInNoaW5hci5jbHViXCIsIFwicmV2aXRvbGVjemVtYWNyZWFtLmNvbVwiLCBcImZyZWVsb3R0by5jb21cIiwgXCJzY3JlZW5hZGRpY3QudGhld2hpenByb2R1Y3RzLmNvbVwiLCBcImRvd25sb2FkLmJyaW5nbWVzcG9ydHMuY29tL1wiLCBcImFsbGlub25lZG9jcy5jb21cIiwgXCJkcml2ZXItZml4ZXIuY29tXCIsIFwiYXJhYnlkZWFsLmNvbVwiLCBcImNsZWFueW91cmNvbXB1dGVydG9kYXkuY29tXCIsIFwiYXJhYnlkZWFsLmNvbVwiLCBcIm11c2ljLm1peHBsdWdpbi5jb21cIiwgXCIxc2UuaW5mb1wiLCBcInN1cnZleTEyLmNvbVwiLCBcImZyZWVzb2Z0d2FyZWRsdWwuY29tXCIsIFwicGxkaXN0MDEuY29tXCIsIFwiYWQuYWRwb3AtMS5jb21cIiwgXCJzZWFyY2hhbm9ueW1vdXMubmV0XCIsIFwiYWJyc3QucHJvXCIsIFwibXV6aWtmdXJ5LnRoZXdoaXptYXJrZXRpbmcuY29tXCIsIFwibHAubWJ0cnguY29tXCIsIFwidGgxLmZvcmZ1bi5tYXhpc2l6ZS1wcm8uY29tXCIsIFwid2F0Y2hteWdpcmxmcmllbmQuZ2Zwb3JuYm94LmNvbVwiLCBcIm5ldy5mcmVlbG90dG8uY29tXCIsIFwiZGVza3RvcHRyYWNrLmNvbVwiLCBcInNlYXJjaC5xdWVyeXJvdXRlci5jb21cIiwgXCJvZmZlci5hbGliYWJhLmNvbVwiLCBcIjEwMDBzcGlucy5jb21cIiwgXCJwcm9tb3Rpb25zLmNvcmFsLmNvLnVrXCIsIFwic2VhcmNoLnF1ZXJ5cm91dGVyLmNvbVwiLCBcInRic2lhLmNvbVwiLCBcInRic2lhLmNvbVwiLCBcIm11bHR0YWVweW8uY29tXCIsIFwic2VhcmNoLnF1ZXJ5cm91dGVyLmNvbVwiLCBcImN6ZWNobWV0aG9kLmNvbVwiLCBcImNvbnN1bWVydmlldy5jb1wiLCBcIndheXJldGFpbC5jb21cIiwgXCI3Mm9uYmFzZS5jb21cIiwgXCJmdW5zYWZldGFiLmNvbVwiLCBcInNlYXJjaC5xdWVyeXJvdXRlci5jb21cIiwgXCJzcGVlZHlmaWxlZG93bmxvYWQuY29tXCIsIFwiZHJpdmVyLWZpeGVyLmNvbVwiLCBcImFyYWJ5ZGVhbC5jb21cIiwgXCJjbGVhbnlvdXJjb21wdXRlcnRvZGF5LmNvbVwiLCBcImFyYWJ5ZGVhbC5jb21cIiwgXCJtdXNpYy5taXhwbHVnaW4uY29tXCIsIFwiMXNlLmluZm9cIiwgXCJzdXJ2ZXkxMi5jb21cIiwgXCJmcmVlc29mdHdhcmVkbHVsLmNvbVwiLCBcInBsZGlzdDAxLmNvbVwiLCBcImFkLmFkcG9wLTEuY29tXCIsIFwic2VhcmNoYW5vbnltb3VzLm5ldFwiLCBcImFicnN0LnByb1wiLCBcIm11emlrZnVyeS50aGV3aGl6bWFya2V0aW5nLmNvbVwiLCBcImxwLm1idHJ4LmNvbVwiLCBcInRoMS5mb3JmdW4ubWF4aXNpemUtcHJvLmNvbVwiLCBcIndhdGNobXlnaXJsZnJpZW5kLmdmcG9ybmJveC5jb21cIiwgXCJuZXcuZnJlZWxvdHRvLmNvbVwiLCBcImRlc2t0b3B0cmFjay5jb21cIiwgXCJzZWFyY2gucXVlcnlyb3V0ZXIuY29tXCIsIFwib2ZmZXIuYWxpYmFiYS5jb21cIiwgXCIxMDAwc3BpbnMuY29tXCIsIFwicHJvbW90aW9ucy5jb3JhbC5jby51a1wiLCBcInNlYXJjaC5xdWVyeXJvdXRlci5jb21cIiwgXCJ0YnNpYS5jb21cIiwgXCJ0YnNpYS5jb21cIiwgXCJzdXJ2ZXlmb3JtMDAxLnMzLXdlYnNpdGUtdXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cIiwgXCJtZ3MxODguY29tXCIsIFwicGZoc3lzdGVtLmNvbVwiLCBcImxwZXZhLmNvbVwiLCBcImRkc2g4LmNvbVwiLCBcInRoZXByb2ZpdHNtYWtlci5uZXRcIiwgXCJxdWFudG9tY29kaW5nLmNvbVwiLCBcInNwb3J0aGVyby50aGV3aGl6bWFya2V0aW5nLmNvbVwiLCBcInBvcGFkcy5uZXRcIiwgXCJvbmNsa2RzLmNvbVwiLCBcImNvbnN1bWVydmlldy5jb1wiLCBcIjEya290b3YucnVcIiwgXCJydWhvdHBhaXIyLmZpbmd0YS5jb21cIiwgXCJlYXN5dGVsZXZpc2lvbmFjY2Vzc25vdy5jb21cIiwgXCJhaHdyZC5jb21cIiwgXCJscGV2YS5jb21cIiwgXCJwcGd6Zi5jb21cIiwgXCJ6anN0eC5jb21cIiwgXCJraXR1dXJlLnh5elwiLCBcImpvaW4ucHJvLWdhbWluZy13b3JsZC5jb21cIiwgXCJtYWNrZWVwZXJhcHAubWFja2VlcGVyLmNvbVwiLCBcInRyYWNrbm90aWZ5LmNvbVwiLCBcIjIwNzUuY2RuLmJleW9uZGhvc3RpbmcubmV0XCIsIFwiaWRvbGxhc2guY29tXCIsIFwiZHMubW92aWVnb2F0LmNvbVwiLCBcImZ1bGx0YWIuY29tXCIsIFwicmFja2Nkbi5jb21cIiwgXCJwcmVzdG9yaXMuY29tXCIsIFwiYWRzdGVycmEuY29tXCIsIFwic3dhbXBzc292dXVodXNwLnRvcFwiLCBcInN0cmVlc3VzYS5pbmZvXCIsIFwiZnJlZXNvZnR3YXJlZGx1bC5jb21cIiwgXCJhZHJlYWN0b3IuY29tXCIsIFwiYS1zdGF0aWMuY29tXCIsIFwiY29kZW9uY2xpY2suY29tXCIsIFwiaGVoZW1lLmNvbVwiLCBcImFkZi5seVwiLCBcInNlZW4tb24tc2NyZWVuLnRoZXdoaXptYXJrZXRpbmcuY29tXCIsIFwib3BlbmxvYWQuY29cIl1cbgl9O1xuXG4JZXhwb3J0cy5kZWZhdWx0ID0gQ29uZmlnO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMTE6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbglcJ3VzZSBzdHJpY3RcJztcblxuCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuCSAgdmFsdWU6IHRydWVcbgl9KTtcblxuCXZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbglmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuCWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbgl2YXIgTWVzc2FnZSA9IGV4cG9ydHMuTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbgkgIGZ1bmN0aW9uIE1lc3NhZ2Uob3B0aW9ucykge1xuCSAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVzc2FnZSk7XG5cbgkgICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCcjbWVzc2FnZS10ZW1wbGF0ZVwnKS5pbm5lckhUTUw7XG4JICAgIHRoaXMubWVzc2FnZSA9IHRoaXMucmVuZGVyKHsgb3B0aW9uczogb3B0aW9ucyB9KTtcblxuCSAgICByZXR1cm4gdGhpcztcbgkgIH1cblxuCSAgX2NyZWF0ZUNsYXNzKE1lc3NhZ2UsIFt7XG4JICAgIGtleTogXCdyZW5kZXJcJyxcbgkgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcihfcmVmKSB7XG4JICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuCSAgICAgIHZhciBvcHRpb25zID0gX3JlZi5vcHRpb25zO1xuXG4JICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLmNyZWF0ZUhUTUwoeyBodG1sOiB0aGlzLnRlbXBsYXRlLCBwYXJlbnQ6IGRvY3VtZW50LmJvZHkgfSk7XG5cbgkgICAgICBpZiAob3B0aW9ucy50aXRsZSkge1xuCSAgICAgICAgbWVzc2FnZS5xdWVyeVNlbGVjdG9yKFwnLm1lc3NhZ2UtdGl0bGVcJykuaW5uZXJIVE1MID0gb3B0aW9ucy50aXRsZTtcbgkgICAgICAgIG1lc3NhZ2UucXVlcnlTZWxlY3RvcihcJy5tZXNzYWdlLXRpdGxlXCcpLmNsYXNzTGlzdC5yZW1vdmUoXCdoaWRkZW5cJyk7XG4JICAgICAgfVxuXG4JICAgICAgaWYgKG9wdGlvbnMuYnV0dG9ucy5sZW5ndGgpIHtcbgkgICAgICAgIHZhciBidXR0b25zID0gbWVzc2FnZS5xdWVyeVNlbGVjdG9yKFwnLm1lc3NhZ2UtYnV0dG9uc1wnKTtcblxuCSAgICAgICAgYnV0dG9ucy5jbGFzc0xpc3QucmVtb3ZlKFwnaGlkZGVuXCcpO1xuXG4JICAgICAgICBvcHRpb25zLmJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYnV0dG9uKSB7XG4JICAgICAgICAgIHZhciBidG4gPSBfdGhpcy5jcmVhdGVIVE1MKHsgaHRtbDogXCc8ZGl2PlwnICsgYnV0dG9uLmxhYmVsICsgXCc8L2Rpdj5cJywgcGFyZW50OiBidXR0b25zIH0pO1xuXG4JICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwnY2xpY2tcJywgZnVuY3Rpb24gKGUpIHtcbgkgICAgICAgICAgICBwYXJlbnQucG9zdE1lc3NhZ2UoeyBhY3Rpb246IFwncGItbWVzc2FnZS1idG4tY2xpY2tcJywgaWQ6IGJ1dHRvbi5pZCwgc291cmNlOiBvcHRpb25zLnNvdXJjZSwgdG9hc3RJZDogb3B0aW9ucy5pZCB9LCBcJypcJyk7XG5cbgkgICAgICAgICAgICBfdGhpcy5wcmV2bnRCcm93c2VyQmxvY2soeyBpZDogYnV0dG9uLmlkLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuCSAgICAgICAgICB9KTtcbgkgICAgICAgIH0pO1xuCSAgICAgIH1cblxuCSAgICAgIHRoaXMuaW5pdEV2ZW50cyh7IG1lc3NhZ2U6IG1lc3NhZ2UsIG9wdGlvbnM6IG9wdGlvbnMgfSk7XG5cbgkgICAgICBwYXJlbnQucG9zdE1lc3NhZ2UoeyBhY3Rpb246IFwncGItbWVzc2FnZS1kaXNwbGF5XCcsIHNvdXJjZTogb3B0aW9ucy5zb3VyY2UsIHRvYXN0SWQ6IG9wdGlvbnMuaWQgfSwgXCcqXCcpO1xuXG4JICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4JICAgIH1cbgkgIH0sIHtcbgkgICAga2V5OiBcJ2NyZWF0ZUhUTUxcJyxcbgkgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUhUTUwoX3JlZjIpIHtcbgkgICAgICB2YXIgaHRtbCA9IF9yZWYyLmh0bWwsXG4JICAgICAgICAgIHBhcmVudCA9IF9yZWYyLnBhcmVudDtcblxuCSAgICAgIHZhciBkb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGh0bWwudHJpbSgpLCBcJ3RleHQvaHRtbFwnKTtcbgkgICAgICB2YXIgZWwgPSBkb2MuYm9keS5maXJzdENoaWxkO1xuXG4JICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcblxuCSAgICAgIHJldHVybiBlbDtcbgkgICAgfVxuCSAgfSwge1xuCSAgICBrZXk6IFwnaW5pdEV2ZW50c1wnLFxuCSAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdEV2ZW50cyhfcmVmMykge1xuCSAgICAgIHZhciBtZXNzYWdlID0gX3JlZjMubWVzc2FnZSxcbgkgICAgICAgICAgb3B0aW9ucyA9IF9yZWYzLm9wdGlvbnM7XG5cbgkgICAgICBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG1lc3NhZ2UucXVlcnlTZWxlY3RvckFsbChcJy5tZXNzYWdlLWJ1dHRvbnMgPiBkaXZcJykpKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbgkgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcJ2NsaWNrXCcsIGZ1bmN0aW9uIChlKSB7XG4JICAgICAgICAgIHBhcmVudC5wb3N0TWVzc2FnZSh7IGFjdGlvbjogXCdwYi1tZXNzYWdlLWNsb3NlXCcsIHRyaWdnZXJFdmVudDogZmFsc2UsIHF1aWNrQ2xvc2U6IHRydWUsIHRvYXN0SWQ6IG9wdGlvbnMuaWQgfSwgXCcqXCcpO1xuCSAgICAgICAgfSk7XG4JICAgICAgfSk7XG5cbgkgICAgICBtZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoXCcubWVzc2FnZS1jbG9zZVwnKS5hZGRFdmVudExpc3RlbmVyKFwnY2xpY2tcJywgZnVuY3Rpb24gKCkge1xuCSAgICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgYWN0aW9uOiBcJ3BiLW1lc3NhZ2UtY2xvc2VcJywgdHJpZ2dlckV2ZW50OiB0cnVlLCBzb3VyY2U6IG9wdGlvbnMuc291cmNlLCB0b2FzdElkOiBvcHRpb25zLmlkIH0sIFwnKlwnKTtcbgkgICAgICB9KTtcbgkgICAgfVxuCSAgfSwge1xuCSAgICBrZXk6IFwncHJldm50QnJvd3NlckJsb2NrXCcsXG4JICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2bnRCcm93c2VyQmxvY2soX3JlZjQpIHtcbgkgICAgICB2YXIgaWQgPSBfcmVmNC5pZCxcbgkgICAgICAgICAgb3B0aW9ucyA9IF9yZWY0Lm9wdGlvbnM7XG5cbgkgICAgICB2YXIgYXJncyA9IFtdO1xuXG4JICAgICAgc3dpdGNoIChpZCkge1xuCSAgICAgICAgY2FzZSBcJ2FsbG93T25jZVwnOlxuCSAgICAgICAgY2FzZSBcJ2FsbG93QWx3YXlzXCc6XG4JICAgICAgICAgIGFyZ3MgPSBvcHRpb25zLnByb3BzLndpbkFyZ3M7XG4JICAgICAgICAgIGJyZWFrO1xuXG4JICAgICAgICBkZWZhdWx0OlxuCSAgICAgICAgICByZXR1cm47XG4JICAgICAgICAgIGJyZWFrO1xuCSAgICAgIH1cblxuCSAgICAgIC8vaWYgdXJsIGRvZXNuXCd0IGhhdmUgaHR0cCBpbiB0aGUgYmVnaW5uaW5nIHdlIG5lZWQgdG8gYWRkXG4JICAgICAgaWYgKCEvXmh0dHBzP1xcOi8udGVzdChhcmdzWzBdKSAmJiAhL15hYm91dDpibGFuay9pLnRlc3QoYXJnc1swXSkpIHtcbgkgICAgICAgIC8vdXJsIGNhbiBzdGFydCB3aXRoIC8vc2l0ZS5jb20gb3IganVzdCBzaXRlLmNvbVxuCSAgICAgICAgYXJnc1swXSA9IFwnaHR0cDpcJyArICgvXlxcL1xcLy8udGVzdChhcmdzWzBdKSA/IFwnXCcgOiBcJy8vXCcpICsgYXJnc1swXTtcbgkgICAgICB9XG5cbgkgICAgICAvL2luIGZpcmVmb3ggeW91IGNhblwndCBvcGVuIGEgbmV3IHRhYiBkaXJlY3RseSB3aXRoIGV4dGVybmFsIHVybCAoZG9uXCd0IGtub3cgd2h5LCBzZWVtcyBsaWtlIEZGIGJ1ZylcbgkgICAgICAvL3NvIHdlIG5lZWQgdG8gb3BlbiBhIGxvY2FsIGh0bWwgdXJsIGFuZCBkbyBhIHJlZGlyZWN0XG4JICAgICAgLyppZiAoL2ZpcmVmb3gvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XHJcbgkgICAgICAgIGFyZ3NbMF0gPSBcJ2ZpcmVmb3gvZmYtb3Blbi5odG1sP3U9XCcgKyBlbmNvZGVVUklDb21wb25lbnQoYXJnc1swXSk7XHJcbgkgICAgICB9Ki9cblxuCSAgICAgIHdpbmRvdy5vcGVuKGFyZ3NbMF0gfHwgXCdcJywgYXJnc1sxXSB8fCBcJ1wnLCBhcmdzWzJdIHx8IFwnXCcpO1xuCSAgICB9XG4JICB9XSk7XG5cbgkgIHJldHVybiBNZXNzYWdlO1xuCX0oKTtcblxuLyoqKi8gfSlcblxuLyoqKioqKi8gfSk7XHJcbiAgICA8L3NjcmlwdD5cclxuCTwvaGVhZD5cclxuCTxib2R5PlxyXG4JCTxzY3JpcHQgaWQ9XCJtZXNzYWdlLXRlbXBsYXRlXCIgdHlwZT1cInRleHQvaHRtbFwiPlxyXG4JCQk8ZGl2IGNsYXNzPVwibWVzc2FnZVwiPlxyXG4JCQkJPGRpdiBjbGFzcz1cIm1lc3NhZ2UtaWNvblwiPjwvZGl2PlxyXG4JCQkJPGRpdiBjbGFzcz1cIm1lc3NhZ2UtdGl0bGVcIj48L2Rpdj5cclxuCVxyXG4JCQkJPGRpdiBjbGFzcz1cIm1lc3NhZ2UtYnV0dG9uc1wiPjwvZGl2PlxyXG5cclxuCQkJCTxkaXYgY2xhc3M9XCJtZXNzYWdlLWNsb3NlXCI+PC9kaXY+XHJcbgkJCTwvZGl2PlxyXG4JCTwvc2NyaXB0PlxyXG4JPC9ib2R5PlxyXG48L2h0bWw+IjsKCgkgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsKCSAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEudG9hc3RJZCA9PSBfdGhpcy50b2FzdElkKSB7CgkgICAgICAgIHZhciBkYXRhID0gZXZlbnQuZGF0YTsKCgkgICAgICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHsKCSAgICAgICAgICBjYXNlICdwYi1tZXNzYWdlLWRpc3BsYXknOgoJICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbkRpc3BsYXkgJiYgX3RoaXMub3B0aW9ucy5vbkRpc3BsYXkoKTsKCgkgICAgICAgICAgICBfdGhpcy5wcm9wcy5vbkRpc3BsYXkuY2FsbChfdGhpcywgeyBzb3VyY2U6IGRhdGEuc291cmNlIH0pOwoJICAgICAgICAgICAgYnJlYWs7CgoJICAgICAgICAgIGNhc2UgJ3BiLW1lc3NhZ2UtY2xvc2UnOgoJICAgICAgICAgICAgX3RoaXMudXNlckdlbmVyYXRlZENsb3NlID0gdHJ1ZTsKCgkgICAgICAgICAgICAvL3JlbW92ZSBpbW1lZGlhdGVseQoJICAgICAgICAgICAgaWYgKGRhdGEucXVpY2tDbG9zZSkgewoJICAgICAgICAgICAgICBfdGhpcy5yZW1vdmUoKTsKCSAgICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICAgIF90aGlzLnF1ZXVlRmFkZSgxMDAsIF90aGlzLm9wdGlvbnMub25GYWRlT3V0KTsKCSAgICAgICAgICAgIH0KCgkgICAgICAgICAgICBpZiAoZGF0YS50cmlnZ2VyRXZlbnQpIHsKCSAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbkNsb3NlICYmIF90aGlzLm9wdGlvbnMub25DbG9zZSgpOwoJICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uQnV0dG9uQ2xpY2sgJiYgX3RoaXMub3B0aW9ucy5vbkJ1dHRvbkNsaWNrKHsgaWQ6ICdjbG9zZScgfSk7CgoJICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5vbkJ1dHRvbkNsaWNrLmNhbGwoX3RoaXMsIHsgc291cmNlOiBkYXRhLnNvdXJjZSwgaWQ6ICdjbG9zZScgfSk7CgkgICAgICAgICAgICAgIF90aGlzLnByb3BzLm9uQ2xvc2VDbGljay5jYWxsKF90aGlzLCB7IHNvdXJjZTogZGF0YS5zb3VyY2UgfSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBicmVhazsKCgkgICAgICAgICAgY2FzZSAncGItbWVzc2FnZS1idG4tY2xpY2snOgoJICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuYnV0dG9uc1tkYXRhLmlkXSkgewoJICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLmJ1dHRvbnNbZGF0YS5pZF0oKTsKCSAgICAgICAgICAgIH0KCgkgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uQnV0dG9uQ2xpY2sgJiYgX3RoaXMub3B0aW9ucy5vbkJ1dHRvbkNsaWNrKHsgaWQ6IGRhdGEuaWQgfSk7CgkgICAgICAgICAgICBfdGhpcy5wcm9wcy5vbkJ1dHRvbkNsaWNrLmNhbGwoX3RoaXMsIHsgc291cmNlOiBkYXRhLnNvdXJjZSwgaWQ6IGRhdGEuaWQgfSk7CgkgICAgICAgICAgICBicmVhazsKCgkgICAgICAgICAgY2FzZSAncGItbWVzc2FnZS10b29sdGlwLW92ZXInOgoJICAgICAgICAgICAgaWYgKGlzSTE4TihkYXRhLmlkKSkgewoJICAgICAgICAgICAgICBfdGhpcy5zaG93VG9vbHRpcChkYXRhKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGJyZWFrOwoKCSAgICAgICAgICBjYXNlICdwYi1tZXNzYWdlLXRvb2x0aXAtb3V0JzoKCSAgICAgICAgICAgIF90aGlzLmhpZGVUb29sdGlwKCk7CgkgICAgICAgICAgICBicmVhazsKCSAgICAgICAgfQoKCSAgICAgICAgaWYgKF90aGlzLnByb3BzLm9uQWN0aW9uKSB7CgkgICAgICAgICAgX3RoaXMucHJvcHMub25BY3Rpb24oZGF0YS5hY3Rpb24pOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfSk7CgoJICAgIC8vd2hlbiBmb2N1cyBvdXQgaXQgc3RvcHMgY3NzIGFuaW1hdGlvbiBzbyBldmVuIGFmdGVyIDUgc2Vjb25kcyAKCSAgICAvL3RoZSBub3RpZmljYXRpb24gc3RheXMgYW5kIHdoZW4gZm9jdXMgYmFjayBpdCBxdWlja2x5IGRpc2FwZWFycyAKCSAgICAvL3RoaXMgaXMgYSBmaXggdG8gdGhpcwoJICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsKCSAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT0gJ3Zpc2libGUnKSB7CgkgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCgkgICAgICAgIGlmIChfdGhpcy5xdWV1ZUZhZGVUaW1lICYmIG5vdyA+IF90aGlzLnF1ZXVlRmFkZVRpbWUgKyA1MDAwKSB7CgkgICAgICAgICAgX3RoaXMucmVtb3ZlKCk7CgkgICAgICAgIH0KCSAgICAgIH0KCSAgICB9LCBmYWxzZSk7CgkgIH0KCgkgIF9jcmVhdGVDbGFzcyhOb3RpZmljYXRpb24sIFt7CgkgICAga2V5OiAnYWRkUXVldWUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRRdWV1ZShvcHRpb25zKSB7CgkgICAgICB0aGlzLnF1ZXVlLnB1c2gob3B0aW9ucyk7CgoJICAgICAgaWYgKCF0aGlzLmlzTm90aWZpY2F0aW9uQWN0aXZlKSB7CgkgICAgICAgIHRoaXMuc2hvdyh0aGlzLmdldE5leHRRdWV1ZUl0ZW0oKSk7CgkgICAgICB9CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnZ2V0TmV4dFF1ZXVlSXRlbScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5leHRRdWV1ZUl0ZW0oKSB7CgkgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5zaGlmdCgpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ3Nob3cnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KG9wdGlvbnMpIHsKCSAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKCSAgICAgIHRoaXMuaW5pdChvcHRpb25zKTsKCgkgICAgICBpZiAob3B0aW9ucy5xdWlja09wZW4gJiYgIWRvY3VtZW50LmJvZHkpIHsKCSAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgX3RoaXMyLnNob3cob3B0aW9ucyk7CgkgICAgICAgIH0sIDUwKTsKCgkgICAgICAgIHJldHVybjsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHRoaXMuaXNOb3RpZmljYXRpb25BY3RpdmUgPSB0cnVlOwoKCSAgICAgICAgdGhpcy5yZW5kZXIoKTsKCSAgICAgIH0KCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdyZW5kZXInLAoJICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CgkgICAgICB2YXIgX3RoaXMzID0gdGhpczsKCgkgICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0SWZyYW1lRGF0YSgpOwoJICAgICAgdGhpcy50b2FzdCA9ICgwLCBfalF1ZXJ5Mi5kZWZhdWx0KSgnPGlmcmFtZSBpZD0icGItdG9hc3QtbWFpbiIgY2xhc3M9IicgKyB0aGlzLmdldENTU0NsYXNzKCkgKyAnIj4nKS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKF90aGlzMy5vcHRpb25zLnF1aWNrT3BlbikgewoJICAgICAgICAgIF90aGlzMy50b2FzdC5zaG93KCkuYWRkQ2xhc3MoJ3BiLXRvYXN0LW1haW4tc2hvdycpOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIF90aGlzMy50b2FzdC5zaG93KCkuYWRkQ2xhc3MoJ3BiLXRvYXN0LW1haW4tbW92ZScpOwoJICAgICAgICB9CgoJICAgICAgICBpZiAoIV90aGlzMy5vcHRpb25zLnBlcnNpc3RlbnQpIHsKCSAgICAgICAgICBfdGhpczMucXVldWVGYWRlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoJICAgICAgICAgIF90aGlzMy5xdWV1ZUZhZGUoNTAwMCwgX3RoaXMzLm9wdGlvbnMub25GYWRlT3V0KTsKCSAgICAgICAgfQoJICAgICAgfSkub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICghX3RoaXMzLm9wdGlvbnMucGVyc2lzdGVudCkgewoJICAgICAgICAgIF90aGlzMy5jYW5jZWxGYWRlKCk7CgkgICAgICAgIH0KCSAgICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewoJICAgICAgICBpZiAoIV90aGlzMy51c2VyR2VuZXJhdGVkQ2xvc2UgJiYgIV90aGlzMy5vcHRpb25zLnBlcnNpc3RlbnQpIHsKCSAgICAgICAgICBfdGhpczMucXVldWVGYWRlKDUwMDAsIF90aGlzMy5vcHRpb25zLm9uRmFkZU91dCk7CgkgICAgICAgIH0KCSAgICAgIH0pLm9uKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkgewoJICAgICAgICBpZiAoIV90aGlzMy50b2FzdC5pcygnLnBiLXRvYXN0LW1haW4tbW92ZScpKSB7CgkgICAgICAgICAgX3RoaXMzLnJlbW92ZSgpOwoJICAgICAgICB9CgkgICAgICB9KS5hdHRyKCdzcmMnLCBkYXRhKS5hcHBlbmRUbygnYm9keScpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ2dldENTU0NsYXNzJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q1NTQ2xhc3MoKSB7CgkgICAgICByZXR1cm4gJ3BiLXRvYXN0LW1haW4gJyArICh0aGlzLm9wdGlvbnMuY3NzQ2xhc3MgfHwgJycpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ2luaXQnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KG9wdGlvbnMpIHsKCSAgICAgIHRoaXMucmVtb3ZlKCk7CgoJICAgICAgdGhpcy50b2FzdElkID0gKDAsIF91dGlscy5HVUlEKSgpOwoJICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKCSAgICAgIHRoaXMudXNlckdlbmVyYXRlZENsb3NlID0gZmFsc2U7CgkgICAgICB0aGlzLnF1ZXVlRmFkZVRpbWUgPSBudWxsOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ3JlbW92ZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKCSAgICAgIHRoaXMuaGlkZVRvb2x0aXAoKTsKCgkgICAgICBpZiAodGhpcy5maWQpIHsKCSAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmlkKTsKCSAgICAgIH0KCgkgICAgICBpZiAodGhpcy50b2FzdCkgewoJICAgICAgICB0aGlzLnRvYXN0LnJlbW92ZSgpOwoJICAgICAgfQoKCSAgICAgIGlmICh0aGlzLmlzTm90aWZpY2F0aW9uQWN0aXZlKSB7CgkgICAgICAgIHRoaXMuaXNOb3RpZmljYXRpb25BY3RpdmUgPSBmYWxzZTsKCgkgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnN0b3BRdWV1ZSAmJiB0aGlzLnF1ZXVlLmxlbmd0aCkgewoJICAgICAgICAgIHRoaXMuc2hvdyh0aGlzLmdldE5leHRRdWV1ZUl0ZW0oKSk7CgkgICAgICAgIH0KCSAgICAgIH0KCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdxdWV1ZUZhZGUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBxdWV1ZUZhZGUodGltZSwgb25GYWRlT3V0KSB7CgkgICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCgkgICAgICB0aGlzLmZpZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewoJICAgICAgICBfdGhpczQudG9hc3QuYXR0cignY2xhc3MnLCBfdGhpczQuZ2V0Q1NTQ2xhc3MoKSk7CgoJICAgICAgICBpZiAob25GYWRlT3V0KSB7CgkgICAgICAgICAgb25GYWRlT3V0KCk7CgkgICAgICAgIH0KCSAgICAgIH0sIHRpbWUpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ2NhbmNlbEZhZGUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxGYWRlKCkgewoJICAgICAgaWYgKCF0aGlzLnRvYXN0LmlzKCcucGItdG9hc3QtbWFpbi1tb3ZlJykpIHsKCSAgICAgICAgdGhpcy50b2FzdC5hZGRDbGFzcygncGItdG9hc3QtbWFpbi1tb3ZlJyk7CgkgICAgICB9CgoJICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmlkKTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdzaG93VG9vbHRpcCcsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dUb29sdGlwKF9yZWYpIHsKCSAgICAgIHZhciBpZCA9IF9yZWYuaWQsCgkgICAgICAgICAgcG9zaXRpb24gPSBfcmVmLnBvc2l0aW9uOwoKCSAgICAgIHZhciB0b2FzdFBvc2l0aW9uID0gdGhpcy50b2FzdC5nZXQoMCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgkgICAgICB2YXIgdG9vbHRpcFBvc2l0aW9uID0gewoJICAgICAgICBsZWZ0OiB0b2FzdFBvc2l0aW9uLmxlZnQgKyBwb3NpdGlvbi54Q2VudGVyLAoJICAgICAgICB0b3A6IHRvYXN0UG9zaXRpb24udG9wICsgcG9zaXRpb24ueUNlbnRlciArIDE1CgkgICAgICB9OwoJICAgICAgdmFyIHRvb2x0aXAgPSB0aGlzLnJlbmRlclRvb2x0aXAoaWQpOwoKCSAgICAgIHRvb2x0aXAuY3NzKHsKCSAgICAgICAgJ3RvcCc6IHRvb2x0aXBQb3NpdGlvbi50b3AsCgkgICAgICAgICdsZWZ0JzogdG9vbHRpcFBvc2l0aW9uLmxlZnQgLSAodG9vbHRpcC5vdXRlcldpZHRoKCkgLSA3MCkKCSAgICAgIH0pOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ2hpZGVUb29sdGlwJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZVRvb2x0aXAoKSB7CgkgICAgICAoMCwgX2pRdWVyeTIuZGVmYXVsdCkoJyNwYl9qcV90aXBzV3JhcHBlcicpLnJlbW92ZSgpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ3JlbmRlclRvb2x0aXAnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJUb29sdGlwKGlkKSB7CgkgICAgICB0aGlzLmhpZGVUb29sdGlwKCk7CgoJICAgICAgcmV0dXJuICgwLCBfalF1ZXJ5Mi5kZWZhdWx0KSgnPGRpdiBpZD0icGJfanFfdGlwc1dyYXBwZXIiPicgKyAoMCwgX3V0aWxzLmdldEkxOE4pKGlkKSArICc8L2Rpdj4nKS5hcHBlbmRUbygnYm9keScpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ3Nob3dMaW5rQ29waWVkJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd0xpbmtDb3BpZWQoaWNvblBvc2l0aW9uKSB7CgkgICAgICB2YXIgdG9hc3RQb3NpdGlvbiA9IHRoaXMudG9hc3QuZ2V0KDApLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoJICAgICAgdmFyIHBvc2l0aW9uID0gewoJICAgICAgICBsZWZ0OiB0b2FzdFBvc2l0aW9uLmxlZnQgKyBpY29uUG9zaXRpb24ubGVmdCwKCSAgICAgICAgdG9wOiB0b2FzdFBvc2l0aW9uLnRvcCArIGljb25Qb3NpdGlvbi50b3AKCSAgICAgIH07CgoJICAgICAgKDAsIF9qUXVlcnkyLmRlZmF1bHQpKCcjcGItbGluay1jb3BpZWQtbWVzc2FnZScpLnJlbW92ZSgpOwoJICAgICAgdmFyIG1zZyA9ICgwLCBfalF1ZXJ5Mi5kZWZhdWx0KSgnPGRpdiBpZD0icGItbGluay1jb3BpZWQtbWVzc2FnZSI+JyArICgwLCBfdXRpbHMuZ2V0STE4TikoJ05URl9MaW5rQ29waWVkJykgKyAnPC9kaXY+JykuY3NzKHsKCSAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgKyAzMSwKCSAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCAtIDMwCgkgICAgICB9KS5hcHBlbmRUbygnYm9keScpLnNob3coKS5hbmltYXRlKHsKCSAgICAgICAgb3BhY2l0eTogMQoJICAgICAgfSwgMjUwKTsKCgkgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIG1zZy5hbmltYXRlKHsgb3BhY2l0eTogMCB9LCAyNTAsIGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICByZXR1cm4gbXNnLnJlbW92ZSgpOwoJICAgICAgICB9KTsKCSAgICAgIH0sIDIwMDApOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ2dldElmcmFtZURhdGEnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJZnJhbWVEYXRhKCkgewoJICAgICAgdmFyIGRhdGEgPSB7CgkgICAgICAgIGlkOiB0aGlzLnRvYXN0SWQsCgkgICAgICAgIHRpdGxlOiB0aGlzLm9wdGlvbnMudGl0bGUsCgkgICAgICAgIHN1YlRpdGxlOiB0aGlzLm9wdGlvbnMuc3ViVGl0bGUgfHwgJycsCgkgICAgICAgIGJ1dHRvbnM6IE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5idXR0b25zIHx8IHt9KS5tYXAoZnVuY3Rpb24gKGlkKSB7CgkgICAgICAgICAgcmV0dXJuIHsgaWQ6IGlkLCBsYWJlbDogKDAsIF91dGlscy5nZXRJMThOKShpZCkgfTsKCSAgICAgICAgfSksCgkgICAgICAgIHNob3dIaWRlOiB0aGlzLm9wdGlvbnMuc2hvd0hpZGUsCgkgICAgICAgIHNob3dSZXNpemU6IHRoaXMub3B0aW9ucy5zaG93UmVzaXplLAoJICAgICAgICBzb3VyY2U6IHRoaXMub3B0aW9ucy5zb3VyY2UgfHwgJycsCgkgICAgICAgIHByb3BzOiB7CgkgICAgICAgICAgZG9tYWluOiBkb2N1bWVudC5kb21haW4sCgkgICAgICAgICAgd2luQXJnczogdGhpcy5vcHRpb25zLndpbkFyZ3MgfHwgW10KCSAgICAgICAgfQoJICAgICAgfTsKCSAgICAgIHZhciBodG1sID0gdGhpcy5ub3RpZmljYXRpb25IVE1MLnJlcGxhY2UoJy8vQERBVEEnLCBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpKTsKCgkgICAgICByZXR1cm4gJ2RhdGE6dGV4dC9odG1sO2Jhc2U2NCwnICsgYnRvYShodG1sKTsKCSAgICB9CgkgIH1dKTsKCgkgIHJldHVybiBOb3RpZmljYXRpb247Cgl9KCk7CgoJZXhwb3J0cy5kZWZhdWx0ID0gTm90aWZpY2F0aW9uOwoKLyoqKi8gfSksCi8qIDggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCSJ1c2Ugc3RyaWN0IjsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCglleHBvcnRzLm5vdyA9IG5vdzsKCWV4cG9ydHMuYWRkU2NyaXB0ID0gYWRkU2NyaXB0OwoJZXhwb3J0cy5yZW1vdmVTY3JpcHQgPSByZW1vdmVTY3JpcHQ7CglleHBvcnRzLmV4ZWN1dGVDb2RlID0gZXhlY3V0ZUNvZGU7CglleHBvcnRzLmlzRG9tYWluSW5MaXN0ID0gaXNEb21haW5Jbkxpc3Q7CglleHBvcnRzLnRvUXVlcnlTdHJpbmcgPSB0b1F1ZXJ5U3RyaW5nOwoJZXhwb3J0cy5yYW5kSWQgPSByYW5kSWQ7CglleHBvcnRzLkdVSUQgPSBHVUlEOwoJZXhwb3J0cy51cGRhdGVXaGl0ZWxpc3QgPSB1cGRhdGVXaGl0ZWxpc3Q7CglleHBvcnRzLmdldEkxOE4gPSBnZXRJMThOOwoJZXhwb3J0cy5nZXRCcm93c2VyID0gZ2V0QnJvd3NlcjsKCWV4cG9ydHMuZ2V0UmFuZG9tSW50ID0gZ2V0UmFuZG9tSW50OwoJZXhwb3J0cy5pc1ZhbGlkVXJsID0gaXNWYWxpZFVybDsKCWV4cG9ydHMuZ2V0QWJzb2x1dGVVUkwgPSBnZXRBYnNvbHV0ZVVSTDsKCWV4cG9ydHMuaW5zZXJ0QmVmb3JlUm9vdCA9IGluc2VydEJlZm9yZVJvb3Q7CglleHBvcnRzLnNlbmRHb29nbGVBbmFseXRpY3NFdmVudCA9IHNlbmRHb29nbGVBbmFseXRpY3NFdmVudDsKCglmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCglmdW5jdGlvbiBub3coKSB7CgkgIHJldHVybiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTsKCX0KCglmdW5jdGlvbiBhZGRTY3JpcHQodGVtcGxhdGUpIHsKCSAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKCSAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiMiICsgdGVtcGxhdGUuaWQpICE9IHVuZGVmaW5lZCkgewoJICAgIHJldHVybjsKCSAgfQoJICBpZiAodGVtcGxhdGUuc3JjKSB7CgkgICAgcy5zcmMgPSB0ZW1wbGF0ZS5zcmM7CgkgIH0KCSAgaWYgKHRlbXBsYXRlLnRleHRDb250ZW50KSB7CgkgICAgcy50ZXh0Q29udGVudCA9IHRlbXBsYXRlLnRleHRDb250ZW50OwoJICB9CgkgIHMuc2V0QXR0cmlidXRlKCJpZCIsIHRlbXBsYXRlLmlkKTsKCSAgaW5zZXJ0QmVmb3JlUm9vdChzKTsKCX0KCglmdW5jdGlvbiByZW1vdmVTY3JpcHQodGVtcGxhdGUpIHsKCSAgdmFyIGFkZGVkU2NyaXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiIyIgKyB0ZW1wbGF0ZS5pZCk7CgkgIGlmIChhZGRlZFNjcmlwdCAhPSB1bmRlZmluZWQpIHsKCSAgICBhZGRlZFNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGFkZGVkU2NyaXB0KTsKCSAgfQoJfQoKCWZ1bmN0aW9uIGV4ZWN1dGVDb2RlKGNvZGUpIHsKCSAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKCSAgcy50ZXh0Q29udGVudCA9IGNvZGU7CgkgIGluc2VydEJlZm9yZVJvb3Qocyk7CgoJICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKCSAgICBzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocyk7CgkgIH0sIDUwKTsKCX0KCgkvKioKCSAqIENoZWNrcyB3aGV0aGVyIGRvbWFpbiBmaXRzIHRoZSB3aGl0ZWxpc3QKCSAqIEBwYXJhbSBTdHJpbmcgZG9tYWluCgkgKiBAcGFyYW0gQXJyYXkgW1N0cmluZ10gZG9tYWluTGlzdAoJICogQHJldHVybnMge2Jvb2xlYW59CgkgKi8KCWZ1bmN0aW9uIGlzRG9tYWluSW5MaXN0KGRvbWFpbiwgZG9tYWluTGlzdCwgcmV0dXJuVmFsdWUpIHsKCSAgZG9tYWluTGlzdCA9IGRvbWFpbkxpc3QgfHwgW107CgoJICBmb3IgKHZhciBpID0gMDsgaSA8IGRvbWFpbkxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICB2YXIgZG9tYWluVGFpbCA9IGRvbWFpbkxpc3RbaV07CgkgICAgaWYgKG5ldyBSZWdFeHAoIlxcYlsod3d3XFwuKXwuKlwuXT8iICsgZG9tYWluVGFpbCArICJcXGIiKS50ZXN0KGRvbWFpbikpIHsKCSAgICAgIHJldHVybiByZXR1cm5WYWx1ZSA/IGRvbWFpblRhaWwgOiB0cnVlOwoJICAgIH0KCSAgfQoJICByZXR1cm4gZmFsc2U7Cgl9CgoJZnVuY3Rpb24gdG9RdWVyeVN0cmluZyhvYmopIHsKCSAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsKCSAgICByZXR1cm4gISFvYmpba2V5XSB8fCBmYWxzZSA9PT0gb2JqW2tleV07CgkgIH0pLm1hcChmdW5jdGlvbiAoa2V5KSB7CgkgICAgcmV0dXJuIGtleSArICc9JyArIG9ialtrZXldOwoJICB9KS5qb2luKCcmJyk7Cgl9CgoJZnVuY3Rpb24gcmFuZElkKCkgewoJICB2YXIgcmFuZGlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInJhbmRpZCIpOwoJICBpZiAoIXJhbmRpZCkgewoJICAgIHZhciByciA9IGZ1bmN0aW9uIHJyKCkgewoJICAgICAgcmV0dXJuICgoMSArIE1hdGgucmFuZG9tKERhdGUubm93KCkgKyAxNCkpICogMHgxMDAwMCB8IDApLnRvU3RyaW5nKDI4KS5zdWJzdHJpbmcoMSk7CgkgICAgfTsKCSAgICByYW5kaWQgPSBycigpICsgcnIoKSArIHJyKCkgKyBycigpICsgcnIoKSArIHJyKCkgKyBycigpICsgcnIoKSArIHJyKCk7CgkgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInJhbmRpZCIsIHJhbmRpZCk7CgkgIH0KCSAgcmV0dXJuIHJhbmRpZDsKCX0KCglmdW5jdGlvbiBHVUlEKCkgewoJICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykgewoJICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCwKCSAgICAgICAgdiA9IGMgPT0gJ3gnID8gciA6IHIgJiAweDMgfCAweDg7CgkgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpOwoJICB9KTsKCX0KCgl2YXIgUmV0ZW5zaW9uID0gZXhwb3J0cy5SZXRlbnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgIGZ1bmN0aW9uIFJldGVuc2lvbihjb25mKSB7CgkgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJldGVuc2lvbik7CgoJICAgIHRoaXMuU3RvcmFnZSA9IGNvbmYuU3RvcmFnZTsKCSAgICB0aGlzLkdBRXZlbnRzID0gY29uZi5HQUV2ZW50czsKCSAgICB0aGlzLmxhc3RSZXRlbnRpb25EYXkgPSAyODsKCSAgICB0aGlzLm1pbkhvdXJzRnJvbUluc3RhbGwgPSA4OwoKCSAgICB0aGlzLlN0b3JhZ2UucmVxdWVzdEdldCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKCSAgICAgIF90aGlzLmRhdGEgPSBfdGhpcy5pbml0aWFsaXplKGRhdGEpOwoKCSAgICAgIF90aGlzLnJlcG9ydCgpOwoJICAgIH0pOwoJICB9CgoJICBfY3JlYXRlQ2xhc3MoUmV0ZW5zaW9uLCBbewoJICAgIGtleTogImluaXRpYWxpemUiLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplKGRhdGEpIHsKCSAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKCSAgICAgIGlmIChkYXRhICYmIGRhdGEuaW5zdGFsbERhdGUgJiYgZGF0YS5zZW50RGF5cykgewoJICAgICAgICByZXR1cm4gZGF0YTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIGRhdGEgPSBkYXRhIHx8IHt9OwoJICAgICAgICBkYXRhLmluc3RhbGxEYXRlID0gZGF0YS5pbnN0YWxsRGF0ZSA/IGRhdGEuaW5zdGFsbERhdGUgOiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgX3RoaXMyLkdBRXZlbnRzLkluc3RhbGwoKTsKCgkgICAgICAgICAgcmV0dXJuIERhdGUubm93KCk7CgkgICAgICAgIH0oKTsKCSAgICAgICAgZGF0YS5zZW50RGF5cyA9IGRhdGEuc2VudERheXMgfHwge307CgoJICAgICAgICB0aGlzLlN0b3JhZ2UucmVxdWVzdFNldChkYXRhKTsKCgkgICAgICAgIHJldHVybiBkYXRhOwoJICAgICAgfQoJICAgIH0KCSAgfSwgewoJICAgIGtleTogInJlcG9ydCIsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIHJlcG9ydCgpIHsKCSAgICAgIGlmICghdGhpcy5kYXRhLmNvbXBsZXRlZCkgewoJICAgICAgICB0aGlzLnJlcG9ydFJldGVudG9pbigpOwoJICAgICAgfQoKCSAgICAgIHRoaXMucmVwb3J0QWxpdmUoKTsKCgkgICAgICBzZXRUaW1lb3V0KHRoaXMucmVwb3J0LmJpbmQodGhpcyksIDEwMDAgKiA2MCAqIDYwKTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICJyZXBvcnRSZXRlbnRvaW4iLAoJICAgIHZhbHVlOiBmdW5jdGlvbiByZXBvcnRSZXRlbnRvaW4oKSB7CgkgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKCSAgICAgIHZhciBpbnN0YWxsRGF0ZSA9IG5ldyBEYXRlKHRoaXMuZGF0YS5pbnN0YWxsRGF0ZSk7CgkgICAgICB2YXIgaW5zdGFsbFN0YXJ0ID0gdGhpcy5nZXREYXRlU3RhcnQoaW5zdGFsbERhdGUpOwoJICAgICAgdmFyIHRvZGF5U3RhcnQgPSB0aGlzLmdldERhdGVTdGFydChub3cpOwoJICAgICAgdmFyIG1zU3RhcnREaWZmID0gTWF0aC5hYnModG9kYXlTdGFydCAtIGluc3RhbGxTdGFydCk7CgkgICAgICB2YXIgaG91cnNGcm9tVHJ1ZUluc3RhbGwgPSBNYXRoLmZsb29yKChub3cgLSBpbnN0YWxsRGF0ZSkgLyAoMTAwMCAqIDYwICogNjApKTsKCSAgICAgIHZhciBkYXlzRGlmZiA9IE1hdGguZmxvb3IobXNTdGFydERpZmYgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpOwoKCSAgICAgIGlmIChkYXlzRGlmZiA+IDAgJiYgZGF5c0RpZmYgPD0gdGhpcy5sYXN0UmV0ZW50aW9uRGF5KSB7CgkgICAgICAgIGlmICghdGhpcy5kYXRhLnNlbnREYXlzW2RheXNEaWZmXSAmJiBob3Vyc0Zyb21UcnVlSW5zdGFsbCA+IHRoaXMubWluSG91cnNGcm9tSW5zdGFsbCkgewoJICAgICAgICAgIHRoaXMuR0FFdmVudHMuUmV0ZW50b2luKGRheXNEaWZmKTsKCgkgICAgICAgICAgdGhpcy5kYXRhLnNlbnREYXlzW2RheXNEaWZmXSA9IHRydWU7CgkgICAgICAgICAgdGhpcy5TdG9yYWdlLnJlcXVlc3RTZXQodGhpcy5kYXRhKTsKCSAgICAgICAgfQoJICAgICAgfSBlbHNlIGlmIChkYXlzRGlmZiA+IHRoaXMubGFzdFJldGVudGlvbkRheSkgewoJICAgICAgICB0aGlzLmRhdGEuY29tcGxldGVkID0gdHJ1ZTsKCgkgICAgICAgIHRoaXMuU3RvcmFnZS5yZXF1ZXN0U2V0KHRoaXMuZGF0YSk7CgkgICAgICB9CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAicmVwb3J0QWxpdmUiLAoJICAgIHZhbHVlOiBmdW5jdGlvbiByZXBvcnRBbGl2ZSgpIHsKCSAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwoJICAgICAgdmFyIGxhc3RBbGl2ZVRpbWUgPSB0aGlzLmRhdGEubGFzdEFsaXZlVGltZTsKCSAgICAgIHZhciB0b2RheVN0YXJ0ID0gdGhpcy5nZXREYXRlU3RhcnQobm93KS5nZXRUaW1lKCk7CgoJICAgICAgaWYgKCFsYXN0QWxpdmVUaW1lIHx8IGxhc3RBbGl2ZVRpbWUgKiAxIDwgdG9kYXlTdGFydCkgewoJICAgICAgICB0aGlzLkdBRXZlbnRzLkFsaXZlKCk7CgoJICAgICAgICB0aGlzLmRhdGEubGFzdEFsaXZlVGltZSA9IG5vdy5nZXRUaW1lKCk7CgkgICAgICAgIHRoaXMuU3RvcmFnZS5yZXF1ZXN0U2V0KHRoaXMuZGF0YSk7CgkgICAgICB9CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAiZ2V0RGF0ZVN0YXJ0IiwKCSAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGF0ZVN0YXJ0KGRhdGUpIHsKCSAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXRIb3VycygpID49IDAgJiYgZGF0ZS5nZXRIb3VycygpIDwgNSA/IGRhdGUuZ2V0RGF0ZSgpIC0gMSA6IGRhdGUuZ2V0RGF0ZSgpLCA1LCAwLCAxKTsgLy9kYXkgc3RhcnRzIGF0IDVQTQoJICAgIH0KCSAgfV0pOwoKCSAgcmV0dXJuIFJldGVuc2lvbjsKCX0oKTsKCglmdW5jdGlvbiB1cGRhdGVXaGl0ZWxpc3QoUEJTdG9yYWdlU3luYykgewoJICBQQlN0b3JhZ2VTeW5jLm1hbnkoUEJTdG9yYWdlU3luYy5wYl9kZWZhdWx0V2hpdGVsaXN0LCBQQlN0b3JhZ2VTeW5jLnBiX3doaXRlbGlzdCwgUEJTdG9yYWdlU3luYy5wYl9mdWxsV2hpdGVsaXN0KS51cGRhdGUoZnVuY3Rpb24gKHNldHRpbmdzKSB7CgkgICAgc2V0dGluZ3MucGJfZnVsbFdoaXRlbGlzdCA9IHNldHRpbmdzLnBiX2RlZmF1bHRXaGl0ZWxpc3QuY29uY2F0KHNldHRpbmdzLnBiX3doaXRlbGlzdCkudW5pcXVlKCk7CgoJICAgIHJldHVybiBzZXR0aW5nczsKCSAgfSk7Cgl9CgoJZnVuY3Rpb24gZ2V0STE4Tihtc2dOYW1lLCBhbHRlcm5hdGl2ZSkgewoJICB2YXIgbGFuZyA9IG5hdmlnYXRvci5sYW5ndWFnZS50b0xvd2VyQ2FzZSgpID09ICd6aC1jbicgPyAnQ04nIDogJ0VOJzsKCgkgIHJldHVybiAoTEFOR1tsYW5nXVttc2dOYW1lXSB8fCBMQU5HW2xhbmddW2FsdGVybmF0aXZlXSB8fCB7ICJtZXNzYWdlIjogbXNnTmFtZSB9KS5tZXNzYWdlOwoJfQoKCWZ1bmN0aW9uIGdldEJyb3dzZXIoKSB7CgkgIGlmICgvZmlyZWZveC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsKCSAgICByZXR1cm4gJ0ZGJzsKCSAgfQoKCSAgcmV0dXJuICdDSCc7Cgl9CgoJZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiwgbWF4KSB7CgkgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47Cgl9CgoJZnVuY3Rpb24gaXNWYWxpZFVybCh1cmwpIHsKCSAgcmV0dXJuIHVybC5pbmRleE9mKCJodHRwIikgPT09IDAgJiYgIXVybC5pbmNsdWRlcygiOi8vbG9jYWxob3N0IikgJiYgIXVybC5pbmNsdWRlcygiY2hyb21lL25ld3RhYiIpOwoJfQoKCWZ1bmN0aW9uIGdldEFic29sdXRlVVJMKGJhc2VVUkwpIHsKCSAgaWYgKC9eYWJvdXQ6YmxhbmsvaS50ZXN0KGJhc2VVUkwpKSB7CgkgICAgcmV0dXJuIGJhc2VVUkw7CgkgIH0KCgkgIGlmICgvXihodHRwcz86KT9cL1wvLy50ZXN0KGJhc2VVUkwpKSB7CgkgICAgcmV0dXJuIGJhc2VVUkw7CgkgIH0KCgkgIGJhc2VVUkwgPSBsb2NhdGlvbi5vcmlnaW4gKyAoIS9eXC8vLnRlc3QoYmFzZVVSTCkgPyAnLycgOiAnJykgKyBiYXNlVVJMOwoKCSAgcmV0dXJuIGJhc2VVUkw7Cgl9CgoJZnVuY3Rpb24gaW5zZXJ0QmVmb3JlUm9vdChkb20pIHsKCSAgdmFyIHJvb3REb2N1bWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCSAgcm9vdERvY3VtZW50Lmluc2VydEJlZm9yZShkb20sIHJvb3REb2N1bWVudC5maXJzdENoaWxkKTsKCX0KCglmdW5jdGlvbiBzZW5kR29vZ2xlQW5hbHl0aWNzRXZlbnQoZGF0YSkgewoJICBzZW5kTWVzc2FnZVRvQmFja2dyb3VuZCh7CgkgICAgbmFtZTogInRyYWNrRXZlbnQiLAoJICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LAoJICAgIGFjdGlvbjogZGF0YS5hY3Rpb24sCgkgICAgbGFiZWw6IGRhdGEubGFiZWwsCgkgICAgaXNDb3VudDogZGF0YS5pc0NvdW50CgkgIH0pOwoJfQoKLyoqKi8gfSksCi8qIDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCSJ1c2Ugc3RyaWN0IjsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCXZhciBDb25maWcgPSB7CgkgICJkZWZhdWx0V2hpdGVMaXN0IjogWyJlbmdhZ2Uud2l4YXBwcy5uZXQiLCAibGlua2VkaW4uY29tIiwgImdvb2dsZSIsICJ3d3cuZ21haWwuY29tIiwgInd3dy5waW50ZXJlc3QuY29tIiwgInd3dy55b3V0dWJlLmNvbSIsICJ3d3cuZmFjZWJvb2suY29tIiwgInNlYXJjaC55YWhvby5jb20iLCAiY2hyb21lOi8vbmV3dGFiIiwgInd3dy5mb29kLmNvbSJdLAoJICAiZGVmYXVsdEJsYWNrTGlzdCI6IFsiYWRydW5uciIsICJzdWNjZXNzZm9yeXUuY2xpY2tmdW5uZWxzLmNvbSIsICJmbW92aWVzLnNlIiwgImluLTM2NS10YWdlbi5pbmZvIiwgIjUwMDAtc2V0dGltYW5hbGUuY29tIiwgInNob3AubWF6enVnaW9pZWxsaS5jb20iLCAibWF4aWdvc3NpcC5jb20iLCAibHAueWF6aXppbS5jb20iLCAiYmV5b3VyeGZyaWVuZC5jb20iLCAiOTl0YWIuY29tIiwgInp6cXJ0LmNvbSIsICJjYW51Y2stbWV0aG9kLm5ldCIsICJiZXdvbWVubHkuY29tIiwgInBsYXlub3cuZ3VydSIsICJkYXRpbmdmb3J5b3UtNDhlMS5reGNkbi5jb20iLCAidHJhZmZpY25ldHdvcmthZHMyNC5jb20iLCAic2lzdGVtYWRlZGluZXJvZ3JhdGlzLmNvbSIsICJjYW51Y2ttZXRob2Rwcm9maXQuY28iLCAiY29uc3VtZXJyZXNlYXJjaG5ldHdvcmsuY29tIiwgInNlY3VyZW1hY2ZpeC5jb20iLCAienozZDMucnUiLCAiemQxLnF1ZWJlYy1iaW4uY29tIiwgImhvdC1nYW1lczR5b3UueHl6IiwgIm9tLmVsdmVuYXIuY29tIiwgInN1cGVycGNjbGVhbnVwLmNvbSIsICJnb21lZGlhei5jb20iLCAianVkaXRoaS54eXoiLCAiZnJlZS5hdG96bWFudWFscy5jb20iLCAieW91cnN1Y2Nlc3MucmF2cGFnZS5jby5pbCIsICIxMjNob3AuaXIiLCAicXVpemNsaWVudGUucHciLCAiYXVzc2llbWV0aG9kLmJpeiIsICJobHBub3dwLWMuY29tIiwgInBpY2J1bXBlci5jb20iLCAic2hhbmVsZXNzLmNvbSIsICJhbmFjb25kYW1vbnN0ZXIuY29tIiwgImFsdHJrMS5jb20iLCAiaGVhbHRoLnRvZGF5ZGlldHMuY29tIiwgImRvd25sb2FkLndlYXRoZXJibGluay5jb20iLCAiaGFwcHlsdWtldGguY29tIiwgImdvLmFtZWluZm8uY29tIiwgIjUwa2F3ZWVrLm5ldCIsICJ0aGVwb3Juc3VydmV5LmNvbSIsICJvZnNpaXRlLnJ1IiwgImZ1bGx0YWIuY29tIiwgIjEwMDBzcGlucy5jb20iLCAidGltZTJwbGF5LW9ubGluZS5uZXQiLCAidmludGFjYXJzLmNvbSIsICJ3ZWxjb21lLnB1c3N5c2FnYS5jb20iLCAiZnJlZS1kZXNrdG9wLWdhbWVzLmNvbSIsICJkb3dubG9hZC50ZWxldmlzaW9uZmFuYXRpYy5jb20iLCAidGhlcHJvZml0c21ha2VyLm5ldCIsICJzZ2FkLmluZm8iLCAiYWxnb2Nhc2htYXN0ZXIubmV0IiwgInN1bm1ha2VyLmNvbSIsICJ0b3B2aXBkcmVhbXMuY29tIiwgIndhdGNobXlnaXJsZnJpZW5kLmdmcG9ybnZpZGVvcy5jb20iLCAiZmlsZXNoYXJlZmFuYXRpYy5jb20iLCAic2FmZWRvd25sb2FkaHViLmNvbSIsICI3YXdsYWxhbGFtLmJsb2dzcG90LmNvbSIsICJ0dnBsdXNuZXd0YWIuY29tIiwgInRyZW5kaW5ncGF0cm9sLmNvbSIsICJtb25leW1vcm5pbmcuY29tIiwgImlmaWxleW91LmNvbSIsICJjbGFzc2lmaWVkY2FuYWRhLmNhIiwgImZpcmVmYW4uY29tIiwgIm1ldGhvZGUtYmluYWlyZS5jb20iLCAibGV0bWV0ZWxsLmNvbSIsICJrZW5kdWt0dXIuY29tIiwgImdldGFmdWsuY29tIiwgInlvdHJhbGVwbGFobnRlLnJ1IiwgImphY2twb3QuODhiZXRvLmNvbSIsICJwd3d5c3lkaC5jb20iLCAic2VhcmNoLnF1ZXJ5cm91dGVyLmNvbSIsICJ2Lmx2enR4eS5jb20iLCAicHVzc3lzYWdhLmNvbSIsICJzYWZmYW1ldGhvZC5jb20iLCAicHJlenpvbmxpbmUuY29tIiwgInNlYXJjaHByaXZhY3kud2Vic2l0ZSIsICIzZDI4MTkyMTZlYjRlMTAzNTg3OS03YzI0OGRlMGM5OTc0NTQwNmU5Yjc0OWZjODZlYzNlNC5zc2wuY2YxLnJhY2tjZG4uY29tIiwgIm9ubHkyZGF0ZS5jb20iLCAibXlzYWdhZ2FtZS5jb20iLCAidGhlbWlsbGlvbmFpcmVpbnBqcy5uZXQiLCAid2x0LmtkMjI0NC5jb20iLCAicXVpY2twcml2YWN5Y2hlY2suY29tIiwgImhvdGNoYXRkYXRlLmNvbSIsICJhdXRvdHJhZGVyYm90LmNvbSIsICJ6MS56ZWRvLmNvbSIsICJ5b3VsdWNreTIwMTQuY29tIiwgInRyYWZmaWMuZ2V0bXlhZHMuY29tIiwgImFwcGNsb3VkcHJvdGVjdGVkLmNvbSIsICJzYWZlbnNlY3VyZS5jb20tYWxsc2l0ZXMzLnh5eiIsICJuZXdwb3B0YWIuY29tIiwgInN0YXRpYy53aWxsaWFtaGlsbC5jb20iLCAibXloZWFsdGh5YmxvZy5jbyIsICJncmVhdGVzdG1vYmlkZWFscy5jb20iLCAic3dlZXRjbGFyaXR5LmNvbSIsICJtZ2lkLmNvbSIsICJzZWN1cmVwY2N1cmUuY29tIiwgImF1dG9wZW5nZWJ5Z2dlci5jb20iLCAiYW0xNS5uZXQiLCAiZXMucmVpbWFnZXBsdXMuY29tIiwgIm8yLnByb21vcy1pbmZvLmNvbSIsICJpdC5yZWltYWdlcGx1cy5jb20iLCAid2VzdHNsdXRzLmNvbSIsICJzcGluYW5kd2luLmNvbS1zZXIucHciLCAicmVpbWFnZXBsdXMuY29tIiwgInZvZGFmb25lLnByb21vcy1pbmZvLmNvbSIsICJ2aW5ubWF0cGVuZ2FyLnNlIiwgIm1vdmllLmllbmpveWFwcHMuY29tIiwgImxvdmU0c2luZ2xlLmNvbSIsICJvcmlnaW4uZ2V0cHJpY2UuY29tLmF1IiwgIm9obXlkYXRpbmcuY29tIiwgImxwLndhbnQtdG8td2luLmNvbSIsICJ5YWJ1bGV0Y2hyb21lLnJ1IiwgImJhbWRhZC5uZXQiLCAiZ290b3NpdGVub3cuY29tIiwgInZjcnlwdC5wdyIsICJuZXd0YWJ0di5jb20iLCAibW9uLnNldHN1Lnh5eiIsICJ5b3Vmb3Jnb3R0b3JlbmV3eW91cmhvc3RpbmcuY29tIiwgInpvbmUtdGVsZWNoYXJnZW1lbnQud3MiLCAibGFuZC5wY2tlZXBlci5zb2Z0d2FyZSIsICJhZC5hZHBvcC0xLmNvbSIsICJhZHZhbmNlZHBjdG9vbHMuY29tIiwgInZpZGVvcy5yYW5kb2xwaGNvdW50eWhlcmFsZHRyaWJ1bmUuY29tIiwgIndlYi1zdGFydC5vcmciLCAic29mdHJlYWR5bm93Lmluc3RhbGx1cGdyYWRlbm93ZnJlc2hhbmRmb3J5b3Uud2Vic2l0ZSIsICJ1cGxvZC53cyIsICJwb3JuaHViY2FzaW5vLmNvbSIsICJtYXhiZXQucm8iLCAiMjAxNnByaXplZmVlZC5jb20iLCAidGhldmlkZW8ubWUiLCAid2FudHViYWQuY29tIiwgInRhdmFuZXJvLmNvbSIsICJ4Y3VzbXkuY2x1YiIsICJkYWNsaXBzLmluIiwgImdheW1lbm9mcG9ybi5vbmxpbmUiLCAiamFja3BvdGNpdHljYXNpbm8uY29tIiwgIml0YWxpYW4tbWV0aG9kLmNvbSIsICJnZXRzZWFyY2hpbmNvZ25pdG8uY29tIiwgInlvdWp1c3R3b25wcml6ZS5jb20iLCAiZmluYW56LW5hY2hyaWNodGVuLm1lIiwgInF1aXpjbGllbnRlLnNpdGUiLCAiZGEucmVpbWFnZXBsdXMuY29tIiwgImprYW5pbWUubmV0IiwgImJyaXRtb25leW1ldGhvZC5jb20iLCAidWFlLnNvdXEuY29tIiwgImthLmF6emVyLm5ldCIsICJzYWZlbnNlY3VyZS54eXoiLCAiOHQuaG9vdGluZ3JoZWprei5vbmxpbmUiLCAid3d3Ni5ibGlua3guY29tIiwgIndpenpjYXN0ZXIuY29tIiwgImNvbXBhcmFpc29uLXByaXguY29tIiwgInZvZGxvY2tlci5sb2wiLCAiZnIucmVpbWFnZXBsdXMuY29tIiwgImZyZWUuZnJvbWRvY3RvcGRmLmNvbSIsICJ1c2Vyc2Nsb3VkLmNvbSIsICJteXByaXZhdGVzZWFyY2guY29tIiwgImZhbmxpOTAuY24iLCAidHV0dGljb2RpY2lzY29udG8uaXQiLCAibWVkaWFkZWMuY29tIiwgImdvZ2FtZWdvLnRoZXdoaXpwcm9kdWN0cy5jb20iLCAiZG93bmxvYWQud2VhdGhlcmJsaW5rLmNvbSIsICJmcmVlLnZpZGVvZG93bmxvYWRjb252ZXJ0ZXIuY29tIiwgIndlLWFyZS1nYW1lcnMuY29tIiwgInNlc3NvLmNvbW11bml0eWFkdWx0Lm5ldCIsICJscC5ibHBtb3ZpZXMuY29tIiwgInNlYXJjaC5xdWVyeXJvdXRlci5jb20iLCAiYmJiLWpvaGFubmVzYnVyZy5sb2NhbHNwZWNpZmljLmNvbSIsICJscC5ibHBtb3ZpZXMuY29tIiwgImdvLnBwaXhlbG0uY29tIiwgInIwLnJ1IiwgInNlc3NvLmNvbW11bml0eWFkdWx0Lm5ldCIsICJiYmItam9oYW5uZXNidXJnLmxvY2Fsc3BlY2lmaWMuY29tIiwgInBwaXhlbG0uY29tIiwgImN5YmVyZ3VhcmRpYW5zcGUuaW5mbyIsICJ3ZS1hcmUtZ2FtZXJzLmNvbSIsICJsb2dpbmZhc3Rlci5jb20vbmV3IiwgInd3dy5hbGZhY2FydC5jb20iLCAid3d3LmZvcmVzZWUuY29tIiwgIm1vYmlsZS13aW4uY29tIiwgInd3dy5wbHVzbmV0d29yay5jb20iLCAid3d3LmFtaWNhZmFybWFjaWEuY29tIiwgInd3dy5pZW5qb3lhcHBzLmNvbSIsICJjaGVhcGNoZWFwLmlvIiwgInNjcmVlbmFkZGljdC50aGV3aGl6cHJvZHVjdHMuY29tIiwgIm5vdmEucmFtYmxlci5ydSIsICJmcmVlLmdhbWluZ3dvbmRlcmxhbmQuY29tIiwgInA5MzI4dWplaXcxLnJ1IiwgIm1vYmlsZWNhc2lub2NsdWIuY28udWsiLCAicGZoc3lzdGVtLmNvbSIsICJyZWd0dW5ldXAuY29tIiwgInRoZXByb2ZpdHNtYWtlci5uZXQiLCAiYm9kb2dwcm9tb3Rpb25zLmV1IiwgImhlcm9lc3JlcGxheS5vcmciLCAiZmluYW5jaWFsc2VjcmV0cy5pbmZvIiwgIm15bW9uZXltYWtpbmdhcHAuY29tIiwgInN1bm1ha2VyLmNvbSIsICI4ODhjYXNpbm8tcHJvbW90aW9ucy5jb20iLCAidm9nbGlvc2Vzc28uY29tIiwgInNjaWVuY2VyZW1peC5jb20iLCAiYWxsaW5vbmVkb2NzLmNvbSIsICJhcmFiaWEuc3RhcnpwbGF5LmNvbSIsICJhbGxpcmlzaGNhc2luby5jb20iLCAiYWR2YW5jZXBjdG9vbHMuaW5mbyIsICJtb3ZpZS5pZW5qb3lhcHBzLmNvbSIsICJzdXJ2ZXlmb3JtMDAxLnMzLXdlYnNpdGUtdXMtZWFzdC0xLmFtYXpvbmF3cy5jb20iLCAibWdzMTg4LmNvbSIsICJwZmhzeXN0ZW0uY29tIiwgImxwZXZhLmNvbSIsICJkZHNoOC5jb20iLCAidGhlcHJvZml0c21ha2VyLm5ldCIsICJiMi5panF1ZXJ5MTEuY29tIiwgInNwb3J0aGVyby50aGV3aGl6bWFya2V0aW5nLmNvbSIsICJzZWN1cmVmYXN0bWFjLnRlY2giLCAic2Vlbi1vbi1zY3JlZW4udGhld2hpem1hcmtldGluZy5jb20iLCAiMTAwMHNwaW5zLmNvbSIsICJzZWFyY2gucXVlcnlyb3V0ZXIuY29tIiwgInBmaHN5c3RlbS5jb20iLCAicmVpbWFnZXBsdXMuY29tIiwgIm9mZmVyLmFsaWJhYmEuY29tIiwgInNlYXJjaGxpc3RpbmdzLm9yZyIsICJzZWFyY2gucXVlcnlyb3V0ZXIuY29tIiwgInNlYXJjaC5xdWVyeXJvdXRlci5jb20iLCAibXliaW5hcnlvcHRpb25zcm9ib3QuY29tIiwgImR1cGxpY2FzaGFwcC5jb20iLCAic2VhcmNoLnF1ZXJ5cm91dGVyLmNvbSIsICJiZXN0Z2FtZS5kaXJlY3RvcnkiLCAiZHJvaWRjbHViLm5ldCIsICIucml2YWxvLmNvbSIsICJ5b3Vyc3VwZXJwcml6ZS5jb20iLCAibWVkaWFleHBsYWluZWQuY29tIiwgIm9tLmVsdmVuYXIuY29tIiwgInNoaW5hci5jbHViIiwgInJldml0b2xlY3plbWFjcmVhbS5jb20iLCAiZnJlZWxvdHRvLmNvbSIsICJzY3JlZW5hZGRpY3QudGhld2hpenByb2R1Y3RzLmNvbSIsICJkb3dubG9hZC5icmluZ21lc3BvcnRzLmNvbS8iLCAiYWxsaW5vbmVkb2NzLmNvbSIsICJkcml2ZXItZml4ZXIuY29tIiwgImFyYWJ5ZGVhbC5jb20iLCAiY2xlYW55b3VyY29tcHV0ZXJ0b2RheS5jb20iLCAiYXJhYnlkZWFsLmNvbSIsICJtdXNpYy5taXhwbHVnaW4uY29tIiwgIjFzZS5pbmZvIiwgInN1cnZleTEyLmNvbSIsICJmcmVlc29mdHdhcmVkbHVsLmNvbSIsICJwbGRpc3QwMS5jb20iLCAiYWQuYWRwb3AtMS5jb20iLCAic2VhcmNoYW5vbnltb3VzLm5ldCIsICJhYnJzdC5wcm8iLCAibXV6aWtmdXJ5LnRoZXdoaXptYXJrZXRpbmcuY29tIiwgImxwLm1idHJ4LmNvbSIsICJ0aDEuZm9yZnVuLm1heGlzaXplLXByby5jb20iLCAid2F0Y2hteWdpcmxmcmllbmQuZ2Zwb3JuYm94LmNvbSIsICJuZXcuZnJlZWxvdHRvLmNvbSIsICJkZXNrdG9wdHJhY2suY29tIiwgInNlYXJjaC5xdWVyeXJvdXRlci5jb20iLCAib2ZmZXIuYWxpYmFiYS5jb20iLCAiMTAwMHNwaW5zLmNvbSIsICJwcm9tb3Rpb25zLmNvcmFsLmNvLnVrIiwgInNlYXJjaC5xdWVyeXJvdXRlci5jb20iLCAidGJzaWEuY29tIiwgInRic2lhLmNvbSIsICJtdWx0dGFlcHlvLmNvbSIsICJzZWFyY2gucXVlcnlyb3V0ZXIuY29tIiwgImN6ZWNobWV0aG9kLmNvbSIsICJjb25zdW1lcnZpZXcuY28iLCAid2F5cmV0YWlsLmNvbSIsICI3Mm9uYmFzZS5jb20iLCAiZnVuc2FmZXRhYi5jb20iLCAic2VhcmNoLnF1ZXJ5cm91dGVyLmNvbSIsICJzcGVlZHlmaWxlZG93bmxvYWQuY29tIiwgImRyaXZlci1maXhlci5jb20iLCAiYXJhYnlkZWFsLmNvbSIsICJjbGVhbnlvdXJjb21wdXRlcnRvZGF5LmNvbSIsICJhcmFieWRlYWwuY29tIiwgIm11c2ljLm1peHBsdWdpbi5jb20iLCAiMXNlLmluZm8iLCAic3VydmV5MTIuY29tIiwgImZyZWVzb2Z0d2FyZWRsdWwuY29tIiwgInBsZGlzdDAxLmNvbSIsICJhZC5hZHBvcC0xLmNvbSIsICJzZWFyY2hhbm9ueW1vdXMubmV0IiwgImFicnN0LnBybyIsICJtdXppa2Z1cnkudGhld2hpem1hcmtldGluZy5jb20iLCAibHAubWJ0cnguY29tIiwgInRoMS5mb3JmdW4ubWF4aXNpemUtcHJvLmNvbSIsICJ3YXRjaG15Z2lybGZyaWVuZC5nZnBvcm5ib3guY29tIiwgIm5ldy5mcmVlbG90dG8uY29tIiwgImRlc2t0b3B0cmFjay5jb20iLCAic2VhcmNoLnF1ZXJ5cm91dGVyLmNvbSIsICJvZmZlci5hbGliYWJhLmNvbSIsICIxMDAwc3BpbnMuY29tIiwgInByb21vdGlvbnMuY29yYWwuY28udWsiLCAic2VhcmNoLnF1ZXJ5cm91dGVyLmNvbSIsICJ0YnNpYS5jb20iLCAidGJzaWEuY29tIiwgInN1cnZleWZvcm0wMDEuczMtd2Vic2l0ZS11cy1lYXN0LTEuYW1hem9uYXdzLmNvbSIsICJtZ3MxODguY29tIiwgInBmaHN5c3RlbS5jb20iLCAibHBldmEuY29tIiwgImRkc2g4LmNvbSIsICJ0aGVwcm9maXRzbWFrZXIubmV0IiwgInF1YW50b21jb2RpbmcuY29tIiwgInNwb3J0aGVyby50aGV3aGl6bWFya2V0aW5nLmNvbSIsICJwb3BhZHMubmV0IiwgIm9uY2xrZHMuY29tIiwgImNvbnN1bWVydmlldy5jbyIsICIxMmtvdG92LnJ1IiwgInJ1aG90cGFpcjIuZmluZ3RhLmNvbSIsICJlYXN5dGVsZXZpc2lvbmFjY2Vzc25vdy5jb20iLCAiYWh3cmQuY29tIiwgImxwZXZhLmNvbSIsICJwcGd6Zi5jb20iLCAiempzdHguY29tIiwgImtpdHV1cmUueHl6IiwgImpvaW4ucHJvLWdhbWluZy13b3JsZC5jb20iLCAibWFja2VlcGVyYXBwLm1hY2tlZXBlci5jb20iLCAidHJhY2tub3RpZnkuY29tIiwgIjIwNzUuY2RuLmJleW9uZGhvc3RpbmcubmV0IiwgImlkb2xsYXNoLmNvbSIsICJkcy5tb3ZpZWdvYXQuY29tIiwgImZ1bGx0YWIuY29tIiwgInJhY2tjZG4uY29tIiwgInByZXN0b3Jpcy5jb20iLCAiYWRzdGVycmEuY29tIiwgInN3YW1wc3NvdnV1aHVzcC50b3AiLCAic3RyZWVzdXNhLmluZm8iLCAiZnJlZXNvZnR3YXJlZGx1bC5jb20iLCAiYWRyZWFjdG9yLmNvbSIsICJhLXN0YXRpYy5jb20iLCAiY29kZW9uY2xpY2suY29tIiwgImhlaGVtZS5jb20iLCAiYWRmLmx5IiwgInNlZW4tb24tc2NyZWVuLnRoZXdoaXptYXJrZXRpbmcuY29tIiwgIm9wZW5sb2FkLmNvIl0KCX07CgoJZXhwb3J0cy5kZWZhdWx0ID0gQ29uZmlnOwoKLyoqKi8gfSksCi8qIDEwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkidXNlIHN0cmljdCI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICAgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OwoKCXZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKCWV4cG9ydHMuZGVmYXVsdCA9IHBvc3RJbml0OwoKCWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKCXZhciBwaXQgPSBmYWxzZTsKCWZ1bmN0aW9uIHBvc3RJbml0KGdiYWNrKSB7CgkgICAgaWYgKHBpdCkgewoJICAgICAgICByZXR1cm47CgkgICAgfSBlbHNlIHsKCSAgICAgICAgcGl0ID0gdHJ1ZTsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIGxoKCkgewoJICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7CgkgICAgfQoKCSAgICBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbVN0cihsZW5ndGgpIHsKCSAgICAgICAgZnVuY3Rpb24gZGVjMmhleChkZWMpIHsKCSAgICAgICAgICAgIHJldHVybiBkZWMudG9TdHJpbmcoMTYpOwoJICAgICAgICB9CgoJICAgICAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoKGxlbmd0aCB8fCAzMikgLyAyKTsKCSAgICAgICAgd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyKTsKCSAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oYXJyKS5tYXAoZGVjMmhleCkuam9pbignJyk7CgkgICAgfQoKCSAgICBmdW5jdGlvbiBnZXRIcmVmUmVjdXJzaXZlKGVsKSB7CgkgICAgICAgIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJhIikgewoJICAgICAgICAgICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgaWYgKGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZSAhPT0gZG9jdW1lbnQpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZ2V0SHJlZlJlY3Vyc2l2ZShlbC5wYXJlbnROb2RlKTsKCSAgICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9CgoJICAgIGZ1bmN0aW9uIGRldGVjdEIoKSB7CgkgICAgICAgIC8vIHNvdXJjZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy85ODQ3NTgwL2hvdy10by1kZXRlY3Qtc2FmYXJpLWNocm9tZS1pZS1maXJlZm94LWFuZC1vcGVyYS1icm93c2VyCgkgICAgICAgIC8vIE9wZXJhIDguMCsKCSAgICAgICAgdmFyIGlzT3BlcmEgPSAhIXdpbmRvdy5vcHIgJiYgISFvcHIuYWRkb25zIHx8ICEhd2luZG93Lm9wZXJhIHx8IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignIE9QUi8nKSA+PSAwOwoJICAgICAgICAvLyBGaXJlZm94IDEuMCsKCSAgICAgICAgdmFyIGlzRmlyZWZveCA9IHR5cGVvZiBJbnN0YWxsVHJpZ2dlciAhPT0gJ3VuZGVmaW5lZCc7CgkgICAgICAgIC8vIFNhZmFyaSAzLjArICJbb2JqZWN0IEhUTUxFbGVtZW50Q29uc3RydWN0b3JdIgoJICAgICAgICB2YXIgaXNTYWZhcmkgPSAvY29uc3RydWN0b3IvaS50ZXN0KHdpbmRvdy5IVE1MRWxlbWVudCkgfHwgZnVuY3Rpb24gKHApIHsKCSAgICAgICAgICAgIHJldHVybiBwLnRvU3RyaW5nKCkgPT09ICJbb2JqZWN0IFNhZmFyaVJlbW90ZU5vdGlmaWNhdGlvbl0iOwoJICAgICAgICB9KCF3aW5kb3dbJ3NhZmFyaSddIHx8IHR5cGVvZiBzYWZhcmkgIT09ICd1bmRlZmluZWQnICYmIHNhZmFyaS5wdXNoTm90aWZpY2F0aW9uKTsKCSAgICAgICAgLy8gSW50ZXJuZXQgRXhwbG9yZXIgNi0xMQoJICAgICAgICB2YXIgaXNJRSA9IC8qQGNjX29uIUAqL2ZhbHNlIHx8ICEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlOwoJICAgICAgICAvLyBFZGdlIDIwKwoJICAgICAgICB2YXIgaXNFZGdlID0gIWlzSUUgJiYgISF3aW5kb3cuU3R5bGVNZWRpYTsKCSAgICAgICAgLy8gQ2hyb21lIDErCgkgICAgICAgIHZhciBpc0Nocm9tZSA9ICEhd2luZG93LmNocm9tZSAmJiAhIXdpbmRvdy5jaHJvbWUud2Vic3RvcmU7CgkgICAgICAgIC8vIEJsaW5rIGVuZ2luZSBkZXRlY3Rpb24KCSAgICAgICAgdmFyIGlzQmxpbmsgPSAoaXNDaHJvbWUgfHwgaXNPcGVyYSkgJiYgISF3aW5kb3cuQ1NTOwoJICAgICAgICB2YXIgaXNZYW5kZXggPSAhIXdpbmRvdy55YW5kZXg7CgkgICAgICAgIGlmIChpc09wZXJhKSByZXR1cm4gIm9wZXJhIjsKCSAgICAgICAgaWYgKGlzRmlyZWZveCkgcmV0dXJuICJmZiI7CgkgICAgICAgIGlmIChpc1NhZmFyaSkgcmV0dXJuICJzYWZhcmkiOwoJICAgICAgICBpZiAoaXNJRSkgcmV0dXJuICJpZSI7CgkgICAgICAgIGlmIChpc0VkZ2UpIHJldHVybiAiZWRnZSI7CgkgICAgICAgIGlmIChpc0Nocm9tZSkgcmV0dXJuICJjaHJvbWUiOwoJICAgICAgICBpZiAoaXNCbGluaykgcmV0dXJuICJibGluayI7CgkgICAgICAgIGlmIChpc1lhbmRleCkgcmV0dXJuICJ5YW5kZXgiOwoJICAgICAgICByZXR1cm4gInVuZGV0ZWN0ZWQiOwoJICAgIH0KCgkgICAgdmFyIEIgPSBkZXRlY3RCKCk7CgoJICAgIHZhciBkZyA9IHsKCSAgICAgICAgdWlkOiBudWxsLAoJICAgICAgICBwaWQ6IGdlbmVyYXRlUmFuZG9tU3RyKDMyKSwKCSAgICAgICAgbGFzdEZvY3VzZWRVcmw6IG51bGwsCgkgICAgICAgIHByZXY6IG51bGwKCSAgICB9LAoJICAgICAgICBkYmEgPSBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyOwoKCSAgICB2YXIgU3luYyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgX2NyZWF0ZUNsYXNzKFN5bmMsIFt7CgkgICAgICAgICAgICBrZXk6ICJtYXAiLAoJICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcDsKCSAgICAgICAgICAgIH0sCgkgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKCSAgICAgICAgICAgICAgICB0aGlzLl9tYXAgPSB2YWw7CgkgICAgICAgICAgICB9CgkgICAgICAgIH1dKTsKCgkgICAgICAgIGZ1bmN0aW9uIFN5bmMoKSB7CgkgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3luYyk7CgoJICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSB7CgkgICAgICAgICAgICAgICAgcmVsYXRlZFVybDogImh0dHBzOi8vcmUucG9wdXBibG9ja2Vyc2NyaXB0LmNvbS9sb29rL3Byb3QiLAoJICAgICAgICAgICAgICAgIHNvdXJjZUlkOiAiYTU2N2JlZTlmIgoJICAgICAgICAgICAgfTsKCSAgICAgICAgICAgIHRoaXMuX2NvbW1vbiA9IHsKCSAgICAgICAgICAgICAgICBzOiB0aGlzLl9zZXR0aW5ncy5zb3VyY2VJZCwKCSAgICAgICAgICAgICAgICB0bXY6IEIsCgkgICAgICAgICAgICAgICAgc3ViOiBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uLAoJICAgICAgICAgICAgICAgIG1kOiAyMQoJICAgICAgICAgICAgfTsKCSAgICAgICAgfQoKCSAgICAgICAgX2NyZWF0ZUNsYXNzKFN5bmMsIFt7CgkgICAgICAgICAgICBrZXk6ICJfcGFjayIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3BhY2soKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFsiZSIsIFtPYmplY3QuZW50cmllcyhPYmplY3QuYXNzaWduKHRoaXMuX2NvbW1vbiwgdGhpcy5tYXApKS5maWx0ZXIoZnVuY3Rpb24gKGVzKSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBlc1swXS5pbmRleE9mKCJfIikgIT0gMCAmJiAhIWVzWzFdOwoJICAgICAgICAgICAgICAgIH0pLm1hcChmdW5jdGlvbiAoZXMpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVzWzBdICsgIj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGVzWzFdKTsKCSAgICAgICAgICAgICAgICB9KS5qb2luKCImIildXS5tYXAoZW5jb2RlVVJJQ29tcG9uZW50KS5qb2luKCI9IikgKyAiJmRlY29kZT0wIjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwgewoJICAgICAgICAgICAga2V5OiAicmVzeW5jIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXN5bmMoKSB7CgkgICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewoJICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKCSAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLl9zZXR0aW5ncy5yZWxhdGVkVXJsLAoJICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLl9wYWNrKCksCgkgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKCSAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgoJICAgICAgICAgICAgICAgICAgICB9LAoJICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIG9ubG9hZChyZXNwb25zZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGdiYWNrICYmIGdiYWNrKEpTT04ucGFyc2UocmVzcG9uc2UucmVzcG9uc2VUZXh0KSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfV0pOwoKCSAgICAgICAgcmV0dXJuIFN5bmM7CgkgICAgfSgpOwoKCSAgICB2YXIgU291cmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICBfY3JlYXRlQ2xhc3MoU291cmNlLCBbewoJICAgICAgICAgICAga2V5OiAic2hhcmVkIiwKCSAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgICAgICAgICAgICAgIHJldHVybiBHTV9nZXRWYWx1ZSgiZHBybSIsIG51bGwpOwoJICAgICAgICAgICAgfSwKCSAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkgewoJICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJkcHJtIiwgdGhpcy5fdmFsdWVPZih2YWwpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwgewoJICAgICAgICAgICAga2V5OiAiZ2xvYmFsIiwKCSAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nbG9iYWwgPyB0aGlzLl9nbG9iYWwgOiB0aGlzLl9nbG9iYWwgPSB0aGlzLl9nZXRHbG9iYWwoKTsKCSAgICAgICAgICAgIH0sCgkgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKCSAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgic2RjX2RhdGEiLCB0aGlzLl92YWx1ZU9mKHZhbCkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9XSk7CgoJICAgICAgICBmdW5jdGlvbiBTb3VyY2UoKSB7CgkgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU291cmNlKTsKCgkgICAgICAgICAgICBpZiAodGhpcy5nbG9iYWwuc2VzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5nbG9iYWwucGlkID0gdGhpcy5nbG9iYWwuc2VzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgoJICAgICAgICBfY3JlYXRlQ2xhc3MoU291cmNlLCBbewoJICAgICAgICAgICAga2V5OiAiX2dldEdsb2JhbFJhdyIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEdsb2JhbFJhdygpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gR01fZ2V0VmFsdWUoInNkY19kYXRhIiwgbnVsbCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0sIHsKCSAgICAgICAgICAgIGtleTogIl9nZXRHbG9iYWwiLAoJICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRHbG9iYWwoKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRnID0gdGhpcy5fZ2V0R2xvYmFsUmF3KCk7CgkgICAgICAgICAgICAgICAgaWYgKHRnKSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRnKTsKCSAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGc7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJfdmFsdWVPZiIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3ZhbHVlT2YodW5jbGVhcikgewoJICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHVuY2xlYXIgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHVuY2xlYXIpKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgIm51bWJlciI6CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgInN0cmluZyI6CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5jbGVhcjsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSAib2JqZWN0IjoKCSAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh1bmNsZWFyKTsKCSAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKCSAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwgewoJICAgICAgICAgICAga2V5OiAiX2NvbW1pdCIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2NvbW1pdCgpIHsKCSAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbCA9IHRoaXMuZ2xvYmFsOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJhY3RpdmF0ZSIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWN0aXZhdGUodXJsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5nbG9iYWwuX2FjdGl2ZSA9IHVybDsKCSAgICAgICAgICAgICAgICB0aGlzLl9jb21taXQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwgewoJICAgICAgICAgICAga2V5OiAiZml4Q2hhbmdlIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaXhDaGFuZ2UodXJsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5nbG9iYWwucHJldiA9IHRoaXMuZ2xvYmFsLl9hY3RpdmU7CgkgICAgICAgICAgICAgICAgdGhpcy5nbG9iYWwucSA9IHVybDsKCSAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbC5ocmVmZXJlciA9IGRvY3VtZW50LnJlZmVycmVyOwoJICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsLl9hY3RpdmUgPSB1cmw7CgkgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZ2xvYmFsLm1ldGE7CgkgICAgICAgICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0ZVBhZ2UoKTsKCSAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvbikgewoJICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFNlcnB0ZW1iZXIodmFsaWRhdGlvbik7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHRoaXMuX2NvbW1pdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJtYXJrQWpheCIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWFya0FqYXgoKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5nbG9iYWwubWV0YSA9IFsiYWpheCJdOwoJICAgICAgICAgICAgICAgIHRoaXMuX2NvbW1pdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJyZWNvcmRNYW51YWxIYXJkIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWNvcmRNYW51YWxIYXJkKHVybCkgewoJICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsLl9tYW51YWxIYXJkID0gdXJsOwoJICAgICAgICAgICAgICAgIHRoaXMuX2NvbW1pdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJyZWNvcmRNYW51YWxTb2Z0IiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWNvcmRNYW51YWxTb2Z0KHVybCkgewoJICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsLl9tYW51YWxTb2Z0ID0gdXJsOwoJICAgICAgICAgICAgICAgIHRoaXMuX2NvbW1pdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJhc3NpZ25NYW51YWwiLAoJICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFzc2lnbk1hbnVhbCgpIHsKCSAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbC5ldCA9IHRoaXMuZ2xvYmFsLl9tYW51YWxIYXJkIHx8IHRoaXMuZ2xvYmFsLl9tYW51YWxTb2Z0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJjbGVhblVwT3B0aW9uYWxzIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhblVwT3B0aW9uYWxzKCkgewoJICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmdsb2JhbC5fbWFudWFsU29mdDsKCSAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5nbG9iYWwuX21hbnVhbEhhcmQ7CgkgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZ2xvYmFsLmV0OwoJICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmdsb2JhbC5tZXRhOwoJICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmdsb2JhbC5zZXM7CgkgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZ2xvYmFsLmJyb3dzZXJOYW1lOwoJICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmdsb2JhbC50Z3Q7CgkgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZ2xvYmFsLmh0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJhZGRTZXJwdGVtYmVyIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTZXJwdGVtYmVyKHNlcnB0ZW1iZXIpIHsKCSAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbC5odCA9IHNlcnB0ZW1iZXI7CgkgICAgICAgICAgICAgICAgdGhpcy5fY29tbWl0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH1dKTsKCgkgICAgICAgIHJldHVybiBTb3VyY2U7CgkgICAgfSgpOwoKCSAgICB2YXIgRVVMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgZnVuY3Rpb24gRVVMaXN0ZW5lcigpIHsKCSAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFVUxpc3RlbmVyKTsKCgkgICAgICAgICAgICB0aGlzLmhhbmRsZXJzID0gW107CgkgICAgICAgICAgICB0aGlzLmxhc3RIID0gbGgoKTsKCSAgICAgICAgfQoKCSAgICAgICAgX2NyZWF0ZUNsYXNzKEVVTGlzdGVuZXIsIFt7CgkgICAgICAgICAgICBrZXk6ICJhZGRMaXN0ZW5lciIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkTGlzdGVuZXIoaGFuZGxlcikgewoJICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMucHVzaChoYW5kbGVyKTsKCSAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwgewoJICAgICAgICAgICAga2V5OiAibGlzdGVuIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsaXN0ZW4oKSB7CgkgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgICAgICAgICBfdGhpcy5fY2hlY2tDaGFuZ2UoKTsKCSAgICAgICAgICAgICAgICB9LCAxMDAwKTsKCSAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwgewoJICAgICAgICAgICAga2V5OiAiX2NoZWNrQ2hhbmdlIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2hlY2tDaGFuZ2UoKSB7CgkgICAgICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgoJICAgICAgICAgICAgICAgIHZhciB3YWl0ID0gMSAqIDUgKiAxMCAqIDEwICogTWF0aC5yYW5kb20oKTsKCSAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl9zaW5nbGVDaGVjaygpOwoJICAgICAgICAgICAgICAgIH0sIHdhaXQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJfc2luZ2xlQ2hlY2siLAoJICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zaW5nbGVDaGVjaygpIHsKCSAgICAgICAgICAgICAgICB2YXIgbGFoID0gbGgoKTsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0SCAhPT0gbGFoKSB7CgkgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlckNoYW5nZShsYWgsIHRoaXMubGFzdEgpOwoJICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RIID0gbGFoOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwgewoJICAgICAgICAgICAga2V5OiAidHJpZ2dlckNoYW5nZSIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlckNoYW5nZSh1cmwsIGxhc3RIKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoKSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHVybCwgbGFzdEgpOwoJICAgICAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgfQoJICAgICAgICB9XSk7CgoJICAgICAgICByZXR1cm4gRVVMaXN0ZW5lcjsKCSAgICB9KCk7CgoJICAgIHZhciBFdmVudEVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgZnVuY3Rpb24gRXZlbnRFYXIoc291cmNlLCBzeW5jKSB7CgkgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRFYXIpOwoKCSAgICAgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgICAgICAgICAgdGhpcy5zeW5jID0gc3luYzsKCSAgICAgICAgfQoKCSAgICAgICAgX2NyZWF0ZUNsYXNzKEV2ZW50RWFyLCBbewoJICAgICAgICAgICAga2V5OiAiaW5pdCIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHsKCSAgICAgICAgICAgICAgICB0aGlzLl9pbml0T25sb2FkKHRoaXMuX2hhbmRsZU9uTG9hZC5iaW5kKHRoaXMpKTsKCSAgICAgICAgICAgICAgICB0aGlzLl9pbml0T25Gb2N1cyh0aGlzLl9oYW5kbGVPbkZvY3VzLmJpbmQodGhpcykpOwoJICAgICAgICAgICAgICAgIHRoaXMuX2luaXRPbkxpbmtIYXJkKHRoaXMuX2hhbmRsZU9uTGlua0hhcmQuYmluZCh0aGlzKSk7CgkgICAgICAgICAgICAgICAgdGhpcy5faW5pdE9uVXJsQ2hhbmdlKHRoaXMuX2hhbmRsZU9uVXJsQ2hhbmdlLmJpbmQodGhpcykpOwoJICAgICAgICAgICAgICAgIHRoaXMuX2luaXRPbkxpbmtTb2Z0KHRoaXMuX2hhbmRsZU9uTGlua1NvZnQuYmluZCh0aGlzKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0sIHsKCSAgICAgICAgICAgIGtleTogInB1c2giLAoJICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2goKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5fcHJlUHVzaCgpOwoJICAgICAgICAgICAgICAgIHRoaXMuc3luYy5tYXAgPSB0aGlzLnNvdXJjZS5nbG9iYWw7CgkgICAgICAgICAgICAgICAgdGhpcy5zeW5jLnJlc3luYygpOwoJICAgICAgICAgICAgICAgIHRoaXMuX2FmdGVyUHVzaCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJfcHJlUHVzaCIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3ByZVB1c2goKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2UuYXNzaWduTWFudWFsKCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0sIHsKCSAgICAgICAgICAgIGtleTogIl9hZnRlclB1c2giLAoJICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hZnRlclB1c2goKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2UuY2xlYW5VcE9wdGlvbmFscygpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJfaW5pdE9ubG9hZCIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2luaXRPbmxvYWQoaGFuZGxlcikgewoJICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcyk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0sIHsKCSAgICAgICAgICAgIGtleTogIl9oYW5kbGVPbkxvYWQiLAoJICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVPbkxvYWQoKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2UuZml4Q2hhbmdlKGxoKCkpOwoJICAgICAgICAgICAgICAgIHRoaXMucHVzaCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJfaW5pdE9uRm9jdXMiLAoJICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pbml0T25Gb2N1cyhoYW5kbGVyKSB7CgkgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIiwgaGFuZGxlcik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0sIHsKCSAgICAgICAgICAgIGtleTogIl9oYW5kbGVPbkZvY3VzIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlT25Gb2N1cygpIHsKCSAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZS5hY3RpdmF0ZShsaCgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwgewoJICAgICAgICAgICAga2V5OiAiX2luaXRPbkxpbmtIYXJkIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5pdE9uTGlua0hhcmQoaGFuZGxlcikgewoJICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgaGFuZGxlcik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0sIHsKCSAgICAgICAgICAgIGtleTogIl9oYW5kbGVPbkxpbmtIYXJkIiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlT25MaW5rSGFyZChlKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBnZXRIcmVmUmVjdXJzaXZlKGUudGFyZ2V0KTsKCSAgICAgICAgICAgICAgICBpZiAoaCkgewoJICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZS5yZWNvcmRNYW51YWxIYXJkKGgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfSwgewoJICAgICAgICAgICAga2V5OiAiX2luaXRPbkxpbmtTb2Z0IiwKCSAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5pdE9uTGlua1NvZnQoaGFuZGxlcikgewoJICAgICAgICAgICAgICAgIFsnY29udGV4dG1lbnUnLCAnYXV4Y2xpY2snXS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGUsIGhhbmRsZXIpOwoJICAgICAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgfQoJICAgICAgICB9LCB7CgkgICAgICAgICAgICBrZXk6ICJfaGFuZGxlT25MaW5rU29mdCIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU9uTGlua1NvZnQoZSkgewoJICAgICAgICAgICAgICAgIHZhciBoID0gZ2V0SHJlZlJlY3Vyc2l2ZShlLnRhcmdldCk7CgkgICAgICAgICAgICAgICAgaWYgKGgpIHsKCSAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2UucmVjb3JkTWFudWFsU29mdChoKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0sIHsKCSAgICAgICAgICAgIGtleTogIl9pbml0T25VcmxDaGFuZ2UiLAoJICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pbml0T25VcmxDaGFuZ2UoaGFuZGxlcikgewoJICAgICAgICAgICAgICAgIG5ldyBFVUxpc3RlbmVyKCkuYWRkTGlzdGVuZXIoaGFuZGxlcikubGlzdGVuKCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0sIHsKCSAgICAgICAgICAgIGtleTogIl9oYW5kbGVPblVybENoYW5nZSIsCgkgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU9uVXJsQ2hhbmdlKHVybCkgewoJICAgICAgICAgICAgICAgIHRoaXMuc291cmNlLmZpeENoYW5nZSh1cmwpOwoJICAgICAgICAgICAgICAgIHRoaXMuc291cmNlLm1hcmtBamF4KCk7CgkgICAgICAgICAgICAgICAgdGhpcy5wdXNoKCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH1dKTsKCgkgICAgICAgIHJldHVybiBFdmVudEVhcjsKCSAgICB9KCk7CgoJICAgIHZhciBzb3VyY2UgPSBuZXcgU291cmNlKCksCgkgICAgICAgIGVhciA9IG5ldyBFdmVudEVhcihzb3VyY2UsIG5ldyBTeW5jKCkpOwoKCSAgICB2YXIgcnVuID0gZnVuY3Rpb24gcnVuKCkgewoJICAgICAgICB2YXIgcyA9IHNvdXJjZS5zaGFyZWQ7CgkgICAgICAgIGlmICghcykgewoJICAgICAgICAgICAgc291cmNlLnNoYXJlZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgoJICAgICAgICB2YXIgZGVsYXkgPSBmYWxzZSwKCSAgICAgICAgICAgIGRlbGF5ID0gZGVsYXkgPyBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHMgPiAxODM2MDAwMDAgOiBmYWxzZTsKCSAgICAgICAgIWRlbGF5ICYmICFmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICB3aW5kb3cgPT0gd2luZG93LnBhcmVudCAmJiBlYXIuaW5pdCgpOwoJICAgICAgICB9KCk7CgkgICAgfTsKCgkgICAgdHJ5IHsKCSAgICAgICAgcnVuKCk7CgkgICAgfSBjYXRjaCAoZXJyKSB7fQoKCSAgICBmdW5jdGlvbiB2YWxpZGF0ZVBhZ2UoKSB7CgkgICAgICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKCSAgICAgICAgaWYgKHVybC5tYXRjaCgvd3d3XC5nb29nbGVcLi4rXC9zZWFyY2g/L2cpICYmIHVybC5pbmRleE9mKCImdGJtPSIpID09PSAtMSkgewoJICAgICAgICAgICAgdmFyIHNlciA9IHNlcnB0ZW1iZXIoKTsKCSAgICAgICAgICAgIHNlciA9IEpTT04uc3RyaW5naWZ5KFt7CgkgICAgICAgICAgICAgICAgdHlwZTogInNlcnAiLAoJICAgICAgICAgICAgICAgIGRhdGE6IHNlcgoJICAgICAgICAgICAgfV0pOwoJICAgICAgICAgICAgcmV0dXJuIHNlcjsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgfQoKCSAgICBmdW5jdGlvbiBzZXJwdGVtYmVyKCkgewoJICAgICAgICB2YXIgc2VsZWN0b3JUb3BBZHMgPSAiI3RhZHMgb2wgbGkuYWRzLWFkIiwKCSAgICAgICAgICAgIHNlbGVjdG9yQm90dG9tQWRzID0gIiNib3R0b21hZHMgb2wgbGkuYWRzLWFkIiwKCSAgICAgICAgICAgIHNlbGVjdG9yTWFpbiA9ICIjcmVzIFtjbGFzcz0nZyddIiwKCSAgICAgICAgICAgIGFycmF5QWRzID0gW10sCgkgICAgICAgICAgICBhcnJheU1haW4gPSBbXTsKCSAgICAgICAgdmFyIGluZGV4ID0gMDsKCgkgICAgICAgIGZ1bmN0aW9uIHNlcnBBZChzaW5nbGVBZCwgaW5kZXgpIHsKCSAgICAgICAgICAgIHZhciB0aXRsZSA9IHZvaWQgMCwKCSAgICAgICAgICAgICAgICBocmVmID0gdm9pZCAwOwoJICAgICAgICAgICAgdGl0bGUgPSBzaW5nbGVBZC5xdWVyeVNlbGVjdG9yKCJoMyIpLmlubmVyVGV4dDsKCSAgICAgICAgICAgIGhyZWYgPSBzaW5nbGVBZC5xdWVyeVNlbGVjdG9yQWxsKCJjaXRlIilbMF0uaW5uZXJUZXh0OwoJICAgICAgICAgICAgcmV0dXJuIHsgdGl0bGU6IHRpdGxlLCBocmVmOiBocmVmLCBpbmRleDogaW5kZXggfTsKCSAgICAgICAgfQoKCSAgICAgICAgZnVuY3Rpb24gc2VycE1haW4oc2luZ2xlTWFpbiwgaW5kZXgpIHsKCSAgICAgICAgICAgIHZhciBocmVmID0gdm9pZCAwLAoJICAgICAgICAgICAgICAgIHRpdGxlID0gdm9pZCAwLAoJICAgICAgICAgICAgICAgIGEgPSB2b2lkIDA7CgkgICAgICAgICAgICBhID0gc2luZ2xlTWFpbi5xdWVyeVNlbGVjdG9yKCJhIik7CgkgICAgICAgICAgICB0aXRsZSA9IGEuaW5uZXJUZXh0OwoJICAgICAgICAgICAgaHJlZiA9IGEuaHJlZjsKCSAgICAgICAgICAgIHJldHVybiB7IHRpdGxlOiB0aXRsZSwgaHJlZjogaHJlZiwgaW5kZXg6IGluZGV4IH07CgkgICAgICAgIH0KCgkgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JUb3BBZHMpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CgkgICAgICAgICAgICBhcnJheUFkcy5wdXNoKHNlcnBBZChlbCwgaW5kZXgrKykpOwoJICAgICAgICB9KTsKCgkgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JNYWluKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewoJICAgICAgICAgICAgYXJyYXlNYWluLnB1c2goc2VycE1haW4oZWwsIGluZGV4KyspKTsKCSAgICAgICAgfSk7CgoJICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yQm90dG9tQWRzKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewoJICAgICAgICAgICAgYXJyYXlBZHMucHVzaChzZXJwQWQoZWwsIGluZGV4KyspKTsKCSAgICAgICAgfSk7CgoJICAgICAgICBmdW5jdGlvbiByZWZvcm1hdChvKSB7CgkgICAgICAgICAgICByZXR1cm4gewoJICAgICAgICAgICAgICAgIHVybDogby5ocmVmLAoJICAgICAgICAgICAgICAgIGxhYmVsOiBvLnRpdGxlLAoJICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBvLmluZGV4CgkgICAgICAgICAgICB9OwoJICAgICAgICB9CgoJICAgICAgICByZXR1cm4geyBvcmc6IGFycmF5TWFpbi5tYXAocmVmb3JtYXQpLCBhZHM6IGFycmF5QWRzLm1hcChyZWZvcm1hdCkgfTsKCSAgICB9Cgl9OwoKLyoqKi8gfSkKLyoqKioqKi8gXSk7"},{"name":"网页限制解除","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1530109317185},"enabled":true,"position":5,"file_url":"https://greasyfork.org/scripts/14146-%E7%BD%91%E9%A1%B5%E9%99%90%E5%88%B6%E8%A7%A3%E9%99%A4/code/%E7%BD%91%E9%A1%B5%E9%99%90%E5%88%B6%E8%A7%A3%E9%99%A4.user.js","uuid":"742c5953-6599-4ac3-9f40-d8286495f7b7","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSAgICAgICAgIGh0dHBzOi8vd3d3LmdpdGh1Yi5jb20vQ2F0NzM3My8KCi8vIEBuYW1lICAgICAgICAgICAgICDnvZHpobXpmZDliLbop6PpmaQKLy8gQG5hbWU6ZW4gICAgICAgICAgIFJlbW92ZSB3ZWIgbGltaXRzCi8vIEBuYW1lOnpoICAgICAgICAgICDnvZHpobXpmZDliLbop6PpmaQKLy8gQG5hbWU6emgtQ04gICAgICAgIOe9kemhtemZkOWItuino+mZpAovLyBAbmFtZTp6aC1UVyAgICAgICAg57ay6aCB6ZmQ5Yi26Kej6ZmkCi8vIEBuYW1lOmphICAgICAgICAgICDjgqbjgqfjg5bjga7opo/liLbnt6nlkowKCi8vIEBkZXNjcmlwdGlvbiAgICAgICDpgJrmnYDlpKfpg6jliIbnvZHnq5nvvIzlj6/ku6Xop6PpmaTnpoHmraLlpI3liLbjgIHliarliIfjgIHpgInmi6nmlofmnKzjgIHlj7PplK7oj5zljZXnmoTpmZDliLbjgIIKLy8gQGRlc2NyaXB0aW9uOmVuICAgIFBhc3MgdG8ga2lsbCBtb3N0IG9mIHRoZSBzaXRlLCB5b3UgY2FuIGxpZnQgdGhlIHJlc3RyaWN0aW9ucyBwcm9oaWJpdGVkIHRvIGNvcHksIGN1dCwgc2VsZWN0IHRoZSB0ZXh0LCByaWdodC1jbGljayBtZW51LgovLyBAZGVzY3JpcHRpb246emggICAg6YCa5p2A5aSn6YOo5YiG572R56uZ77yM5Y+v5Lul6Kej6Zmk56aB5q2i5aSN5Yi244CB5Ymq5YiH44CB6YCJ5oup5paH5pys44CB5Y+z6ZSu6I+c5Y2V55qE6ZmQ5Yi244CCCi8vIEBkZXNjcmlwdGlvbjp6aC1DTiDpgJrmnYDlpKfpg6jliIbnvZHnq5nvvIzlj6/ku6Xop6PpmaTnpoHmraLlpI3liLbjgIHliarliIfjgIHpgInmi6nmlofmnKzjgIHlj7PplK7oj5zljZXnmoTpmZDliLbjgIIKLy8gQGRlc2NyaXB0aW9uOnpoLVRXIOmAmuauuuWkp+mDqOWIhue2suerme+8jOWPr+S7peino+mZpOemgeatouW+qeWItuOAgeWJquWIh+OAgemBuOaTh+aWh+acrOOAgeWPs+mNteiPnOWWrueahOmZkOWItuOAggovLyBAZGVzY3JpcHRpb246amEgICAg44K144Kk44OI44Gu44G744Go44KT44Gp44KS5q6644GZ44Gf44KB44Gr5rih44GX44CB44GC44Gq44Gf44Gv44CB44Kz44OU44O85YiH44KK5Y+W44KK44CB44OG44Kt44K544OI44CB5Y+z44Kv44Oq44OD44Kv44Oh44OL44Ol44O844KS6YG45oqe44GZ44KL44GT44Go44Gv56aB5q2i44Gu5Yi26ZmQ44KS6Kej6Zmk44GZ44KL44GT44Go44GM44Gn44GN44G+44GZ44CCCgovLyBAaG9tZXBhZ2VVUkwgICAgICAgaHR0cHM6Ly9jYXQ3MzczLmdpdGh1Yi5pby9yZW1vdmUtd2ViLWxpbWl0cy8KLy8gQHN1cHBvcnRVUkwgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9DYXQ3MzczL3JlbW92ZS13ZWItbGltaXRzL2lzc3Vlcy8KCi8vIEBhdXRob3IgICAgICAgICAgICBDYXQ3MwovLyBAdmVyc2lvbiAgICAgICAgICAgMS4zCi8vIEBsaWNlbnNlICAgICAgICAgICBMR1BMdjMKCi8vIEBjb21wYXRpYmxlICAgICAgICBjaHJvbWUgQ2hyb21lXzQ2LjAuMjQ5MC44NiArIFRhbXBlck1vbmtleSArIOiEmuacrF8xLjMg5rWL6K+V6YCa6L+HCi8vIEBjb21wYXRpYmxlICAgICAgICBmaXJlZm94IEZpcmVmb3hfNDIuMCArIEdyZWFzZU1vbmtleSArIOiEmuacrF8xLjIuMSDmtYvor5XpgJrov4cKLy8gQGNvbXBhdGlibGUgICAgICAgIG9wZXJhIE9wZXJhXzMzLjAuMTk5MC4xMTUgKyBUYW1wZXJNb25rZXkgKyDohJrmnKxfMS4xLjMg5rWL6K+V6YCa6L+HCi8vIEBjb21wYXRpYmxlICAgICAgICBzYWZhcmkg5pyq5rWL6K+VCgovLyBAbWF0Y2ggICAgICAgICAgICAgKjovLyovKgovLyBAZ3JhbnQgICAgICAgICAgICAgbm9uZQovLyBAcnVuLWF0ICAgICAgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gPT0vVXNlclNjcmlwdD09CihmdW5jdGlvbigpIHsKICAndXNlIHN0cmljdCc7CgogIC8vIOWfn+WQjeinhOWImeWIl+ihqAogIHZhciBydWxlcyA9IHsKICAgIGJsYWNrX3J1bGU6IHsKICAgICAgbmFtZTogImJsYWNrIiwKICAgICAgaG9va19ldmVudE5hbWVzOiAiIiwKICAgICAgdW5ob29rX2V2ZW50TmFtZXM6ICIiCiAgICB9LAogICAgZGVmYXVsdF9ydWxlOiB7CiAgICAgIG5hbWU6ICJkZWZhdWx0IiwKICAgICAgaG9va19ldmVudE5hbWVzOiAiY29udGV4dG1lbnV8c2VsZWN0fHNlbGVjdHN0YXJ0fGNvcHl8Y3V0fGRyYWdzdGFydCIsCiAgICAgIHVuaG9va19ldmVudE5hbWVzOiAibW91c2Vkb3dufG1vdXNldXB8a2V5ZG93bnxrZXl1cCIsCiAgICAgIGRvbTA6IHRydWUsCiAgICAgIGhvb2tfYWRkRXZlbnRMaXN0ZW5lcjogdHJ1ZSwKICAgICAgaG9va19wcmV2ZW50RGVmYXVsdDogdHJ1ZSwKICAgICAgaG9va19zZXRfcmV0dXJuVmFsdWU6IHRydWUsCiAgICAgIGFkZF9jc3M6IHRydWUKICAgIH0KICB9OwogIC8vIOWfn+WQjeWIl+ihqAogIHZhciBsaXN0cyA9IHsKICAgIC8vIOm7keWQjeWNlQogICAgYmxhY2tfbGlzdDogWwogICAgICAvLipcLnlvdXR1YmVcLmNvbS4qLywKICAgICAgLy4qXC53aWtpcGVkaWFcLm9yZy4qLywKICAgICAgL21haWxcLnFxXC5jb20uKi8sCiAgICAgIC90cmFuc2xhdGVcLmdvb2dsZVwuLiovCiAgICBdCiAgfTsKCiAgLy8g6KaB5aSE55CG55qEIGV2ZW50IOWIl+ihqAogIHZhciBob29rX2V2ZW50TmFtZXMsIHVuaG9va19ldmVudE5hbWVzLCBldmVudE5hbWVzOwogIC8vIOWCqOWtmOWQjeensAogIHZhciBzdG9yYWdlTmFtZSA9IGdldFJhbmRTdHIoJ3F3ZXJ0eXVpb3Bhc2RmZ2hqa2x6eGN2Ym5tUVdFUlRZVUlPUEFTREZHSEpLTFpYQ1ZCTk0nLCBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMTIgKyA4KSk7CiAgLy8g5YKo5a2Y6KKrIEhvb2sg55qE5Ye95pWwCiAgdmFyIEV2ZW50VGFyZ2V0X2FkZEV2ZW50TGlzdGVuZXIgPSBFdmVudFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjsKICB2YXIgZG9jdW1lbnRfYWRkRXZlbnRMaXN0ZW5lciA9IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI7CiAgdmFyIEV2ZW50X3ByZXZlbnREZWZhdWx0ID0gRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0OwoKICAvLyBIb29rIGFkZEV2ZW50TGlzdGVuZXIgcHJvYwogIGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYywgdXNlQ2FwdHVyZSkgewogICAgdmFyIF9hZGRFdmVudExpc3RlbmVyID0gdGhpcyA9PT0gZG9jdW1lbnQgPyBkb2N1bWVudF9hZGRFdmVudExpc3RlbmVyIDogRXZlbnRUYXJnZXRfYWRkRXZlbnRMaXN0ZW5lcjsKICAgIGlmKGhvb2tfZXZlbnROYW1lcy5pbmRleE9mKHR5cGUpID49IDApIHsKICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW3R5cGUsIHJldHVyblRydWUsIHVzZUNhcHR1cmVdKTsKICAgIH0gZWxzZSBpZih1bmhvb2tfZXZlbnROYW1lcy5pbmRleE9mKHR5cGUpID49IDApIHsKICAgICAgdmFyIGZ1bmNzTmFtZSA9IHN0b3JhZ2VOYW1lICsgdHlwZSArICh1c2VDYXB0dXJlID8gJ3QnIDogJ2YnKTsKCiAgICAgIGlmKHRoaXNbZnVuY3NOYW1lXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpc1tmdW5jc05hbWVdID0gW107CiAgICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW3R5cGUsIHVzZUNhcHR1cmUgPyB1bmhvb2tfdCA6IHVuaG9va19mLCB1c2VDYXB0dXJlXSk7CiAgICAgIH0KCiAgICAgIHRoaXNbZnVuY3NOYW1lXS5wdXNoKGZ1bmMpOwogICAgfSBlbHNlIHsKICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KICB9CgogIC8vIOa4heeQhuW+queOrwogIGZ1bmN0aW9uIGNsZWFyTG9vcCgpIHsKICAgIHZhciBlbGVtZW50cyA9IGdldEVsZW1lbnRzKCk7CgogICAgZm9yKHZhciBpIGluIGVsZW1lbnRzKSB7CiAgICAgIGZvcih2YXIgaiBpbiBldmVudE5hbWVzKSB7CiAgICAgICAgdmFyIG5hbWUgPSAnb24nICsgZXZlbnROYW1lc1tqXTsKICAgICAgICBpZihlbGVtZW50c1tpXVtuYW1lXSAhPT0gbnVsbCAmJiBlbGVtZW50c1tpXVtuYW1lXSAhPT0gb254eHgpIHsKICAgICAgICAgIGlmKHVuaG9va19ldmVudE5hbWVzLmluZGV4T2YoZXZlbnROYW1lc1tqXSkgPj0gMCkgewogICAgICAgICAgICBlbGVtZW50c1tpXVtzdG9yYWdlTmFtZSArIG5hbWVdID0gZWxlbWVudHNbaV1bbmFtZV07CiAgICAgICAgICAgIGVsZW1lbnRzW2ldW25hbWVdID0gb254eHg7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbGVtZW50c1tpXVtuYW1lXSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvLyDov5Tlm550cnVl55qE5Ye95pWwCiAgZnVuY3Rpb24gcmV0dXJuVHJ1ZShlKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gdW5ob29rX3QoZSkgewogICAgcmV0dXJuIHVuaG9vayhlLCB0aGlzLCBzdG9yYWdlTmFtZSArIGUudHlwZSArICd0Jyk7CiAgfQogIGZ1bmN0aW9uIHVuaG9va19mKGUpIHsKICAgIHJldHVybiB1bmhvb2soZSwgdGhpcywgc3RvcmFnZU5hbWUgKyBlLnR5cGUgKyAnZicpOwogIH0KICBmdW5jdGlvbiB1bmhvb2soZSwgc2VsZiwgZnVuY3NOYW1lKSB7CiAgICB2YXIgbGlzdCA9IHNlbGZbZnVuY3NOYW1lXTsKICAgIGZvcih2YXIgaSBpbiBsaXN0KSB7CiAgICAgIGxpc3RbaV0oZSk7CiAgICB9CgogICAgZS5yZXR1cm5WYWx1ZSA9IHRydWU7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gb254eHgoZSkgewogICAgdmFyIG5hbWUgPSBzdG9yYWdlTmFtZSArICdvbicgKyBlLnR5cGU7CiAgICB0aGlzW25hbWVdKGUpOwoKICAgIGUucmV0dXJuVmFsdWUgPSB0cnVlOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvLyDojrflj5bpmo/mnLrlrZfnrKbkuLIKICBmdW5jdGlvbiBnZXRSYW5kU3RyKGNocywgbGVuKSB7CiAgICB2YXIgc3RyID0gJyc7CgogICAgd2hpbGUobGVuLS0pIHsKICAgICAgc3RyICs9IGNoc1twYXJzZUludChNYXRoLnJhbmRvbSgpICogY2hzLmxlbmd0aCldOwogICAgfQoKICAgIHJldHVybiBzdHI7CiAgfQoKICAvLyDojrflj5bmiYDmnInlhYPntKAg5YyF5ousZG9jdW1lbnQKICBmdW5jdGlvbiBnZXRFbGVtZW50cygpIHsKICAgIHZhciBlbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJykpOwogICAgZWxlbWVudHMucHVzaChkb2N1bWVudCk7CgogICAgcmV0dXJuIGVsZW1lbnRzOwogIH0KCiAgLy8g5re75YqgY3NzCiAgZnVuY3Rpb24gYWRkU3R5bGUoY3NzKSB7CiAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgc3R5bGUuaW5uZXJIVE1MID0gY3NzOwogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgfQoKICAvLyDojrflj5bnm67moIfln5/lkI3lupTor6Xkvb/nlKjnmoTop4TliJkKICBmdW5jdGlvbiBnZXRSdWxlKHVybCkgewogICAgZnVuY3Rpb24gdGVzdFVybChsaXN0LCB1cmwpIHsKICAgICAgZm9yKHZhciBpIGluIGxpc3QpIHsKICAgICAgICBpZihsaXN0W2ldLnRlc3QodXJsKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYodGVzdFVybChsaXN0cy5ibGFja19saXN0LCB1cmwpKSB7CiAgICAgIHJldHVybiBydWxlcy5ibGFja19ydWxlOwogICAgfQoKICAgIHJldHVybiBydWxlcy5kZWZhdWx0X3J1bGU7CiAgfQoKICAvLyDliJ3lp4vljJYKICBmdW5jdGlvbiBpbml0KCkgewogICAgLy8g6I635Y+W5b2T5YmN5Z+f5ZCN55qE6KeE5YiZCiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhvc3QgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CiAgICB2YXIgcnVsZSA9IGdldFJ1bGUodXJsKTsKCiAgICAvLyDorr7nva4gZXZlbnQg5YiX6KGoCiAgICBob29rX2V2ZW50TmFtZXMgPSBydWxlLmhvb2tfZXZlbnROYW1lcy5zcGxpdCgifCIpOwogICAgLy8gVE9ETyBBbGxvd2VkIHRvIHJldHVybiB2YWx1ZQogICAgdW5ob29rX2V2ZW50TmFtZXMgPSBydWxlLnVuaG9va19ldmVudE5hbWVzLnNwbGl0KCJ8Iik7CiAgICBldmVudE5hbWVzID0gaG9va19ldmVudE5hbWVzLmNvbmNhdCh1bmhvb2tfZXZlbnROYW1lcyk7CgogICAgLy8g6LCD55So5riF55CGIERPTTAgZXZlbnQg5pa55rOV55qE5b6q546vCiAgICBpZihydWxlLmRvbTApIHsKICAgICAgc2V0SW50ZXJ2YWwoY2xlYXJMb29wLCAzMCAqIDEwMDApOwogICAgICBzZXRUaW1lb3V0KGNsZWFyTG9vcCwgMjUwMCk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY2xlYXJMb29wLCB0cnVlKTsKICAgICAgY2xlYXJMb29wKCk7CiAgICB9CgogICAgLy8gaG9vayBhZGRFdmVudExpc3RlbmVyCiAgICBpZihydWxlLmhvb2tfYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICBFdmVudFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGFkZEV2ZW50TGlzdGVuZXI7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgPSBhZGRFdmVudExpc3RlbmVyOwogICAgfQoKICAgIC8vIGhvb2sgcHJldmVudERlZmF1bHQKICAgIGlmKHJ1bGUuaG9va19wcmV2ZW50RGVmYXVsdCkgewogICAgICBFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZihldmVudE5hbWVzLmluZGV4T2YodGhpcy50eXBlKSA8IDApIHsKICAgICAgICAgIEV2ZW50X3ByZXZlbnREZWZhdWx0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICB9OwogICAgfQoKICAgIC8vIEhvb2sgc2V0IHJldHVyblZhbHVlCiAgICBpZihydWxlLmhvb2tfc2V0X3JldHVyblZhbHVlKSB7CiAgICAgIEV2ZW50LnByb3RvdHlwZS5fX2RlZmluZVNldHRlcl9fKCdyZXR1cm5WYWx1ZScsIGZ1bmN0aW9uKCkgewogICAgICAgIGlmKHRoaXMucmV0dXJuVmFsdWUgIT09IHRydWUgJiYgZXZlbnROYW1lcy5pbmRleE9mKHRoaXMudHlwZSkgPj0gMCkgewogICAgICAgICAgdGhpcy5yZXR1cm5WYWx1ZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICBjb25zb2xlLmRlYnVnKCd1cmw6ICcgKyB1cmwsICdzdG9yYWdlTmFtZe+8micgKyBzdG9yYWdlTmFtZSwgJ3J1bGU6ICcgKyBydWxlLm5hbWUpOwoKICAgIC8vIOa3u+WKoENTUwogICAgaWYocnVsZS5hZGRfY3NzKSB7CiAgICAgIGFkZFN0eWxlKCdodG1sLCAqIHstd2Via2l0LXVzZXItc2VsZWN0OnRleHQhaW1wb3J0YW50OyAtbW96LXVzZXItc2VsZWN0OnRleHQhaW1wb3J0YW50O30nKTsKICAgIH0KICB9CgogIGluaXQoKTsKfSkoKTs="},{"name":"Picviewer CE+","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":["http://www.toodledo.com/tasks/*","http*://maps.google.com*/*","*://www.google.*/_/chrome/newtab*"],"orig_includes":["http://*","https://*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1530109317194},"enabled":true,"position":6,"file_url":"https://greasyfork.org/scripts/24204-picviewer-ce/code/Picviewer%20CE+.user.js","uuid":"bf221459-5a1c-4e17-8f5f-4c7053d69987","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFBpY3ZpZXdlciBDRSsKLy8gQG5hbWU6emgtQ04gICAgICAgICBQaWN2aWV3ZXIgQ0UrCi8vIEBuYW1lOnpoLVRXICAgICAgICAgUGljdmlld2VyIENFKwovLyBAYXV0aG9yICAgICAgICAgTkxGICYmIHl3emhhaXFpICYmIGhvb3RoaW4KLy8gQGRlc2NyaXB0aW9uICAgIFBvd2VyZnVsIHBpY3R1cmUgdmlld2luZyB0b29sIG9ubGluZSwgd2hpY2ggY2FuIHBvcHVwL3NjYWxlL3JvdGF0ZS9iYXRjaCBzYXZlIHBpY3R1cmVzIG9yIGZpbmQgdGhlIEhEIG9yaWdpbmFsIHBpY3R1cmUgYXV0b21hdGljYWxseQovLyBAZGVzY3JpcHRpb246emgtQ04gICAgTkxGIOeahOWbtOinguWbvuS/ruaUueeJiO+8jOWinuWKoOmrmOa4heWOn+WbvuafpeaJvuaYvuekuu+8iOWcqOe6v+eci+WbvuW3peWFt++8jOaUr+aMgeWbvueJh+e/u+i9rOOAgeaXi+i9rOOAgee8qeaUvuOAgeW8ueWHuuWkp+WbvuOAgeaJuemHj+S/neWtmOOAgeafpeaJvuWOn+Wbvu+8iQovLyBAZGVzY3JpcHRpb246emgtVFcgICAgTkxGIOeahOWcjeingOWcluS/ruaUueeJiO+8jOWinuWKoOmrmOa4heWOn+Wcluafpeipoumhr+ekuu+8iOe3muS4iueci+WcluW3peWFt++8jOaUr+aPtOWclueJh+e/u+i9ieOAgeaXi+i9ieOAgee4ruaUvuOAgeW9iOWHuuWkp+WcluOAgeaJuemHj+WEsuWtmOOAgeafpeipouWOn+Wclu+8iQovLyBAdmVyc2lvbiAgICAgICAgMjAxOC42LjI3LjEKLy8gQGNyZWF0ZWQgICAgICAgIDIwMTEtNi0xNQovLyBAbmFtZXNwYWNlICAgICAgaHR0cDovL3VzZXJzY3JpcHRzLm9yZy91c2Vycy9OTEYKLy8gQGhvbWVwYWdlICAgICAgIGh0dHA6Ly9ob290aGluLmNvbQovLyBAY29ubmVjdCAgICAgICB3d3cuZ29vZ2xlLmNvbQovLyBAY29ubmVjdCAgICAgICB3d3cuZ29vZ2xlLmNvbS5oawovLyBAY29ubmVjdCAgICAgICB3d3cuZ29vZ2xlLmNvLmpwCi8vIEBjb25uZWN0ICAgICAgIGlwdjQuZ29vZ2xlLmNvbQovLyBAY29ubmVjdCAgICAgICBpbWFnZS5iYWlkdS5jb20KLy8gQGNvbm5lY3QgICAgICAgd3d3LnRpbmV5ZS5jb20KLy8gQGdyYW50ICAgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgR01fYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgICAgR01fc2V0Q2xpcGJvYXJkCi8vIEBncmFudCAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICAgICAgdW5zYWZlV2luZG93Ci8vIEByZXF1aXJlICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvNjE1OC1nbS1jb25maWctY24vY29kZS9HTV9jb25maWclMjBDTi5qcz92ZXJzaW9uPTIzNzEwCi8vIEBjb250cmlidXRpb25VUkwgaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9jZ2ktYmluL3dlYnNjcj9jbWQ9X2RvbmF0aW9ucyZidXNpbmVzcz1yaXhpeGlAc2luYS5jb20maXRlbV9uYW1lPUdyZWFzeStGb3JrK2RvbmF0aW9uCi8vIEBjb250cmlidXRpb25BbW91bnQgMQovLyBAcnVuLWF0ICAgICAgICAgZG9jdW1lbnQtZW5kCi8vIEBpbmNsdWRlICAgICAgIGh0dHA6Ly8qCi8vIEBpbmNsdWRlICAgICAgIGh0dHBzOi8vKgovLyBAZXhjbHVkZSAgICAgICBodHRwOi8vd3d3LnRvb2RsZWRvLmNvbS90YXNrcy8qCi8vIEBleGNsdWRlICAgICAgIGh0dHAqOi8vbWFwcy5nb29nbGUuY29tKi8qCi8vIEBleGNsdWRlICAgICAgICo6Ly93d3cuZ29vZ2xlLiovXy9jaHJvbWUvbmV3dGFiKgovLyA9PS9Vc2VyU2NyaXB0PT0KCjsoZnVuY3Rpb24odG9wT2JqZWN0LHdpbmRvdyxkb2N1bWVudCx1bnNhZmVXaW5kb3cpewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIHZhciBsYW5nID0gbmF2aWdhdG9yLmFwcE5hbWU9PSJOZXRzY2FwZSI/bmF2aWdhdG9yLmxhbmd1YWdlOm5hdmlnYXRvci51c2VyTGFuZ3VhZ2U7CiAgICB2YXIgaTE4bkRhdGE9e307CiAgICBzd2l0Y2ggKGxhbmcpewogICAgICAgIGNhc2UgInpoLUNOIjoKICAgICAgICAgICAgaTE4bkRhdGE9ewogICAgICAgICAgICAgICAgc2hhcmU6IuWIhuS6qyIsCiAgICAgICAgICAgICAgICBsb2FkQWxsOiLliqDovb3mm7TlpJoiLAogICAgICAgICAgICAgICAgbG9hZGVkQWxsOiLliqDovb3lrozmr5UiLAogICAgICAgICAgICAgICAgbG9hZGluZzoi5q2j5Zyo5Yqg6L29IiwKICAgICAgICAgICAgICAgIGxvYWRBbGxUaXA6IuWKoOi9veS4i+S4gOmhteeahOWbvueJhyIsCiAgICAgICAgICAgICAgICBmaWRkbGU6IuaKmOiFviIsCiAgICAgICAgICAgICAgICBmaWRkbGVUaXA6IuW8ueWHuuWbvueJh+i/m+ihjOWkjeadguaTjeS9nCIsCiAgICAgICAgICAgICAgICBjb2xsZWN0OiLmlLbol48iLAogICAgICAgICAgICAgICAgY29sbGVjdGVkOiLlt7LmlLbol48iLAogICAgICAgICAgICAgICAgZXhpdENvbGxlY3Rpb246IumAgOWHuuaUtuiXjyIsCiAgICAgICAgICAgICAgICBleGl0Q29sbGVjdGlvblRpcDoi54K55Ye76YCA5Ye65pS26JeP5qih5byPIiwKICAgICAgICAgICAgICAgIG5vQ29sbGVjdGlvbllldDoi5L2g6L+Y5pyo5pyJ5pS26JeP5Lu75L2V5Zu+54mHIiwKICAgICAgICAgICAgICAgIGNvbGxlY3REZXRhaWw6IuaPj+i/sCIsCiAgICAgICAgICAgICAgICBjb2xsZWN0RGV0YWlsVGlwOiLnu5nmlLbol4/nmoTlm77niYfmt7vliqDkuIDkupvmj4/ov7DlkKciLAogICAgICAgICAgICAgICAgcGxheVNsaWRlOiLmkq3mlL7lubvnga/niYciLAogICAgICAgICAgICAgICAgc2xpZGVHYXA6IumXtOmalChzKSIsCiAgICAgICAgICAgICAgICBzbGlkZUdhcFRpcDoi6Ze06ZqU5pe26Ze077yM5Y2V5L2NKOenkikiLAogICAgICAgICAgICAgICAgc2xpZGVCYWNrOiLlkI7pgIAiLAogICAgICAgICAgICAgICAgc2xpZGVCYWNrVGlwOiLku47lkI7lvoDliY3mkq3mlL4iLAogICAgICAgICAgICAgICAgc2xpZGVXYWl0OiLnrYnlvoXlm77niYfor7vlj5YiLAogICAgICAgICAgICAgICAgc2xpZGVXYWl0VGlwOiLku47mr4/lvKDlm77niYflrozlhajor7vlj5blrozmiJDlkI7miY3lvIDlp4vlgJLorqHml7YiLAogICAgICAgICAgICAgICAgc2xpZGVTa2lwRXJyb3I6Iui3s+i/h+mUmeivr+WbvueJhyIsCiAgICAgICAgICAgICAgICBzbGlkZVNraXBFcnJvclRpcDoi5b+r6YCf6Lez6L+H6K+75Y+W6ZSZ6K+v55qE5Zu+54mHIiwKICAgICAgICAgICAgICAgIHR5cGU6Iuexu+WIqyIsCiAgICAgICAgICAgICAgICB0eXBlVGlwOiLpgInmi6nlm77niYfnsbvliKsiLAogICAgICAgICAgICAgICAgYWR2YW5jZWRSdWxlczoi6auY57qn6KeE5YiZIiwKICAgICAgICAgICAgICAgIGFkdmFuY2VkUnVsZXNUaXA6IueUsemrmOe6p+inhOWImeWMuemFjeWHuuadpeeahCIsCiAgICAgICAgICAgICAgICB0cFJ1bGVzOiLpgJrphY3op4TliJkiLAogICAgICAgICAgICAgICAgdHBSdWxlc1RpcDoi55Sx6YCa6YWN6KeE5YiZ5Yy56YWN5Ye65p2l55qEIiwKICAgICAgICAgICAgICAgIHNjYWxlUnVsZXM6Iue8qeaUvui/h+eahCIsCiAgICAgICAgICAgICAgICBzY2FsZVJ1bGVzVGlwOiJqc+iHquWKqOafpeaJvu+8jOebuOWvuemhtemdouaYvuekuueahOWbvueJh+aciee8qeaUvui/h+eahCIsCiAgICAgICAgICAgICAgICBub1NjYWxlUnVsZXM6IuaXoOe8qeaUvui/hyIsCiAgICAgICAgICAgICAgICBub1NjYWxlUnVsZXNUaXA6Impz6Ieq5Yqo5p+l5om+77yM5peg57yp5pS+6L+H55qE77yM5L2G5piv5ruh6Laz5LiA5a6a55qE5aSn5bCPIiwKICAgICAgICAgICAgICAgIHNtYWxsUnVsZXM6IuWwj+WwuuWvuOeahCIsCiAgICAgICAgICAgICAgICBzbWFsbFJ1bGVzVGlwOiLlsI/lsLrlr7jlm77niYfvvIzlrp7pmYXlsLrlr7jnmoTpq5jlkozlrr3pg73lsI/kuo4jdCPlg4/ntKAiLAogICAgICAgICAgICAgICAgY29tbWFuZDoi5ZG95LukIiwKICAgICAgICAgICAgICAgIGNvbW1hbmRUaXA6IuWRveS7pOiPnOWNlSIsCiAgICAgICAgICAgICAgICBvbmxpbmVFZGl0OiLlnKjnur/nvJbovpEiLAogICAgICAgICAgICAgICAgb25saW5lRWRpdFRpcDoi5L2/55SoI3Qj5Zyo57q/57yW6L6R6K+l5Zu+54mHIiwKICAgICAgICAgICAgICAgIG9wZW5Jbk5ld1dpbmRvdzoi5paw56qX5Y+j5omT5byAIiwKICAgICAgICAgICAgICAgIG9wZW5Jbk5ld1dpbmRvd1RpcDoi5paw56qX5Y+j5omT5byA5Zu+54mHIiwKICAgICAgICAgICAgICAgIGZpbmRJblBhZ2U6IuWumuS9jeWIsOWbvueJhyIsCiAgICAgICAgICAgICAgICBmaW5kSW5QYWdlVGlwOiLmu5rliqjliLDlvZPliY3lm77niYfmiYDlnKjnmoTkvY3nva4iLAogICAgICAgICAgICAgICAgdmlld0NvbGxlY3Rpb246Iuafpeeci+aUtuiXjyIsCiAgICAgICAgICAgICAgICB2aWV3Q29sbGVjdGlvblRpcDoi5p+l55yL5omA5pyJ5pS26JeP55qE5Zu+54mHIiwKICAgICAgICAgICAgICAgIGluQ29sbGVjdGlvbjoi5pS26JeP5qih5byP5Lit77yM5peg5rOV5L2/55SoIiwKICAgICAgICAgICAgICAgIGNhbnRGaW5kOiLlm77niYfkuI3lnKjmlofmoaPkuK3vvIzmiJbogIXooqvpmpDol4/kuobvvIzml6Dms5XlrprkvY3vvIEiLAogICAgICAgICAgICAgICAgZXhwb3J0SW1hZ2VzOiLlr7zlh7rlpKflm74iLAogICAgICAgICAgICAgICAgZXhwb3J0SW1hZ2VzVGlwOiLlr7zlh7rmiYDmnInlm77niYfliLDmlrDnqpflj6MiLAogICAgICAgICAgICAgICAgZG93bmxvYWRJbWFnZToi5LiL6L295Zu+54mHIiwKICAgICAgICAgICAgICAgIGRvd25sb2FkSW1hZ2VUaXA6IuS4i+i9veW9k+WJjeWbvueJhyIsCiAgICAgICAgICAgICAgICBjb3B5SW1hZ2VzVXJsOiLlpI3liLbmiYDmnIkiLAogICAgICAgICAgICAgICAgY29weUltYWdlc1VybFRpcDoi5aSN5Yi25omA5pyJ5aSn5Zu+5Zyw5Z2AIiwKICAgICAgICAgICAgICAgIGNvcHlTdWNjZXNzOiLlt7LmiJDlip/lpI3liLYgI3QjIOW8oOWkp+WbvuWcsOWdgCIsCiAgICAgICAgICAgICAgICBhdXRvUmVmcmVzaDoi6Ieq5Yqo6YeN6L29IiwKICAgICAgICAgICAgICAgIGF1dG9SZWZyZXNoVGlwOiLmnIDlkI7lh6DlvKDlm77niYfml7bvvIzmu5rliqjkuLvnqpflj6PliLDmnIDlupXpg6jvvIznhLblkI7oh6rliqjliqDovb3mlrDnmoTlm77niYciLAogICAgICAgICAgICAgICAgZW50ZXJGdWxsc2M6Iui/m+WFpeWFqOWxjyIsCiAgICAgICAgICAgICAgICBleGl0RnVsbHNjOiLpgIDlh7rlhajlsY8iLAogICAgICAgICAgICAgICAgY29uZmlnOiLorr7nva4iLAogICAgICAgICAgICAgICAgY2xvc2VHYWxsZXJ5OiLlhbPpl63lupMiLAogICAgICAgICAgICAgICAgcmV0dXJuVG9HYWxsZXJ5OiLlm57liLDlupMiLAogICAgICAgICAgICAgICAgcGljSW5mbzoi5Zu+54mH5L+h5oGvIiwKICAgICAgICAgICAgICAgIHBpY05vdGU6IuWbvueJh+azqOmHiiIsCiAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiLliIbovqjnjociLAogICAgICAgICAgICAgICAgcGljTnVtOiLlm77niYflvKDmlbAiLAogICAgICAgICAgICAgICAgc2NhbGVSYXRpbzoi57yp5pS+5q+UIiwKICAgICAgICAgICAgICAgIHNpbWlsYXJJbWFnZToi5Lul5Zu+5pCc5Zu+IiwKICAgICAgICAgICAgICAgIHNjYWxlOiLnvKnmlL4iLAogICAgICAgICAgICAgICAgaG9yaXpvbnRhbEZsaXA6IuawtOW5s+e/u+i9rCIsCiAgICAgICAgICAgICAgICB2ZXJ0aWNhbEZsaXA6IuWeguebtOe/u+i9rCIsCiAgICAgICAgICAgICAgICBhY3R1YWxCdG46J+afpeeci+WOn+WniyhBKScsCiAgICAgICAgICAgICAgICBzZWFyY2hCdG46J+afpeaJvuWOn+WbvihTKScsCiAgICAgICAgICAgICAgICBnYWxsZXJ5QnRuOifmn6XnnIvlupMoRyknLAogICAgICAgICAgICAgICAgY3VycmVudEJ0bjon5p+l55yL5b2T5YmNKEMpJywKICAgICAgICAgICAgICAgIG1hZ25pZmllckJ0bjon5pS+5aSn6ZWcKE0pJywKICAgICAgICAgICAgICAgIHBpY1RpdGxlOiLlm77niYfmoIfpopgiLAogICAgICAgICAgICAgICAgcGljTnVtOiLlm77niYfmlbDph48iLAogICAgICAgICAgICAgICAgZXhwb3J0SW1hZ2VzVXJsOiLlr7zlh7rlm77niYfpk77mjqUiLAogICAgICAgICAgICAgICAgZXhwb3J0SW1hZ2VzVXJsUG9wOiJDdHJsK0PlpI3liLblm77niYfpk77mjqUiLAogICAgICAgICAgICAgICAgYmVnaW5TZWFyY2hJbWc6IiN0I+ivhuWbvuW8gOWni+KApuKApiIsCiAgICAgICAgICAgICAgICBmaW5kTm9QaWM6IuacquaJvuWIsOWOn+WbviIsCiAgICAgICAgICAgICAgICBmaW5kT3ZlckJlZ2luTG9hZDoiI3Qj6K+G5Zu+57uT5p2f77yM5YWx5om+5YiwI3Qj5byg5Yy56YWN5Zu+54mH77yM5byA5aeL5Yqg6L2956ys5LiA5bygIiwKICAgICAgICAgICAgICAgIGxvYWROZXh0U2ltaWxhcjoi5Y6f5Zu+5Yqg6L295aSx6LSl77yM5bCd6K+V5Yqg6L295LiL5LiA57uT5p6c4oCm4oCmIiwKICAgICAgICAgICAgICAgIGxvYWRFcnJvcjoi5Yqg6L295aSx6LSlIiwKICAgICAgICAgICAgICAgIG9wZW5Ib21lUGFnZToi54K55Ye75q2k5aSE5omT5byA5Li76aG1IiwKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiLmmL7npLrkvY3nva4iLAogICAgICAgICAgICAgICAgdG9wTGVmdDogJ+WbvueJh+W3puS4iuinkicsCiAgICAgICAgICAgICAgICB0b3BSaWdodDogJ+WbvueJh+WPs+S4iuinkicsCiAgICAgICAgICAgICAgICBib3R0b21SaWdodDogJ+WbvueJh+WPs+S4i+inkicsCiAgICAgICAgICAgICAgICBib3R0b21MZWZ0OiAn5Zu+54mH5bem5LiL6KeSJywKICAgICAgICAgICAgICAgIHRvcENlbnRlcjogJ+WbvueJh+ato+S4iuaWuScsCiAgICAgICAgICAgICAgICBib3R0b21DZW50ZXI6ICflm77niYfmraPkuIvmlrknLAogICAgICAgICAgICAgICAgZmxvYXRCYXI6Iua1ruWKqOW3peWFt+agjyIsCiAgICAgICAgICAgICAgICBzaG93RGVsYXk6IuaYvuekuuW7tuaXtiIsCiAgICAgICAgICAgICAgICBtczoi5q+r56eSIiwKICAgICAgICAgICAgICAgIGhpZGU6IumakOiXjyIsCiAgICAgICAgICAgICAgICBoaWRlRGVsYXk6IumakOiXj+W7tuaXtiIsCiAgICAgICAgICAgICAgICBmb3JjZVNob3c6Iumdnue8qeaUvuWbvueJh++8jOi2hei/h+ivpeWwuuWvuO+8jOaYvuekuua1ruahhiIsCiAgICAgICAgICAgICAgICBmb3JjZVNob3dUaXA6Iumdnue8qeaUvueahOWbvueJh+Wkp+Wwj+i2hei/h+S4i+mdouiuvuWumueahOWwuuWvuOaXtuaYvuekuua1ruWKqOW3peWFt+agjyIsCiAgICAgICAgICAgICAgICBweDoi5YOP57SgIiwKICAgICAgICAgICAgICAgIG1pblNpemVMaW1pdDoi57yp5pS+5Zu+54mH77yM6LaF6L+H6K+l5bC65a+477yM5pi+56S65rWu5qGGIiwKICAgICAgICAgICAgICAgIG1pblNpemVMaW1pdFRpcDoi5Zu+54mH6KKr57yp5pS+KOWbvueJh+WOn+Wni+Wkp+Wwj+S4juWunumZheWkp+Wwj+S4jeS4gOiHtCnlkI4s5Y6f5Zu+6ZW/5a695aSn5LqO6K6+5a6a5YC85pe25pi+56S65rWu5Yqo5bel5YW35qCPIiwKICAgICAgICAgICAgICAgIGxpc3RlbkJnOiLnm5HlkKzog4zmma/lm74iLAogICAgICAgICAgICAgICAgbGlzdGVuQmdUaXA6IuWcqOacieiDjOaZr+WbvueahOWFg+e0oOS4iuaYvuekuuaCrOa1ruahhiIsCiAgICAgICAgICAgICAgICBidXRvbk9yZGVyOiLlt6XlhbfmoI/lm77moIfmjpLluo8iLAogICAgICAgICAgICAgICAga2V5c0VuYWJsZToi5ZCv55So5Lul5LiL5b+r5o236ZSuIiwKICAgICAgICAgICAgICAgIGtleXNBY3R1YWw6IuaJk+W8gOWkp+WbviIsCiAgICAgICAgICAgICAgICBrZXlzQWN0dWFsVGlwOiLlvZPlh7rnjrDmgqzmta7mnaHml7bmjInkuIvmraTmjInplK7miZPlvIDlpKflm74iLAogICAgICAgICAgICAgICAga2V5c1NlYXJjaDoi5p+l5om+5Y6f5Zu+IiwKICAgICAgICAgICAgICAgIGtleXNTZWFyY2hUaXA6IuW9k+WHuueOsOaCrOa1ruadoeaXtuaMieS4i+atpOaMiemUruafpeaJvuWOn+WbviIsCiAgICAgICAgICAgICAgICBrZXlzQ3VycmVudDoi5omT5byA5b2T5YmN5Zu+54mHIiwKICAgICAgICAgICAgICAgIGtleXNDdXJyZW50VGlwOiLlvZPlh7rnjrDmgqzmta7mnaHml7bmjInkuIvmraTmjInplK7miZPlvIDlvZPliY3mmL7npLrnmoTlm77niYciLAogICAgICAgICAgICAgICAga2V5c01hZ25pZmllcjoi5omT5byA5pS+5aSn6ZWc6KeC5a+fIiwKICAgICAgICAgICAgICAgIGtleXNNYWduaWZpZXJUaXA6IuW9k+WHuueOsOaCrOa1ruadoeaXtuaMieS4i+atpOaMiemUruaJk+W8gOaUvuWkp+mVnOinguWvnyIsCiAgICAgICAgICAgICAgICBrZXlzR2FsbGVyeToi5omT5byA5Zu+5bqTIiwKICAgICAgICAgICAgICAgIGtleXNHYWxsZXJ5VGlwOiLlvZPlh7rnjrDmgqzmta7mnaHml7bmjInkuIvmraTmjInplK7miZPlvIDlm77lupMiLAogICAgICAgICAgICAgICAgbWFnbmlmaWVyOiLmlL7lpKfplZwiLAogICAgICAgICAgICAgICAgbWFnbmlmaWVyUmFkaXVzOiLpu5jorqTljYrlvoQiLAogICAgICAgICAgICAgICAgbWFnbmlmaWVyV2hlZWxab29tRW5hYmxlZDoi5ZCv55So5rua6L2u57yp5pS+IiwKICAgICAgICAgICAgICAgIG1hZ25pZmllcldoZWVsWm9vbVJhbmdlOiLmu5rova7nvKnmlL7nmoTlgI3njociLAogICAgICAgICAgICAgICAgZ2FsbGVyeToi5Zu+5bqTIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlbjoi5a+55Zu+54mH6L+b6KGM57yp5pS+5Lul6YCC5bqU5bGP5bmVIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlblNtYWxsOiLlsI/lm77kuZ/nvKnmlL7ku6XpgILlupTlsY/luZUiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuVGlwOiLpgILlupTmlrnlvI/kuLpjb250YWlu77yM6Z2eY292ZXIiLAogICAgICAgICAgICAgICAgZ2FsbGVyeVNjcm9sbEVuZFRvQ2hhbmdlOiLlpKflm77mu5rliqjliLDlupXlkI7liIfmjaLlm77niYciLAogICAgICAgICAgICAgICAgZ2FsbGVyeVNjcm9sbEVuZFRvQ2hhbmdlVGlwOiLlj5bmtojkuIrkuIDpgInpobnlkI7miY3mnInmlYgiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUV4cG9ydFR5cGU6IuWbvueJh+WvvOWHuum7mOiupOaOkuW6jyIsCiAgICAgICAgICAgICAgICBncmlkOiflubPpk7rmjpLluo8nLAogICAgICAgICAgICAgICAgZ3JpZEJpZzon5Y6f5Zu+5bmz6ZO6JywKICAgICAgICAgICAgICAgIGxpc3Q6J+WIl+ihqOaOkuW6jycsCiAgICAgICAgICAgICAgICBnYWxsZXJ5TG9hZEFsbDoi5Yqg6L295pu05aSa5Zu+54mH5pe26Ieq5Yqo5aSE55CG5YWo6YOo6aG1IiwKICAgICAgICAgICAgICAgIGdhbGxlcnlMb2FkQWxsVGlwOiLoi6XpobXmlbDov4flpJrlj6/og73lvbHlk43kvZPpqowiLAogICAgICAgICAgICAgICAgZ2FsbGVyeVNjYWxlU21hbGxTaXplMToi5a6e6ZmF5bC65a+455qE6auY5ZKM5a696YO95bCP5LqOICIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5U2NhbGVTbWFsbFNpemUyOiIg5YOP57Sg5YiZ5b2S5YWl5bCP5bC65a+45Zu+54mHIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlTaG93U21hbGxTaXplOiLpu5jorqTmmL7npLrlsI/lsLrlr7jlm77niYciLAogICAgICAgICAgICAgICAgZ2FsbGVyeVRyYW5zaXRpb246IuaYvuekuuWbvuW6k+WIh+aNouWbvueJh+eahOeJueaViCIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5U2lkZWJhclBvc2l0aW9uOiLnvKnnlaXlm77moI/kvY3nva4iLAogICAgICAgICAgICAgICAgYm90dG9tOiflupXpg6gnLAogICAgICAgICAgICAgICAgcmlnaHQ6J+WPs+S+pycsCiAgICAgICAgICAgICAgICBsZWZ0Oiflt6bkvqcnLAogICAgICAgICAgICAgICAgdG9wOifpobbpg6gnLAogICAgICAgICAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplOiLpq5jluqYiLAogICAgICAgICAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplVGlwOiLnvKnnlaXlm77moI/nmoTpq5jvvIjlpoLmnpzmmK/msLTlubPmlL7nva7vvInmiJbogIXlrr3vvIjlpoLmnpzmmK/lnoLnm7TmlL7nva7vvIkiLAogICAgICAgICAgICAgICAgZ2FsbGVyeU1heDE6IuacgOWkmumihOivuyAiLAogICAgICAgICAgICAgICAgZ2FsbGVyeU1heDI6IiDlvKDlm77niYfvvIjliY3lkI7lkITlpJrlsJHlvKDvvIkiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUF1dG9ab29tOiLnvKnmlL7mlLnlm54gMTAwJe+8iGNocm9tZe+8iSIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5QXV0b1pvb21UaXA6IuWmguaenOacieaUvuWkp++8jOWImeaKiuWbvueJh+WPiiBzaWRlYmFyIOmDqOWIhueahOe8qeaUvuaUueWbniAxMDAl77yM5aKe5aSn5Y+v6KeG6Z2i56ev77yI5LuF5ZyoIGNocm9tZSDkuIvmnInmlYjvvIkiLAogICAgICAgICAgICAgICAgZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMToi5rOo6YeK55qE5pyA5aSn5a695bqmIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDI6IiDkuKrlrZfnrKYiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUF1dG9PcGVuU2l0ZXM6IuiHquWKqOaJk+W8gOWbvuW6k+eahOe9keermeato+WImSIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5RWRpdFNpdGU6IuWcqOe6v+e8lui+keermeeCuSIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3c6IuWbvueJh+eql+WPoyIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbjoi6YCC5bqU5bGP5bmV77yM5bm25LiU5rC05bmz5Z6C55u05bGF5LitIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuVGlwOiLpgILlupTmlrnlvI/kuLpjb250YWlu77yM6Z2eY292ZXIiLAogICAgICAgICAgICAgICAgaW1nV2luZG93RGVmYXVsdFRvb2w6IuaJk+W8gOeql+WPo+aXtum7mOiupOmAieaLqeeahOW3peWFtyIsCiAgICAgICAgICAgICAgICBoYW5kOifmipPmiYsnLAogICAgICAgICAgICAgICAgcm90YXRlOifml4vovawnLAogICAgICAgICAgICAgICAgem9vbTon5pS+5aSn6ZWcJywKICAgICAgICAgICAgICAgIGltZ1dpbmRvd0VzY0tleToiRXNj6ZSu5YWz6ZetIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd0RibENsaWNrSW1nV2luZG93OiLlj4zlh7vlm77niYfnqpflj6PlhbPpl60iLAogICAgICAgICAgICAgICAgaW1nV2luZG93Q2xpY2tPdXRzaWRlOiLngrnlh7vlm77niYflpJbpg6jlhbPpl60iLAogICAgICAgICAgICAgICAgbm9uZTon5pegJywKICAgICAgICAgICAgICAgIGNsaWNrOifljZXlh7snLAogICAgICAgICAgICAgICAgZGJsY2xpY2s6J+WPjOWHuycsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJTaG93bjoi6KaG55uW5bGCIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd092ZXJsYXllckNvbG9yOiLpopzoibLlkozkuI3pgI/mmI7luqYiLAogICAgICAgICAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMToi5peL6L2s5pe277yM5oyJ5L2Pc2hpZnTplK7vvIzml4vovaznmoTmraXov5siLAogICAgICAgICAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMjoiIOW6piIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dNb3VzZVdoZWVsWm9vbToi5rua6L2u57yp5pS+IiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd1pvb21SYW5nZToi5rua6L2u57yp5pS+5q+U5L6LIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd1pvb21SYW5nZVRpcDoi57yp5pS+5q+U5L6LKOW/hemhu+S4uuato+aVsCkiLAogICAgICAgICAgICAgICAgb3RoZXJzOiLlhbblroMiLAogICAgICAgICAgICAgICAgd2FpdEltZ0xvYWQ6IuetieWbvueJh+WujOWFqOi9veWFpeWQju+8jOaJjeW8gOWni+aJp+ihjOW8ueWHuuaUvuWkp+etieaTjeS9nCIsCiAgICAgICAgICAgICAgICB3YWl0SW1nTG9hZFRpcDoi5oyJ5L2PY3RybOmUrueahOaXtuWAmSzlj6/ku6XkuLTml7bmiafooYzlkozov5nkuKrorr7lrprnm7jlj43nmoTorr7lrpoiLAogICAgICAgICAgICAgICAgZGVidWc6Iuiwg+ivleaooeW8jyIsCiAgICAgICAgICAgICAgICBmaXJzdEVuZ2luZToi6aaW6YCJ5pCc5Zu+5byV5pOOIiwKICAgICAgICAgICAgICAgIHJlZnJlc2hXaGVuRXJyb3I6Iuivu+WPlumUmeivr++8jOeCueWHu+mHjei9vSIsCiAgICAgICAgICAgICAgICBzd2l0Y2hTbGlkZToi5byA5YWz5L6n6L655qCPIiwKICAgICAgICAgICAgICAgIGNvdW50RG93bjoi5YCS6K6h5pe2IiwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiemgtVFciOgogICAgICAgICAgICBpMThuRGF0YT17CiAgICAgICAgICAgICAgICBzaGFyZToi5YiG5LqrIiwKICAgICAgICAgICAgICAgIGxvYWRBbGw6Iui8ieWFpeabtOWkmiIsCiAgICAgICAgICAgICAgICBsb2FkZWRBbGw6Iui8ieWFpeWujOeVoiIsCiAgICAgICAgICAgICAgICBsb2FkaW5nOiLmraPlnKjovInlhaUiLAogICAgICAgICAgICAgICAgbG9hZEFsbFRpcDoi6LyJ5YWl5LiL5LiA6aCB55qE5ZyW54mHIiwKICAgICAgICAgICAgICAgIGZpZGRsZToi5oqY6aiwIiwKICAgICAgICAgICAgICAgIGZpZGRsZVRpcDoi5b2I5Ye65ZyW54mH6YCy6KGM6KSH6Zuc5pON5L2cIiwKICAgICAgICAgICAgICAgIGNvbGxlY3Q6IuaUtuiXjyIsCiAgICAgICAgICAgICAgICBjb2xsZWN0ZWQ6IuW3suaUtuiXjyIsCiAgICAgICAgICAgICAgICBleGl0Q29sbGVjdGlvbjoi6YCA5Ye65pS26JePIiwKICAgICAgICAgICAgICAgIGV4aXRDb2xsZWN0aW9uVGlwOiLpu57mk4rpgIDlh7rmlLbol4/mqKHlvI8iLAogICAgICAgICAgICAgICAgbm9Db2xsZWN0aW9uWWV0OiLkvaDpgoTmnKjmnInmlLbol4/ku7vkvZXlnJbniYciLAogICAgICAgICAgICAgICAgY29sbGVjdERldGFpbDoi5o+P6L+wIiwKICAgICAgICAgICAgICAgIGNvbGxlY3REZXRhaWxUaXA6Iue1puaUtuiXj+eahOWclueJh+a3u+WKoOS4gOS6m+aPj+i/sOWQpyIsCiAgICAgICAgICAgICAgICBwbGF5U2xpZGU6IuaSreaUvuW5u+eHiOeJhyIsCiAgICAgICAgICAgICAgICBzbGlkZUdhcDoi6ZaT6ZqUKHMpIiwKICAgICAgICAgICAgICAgIHNsaWRlR2FwVGlwOiLplpPpmpTmmYLplpPvvIzllq7kvY0o56eSKSIsCiAgICAgICAgICAgICAgICBzbGlkZUJhY2s6IuW+jOmAgCIsCiAgICAgICAgICAgICAgICBzbGlkZUJhY2tUaXA6IuW+nuW+jOW+gOWJjeaSreaUviIsCiAgICAgICAgICAgICAgICBzbGlkZVdhaXQ6IuetieW+heWclueJh+iugOWPliIsCiAgICAgICAgICAgICAgICBzbGlkZVdhaXRUaXA6IuW+nuavj+W8teWclueJh+WujOWFqOiugOWPluWujOaIkOW+jOaJjemWi+Wni+WAkuioiOaZgiIsCiAgICAgICAgICAgICAgICBzbGlkZVNraXBFcnJvcjoi6Lez6YGO6Yyv6Kqk5ZyW54mHIiwKICAgICAgICAgICAgICAgIHNsaWRlU2tpcEVycm9yVGlwOiLlv6vpgJ/ot7PpgY7oroDlj5bpjK/oqqTnmoTlnJbniYciLAogICAgICAgICAgICAgICAgdHlwZToi6aGe5YilIiwKICAgICAgICAgICAgICAgIHR5cGVUaXA6IumBuOaTh+WclueJh+mhnuWIpSIsCiAgICAgICAgICAgICAgICBhZHZhbmNlZFJ1bGVzOiLpq5jntJropo/liYciLAogICAgICAgICAgICAgICAgYWR2YW5jZWRSdWxlc1RpcDoi55Sx6auY57Sa6KaP5YmH5Yy56YWN5Ye65L6G55qEIiwKICAgICAgICAgICAgICAgIHRwUnVsZXM6IumAmumFjeimj+WJhyIsCiAgICAgICAgICAgICAgICB0cFJ1bGVzVGlwOiLnlLHpgJrphY3opo/liYfljLnphY3lh7rkvobnmoQiLAogICAgICAgICAgICAgICAgc2NhbGVSdWxlczoi57iu5pS+6YGO55qEIiwKICAgICAgICAgICAgICAgIHNjYWxlUnVsZXNUaXA6Impz6Ieq5YuV5p+l5om+77yM55u45bCN6aCB6Z2i6aGv56S655qE5ZyW54mH5pyJ57iu5pS+6YGO55qEIiwKICAgICAgICAgICAgICAgIG5vU2NhbGVSdWxlczoi54Sh57iu5pS+6YGOIiwKICAgICAgICAgICAgICAgIG5vU2NhbGVSdWxlc1RpcDoianPoh6rli5Xmn6Xmib7vvIznhKHnuK7mlL7pgY7nmoTvvIzkvYbmmK/mu7/otrPkuIDlrprnmoTlpKflsI8iLAogICAgICAgICAgICAgICAgc21hbGxSdWxlczoi5bCP5bC65a+455qEIiwKICAgICAgICAgICAgICAgIHNtYWxsUnVsZXNUaXA6IuWwj+WwuuWvuOWclueJh++8jOWvpumam+WwuuWvuOeahOmrmOWSjOWvrOmDveWwj+aWvCN0I+WDj+e0oCIsCiAgICAgICAgICAgICAgICBjb21tYW5kOiLlkb3ku6QiLAogICAgICAgICAgICAgICAgY29tbWFuZFRpcDoi5ZG95Luk6I+c5ZauIiwKICAgICAgICAgICAgICAgIG9ubGluZUVkaXQ6IuWcqOe3mue3qOi8ryIsCiAgICAgICAgICAgICAgICBvbmxpbmVFZGl0VGlwOiLkvb/nlKgjdCPlnKjnt5rnt6jovK/oqbLlnJbniYciLAogICAgICAgICAgICAgICAgb3BlbkluTmV3V2luZG93OiLmlrDnqpflj6PmiZPplosiLAogICAgICAgICAgICAgICAgb3BlbkluTmV3V2luZG93VGlwOiLmlrDnqpflj6PmiZPplovlnJbniYciLAogICAgICAgICAgICAgICAgZmluZEluUGFnZToi5a6a5L2N5Yiw5ZyW54mHIiwKICAgICAgICAgICAgICAgIGZpbmRJblBhZ2VUaXA6Iua7vuWLleWIsOeVtuWJjeWclueJh+aJgOWcqOeahOS9jee9riIsCiAgICAgICAgICAgICAgICB2aWV3Q29sbGVjdGlvbjoi5p+l55yL5pS26JePIiwKICAgICAgICAgICAgICAgIHZpZXdDb2xsZWN0aW9uVGlwOiLmn6XnnIvmiYDmnInmlLbol4/nmoTlnJbniYciLAogICAgICAgICAgICAgICAgaW5Db2xsZWN0aW9uOiLmlLbol4/mqKHlvI/kuK3vvIznhKHms5Xkvb/nlKgiLAogICAgICAgICAgICAgICAgY2FudEZpbmQ6IuWclueJh+S4jeWcqOaWh+aqlOS4re+8jOaIluiAheiiq+maseiXj+S6hu+8jOeEoeazleWumuS9je+8gSIsCiAgICAgICAgICAgICAgICBleHBvcnRJbWFnZXM6IuWwjuWHuuWkp+WcliIsCiAgICAgICAgICAgICAgICBleHBvcnRJbWFnZXNUaXA6IuWwjuWHuuaJgOacieWclueJh+WIsOaWsOeql+WPoyIsCiAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlOiLkuIvovInlnJbniYciLAogICAgICAgICAgICAgICAgZG93bmxvYWRJbWFnZVRpcDoi5LiL6LyJ55W25YmN5ZyW54mHIiwKICAgICAgICAgICAgICAgIGNvcHlJbWFnZXNVcmw6Iuikh+ijveaJgOaciSIsCiAgICAgICAgICAgICAgICBjb3B5SW1hZ2VzVXJsVGlwOiLopIfoo73miYDmnInlpKflnJblnLDlnYAiLAogICAgICAgICAgICAgICAgY29weVN1Y2Nlc3M6IuW3suaIkOWKn+ikh+ijvSAjdCMg5by15aSn5ZyW5Zyw5Z2AIiwKICAgICAgICAgICAgICAgIGF1dG9SZWZyZXNoOiLoh6rli5Xph43ovIkiLAogICAgICAgICAgICAgICAgYXV0b1JlZnJlc2hUaXA6IuacgOW+jOW5vuW8teWclueJh+aZgu+8jOa7vuWLleS4u+eql+WPo+WIsOacgOW6lemDqO+8jOeEtuW+jOiHquWLlei8ieWFpeaWsOeahOWclueJhyIsCiAgICAgICAgICAgICAgICBlbnRlckZ1bGxzYzoi6YCy5YWl5YWo5bGPIiwKICAgICAgICAgICAgICAgIGV4aXRGdWxsc2M6IumAgOWHuuWFqOWxjyIsCiAgICAgICAgICAgICAgICBjb25maWc6Iuioree9riIsCiAgICAgICAgICAgICAgICBjbG9zZUdhbGxlcnk6IumXnOmWieW6qyIsCiAgICAgICAgICAgICAgICByZXR1cm5Ub0dhbGxlcnk6IuWbnuWIsOW6qyIsCiAgICAgICAgICAgICAgICBwaWNJbmZvOiLlnJbniYfkv6Hmga8iLAogICAgICAgICAgICAgICAgcGljTm90ZToi5ZyW54mH5rOo6YeLIiwKICAgICAgICAgICAgICAgIHJlc29sdXRpb246Iuino+aekOW6piIsCiAgICAgICAgICAgICAgICBwaWNOdW06IuWclueJh+W8teaVuCIsCiAgICAgICAgICAgICAgICBzY2FsZVJhdGlvOiLnuK7mlL7mr5QiLAogICAgICAgICAgICAgICAgc2ltaWxhckltYWdlOiLku6XlnJbmkJzlnJYiLAogICAgICAgICAgICAgICAgc2NhbGU6Iue4ruaUviIsCiAgICAgICAgICAgICAgICBob3Jpem9udGFsRmxpcDoi5rC05bmz57+76L2JIiwKICAgICAgICAgICAgICAgIHZlcnRpY2FsRmxpcDoi5Z6C55u057+76L2JIiwKICAgICAgICAgICAgICAgIGFjdHVhbEJ0bjon5p+l55yL5Y6f5aeLKEEpJywKICAgICAgICAgICAgICAgIHNlYXJjaEJ0bjon5p+l5om+5Y6f5ZyWKFMpJywKICAgICAgICAgICAgICAgIGdhbGxlcnlCdG46J+afpeeci+W6qyhHKScsCiAgICAgICAgICAgICAgICBjdXJyZW50QnRuOifmn6XnnIvnlbbliY0oQyknLAogICAgICAgICAgICAgICAgbWFnbmlmaWVyQnRuOifmlL7lpKfpj6EoTSknLAogICAgICAgICAgICAgICAgcGljVGl0bGU6IuWclueJh+aomemhjCIsCiAgICAgICAgICAgICAgICBwaWNOdW06IuWclueJh+aVuOmHjyIsCiAgICAgICAgICAgICAgICBleHBvcnRJbWFnZXNVcmw6IuWwjuWHuuWclueJh+mPiOaOpSIsCiAgICAgICAgICAgICAgICBleHBvcnRJbWFnZXNVcmxQb3A6IkN0cmwrQ+ikh+ijveWclueJh+mPiOaOpSIsCiAgICAgICAgICAgICAgICBiZWdpblNlYXJjaEltZzoiI3Qj6K2Y5ZyW6ZaL5aeL4oCm4oCmIiwKICAgICAgICAgICAgICAgIGZpbmROb1BpYzoi5pyq5om+5Yiw5Y6f5ZyWIiwKICAgICAgICAgICAgICAgIGZpbmRPdmVyQmVnaW5Mb2FkOiIjdCPorZjlnJbntZDmnZ/vvIzlhbHmib7liLAjdCPlvLXljLnphY3lnJbniYfvvIzplovlp4vovInlhaXnrKzkuIDlvLUiLAogICAgICAgICAgICAgICAgbG9hZE5leHRTaW1pbGFyOiLljp/lnJbovInlhaXlpLHmlZfvvIzlmJfoqabovInlhaXkuIvkuIDntZDmnpzigKbigKYiLAogICAgICAgICAgICAgICAgbG9hZEVycm9yOiLovInlhaXlpLHmlZciLAogICAgICAgICAgICAgICAgb3BlbkhvbWVQYWdlOiLpu57mk4rmraTomZXmiZPplovkuLvpoIEiLAogICAgICAgICAgICAgICAgcG9zaXRpb246Iumhr+ekuuS9jee9riIsCiAgICAgICAgICAgICAgICB0b3BMZWZ0OiAn5ZyW54mH5bem5LiK6KeSJywKICAgICAgICAgICAgICAgIHRvcFJpZ2h0OiAn5ZyW54mH5Y+z5LiK6KeSJywKICAgICAgICAgICAgICAgIGJvdHRvbVJpZ2h0OiAn5ZyW54mH5Y+z5LiL6KeSJywKICAgICAgICAgICAgICAgIGJvdHRvbUxlZnQ6ICflnJbniYflt6bkuIvop5InLAogICAgICAgICAgICAgICAgdG9wQ2VudGVyOiAn5ZyW54mH5q2j5LiK5pa5JywKICAgICAgICAgICAgICAgIGJvdHRvbUNlbnRlcjogJ+WclueJh+ato+S4i+aWuScsCiAgICAgICAgICAgICAgICBmbG9hdEJhcjoi5rWu5YuV5bel5YW35qyEIiwKICAgICAgICAgICAgICAgIHNob3dEZWxheToi6aGv56S65bu25pmCIiwKICAgICAgICAgICAgICAgIG1zOiLmr6vnp5IiLAogICAgICAgICAgICAgICAgaGlkZToi6Zqx6JePIiwKICAgICAgICAgICAgICAgIGhpZGVEZWxheToi6Zqx6JeP5bu25pmCIiwKICAgICAgICAgICAgICAgIGZvcmNlU2hvdzoi6Z2e57iu5pS+5ZyW54mH77yM6LaF6YGO6Kmy5bC65a+477yM6aGv56S65rWu5qGGIiwKICAgICAgICAgICAgICAgIGZvcmNlU2hvd1RpcDoi6Z2e57iu5pS+55qE5ZyW54mH5aSn5bCP6LaF6YGO5LiL6Z2i6Kit5a6a55qE5bC65a+45pmC6aGv56S65rWu5YuV5bel5YW35qyEIiwKICAgICAgICAgICAgICAgIHB4OiLlg4/ntKAiLAogICAgICAgICAgICAgICAgbWluU2l6ZUxpbWl0OiLnuK7mlL7lnJbniYfvvIzotoXpgY7oqbLlsLrlr7jvvIzpoa/npLrmta7moYYiLAogICAgICAgICAgICAgICAgbWluU2l6ZUxpbWl0VGlwOiLlnJbniYfooqvnuK7mlL4o5ZyW54mH5Y6f5aeL5aSn5bCP6IiH5a+m6Zqb5aSn5bCP5LiN5LiA6Ie0KeW+jCzljp/lnJbplbflr6zlpKfmlrzoqK3lrprlgLzmmYLpoa/npLrmta7li5Xlt6XlhbfmrIQiLAogICAgICAgICAgICAgICAgbGlzdGVuQmc6Iuebo+iBveiDjOaZr+WcliIsCiAgICAgICAgICAgICAgICBsaXN0ZW5CZ1RpcDoi5Zyo5pyJ6IOM5pmv5ZyW55qE5YWD57Sg5LiK6aGv56S65oe45rWu5qGGIiwKICAgICAgICAgICAgICAgIGJ1dG9uT3JkZXI6IuW3peWFt+ashOWcluaomeaOkuW6jyIsCiAgICAgICAgICAgICAgICBrZXlzRW5hYmxlOiLllZ/nlKjku6XkuIvlv6vmjbfpjbUiLAogICAgICAgICAgICAgICAga2V5c0FjdHVhbDoi5omT6ZaL5aSn5ZyWIiwKICAgICAgICAgICAgICAgIGtleXNBY3R1YWxUaXA6IueVtuWHuuePvuaHuOa1ruaineaZguaMieS4i+atpOaMiemNteaJk+mWi+Wkp+WcliIsCiAgICAgICAgICAgICAgICBrZXlzU2VhcmNoOiLmn6Xmib7ljp/lnJYiLAogICAgICAgICAgICAgICAga2V5c1NlYXJjaFRpcDoi55W25Ye654++5oe45rWu5qKd5pmC5oyJ5LiL5q2k5oyJ6Y215p+l5om+5Y6f5ZyWIiwKICAgICAgICAgICAgICAgIGtleXNDdXJyZW50OiLmiZPplovnlbbliY3lnJbniYciLAogICAgICAgICAgICAgICAga2V5c0N1cnJlbnRUaXA6IueVtuWHuuePvuaHuOa1ruaineaZguaMieS4i+atpOaMiemNteaJk+mWi+eVtuWJjemhr+ekuueahOWclueJhyIsCiAgICAgICAgICAgICAgICBrZXlzTWFnbmlmaWVyOiLmiZPplovmlL7lpKfpj6Hop4Dlr58iLAogICAgICAgICAgICAgICAga2V5c01hZ25pZmllclRpcDoi55W25Ye654++5oe45rWu5qKd5pmC5oyJ5LiL5q2k5oyJ6Y215omT6ZaL5pS+5aSn6Y+h6KeA5a+fIiwKICAgICAgICAgICAgICAgIGtleXNHYWxsZXJ5OiLmiZPplovlnJbluqsiLAogICAgICAgICAgICAgICAga2V5c0dhbGxlcnlUaXA6IueVtuWHuuePvuaHuOa1ruaineaZguaMieS4i+atpOaMiemNteaJk+mWi+WcluW6qyIsCiAgICAgICAgICAgICAgICBtYWduaWZpZXI6IuaUvuWkp+mPoSIsCiAgICAgICAgICAgICAgICBtYWduaWZpZXJSYWRpdXM6Ium7mOiqjeWNiuW+kSIsCiAgICAgICAgICAgICAgICBtYWduaWZpZXJXaGVlbFpvb21FbmFibGVkOiLllZ/nlKjmu77ovKrnuK7mlL4iLAogICAgICAgICAgICAgICAgbWFnbmlmaWVyV2hlZWxab29tUmFuZ2U6Iua7vui8que4ruaUvueahOWAjeeOhyIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5OiLlnJbluqsiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuOiLlsI3lnJbniYfpgLLooYznuK7mlL7ku6Xpganmh4nlsY/luZUiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuU21hbGw6IuWwj+WcluS5n+e4ruaUvuS7pemBqeaHieWxj+W5lSIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW5UaXA6IumBqeaHieaWueW8j+eCumNvbnRhaW7vvIzpnZ5jb3ZlciIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2U6IuWkp+Wclua7vuWLleWIsOW6leW+jOWIh+aPm+WclueJhyIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2VUaXA6IuWPlua2iOS4iuS4gOmBuOmgheW+jOaJjeacieaViCIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5RXhwb3J0VHlwZToi5ZyW54mH5bCO5Ye66buY6KqN5o6S5bqPIiwKICAgICAgICAgICAgICAgIGdyaWQ6J+W5s+mLquaOkuW6jycsCiAgICAgICAgICAgICAgICBncmlkQmlnOifljp/lnJblubPpi6onLAogICAgICAgICAgICAgICAgbGlzdDon5YiX6KGo5o6S5bqPJywKICAgICAgICAgICAgICAgIGdhbGxlcnlMb2FkQWxsOiLovInlhaXmm7TlpJrlnJbniYfmmYLoh6rli5XomZXnkIblhajpg6jpoIEiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUxvYWRBbGxUaXA6IuiLpemggeaVuOmBjuWkmuWPr+iDveW9semfv+mrlOmplyIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5U2NhbGVTbWFsbFNpemUxOiLlr6bpmpvlsLrlr7jnmoTpq5jlkozlr6zpg73lsI/mlrwgIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTI6IiDlg4/ntKDliYfmrbjlhaXlsI/lsLrlr7jlnJbniYciLAogICAgICAgICAgICAgICAgZ2FsbGVyeVNob3dTbWFsbFNpemU6Ium7mOiqjemhr+ekuuWwj+WwuuWvuOWclueJhyIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5VHJhbnNpdGlvbjoi6aGv56S65ZyW5bqr5YiH5o+b5ZyW54mH55qE54m55pWIIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlTaWRlYmFyUG9zaXRpb246Iue4rueVpeWcluashOS9jee9riIsCiAgICAgICAgICAgICAgICBib3R0b206J+W6lemDqCcsCiAgICAgICAgICAgICAgICByaWdodDon5Y+z5YG0JywKICAgICAgICAgICAgICAgIGxlZnQ6J+W3puWBtCcsCiAgICAgICAgICAgICAgICB0b3A6J+mggumDqCcsCiAgICAgICAgICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemU6IumrmOW6piIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemVUaXA6Iue4rueVpeWcluashOeahOmrmO+8iOWmguaenOaYr+awtOW5s+aUvue9ru+8ieaIluiAheWvrO+8iOWmguaenOaYr+WeguebtOaUvue9ru+8iSIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5TWF4MToi5pyA5aSa6aCQ6K6AICIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5TWF4MjoiIOW8teWclueJh++8iOWJjeW+jOWQhOWkmuWwkeW8te+8iSIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5QXV0b1pvb206Iue4ruaUvuaUueWbniAxMDAl77yIY2hyb21l77yJIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlBdXRvWm9vbVRpcDoi5aaC5p6c5pyJ5pS+5aSn77yM5YmH5oqK5ZyW54mH5Y+KIHNpZGViYXIg6YOo5YiG55qE57iu5pS+5pS55ZueIDEwMCXvvIzlop7lpKflj6/oppbpnaLnqY3vvIjlg4XlnKggY2hyb21lIOS4i+acieaViO+8iSIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5RGVzY3JpcHRpb25MZW5ndGgxOiLms6jph4vnmoTmnIDlpKflr6zluqYiLAogICAgICAgICAgICAgICAgZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMjoiIOWAi+Wtl+WFgyIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5QXV0b09wZW5TaXRlczoi6Ieq5YuV5omT6ZaL5ZyW5bqr55qE57ay56uZ5q2j5YmHIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlFZGl0U2l0ZToi5Zyo57ea57eo6Lyv56uZ6bueIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvdzoi5ZyW54mH56qX5Y+jIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuOiLpganmh4nlsY/luZXvvIzkuKbkuJTmsLTlubPlnoLnm7TlsYXkuK0iLAogICAgICAgICAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5UaXA6IumBqeaHieaWueW8j+eCumNvbnRhaW7vvIzpnZ5jb3ZlciIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dEZWZhdWx0VG9vbDoi5omT6ZaL56qX5Y+j5pmC6buY6KqN6YG45pOH55qE5bel5YW3IiwKICAgICAgICAgICAgICAgIGhhbmQ6J+aKk+aJiycsCiAgICAgICAgICAgICAgICByb3RhdGU6J+aXi+i9iScsCiAgICAgICAgICAgICAgICB6b29tOifmlL7lpKfpj6EnLAogICAgICAgICAgICAgICAgaW1nV2luZG93RXNjS2V5OiJFc2PpjbXpl5zplokiLAogICAgICAgICAgICAgICAgaW1nV2luZG93RGJsQ2xpY2tJbWdXaW5kb3c6IumbmeaTiuWclueJh+eql+WPo+mXnOmWiSIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dDbGlja091dHNpZGU6Ium7nuaTiuWclueJh+WklumDqOmXnOmWiSIsCiAgICAgICAgICAgICAgICBub25lOifnhKEnLAogICAgICAgICAgICAgICAgY2xpY2s6J+WWruaTiicsCiAgICAgICAgICAgICAgICBkYmxjbGljazon6ZuZ5pOKJywKICAgICAgICAgICAgICAgIGltZ1dpbmRvd092ZXJsYXllclNob3duOiLopobok4vlsaQiLAogICAgICAgICAgICAgICAgaW1nV2luZG93T3ZlcmxheWVyQ29sb3I6Iumhj+iJsuWSjOS4jemAj+aYjuW6piIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dTaGlmdFJvdGF0ZVN0ZXAxOiLml4vovYnmmYLvvIzmjInkvY9zaGlmdOmNte+8jOaXi+i9ieeahOatpemAsiIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dTaGlmdFJvdGF0ZVN0ZXAyOiIg5bqmIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd01vdXNlV2hlZWxab29tOiLmu77ovKrnuK7mlL4iLAogICAgICAgICAgICAgICAgaW1nV2luZG93Wm9vbVJhbmdlOiLmu77ovKrnuK7mlL7mr5TkvosiLAogICAgICAgICAgICAgICAgaW1nV2luZG93Wm9vbVJhbmdlVGlwOiLnuK7mlL7mr5Tkvoso5b+F6aCI54K65q2j5pW4KSIsCiAgICAgICAgICAgICAgICBvdGhlcnM6IuWFtuWugyIsCiAgICAgICAgICAgICAgICB3YWl0SW1nTG9hZDoi562J5ZyW54mH5a6M5YWo6LyJ5YWl5b6M77yM5omN6ZaL5aeL5Z+36KGM5b2I5Ye65pS+5aSn562J5pON5L2cIiwKICAgICAgICAgICAgICAgIHdhaXRJbWdMb2FkVGlwOiLmjInkvY9jdHJs6Y2155qE5pmC5YCZLOWPr+S7peiHqOaZguWft+ihjOWSjOmAmeWAi+ioreWumuebuOWPjeeahOioreWumiIsCiAgICAgICAgICAgICAgICBkZWJ1Zzoi6Kq/6Kmm5qih5byPIiwKICAgICAgICAgICAgICAgIGZpcnN0RW5naW5lOiLpppbpgbjmkJzlnJblvJXmk44iLAogICAgICAgICAgICAgICAgcmVmcmVzaFdoZW5FcnJvcjoi6K6A5Y+W6Yyv6Kqk77yM6bue5pOK6YeN6LyJIiwKICAgICAgICAgICAgICAgIHN3aXRjaFNsaWRlOiLplovpl5zlgbTpgormrIQiLAogICAgICAgICAgICAgICAgY291bnREb3duOiLlgJLoqIjmmYIiLAogICAgICAgICAgICB9OwogICAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBpMThuRGF0YT17CiAgICAgICAgICAgICAgICBzaGFyZToic2hhcmUiLAogICAgICAgICAgICAgICAgbG9hZEFsbDoibG9hZEFsbCIsCiAgICAgICAgICAgICAgICBsb2FkZWRBbGw6ImxvYWRlZEFsbCIsCiAgICAgICAgICAgICAgICBsb2FkaW5nOiJsb2FkaW5nIiwKICAgICAgICAgICAgICAgIGxvYWRBbGxUaXA6ImxvYWRBbGxUaXAiLAogICAgICAgICAgICAgICAgZmlkZGxlOiJmaWRkbGUiLAogICAgICAgICAgICAgICAgZmlkZGxlVGlwOiJmaWRkbGVUaXAiLAogICAgICAgICAgICAgICAgY29sbGVjdDoiY29sbGVjdCIsCiAgICAgICAgICAgICAgICBjb2xsZWN0ZWQ6ImNvbGxlY3RlZCIsCiAgICAgICAgICAgICAgICBleGl0Q29sbGVjdGlvbjoiZXhpdENvbGxlY3Rpb24iLAogICAgICAgICAgICAgICAgZXhpdENvbGxlY3Rpb25UaXA6ImV4aXRDb2xsZWN0aW9uVGlwIiwKICAgICAgICAgICAgICAgIG5vQ29sbGVjdGlvbllldDoibm9Db2xsZWN0aW9uWWV0IiwKICAgICAgICAgICAgICAgIGNvbGxlY3REZXRhaWw6ImNvbGxlY3REZXRhaWwiLAogICAgICAgICAgICAgICAgY29sbGVjdERldGFpbFRpcDoiY29sbGVjdERldGFpbFRpcCIsCiAgICAgICAgICAgICAgICBwbGF5U2xpZGU6InBsYXlTbGlkZSIsCiAgICAgICAgICAgICAgICBzbGlkZUdhcDoic2xpZGVHYXAiLAogICAgICAgICAgICAgICAgc2xpZGVHYXBUaXA6InNsaWRlR2FwVGlwIiwKICAgICAgICAgICAgICAgIHNsaWRlQmFjazoic2xpZGVCYWNrIiwKICAgICAgICAgICAgICAgIHNsaWRlQmFja1RpcDoic2xpZGVCYWNrVGlwIiwKICAgICAgICAgICAgICAgIHNsaWRlV2FpdDoic2xpZGVXYWl0IiwKICAgICAgICAgICAgICAgIHNsaWRlV2FpdFRpcDoic2xpZGVXYWl0VGlwIiwKICAgICAgICAgICAgICAgIHNsaWRlU2tpcEVycm9yOiJzbGlkZVNraXBFcnJvciIsCiAgICAgICAgICAgICAgICBzbGlkZVNraXBFcnJvclRpcDoic2xpZGVTa2lwRXJyb3JUaXAiLAogICAgICAgICAgICAgICAgdHlwZToidHlwZSIsCiAgICAgICAgICAgICAgICB0eXBlVGlwOiJ0eXBlVGlwIiwKICAgICAgICAgICAgICAgIGFkdmFuY2VkUnVsZXM6ImFkdmFuY2VkUnVsZXMiLAogICAgICAgICAgICAgICAgYWR2YW5jZWRSdWxlc1RpcDoiYWR2YW5jZWRSdWxlc1RpcCIsCiAgICAgICAgICAgICAgICB0cFJ1bGVzOiJ0cFJ1bGVzIiwKICAgICAgICAgICAgICAgIHRwUnVsZXNUaXA6InRwUnVsZXNUaXAiLAogICAgICAgICAgICAgICAgc2NhbGVSdWxlczoic2NhbGVSdWxlcyIsCiAgICAgICAgICAgICAgICBzY2FsZVJ1bGVzVGlwOiJzY2FsZVJ1bGVzVGlwIiwKICAgICAgICAgICAgICAgIG5vU2NhbGVSdWxlczoibm9TY2FsZVJ1bGVzIiwKICAgICAgICAgICAgICAgIG5vU2NhbGVSdWxlc1RpcDoibm9TY2FsZVJ1bGVzVGlwIiwKICAgICAgICAgICAgICAgIHNtYWxsUnVsZXM6InNtYWxsUnVsZXMiLAogICAgICAgICAgICAgICAgc21hbGxSdWxlc1RpcDoic21hbGxSdWxlc1RpcCIsCiAgICAgICAgICAgICAgICBjb21tYW5kOiJjb21tYW5kIiwKICAgICAgICAgICAgICAgIGNvbW1hbmRUaXA6ImNvbW1hbmRUaXAiLAogICAgICAgICAgICAgICAgb25saW5lRWRpdDoib25saW5lRWRpdCIsCiAgICAgICAgICAgICAgICBvbmxpbmVFZGl0VGlwOiJvbmxpbmVFZGl0VGlwIiwKICAgICAgICAgICAgICAgIG9wZW5Jbk5ld1dpbmRvdzoib3BlbkluTmV3V2luZG93IiwKICAgICAgICAgICAgICAgIG9wZW5Jbk5ld1dpbmRvd1RpcDoib3BlbkluTmV3V2luZG93VGlwIiwKICAgICAgICAgICAgICAgIGZpbmRJblBhZ2U6ImZpbmRJblBhZ2UiLAogICAgICAgICAgICAgICAgZmluZEluUGFnZVRpcDoiZmluZEluUGFnZVRpcCIsCiAgICAgICAgICAgICAgICB2aWV3Q29sbGVjdGlvbjoidmlld0NvbGxlY3Rpb24iLAogICAgICAgICAgICAgICAgdmlld0NvbGxlY3Rpb25UaXA6InZpZXdDb2xsZWN0aW9uVGlwIiwKICAgICAgICAgICAgICAgIGluQ29sbGVjdGlvbjoiaW5Db2xsZWN0aW9uIiwKICAgICAgICAgICAgICAgIGNhbnRGaW5kOiJjYW50RmluZCIsCiAgICAgICAgICAgICAgICBleHBvcnRJbWFnZXM6ImV4cG9ydEltYWdlcyIsCiAgICAgICAgICAgICAgICBleHBvcnRJbWFnZXNUaXA6ImV4cG9ydEltYWdlc1RpcCIsCiAgICAgICAgICAgICAgICBkb3dubG9hZEltYWdlOiJkb3dubG9hZEltYWdlIiwKICAgICAgICAgICAgICAgIGRvd25sb2FkSW1hZ2VUaXA6ImRvd25sb2FkSW1hZ2VUaXAiLAogICAgICAgICAgICAgICAgY29weUltYWdlc1VybDoiY29weUltYWdlc1VybCIsCiAgICAgICAgICAgICAgICBjb3B5SW1hZ2VzVXJsVGlwOiJjb3B5SW1hZ2VzVXJsVGlwIiwKICAgICAgICAgICAgICAgIGNvcHlTdWNjZXNzOiJjb3B5U3VjY2VzcyIsCiAgICAgICAgICAgICAgICBhdXRvUmVmcmVzaDoiYXV0b1JlZnJlc2giLAogICAgICAgICAgICAgICAgYXV0b1JlZnJlc2hUaXA6ImF1dG9SZWZyZXNoVGlwIiwKICAgICAgICAgICAgICAgIGVudGVyRnVsbHNjOiJlbnRlckZ1bGxzYyIsCiAgICAgICAgICAgICAgICBleGl0RnVsbHNjOiJleGl0RnVsbHNjIiwKICAgICAgICAgICAgICAgIGNvbmZpZzoiY29uZmlnIiwKICAgICAgICAgICAgICAgIGNsb3NlR2FsbGVyeToiY2xvc2VHYWxsZXJ5IiwKICAgICAgICAgICAgICAgIHJldHVyblRvR2FsbGVyeToicmV0dXJuVG9HYWxsZXJ5IiwKICAgICAgICAgICAgICAgIHBpY0luZm86InBpY0luZm8iLAogICAgICAgICAgICAgICAgcGljTm90ZToicGljTm90ZSIsCiAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiJyZXNvbHV0aW9uIiwKICAgICAgICAgICAgICAgIHBpY051bToicGljTnVtIiwKICAgICAgICAgICAgICAgIHNjYWxlUmF0aW86InNjYWxlUmF0aW8iLAogICAgICAgICAgICAgICAgc2ltaWxhckltYWdlOiJzaW1pbGFySW1hZ2UiLAogICAgICAgICAgICAgICAgc2NhbGU6InNjYWxlIiwKICAgICAgICAgICAgICAgIGhvcml6b250YWxGbGlwOiJob3Jpem9udGFsRmxpcCIsCiAgICAgICAgICAgICAgICB2ZXJ0aWNhbEZsaXA6InZlcnRpY2FsRmxpcCIsCiAgICAgICAgICAgICAgICBhY3R1YWxCdG46ImFjdHVhbEJ0biIsCiAgICAgICAgICAgICAgICBzZWFyY2hCdG46InNlYXJjaEJ0biIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5QnRuOiJnYWxsZXJ5QnRuIiwKICAgICAgICAgICAgICAgIGN1cnJlbnRCdG46ImN1cnJlbnRCdG4iLAogICAgICAgICAgICAgICAgbWFnbmlmaWVyQnRuOiJtYWduaWZpZXJCdG4iLAogICAgICAgICAgICAgICAgcGljVGl0bGU6InBpY1RpdGxlIiwKICAgICAgICAgICAgICAgIHBpY051bToicGljTnVtIiwKICAgICAgICAgICAgICAgIGV4cG9ydEltYWdlc1VybDoiZXhwb3J0SW1hZ2VzVXJsIiwKICAgICAgICAgICAgICAgIGV4cG9ydEltYWdlc1VybFBvcDoiZXhwb3J0SW1hZ2VzVXJsUG9wIiwKICAgICAgICAgICAgICAgIGJlZ2luU2VhcmNoSW1nOiJiZWdpblNlYXJjaEltZyIsCiAgICAgICAgICAgICAgICBmaW5kTm9QaWM6ImZpbmROb1BpYyIsCiAgICAgICAgICAgICAgICBmaW5kT3ZlckJlZ2luTG9hZDoiZmluZE92ZXJCZWdpbkxvYWQiLAogICAgICAgICAgICAgICAgbG9hZE5leHRTaW1pbGFyOiJsb2FkTmV4dFNpbWlsYXIiLAogICAgICAgICAgICAgICAgbG9hZEVycm9yOiJsb2FkRXJyb3IiLAogICAgICAgICAgICAgICAgb3BlbkhvbWVQYWdlOiJvcGVuSG9tZVBhZ2UiLAogICAgICAgICAgICAgICAgcG9zaXRpb246InBvc2l0aW9uIiwKICAgICAgICAgICAgICAgIHRvcExlZnQ6InRvcExlZnQiLAogICAgICAgICAgICAgICAgdG9wUmlnaHQ6InRvcFJpZ2h0IiwKICAgICAgICAgICAgICAgIGJvdHRvbVJpZ2h0OiJib3R0b21SaWdodCIsCiAgICAgICAgICAgICAgICBib3R0b21MZWZ0OiJib3R0b21MZWZ0IiwKICAgICAgICAgICAgICAgIHRvcENlbnRlcjoidG9wQ2VudGVyIiwKICAgICAgICAgICAgICAgIGJvdHRvbUNlbnRlcjoiYm90dG9tQ2VudGVyIiwKICAgICAgICAgICAgICAgIGZsb2F0QmFyOiJmbG9hdEJhciIsCiAgICAgICAgICAgICAgICBzaG93RGVsYXk6InNob3dEZWxheSIsCiAgICAgICAgICAgICAgICBtczoibXMiLAogICAgICAgICAgICAgICAgaGlkZToiaGlkZSIsCiAgICAgICAgICAgICAgICBoaWRlRGVsYXk6ImhpZGVEZWxheSIsCiAgICAgICAgICAgICAgICBmb3JjZVNob3c6ImZvcmNlU2hvdyIsCiAgICAgICAgICAgICAgICBmb3JjZVNob3dUaXA6ImZvcmNlU2hvd1RpcCIsCiAgICAgICAgICAgICAgICBweDoicHgiLAogICAgICAgICAgICAgICAgbWluU2l6ZUxpbWl0OiJtaW5TaXplTGltaXQiLAogICAgICAgICAgICAgICAgbWluU2l6ZUxpbWl0VGlwOiJtaW5TaXplTGltaXRUaXAiLAogICAgICAgICAgICAgICAgbGlzdGVuQmc6Imxpc3RlbkJnIiwKICAgICAgICAgICAgICAgIGxpc3RlbkJnVGlwOiJsaXN0ZW5CZ1RpcCIsCiAgICAgICAgICAgICAgICBidXRvbk9yZGVyOiJidXRvbk9yZGVyIiwKICAgICAgICAgICAgICAgIGtleXNFbmFibGU6ImtleXNFbmFibGUiLAogICAgICAgICAgICAgICAga2V5c0FjdHVhbDoia2V5c0FjdHVhbCIsCiAgICAgICAgICAgICAgICBrZXlzQWN0dWFsVGlwOiJrZXlzQWN0dWFsVGlwIiwKICAgICAgICAgICAgICAgIGtleXNTZWFyY2g6ImtleXNTZWFyY2giLAogICAgICAgICAgICAgICAga2V5c1NlYXJjaFRpcDoia2V5c1NlYXJjaFRpcCIsCiAgICAgICAgICAgICAgICBrZXlzQ3VycmVudDoia2V5c0N1cnJlbnQiLAogICAgICAgICAgICAgICAga2V5c0N1cnJlbnRUaXA6ImtleXNDdXJyZW50VGlwIiwKICAgICAgICAgICAgICAgIGtleXNNYWduaWZpZXI6ImtleXNNYWduaWZpZXIiLAogICAgICAgICAgICAgICAga2V5c01hZ25pZmllclRpcDoia2V5c01hZ25pZmllclRpcCIsCiAgICAgICAgICAgICAgICBrZXlzR2FsbGVyeToia2V5c0dhbGxlcnkiLAogICAgICAgICAgICAgICAga2V5c0dhbGxlcnlUaXA6ImtleXNHYWxsZXJ5VGlwIiwKICAgICAgICAgICAgICAgIG1hZ25pZmllcjoibWFnbmlmaWVyIiwKICAgICAgICAgICAgICAgIG1hZ25pZmllclJhZGl1czoibWFnbmlmaWVyUmFkaXVzIiwKICAgICAgICAgICAgICAgIG1hZ25pZmllcldoZWVsWm9vbUVuYWJsZWQ6Im1hZ25pZmllcldoZWVsWm9vbUVuYWJsZWQiLAogICAgICAgICAgICAgICAgbWFnbmlmaWVyV2hlZWxab29tUmFuZ2U6Im1hZ25pZmllcldoZWVsWm9vbVJhbmdlIiwKICAgICAgICAgICAgICAgIGdhbGxlcnk6ImdhbGxlcnkiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuOiJnYWxsZXJ5Rml0VG9TY3JlZW4iLAogICAgICAgICAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuU21hbGw6ImdhbGxlcnlGaXRUb1NjcmVlblNtYWxsIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlblRpcDoiZ2FsbGVyeUZpdFRvU2NyZWVuVGlwIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZToiZ2FsbGVyeVNjcm9sbEVuZFRvQ2hhbmdlIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZVRpcDoiZ2FsbGVyeVNjcm9sbEVuZFRvQ2hhbmdlVGlwIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlFeHBvcnRUeXBlOiJnYWxsZXJ5RXhwb3J0VHlwZSIsCiAgICAgICAgICAgICAgICBncmlkOiJncmlkIiwKICAgICAgICAgICAgICAgIGdyaWRCaWc6ImdyaWRCaWciLAogICAgICAgICAgICAgICAgbGlzdDoibGlzdCIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5TG9hZEFsbDoiZ2FsbGVyeUxvYWRBbGwiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUxvYWRBbGxUaXA6ImdhbGxlcnlMb2FkQWxsVGlwIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTE6ImdhbGxlcnlTY2FsZVNtYWxsU2l6ZTEiLAogICAgICAgICAgICAgICAgZ2FsbGVyeVNjYWxlU21hbGxTaXplMjoiZ2FsbGVyeVNjYWxlU21hbGxTaXplMiIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5U2hvd1NtYWxsU2l6ZToiZ2FsbGVyeVNob3dTbWFsbFNpemUiLAogICAgICAgICAgICAgICAgZ2FsbGVyeVRyYW5zaXRpb246ImdhbGxlcnlUcmFuc2l0aW9uIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlTaWRlYmFyUG9zaXRpb246ImdhbGxlcnlTaWRlYmFyUG9zaXRpb24iLAogICAgICAgICAgICAgICAgYm90dG9tOiJib3R0b20iLAogICAgICAgICAgICAgICAgcmlnaHQ6InJpZ2h0IiwKICAgICAgICAgICAgICAgIGxlZnQ6ImxlZnQiLAogICAgICAgICAgICAgICAgdG9wOiJ0b3AiLAogICAgICAgICAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplOiJnYWxsZXJ5U2lkZWJhclNpemUiLAogICAgICAgICAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplVGlwOiJnYWxsZXJ5U2lkZWJhclNpemVUaXAiLAogICAgICAgICAgICAgICAgZ2FsbGVyeU1heDE6ImdhbGxlcnlNYXgxIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlNYXgyOiJnYWxsZXJ5TWF4MiIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5QXV0b1pvb206ImdhbGxlcnlBdXRvWm9vbSIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5QXV0b1pvb21UaXA6ImdhbGxlcnlBdXRvWm9vbVRpcCIsCiAgICAgICAgICAgICAgICBnYWxsZXJ5RGVzY3JpcHRpb25MZW5ndGgxOiJnYWxsZXJ5RGVzY3JpcHRpb25MZW5ndGgxIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDI6ImdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDIiLAogICAgICAgICAgICAgICAgZ2FsbGVyeUF1dG9PcGVuU2l0ZXM6ImdhbGxlcnlBdXRvT3BlblNpdGVzIiwKICAgICAgICAgICAgICAgIGdhbGxlcnlFZGl0U2l0ZToiZ2FsbGVyeUVkaXRTaXRlIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvdzoiaW1nV2luZG93IiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuOiJpbWdXaW5kb3dGaXRUb1NjcmVlbiIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlblRpcDoiaW1nV2luZG93Rml0VG9TY3JlZW5UaXAiLAogICAgICAgICAgICAgICAgaW1nV2luZG93RGVmYXVsdFRvb2w6ImltZ1dpbmRvd0RlZmF1bHRUb29sIiwKICAgICAgICAgICAgICAgIGhhbmQ6ImhhbmQiLAogICAgICAgICAgICAgICAgcm90YXRlOiJyb3RhdGUiLAogICAgICAgICAgICAgICAgem9vbToiem9vbSIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dFc2NLZXk6ImltZ1dpbmRvd0VzY0tleSIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dEYmxDbGlja0ltZ1dpbmRvdzoiaW1nV2luZG93RGJsQ2xpY2tJbWdXaW5kb3ciLAogICAgICAgICAgICAgICAgaW1nV2luZG93Q2xpY2tPdXRzaWRlOiJpbWdXaW5kb3dDbGlja091dHNpZGUiLAogICAgICAgICAgICAgICAgbm9uZToibm9uZSIsCiAgICAgICAgICAgICAgICBjbGljazoiY2xpY2siLAogICAgICAgICAgICAgICAgZGJsY2xpY2s6ImRibGNsaWNrIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd092ZXJsYXllclNob3duOiJpbWdXaW5kb3dPdmVybGF5ZXJTaG93biIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJDb2xvcjoiaW1nV2luZG93T3ZlcmxheWVyQ29sb3IiLAogICAgICAgICAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMToiaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMSIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dTaGlmdFJvdGF0ZVN0ZXAyOiJpbWdXaW5kb3dTaGlmdFJvdGF0ZVN0ZXAyIiwKICAgICAgICAgICAgICAgIGltZ1dpbmRvd01vdXNlV2hlZWxab29tOiJpbWdXaW5kb3dNb3VzZVdoZWVsWm9vbSIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2U6ImltZ1dpbmRvd1pvb21SYW5nZSIsCiAgICAgICAgICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2VUaXA6ImltZ1dpbmRvd1pvb21SYW5nZVRpcCIsCiAgICAgICAgICAgICAgICBvdGhlcnM6Im90aGVycyIsCiAgICAgICAgICAgICAgICB3YWl0SW1nTG9hZDoid2FpdEltZ0xvYWQiLAogICAgICAgICAgICAgICAgd2FpdEltZ0xvYWRUaXA6IndhaXRJbWdMb2FkVGlwIiwKICAgICAgICAgICAgICAgIGRlYnVnOiJkZWJ1ZyIsCiAgICAgICAgICAgICAgICBmaXJzdEVuZ2luZToiZmlyc3RFbmdpbmUiLAogICAgICAgICAgICAgICAgcmVmcmVzaFdoZW5FcnJvcjoicmVmcmVzaFdoZW5FcnJvciIsCiAgICAgICAgICAgICAgICBzd2l0Y2hTbGlkZToic3dpdGNoU2xpZGUiLAogICAgICAgICAgICAgICAgY291bnREb3duOiJjb3VudERvd24iLAogICAgICAgICAgICB9OwogICAgICAgICAgICBicmVhazsKICAgIH0KICAgIGZ1bmN0aW9uIGkxOG4oa2V5LGluc2VydHMpewogICAgICAgIHZhciByZXN1bHQ9aTE4bkRhdGFba2V5XSxpOwogICAgICAgIGlmKGluc2VydHMpewogICAgICAgICAgICBpZih0eXBlb2YgaW5zZXJ0cyE9Im9iamVjdCIpaW5zZXJ0cz1baW5zZXJ0c107CiAgICAgICAgICAgIGZvcihpPTA7aTxpbnNlcnRzLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgcmVzdWx0PXJlc3VsdC5yZXBsYWNlKCIjdCMiLGluc2VydHNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICB2YXIgcHJlZnM7CiAgICBmdW5jdGlvbiBpbml0KHRvcE9iamVjdCx3aW5kb3csZG9jdW1lbnQsYXJyYXlGbixlbnZpcixzdG9yYWdlLHVuc2FmZVdpbmRvdyl7CiAgICAgICAgLy8g6buY6K6k6K6+572u77yM6K+35Yiw6K6+572u55WM6Z2i5L+u5pS5CiAgICAgICAgcHJlZnM9ewogICAgICAgICAgICBmbG9hdEJhcjp7Ly/mta7liqjlt6XlhbfmoI/nm7jlhbPorr7nva4uCiAgICAgICAgICAgICAgICBidXRvbk9yZGVyOlsnYWN0dWFsJywnY3VycmVudCcsJ2dhbGxlcnknLCdtYWduaWZpZXInLCdzZWFyY2gnXSwvL+aMiemSruaOkuWIl+mhuuW6jydhY3R1YWwnKOWunumZheeahOWbvueJhyksJ2N1cnJlbnQnKOW9k+WJjeaYvuekuueahOWbvueJhyksJ21hZ25pZmllcico5pS+5aSn6ZWc6KeC5a+fKSwnZ2FsbGVyeSco5Zu+6ZuGKQogICAgICAgICAgICAgICAgbGlzdGVuQmc6dHJ1ZSwvL+ebkeWQrOiDjOaZr+WbvgogICAgICAgICAgICAgICAgc2hvd0RlbGF5OjM2NiwvL+a1ruWKqOW3peWFt+agj+aYvuekuuW7tuaXti7ljZXkvY0o5q+r56eSKQogICAgICAgICAgICAgICAgaGlkZURlbGF5OjU2NiwvL+a1ruWKqOW3peWFt+agj+makOiXj+W7tuaXti7ljZXkvY0o5q+r56eSKQogICAgICAgICAgICAgICAgcG9zaXRpb246J3RvcCBsZWZ0JywvLyDlj5blgLzkuLo6ICd0b3AgbGVmdCco5Zu+54mH5bem5LiK6KeSKSDmiJbogIUgJ3RvcCByaWdodCco5Zu+54mH5Y+z5LiK6KeSKSAnYm90dG9tIHJpZ2h0Jyjlm77niYflj7PkuIvop5IpICdib3R0b20gbGVmdCco5Zu+54mH5bem5LiL6KeSKTsKICAgICAgICAgICAgICAgIG9mZnNldDp7Ly/mta7liqjlt6XlhbfmoI/lgY/np7su5Y2V5L2NKOWDj+e0oCkKICAgICAgICAgICAgICAgICAgICB4Oi0xNSwvL3jovbTlgY/np7so5q2j5YC8LOWQkeWPs+WBj+enuyzotJ/lgLzlkJHlt6YpCiAgICAgICAgICAgICAgICAgICAgeTotMTUsLy956L205YGP56e7KOato+WAvCzlkJHkuIss6LSf5YC85ZCR5LiKKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZvcmNlU2hvdzp7Ly/lnKjmsqHmnInooqvnvKnmlL7nmoTlm77niYfkuIos5L2G5piv5aSn5bCP6LaF6L+H5LiL6Z2i6K6+5a6a55qE5bC65a+45pe2LOW8uuWItuaYvuekuua1ruWKqOahhi4KICAgICAgICAgICAgICAgICAgICBlbmFibGVkOnRydWUsLy/lkK/nlKjlvLrliLbmmL7npLouCiAgICAgICAgICAgICAgICAgICAgc2l6ZTp7Ly/lm77niYflsLrlr7gu5Y2V5L2NKOWDj+e0oCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHc6MTY2LAogICAgICAgICAgICAgICAgICAgICAgICBoOjE2NiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG1pblNpemVMaW1pdDp7Ly/lsLHnrpfmmK/lm77niYfooqvnvKnmlL7kuoYo55yL5Yiw55qE5Zu+54mH6KKr6K6+5a6a5LqGd2lkdGjmiJbogIVoZWlnaHTpmZDlrprkuoblpKflsI8s6L+Z56eN5oOF5Ya15LiLKSzlpoLmnpzmsqHmnInooqvnvKnmlL7nmoTljp/lm77niYflsI/kuo7orr7lrprlgLws6YKj5LmI5Lmf5LiN5pi+56S65rWu5Yqo5bel5YW35qCPLgogICAgICAgICAgICAgICAgICAgIHc6MTAwLAogICAgICAgICAgICAgICAgICAgIGg6MTAwLAogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAvLyDmjInplK7vvIzmhJ/op4nnlKjkuI3lpKrliLDvvIzpu5jorqTnpoHnlKgKICAgICAgICAgICAgICAgIGtleXM6IHsKICAgICAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGFjdHVhbDogJ2EnLCAgLy8gIOW9k+WHuueOsOaCrOa1ruadoeaXtuaMieS4iyBgYWAg5omT5byA5Y6f5Zu+CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiAncycsCiAgICAgICAgICAgICAgICAgICAgY3VycmVudDogJ2MnLAogICAgICAgICAgICAgICAgICAgIG1hZ25pZmllcjogJ20nLAogICAgICAgICAgICAgICAgICAgIGdhbGxlcnk6ICdnJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBtYWduaWZpZXI6ey8v5pS+5aSn6ZWc55qE6K6+572uLgogICAgICAgICAgICAgICAgcmFkaXVzOiA3NywvL+m7mOiupOWNiuW+hC7ljZXkvY0o5YOP57SgKS4KICAgICAgICAgICAgICAgIHdoZWVsWm9vbTp7Ly/mu5rova7nvKnmlL4uCiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgICAgICAgICAgICAgIHBhdXNlRmlyc3Q6dHJ1ZSwvL+mcgOimgeaaguWBnCjljZXlh7vmmoLlgZwp5ZCOLOaJjeiDvee8qeaUvi4o5o6o6I2QLOWQpuWImeWboOS4uuaUvuWkp+mVnOS8mui3n+edgOm8oOaghyzlpoLmnpzmlL7lpKfplZzov4flpKcs6YKj5LmI5Lya5b2x5ZON5rua5YqoLikuLgogICAgICAgICAgICAgICAgICAgIHJhbmdlOlswLjQsMC41LDAuNiwwLjcsMC44LDAuOSwxLDEuMSwxLjIsMS4zLDEuNCwxLjUsMS43LDEuOSwyLDIuNSwzLjAsNC4wXSwvL+e8qeaUvueahOiMg+WbtAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGdhbGxlcnk6ey8v5Zu+5bqT55u45YWz6K6+5a6aCiAgICAgICAgICAgICAgICBsb2FkQWxsOnRydWUsLy/liqDovb3mm7TlpJrml7bmmK/lkKbliqDovb3lhajpg6jpobXpnaIKICAgICAgICAgICAgICAgIGZpdFRvU2NyZWVuOnRydWUsLy/lm77niYfpgILlupTlsY/luZUo6YCC5bqU5pa55byP5Li6Y29udGFpbu+8jOmdnmNvdmVyKS4KICAgICAgICAgICAgICAgIGZpdFRvU2NyZWVuU21hbGw6ZmFsc2UsCiAgICAgICAgICAgICAgICBzY3JvbGxFbmRUb0NoYW5nZTp0cnVlLAogICAgICAgICAgICAgICAgZXhwb3J0VHlwZTonZ3JpZCcsCiAgICAgICAgICAgICAgICBzaWRlYmFyUG9zaXRpb246ICdib3R0b20nLC8vJ3RvcCcgJ3JpZ2h0JyAnYm90dG9tJyAnbGVmdCcgIOWbm+S4quWPr+iDveWAvAogICAgICAgICAgICAgICAgc2lkZWJhclNpemU6IDEyMCwvL+S+p+agj+eahOmrmO+8iOWmguaenOaYr+awtOW5s+aUvue9ru+8ieaIluiAheWuve+8iOWmguaenOaYr+WeguebtOaUvue9ru+8iQogICAgICAgICAgICAgICAgc2lkZWJhclRvZ2dsZTogdHJ1ZSwgIC8vIOaYr+WQpuaYvuekuumakOiXj+aMiemSrgogICAgICAgICAgICAgICAgdHJhbnNpdGlvbjp0cnVlLC8v5aSn5Zu+54mH5Yy655qE5Yqo55S744CCCiAgICAgICAgICAgICAgICBwcmVsb2FkOnRydWUsLy/lr7npmYTov5HnmoTlm77niYfov5vooYzpooTor7vjgIIKICAgICAgICAgICAgICAgIG1heDo1LC8v5pyA5aSa6aKE6K+75aSa5bCR5byg77yI5YmN5ZCO5ZCE5aSa5bCR5byg77yJCgogICAgICAgICAgICAgICAgem9vbXJlc2l6ZWQ6IDI1LCAgLy8g5Zu+54mH5bC65a+45pyA5bCR55u45beu5q+U5L6L77yM5Y2V5L2N77yaJQogICAgICAgICAgICAgICAgc2NhbGVTbWFsbFNpemU6IDI1MCwgIC8vIOWbvuW6k+eahOaWsOexu+WIq++8jOe8qeaUvueahOWbvueJh++8jOWwuuWvuOeahOmrmOaIluWuvemDveWwj+S6juivpeWAvAogICAgICAgICAgICAgICAgc2hvd1NtYWxsU2l6ZTp0cnVlLC8v5piv5ZCm6buY6K6k5pi+56S65bCP5bC65a+45Zu+54mHCgogICAgICAgICAgICAgICAgc2Nyb2xsRW5kQW5kTG9hZDogZmFsc2UsIC8vIOa7muWKqOS4u+eql+WPo+WIsOacgOW6lemDqO+8jOeEtuWQjuiHquWKqOmHjei9veW6k+eahOWbvueJh+OAgui/mOaciWJ1Z++8jOacieW+hei/m+S4gOatpea1i+ivlQogICAgICAgICAgICAgICAgc2Nyb2xsRW5kQW5kTG9hZF9udW06IDMsICAvLyDmnIDlkI7lh6DlvKDlm77niYfmiafooYwKCiAgICAgICAgICAgICAgICBhdXRvWm9vbTogdHJ1ZSwgIC8vIOWmguaenOacieaUvuWkp++8jOWImeaKiuWbvueJh+WPiiBzaWRlYmFyIOmDqOWIhueahOe8qeaUvuaUueWbniAxMDAl77yM5aKe5aSn5Y+v6KeG6Z2i56ev77yI5LuF5ZyoIGNocm9tZSDkuIvmnInmlYjvvIkKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uTGVuZ3RoOiAzMiwgIC8vIOazqOmHiueahOacgOWkp+WuveW6pgogICAgICAgICAgICAgICAgZWRpdFNpdGU6ICJQaXhsciIKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGltZ1dpbmRvdzp7Ly8g5Zu+54mH56qX55u45YWz6K6+572uCiAgICAgICAgICAgICAgICBmaXRUb1NjcmVlbjogZmFsc2UsLy/pgILlupTlsY/luZUs5bm25LiU5rC05bmz5Z6C55u05bGF5LitKOmAguW6lOaWueW8j+S4umNvbnRhaW7vvIzpnZ5jb3ZlcikuCiAgICAgICAgICAgICAgICBzeW5jU2VsZWN0ZWRUb29sOnRydWUsLy/lkIzmraXlvZPliY3pgInmi6nnmoTlt6XlhbfvvIzlpoLmnpzlvIDkuoblpJrkuKrlm77niYfnqpflj6PvvIzlhbbkuK3kv67mlLnkuIDkuKrkvJrlj43mmKDliLDlhbbku5bnmoTkuIrpnaLjgIIKICAgICAgICAgICAgICAgIGRlZmF1bHRUb29sOidoYW5kJywvLyJoYW5kIiwicm90YXRlIiwiem9vbSI75omT5byA56qX5Y+j55qE5pe25YCZ6buY6K6k6YCJ5oup55qE5bel5YW3CiAgICAgICAgICAgICAgICBjbG9zZTp7Ly/lhbPpl63nmoTmlrnlvI8KICAgICAgICAgICAgICAgICAgICBlc2NLZXk6dHJ1ZSwvL+aMiWVzY+mUrgogICAgICAgICAgICAgICAgICAgIGRibENsaWNrSW1nV2luZG93OiB0cnVlLC8v5Y+M5Ye75Zu+54mH56qX5Y+jCiAgICAgICAgICAgICAgICAgICAgY2xpY2tPdXRzaWRlOicnLCAvLyDngrnlh7vlm77niYflpJbpg6jlhbPpl63jgILlgLzkuLonJ3wnY2xpY2snfCdkYmxjbGljayfvvJvml6DmiJbngrnlh7vmiJblj4zlh7sKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvdmVybGF5ZXI6ey8vIOimhuebluWxgi4KICAgICAgICAgICAgICAgICAgICBzaG93bjpmYWxzZSwvL+aYvuekugogICAgICAgICAgICAgICAgICAgIGNvbG9yOidyZ2JhKDAsMCwwLDAuOCknLC8v6aKc6Imy5ZKM5LiN6YCP5piO5bqm6K6+572uLgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNoaWZ0Um90YXRlU3RlcDoxNSwvLyDml4vovaznmoTml7blgJnvvIzmjInkvY9zaGlmdOmUruaXtizml4vovaznmoTmraXov5su5Y2V5L2NOuW6pi4KICAgICAgICAgICAgICAgIHpvb206ey8v5rua6L2u57yp5pS+CiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6WzAuMSwwLjIsMC4zLDAuNCwwLjUsMC42LDAuNywwLjgsMC45LDEsMS4xLDEuMiwxLjMsMS40LDEuNSwxLjcsMS45LDIsMi41LDMuMCw0LjBdLC8v57yp5pS+5q+U5L6LLijkuI3opoHlh7rnjrDotJ/mlbAs6LCi6LCiLV8tIX4pCiAgICAgICAgICAgICAgICAgICAgbW91c2VXaGVlbFpvb206dHJ1ZSwvL+aYr+WQpuWFgeiuuOS9v+eUqOa7mui9rue8qeaUvuOAggogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8v562J5Zu+54mH5a6M5YWo6L295YWl5ZCOLOaJjeW8gOWni+aJp+ihjOW8ueWHuizmlL7lpKfnrYnnrYnmk43kvZwsCiAgICAgICAgICAgIC8v5oyJ5L2PY3RybOmUrueahOaXtuWAmSzlj6/ku6XkuLTml7bmiafooYzlkozov5nkuKrorr7lrprnm7jlj43nmoTorr7lrpouCiAgICAgICAgICAgIHdhaXRJbWdMb2FkOiBmYWxzZSwKCiAgICAgICAgICAgIC8v5qGG5p626YeM6Z2i55qE5Zu+54mH5Zyo6aG25bGC56qX5Y+j5bGV56S65Ye65p2l77yM5L2G5piv5b2TZnJhbWXkuI7pobblsYLnqpflj6Nkb21haW7kuI3kuIDmoLfnmoTml7blgJnvvIzlj6/og73lr7zoh7Tlm77niYfooqvlj43nm5fpk77mi6bmiKrvvIwKICAgICAgICAgICAgLy/mjInkvY9zaGlmdOmUru+8jOWPr+S7peS4tOaXtuaJp+ihjOWSjOi/meS4quiuvuWumuebuOWPjeeahOiuvuWumgogICAgICAgICAgICBmcmFtZXNQaWNPcGVuSW5Ub3BXaW5kb3c6IHRydWUsCgogICAgICAgICAgICAvLyBsb3dMZXZlbDogdHJ1ZSwgIC8vIOWmguaenOacieWkmuS4quWbvueJh++8jOS8mOWFiOmAieaLqeS9juS4gOe6p+eahAoKICAgICAgICAgICAgZGVidWc6IGZhbHNlLAogICAgICAgICAgICBmaXJzdEVuZ2luZToiVGluZXllIgogICAgICAgIH07CgogICAgICAgIC8v5ZCE572R56uZ6auY57qn6KeE5YiZOwogICAgICAgIHZhciBzaXRlSW5mbz1bCiAgICAgICAgICAgIHtuYW1lOiAiZ29vZ2xlIOWbvueJh+aQnOe0oiIsCiAgICAgICAgICAgICAvL+e9keWdgOS+i+WtkC4o5pa55L6/5rWL6K+VLuafpeeciy7kuYvnsbvnmoQpCiAgICAgICAgICAgICBzaXRlRXhhbXBsZToiaHR0cDovL3d3dy5nb29nbGUuY29tLmhrL3NlYXJjaD9xPWZpcmVmb3gmdGJtPWlzY2giLAogICAgICAgICAgICAgLy/mmK/lkKblkK/nlKgKICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICAgICAgIC8v56uZ54K55q2j5YiZCiAgICAgICAgICAgICB1cmw6L2h0dHBzPzpcL1wvd3d3Lmdvb2dsZShcLlx3ezEsM30pezEsM31cL3NlYXJjaFw/LiomdGJtPWlzY2gvLAogICAgICAgICAgICAgLy/pvKDmoIflt6bplK7ngrnlh7vnm7TmjqXmiZPlvIAuLu+8iOi/meS4quWPquaYr+W9k+mrmOe6p+inhOWImeeahGdldEltYWdlKCnov5Tlm57lm77niYfnmoTml7blgJnnlJ/mlYjvvIkKICAgICAgICAgICAgIC8vIOaXoOaViO+8n+WPquacieWwkeaVsOaDheWGteS4i+acieS9nOeUqO+8nwogICAgICAgICAgICAgY2xpa1RvT3Blbjp7CiAgICAgICAgICAgICAgICAgZW5hYmxlZDpmYWxzZSwKICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDp0cnVlLC8v5piv5ZCm5bCd6K+V6Zi75q2i54K55Ye755qE6buY6K6k6KGM5Li677yI5q+U5aaC5aaC5p6c5piv5L2g54K555qE5piv5LiA5Liq6ZO+5o6l77yM6buY6K6k6KGM5Li65piv5omT5byA6L+Z5Liq6ZO+5o6l77yM5aaC5p6c5pivdHJ1Ze+8jGpz5Lya5bCd6K+V6Zi75q2i6ZO+5o6l55qE5omT5byAKOWmguaenOaDs+S4tOaXtuaJk+W8gOi/meS4qumTvuaOpe+8jOivt+S9v+eUqOWPs+mUrueahOaJk+W8gOWRveS7pCnvvIkKICAgICAgICAgICAgICAgICB0eXBlOidhY3R1YWwnLC8v6buY6K6k55qE5omT5byA5pa55byPOiAnYWN0dWFsJyjlvLnlh7os5Y6f5aeL5Zu+54mHKSAnbWFnbmlmaWVyJyjmlL7lpKfplZwpICdjdXJyZW50JyjlvLnlh7os5b2T5YmN5Zu+54mHKQogICAgICAgICAgICAgfSwKICAgICAgICAgICAgIC8v6I635Y+W5Zu+54mH5a6e6ZmF5Zyw5Z2A55qE5aSE55CG5Ye95pWwLAogICAgICAgICAgICAgLy90aGlzIOS4uuW9k+WJjem8oOagh+aCrOa1ruWbvueJh+eahOW8leeUqCwKICAgICAgICAgICAgIC8v56ys5LiA5Liq5Y+C5pWw5ZKMdGhpc+ebuOWQjO+8jOS5n+aYr+W9k+WJjem8oOagh+aCrOa1ruWbvueJh+eahOW8leeUqCwKICAgICAgICAgICAgIC8v56ys5LqM5Liq5Y+C5pWw5Li65YyF6KO55b2T5YmN5Zu+54mH55qE56ys5LiA5LiqYeWFg+e0oCjlj6/og73kuI3lrZjlnKgpLgogICAgICAgICAgICAgZ2V0SW1hZ2U6ZnVuY3Rpb24oaW1nLGEpewogICAgICAgICAgICAgICAgIGlmKCFhKXJldHVybjsKICAgICAgICAgICAgICAgICBpZiAoYS5ocmVmLm1hdGNoKC9pbWd1cmw9KC4qP1wuXHd7MSw1fSkmL2kpKSB7CiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoUmVnRXhwLiQxKTsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgIC8vID09PT09PSDmiJHmlrDlop7nmoQgPT09PT09CiAgICAgICAgICAgICAvLyDoh6rlrprkuYnmoLflvI8KICAgICAgICAgICAgIGNzczogJycsCiAgICAgICAgICAgICAvLyDmjpLpmaTnmoTlm77niYfmraPliJkKICAgICAgICAgICAgIC8vIGV4Y2x1ZGU6IC93ZWl4aW5fY29kZVwucG5nJC9pLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogIkJpbmcg5Zu+54mH5pCc57SiIiwKICAgICAgICAgICAgIHNpdGVFeGFtcGxlOiJodHRwOi8vY24uYmluZy5jb20vaW1hZ2VzL3NlYXJjaD9xPSVFNyVCRSU4RSVFNSVBNSVCMyIsCiAgICAgICAgICAgICBlbmFibGVkOnRydWUsCiAgICAgICAgICAgICB1cmw6IC9eaHR0cHM/OlwvXC9bXi5dKlwuYmluZ1wuY29tXC9pbWFnZXNcLy9pLAogICAgICAgICAgICAgZ2V0SW1hZ2U6ZnVuY3Rpb24oaW1nLCBhKXsKICAgICAgICAgICAgICAgICBpZiAoIWEpIHJldHVybjsKICAgICAgICAgICAgICAgICB2YXIgb2xkc3JjPXRoaXMuc3JjOwogICAgICAgICAgICAgICAgIHZhciAkID0gLyxpbWd1cmw6IihbXiJdKykvLmV4ZWMoYS5nZXRBdHRyaWJ1dGUoJ20nKSk7CiAgICAgICAgICAgICAgICAgdmFyIG5ld3NyYz0gJCA/ICRbMV0gOiAnJzsKICAgICAgICAgICAgICAgICBpZihuZXdzcmMhPW9sZHNyYylyZXR1cm4gbmV3c3JjOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZToi55m+5bqm6LS05ZCnIiwKICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICAgICAgIHVybDovXmh0dHBzPzpcL1wvdGllYmFcLmJhaWR1XC5bXlwvXStcLy9pLAogICAgICAgICAgICAgZ2V0SW1hZ2U6ZnVuY3Rpb24oaW1nKXsKICAgICAgICAgICAgICAgICB2YXIgc3JjPWltZy5zcmM7CiAgICAgICAgICAgICAgICAgdmFyIHJlZz0vXihodHRwOlwvXC9pbWdzcmNcLmJhaWR1XC5jb21cL2ZvcnVtXC8pYWIocGljXC9pdGVtXC9bXHcuXSspL2kgOwogICAgICAgICAgICAgICAgIHZhciBwb3J0cmFpdD0vXC9zeXNcL3BvcnRyYWl0LzsKICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0PXNyYy5tYXRjaChyZWcpOwogICAgICAgICAgICAgICAgIC8v5biW5a2Q5YiX6KGo6aG16Z2iCiAgICAgICAgICAgICAgICAgaWYocG9ydHJhaXQudGVzdChzcmMpKXsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNyYy5yZXBsYWNlKC9cL3N5c1wvcG9ydHJhaXQvLCIvc3lzL3BvcnRyYWl0bCIpOwogICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdCl7Ly/lsI/lm77nmoTml7blgJkKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFsxXStyZXN1bHRbMl07CiAgICAgICAgICAgICAgICAgfWVsc2V7Ly/lsI/lm77ngrnlh7vkuYvlkI7nmoTovoPlpKflm77vvIzmiJbogIXluJblrZDlhoXlrrnpobXpnaLnmoTlm77niYfjgIIKICAgICAgICAgICAgICAgICAgICAgdmFyIHByZWZpeCA9ICdodHRwOi8vaW1nc3JjLmJhaWR1LmNvbS9mb3J1bS9waWMvaXRlbS8nOwogICAgICAgICAgICAgICAgICAgICB2YXIgcmVnMiA9IC9cL3NpZ249XHcrXC8oW1x3Ll0rKSQvOwogICAgICAgICAgICAgICAgICAgICB2YXIgc2lnbiA9IHNyYy5tYXRjaChyZWcyKTsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICBzaWduID8gcHJlZml4ICsgc2lnblsxXSA6IG51bGw7CiAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOeZvuW6puiHqui6q+eahOWFqOWxj+afpeeci+aWueW8j+abtOWKoOWlve+8jOi3n+i/meS4quiEmuacrOeahOW6k+afpeeci+exu+S8vOOAggogICAgICAgICAgICB7bmFtZTogIueZvuW6puWbvueJh+aQnOe0oiIsCiAgICAgICAgICAgICBzaXRlRXhhbXBsZTogImh0dHA6Ly9pbWFnZS5iYWlkdS5jb20vaT9pZT11dGYtOCZ3b3JkPSVFOSVBMyU4RSVFNiU5OSVBRiZvcT0lRTklQTMlOEUlRTYlOTkiLAogICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSwKICAgICAgICAgICAgIHVybDogL15odHRwcz86XC9cL2ltYWdlXC5iYWlkdVwuY29tXC8uKiZ3b3JkPS9pLAogICAgICAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKGltZywgYSkgewogICAgICAgICAgICAgICAgIGlmICghYSkgcmV0dXJuOwogICAgICAgICAgICAgICAgIHZhciByZWcgPSAvJm9ianVybD0oaHR0cC4qP1wuKD86anBnfGpwZWd8cG5nfGdpZnxibXApKS9pOwogICAgICAgICAgICAgICAgIGlmIChhLmhyZWYubWF0Y2gocmVnKSkgewogICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KFJlZ0V4cC4kMSk7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZToi6LGG55OjIiwKICAgICAgICAgICAgICAgIHNpdGVFeGFtcGxlOiJodHRwOi8vbW92aWUuZG91YmFuLmNvbS9waG90b3MvcGhvdG8vMTAwMDY1NjE1NS8iLAogICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UsCiAgICAgICAgICAgICAgICB1cmw6L15odHRwcz86XC9cL1teLl0qXC5kb3ViYW5cLmNvbS9pLAogICAgICAgICAgICAgICAgZ2V0SW1hZ2U6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB2YXIgb2xkc3JjID0gdGhpcy5zcmMsCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld3NyYyA9IG9sZHNyYzsKICAgICAgICAgICAgICAgICAgICB2YXIgcGljID0gL1wvdmlld1wvcGhvdG9cLyg/OnBob3RvfGFsYnVtY292ZXJ8YWxidW1pY29ufHRodW1ifHNxeHMpXC9wdWJsaWNcLy9pOwogICAgICAgICAgICAgICAgICAgIHZhciBtb3ZpZUNvdmVyID0gL1wvdmlld1wvbW92aWVfcG9zdGVyX2NvdmVyXC9bc2ldcHN0XC9wdWJsaWNcLy9pOwogICAgICAgICAgICAgICAgICAgIHZhciBib29rQ292ZXIgPSAvXC92aWV3XC9hcmtfYXJ0aWNsZV9jb3ZlclwvY3V0XC9wdWJsaWNcLy9pOwogICAgICAgICAgICAgICAgICAgIHZhciBzcGljID0gLyhpbWdcZCsuZG91YmFuLmNvbSlcL1tzbV1waWNcLy9pCgogICAgICAgICAgICAgICAgICAgIC8vIOi/meS4que9keWdgOWkp+WbvuS8muWHuumUmQogICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9tb3ZpZS5kb3ViYW4uY29tL3N1YmplY3QvMjU3MDg1NzkvZGlzY3Vzc2lvbi81ODk1MDIwNi8KICAgICAgICAgICAgICAgICAgICBpZigvbW92aWVcLmRvdWJhblwuY29tXC9zdWJqZWN0XC9cZCtcL2Rpc2N1c3Npb24vLnRlc3QobG9jYXRpb24uaHJlZikpewogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGljLnRlc3Qob2xkc3JjKSkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdzcmMgPSBvbGRzcmMucmVwbGFjZShwaWMsICcvdmlldy9waG90by9yYXcvcHVibGljLycpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW92aWVDb3Zlci50ZXN0KG9sZHNyYykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3c3JjID0gb2xkc3JjLnJlcGxhY2UobW92aWVDb3ZlciwgJy92aWV3L3Bob3RvL3Jhdy9wdWJsaWMvJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChib29rQ292ZXIudGVzdChvbGRzcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld3NyYyA9IG9sZHNyYy5yZXBsYWNlKGJvb2tDb3ZlciwgJy92aWV3L2Fya19hcnRpY2xlX2NvdmVyL3JldGluYS9wdWJsaWMvJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcGljLnRlc3Qob2xkc3JjKSkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdzcmMgPSBvbGRzcmMucmVwbGFjZShzcGljLCAnJDEvbHBpYy8nKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdzcmMgPT0gb2xkc3JjID8gbnVsbCA6IFtuZXdzcmMsbmV3c3JjLnJlcGxhY2UoL3Bob3RvXC9yYXcvLCJwaG90by9waG90byIpXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6IuaWsOa1quW+ruWNmiIsCiAgICAgICAgICAgICBzaXRlRXhhbXBsZToiaHR0cDovL3dlaWJvLmNvbS9wdWIvP3NvdXJjZT10b3B0cmF5IiwKICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICAgICAgIHVybDovXmh0dHBzPzpcL1wvKD86W14uXStcLikqd2VpYm9cLmNvbS9pLAogICAgICAgICAgICAgZ2V0SW1hZ2U6ZnVuY3Rpb24oaW1nKXsKICAgICAgICAgICAgICAgICB2YXIgb2xkc3JjPXRoaXMuc3JjOwogICAgICAgICAgICAgICAgIHZhciBwaWM9LyhcLnNpbmFpbWdcLihjbnxjb20pXC8pKD86Ym1pZGRsZSkvaTsvL+W+ruWNmuWGheWuueWbvueJhy4KICAgICAgICAgICAgICAgICB2YXIgcGljMj0vKFwuc2luYWltZ1wuKGNufGNvbSlcLykoPzpzcXVhcmV8dGh1bWJuYWlsKS9pOy8vIOW+ruWNmuWGheWuueWbvueJhzIuCiAgICAgICAgICAgICAgICAgdmFyIGhlYWQ9LyhcLnNpbmFpbWdcLihjbnxjb20pXC9cZCspXC81MFwvL2k7Ly/lpLTlg48uCiAgICAgICAgICAgICAgICAgdmFyIHBob3RvTGlzdD0vXC5zaW5haW1nXC4oY258Y29tKVwvdGh1bWJcZCtcL1x3Ky9pLy/nm7jlhowKICAgICAgICAgICAgICAgICB2YXIgbmV3c3JjOwogICAgICAgICAgICAgICAgIGlmKHBpYy50ZXN0KG9sZHNyYykpewogICAgICAgICAgICAgICAgICAgICBuZXdzcmM9b2xkc3JjLnJlcGxhY2UocGljLCckMWxhcmdlJyk7ICAvLyBsYXJnZSDkuI3mmK/mr4/kuIDlvKDlm77niYfpg73mnInnmoQKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld3NyYz09b2xkc3JjPyAnJyA6IG5ld3NyYzsKICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBpYzIudGVzdChvbGRzcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgIG5ld3NyYz1vbGRzcmMucmVwbGFjZShwaWMyLCckMW13MTAyNCcpOwogICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3c3JjPT1vbGRzcmM/ICcnIDogbmV3c3JjOwogICAgICAgICAgICAgICAgIH0gZWxzZSBpZihoZWFkLnRlc3Qob2xkc3JjKSl7CiAgICAgICAgICAgICAgICAgICAgIG5ld3NyYz1vbGRzcmMucmVwbGFjZShoZWFkLCckMS8xODAvJyk7CiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdzcmM9PW9sZHNyYz8gJycgOiBuZXdzcmM7CiAgICAgICAgICAgICAgICAgfWVsc2UgaWYocGhvdG9MaXN0LnRlc3Qob2xkc3JjKSl7CiAgICAgICAgICAgICAgICAgICAgIG5ld3NyYz1vbGRzcmMucmVwbGFjZSgvdGh1bWJcZCsvLCdtdzY5MCcpOwogICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3c3JjPT1vbGRzcmM/ICcnIDogbmV3c3JjOwogICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZToiYmlsaWJpbGkiLAogICAgICAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgICAgICAgdXJsOi9eaHR0cHM/OlwvXC9bXi5dK1wuYmlsaWJpbGkuY29tL2ksCiAgICAgICAgICAgICBnZXRJbWFnZTpmdW5jdGlvbihpbWcpewogICAgICAgICAgICAgICAgIHZhciBvbGRzcmM9dGhpcy5zcmM7CiAgICAgICAgICAgICAgICAgdmFyIHBpYz0vXGQrX1xkK1wvfFxkK194XGQrXC5qcGckfEBcZCt3X1xkK2hcLndlYnAkfF9cZCt4XGQrXC5qcGckL2k7CiAgICAgICAgICAgICAgICAgdmFyIG5ld3NyYzsKICAgICAgICAgICAgICAgICBpZihwaWMudGVzdChvbGRzcmMpKXsKICAgICAgICAgICAgICAgICAgICAgbmV3c3JjPW9sZHNyYy5yZXBsYWNlKHBpYywnJyk7CiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdzcmM9PW9sZHNyYz8gJycgOiBuZXdzcmM7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZToi6IW+6K6v5b6u5Y2aIiwKICAgICAgICAgICAgIHNpdGVFeGFtcGxlOiJodHRwOi8vdC5xcS5jb20vcC9uZXdzIiwKICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICAgICAgIHVybDovXmh0dHA6XC9cL1teXC9dKnRcLnFxXC5jb21cLy9pLAogICAgICAgICAgICAgZ2V0SW1hZ2U6ZnVuY3Rpb24oaW1nKXsKICAgICAgICAgICAgICAgICB2YXIgcGljPS8oXC5xcGljXC5jblwvbWJsb2dwaWNcL1x3KylcL1xkKy9pOy8v5Zu+54mHCiAgICAgICAgICAgICAgICAgdmFyIGhlYWQ9LyhcLnFsb2dvXC5jblwvbWJsb2doZWFkXC9cdyspXC9cZCsvaTsvL+WktOWDjy4KICAgICAgICAgICAgICAgICB2YXIgb2xkc3JjPXRoaXMuc3JjOwogICAgICAgICAgICAgICAgIHZhciBuZXdzcmM7CiAgICAgICAgICAgICAgICAgaWYocGljLnRlc3Qob2xkc3JjKSl7CiAgICAgICAgICAgICAgICAgICAgIG5ld3NyYz1vbGRzcmMucmVwbGFjZShwaWMsJyQxLzIwMDAnKTsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld3NyYz09b2xkc3JjPyAnJyA6IG5ld3NyYzs7CiAgICAgICAgICAgICAgICAgfWVsc2UgaWYoaGVhZC50ZXN0KG9sZHNyYykpewogICAgICAgICAgICAgICAgICAgICBuZXdzcmM9b2xkc3JjLnJlcGxhY2UoaGVhZCwnJDEvMCcpOwogICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3c3JjPT1vbGRzcmM/ICcnIDogbmV3c3JjOzsKICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICJkZXZpYW50YXJ0IiwKICAgICAgICAgICAgIHNpdGVFeGFtcGxlOiAiaHR0cDovL3d3dy5kZXZpYW50YXJ0LmNvbSIsCiAgICAgICAgICAgICBlbmFibGVkOnRydWUsCiAgICAgICAgICAgICB1cmw6L15odHRwcz86XC9cL1teLl0qXC5kZXZpYW50YXJ0XC5jb20vaSwKICAgICAgICAgICAgIGdldEltYWdlOmZ1bmN0aW9uKGltZywgYSl7CiAgICAgICAgICAgICAgICAgdmFyIG9sZHNyYz10aGlzLnNyYzsKICAgICAgICAgICAgICAgICB2YXIgbmV3c3JjOwogICAgICAgICAgICAgICAgIGlmKHRoaXMuY2xhc3NOYW1lPT0iZmFrZXRodW1iIiAmJiB0aGlzLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSAmJiB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmRhdGFzZXQpewogICAgICAgICAgICAgICAgICAgICBuZXdzcmM9dGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LnN1cGVyRnVsbEltZzsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgaWYoIW5ld3NyYykKICAgICAgICAgICAgICAgICAgICAgbmV3c3JjID0gYS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3VwZXItaW1nJykgfHwgYS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3VwZXItZnVsbC1pbWcnKSB8fCBhLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXN1cGVyLWltZycpIHx8IGEucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3VwZXItZnVsbC1pbWcnKQogICAgICAgICAgICAgICAgICAgICAgICAgfHwgb2xkc3JjLnJlcGxhY2UoLyhodHRwOlwvXC9bXlwvXStcL2ZzXGQrXC8pMjAwSFwvKC4qKS9pLCckMSQyJyk7CiAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld3NyYz09b2xkc3JjPyAnJyA6IG5ld3NyYzsKICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAn6Iqx55Oj572RJywKICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsCiAgICAgICAgICAgICB1cmw6IC9eaHR0cHM/OlwvXC9odWFiYW5cLmNvbVwvL2ksCiAgICAgICAgICAgICBleHQ6ICdwcmV2aW91cy0yJywKICAgICAgICAgICAgIC8vIGV4dDogZnVuY3Rpb24odGFyZ2V0KSB7CiAgICAgICAgICAgICAvLyAgICAgaWYgKHRhcmdldC5jbGFzc05hbWUgPT0gJ2NvdmVyJykgewogICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gdGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignaW1nJyk7CiAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgLy8gfSwKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICB2YXIgcGljID0gLyguKmltZy5oYi5haWNkbi5jb21cLy4qKV9mdyg/OjIzNnwzMjApJC9pCiAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3JjLm1hdGNoKHBpYykpIHsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZ0V4cC4kMSArICdfZnc2NTgnOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJy4vLi4vZm9sbG93aW5nLXNpYmxpbmc6OnBbQGNsYXNzPSJkZXNjcmlwdGlvbiJdJywKICAgICAgICAgICAgIC8vIGNzczogJy5waW4gYS5pbWcgLmNvdmVyIHsgZGlzcGxheTogbm9uZTsgfScsCiAgICAgICAgICAgICBleGNsdWRlOiAvd2VpeGluX2NvZGVcLnBuZyQvaSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5YW25a6DCiAgICAgICAgICAgIHtuYW1lOiAid2lraXBlZGlhIiwKICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICAgICAgIHVybDovXmh0dHBzPzpcL1wvW14uXSsud2lraXBlZGlhLm9yZ1wvL2ksCiAgICAgICAgICAgICBnZXRJbWFnZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgIHZhciBzcmM9dGhpcy5zcmM7CiAgICAgICAgICAgICAgICAgdmFyIHJldD1zcmMucmVwbGFjZSgnL3RodW1iLycsJy8nKTsKICAgICAgICAgICAgICAgICBpZihzcmM9PXJldClyZXR1cm47Ly/pnZ7nvKnnlaXlm74KICAgICAgICAgICAgICAgICByZXR1cm4gKHJldC5tYXRjaCgvKGh0dHBzPzpcL1wvLiopXC9cZCtweC0uKi8pIHx8IFtdKVsxXTsKICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiLmsqrmsZ/noo7noo4iLAogICAgICAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgICAgICAgdXJsOi9eaHR0cHM/OlwvXC8oW14uXStcLikqKD86eWVzaGpcLmNvbXxoamVuZ2xpc2hcLmNvbXxodWppYW5nXC5jb20pL2ksCiAgICAgICAgICAgICBnZXRJbWFnZTpmdW5jdGlvbihpbWcpewogICAgICAgICAgICAgICAgIHZhciBvbGRzcmM9dGhpcy5zcmM7CiAgICAgICAgICAgICAgICAgdmFyIHJlZz0vXihodHRwcz86XC9cLyg/OlteLl0rXC4pKmhqZmlsZS5jblwvLispKF8oPzpzfG0pKShcLlx3KykkL2k7CiAgICAgICAgICAgICAgICAgaWYocmVnLnRlc3Qob2xkc3JjKSl7CiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbGRzcmMucmVwbGFjZShyZWcsJyQxJDMnKTsKICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICflpKfkvJfngrnor4QnLAogICAgICAgICAgICAgc2l0ZUV4YW1wbGU6ICdodHRwOi8vd3d3LmRpYW5waW5nLmNvbS9zaG9wLzE3ODczMjk2L3Bob3RvcycsCiAgICAgICAgICAgICB1cmw6IC9eaHR0cHM/OlwvXC93d3cuZGlhbnBpbmcuY29tXC9zaG9wL2ksCiAgICAgICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgdmFyIG9sZHNyYyA9IHRoaXMuc3JjLAogICAgICAgICAgICAgICAgICAgICBuZXdzcmM7CiAgICAgICAgICAgICAgICAgdmFyIHBpYyA9IC8oLis/ZHBmaWxlXC5jb21cLy4rKVwoMjQwYzE4MFwpXC8odGh1bWJcLi4rKS87CiAgICAgICAgICAgICAgICAgaWYgKHBpYy50ZXN0KG9sZHNyYykpIHsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9sZHNyYy5yZXBsYWNlKHBpYywgJyQxKDcwMHg3MDApLyQyJyk7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDop4bpopHnvZHnq5kKICAgICAgICAgICAge25hbWU6ICd0cmFrdC50dicsCiAgICAgICAgICAgICB1cmw6IC9eaHR0cDpcL1wvdHJha3RcLnR2XC8vaSwKICAgICAgICAgICAgIHNpdGVFeGFtcGxlOiAnaHR0cDovL3RyYWt0LnR2L3Nob3dzJywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICB2YXIgb2xkc3JjID0gdGhpcy5zcmM7CiAgICAgICAgICAgICAgICAgaWYgKG9sZHNyYy5tYXRjaCgvKC4qXC9pbWFnZXNcL3Bvc3RlcnNcL1xkKyktKD86MzAwfDEzOClcLmpwZ1w/KFxkKykkLykpIHsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZ0V4cC4kMSArICcuanBnPycgKyBSZWdFeHAuJDI7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBNdXNpYwogICAgICAgICAgICB7bmFtZTogJ+e9keaYk+S6kemfs+S5kCcsCiAgICAgICAgICAgICB1cmw6ICdodHRwOi8vbXVzaWMuMTYzLmNvbS8qJywKICAgICAgICAgICAgIGV4dDogJ3ByZXZpb3VzJywgIC8vIOaJqeWxleaooeW8j++8jOajgOafpeWJjemdouS4gOS4quaYr+WQpuS4uiBpbWcKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICB2YXIgb2xkc3JjID0gdGhpcy5zcmM7CiAgICAgICAgICAgICAgICAgaWYodGhpcy5kYXRhKXsKICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NyYyA9IHRoaXMuZGF0YSgnc3JjJyk7CiAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRzcmMgIT0gbmV3c3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3c3JjOwogICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIGlmIChvbGRzcmMubWF0Y2goLyguKilcP3BhcmFtPVxkK3lcZCskLykpIHsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZ0V4cC4kMTsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOe+juWlswogICAgICAgICAgICB7bmFtZTogIue+juWls+iWhOaDhemmhiIsICAvLyDov5nkuKrnvZHnq5nmnInpmZDliLbvvIzmr4/lpKnlj6rog73nnIvlpJrlsJHlvKAKICAgICAgICAgICAgIHVybDogL15odHRwOlwvXC9ib3FpbmdndWFuXC5jb21cLy9pLAogICAgICAgICAgICAgc2l0ZUV4YW1wbGU6ICdodHRwOi8vYm9xaW5nZ3Vhbi5jb20vUGljdHVyZS8zMTYzNycsCiAgICAgICAgICAgICBsYXp5QXR0cjogJ2RhdGEtb3JpZ2luYWwnLCAgLy8g55Sx5LqO6YeH55So5LqG5bu26L+f5Yqg6L295oqA5pyv77yM5omA5Lul5Zu+54mH5Y+v6IO95Li6IGxvYWRpbmcuZ2lmCiAgICAgICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oaW1nLCBhKSB7CiAgICAgICAgICAgICAgICAgdmFyIG9sZHNyYyA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsJykgfHwgdGhpcy5zcmM7CiAgICAgICAgICAgICAgICAgaWYgKG9sZHNyYykgewogICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c3JjID0gb2xkc3JjLnJlcGxhY2UoLyFbYS16XGRdKyQvLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdzcmMgPT0gb2xkc3JjID8gJycgOiBuZXdzcmM7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDmuLjmiI8KICAgICAgICAgICAge25hbWU6IjE3OC5jb20iLAogICAgICAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgICAgICAgdXJsOi9eaHR0cHM/OlwvXC8oPzpcdytcLikrMTc4XC5jb21cLy9pLAogICAgICAgICAgICAgY2xpa1RvT3Blbjp7CiAgICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OnRydWUsCiAgICAgICAgICAgICAgICAgdHlwZTonYWN0dWFsJywKICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICBnZXRJbWFnZTpmdW5jdGlvbihpbWcsYSl7CiAgICAgICAgICAgICAgICAgaWYoIWEpcmV0dXJuOwogICAgICAgICAgICAgICAgIHZhciByZWc9L15odHRwcz86XC9cLyg/Olx3K1wuKSsxNzhcLmNvbVwvLis/KGh0dHBzPzpcL1wvaW1nXGQqLjE3OC5jb21cL1teLl0rXC4oPzpqcGd8anBlZ3xwbmd8Z2lmfGJtcCkpL2k7CiAgICAgICAgICAgICAgICAgcmV0dXJuIChhLmhyZWYubWF0Y2gocmVnKSB8fCBbXSlbMV07CiAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8g6K665Z2bCiAgICAgICAgICAgIHtuYW1lOiLmnoHpmZDkuLvpopjnpL7ljLoiLAogICAgICAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgICAgICAgdXJsOi9eaHR0cHM/OlwvXC9iYnNcLnRoZW1leFwubmV0XC8uKy9pLAogICAgICAgICAgICAgY2xpa1RvT3Blbjp7CiAgICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OnRydWUsCiAgICAgICAgICAgICAgICAgdHlwZTonYWN0dWFsJywKICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICBnZXRJbWFnZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgIHZhciByZWc9L14oaHR0cHM/OlwvXC9iYnNcLnRoZW1leFwubmV0XC9hdHRhY2htZW50XC5waHBcPy4rKSZ0aHVtYj0xKC4rKS9pOwogICAgICAgICAgICAgICAgIHZhciBzcmM9dGhpcy5zcmM7CiAgICAgICAgICAgICAgICAgdmFyIHJldD1zcmMucmVwbGFjZShyZWcsJyQxJDInKTsKICAgICAgICAgICAgICAgICByZXR1cm4gcmV0IT1zcmM/IHJldCA6ICcnOwogICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6Im9wZXJh5a6Y5pa56K665Z2bIiwKICAgICAgICAgICAgIHNpdGVFeGFtcGxlOiJodHRwOi8vYmJzLm9wZXJhY2hpbmEuY29tIiwKICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICAgICAgIHVybDovXmh0dHA6XC9cL2Jic1wub3BlcmFjaGluYVwuY29tL2ksCiAgICAgICAgICAgICBnZXRJbWFnZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgIHZhciBzcmM9dGhpcy5zcmM7CiAgICAgICAgICAgICAgICAgaWYoL2ZpbGUucGhwXD9pZD1cZCskL2kudGVzdChzcmMpKXsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNyYysnJm1vZGU9dmlldyc7CiAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyDnibnmrornmoTpnIDopoHkv67mraMKICAgICAgICAgICAge25hbWU6ICdnaXRodWIg5L+u5q2jJywKICAgICAgICAgICAgIHVybDogL15odHRwcz86XC9cL2dpdGh1YlwuY29tXC8vaSwKICAgICAgICAgICAgIGNsaWtUb09wZW46IHsKICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLAogICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiB0cnVlLAogICAgICAgICAgICAgICAgIHR5cGU6ICdhY3R1YWwnLAogICAgICAgICAgICAgfSwKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihpbWcsIGEpIHsKICAgICAgICAgICAgICAgICBpZiAoYSAmJiBhLmhyZWYuaW5kZXhPZignL2Jsb2IvbWFzdGVyLycpID4gMCkgewogICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmM7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8g6ZyA6KaBIHhociDojrflj5bnmoQKICAgICAgICAgICAge25hbWU6ICfkvJjnvo7lm74nLAogICAgICAgICAgICAgdXJsOiAvaHR0cDpcL1wvKD86d3d3XC4pP3RvcGl0XC5tZVwvLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihpbWcsIGEpIHsgIC8vIOWmguaenOaciSB4aHLvvIzliJnlupTor6Xov5Tlm54geGhyIOeahCB1cmwKICAgICAgICAgICAgICAgICBpZiAoYSAmJiBhLmhyZWYubWF0Y2goL3RvcGl0XC5tZVwvaXRlbVwvXGQrLykpIHsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaHJlZjsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9LAogICAgICAgICAgICAgbGF6eUF0dHI6ICdkYXRhLW9yaWdpbmFsJywgIC8vIOW7tui/n+WKoOi9veaKgOacr+iuqeWQjumdoueahOWbvueJh+aYryBibGFuay5naWYKICAgICAgICAgICAgIHhocjogewogICAgICAgICAgICAgICAgIHE6IFsnYVtkb3dubG9hZF0nLCAnYSNpdGVtLXRpcCddLAogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogJ+WNiuasoeWFgycsCiAgICAgICAgICAgICB1cmw6IC9eaHR0cHM/OlwvXC9iY3lcLm5ldFwvLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmMucmVwbGFjZSgvXC9cZFhcZCR8XC93XGQrJC8sIiIpLnJlcGxhY2UoL1wvY292ZXJcLy8sIi9wb3N0LyIpLnJlcGxhY2UoL1wvKG1pZGRsZXxzbWFsbClcLmpwZy8sIi9iaWcuanBnIik7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAnU3RlYW1wb3dlcmVkJywKICAgICAgICAgICAgIHVybDogL1wuc3RlYW1wb3dlcmVkXC5jb20vLAogICAgICAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYy5yZXBsYWNlKC9cLlxkK3hcZCtcLmpwZy8sIi5qcGciKTsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICdTdGVhbWNvbW11bml0eScsCiAgICAgICAgICAgICB1cmw6IC9zdGVhbWNvbW11bml0eVwuY29tLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmMucmVwbGFjZSgvb3V0cHV0XC1xdWFsaXR5PVxkKyZmaXQ9aW5zaWRlXHxcZCtcOlxkKy8sIm91dHB1dC1xdWFsaXR5PTEwMCZmaXQ9aW5zaWRlfDA6MCIpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogJ+efpeS5jicsCiAgICAgICAgICAgICB1cmw6IC96aGlodVwuY29tLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmMucmVwbGFjZSgvXyhifHN8bHxcZCt4XGQrKVwuLywiLiIpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogJ055YWEnLAogICAgICAgICAgICAgdXJsOiAvbnlhYVwuc2UvLAogICAgICAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgIHJldHVybiAvdXBsb2FkXC9zbWFsbFwvLy50ZXN0KHRoaXMuc3JjKT90aGlzLnNyYy5yZXBsYWNlKC91cGxvYWRcL3NtYWxsXC8vLCJ1cGxvYWQvYmlnLyIpOm51bGw7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAiaXR1bmVzIiwKICAgICAgICAgICAgIHVybDogL2l0dW5lc1wuYXBwbGVcLmNvbS8sCiAgICAgICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3JjLnJlcGxhY2UoL1xkK3hcZCtiYlwuLywiMTQwMHgxNDAwYmIuIik7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAi5rG96L2m5LmL5a62IiwKICAgICAgICAgICAgIHVybDogL1wuYXV0b2hvbWVcLmNvbVwuY24vLAogICAgICAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYy5yZXBsYWNlKC8oXD9pbWFnZVZpZXcuKnxcZCt4XGQrX1xkK198Zl9tX3x0X3xzXykvLCIiKTsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICLmmJPovaYiLAogICAgICAgICAgICAgdXJsOiAvXC5iaXRhdXRvXC5jb20vLAogICAgICAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYy5yZXBsYWNlKC9fXGQrXC5qcGckL2ksIl8xMi5qcGciKTsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICLniLHljaEiLAogICAgICAgICAgICAgdXJsOiAvXC54Y2FyXC5jb21cLmNuLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmMucmVwbGFjZSgvXC1cZCt4XGQrXC5qcGcvaSwiIik7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAi5aSq5bmz5rSL5rG96L2mIiwKICAgICAgICAgICAgIHVybDogL1wucGNhdXRvXC5jb21cLmNuLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmMucmVwbGFjZSgvX1xkK3hcZCtcLmpwZyQvaSwiLmpwZyIpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogIuaWsOa1quaxvei9piIsCiAgICAgICAgICAgICB1cmw6IC9cLmF1dG9cLnNpbmFcLmNvbVwuY24vLAogICAgICAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYy5yZXBsYWNlKC9fXGQrXC5qcGckL2ksIl9zcmMuanBnIik7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAiZ3JlYXN5Zm9yayIsCiAgICAgICAgICAgICB1cmw6IC8oZ3JlYXN5Zm9ya3xzbGVhenlmb3JrKVwub3JnLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmMucmVwbGFjZSgvXC90aHVtYlwvL2ksIi9vcmlnaW5hbC8iKS5yZXBsYWNlKC9cL3RodW1ibmFpbHNcLy9pLCIvIikucmVwbGFjZSgvKFwvZm9ydW1cL3VwbG9hZHNcL3VzZXJwaWNzXC8uKlwvKW4oW15cL10rKSQvLCIkMXAkMiIpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogImRyaWJiYmxlIiwKICAgICAgICAgICAgIHVybDogL2RyaWJiYmxlXC5jb20vLAogICAgICAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYy5yZXBsYWNlKC9fdGVhc2VyKC5bXlwuXSspJC9pLCIkMSIpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogIueZvuW6pueZvuenkSIsCiAgICAgICAgICAgICB1cmw6IC9iYWlrZVwuYmFpZHVcLmNvbS8sCiAgICAgICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3JjLnJlcGxhY2UoLy4qYmRzdGF0aWNcLmNvbS4qXC8oW15cL10rKVwuanBnL2ksImh0dHA6Ly9pbWdzcmMuYmFpZHUuY29tL2JhaWtlL3BpYy9pdGVtLyQxLmpwZyIpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogIm52c2hlbnMiLAogICAgICAgICAgICAgdXJsOiAvbnZzaGVuc1wuY29tfG9udnNoZW5cLmNvbS8sCiAgICAgICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3JjLnJlcGxhY2UoLyhcaW1nXC5vbnZzaGVuXC5jb20uKikoPzp0aHVtYlwvfF9zKSguKikvaSwiJDEkMiIpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogIjI0bWVpdHUiLAogICAgICAgICAgICAgdXJsOiAvMjRtZWl0dVwuY29tfDI1bWVpbnZcLmNvbXxhaXNpbWVpbnZcLmNvbXwyNHR1cGlhblwuY29tfDI0bWVpbnZcLi8sCiAgICAgICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3JjLnJlcGxhY2UoL1wvbShbXlwvXSspJC9pLCIvJDEiKS5yZXBsYWNlKC9pbWdzXC4vaSwiYmltZy4iKTsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICJUdW1ibHIiLAogICAgICAgICAgICAgdXJsOiAvdHVtYmxyXC5jb20vLAogICAgICAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgIGlmKC9cL2F2YXRhcl8vLnRlc3QodGhpcy5zcmMpKXJldHVybiB0aGlzLnNyYy5yZXBsYWNlKC8obWVkaWFcLnR1bWJsclwuY29tLipfKVteX10rKFwuW15cLl0rKSQvaSwiJDE1MTIkMiIpOwogICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIHRoaXMuc3JjLnJlcGxhY2UoL1teXC9dKihtZWRpYVwudHVtYmxyXC5jb20uKl8pXGQrKFwuW15cLl0rKSQvaSwiJDFyYXckMiIpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogIkFjZ2dldCIsCiAgICAgICAgICAgICB1cmw6IC9hY2cxOFwudXN8YWNnZ2V0XC4vLAogICAgICAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbCcpIHx8IHRoaXMuc3JjLnJlcGxhY2UoLyhwaWNcLmFjZ2dldFwuY29tXC90aHVtYlwvKXdcZCtfaFxkK1wvL2ksIiQxdzk5OTlfaDk5OTkvIik7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAiUGl4aXYiLAogICAgICAgICAgICAgdXJsOiAvcGl4aXZcLm5ldHxweGltZ1wubmV0LywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICB2YXIgcHJlU3RyPXRoaXMuc3JjLnJlcGxhY2UoL3B4aW1nXC5uZXRcL2NcL1xkK3hcZCtcL2ltZy1tYXN0ZXJcL2ltZ1wvKC4qKV9bXl9dKyhcLlthLXpdKykkL2ksInB4aW1nLm5ldC9pbWctb3JpZ2luYWwvaW1nLyQxIik7CiAgICAgICAgICAgICAgICAgaWYocHJlU3RyIT10aGlzLnNyYykKICAgICAgICAgICAgICAgICByZXR1cm4gW3ByZVN0cisiLmpwZyIscHJlU3RyKyIucG5nIl07CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAiV2FsbGhhdmVuIiwKICAgICAgICAgICAgIHVybDogL3dhbGxoYXZlblwuLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmMucmVwbGFjZSgvd2FsbHBhcGVyc1wvdGh1bWJcL3NtYWxsXC90aC9pLCJ3YWxscGFwZXJzL2Z1bGwvd2FsbGhhdmVuIik7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAibG9mdGVyIiwKICAgICAgICAgICAgIHVybDogL2xvZnRlclwuLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihpbWcsIGEpIHsKICAgICAgICAgICAgICAgICBpZihhICYmIGEuaHJlZiAmJiBhLmhhc0F0dHJpYnV0ZSgiYmlnaW1nc3JjIikpewogICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImJpZ2ltZ3NyYyIpOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmMucmVwbGFjZSgvXD8uKi9pLCIiKTsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICJzb2h1IiwKICAgICAgICAgICAgIHVybDogLyhzb2h1fHNvaHVjcylcLmNvbS8sCiAgICAgICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3JjLnJlcGxhY2UoLyhzb2h1Y3NcLmNvbVwvKS4qXC8oaW1hZ2VzXC98b3NcLykvaSwiJDEkMiIpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogIm1vZWdpcmwiLAogICAgICAgICAgICAgdXJsOiAvKG1vZWdpcmx8bWVuZ25pYW5nKVwub3JnLywKICAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcmMucmVwbGFjZSgvKGNvbW1vbilcL3RodW1iKC4qKVwvW15cL10rL2ksIiQxJDIiKTsKICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIF07CgogICAgICAgIC8vIOmAmumFjeWei+inhOWImSzml6Dop4bnq5nngrkuCiAgICAgICAgdmFyIHRwcnVsZXM9WwogICAgICAgICAgICBmdW5jdGlvbihpbWcsIGEpIHsgLy8g6Kej5Yaz5paw55qEZHrorrrlnZvnmoTljp/lm77ojrflj5bmlrnlvI8uCiAgICAgICAgICAgICAgICB2YXIgcmVncyA9IFsvKC4rXC9hdHRhY2htZW50cz9cLy4rKVwudGh1bWJcLlx3ezIsNX0kL2ksLygod3AtY29udGVudHxtb2VjZG5cLm9yZylcL3VwbG9hZHNcLy4qKVwtXGQreFxkKy9pLC8uKig/OnVybHxzcmMpPShodHRwcz86XC9cLy4qXC4oPzpqcGd8anBlZ3xwbmd8Z2lmfGJtcCkpLiovaSwvLip0aHVtYlwucGhwXD9zcmM9KFteJl0qKS4qL2ldOwogICAgICAgICAgICAgICAgdmFyIG9sZHNyYyA9IHRoaXMuc3JjLG5ld3NyYyA9IHRoaXMuc3JjOwogICAgICAgICAgICAgICAgaWYgKG9sZHNyYyl7CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCByZWcgb2YgcmVncyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWcudGVzdChvbGRzcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdzcmMgPSBvbGRzcmMucmVwbGFjZShyZWcsICckMScpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsPXRoaXMuZ2V0QXR0cmlidXRlP3RoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsJyk6IiI7CiAgICAgICAgICAgICAgICBpZihvcmlnaW5hbCAmJiBvcmlnaW5hbCE9b2xkc3JjKXJldHVybiBvcmlnaW5hbDsKICAgICAgICAgICAgICAgIGVsc2UgaWYoL2F0dGFjaG1lbnRcLnBocFw/YXR0YWNobWVudGlkPVxkKy8udGVzdChvbGRzcmMpKXsKICAgICAgICAgICAgICAgICAgICAgbmV3c3JjPW9sZHNyYy5yZXBsYWNlKC8oYXR0YWNobWVudFwucGhwXD9hdHRhY2htZW50aWQ9XGQrKS4qLywiJDEiKTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKC9cLnNpbmFpbWdcLihjbnxjb20pXC9td1xkK1wvLy50ZXN0KG9sZHNyYykpewogICAgICAgICAgICAgICAgICAgIG5ld3NyYz1vbGRzcmMucmVwbGFjZSgvLiooaHR0cHM/OlwvXC9bXlwuXStcLnNpbmFpbWdcLihjbnxjb20pKVwvbXdcZCtcLy8sIiQxL2xhcmdlLyIpOwogICAgICAgICAgICAgICAgfWVsc2UgaWYoL2dyYXZhdGFyXC5jb21cL2F2YXRhclwvLipbXD8mXXM9Ly50ZXN0KG9sZHNyYykpewogICAgICAgICAgICAgICAgICAgIG5ld3NyYz1vbGRzcmMucmVwbGFjZSgvKGdyYXZhdGFyXC5jb21cL2F2YXRhclwvLipbXD8mXXM9KS4qLywiJDE1MDAiKTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKC91Y19zZXJ2ZXJcL2F2YXRhclwucGhwXD91aWQ9XGQrJnNpemU9LiovLnRlc3Qob2xkc3JjKSl7CiAgICAgICAgICAgICAgICAgICAgbmV3c3JjPW9sZHNyYy5yZXBsYWNlKC8odWNfc2VydmVyXC9hdmF0YXJcLnBocFw/dWlkPVxkKyZzaXplPSkuKi8sIiQxYmlnIik7CiAgICAgICAgICAgICAgICB9ZWxzZSBpZigvXC5tZFwuW15cLl0rJC8udGVzdChvbGRzcmMpKXsKICAgICAgICAgICAgICAgICAgICBuZXdzcmM9b2xkc3JjLnJlcGxhY2UoL1wubWQoXC5bXlwuXSspJC9pLCIkMSIpOwogICAgICAgICAgICAgICAgfWVsc2UgaWYoL1wuMTI2XC5uZXQuKlwvXGQrXC5cZCt4XGQrXC5cZCtcLlteXC5dKyQvLnRlc3Qob2xkc3JjKSl7CiAgICAgICAgICAgICAgICAgICAgbmV3c3JjPW9sZHNyYy5yZXBsYWNlKC9cL1xkK1wuXGQreFxkK1wuXGQrXC4oW15cLl0rKSQvaSwiLzUuNTAwMHg1MDAwLjEwMC4kMSIpOwogICAgICAgICAgICAgICAgfWVsc2UgaWYoL1wueXRpbWdcLmNvbS8udGVzdChvbGRzcmMpKXsKICAgICAgICAgICAgICAgICAgICBuZXdzcmM9b2xkc3JjLnJlcGxhY2UoL1w/LiokL2ksIiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG9sZHNyYyAhPSBuZXdzcmMgPyBuZXdzcmMgOiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgXTsKCiAgICAgICAgdmFyIFJ1bGUgPSB7fTsKCiAgICAgICAgLy8g5YW85a65IEltYWd1cyDmianlsZXnmoTop4TliJnvvIzoh6rlrprkuYnpg6jliIYKICAgICAgICBSdWxlLkltYWd1cyA9IHt9OwoKICAgICAgICAvKioKICAgICAgICAgKiDlhbzlrrkgTW91c2VvdmVyIFBvcHVwIEltYWdlIFZpZXdlciDohJrmnKznmoTop4TliJnvvIjpnZ7lrozlhajvvIkKICAgICAgICAgKiAx44CB5paw5aKe5LqG54m55q6K55qE5pu/5o2i5qih5byP77ya5LulIHI7IOW8gOWktOOAggogICAgICAgICAqIDLjgIHlt7LljrvpmaQgaHR0cDovLyDlpLTvvIzlkI7pnaLkvJrliqDkuIrjgIIKICAgICAgICAgKi8KICAgICAgICBSdWxlLk1QSVYgPSBbCiAgICAgICAgICAgIC8vIOWbvueJhwogICAgICAgICAgICB7bmFtZTogIueZvuW6puWbvueJh+OAgei0tOWQp+etiSIsCiAgICAgICAgICAgICByOiAiKGhpcGhvdG9zfGltZ3NyYylcXC5iYWlkdVxcLmNvbS8oLis/KS8uKz8oWzAtOWEtZl17NDB9KSIsCiAgICAgICAgICAgICBzOiAicjskMS5iYWlkdS5jb20vJDIvcGljL2l0ZW0vJDMiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIHtuYW1lOiAi55m+5bqm5Zu+54mHMiIsCiAgICAgICAgICAgIC8vICBkOiAiaW1hZ2UuYmFpZHUuY29tIiwgIC8vIGltZ3Q4LmJkc3RhdGljLmNvbSDnsbvlnovnmoTlm77niYfpk77mjqUKICAgICAgICAgICAgLy8gIHI6ICJpbWFnZVxcLmJhaWR1XFwuY29tL2RldGFpbC9uZXdpbmRleFxcPyIsCiAgICAgICAgICAgIC8vICBxOiAnaW1nW2FsdD0icHJlbG9hZGluZyJdW3NyYyo9Ii9waWMvaXRlbS8iXScsCiAgICAgICAgICAgIC8vICAvLyBkZXNjcmlwdGlvbjogJy4vLi4vLi4vZm9sbG93aW5nLXNpYmxpbmc6OmRpdltAY2xhc3M9ImV4dC1pbmZvIl0vYScsCiAgICAgICAgICAgIC8vIH0sCiAgICAgICAgICAgIHtuYW1lOiAiR29vZ2xlQ29udGVudCIsICAvLyDmnaXoh6ogSW1hZ3VzIOaJqeWxlQogICAgICAgICAgICAgcjogIl4oKD86KD86bGh8Z3B8eXQpXFxkK1xcLmcoPzpvb2dsZXVzZXJjb250ZW58Z3BoKXxcXGRcXC5icFxcLmJsb2dzcG8pdFxcLmNvbS8pKD86KFtfLV0oPzpbXFx3XFwtXXsxMX0vKXs0fSlbXi9dKygvW14/I10rKT98KFtePV0rKSkuKiIsCiAgICAgICAgICAgICBzOiBmdW5jdGlvbigkLCBub2RlKSB7CiAgICAgICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgICAgICAgLy8gJ2h0dHA6Ly8nICsgJFsxXSArICgkWzRdID8gJFs0XSArICc9JyA6ICRbMl0pICsgJ3MwJyArICgkWzNdIHx8ICcnKSwgICAgLy8g5Y6f5Zu+CiAgICAgICAgICAgICAgICAgICAgICdodHRwOi8vJyArICRbMV0gKyAoJFs0XSA/ICRbNF0gKyAnPScgOiAkWzJdKSArICdzMTAyNCcgKyAoJFszXSB8fCAnJykgIC8vIDEwMjQg5aSn5bCPCiAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAicGl4aXbvvIjpg6jliIbvvIkiLAogICAgICAgICAgICAgZDogJ3BpeGl2Lm5ldCcsCiAgICAgICAgICAgICByOiAvKHBpeGl2Lm5ldFwvaW1nXGQrXC9pbWdcLy4rXC9cZCspX1ttc11cLihcd3syLDV9KSQvaSwKICAgICAgICAgICAgIHM6ICdyOyQxLiQyJwogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogIjUwMHB4IiwgIC8vIOinhOWImeadpeiHqiBpbWFndXPvvIzlj6rmnInkuIDljYoKICAgICAgICAgICAgIGQ6ICI1MDBweC5jb20iLAogICAgICAgICAgICAgcjogIl4oKD86KD86cHA/Y2RufHNcXGRcXC5hbWF6b25hd3NcXC5jb20vcGhvdG9zfGdwXFxkK1xcLndhY1xcLmVkZ2VjYXN0Y2RuXFwubmV0LzgwNjYxNC9waG90b3MvcGhvdG9zKVxcLjUwMHB4fGRqbGhnZ2lwY3lsbG9cXC5jbG91ZGZyb250KVxcLig/Om5ldHxvcmcpL1xcZCsvW1xcZGEtZl17NDB9LylcXGQrXFwuIiwKICAgICAgICAgICAgIHM6ICIkMTIwNDguanBnIgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8g5bi455So56uZ54K5CiAgICAgICAgICAgIHtuYW1lOiAn6LGG55OjJywKICAgICAgICAgICAgIHI6ICIoaW1nXFxkK1xcLmRvdWJhblxcLmNvbS8pKD86KHZpZXcvKSg/OnBob3RvfG1vdmllX3Bvc3Rlcl9jb3ZlcikvKD8hbGFyZ2UpW14vXSt8KGljb24vdSg/PVxcZCkpfFtzbV0oPz1waWMvKSkoLiopIiwKICAgICAgICAgICAgIHM6IGZ1bmN0aW9uKG0sIG5vZGUpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgICAgICAvLyAnaHR0cDovLycgKyBtWzFdICsgKG1bMl0gPyBtWzJdICsgJ3Bob3RvL3JhdycgOiAoKG1bM118fCcnKSArICdsJykpICsgbVs0XSwKICAgICAgICAgICAgICAgICAgICAgJ2h0dHA6Ly8nICsgbVsxXSArIChtWzJdID8gbVsyXSArICdwaG90by9waG90bycgOiAoKG1bM118fCcnKSArICdsJykpICsgbVs0XQogICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICB9LAogICAgICAgICAgICAgbm90ZTogIuS6uuS6uuW9seinhueahOixhueTo+iEmuacrOmcgOimgeeUqOWIsCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g6LSt54mpCiAgICAgICAgICAgIHtuYW1lOiAi5reY5a6dIiwKICAgICAgICAgICAgIHI6IC8oKD86aW1nXGRcZFwudGFvYmFvY2RufGltZyg/OlteLl0qXC4/KXsxLDJ9P1wuYWxpY2RuKVwuY29tXC8pKD86aW1nXC98dHBzXC9odHRwOlwvXC9pbWdcZFxkK1wudGFvYmFvY2RuXC5jb21cLyk/KCg/OmltZ2V4dHJhfGJhb1wvdXBsb2FkZWQpXC8uK1wuKD86anBlP2d8cG5nfGdpZnxibXApKV8uK1wuanBnJC8sCiAgICAgICAgICAgICBzOiAiaHR0cDovLyQxJDIiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAiYWxpMSIsCiAgICAgICAgICAgICByOiAvKC4qXC5hbGljZG5cLmNvbVwvLio/KSgoLmpwZ3wucG5nKShcLnxfKVxkK3hcZCsuKilcLmpwZyhfXC53ZWJwKT8kLywKICAgICAgICAgICAgIHM6ICIkMSQzIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogImFsaTIiLAogICAgICAgICAgICAgcjogLyguKlwuYWxpY2RuXC5jb21cLy4qPykoKFwufF8pXGQreFxkKy4qfFwuc2VhcmNofFwuc3VtbSlcLmpwZyhfXC53ZWJwKT8kLywKICAgICAgICAgICAgIHM6ICIkMS5qcGciCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAiMeWPt+W6lyIsCiAgICAgICAgICAgICByOiAvKC4qXC55aWhhb2RpYW5pbWdcLmNvbVwvLiopX1xkK3hcZCtcLmpwZyQvLAogICAgICAgICAgICAgczogIiQxLmpwZyIKICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICLkuqzkuJwiLAogICAgICAgICAgICAgcjogLyguKjM2MGJ1eWltZ1wuY29tXC8pblxkXC8uKz9cXyguKikvLAogICAgICAgICAgICAgczogIiQxaW1nem9uZS8kMiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICLkuqzkuJwxIiwKICAgICAgICAgICAgIHI6IC8oLiozNjBidXlpbWdcLmNvbVwvKW5cZFwvKC4qKS8sCiAgICAgICAgICAgICBzOiAiJDFuMC8kMiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAge25hbWU6ICLkuqzkuJwyIiwKICAgICAgICAgICAgIHI6IC8oLiozNjBidXlpbWdcLmNvbVwvLiopc1xkK3hcZCtfKC4qKS8sCiAgICAgICAgICAgICBzOiAiJDEkMiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g55S15a2Q5LmmCiAgICAgICAgICAgIHtuYW1lOiAi5b2T5b2TIiwKICAgICAgICAgICAgIGQ6ICJkYW5nZGFuZy5jb20iLAogICAgICAgICAgICAgcjogLyguKmRkaW1nLmNuXC8uKj8pX1tid11fKFxkK1wuanBnJCkvLAogICAgICAgICAgICAgczogIiQxX2VfJDIiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHtuYW1lOiAi5aSa55yL6ZiF6K+7IiwKICAgICAgICAgICAgIGQ6ICJkdW9rYW4uY29tIiwKICAgICAgICAgICAgIHI6IC8oY292ZXIucmVhZC5kdW9rYW4uY29tLio/XC5qcGcpIVx3KyQvLAogICAgICAgICAgICAgczogIiQxIgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8g6KeG6aKR44CB5paw6Ze7CiAgICAgICAgICAgIC8vIHtuYW1lOiAi5LyY6YW355S16KeG5YmnIiwKICAgICAgICAgICAgLy8gIGQ6ICJ5b3VrdS5jb20iLAogICAgICAgICAgICAvLyAgcjogInd3d1xcLnlvdWt1XFwuY29tXFwvc2hvd19wYWdlXFwvaWRfLipcXC5odG1sIiwKICAgICAgICAgICAgLy8gIHE6ICIuYmFzZWluZm8gPiAudGh1bWIgPiBpbWciLAogICAgICAgICAgICAvLyAgZXhhbXBsZTogJ2h0dHA6Ly93d3cueW91a3UuY29tL3Zfb2xpc3QvY185Ny5odG1sJywKICAgICAgICAgICAgLy8gfSwKICAgICAgICAgICAge25hbWU6ICLkurrkurrlvbHop4YiLAogICAgICAgICAgICAgZDogInl5ZXRzLmNvbSIsCiAgICAgICAgICAgICByOiAiXihyZXNcXC55eWV0c1xcLmNvbS4qPy9mdHAvKD86YXR0YWNobWVudC8pP1xcZCsvXFxkKykvW21zXV8oLiopIiwKICAgICAgICAgICAgIHM6ICJodHRwOi8vJDEvJDIiCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyDorrrlnZsgQkJTCiAgICAgICAgICAgIHtuYW1lOiAiZmlyZWZveCDmianlsZXkuK3lv4MiLAogICAgICAgICAgICAgZDogImFkZG9ucy5tb3ppbGxhLm9yZyIsCiAgICAgICAgICAgICByOiAiYWRkb25zLmNkbi5tb3ppbGxhLm5ldC91c2VyLW1lZGlhL3ByZXZpZXdzL3RodW1icy8iLAogICAgICAgICAgICAgczogIi90aHVtYnMvZnVsbC8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogImZpcmVmb3gg5Lit5paH56S+5Yy6IiwKICAgICAgICAgICAgIGQ6ICJmaXJlZm94Lm5ldC5jbiIsCiAgICAgICAgICAgICByOiAid3d3LmZpcmVmb3gubmV0LmNuL2F0dGFjaG1lbnQvdGh1bWIvIiwKICAgICAgICAgICAgIHM6ICJyO3d3dy5maXJlZm94Lm5ldC5jbi9hdHRhY2htZW50LyIKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIOi9r+S7tiBTb2Z0V2FyZQogICAgICAgICAgICB7bmFtZTogIumdnuWHoei9r+S7tuermSIsCiAgICAgICAgICAgICBkOiAid3d3LmNyc2t5LmNvbSIsCiAgICAgICAgICAgICByOiAvcGljXC5jcnNreVwuY29tLipfc1wuZ2lmJC9pLAogICAgICAgICAgICAgczogJy9fcy4vLi8nLAogICAgICAgICAgICAgZXhhbXBsZTogImh0dHA6Ly93d3cuY3Jza3kuY29tL3NvZnQvNTM1Ny5odG1sIiwKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHtuYW1lOiAiem9sIiwKICAgICAgICAgICAgIGQ6ICJkZXRhaWwuem9sLmNvbS5jbiIsCiAgICAgICAgICAgICByOiAvKFx3K1wuem9sLWltZ1wuY29tXC5jblwvcHJvZHVjdFwvXGQrKV9cZCt4XGQrXC8oLipcLmpwZykvaSwKICAgICAgICAgICAgIHM6ICIkMS8kMiIsCiAgICAgICAgICAgICAvLyBzOiAiJDFfODAweDYwMC8kMiIsCiAgICAgICAgICAgICBleGFtcGxlOiAiaHR0cDovL2RldGFpbC56b2wuY29tLmNuLzI0MC8yMzk4NTcvcGljLnNodG1sIgogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDmuLjmiI8gR2FtZQogICAgICAgICAgICB7bmFtZTogIuWkqeaegee9kSIsCiAgICAgICAgICAgICBkOiAiZ2FtZS55ZXNreS5jb20iLAogICAgICAgICAgICAgcjogL19cZCt4XGQrXC4oW2Etel0rKSQvaSwKICAgICAgICAgICAgIHM6ICdyOy4kMScsCiAgICAgICAgICAgICBleGFtcGxlOiAiaHR0cDovL2dhbWUueWVza3kuY29tL3R1cGlhbi8xNjUvMzc5Njg2NjUuc2h0bWwiLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7bmFtZTogIui2hee6p+eOqeWutiIsCiAgICAgICAgICAgICBkOiAiZG90YTIuc2dhbWVyLmNvbSIsCiAgICAgICAgICAgICByOiAvXC9zKFteXC5cL10rXC5bYS16XSskKS9pLAogICAgICAgICAgICAgczogInI7LyQxIiwKICAgICAgICAgICAgIGV4YW1wbGU6ICJodHRwOi8vZG90YTIuc2dhbWVyLmNvbS9hbGJ1bXMvMjAxNDA3LzgyNjNfMzMwODY2Lmh0bWwiLAogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8g5ryr55S7CiAgICAgICAgICAgIHtuYW1lOiAibmhlbnRhaSIsCiAgICAgICAgICAgICBkOiAibmhlbnRhaS5uZXQiLAogICAgICAgICAgICAgcjogL1wvKFxkKyl0KFwuW2Etel0rKSQvaSwKICAgICAgICAgICAgIHM6ICJyOy8kMSQyIiwKICAgICAgICAgICAgIGV4YW1wbGU6ICJodHRwOi8vbmhlbnRhaS5uZXQvZy8xMTM0NzUvIiwKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIEdpdGh1YkF2YXRhcnMKICAgICAgICAgICAge25hbWU6ICJHaXRodWJBdmF0YXJzIiwKICAgICAgICAgICAgIGQ6ICJnaXRodWIuY29tIiwKICAgICAgICAgICAgIHI6IC8oYXZhdGFyc1xkK1wuZ2l0aHVidXNlcmNvbnRlbnRcLmNvbS4qKVw/LiokL2ksCiAgICAgICAgICAgICBzOiAiJDEiLAogICAgICAgICAgICAgZXhhbXBsZTogImh0dHBzOi8vYXZhdGFyczIuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMzIzMzI3NS8iLAogICAgICAgICAgICB9LAogICAgICAgIF07CgogICAgICAgIC8v5Zu+5qCHCiAgICAgICAgcHJlZnMuaWNvbnM9ewogICAgICAgICAgICBhY3R1YWw6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBSUFBQUJ2RmFxdkFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBMlpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdUVTA5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5dGJTOGlJSGh0Ykc1ek9uTjBVbVZtUFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdmMxUjVjR1V2VW1WemIzVnlZMlZTWldZaklpQjRiV3h1Y3pwNGJYQTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzhpSUhodGNFMU5Pazl5YVdkcGJtRnNSRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBGUWtFNVJqQTBSRGsyTXpoRk1qRXhRVFUwUkVKR05EUkNRVEZDT1VORVJTSWdlRzF3VFUwNlJHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEb3pPRUUwTjBGRE1UTkVOamd4TVVVeU9VUTRSRVUxTURsRlJEWXdOVGt6T1NJZ2VHMXdUVTA2U1c1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvek9FRTBOMEZETURORU5qZ3hNVVV5T1VRNFJFVTFNRGxGUkRZd05Ua3pPU0lnZUcxd09rTnlaV0YwYjNKVWIyOXNQU0pCWkc5aVpTQlFhRzkwYjNOb2IzQWdRMU0ySUNoWGFXNWtiM2R6S1NJK0lEeDRiWEJOVFRwRVpYSnBkbVZrUm5KdmJTQnpkRkpsWmpwcGJuTjBZVzVqWlVsRVBTSjRiWEF1YVdsa09rVkNRVGxHTURSRU9UWXpPRVV5TVRGQk5UUkVRa1kwTkVKQk1VSTVRMFJGSWlCemRGSmxaanBrYjJOMWJXVnVkRWxFUFNKNGJYQXVaR2xrT2tWQ1FUbEdNRFJFT1RZek9FVXlNVEZCTlRSRVFrWTBORUpCTVVJNVEwUkZJaTgrSUR3dmNtUm1Pa1JsYzJOeWFYQjBhVzl1UGlBOEwzSmtaanBTUkVZK0lEd3ZlRHA0YlhCdFpYUmhQaUE4UDNod1lXTnJaWFFnWlc1a1BTSnlJajgrbnVoVVVBQUFBVkZKUkVGVWVOcTAxYkdxZ2xBWUIvQnVpUTBoRFUyNmFUZ1l0RVM3NEFzNGlHL2dRemlJYnlBU3RndTJOaFF0dlVHazZBdTRPVGc0cUNqazV1bGM0bDZzYS9lQ3gvc2ZEcHpqeHcvOU9COStBQUFHdmFRWENDTERRVS81TjJpMVdsMHVGMUVVa1hxMFdDeUtvZ2lDb0F2U2hFNm5FOXdhaG9IYWJFRVE0SnJuT1dxUHFxcUNLOGR4cVBkb3Q5dkJiVm1XczlrTXFVY013MlJaQms4Y3gwR0NIdDkxUEI3VE5OVjFIUW42TTlQcEZCVWFqOGY3L1I3V2U1NUhVVlIzeUxJczhKWHI5VG9hamJwQTYvVzZybXZRaUtJb1hhRHorUXllRTBVUmhtSHQwSHcrOTMwL0RNUGxjdGxVNEF5K3ZNNGpzaXkzUUFSQlFPSlJrU1FKVGRQZjBHYXpBVzA1SEE0dGtHbWF6U0xYZFhFYy94eWk0VENPNDFib2RydE5KcE1uaUNSSmVQcFNwMmthZk1UelBIZ2ZTWktlSUZWVmZ4YkJHV1paZHJ2ZC9nTFp0dDN4WnI4YkVheXZIOGxkZ0FFQWp5U2tQZmZwVE93QUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICBjdXJyZW50OidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQUlBQUFCdkZhcXZBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZNa0ZHTWpZeFFrUXpPRUV3TVRGRk1rSkJNemRFTnpJMFFrVkVNak0zTmpnaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk1rRkdNall4UWtVek9FRXdNVEZGTWtKQk16ZEVOekkwUWtWRU1qTTNOamdpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRveVFVWXlOakZDUWpNNFFUQXhNVVV5UWtFek4wUTNNalJDUlVReU16YzJPQ0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG95UVVZeU5qRkNRek00UVRBeE1VVXlRa0V6TjBRM01qUkNSVVF5TXpjMk9DSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9Qa1hmd3kwQUFBRG9TVVJCVkhqYVl2cFBKY0RDd01EQXlNaklRQmtBR3NURVFDVkFOWU5ZMEZ4SWttYmtNR0hCSTBjd1hHamlOZXdHZmZyMDZkeTVjMVF3aUplWGQvLysvZFNKTlVsSlNaTFRFaVlieVBqOCtUTkpHckc3U0V0TGE5KytmWFYxZFpTNmlBeU54RWIvNU1tVElabno1TW1URkxubzM3OS84SXhPZ292T25qMTcrL1p0NUNCRFR2R2hvYUZFdVFpWWlDQTJLeW9xUXNRblRweUlYUFJzMkxBQmkwWTBQakQ1ZlB2MkRhNm5wcWJHM3Q0ZXN4Z0xEZzRtWUZCRlJRV3lodS9mdjArWk1nWFRvUG56NTZOcFpBUmhtUC9KTGthZ1JTMFpaUWdOUzBpcUZyV2tCZzFXQUJCZ0FNVmlNRmNZcVJXYkFBQUFBRWxGVGtTdVFtQ0MnLAogICAgICAgICAgICBtYWduaWZpZXI6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBSUFBQUJ2RmFxdkFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBMlpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdUVTA5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5dGJTOGlJSGh0Ykc1ek9uTjBVbVZtUFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdmMxUjVjR1V2VW1WemIzVnlZMlZTWldZaklpQjRiV3h1Y3pwNGJYQTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzhpSUhodGNFMU5Pazl5YVdkcGJtRnNSRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBGT1VFNVJqQTBSRGsyTXpoRk1qRXhRVFUwUkVKR05EUkNRVEZDT1VORVJTSWdlRzF3VFUwNlJHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEbzJPVFZCTVVGRE9UTTRRVE14TVVVeVFqVTNPRVk1TURWRlF6QTVORGczTmlJZ2VHMXdUVTA2U1c1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvMk9UVkJNVUZET0RNNFFUTXhNVVV5UWpVM09FWTVNRFZGUXpBNU5EZzNOaUlnZUcxd09rTnlaV0YwYjNKVWIyOXNQU0pCWkc5aVpTQlFhRzkwYjNOb2IzQWdRMU0ySUNoWGFXNWtiM2R6S1NJK0lEeDRiWEJOVFRwRVpYSnBkbVZrUm5KdmJTQnpkRkpsWmpwcGJuTjBZVzVqWlVsRVBTSjRiWEF1YVdsa09rVTRSRUV5TVRWQlFUTXpPRVV5TVRGQk5UUkVRa1kwTkVKQk1VSTVRMFJGSWlCemRGSmxaanBrYjJOMWJXVnVkRWxFUFNKNGJYQXVaR2xrT2tVNVFUbEdNRFJFT1RZek9FVXlNVEZCTlRSRVFrWTBORUpCTVVJNVEwUkZJaTgrSUR3dmNtUm1Pa1JsYzJOeWFYQjBhVzl1UGlBOEwzSmtaanBTUkVZK0lEd3ZlRHA0YlhCdFpYUmhQaUE4UDNod1lXTnJaWFFnWlc1a1BTSnlJajgrYzlkdFJnQUFBZHBKUkVGVWVOcXNWUzNMd2xBVWRqSUZneDloQ3lKRFJQRWZLSXFNQmUyR01iQ1l6RE1iL0JOK05BV2pSb3R0UnNNUTFnV0x3V2F3cUVGaDc4TTcyYTUzSDRMc2huRjM3bk9lbmZPY2MrNFkwelFqb2F4UWlFQVNwVXc4ei9kNnZlVnllVHdlbjg4bm50akRBbnN3RndNeWhtR3NsMmF6cWFycTVYTFJORzIvMzU5T3AzdytYNmxVV3EwV3gzR1R5V1M3M2ZxbVphY0dGdmkzMjIxUEtPdzRCY2FQNkIwUklwL05ab3ZGQXVINEJTK0tZcmZiemVWeTZYVGF5ZWcvR3ljaXFEQ2Z6N0ZwTkJvQlFnQURwTHRRanRoUUFaRlRicXZWaXJJQUE2VG5OOTVFVUJUcWtnZTFXaTJUeVZCb1lJQU1xaG9xblVna1hxOFhVdHZ0ZG9nRlpYbzhIcmZiRGFCT3AyT2hXWmFGTVJhTE9ScFRHcUZmaXNVaXFSRTJtODJHK2l3d1FBWnA1Qmx6UEI2bkxHNEZhSTNjS2hxRzBlLzNCVUVnalo0MStRZ1BmYlJlcjlGMUFlWEhLVERrckpDcDBaMDlHQXo4V0pEVTRYQUFYdGQxTnhGclE2MDVHby9IcFZMSmM5WlNxVlM1WEFhbVdxMSt2MGF1MTZzMS9lZnpHZDFnVDMrOVhqZUpwU2lLYjJva2J6S1p0QndLaFlKbEg0MUdKQkhFK2s2VXpXYnY5N3Z0TXh3T0pVa3lYVXVXNVM5RTBKdDBRQ3RQcDFNM0VhNEtrdWpqWXZ2aDVyVkhoUFU4K0dGRkl5RXROcXdmeVo4QUF3RHN1Smd0R0lMQnNRQUFBQUJKUlU1RXJrSmdnZz09JywKICAgICAgICAgICAgZ2FsbGVyeTonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FJQUFBQnZGYXF2QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUF5SnBWRmgwV0UxTU9tTnZiUzVoWkc5aVpTNTRiWEFBQUFBQUFEdy9lSEJoWTJ0bGRDQmlaV2RwYmowaTc3dS9JaUJwWkQwaVZ6Vk5NRTF3UTJWb2FVaDZjbVZUZWs1VVkzcHJZemxrSWo4K0lEeDRPbmh0Y0cxbGRHRWdlRzFzYm5NNmVEMGlZV1J2WW1VNmJuTTZiV1YwWVM4aUlIZzZlRzF3ZEdzOUlrRmtiMkpsSUZoTlVDQkRiM0psSURVdU15MWpNREV4SURZMkxqRTBOVFkyTVN3Z01qQXhNaTh3TWk4d05pMHhORG8xTmpveU55QWdJQ0FnSUNBZ0lqNGdQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRnUEhKa1pqcEVaWE5qY21sd2RHbHZiaUJ5WkdZNllXSnZkWFE5SWlJZ2VHMXNibk02ZUcxd1BTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZJaUI0Yld4dWN6cDRiWEJOVFQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wyMXRMeUlnZUcxc2JuTTZjM1JTWldZOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXpWSGx3WlM5U1pYTnZkWEpqWlZKbFppTWlJSGh0Y0RwRGNtVmhkRzl5Vkc5dmJEMGlRV1J2WW1VZ1VHaHZkRzl6YUc5d0lFTlROaUFvVjJsdVpHOTNjeWtpSUhodGNFMU5Pa2x1YzNSaGJtTmxTVVE5SW5odGNDNXBhV1E2TVRFd01EQXdSVUl6T0VFd01URkZNamhFT0VNNU5rVkdPRE13UWtVeVJqZ2lJSGh0Y0UxTk9rUnZZM1Z0Wlc1MFNVUTlJbmh0Y0M1a2FXUTZNVEV3TURBd1JVTXpPRUV3TVRGRk1qaEVPRU01TmtWR09ETXdRa1V5UmpnaVBpQThlRzF3VFUwNlJHVnlhWFpsWkVaeWIyMGdjM1JTWldZNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEb3hNVEF3TURCRk9UTTRRVEF4TVVVeU9FUTRRemsyUlVZNE16QkNSVEpHT0NJZ2MzUlNaV1k2Wkc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRveE1UQXdNREJGUVRNNFFUQXhNVVV5T0VRNFF6azJSVVk0TXpCQ1JUSkdPQ0l2UGlBOEwzSmtaanBFWlhOamNtbHdkR2x2Ymo0Z1BDOXlaR1k2VWtSR1BpQThMM2c2ZUcxd2JXVjBZVDRnUEQ5NGNHRmphMlYwSUdWdVpEMGljaUkvUHZiU2J2OEFBQUQ4U1VSQlZIamFySlZCRGtRd0ZJWjEwcTBEV05xNmhFT0l1MWlJT3doN1YzQUMxaFpjd0MxSTJIblRtV2JlZE1xVVZ2K0VsUFo5L3ZlaXJ3UUFIQ3V5QW1JUWFvWWpoRWh2cUdKT0t3bHFsaVpmS1g2Ym5ucSs2SXZlS2Ivb2kxNnM1YW12aDJOSkt0QTBUY013V0FDNXJ0dTJyUVVRaytkNWVsdGtmK2VEZVo0dmhxc2NCVUhRTkUyV1pYY2RhWVUvdE1wUkZBVzgxWFhkWDJTU0pLZU90bTJEaitTRWNNVEZmT0dpdnUvSGNSUkxCb0xpT0Q0QUlSNTlzWitJQi9pK3oyZnpQQmRCZFYyclFPaHJXUlo4VE5NMERFUFlLWXFpWTVEa0M3V3VhMW1XZTFCVlZRZ2lyK3Qzcnh1MDNXL1BOdXNoY21PemNwQThCUmdBWnZVL3VQYTZaZmtBQUFBQVNVVk9SSzVDWUlJPScsCiAgICAgICAgICAgIHNlYXJjaDonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FNQUFBRFhxYzNLQUFBQXFGQk1WRVVBQUFELy8vOEtDZ3EvdjcvTXpNd0ZCUVhqNCtPVGs1UDkvZjJtcHFha3BLU1ZsWldNakl5SmlZa3VMaTRxS2lva0pDUVpHUm41K2ZueTh2TGQzZDNjM056UzB0TE96czdEdzhPN3U3dTN0N2QxZFhWdWJtNE9EZzcxOWZYbjUrZmEydHJXMXRiUTBOREp5Y25HeHNheXNyS2JtNXVQajQ5NmVucDVlWGs5UFQwM056Y2pJeU1XRmhZUkVSSDI5dmJxNnVxc3JLeWVucDZPam81a1pHUkNRa0l6TXpNbUppYit3WVV4QUFBQS9VbEVRVlFvejUzUjUyN0NVQXlHWWI5SnlDSWtiTWhpNzlYZDN2K2QxWnltQXFFaVZYeC9qdTNuajNVczNJa2dmK1lmME16VFh0ZmVKRGRnTlRxWVBIbW5hMmd0Z0g0UURNNVA4d0t0R1F3L2FscnRiT2dkZnFHbW5YY2VpOVlST0ZZRkc2anJxRWpUWEVkdjBQaUJ3d2k3SnRZU3dGYkphTWNHSWtheHlEdDBKMURvNGgxV0JycUVJdkpDcjdSbTJGcXVjQTI0dkdxM1pDb3laNmlseDloQW5ZNnVYb0F6aDYwdS8weG9JR21UaVZoRFVDdEZBdnhQQXhLWkJVOE5aN0EraXVSbWVRT1dBNUZVMlVLL3JFQytYTWoyb29rREdDZVhUMHltNEMvcW50MkdTWHo5N2NmUXg4UVBXemVIMnE4ZDF4MTR1NnA5Nk9aMzhnMnl5UTFnSXdrWGxnQUFBQUJKUlU1RXJrSmdnZz09JywKCiAgICAgICAgICAgIHJldHJ5OidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZNekl5TWpoQlFUVXpOamRETVRGRk1rSTNRVGhCTlRBd1FVTXhSREpHUkVNaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk16SXlNamhCUVRZek5qZERNVEZGTWtJM1FUaEJOVEF3UVVNeFJESkdSRU1pUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvek1qSXlPRUZCTXpNMk4wTXhNVVV5UWpkQk9FRTFNREJCUXpGRU1rWkVReUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG96TWpJeU9FRkJORE0yTjBNeE1VVXlRamRCT0VFMU1EQkJRekZFTWtaRVF5SXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QajltVE1zQUFBTENTVVJCVkhqYWRGSkxTRlJoRkQ3M3Y0KzVkKzRkbWdra0VjeEZPT280T1E5MEZnVkoybGhpaEZrNW96V0tHeGVCQkVXRm1BL0d6RlZGdTF4RlJyVnJIYmlKYUdWcUNEVVpFZEtBaTFta1FqV3YrK3I4MTdrWFcvaGZ6djFmNTN6Zk9mOTNtTnJhV2pob01JUUJRc2lpYVpqWERjUDRzLzh1bTgxYU16SGg0SS9uZUpCbE9TVXI4bWVXWTl0cGdIMW5EMkt0YmNQQkVqWW1DTUliU1pSK3U5MXUwK1B4QUZxZG9panZlSUYveURDTXNDOGVPTk0wN1hRRlpKeVMzTks0eStVaUNBSWN4d0hQODN2QUxFdjNOL04vODEzRllqR0JSeGtIQU9zRVVSU2ZTcEkwSXJ0bFFDWXJBTmtjSmdwSTk2RndxTzVLLzJXUGs0SDE0N2dPVEhsRWtSWGdlQTdDa1RBa0J4TGdiL0JEMzRWTFFGaXNGSW1TQTBsSURpYmVZOGlHQTBCUmEycHFac3RxMlhKc2FtcUVxWm5KdDNnM2ZlcEUrN0xpVVV6ZllSL2N1bjBMb3RISWRGc2tsaTZYeTdDMXRWVUJRS2xVWFcybFphaXFDcjE5dmF0dDBWaDNxVlN5MGc0RUF6Q1RudG10cmo3U0gybUpMbW1xQnZhNzJSbXd4VUpSd1BvdEFKL1BkNmRVTElHdTY2QVJEUjQvZWZRSjczcGJta05aZXJaZkFVdkd0ZlZWUUlrQUd3VTBUWU1IYy9NNTZraFpLQ0FHbnd3MkhzL3FtaTRoMlNobU9vcHp3Z0VJQmNONnZiOWVwY0VVWkhOemM5WnFGUVF3ZEFPYTZnTUZlbzROZFZkMGlRdWlKQzZnLzVnRFFObk9kWjlkb3pOOTBFSytjQkZWV1FBR0RsVnFGVkRTQ1dTK2h6MUM1WWF4RzJQNS93RGlYZkhKTS9GT1IyK1VkQlNiYVJmWFB3V1hVRUxXKzlnYkxPMk5udk05ME5GNU91MDhJazJ6dVNHNHRMcStzbGhWVlRYMDZ1VnJ3Q0RBM3FkbEhLVlowVUJxVjY4TlFtbzQ5UXo5UCtSeXViME85dnE4UUJnQzMzNXNDTGlmeW56SmpDOCtmMEZXUHE0QTFadG0xTnJXQ2tQREtTUFFISmhIbjdUL1dFTjUrOWQyQmNEcjNWdFVtTDUrejhSd080RVdSNVBRQ21oTGFIUDRvTXUyUWpzN08xYmNQd0VHQUVyS0Vja3BCNUtpQUFBQUFFbEZUa1N1UW1DQycsCiAgICAgICAgICAgIGxvYWRpbmc6J2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEdBQVlBTE1QQUNnb0tPbnA2Y25KeWFhbXBwbVptVmhZV0dkblozZDNkNGFHaGdFQkFkbloyVU5EUS9iMjlyMjl2Ykd4c2YvLy95SC9DMDVGVkZORFFWQkZNaTR3QXdFQUFBQWgvd3RZVFZBZ1JHRjBZVmhOVUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZRVVU1TVRaR05ETXhRMEU0TVRGRk1rRTFRME5FTVRGR09EVTBNa1V6TnpVaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNlFVVTVNVFpHTkRReFEwRTRNVEZGTWtFMVEwTkVNVEZHT0RVME1rVXpOelVpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwQlJUa3hOa1kwTVRGRFFUZ3hNVVV5UVRWRFEwUXhNVVk0TlRReVJUTTNOU0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBCUlRreE5rWTBNakZEUVRneE1VVXlRVFZEUTBReE1VWTROVFF5UlRNM05TSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QZ0gvL3YzOCsvcjUrUGYyOWZUejh2SHc3Kzd0N092cTZlam41dVhrNCtMaDROL2UzZHpiMnRuWTE5YlYxTlBTMGREUHpzM015OHJKeU1mR3hjVER3c0hBdjc2OXZMdTZ1YmkzdHJXMHM3S3hzSyt1cmF5cnFxbW9wNmFscEtPaW9hQ2ZucDJjbTVxWm1KZVdsWlNUa3BHUWo0Nk5qSXVLaVlpSGhvV0VnNEtCZ0g5K2ZYeDdlbmw0ZDNaMWRITnljWEJ2Ym0xc2EycHBhR2RtWldSalltRmdYMTVkWEZ0YVdWaFhWbFZVVTFKUlVFOU9UVXhMU2tsSVIwWkZSRU5DUVVBL1BqMDhPem81T0RjMk5UUXpNakV3THk0dExDc3FLU2duSmlVa0l5SWhJQjhlSFJ3Ykdoa1lGeFlWRkJNU0VSQVBEZzBNQ3dvSkNBY0dCUVFEQWdFQUFDSDVCQVVGQUE4QUxBQUFBQUFZQUJnQUFBVE1NTWxKcTcxMEdRUUFNZ0JtTFlNU0tNdWlyTVFpU29jWm5PbHFINjhoMDZxdEZKaFBvbUFTRURvRXdRcFlNRlFXTTJmaEVKb0FEa3lCd0RWeE1CZ0JwNmlnVkJBbTBDOEQ4WXF0QkZXRFdsSEZBQm8yTVFMTUdMd2tDRm9DYkFrQUtRdDFJb2FMRWgyT2Y0V09WUVVEQkFOaUw0RU5BamdKSkFPVmlSWUFEb0pBaFphZ3B4Z0dnZzExQnFBdEx3V2JneFFBQkxNYWlRQUdMclVOWEdndUpBNEVWQjRERFE3QW1FOEREdElESFE0TjE4MjAwZElPMWRmTXEzWUkwZFNrRFFNY2tJMU5IYitpNnZBUkFDSDVCQVVGQUE4QUxBQUFBQUFCQUFFQUFBUUM4RVVBSWZrRUJRVUFEd0FzQVFBQkFCWUFGZ0FBQkpid3lTa1BvWXRxNmdJTEV6aHNtc2Q4WVFDUzRZbEs2cm9WbWVFcFkwZ2RFMEFRTlFSTG9sQk1Eb01CY0VpVWpIekpRWUZKVVN3VzBRdFZRQ2tvQndicWcxQTBQZ0JvOFNTajNtUnFqamhQTFZBSTQ0NGNzMUVPRC9CaFF3ZGxYQThIY1hwRGRRcGFEMGxNY3c4Q2hSSlRFZzROaVE0Q0RaWXNtQTBORGhJTms1eWVHNkFORTZXVHEwTVptS01QcGE5dGN3ZW9GQkVBSWZrRUJRVUFEd0FzQUFBQUFBRUFBUUFBQkFMd1JRQWgrUVFGQlFBUEFDd0JBQUVBRlFBVkFBQUVndkRKK2NBeWtoektKempFUUFCUHdBUk9OeFhoSUpJbWM2clAwcjZsZkdLcUxmSUR4ZTdCazdna2kwSUhnU2xLSEk0QmpSTUlHS0dwcWFScWZXQzFGSzRCdXdHYnorZ09xZkZnbXdrS2hhUkJQd3M0ZFBkWjNtNWt0WHdVV1VvcWhIRWRCUTBDRGdnWkRZR0ZpZ0lDYmdKeENuY3FCcEtVRXBaeEFrNGRpcFdZSFJFQUlma0VCUVVBRHdBc0FBQUFBQUVBQVFBQUJBTHdSUUFoK1FRRkJRQVBBQ3dCQUFFQUZnQVdBQUFFbi9ESktjczBDOUE5RnhyTzhBREVRQnpjQmpyaFdBNm1sVDVyUzhMbXdoa3krS0FQUTRtZ2V5QTZMRm1xVUF3RVpJaEd3NkZNR1FJTUJrWGFNTXdraUt6MlVlQ0t2aEtGR05VQW95VURCcGJ3cmt1SzlvWHVJR2dJam5ZVEJRS0VEblpPQVJKK2hFQXpDSWdQT2dpRURWVXpUbWNQVWpLTkU0QXpNZ0lLYlJNQ0R3b1NCcDJsQ3EybUM2aHBhS0t1a2JGMkJLSUNlckZFZFFzR2dKOGNFUUFoK1FRRkJRQVBBQ3dBQUFBQUFRQUJBQUFFQXZCRkFDSDVCQVVGQUE4QUxBRUFBUUFXQUJZQUFBU1U4TWs1enl3MGE5ZWNITTZBQUJyRk5kM25yRU1wRldmNmdLejdlcTEwZ1BtQ1RhaUp3YllnRUVnU2dhQmhreFFIQTh1am9SUTBId1VvbEZUMVhBbmFnb1Y2bFJnRzRHRTVBMmhUa0d1S1F2RWdsQWVNQU1NK1Z6Q3ZDZ3lDVW4xbGdua1RjMVpOQm5vTVhnOUtWME9OQVJScUR3b0JBbllTbWcrWUpYUUJBWFFTcEphaEdaK2xFNmltVFhRS1NLMXJjR1l1RVFBaCtRUUZCUUFQQUN3QUFBQUFBUUFCQUFBRUF2QkZBQ0g1QkFVRkFBOEFMQUVBQVFBV0FCWUFBQVNWOE1sSjVhbVlraWFhZEkzekxKbGtjRUwzTmF4WVBxajZnTzByY1E1Q2hVV1dTajJNWVRJWWtCNEVoVUpna3d3Y09ZbEFxYmpZb0s0SDFkT2NRYVZNUXZmZ2VFcEl4MjVsd1ZZL0FQQ0hUcXMyREFpRDRZVFp4QmRKZkhJMkJVVjNBRWdTQ2swTGZsWWtpaEp6R1l3RWh4VjZGQU1QREFGblFSUkRuV2NQQVF5bW9obFdvaVNscGc5V0pacWRyQXdQbWwxcFRSRUFJZmtFQlFVQUR3QXNBQUFBQUFFQUFRQUFCQUx3UlFBaCtRUUZCUUFQQUN3QkFBRUFGZ0FXQUFBRWkvREpLUTJpT0ZPaGhHeENvMkdjMG4xQzJoampVNTRQcUJiWk1YR2loRGpoeEU2bWxvVDJjRGdBR0lWUTRtamtIc3BseGRsd1BINVN5WUFxTVVXelZwc0VtUzJieXdmSHdHb0l1TDlDbzRPbWNBZWs4c0hFblYxYmdWZUJHUVVMV25vVVB3RU1Db2NHQkFNRWhTMktEQXgzQUk4RGtKSWFsSllQbUpxYmNZcVhqd1FHWkVzSEJFT2NHQkVBSWZrRUJRVUFEd0FzQUFBQUFBRUFBUUFBQkFMd1JRQWgrUVFGQlFBUEFDd0JBQUVBRmdBV0FBQUVrL0RKU1NVeU5jK2hubHFQb0FpRU5oMmRsSXJLYUtyVEY3YXVobmxoS1RWMVlVdUhUUEJSYURSQWowRWc4Sm9VQlFMS2t0a01RUnVTYWJUcWdFWVIxS3BGME5oS2tPSzBtaEZnRE5TT1I1QkJUdytNV0FtZFVUWGdOM1FCTnk4T1JnaFNaejRWZ3c1eEoyY0VBd1EzQndNT2J5OExrUU9TQUVtTmx5OEZtNXllbG8wRGlob0FCNUVFcHBkRFZRQUxONE1aRVFBaCtRUUZCUUFQQUN3QUFBQUFBUUFCQUFBRUF2QkZBRHM9JywKICAgICAgICAgICAgbG9hZGluZ0NhbmNsZTonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUF5SnBWRmgwV0UxTU9tTnZiUzVoWkc5aVpTNTRiWEFBQUFBQUFEdy9lSEJoWTJ0bGRDQmlaV2RwYmowaTc3dS9JaUJwWkQwaVZ6Vk5NRTF3UTJWb2FVaDZjbVZUZWs1VVkzcHJZemxrSWo4K0lEeDRPbmh0Y0cxbGRHRWdlRzFzYm5NNmVEMGlZV1J2WW1VNmJuTTZiV1YwWVM4aUlIZzZlRzF3ZEdzOUlrRmtiMkpsSUZoTlVDQkRiM0psSURVdU15MWpNREV4SURZMkxqRTBOVFkyTVN3Z01qQXhNaTh3TWk4d05pMHhORG8xTmpveU55QWdJQ0FnSUNBZ0lqNGdQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRnUEhKa1pqcEVaWE5qY21sd2RHbHZiaUJ5WkdZNllXSnZkWFE5SWlJZ2VHMXNibk02ZUcxd1BTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZJaUI0Yld4dWN6cDRiWEJOVFQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wyMXRMeUlnZUcxc2JuTTZjM1JTWldZOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXpWSGx3WlM5U1pYTnZkWEpqWlZKbFppTWlJSGh0Y0RwRGNtVmhkRzl5Vkc5dmJEMGlRV1J2WW1VZ1VHaHZkRzl6YUc5d0lFTlROaUFvVjJsdVpHOTNjeWtpSUhodGNFMU5Pa2x1YzNSaGJtTmxTVVE5SW5odGNDNXBhV1E2TXpCRk1qWXpSVFV4UTBJd01URkZNa0U1UmtSRE1ERkdOVVkzTlRBMk9UWWlJSGh0Y0UxTk9rUnZZM1Z0Wlc1MFNVUTlJbmh0Y0M1a2FXUTZNekJGTWpZelJUWXhRMEl3TVRGRk1rRTVSa1JETURGR05VWTNOVEEyT1RZaVBpQThlRzF3VFUwNlJHVnlhWFpsWkVaeWIyMGdjM1JTWldZNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEb3pNRVV5TmpORk16RkRRakF4TVVVeVFUbEdSRU13TVVZMVJqYzFNRFk1TmlJZ2MzUlNaV1k2Wkc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvek1FVXlOak5GTkRGRFFqQXhNVVV5UVRsR1JFTXdNVVkxUmpjMU1EWTVOaUl2UGlBOEwzSmtaanBFWlhOamNtbHdkR2x2Ymo0Z1BDOXlaR1k2VWtSR1BpQThMM2c2ZUcxd2JXVjBZVDRnUEQ5NGNHRmphMlYwSUdWdVpEMGljaUkvUG1JMlhmc0FBQURxU1VSQlZIamE3RlRMRFlNd0RJMXB1d1FyNU1DSktaQ3lCM2NrbHNnOUd6QUFFakFFZXpCRmhSdEhJU3IvVDlWRDFWZ3lKUDY4WnpzQlFFVDJUUUZQOE1jRWFab0dKN0Y2cGRUTWVOOUthTnYyblIzaU9EWUxiYWVYODJrN25PNmc2N29SaUJDQzZWZ0RCQUJZbHVVSWh4NWhHTTV3OXNiZ0tyT0FSTGdJZnJXRFFYQ3ZnTFVPVmdtaUtHSjJIRWFycWhvRkprbGljb2Q4emprcml1TDBpTFk2T0hTL2p4Q2dybjVtdERiOGxBRHJ1bmFiUE04ZnBNUGUrdkFTQWMyMGFacnBnVDZ0dXNPbEdJcGRrNjBQTGNpeTdFWUxLV1cvZElPMFA1Z1UydnUvcVNmNFFZS1hBQU1BSjVxQkUrNVBQYVVBQUFBQVNVVk9SSzVDWUlJPScsCgogICAgICAgICAgICBoYW5kOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQUlBQUFCdkZhcXZBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZRakkzT0VKRVFrWXhRMFUzTVRGRk1qZzVORFpGTnpKQk1UYzVSVEJCTXpNaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNlFqSTNPRUpFUXpBeFEwVTNNVEZGTWpnNU5EWkZOekpCTVRjNVJUQkJNek1pUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwQ01qYzRRa1JDUkRGRFJUY3hNVVV5T0RrME5rVTNNa0V4TnpsRk1FRXpNeUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBDTWpjNFFrUkNSVEZEUlRjeE1VVXlPRGswTmtVM01rRXhOemxGTUVFek15SXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QakVMNUtRQUFBSEJTVVJCVkhqYTVGUk55d0ZoRkdWbWtNOUVFYVdRRWlrMUZxd3MvQVdKbjJEbC84aGFLVHNXL0FObGphUXNsTEx3a2E5OE5qTk9wdlRrZmVhZFVYbzM3MWs4M2JuZE9YUHV1ZmNaZlQ2ZjEzMERqTzVMK0VPaTBXZzBHQXhVeXpocWRqNmZYNi9YWURESXNteXRWbHNzRm8xRzQzdyt6Mll6aDhQaDkvdTFLc3BrTXNWaVVSUkYrZEhuOCtHMFdDelZhclZRS0h5Z3FGUXFDWUl3SG8rUHgrTXJHWTFHY1RxZHpnODgybXcyT01QaE1PaGVTYnZkVHZZK25VN1ZpV0NLSkVteFdPeDBPa2xQck5kcnRDYkh0OXN0blU2WHkyVjFvdDF1QjRPOFhxL2I3UmFmUUVmSlpCTEIvWDQvSEE1WVk3UFpUTDdDeHVOeE9kcHV0NWcwSk5oc05xUFJHSWxFOFBGVUtpV3JnQVE1UU5jZWp5Y1FDR0NzcUtjUThUeGZxVlNzVm11LzMwZDFOcHVWYUhDNVhHQXhtVXl0Vmd0ZnBVeHR1Vnh5SElmQkp4S0plcjIrMys5aGl0TDZZYUZRVDI4TjlBekRoRUloR0FGMWw4dkZZREJRUldGTHU5MHVLZWQ5ajNxOUhrd0ZGNHJnSlRsN0VoQzdXcTFVOXFqVDZVQXpMQkNWSVcrWitrSTJtMDFNRUlHZ0FLMUVRTHZkRnBUeFp2TnZSUEJvT0J4Uys4SVFjRCswWGxwZ01wbmtjcm1mZWZJYWs5RC81MysyUmp3RUdBQWxrSGhXSGV2OS9RQUFBQUJKUlU1RXJrSmdnZz09JywKICAgICAgICAgICAgcm90YXRlOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQUlBQUFCdkZhcXZBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZSak0yTTBVeVJUY3hRMFUzTVRGRk1qZ3hSRE5FUWtNNE4wUTNOVGcyUWtNaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNlJqTTJNMFV5UlRneFEwVTNNVEZGTWpneFJETkVRa000TjBRM05UZzJRa01pUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwR016WXpSVEpGTlRGRFJUY3hNVVV5T0RGRU0wUkNRemczUkRjMU9EWkNReUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBHTXpZelJUSkZOakZEUlRjeE1VVXlPREZFTTBSQ1F6ZzNSRGMxT0RaQ1F5SXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QbFg3NzlnQUFBSlhTVVJCVkhqYTNKUTVhNnBSRUlienFiaWdvcUJlTnlJMnBnaEVBblppSlpaMi9nTUxRWkJnb1lVRVhJSmdZeUQrZ1loWXhjSkd0REtRSDZDSUltS2h1SUFHRkhIZmw5eVh5UFY2RFpvVUtTNlpZamhIenp4bjVwMDVIMkV3R002K3cwaG4zMlQvSDRoeTdJL1JhTlRwZENhVENZVkNXYTFXNi9YNjE3dlZhalY0Qm9QeE9RZ3gxV3BWb1ZDWXpXYTVYRDZmejJrMEduNThmSHhNSnBNbWsrbjUrUmxiTXBtOEgwVWNkQTBuNnZYNjdlMnRRQ0NJeCtPbFVxbFFLRnhlWGw1ZlgrdDBPdVFva1VpQXR0dnRmRDUvbjNXbzBYQTQ5SHE5cjYrdmdVQUFGS1NHTFh3Nm5RYWR5K1dpV0Z4MmMzT0QrMDVscE5mclo3TVpTc0FhOFI2UGgwcWxMaFlMdjk5L2QzZkg0WEIySi92OVBpNDdDdHBaTHBmVGFyVmlzVmlsVWtFanNGd3VGeVQ3YXZzem1VeXIxY0xDYXJVdWw4dHNObnQvZjQ4dDhrSjJ5UEdySUlmRGdSZ3NOQm9OMnV4MnU1VktaVDZmaDNhUTF1bDBIbU1kZ2xnc2xzVmkyU2ExTlFqODlQUVVpVVF3VFNRU0NaSlhLcFhQUWVnRmhDQUlZclBaTkp0TmVPVGk4L2w0UE43NjNjQkMxaDlacEgxMUdvMEdXbzZiVVFLODBXaUVQejgvWjdQWjBHdjl4OEI2ZUhnNENyTFpiRXdtOCtYbEJZOEFCU0tBVHFmRHE5VnFlSXpmRGlRVUNrT2gwTkVuZ212UmwwUWkwVzYzUlNMUndibHV0d3NFRmxLcE5CZ005bnE5Z3dOa2pQOTJoWGJJWkxLcnF5czhqczIvVml3VzM5N2VvRG9veUFXamVFcHNESFEwR3NVTFdIMHc1SWhST0VFNTdCcFlzVmpzSXdqdHU3aTRDSWZEZzhIZzJFRCtMVzFyNC9FWWc0ZG03K3BLcFZMbGNoa2pQcDFPVDN6WWlKLzc4Zjh0d0FCRlQ1RzVZZithNVFBQUFBQkpSVTVFcmtKZ2dnPT0nLAogICAgICAgICAgICB6b29tOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQUlBQUFCdkZhcXZBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZNekkyTkRGRU56RXhRME5CTVRGRk1qaERPVU5HUTBORE9UWXpPREk0UkVVaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk16STJOREZFTnpJeFEwTkJNVEZGTWpoRE9VTkdRME5ET1RZek9ESTRSRVVpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvek1qWTBNVVEyUmpGRFEwRXhNVVV5T0VNNVEwWkRRME01TmpNNE1qaEVSU0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG96TWpZME1VUTNNREZEUTBFeE1VVXlPRU01UTBaRFEwTTVOak00TWpoRVJTSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QalVYdHNVQUFBSFRTVVJCVkhqYXpKVEhha0pSRUlaemM2M1lTMnhZc0t4MDVjWVhFSHdCZlFiM1BwZ2J3UmR3NjBvWHRvV29XQkFMOWk3bVF5R0VSTU5OV2VSZlhBNHpuTy9NL0dmdUVaTEo1Tk5mNlBucGovVC9RTEs3MGNQaE1CZ01sc3NsQzRWQ29kUHBuRTRuaSsrQlZxc1ZpRlFxRlFnRWpFYmpiRFpyTnB1NVhBNmNWcXQ5QkJMRDRmQ0hXdVJ5ZVNhVDRmeE9wMU92MTdmYnJkdnRUaVFTcFZMcGREcUpvaWpKby8xK24wNm5RVFFhamN2bFFrWG44N2xhcmJaYUxlSmtwWm9kajhmcHBkL3YwNFVnQ0ZENDZ2WDZYcTgzblU3SlNnWDUvWDRvYXJXYXd5Rk9KcFA1Zkw3YjdUUWFEWEd5VXMybUY3eWdLVGFmcnlLSVRTcVZpdEtpMGFqVWlxakNaREpoNm9mNDhYZ2tUbFlxYURRYWNVY2MvbnlWZU5WdDdmVjZ5K1V5bFVvQ0ZZdEZzOW5NQk1FUzN5a1lETnBzTnBmTDFlMTI3N0x1ek5Gd09JekZZbGFyRllQb2tVVWtFZ21GUXV2MSt1V3FRcUhBbmNwa3NxOUFhTEZZTUVSczhIZzhaTm5EM2RHYXdXRGdHSWZEWWJmYlA3TUU2ZThSUHczMHpXYkRHck95MmF6UDUzc2I5RHNWUFZLbFV1RWUrT1B3aUg2eGtnano5VzBRcXRWcXNHanF4cnJONmcvZkk1NkI4WGhzc1ZnWTNiZHlIcjVIWHl1ZnorT09VcW5rQi93VkNMWGI3WC8vWnI4S01BRFNCdTZzQVppek93QUFBQUJKUlU1RXJrSmdnZz09JywKICAgICAgICAgICAgZmxpcFZlcnRpY2FsOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQUlBQUFCdkZhcXZBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZNemM1UmtNM056WXhRMFkwTVRGRk1rRkdRems0TnpGRE16YzRNVFZCTVRJaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk16YzVSa00zTnpjeFEwWTBNVEZGTWtGR1F6azROekZETXpjNE1UVkJNVElpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvek56bEdRemMzTkRGRFJqUXhNVVV5UVVaRE9UZzNNVU16TnpneE5VRXhNaUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG96TnpsR1F6YzNOVEZEUmpReE1VVXlRVVpET1RnM01VTXpOemd4TlVFeE1pSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9Qb1dHZy9NQUFBRkNTVVJCVkhqYTNKVE5ib013RE1mdGFWeUtWbHJZQ1U2OEFlL0NpL01RRTFKUkN1b2sxZ05DbnVNRXhnUUVKbkdhVWFJQThTOS9md0RtZVE1SDJBc2NaSWVCWHFjM1hkZTFiY3Z6cHB2bmViN3Y4N3dNU3BJa2p1T2RFc3F5cktwcUdjU1VvaWdRa1BRZ1F1UVprTjhna0t6MEpVdUFMTXRXUVd4QkVPeVJRKzRjc1lYWFVDVG92WVI2SUdvM2xIc1lGUkp0Z0tMM1NQYm9vU01EOFRQQm9EeEdPWWVvNzNzbktBckZHYTJ6NEF4SnBPRW83WGFyWEtBcmh6YWM3VEtFRGREYitRdy85VEd4MkFGRGVzQUc3TXlSZnpxdFZBbi8wTmxzWDg4bjZCekloTk5pR3lHbXMrWkZtNEUrSDQ5NU9yWVN0Z1NxNjhZMHI5UUt4OHNDTGRIMGxoTjByNVhlUnhZQ1EzYnBsN2dGa1RPUXVvTnRPclFsSTNIVGVabDhiUUNYNE9JQ05VMno4K3QzZ1pSU2FacnVCUEhtVmRDSDJILzVaeDhHK2haZ0FKY2FtcUIzRzBON0FBQUFBRWxGVGtTdVFtQ0MnLAogICAgICAgICAgICBmbGlwSG9yaXpvbnRhbDonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FJQUFBQnZGYXF2QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUF5SnBWRmgwV0UxTU9tTnZiUzVoWkc5aVpTNTRiWEFBQUFBQUFEdy9lSEJoWTJ0bGRDQmlaV2RwYmowaTc3dS9JaUJwWkQwaVZ6Vk5NRTF3UTJWb2FVaDZjbVZUZWs1VVkzcHJZemxrSWo4K0lEeDRPbmh0Y0cxbGRHRWdlRzFzYm5NNmVEMGlZV1J2WW1VNmJuTTZiV1YwWVM4aUlIZzZlRzF3ZEdzOUlrRmtiMkpsSUZoTlVDQkRiM0psSURVdU15MWpNREV4SURZMkxqRTBOVFkyTVN3Z01qQXhNaTh3TWk4d05pMHhORG8xTmpveU55QWdJQ0FnSUNBZ0lqNGdQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRnUEhKa1pqcEVaWE5qY21sd2RHbHZiaUJ5WkdZNllXSnZkWFE5SWlJZ2VHMXNibk02ZUcxd1BTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZJaUI0Yld4dWN6cDRiWEJOVFQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wyMXRMeUlnZUcxc2JuTTZjM1JTWldZOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXpWSGx3WlM5U1pYTnZkWEpqWlZKbFppTWlJSGh0Y0RwRGNtVmhkRzl5Vkc5dmJEMGlRV1J2WW1VZ1VHaHZkRzl6YUc5d0lFTlROaUFvVjJsdVpHOTNjeWtpSUhodGNFMU5Pa2x1YzNSaGJtTmxTVVE5SW5odGNDNXBhV1E2TlVWQlJEUkRPVGt4UTBZME1URkZNa0kwT1VVNU5UaEVRekk0TlRGR05ETWlJSGh0Y0UxTk9rUnZZM1Z0Wlc1MFNVUTlJbmh0Y0M1a2FXUTZOVVZCUkRSRE9VRXhRMFkwTVRGRk1rSTBPVVU1TlRoRVF6STROVEZHTkRNaVBpQThlRzF3VFUwNlJHVnlhWFpsWkVaeWIyMGdjM1JTWldZNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEbzFSVUZFTkVNNU56RkRSalF4TVVVeVFqUTVSVGsxT0VSRE1qZzFNVVkwTXlJZ2MzUlNaV1k2Wkc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvMVJVRkVORU01T0RGRFJqUXhNVVV5UWpRNVJUazFPRVJETWpnMU1VWTBNeUl2UGlBOEwzSmtaanBFWlhOamNtbHdkR2x2Ymo0Z1BDOXlaR1k2VWtSR1BpQThMM2c2ZUcxd2JXVjBZVDRnUEQ5NGNHRmphMlYwSUdWdVpEMGljaUkvUG5sOTJzd0FBQUZLU1VSQlZIamEzSlRKam9Nd0RJYnhxQnc2U0tWQVQzRGlEWGdYM2w5Y1JraEZMS0lqZWtISWs5Z0pvWFFoQjA3aklMUEZYMzdiQWNqejNObkR2cHlkYkRmUVlYa3pqdU13RE1KdmhybXU2M21lOEs5QlNaTEVjV3dwb1N6THFxcGVnd1NsS0lvZ0NLSkxGSVdYTUF4T3Z2OTlQQTczKysvdDFuVnQwN1JOM2JSZDIvZDlsbVZMMExzYWdSaGtTQTc1U3A3aDRmVW5FSWhaS2toUHB6aHlxUEJnMVRWQU1jQkVNSm5SakFKRUN4QktrbG9VbG8rRldMa0c4UzFTVThzRFBqRG1NMnUwVXdTY25KRkRVQ0VIcUlJcnBSOXFoSElBZVoyVGZqNHJzVXB0bFpXNlJXU2syUkFiSUZ3MkhvMm54RlNOMEU0UnpVZTlxVXhpWVBUWjFBZ2NrNXJxRGhkYm9vQzFnR05aYk43SldwRk9FRmJwYjlWSUJabk5yTEN5ajZLWlQ0em5yNyt1NnpSTnhjVTBUZGVxdWk0Kzd0bjg4MWtjUFBrdDZJZnN2L3l6ZHdQOUNUQUF6RGVkV3pzczRTZ0FBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgY2xvc2U6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQzRBQUFBUkNBSUFBQUF0OXdrWUFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBeUpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJXeHVjenA0YlhCTlRUMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMMjF0THlJZ2VHMXNibk02YzNSU1pXWTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpWSmxaaU1pSUhodGNEcERjbVZoZEc5eVZHOXZiRDBpUVdSdlltVWdVR2h2ZEc5emFHOXdJRU5UTmlBb1YybHVaRzkzY3lraUlIaHRjRTFOT2tsdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNlEwSTNOekExUkRBeFEwWTNNVEZGTWtKR01UVTRNVGM0T0VRMk4wTXpRamtpSUhodGNFMU5Pa1J2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2UTBJM056QTFSREV4UTBZM01URkZNa0pHTVRVNE1UYzRPRVEyTjBNelFqa2lQaUE4ZUcxd1RVMDZSR1Z5YVhabFpFWnliMjBnYzNSU1pXWTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRHBEUWpjM01EVkRSVEZEUmpjeE1VVXlRa1l4TlRneE56ZzRSRFkzUXpOQ09TSWdjM1JTWldZNlpHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEcERRamMzTURWRFJqRkRSamN4TVVVeVFrWXhOVGd4TnpnNFJEWTNRek5DT1NJdlBpQThMM0prWmpwRVpYTmpjbWx3ZEdsdmJqNGdQQzl5WkdZNlVrUkdQaUE4TDNnNmVHMXdiV1YwWVQ0Z1BEOTRjR0ZqYTJWMElHVnVaRDBpY2lJL1BtVVcxb3dBQUFEcVNVUkJWSGphNUZXeENvUXdETDJXK3g0WC9RbUh1anZYelYwWGFkSE4zMUhVbjJnUi9LRDJBZ1dSQXl0RVRwVExFRjVlU2ZxYWFFdnlQSC9kdzk3VzJydElNY1k4dXl0S0tRZWlLUEtUUDVmU2RaMERTWktFWVFoQWE3MlNkVjBqYXBJc3kzRDlYUGRqaklIdis5NkZVa3BQRnFWMFZ3cm5IRDNkcG1tK0dDSEV3ZEVKMlZWcFRsaFZWZHRhRUI2bTJIMmo5b1ROODd5VkF1Rmhpa2Nsdml1dzhUQU1XeWtRQW9udUN2SmVXWlpsbWlhSHk3SUUzN1l0K0hFYzR6Z09nZ0JSRXptZ1ZVZFJGSTRCNEJoWXdnMklwR2w2NVpYcStabXZmb004MzhNZlA0ZlBHTkJIZ0FFQWk3Z3l1dkh1aFpjQUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICBzZWFyY2hCdG46J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQzRBQUFBUkJBTUFBQUJRdTROOEFBQUFHRkJNVkVWbloyZFlXRmhmWDE5cWFtcFVWRlRsNWVWalkyTmJXMXVhMEQ5d0FBQUFhVWxFUVZRWTAzV0t3UTJBSUJBRS9WaUFEeHNnc1FKYnNBQTBHYWdBT3lDMjd6ME8xd2ZNSlp2czdFMTduNkVYTTFIbHIra09SSnRVYjZkZ1FXcFZQaFZTa1E4T1llT3lkT1Q5bk9ILzQ5UmN5VFczS284RjhrdURjMW41bXZ3S05zbHJNQzEvOUJuNUZ4cXBVVGhZUUxFdUFBQUFBRWxGVGtTdVFtQ0MnLAogICAgICAgICAgICByb3RhdGVJbmRpY2F0b3JCRzonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFMb0FBQUM1Q0FZQUFBQ2ZtaVZmQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUEyWnBWRmgwV0UxTU9tTnZiUzVoWkc5aVpTNTRiWEFBQUFBQUFEdy9lSEJoWTJ0bGRDQmlaV2RwYmowaTc3dS9JaUJwWkQwaVZ6Vk5NRTF3UTJWb2FVaDZjbVZUZWs1VVkzcHJZemxrSWo4K0lEeDRPbmh0Y0cxbGRHRWdlRzFzYm5NNmVEMGlZV1J2WW1VNmJuTTZiV1YwWVM4aUlIZzZlRzF3ZEdzOUlrRmtiMkpsSUZoTlVDQkRiM0psSURVdU15MWpNREV4SURZMkxqRTBOVFkyTVN3Z01qQXhNaTh3TWk4d05pMHhORG8xTmpveU55QWdJQ0FnSUNBZ0lqNGdQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRnUEhKa1pqcEVaWE5qY21sd2RHbHZiaUJ5WkdZNllXSnZkWFE5SWlJZ2VHMXNibk02ZUcxd1RVMDlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl0YlM4aUlIaHRiRzV6T25OMFVtVm1QU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2YzFSNWNHVXZVbVZ6YjNWeVkyVlNaV1lqSWlCNGJXeHVjenA0YlhBOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOGlJSGh0Y0UxTk9rOXlhV2RwYm1Gc1JHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEb3dORFF6UkRsQ05qRTRNalJGTWpFeFFUbEROamhDUVRsQk9UWXlOVVZHTXlJZ2VHMXdUVTA2Ukc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRwR1JERXpPRUV6UVRJME1qQXhNVVV5T1RSR1JFRTJOamt5UWpkQlJFUTVPQ0lnZUcxd1RVMDZTVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRHBHUkRFek9FRXpPVEkwTWpBeE1VVXlPVFJHUkVFMk5qa3lRamRCUkVRNU9DSWdlRzF3T2tOeVpXRjBiM0pVYjI5c1BTSkJaRzlpWlNCUWFHOTBiM05vYjNBZ1ExTTJJQ2hYYVc1a2IzZHpLU0krSUR4NGJYQk5UVHBFWlhKcGRtVmtSbkp2YlNCemRGSmxaanBwYm5OMFlXNWpaVWxFUFNKNGJYQXVhV2xrT2pNd09USTFPVE5CTVVVeU5FVXlNVEZCT1VNMk9FSkJPVUU1TmpJMVJVWXpJaUJ6ZEZKbFpqcGtiMk4xYldWdWRFbEVQU0o0YlhBdVpHbGtPakEwTkRORU9VSTJNVGd5TkVVeU1URkJPVU0yT0VKQk9VRTVOakkxUlVZeklpOCtJRHd2Y21SbU9rUmxjMk55YVhCMGFXOXVQaUE4TDNKa1pqcFNSRVkrSUR3dmVEcDRiWEJ0WlhSaFBpQThQM2h3WVdOclpYUWdaVzVrUFNKeUlqOCtRM25pN2dBQUdhaEpSRUZVZU5yc1hRdFlWT1c2WGpNREF3Z0lDcWd3WEF4SmFLdVpsOUJNODFIM1U5cFJpKzVhWkZtNU82ZmM1VG02UFdVWGQxbTdqcFcxczU1cUcycmI3YmFkbW5ZNWFSZVBsOG9iaWFLaUtJeHlGd1FSR0JoZ2h1RjhIL092V296RE1QZFpsKzk5bnUrQk5jekFZcTEzZmV2OTN2LzcveFcwYXRVcWp1QVhSRUtvSUJvWExWb1VoQy9Bc1RmVFlmRU1jQ3lkZXArYURwWGZrQUNSekw0UGhlaERoOFIvSUtMN2wraEo3UHNRUm5hQ254QkVoOEJ2MEFteWVCZ2xHU0s2bkRONnBFQzYwTEVub3N1VzZORUM2UkpNaDRTSUxsZWl4d295ZWdnZEVpcEc1YXJSKzdMb2tpNjh6VWdnb3NzRk1Yd0dOeGdNcWZCRncxNG5pNUdJTHJ0czNnV1R5WlFxZUowc1JpSzY3UFM1dFNnS0Nrb1J2QjVHaDRhSUxrdWlxOVhxSkNJNkVWMzIwZ1V5ZWdKSkZ5SzY3RE42Y0hCd3ZPQjFLa2FKNlBMTTZDQmR3cE9Ta25pQ2s4VklSSmNOMEVvY0tId2hQVDA5bHJJNkVWMXVHTWo5NXB0M0lUNCtQbzUwT2hGZHR2cWNSNzkrL1lRWm5ad1hJcnE4OURtUHlNaElJam9SWGY0WlBTd3NqS1FMRVYzK0dUMDBOSlNLVVNLNi9ETzZScVBwUXhZakVWMXVpTGYzSWxtTVJIUTVBVnR6NCt5eW55eEdJcnFjWlFzUHNoaUo2TEtYTFFpeUdJbm9ja0ppVHo4Z2k1R0lyb2lNVGhZakVWMU8wUFgwQTdJWWllaUtJRHFDTEVZaXV1eWxTOWNQeVdJa29zc0F1UHhjWDBkdklJdVJpQzRISlBSNkpaREZTRVJYQXRGdExFWWlPaEZka2tqczdRMDJGaU1SbllndXYwSVVRUllqRVYwUjBnVkJGaU1SWGVyUU9aWDJ5V0lrb2lzaG81UEZTRVNYTXBDOFRpMzBUeFlqRVYzMjJieUwyV1F4RXRHVlFIU3lHSW5vaWlBNldZeEVkQ2xENThxYnlXSWtvc3Mrb3lQSVlpU2k5NFFwSE9zTWhGdDlqQWh2OXk1bGRBbFlqRkVRTjdIakhRelJuNGp1SCtSQnZBOHhBYUlSNGxvUkhmd3Jsb251RFNLM0dKSGdmOFZqamtrRnZnNW54NXlJN2dkY2h2Z2J4RHVyVnExYVBITGt5R284QVhBaXJvWUk5UDkweFRMUnZVR2tGbU1FeEhLSU4xcGJXMWZEY2NYZW5kOUI2T0dZbTRuby9zTWVpSzhoN256b29ZZmV1L2ZlZTNHaUE1Nk1NWEJTK2twRm4zZUpjdkZaak9NZ1BvV1kyZExTc3VtWlo1NVJ3ZmVESU1xQTVBMmswZjJQdHlCcUlCTEhqeC8vNHVMRmk2ZUhoNGRqSmhvSlpMOHFRTmxkNStvSFJHUXg0ajQ4QzdFYTcweHRiVzM2RlN0V0hHRUZjaE5FS1JXamdRRnF4WmNoT3ZGLzBlbDBOeTlidG16UnBFbVRNS3ZpWXc2dkE5S0VpejJqSXpJeU11SnNDT2R2akliWUJIRUhoTXBpc2JSdDNyejVVNlBSYUlGdGxDcW5JWnRiaU9pQnczNkl6d1Y2TnlFcksydlJFMDg4TVZXcjFhS2NHUVZrVDRKUWlUV2pJd1lOR2lTVUwvNjBHTEVuNXo4aFBoQmVwQ2RPbk5pV201dDdrVzJpTGpkS21TUnk4ZEhmaHFqa04xUXFWVkJhV3RyTTU1OS8vc2xSbzBaaHByeUtPVFArMEw5dVpmUUFXWXdqSVA0Qk1WZkloZnI2K3Z5MWE5Y2VaSnUxUVBJTFVpZUlYSWplQXZGbkptRitzdzBpSXE1NjRJRUhsanp5eUNQajFXbzFlc0dqbVh2Z1M3ajErLzFzTVdvaEZrSjhEREZZK0FPVHlkU3didDI2ZjdITk5vaXpjaUNJbkVaR2YyRWFzL3MvcUZacmh3OGZmczhMTDd5d1lPalFvZEh3RWxxUWFFVnFmU1FENHR6NW9COHR4blNJdjBQTXMzUCtPL2Z0MjdleHRMUzBoVzBYUWpZM0VkSEZoOVU5T1FOUlVWRVpDeFlzV0RwMzd0enJZQk1IbDhZQzJlTzgvUGNUM1AyZ0h5eEc5UFlmZzFnUE1jVGVHOHJMeS9kOCtlV1hmQVl2QjVKZmxnc3g1RVowdk5VdWg3RHJEcUNOZC8zMTF6KzRiTm15N0tTa0pQVGFyd0d5WjNqUnpuT2I2RDYyR0ljd2d2OEJmN2U5TnhpTnhvb1BQL3p3ZjltbUFlSzhuSWdoeDZhdWZIWnI3aEd4c2JHakZpNWMrS2Vzckt3TTJCekFXUWVadk5GQ29QUGt3ejZ3R05WTW91RHh5T2pwVFJhTHhRU1pmSVBCWUVBYnNZT1R1SldvRktJalBvUW9kdlNHNE9EZ3ZqZmRkTk5qUzVjdXZTc21KZ1p0U0crMEVIaFU2SHJaWWt5R1dNT0tUb2YxU0dGaDRaZjc5Kyt2WnB2bmdPUXRjaU9FWEluZUR2RWlaeDNvY0FRVmtHdkNFc0F0dDl3eW1QTzhoY0Nqak80bGl4SFA2WDBRR3lHdTdlM05seTlmTGxpelpzMlBiTE1PU0Y0cFIwTEl1Ui85TkVTT1UxWkpTRWdNRVAxSklQaE1EMXNJUENLNkZ5eEdyQkZ3NEdleE0zY0VzOW5jdEdIRGhrMGdYZmprY0ZhdVpKRDd4SXNjUnZoZW9WS3AxTW5KeVZOWkN3RVMxcDBXQW8ra2l3Y1dJNDc2NHRBOTJxdWpuZnhNNThHREJ6OHRMaTQyc08wemtNM2JpZWpTaEpsSm1IWVh5SVl0QkUrNzJFS0FCZTFLcnBkbG9udURteFlqL3UxM09Hc3psdE1GYkZWVjFjK2JOMjh1WUp1VlFQSkxjaWFDQ3Y1QlRnR1l4NG95bDJBd0dNNXQzYnAxWTE1ZVhoMXNOckNzWjl2emNTZkVIeUc4MGp6VzF0WldVMXRiZXdvS3hKTTdkKzQ4MGQ3ZVhnc3ZJd2tiNEc5MzJyeDlKc1IvY2RhMTJKMUdhMnRyOWV1dnYvNG02SE5NQk0wUWVWSjFXU0FCRWRGdDdsdzQzRDNDMVErQ2ZtMHZLQ2pZdm5idDJ2M3dQVnB2Mk9CVXhWbEhRWmRCM09xcm5UYVpUSTJRZVhQMzdkdDNNRGMzdDV5enRpUmZnTCtQMmY0NWprMXZjd1dkblowZDI3WnRlM3Z2M3IwVm5IVzhBVW5lTE5VVDZ5elJOZE9uVDFjQzBURVQ0dlM3MjdrZUJrd2NhSGZOZ0FFRGhvMGZQejZsc3JLeXFLNnVMZ0t5N2NETXpNeVg0R2MzK25Lbk5ScE5TRlJVMUZValJveVlPRzdjdUNTUU5wM3dkeWZFeDhjdmg3ODkxSjNmZWZiczJhKzJiTmx5bkcyaWxWZ241Uk1MZHowaXVnMVFlcURzbU9DdWZoNDlldlM0dUxpNFM1TW5ULzYzOFBEd2EvMjE0MEJxRmRRT0E5UFMwc2JwZExycllEUEVuZC9UMk5oNDVzMDMzOXdNV1IwM0x3UEpKZSt5T0V0MHBTMldnNjdFRkJlY0Nkc00yMmZzMkxFUDlpSU5MTTNOelNXUStZdEFhMWZWMTllZkJ5MWNaalFhNjQ4Y09WSTdaODZjNE5UVVZHMXNiR3dVU0pQQlFOcXJJVWFxMWVyaDhGWHJxMys4bzZPajVaOEFaaVdhblhXajVBS2xFUjFUMlhKR2VLL040Z0Z5ZDBLMlBGdGNYSHdZTXN6eG1wb2FIR1hFd0FHWUR2NTkyZG5ad285VkJ3Y0huNEd2My9JM0RYWVJvdVlmeDNuWkVRT04vNi9UcDAvejh6MWxiU1VTMGEzQWtUK2NxUEdzRndodWdheDlaTmV1WFQ4Y09IRGdBaXNXeTl3Y1FtK0YrSVpGQ3NUREVETTRGMWNVc0lmcTZ1cURtelp0eW1lYldNeldLdTJrSzNXZHY4OVo5cnpCM1Y5Z01CajBPM2JzMlB6VFR6OWRZUHEveUl2dVJRbTc4M3dDc1JSaWpMdS9xSzJ0clhiTm1qWDhWRU9zVVlxVmVNS1ZTblNVTURpcEdwZDBjTW1EaGl4dUtpZ28rQ0luSitjbmkxWHc2bjNZSDZLSGVCd2lpN01PNjJ0ZDNGZkw5OTkvdndIdU9paFRjRjhMaFZLS2lLNE1vTXg0azJWT3A5RGUzbjdwNjYrL1hzczhhSlFhSi8zZ1FlTkZ1UlVDTGNFM09CZjZhZlI2L1E0Z09qOFJwUlQydFZHcEoxdnBpNHgreFZrWFF1b1ZScU94OHVPUFAzNkhrUno3UTQ3NmVhQUZyY0Q1V0VnNks2MCsrdWlqSDlnbVNxc3lKWjlvV2syWDQxNWxST2dSTFMwdEZhc0JaODZjYVdJa3p3K1FhNEdET3d1d0huRDBwbzZPanRiUFB2dnNIM0FId3J1Qm1VbVdUaUs2c29Ia2VjMUJNVmNIeGR5SGxaV1ZyYXlZT3g3Z3RRZnhRbnZDVVlZK2V2VG81dno4L0hxMmlVVnlxOUpQTWhHZDhibUhZczY4WThlTzllZk9uVE93WXU2VVNHYkY0OFc1dEtmOWJtNXVGdHFiWmpxOVJIUUUrdFIyT3hzTENncTI3ZDY5dTV5djdZRGtCaEh0OXhsV1RGK0J6TXpNMlNFaElmeTV2Y3FQcTVRUjBVV01xWngxSmE5dWFHcHFPcHVUay9NejI3d3MwaWxtNkkvbjJyNFlHaG82YU83Y3VkZXpUV3dmSGtoRUo4eTFJMWtzMzN6enpWYldGOUxaVy9FWFFPQyt2VzVQbmd3ZE9sVFl3cXNqb2lzYnFaeWRIdlhhMnRvOHdhejRHcEhQaWo4SDhZV2RyQjQvWThhTVZENnJCM2pOZUNKNmdQRjdPOW04YzlldVhkOExNcVlVL09lL2MzWVdiUm8rZkxpd2xUaU9pRTVFNzZiTkR4dzR3R2Z6Qm9tc2NZSVg0MEhiRjJOaVlvWUpOdnNyK1VRcm9RVUFpekhzQmt3RXpaM1MwZEdScWxLcGt0UnF0UTdpaWo2WDR1SmlZWEVucGVXU2NUbTViazFxdUl6SEcyKzhzYUsxdGJXMnBhWGw0dm56NTJjMU56ZFgxTmZYbCtuMSt2TjVlWG5ZeFloakEwWXBQcGRJaVVUSDN2SkVpR1FrTXdaOFA1aVJPZXJYMjVkYTNSVTlWblpRaEg3MzNYY25CTEpGU2pQanNaVUJQZjVnNFlzNFdTUThQRHdaSXk3dU4vVXljZUpFN3Y3NzcyOFJYQVRWY3I0SXBFUjBMY3ZNU1VESUpNek0rRDBRTnhHaXY3TmtkZ1E0NGFWVlZWWDhLR0tUeEU0d1NxeVRFTmM1K3dFbFhRUkJJaVF6V21ISlFHYVVHWVB4ZTBabWZNWmwxOEFIU0E4dUtNajd1MTVYVjZjWGJFcng2V3UvdUVKMEpWMEVnU0E2M2xvVFdHWk9acGs1R2Npcmc0TWJ4eGZJdmlLekkrQWNUOEdtRkplQTBQdmpqMGp4SXZBVmt6QXpKd25JUEpqSkRCMFFPQmFYZndzVW1SMmhzckt5UnJBcHhZZFRuUS8wRG9qMUl2Q0VaWDJZekVpQzRpL1piRFpqOGNlN0dUNlhHYjVBU1VtSjhBa1BiUklrdXFqbmdnYnlJdWlOZ2VGOFprWXlZMllXV0hQOWhBV2dWcXZscEE2UUxzSXNMa1duUWJMcm1ydDdFYkNMMjhqQzdJam9mWGt5QTVHNzdEa0JtWjIyNXVRQXRoWmhGeVM2RnFGUmp1ZkYyWXNBTG9BZTd3UnFRZlpxQXoxdGhEQUEyWnNnR3VEN05rNUJpSTZPL3ZVT0Y2REhxM3VLTUNXZEw1eW9EcExaWURLWkRQRFZDSncxTXM3aWVJS0ZSU2VmMFJ0WkZQYWdwVkdpNExyZkNaRHhFekhyUThaUGdPdytDR0tBTDFlWDhqZGlZMlBESUtzM0NlNTJVbHZrcDQvTWlHd0JFbDl1YTJ1N1pEUWE2eUNxSVhOZmFHcHFxcXlvcUNqZHUzY3ZqbHkzc21qM3RCaXRaMUVBdHhDOGpWekJEODVxRjhiRFZZV2prb2xBL25oMkljVGhVNXlsY21CVFVsTDZGUlVWOFVRUGtTRFJKZGU0aFNzRzQrb0tRR0tNR2lCeU5SQzVBdXFsaWtPSERwV0RER2xtUkc2em5mZWFsWlhsOUdxNjNpQmhMWXQ4TzNjRU5YOGg0QVVBa1dSeklmeHFOWW9CQ1FrSlNKUlNnUXhva2hodlVzUzJRNkFBakppUmNlNHRFQm0xTk9yb3FrdVhMcFVmTzNhc3JLU2twSUhQeXJaMWtUY1h3UFYxdHNVZFIyKzZCa2g5MUU0eGk3Y0huUDJpZ3dzQXBSSDY3am8yZURTUU9UdCt1eEJBdXNUYk9FNVN3NUJBNkdRa01oU0VkU3dybzd5b0FnbFlBUVZoR1NzSWVTSjNjMFdtVEpuaXQvME10S3pBVmFOd2lscGxENjVPTUY4ZndBRk5BR25FWHdnSmdndkJhNGlKaVVrVmJFWkprT2lqZlVCa3AzV3k3UklnNklvOCtPQ0Rvamd3WXRmUEppWWxTbkhnS1RnNDJQYm5xS054MENvZTdnWTZ2Q1BnTmtvanVCQUcyV3ZEZFZqSjllbVRIQjhmSDhvYXV5THg2YzBTYXV6Q1FuUjRJSFN5RkNEMU5sMjBrckMvUTk5RG9keUhGY3E4WTRTdHZEZyt3TmNJM1Z3S3JCZHV2dm5tNGV2WHI4ZWVkQnpaeFJIZWFva2NpOGs5blUreDZHUWl1dStBSTRVNHNibW9od3NCbjJzMHNwdklIVElray90dFp2MUFDUkhkN3JPVWdOQ2x6ejMzM050c0UxdVA4d0tsa3dNSnBVK2wrOEQyaFlpSWlDRTMzSERESUY2bmczeVJnamVOa20yY3ZSK2NPWFBtUjhGbWhWSlB0TktKZmhqaWdJMThVVTJkT25VYXZ3bVJMSUgvSTl2ZXVRVGRYYjlseXhZK2c2TTBxU1dpS3hldk1SSUkzWmRSRXlaTTRMTjZuTWl6T2pwRnMrMzk0T1RKazkrQWRPSFhRejh2MVdlSkV0RzlBMXh5YnJWdFVRcEYyQjNNN3NTc25pYlNmY2Q5KzI5N3RSWnE4NDBiTi9LMUJnNThYVlR5U1NhaVc0RVA3OW9nZkNFeU1qSnQvdno1L0hORW95R3JKNGh3djlIYnU4STd4NGNBYjl1MmJZUFozT1dNZGoyQmpwYU5KdkFvc0gzaG1tdXVtVFZwMGlTZTRMaFlwNWhHUy9HQnVvdnQvZURZc1dPYmMzTnplVDFlWk9leDdrUjBoV0lBa3dEZEQ0NWFyWjAxYTlhalFQaG96dHF1TUJ6SXJoWEovdUthaTNiM3hjeFNPVU1ublY0aU9xOXpsM1BXQ1NoWElEZzRPRG83Ty9zeG5VNkhUVjRoak95QkhIL0EwZDYvY2xaTDBTNUdqeDU5VjNwNk92Ly9YQzJTaTVPSUhtRGNCNUhwNkExaFlXSHhUd0l5TWpLdy95VUNZbVNBeUlPZG9CLzFWaHpqakp3NWMrYmN4NHJwSUNaemlPZ0tCbHB6QzUxNUk2NU8rL0RERHkrY1BIa3k5dGFnVnI4T3lCN2haMDJlZ3huYW1UZEhSVVZsUURFOWdXMzJGMmt4VFVUM0E3QkQ3R1hPaFdkM2FyWGEvcmZkZHR0VEN4WXNtQWpaTXBTUjNkY0VRbWwxQjhRNnp0cTM0elNndHBnTk1pWldVRXlIS2ZWa2ErVFN0T01HL3AyenM1cHVyNnhUcWRSeGNYSFgzSGpqalZlM3Q3ZVhBYlE3ZCs2TWhqREFzZlQyODQxU1dkRjVEK2ZHbzlKaFh6VnBhV25KUC83NDQ2R09qZzY4WUNKaFA2dmxkTTdoL3lHaU93QXUyL1k4eTVadUFiSjdQOGlZTjR3Wk15Yk9aREkxbEplWEk0bkNJSXhlSVB4Z2lLYzVxeFBrMGRNcVlEK2pVMU5UT3c0ZE9xUm54WFFuN0YrRDBvaXVXclZxbGRKSWpzUDVtMXlWQVk2QUR3OW9iR3c4cTlmcmMzZnMySkZmVTFPREhZOFlkUzQ4a2h6M0MxdHRaMEpjNzAxWkNidlhzWDM3OXJmMzdObURUVjNZQm5CVVpBOGVjeHZPemhsVkl0RmY0SHJvRGZFU3FTeTRLbTlkWFYweHJ1VjQ2ZEtsRXJnSVNyRVhITEpxWFhaMmRuQktTa3BJVEV4TVA3UFpqQThKR3dJU1l5Um8vbUcrbkVqZTJ0cGE5Y29ycjZ3eUdBem9zZU5FaWp3NTlMNzRjM0swbERERmx5VG5OWHg0ZVBoZ2pPVGs3bzJQYytiTTZYN3cvYmhVSDdwR1VFVGYrdFpiYitIempzS1pQTklyNWNRcnlYWEIyVUxQZXZJTG9LQXpIRDU4K0pPaW9xS3YvYjN6SlNVbFArVG01bjRDKytEMnNuT0ppWW1UYjczMVZuNWVyQTZ5WVpSU1RyNVNpbEVzT2wrRlNIZjNGNEFVT1phVGs3Tm03OTY5cFVEMnc5T21UU3ZXYURUalBTbG9uWlZDaFlXRjI5OTc3NzN2ang4L1hnV0Y3K2ZwNmVtNExFZVNHM2NiVlZKU1VscCtmdjVCMXI2TGJ0RUY0SUJrMndTY0xVYVZJbDJ3eTIraXUxbjh5SkVqV3pkdTNIaVVzMDdXeGlZcGJIbkZKakFzN2w3aGZMUkNGdWo2bW0rLy9YYkRybDI3c0pVWU0zbmg3Tm16c2VYMktjN3FyYU16NDVJM2ptTUI4K2ZQejNydHRkZXdJTWV4QUZ3aTR3eGxkT2tEaGZKS3p1YlpQcTVtY2M0Nk8rY2trRnk0cUJHK3ZvZTVKTkhlZEVuS3k4dDN2L3Z1dTUrY09uWHFFcnVnVHNIZkZxNkZlUXJpTzRqZmNTNCtHVG9pSWtMWHQyL2Y4b0tDQXJ4Z0k5Z1lnQ1E3SENtanN3c1o0aVZYczU2RExHNFBXTkRoNGlWLzRxeldvRWRvYUdnNC9jVVhYMnlGdjQ4WEZwSzgyRUdiTFdiNlJ6bnJWTHJIWGJtWU16TXo3d0hOdi9MY3VYTm9NMkxqVnlQOEhaTmNpU0Izb2ovQ3VialdDV1p4SVBnV3ZWNXZZRm04eUhaaEhqdEFXYkdjcy9yZ2tlN3VMQmFheTVjdi80aHRtdUh2bm5EaVkyZ1Jyb2ZZRC9GbnpzbGVtS0Nnb01qczdPeTdYbnJwcFhXY3RRM2lhczVPVHo2NUx1TEhNRVowbHh5VkZTdFdyQWVTMXpPcFVPQUV5WVdvOUdTSGNaMXZ3YWFyVWdKMTlqeEdlcWY4OFg3OStsMDdiOTY4c1d3ekZyTDZRQ0s2dElCUzVXWE95ZjRRek9MdnYvLysvekNwZ21UN3hZRlU4Um5SalVialJRK0lqc0NMOGwySXg1aXM2UlVqUm95NFk5aXdZWHg5TVFUSUhrTFNSVHA0aW5OaW1Rb1h0YmpQaWQ3VTFGVG5JZEY1SElQQTBhbEZ6SEhxMFFMVmFEU2hkOTk5OTMxUTlINWdzVmo0M3ZYamxOSEZEK3pCdnRPUFdkeHJSSyt2cjcvb0phTHpuMytWWGZRTzEzT0ppb29hK3VpamovTDJhejg1OXE3TGplZzQwdmVpb3d6bUpTM2VFNm84K2ZDRkN4ZUVoR3oxMGpINW1iTzIrWDdyNkUzcDZla3p4NDRkeXo5SVFIYTk2M0lqK25PY2RhamZuMW5jYXhuOTlPblRGMjJjSEc4Qkg5M3pMSXRHdTBSUXE3VzMzMzc3L1ZxdFZzVnFtM1FndTBvdXhKQ1RScC9GV1p1Mi9LSEZ2VTUwdEJiTHlzcDRjcHQ5dEZ3MVpuVmNvdTU1SnZHNkFaLzZ0bURCZ3QrdlhyMGFCNkw0cHhXV1VrWVhEMUJUTGdsUUZ1ZHNzckJia3hvOHRCWmR3VVdtMi85aTcrK2twcWJlek9iRklwTDlQQytXaU43TC80QURKWDM4cU1VZG9keWREM25CV25RRjJNUzFoVGt6K2NJZjRQUzc2ZE9uejQySWlBaGl4elpkb28raWxCM1JjZmg3VkFDenVGZmtpeGV0UlZjdlNtd2hlSmRKdWk2dzN2VVp2S0xockwzclJQUUFBajNmeDBXUXhUMTJYcnhzTGJvQ3ZvVUFSMVYvN1dMRTN2VVpNMllJZTlmN0V0RURBK3pQd05IUHJrYW15NWN2SHdsZ0Z2YzRvL3ZJV25RRlNQS0hHT2t0T0ZOcTJyUnBkOGZHeHVMeFJmY2xBOGl1a1NwWnBPeTZQTWxaZTZucmk0dUwxNjFldmJyTXg0NktUNG51UTJ2UkZmQXRCSHV4N3RGb05JbExsaXk1YWVuU3BWOXgxcllLeWZhdVN6V2paN0pDNm9mZHUzYy94a2dleUN6dWtYVHhrN1hvQ3ZnV2dxMWFyWGJHeXBVclE5bi9OUkN5ZW44aXVuK0FXdkdQRU0vQ1FWKzJmZnYyL2dIUzRsN0w2SDYwRmwwQjMwTHdkRkJRMEIvZzJPTHlIU2V4TUEzd0lxdUtJZnBZUm5RYzFNQ3V1eE1peU9KQzRDeWdPcGNZNVY5cjBWVmdDOEYvUUl5QjQ0d1RRZENPbE55a2FpbHE5RjM4TjNEZ3hmcndLWno2RnVQc201dWFtbXBGVEhRRXRnMzhIenZtWmxjdlpNcm84b1ZMOHFXK3ZsN3NSSmM4aU9naUlMb0lyRVVpT3NFdHVPUzhpTVJhSktJVGZKZlJSV2d0RXRFSjNpZTZTSzFGSWpyQk9kbk5PVGtUWCtUV0loR2Q0QkRZaXVDVTlTa0JhNUdJVHZCY3ZwQzFTRVJYQk5ISldpU2lTeDBWenJ5SnJFVWl1dXd6T2xtTFJIUkZFSjJzUlNLNkhORHI2Q2haaTBSME9RRDd0eDArZXBHc1JTSzZITkRCeU40anlGb2tvaXRDdnBDMVNFUlhSRUZLMWlJUlhTN29jZFV1c2hhSjZJcVFMbVF0RXRFVklWM0lXaVNpSzRMb1pDMFMwZVVFSkxQZFozZVN0VWhFbHhOdzhzVUZ1K0s5cWtvb1hjaGFKS0xMVTc0VUZoWUtNenBaaTBSMCtSR2RyRVVpdWh4eGhjVkkxaUlSWFk2NFl0Q0lyRVVpdWlJeU9sbUxSSFJGYUhTeUZvbm9jZ1N1UE52V0xjV1R0VWhFVjBKV0oydVJpQzU3blc2eFdKckpXaVNpeXo2am0weW1DNlRQaWVpeUo3clpiSzRnb2hQUmxTQmR5b2pvUkhTNTR0ZEJvODdPenZORWRDSzY3S1dMV3EwK0ozaWRyRVVpdXF6UXdERWJNU0lpUW85U25iMU8xaUlSWFpaWnZaRUZabkt5RnYySUlEb0VmaVU2TDFWd3BOUkNoNFNJTGtlZzg5SXMwT1lkZEVpSTZITE42QTBDb3BOc0lhTExsdWloQXFKcjZKQVEwZVVJSEJIVkV0R0o2RXJJNkdwQk1VcndJLzVmZ0FFQTlCbmFzTmtjU29NQUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICByb3RhdGVJbmRpY2F0b3JQb2ludGVyOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQURRQUFBRHhDQVlBQUFDRVhaVHNBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZPVFEwUmpNMk4wWXlOREpGTVRGRk1qazFRa0ZCUkRJd1JUVTRPVGRCUkRnaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk9UUTBSak0yT0RBeU5ESkZNVEZGTWprMVFrRkJSREl3UlRVNE9UZEJSRGdpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvNU5EUkdNelkzUkRJME1rVXhNVVV5T1RWQ1FVRkVNakJGTlRnNU4wRkVPQ0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG81TkRSR016WTNSVEkwTWtVeE1VVXlPVFZDUVVGRU1qQkZOVGc1TjBGRU9DSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9Qc2Z5cjZZQUFBclpTVVJCVkhqYTNKMWJieU5KRmNmTDdjVDI1RDZKYzJFbXppWVpWcUJoR0ZaQ0NCQURnbjBjSHVZRmFTVWVrR2JlUWJ2d2xza0gyQmV5Q0FrZWVFRDdBVUJvUVB1T2hCQkNnb1daWllVeXVWOG1rL2lTeEhaOHljVnVUc1Z0dVRmRWRsWFhPZFhWWFZKUE9uSDc4dlAvMUw5T25hN3VpZGkyemNMVUxCYXlGanFnSHBHRGZoT0pxTDdQMERMOHM4UlltZi95VThZdVpKNjhkT1gzVHQya1I5TVg5d1pzL0Z2WmRINHYrS29RUXB0MmdQYkRBalRqL1B6VWlENkVDSFFqYkVCOVlRTktoR0VjR29XdG4yOHB4bTd5THhGc09CWmtvSlRMNnNhb2xiSTBoaHVuR2FjMkI2MUFnNHhOaEFvSUxDNUo3WFphZ1JLdGtBdDBIN3JkM0ltMUZBcHN5RTI0d3d1U3VkZ3NZOE93RzZXeWJtcWc2V3ZrSWxXSkdtajI2aCtTclg3VUZ3cUZCZ0t1MEJ0WC93Q3lURkk2blhhRllxMzBKM0FLV2U0OHpnMFVkWUNXR3JQWXdBQk5zbXVzR1FoNjV4cFp0OFVJckpzU2FLYkRTRXZtZEw0QTNTVE11aTJkaHVDeWJyS2N6aGVGYmhDT1JiNEF4UU1JRkhWbjJWZGJMd0RGR3UrZHdMWnVLcUJickVORkNRaXMrVWJ4eE1MdVIxUkFxVzRIZkk3STZhaUFwcnNkTU5McVI0RlFhTGJiQVFOaFU0akt1bjFUS040cWFmV1pEZ1N1ektZRURocEpOT3c5dm9UNE9TaUFiZ3UrcnZWbUkrd2ltTVpBQVpRU1BYQ0N3T2tvZ0daRUR4d2hjRHBmZ1FZSVNzTytBaVhDcGxDY1lGNkVEY1JyQk9PaUIwUDJPanpZc1BrRWxuVmpBNlVrWHpNeWgzeFd6L0lyM0pwdEVya2YrUTQwZ2x3QjhoMm8zM0NGVXJKUFNCZ09OQzM3aEJoeStvTUoxTWRhVXdMaEJ0WTlOTkt3ZTU1MVIwMENtdmI2eERuRUFSWVRhTmJyRXljUm5jNEloWVlRcCtPWVFETmVuOWlQdU1JRUV5amw5WWtKeFBUSENJVmlCdlloU0pvdno4cDVhdURWQStNTmRYcVhGQmNsV242cjQ3SnVsSDVrREZBU0tRWENBcHBXZlFFczZ6WkdvYjZ3QVNVTUN6bGxvSmhCUURjZDIxWWRQMjdjdWl6VlhTNkQ3dlVUS0lXa01sL3BwTnlQTUlDbXNZQkdFU1o3R0VDeldFQkRDQ21RVVFyMUdSSnlhQW9sRU5JZm94VHFSWmlLcXdJbEdlNnBrT1l5YU05WHNLZ0NvVmwyczkxU25PeXBBczFnQTQwcE9wMXhRSU9LS1pCeFFLcldiVndmaXZ1b1VBVFRzbDFaZHpMaUU5QUVJMWd6Nml5REh1R2ZiZWxTTUgxQTZQMm4yVlN1WURFU2FGUWhCVElTYU5BbmhWSlVRRGQ4VW1pYUNpaXVjQVdMVnlDTFVpRytETHJIV1hZbXV3emFLOUFVVXloa0NGaDNkTDUxQlV0Y0I5QXNJMjYzUFM3aHRFenJQODNtZFJtMFY2QVVOZENBUjZmekNqUkREWlJvWEVvUUtpQnRDdlUwWnNxMERTeDBOTjY2Mk1PaUJPTExtS09NdmxtZmJ3eXdVc3VnTFJNTndUWFlTWmUxakFieXNnemFNdEVRbXEzZlE5WnRORkFpYkFvbE5DakV5N09UdW9CZ2ZMalozeGdtNHFLZlZSWm9tdW05YTJEa2p1UVZMRjZBdExZSnliQ1RCWnJWRFNScjNjWXIxQjgyaFdRTEpzWXJGQ05VaUx2TXVHNGdmZ1hMc0xNTVd1VHp5Z0NsR01FOVJFVGFuRVJaU3dab2h2blVKaVg2VVNDQWhpV3UxZXVoQUxJWnEyVVplN0hPMkNkcmpIME1QOWVoOHhXL0NaOE5Pc05YNFBIdndUZjViZEdKWXIvRXZLaEhzZzkxYlFEeS9IZU0vZkZmakwyRVh6ZHMyNjY2SGk3Q3RndmJSeitMUlBnWDlCNXJnS0ZsM1JZV0VIenI5VThaKzhOVHhqNEVtSDhBeUgrdndIeW0vZHkydDlubGZaRFpyeHRQeDdGdVVTQitXOCt4VGdlOFlPejN2MlRzTDdDN0NpQ3ZSRjRVb0d6WWZndTd2K3AwSE1UbDRHZ2ozR0xkd3RUQzZEOXB4djRKWC9QZitDNTh4dGV5blI2Z1BvUWZmKzFpM1VJcUtRTkJySnhEbi9rSWR1dTh6eWlZMlM5Z3EzWEl1b1VXWkNnRGdUclBuek4yRExzWlVPZlVLdzJvdE5GSnBTRkJwN05VRFdHVnNmODR1em1FSWVmUEF0YU5vbERicFBUdnJURER1Q240aTNZUHhBVVhOWWtDdFpzMjJNdU5zWVhmUi80TUFTamJBVWpvZkpIUXdGcis0SVAyZnI2NEdDMlZTclZJSkdJQlZGMnB5ck93MEhhTlhMME9MLzMrKzJqVGg2MTJSWXo1K2ZraFp4L2pGR1d5M1FPbnA2ZE45U29ZUUx2dEhyaDc5MjZ6ZncwaUFIMngzUVBWYWpXRENiVGQ3b0U3ZCs3Y2MzYkhFSUMrMis2Qms1T1RKbENaRkNpWlRMNTE3OTQ5dnRob0hQcFIzQ3ZKMDZkUElSbGczMnIzZUtGUWFBNExWZEtRQTRqZVI0OGVmZDk1clRrRmRYN1NLVTlMcDlONlFzNVI2YXRQbmp6NUJzOVFBSERLZ3pvLzZqYU5XRnRiUzJNQzhiSG1xTk1CRUhZL2VQejQ4ZGRoOTAwWktJRDVJZno0Y2FkamFyVmFHUlRpb1hiT3V2eS9LeklUdkIzVzRVcElQZzdkdjMvL25jWEZ4Uzg4ZS9ic1QvQTduK0N0dDh2dkFJVG5oKy9DOXAxdWJ3eVdMYVNPTEJEdlIvZTdIVFEyTnZZV0tQWGxUQ2J6OGZyNitpY1BIano0OS9MeTh1clUxRlRwNGNPSHc5Rm85RXNBK2JabFdXK0xUc0hCc3JNVVFKdWlCNEk2MFltSmlhL3hyZmszQUhRL0x0WEhYSmJkRmNpU1ZNaVhCcGFkRmJGc1dhQWR2NEFPRGc2RUJsVlpvRzIvZ01DeXN4UWhWNEx0VURjTVdQWkpOcHZsb1hiV2FZcnVCY2lYc0FQTEZqWUVMMERhdzY1U3FZUUxDQ2FQd2c3bkJlaVZicUI4UHArbFZHaFROOUQrL3I2d1pYc0IwajY0cnE2dVppaERydHlwTWtOZzJZV2pvNk16VWN2MkFxVFZ1bVdTVWhVZ2JVNG5hOW5HSzFRdWw2VXMyM2lnNCtQanJJekRHUjl5WU5ucFVJVWNXSFpPQnhDUDV6UTF6TVhGUlI1Q2p0czFyMG5VS1lHMERMQ2l0V3dzSVBJVUNDdzdMZXR3S2tEa1NTcGsyVG1kQ3BFN0hhUThVa21wOFVDdUxGdUxRdHdVS1AvTGQ5dGwyVnI2MENtbGRaK2ZuK2NMaFFLdlkxY1hGaGJxT29CSXcrN3M3Q3pqUlIxamdWeEphVVVuRUpsMXV3b2pXb0hJQmxldzdMUWZRR1RwRDFoMnppK2dPZ0dQdmJLeWtuV0dCYTJtd0RQaEF3TExQam81T2VHbkhVOWxMVnNWaU1UcHZHYlpXRURva3ozSXNxWHJDRVlEUWJoSjF4R01Ecm5EdzhOMHFFTHU0T0FnNTJmSXZVSzI3dnJ5OHJKbnk4WUE0aG54UHFKbEg0TXAxTHhhTmdZUWFnb2tlL3FSQ2dndFNWWEpzakdCMEp3T0xEc2RLaURJc28xUUNNMjZYNzkrclpRbFlBSHRNY0d6YTkwcysrWExsemtWeThZQ3VuQ2dWT3NJUjlWcXRlNmxNSUlOaEJKMkdKYU5DYVE4ZTNWbDJVWUFLUSt1eFdJeEhTcUZJTXRXZGppait0RGUzcDVSSWJmSHVpdy83bGdWc2UzNnlzcktvWk81RzZGUVRTV25neXc3QzdaZGQ3SnMyd1FncFg2a1doaWhBdktjMDdteTdISW9nTUN5UFo5dE1ETGtJTXZPbVFpMDVkbnpkM2JTSm9iY3ZsTmprTFhzMnRyYTJwRmoyYWNtQWRXOWhCMVlkZzQyMjhteWJaT0FQUFVqTDR2OGRBSkpPeDFZZGpwVVFLNWFkdFZFSU9tUXkrVnk0UW81c0d4UFMyQjBBZkV6ZXNJWHVZTmxYN2dzKzh4RUlDbnJoZ3c3VjZ0ZEZvd3FHSlpOQVNUVmp6Q3piRW9nNGZwQ3FWUTZ3SFE0M3hVQ3l6NE1na0xDOVFXdzdIUVFnSVN0ZTN0N094QjlLQzNTSjhDeXo4R3krZTF6NnVCd3B5WUQyU0lGRTdEc0xFQ2hxa01GSkJSMm9yZmtDQXdReHVsSG5VQmRyYnRZTEtKbTJkUkFYZXNMMld3V05TbjFYU0VLeTZZRVNuZjZvUHkyVXhzYkczbllyWUZsbndVQnFLTktQQ21sc0d4cW9HMEJ5NjZHQXFoU3FlUW8rbzl2SVZjb0ZESkJCR3FyVUtaMXg1VnlLSUIyZG5heVFleER1ZXNVcU5mcjNMTDU3UTh2c0MyYkd1amFmcVJ5NVlrSlFKdTZzbXpmRklJc094ZGtvUCtyTCtUeitYU1FnYlk3Wk5uaFVBaXk3RnlRVFlIWDNVb3V5NjV1YlcwVnFTeGJCOUJud283YXNyVUR1ZGJFbFlNTTlPcWF3a2lnRmRwMFdYWW1EQXJ0dXJMc2JLajZFRGdjU1dIRTNYbzBBUEg2OWVVOXVYZDNkL2srQThzK0R6S1FXNlVLOVJ2cEF1SVpReVJzUUtGU0tMUWhWdzJiUW1YcU40bzRKZG5RTkl1RnJJVU82SDhDREFEdEtPNVNvWkFBU2dBQUFBQkpSVTVFcmtKZ2dnPT0nLAoKICAgICAgICAgICAgYXJyb3dUb3A6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBREFBQUFBZENBWUFBQURzTU85dkFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBeUpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJXeHVjenA0YlhCTlRUMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMMjF0THlJZ2VHMXNibk02YzNSU1pXWTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpWSmxaaU1pSUhodGNEcERjbVZoZEc5eVZHOXZiRDBpUVdSdlltVWdVR2h2ZEc5emFHOXdJRU5UTmlBb1YybHVaRzkzY3lraUlIaHRjRTFOT2tsdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNlFqTkZNa1ZHTURFeVF6STBNVEZGTWpnM1F6UkZNekE0UlVNek5VVTFNMFVpSUhodGNFMU5Pa1J2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2UWpORk1rVkdNREl5UXpJME1URkZNamczUXpSRk16QTRSVU16TlVVMU0wVWlQaUE4ZUcxd1RVMDZSR1Z5YVhabFpFWnliMjBnYzNSU1pXWTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRHBDTTBVeVJVVkdSakpETWpReE1VVXlPRGRETkVVek1EaEZRek0xUlRVelJTSWdjM1JTWldZNlpHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEcENNMFV5UlVZd01ESkRNalF4TVVVeU9EZERORVV6TURoRlF6TTFSVFV6UlNJdlBpQThMM0prWmpwRVpYTmpjbWx3ZEdsdmJqNGdQQzl5WkdZNlVrUkdQaUE4TDNnNmVHMXdiV1YwWVQ0Z1BEOTRjR0ZqYTJWMElHVnVaRDBpY2lJL1BsdkNqVkFBQUFEL1NVUkJWSGphMUpqUkRZUWdESWJaZ0JFWXdSRWNnUkVZeFJFY29TTXh3bzNnQ0hjKzBNUVFQQ2dVS0NUL0c4cjNHVzBScGZvTmZjZUhhTFhZUVBodnlGSVNKb0ovU2hqcDhOdWRLd0dQdWNLY0plRkZTOWhDK0tlRWxRTHZDT0J4M01ydzB5Vk9CbmpNT1JvZUdPRXhJQkVlS3VZUDY2NFVHSXBFbDY3ZEFqOWR3akRBMTBvMGJ6MUt1eXVsbWxDcVYxUFhwc0s3VHYyalNzSjJoSytWc0QxdTNOcEoyZGNhQ2MrK0p2WGoyaG5MOU41YUxHQlVaV0FzR2lBSnZrbkNDNEd2a2ZDNFRjaGQ4Qm44RzdpRk5YTVBWSmRZenpvUytiZi9TcjROVGhCOFR1SzFsQjRDRDZOaWlhUGtoMFhhU1JwS1FPbGtpY2VBU2E2ZkFBTUFEZ0hSZHZIalNaMEFBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgYXJyb3dCb3R0b206J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBREFBQUFBZENBWUFBQURzTU85dkFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBeUpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJXeHVjenA0YlhCTlRUMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMMjF0THlJZ2VHMXNibk02YzNSU1pXWTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpWSmxaaU1pSUhodGNEcERjbVZoZEc5eVZHOXZiRDBpUVdSdlltVWdVR2h2ZEc5emFHOXdJRU5UTmlBb1YybHVaRzkzY3lraUlIaHRjRTFOT2tsdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNlF6ZzRSVUZFUkVReVF6STBNVEZGTWtKR1JUVkVOVE0xUlVGRVJVRXlOak1pSUhodGNFMU5Pa1J2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2UXpnNFJVRkVSRVV5UXpJME1URkZNa0pHUlRWRU5UTTFSVUZFUlVFeU5qTWlQaUE4ZUcxd1RVMDZSR1Z5YVhabFpFWnliMjBnYzNSU1pXWTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRHBET0RoRlFVUkVRakpETWpReE1VVXlRa1pGTlVRMU16VkZRVVJGUVRJMk15SWdjM1JTWldZNlpHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEcERPRGhGUVVSRVF6SkRNalF4TVVVeVFrWkZOVVExTXpWRlFVUkZRVEkyTXlJdlBpQThMM0prWmpwRVpYTmpjbWx3ZEdsdmJqNGdQQzl5WkdZNlVrUkdQaUE4TDNnNmVHMXdiV1YwWVQ0Z1BEOTRjR0ZqYTJWMElHVnVaRDBpY2lJL1BsN3RLemtBQUFFVlNVUkJWSGphMUpqUkVZUWdERVM1Q2l6aFNxQUVTN2dTVW9vbFVBSWxVY0tWUUFtUkQ1aGhQQlhEa1Jnems3OVYzdUs0Um96NUxaODZwSjZNbnBveWsyOEpsOVNZVzR1SkFsKzRsaU1oVkNJdEpyYndwV0VydEtuamp2Qk9FMGZ3bUZsdExUeUNMLzJ0THhBb205YzhZNHBsWTBORHVPdWFHVDVlWkFvbGRWQ0pDUW84MXFta3dVUTNmQ2xITkRFUGhKK0o4STRTcFdjTkErQ0hyeWxwZ20ydEQvR1JBak44ekV5c0x4VXd3bHVwWkhBWDd1bWtFKzlOK05oaFkyS2t4SFhJYTdQUEpWZE5VT0dIejEvL21MZ2R2bmNuZllkZXBEd3h2MVhCOTZUSmlQUmlLUmdBRCtibWdpZkQ5NDRlWGFPQmxqOHBxVDg3RmhPcTRWdWp4OURSUVBwSVJOdEpIOGtFSy93TEVjMlRheFZnQUJoWDFEaWVmOHdGQUFBQUFFbEZUa1N1UW1DQycsCiAgICAgICAgICAgIGFycm93TGVmdDonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCMEFBQUF3Q0FZQUFBRHRvWEhuQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUF5SnBWRmgwV0UxTU9tTnZiUzVoWkc5aVpTNTRiWEFBQUFBQUFEdy9lSEJoWTJ0bGRDQmlaV2RwYmowaTc3dS9JaUJwWkQwaVZ6Vk5NRTF3UTJWb2FVaDZjbVZUZWs1VVkzcHJZemxrSWo4K0lEeDRPbmh0Y0cxbGRHRWdlRzFzYm5NNmVEMGlZV1J2WW1VNmJuTTZiV1YwWVM4aUlIZzZlRzF3ZEdzOUlrRmtiMkpsSUZoTlVDQkRiM0psSURVdU15MWpNREV4SURZMkxqRTBOVFkyTVN3Z01qQXhNaTh3TWk4d05pMHhORG8xTmpveU55QWdJQ0FnSUNBZ0lqNGdQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRnUEhKa1pqcEVaWE5qY21sd2RHbHZiaUJ5WkdZNllXSnZkWFE5SWlJZ2VHMXNibk02ZUcxd1BTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZJaUI0Yld4dWN6cDRiWEJOVFQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wyMXRMeUlnZUcxc2JuTTZjM1JTWldZOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXpWSGx3WlM5U1pYTnZkWEpqWlZKbFppTWlJSGh0Y0RwRGNtVmhkRzl5Vkc5dmJEMGlRV1J2WW1VZ1VHaHZkRzl6YUc5d0lFTlROaUFvVjJsdVpHOTNjeWtpSUhodGNFMU5Pa2x1YzNSaGJtTmxTVVE5SW5odGNDNXBhV1E2TlRrd05qSkROVGt5UXpJME1URkZNa0kwTnpaRk0wTkVNVFJDUVVVNE56QWlJSGh0Y0UxTk9rUnZZM1Z0Wlc1MFNVUTlJbmh0Y0M1a2FXUTZOVGt3TmpKRE5VRXlRekkwTVRGRk1rSTBOelpGTTBORU1UUkNRVVU0TnpBaVBpQThlRzF3VFUwNlJHVnlhWFpsWkVaeWIyMGdjM1JTWldZNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEbzFPVEEyTWtNMU56SkRNalF4TVVVeVFqUTNOa1V6UTBReE5FSkJSVGczTUNJZ2MzUlNaV1k2Wkc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvMU9UQTJNa00xT0RKRE1qUXhNVVV5UWpRM05rVXpRMFF4TkVKQlJUZzNNQ0l2UGlBOEwzSmtaanBFWlhOamNtbHdkR2x2Ymo0Z1BDOXlaR1k2VWtSR1BpQThMM2c2ZUcxd2JXVjBZVDRnUEQ5NGNHRmphMlYwSUdWdVpEMGljaUkvUHMzbW0wc0FBQUVIU1VSQlZIamF4TmhoRGNNZ0VJWmhNZ09WTUFtVk1BbVZnSlJKUUFLU0ptRVNKb0hSaFNWa05JTTdvQy9KL1dyU0oybmhBODZFRU15azRXTTlZaTNGazBub0RvWlVyMWpyYk5SbFlBN2JXYWc5QVBPNmowWnI0TGY4S0hSckJNTm5jZzFBMS9UUDJzQjlObmVpY3JEem4xNVZZQWU2cEJlMWdNOGlJQlNvQkN5RFFZbjJnUXJVZDROQ2RBd29RSjFnOGQrcWIydEFyUUMwVGQrc2dvNEhLK2cyQmZ5RFN1TE5pcVBsQUpXQVRoV2dQNmdrVDcxNm04aFFTYnpwd1F3OUQ4elE4OEE0TG9ZWTVPZEZKaEsyWkxCd3dHSVFDM3hzYThNMmNleTRnaDNNc0NNb2R0akdyaFhJQlFxN0ttS1hZdXo2anpVNnNKWU8xcnpDMm5SWVE3TGFlbjBMTUFDYkVsTlpWWDRlcFFBQUFBQkpSVTVFcmtKZ2dnPT0nLAogICAgICAgICAgICBhcnJvd1JpZ2h0OidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUIwQUFBQXdDQVlBQUFEdG9YSG5BQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZOME01TWtVeU1FSXlRekkwTVRGRk1rSkVSRUU0TXpGRE5ERTJPREUwT1RBaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk4wTTVNa1V5TUVNeVF6STBNVEZGTWtKRVJFRTRNekZETkRFMk9ERTBPVEFpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvM1F6a3lSVEl3T1RKRE1qUXhNVVV5UWtSRVFUZ3pNVU0wTVRZNE1UUTVNQ0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG8zUXpreVJUSXdRVEpETWpReE1VVXlRa1JFUVRnek1VTTBNVFk0TVRRNU1DSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QcnF0VHpvQUFBRFZTVVJCVkhqYTVOamhDWU13RUFYZ293czRnaU4wQkVkd2hCdkZFVHBDUnNvSWp1QUlOc0lKcGZnam9aZjNZaE40LzRRUGdqNlRFN2xlUTBwTUNRSmF6NVF0WmJkVWgvVUxQUE9xQlM0WDJHZlVFeHRzQy9lTXFDY2FNOUVqTXdQZTdHWHJDeDQ5NFRVVGp2WjhsWUpvRmhZR0hQNENuZ3JLdzdXbnRRRFc3dUNaQWJ2V3BkZ0xRNEVEbzZkTFlOZTZ2QWY4a0JzditQWTJDN3A5TXZCeTBGWkJ0OEtILzlyZ0lQeTRBaitZTlExR0J2aHp2Y0V2VVBDckl2eFNUTG1Gd3djZGxKRU9aWGhGSGRQUkJwS1EwZXRiZ0FFQTVUWEhCS2J2MUlrQUFBQUFTVVZPUks1Q1lJST0nLAoKICAgICAgICAgICAgZml2ZVBvaW50ZWRTdGFyOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUR3QUFBQVVDQVlBQUFEUkExNHBBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZRVVk0UlVRM01EUXpSVEExTVRGRk1qazBORVk0UmtaRFFqaEVPRE00UVRVaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNlFVWTRSVVEzTURVelJUQTFNVEZGTWprME5FWTRSa1pEUWpoRU9ETTRRVFVpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwQlJqaEZSRGN3TWpORk1EVXhNVVV5T1RRMFJqaEdSa05DT0VRNE16aEJOU0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBCUmpoRlJEY3dNek5GTURVeE1VVXlPVFEwUmpoR1JrTkNPRVE0TXpoQk5TSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9Qa3BSckY0QUFBR09TVVJCVkhqYVl2ei8vei9EU0FJc0lLS3NySXlRT20wb2ZSV2ZvcTZ1TGpCOTl1eFpxcGhuYkd3TXBxZE1ZYVNLZVRrNS95RWVKZ0tFRW1NZ0NXREF6R01pMHNCd0tLWVdHRER6aVBHd0hoQnJRTEVlRlJ3M29PWXhrWkJjME5tVUpyOEJNWStKeU9RQ0EyRlVTbjREWmg2czBGSUFZZzRnNW9ieStZQ1lHWWhsZ1ZnVlNiMGFFQ2NDOFdNZy9ndkVuNkRpWDRINEJ4QS9HT3ptd1R5c0M4UkxvQVlSQXZPd2lJRU1qa0Z5NEtBMUQ1YWtOd094T1JEZkpDTkpnZlNZUWMxZ0dPem1JZWZoRzFCRHQ1QmdHRDZIREVyejBBdXRqMERzRDhRdFFJeXZ6ZmtmcWlZQXFnY1hHSFRtWVN1bC93RnhMUkFmeFdQZ1lhaWFmMFNFOHFBeUQxZTF4QVBFcG5nTU5JZXFJUllNR3ZOd2VkZ0JpTm54R0FpU3N5ZkJnWVBHUEZ3ZTlrTExONUZBSElHV0g3eEpjT0NnTVE5WGI4a05TaDhENG1payt2QWtFQzhGWWlza05jU0FRV01ldGhoV2g3WnNtcUhKNGdHUzNBT29XRE5ValJvUmpodFU1bUdMWVUwZ2RnTGlRemdzL0FQRWRVQzhCNGkxZ1BnV0FRY09Ldk1ZUjlvUUQwQ0FBUUFLdktIbEVScWRnd0FBQUFCSlJVNUVya0pnZ2c9PScsCgogICAgICAgICAgICBicm9rZW5JbWc6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBREFBQUFBd0NBWUFBQUJYQXZtSEFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBeUpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJXeHVjenA0YlhCTlRUMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMMjF0THlJZ2VHMXNibk02YzNSU1pXWTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpWSmxaaU1pSUhodGNEcERjbVZoZEc5eVZHOXZiRDBpUVdSdlltVWdVR2h2ZEc5emFHOXdJRU5UTmlBb1YybHVaRzkzY3lraUlIaHRjRTFOT2tsdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNk1rWkNNME0wTWtNME9UZzJNVEZGTWpreVJVSkRNemszT0RjeU0wTXdPRVVpSUhodGNFMU5Pa1J2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2TWtaQ00wTTBNa1EwT1RnMk1URkZNamt5UlVKRE16azNPRGN5TTBNd09FVWlQaUE4ZUcxd1RVMDZSR1Z5YVhabFpFWnliMjBnYzNSU1pXWTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRG95UmtJelF6UXlRVFE1T0RZeE1VVXlPVEpGUWtNek9UYzROekl6UXpBNFJTSWdjM1JTWldZNlpHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEb3lSa0l6UXpReVFqUTVPRFl4TVVVeU9USkZRa016T1RjNE56SXpRekE0UlNJdlBpQThMM0prWmpwRVpYTmpjbWx3ZEdsdmJqNGdQQzl5WkdZNlVrUkdQaUE4TDNnNmVHMXdiV1YwWVQ0Z1BEOTRjR0ZqYTJWMElHVnVaRDBpY2lJL1BuZSsvdDhBQUEvNFNVUkJWSGphekZwNVhGWFYybjdPekF3eUNDSVlLR2dPT0lKU2FtbGYxeFJNc3pKa1VMTlFCaldIbkg2MzdwaWZEWGJUTUJFMXphNURwam5rbUhOYVYwVXh4UUVFUlFFUkVVRlFPT2R3T01PKzcxcnNjenhIT1hDc1A3NXYrWHQvZTdIMjNtcy96M3JmOVE3cktNR1Q3VG1TYVB6ZnROc2tPMGowamp3c0NBS2srUC9WMnBPTUlWRTQrb0xjM2cwdkx5L1htcHFhVVEwTkRTMnVnTWxrWWxjSjZ4dU5Sdk80aFBYRk1YN1BTaXgvUXlKQmcxcWpNQmdhNVBYMTJ0b0J6ejIzUlNUeHVxaUp4dDlOUUtsVXF1Z1M1ZVRrOU5UTGFEQVlPREZyWVlTc3I1d0FROWpZZ0FmMzY5RWhPQmdGQllXK1hicDB6cVRoUUZFVHJaS3dTMENyMWRwYzdUVUpyYUo1OWMzQW1pUFFuTEIzVFFZVHREb041QW81NUhwRFdGNWUzdFJ1M2JvdGQ1U0UzSkVWVmNxbGtDbFV2OE9ramFLWWJLOENDUkVBTXptWkRLNlNoMmpyNVFxSmZ3Q3VYUy9xZE9YS2xhbmR1M2QzaUlSREJHUzBPaGVMS2pGdTBWRUUrYm8xbzRaSGU0S3RxbGtyRW5hRDkwMlB4c1Q3SmhQckExS3BES1hsRmZqaGcwQjBEZk5FKy9idFVWWlcxaWsvUDM5cTE2NWR6U1RZbnRqZUhBbTVJNjZLUG9QU3lucmtYeTVCUTRnM0gyY0E5S1IrbmQ2SWhrWWpHZzFHTWgzUnRnWCtvaWdXVzJzaWFxU0JSZ05ERHFqa2NITnpRbjE1TGFvZXFQbGpMaTR1Q0FvSzRpUklFOU5JRTEvUmNEdDdKT1F0QU9mcjJyU0pKWkRMSkpBNksrSHQ0UUtOVG84NmpRNSszcTRJQ2ZCQXAwQXZoTFgzUWhzUFp6aXJaRkRJcEZBcFpDUnlxSlF5Ym9JTkJGcXQxYVBpdmhvRHVyVkRKM3IrZzYvL2czcDFJMDdsMzRXTGM1UG4xT2wwMWlRNmtpYW1reWFXMlNNaGFTR1ErUktKUDl0WVNzUkN0QS8zZzVOS2dRWHhVZWdSNWtPZ0RLUUZBOWVFd1dqaW1qRUpvb3ZsN2hKY0MzcTZWMXVuUTJUM0lMelF3OTh5NThwZHVXalFDNWowcDA3dzhIQWxwNkVqNWRBQ3FGVFFhRFNNQk52d04wVVNyRldRYkdNa1dncGt6RmZIc3M3Z3dZT1I4ZVhTcG84dEhvZXFlajArR044ZlVxVVUyVmZ2NHNLTmU4aS9WWU1iRlE5UmVxOGVaZFZxbE5NcTM2blI0RzZ0RnBVUHRDaWp2NitVM0Vkb0IxOE8vdlRKWCtEZjFvL1BtVEtxRjA1Y0trZDVUWU80eWNFOWxMVW1pRkJvUVVIQmRCRmJBTWtiSkNwN0doaEk0SmV3R0pDZW5vNFZLMWJ3d1QwN2YwRHM2RGV3NlhnSlR1V1d3SjFVenN5a3RkWkkrK0l1a2ZtZnlJNklIeHFDNHFKQ2hJWjE0ZmY2UjBVaSs4eFoxT2lBNnpmTEVmVnNvTjE1N3R3cHB6MW1MTzdRb1VPR1dST0U4enZKWTNZdkpSKytXeTZYeDZTbXBXRmxWcGJOSkR1M2JjSG8xOGZpNk9WcVpHdzlnL1krcnR6bTdUV2Qzb1E3OXpVWUh0MEp5Y1BDY1BONkFUcUdQMnZ6VEdSa1A1dzltOFA3MncvbXdFVXA0WXRqWW10THRtZ2dHMm5ucVlKU0prQm5FRkJSVVpIOTBrc3ZmUy9pWFNLM0JrK1hkUXo4dThuSldMdG1EUjgvTjJvVUxwV1c0dTBMRi9EYUcyOWgyNWJ2OFByWWNiUXBvN0I0Y3phQy9keWFKY0hBMzY1UzQ3WEI0Ung4Y2RFajhQTkNRakQzK2VmaHQya1RjbkxPb1cvZlB2anR0L040Y1dnaytyN3pIZG9vRzZFd1BrQmpneFpWdGZVWUdxYkFnSTRxTkJpbENBNE85bnJDQzRuZ3Z5VkptakJoQXRhdlg4OXY3aG82RkdHaG9lalNxUlB1cXRXWWYrMGEzbmdySHR1M1NqRG16VGd5ajM3NDUvclRDUGExMVFRRFgxNnR3ZGloWFRBMWhxMzhWUUxmbGQ5TDl2ZkgzOGVNZ1k3c1BPZlZWeEc1ZXpmT243K0FmbjE3NDl4dkYxQ3lQaDVSTS9lZ25XOG8zRjNrcUtoOGlJRjk1T2p0YjBCVm5SNEtoY0pvVFVCSzRObVgvODNBSjQwZmJ3TytmOWV1dUZwVnhXWHlpQkg0TkR5YzMyTWFZSnA0clg4QS9qZDVNR28wUmtobGNyZzZxeUNYSy9Dd3dZaUp3eU13WjNRWDNDak1zd0gvUlZ3Y0NxcXJVWER2SHZ3cGFERVNyUDEyUGhkOSt2VGkvYk5MUitKK25acnlKQU9jM2QxcEl6K0RuajE3MHYwK0xOQVpiQWlJSzU4WUh4K1BqUnMyMklBdmVVQnFwTHhHMjlpSUd6VTFOaVRlakV2QTFzMGJNYUtYRHo1TUdvQktXaDBOWmZIVmFnUGloanlMOU9HaEhIeW5MdDF0d0JmVjFxS2VQSXllMG9peWh3OXRTRnk0Y0JHOWUwWHcvcStmanNCOWloRnFIZUUxTlVKSFdUR3RQc3VTalk4VFNJeU9qc2Jtelp1YkpoazlHa043OWJLQXR5UjN6WkI0S3o0SjMyOWFqMkVSYlRCM2JCOWNMcTNGcTlHaG1QS25aM0Q5Nm1VTCtIZjgvR3pBVzdKV2tVUUk3WWtLV2tEV2NpOWVock9Ua3ZlUGZQUXlqR1JxU3ZKMkpqRjdOV2V4MWdTRUdUTm1XQWEyNU9YUmpwZHhlU0pEdFNiUnVUTWZHNWM0Z1pONEpjSWJ1ejZLUmZvcklTak11NGp3cmhFVzhFc0ozT1BnelUwaGZtdC9ZYUZsYk42YzJmejZTOTQ5eWtCWVZKZlNWV2JKb3g0bmtFem1JL3o4ODg5OFlCRnQxUGUrL3g1aGJkckFUYVd5VDJMNGNId2FGdmFJeE9aTkNQVUVpc2hWZHVuZVpNdHYrL3EyQ041WnFVUkhMeStzT25RSWs4NmQ0Mk1ybG1mZ0h3cy93Wkg4T255eVBSOXVMa3FlbWtpa0VoNmhueUJBQTJzWmlSZGZmRkU0Y2VKRVU4U2w4RDFuMjdiV1NjVEVQQ0lSbjRqNTgrY2pUSFNWREh4R1FnSnV0QUorN2RHam1IUGxDaC9MeWx5RzFQVHBPRjVZajFYN0xpRTgwQjIrSGlwS1haUmNFeklaMTRMd3VBWmdKa0Zwd3g4aThkbG5ueldCOS9aR1JtSWlCMS9YRXZqRGh5M2dWNjFZanBTMGFUaFZwTUczQi9NUUZ1QUdiemNsWEZseUtLWFVtMWEvV1ExWVZWWVdFdWRFZFRJU3M3ZHVkWWpFd280ZCtWaUNweWN5eUIwN0JENC92K2s3Szc3QzVOUjA1SlEyWU9PeHF3ajFkNE9ucXhKT2xNazZVOHJOVWpZckRUUlB3RXhpNTg2ZEgvZnQyMWU0ZE9rU0gxdGRYbzczZi9paFZSSlRpTVMzNUwyK1RFcHFBdC9NWVVCejRGZGxaV0pLNmxSY3ZLM0RscDhMOFF3RlJVOFhCWnpJOHpCeEpSSXN4a2hiMDRDNWpSa3paczhXYWoxNjlFQnVibTdUUjI3ZmRrZ1RYZWlkb3FjQXYzcFZGaWFucENHdndvRHR2MXhEQng5bkFpOG40RktMdUZEV0s1RFptd21RRm9RV0NiQVdGeGVYZmV6WXNUMHMrcDArZmRxaWlka3RhRUpQTWNNczlzQi9mZkNnQmZ5YTFTdVJQRGtGaGZjTTJIWDZPdHI3dXNEZFZjRUxJR3R4VXNrNVRIc2FzRnVSVWNaM2tZTEd5QUVEQnVETW1UUG8zNzgvVnBNbUpLU0pMNW1OVTdHaE1abGFUYWRWOU1GbktLOWZUVG5QdklJQ1ByWmgzUVlrVGt6a3gyK1hDcVdJQ0FyaGgzRUdrNDVxQVNPdmt4VXlKNm80bmVIdVpFQWJWemxWZFZwK0FPQXdBVmRYVjBzL0tpcUttMU12c3ZGVnBJbUhLMWRpQVlFcXA2alkwaGtnQzRWQjlNRlA5SHA4VExrUGE1czNia1pjUWh5V0h2MGNIKzljaVFuUk14SGVOZ0srYnUzaDc5RVIvdTRTMUJEVzY1WDVLS25NeGE5RmgrRWttNHBneWxnRnFlQTRBWE9ycjYrbnd0dU5KMVBMbGkzRDlPblRzWm5zM0o5a1FDdW5Ub3pBZjBnK0Z2OU9KTmZLd045dXZJMVpzK2NDRkRLV0haNEdsdTdZbk1DWW1rb3R1UTkxM1lHT040TVJFOVdIbjNJOHZnZGFKY0RBczNieDRrVU9ualdXZXJITXBkUlNCTm9uRUVueUhna3Jvelp1M0lqWTRiR0lUNHJIemwwN2tiQXFBZjRTZi9JMExqUVBiVlNURkFiNjUrSHRBYTgybmhTRlBhRVFKRkFaWlRZSGFRNFJVS3ZWbHY2cFU2ZndQQlVnRUk4RlBpQXBjZURnMGloVzRBbmlhZTIvV0g5OEF2UTZQU2E4T3dFL1Rmc0owN1pPUXdqbC9xNWs3eWIyajFiRVErR0dOclQ4ek1QYzAxWkNhMnF3UzhEdTZUVGxScjNaOWVUSms4MkMxemg0TnNjK1hVWXlsdVI5Y1d4aThrU3NXYmtHZ3dNRzQvT1JpM0d6N0NZMGRUcklHMVZRR0pSUWE3UW9xUzBobDN3VFJUWEZDUEJRUFowR2R1ellFVTI1VWN6NTgrY3hjT0JBaDhCYm40ZnJXeUFCVVJQSnFja1FxT1pOVGt2R1gwWStRUEsva3hIdUcwWXUydDIybUs4cmh5WlFhMDJnNVQyd2I5KyswU05HakJqTDBvbkl5TWltNEViQ0RvaUs3WUIzRWMvLzlwQ01JaWxubS8veFlFZHlpeFZDVmlRbXAwL21oOElwMDFJZ2pCZVF0Q1lKNFg3aGNMY2lvV25Vd0toL1ZNT3dXR0NYQVBuOUtTd2RKNXVYbU0zR0RMNlVYbXdrMXlvM0Z4UXNzRkNGcE5KcUVVZ3hnWjJKcnlNNVJzSU9OTXVjbmFHaDV3V0swb0lZTDVpenVVUDUwZXZrVnRrc1g1Q2tUay9sUlFxL1RoS1F1Q29SbmYwN1cwZ0lCbkxWZ3I1MUU2SkpVbGc2ZnVqUUljbXdZY01zNEJld2plamhBWG03ZHBCUmxPV25ZUlJRWkFRUWxaWHdwZnAycFFpZTd4bVNXUXdjRVN0M2NvSWtOQlJHNnB2b1hWNlEwTHZWbEhhTUVlTUNJNUgyWGhyWHhOU1pVMGt0bEpwbmptc2k0ZVRPVjk5Z010amRZMUlSZkNvRGYrREFBUXY0MTVncVNPNVR6YXFpWWxwSktZVFN4d2ZPQVFGd3BjeFRUbDdLdTZJQ3ExaGFJRTYyY09IQ0pnY2drbWhIUUdWVlZYQ2o1NTFwQWRqN1NrcTFuYWplVmxORk4xcDhqclZwczZaaDJSZGZJUzRpRHB0U042R3dyQkMxOWJXdEVpQ0xFTktZMXZmdjN5K0pvWXlTTlRieFhHYkg5Q0UzaXI0R0FpdlFDakdUVVZKTzAwQXh3YTJvQ0t2cG1iWGlSRC90K1FtdnhMNkNLZTlNUWR2QXRqaE9ZNnd3L0p6U2oxclNoUHNMTDZDUkNKbklwRmh1TDZPRk1OQmNveWhOWWViRURpL2ZlMzg2YWNLQW1YTm53ampWaVBGTHgwT2lrclNxZ2N6VnExZGJ3TDlMOGpkbWF5Ky9ETy9ZV01ncFpXQ3I3eHdZQ0E4aVpDZ3Vob0s4MHhvcjhBZjJIT0RnOTEzYkI3OTJmcWk2WGNYSGo0dXUwNFBJNm5KeTRObXRHMXlDZ3JnVzVMUS9QR2lmdVk0ZGk3ZVk5c1M1WnMyYmhUa3o1aUNwVHhKK25Qa2poQnFoZFJNeW4waEFQSlptVzg2VGtqZG5aajVVR3JyUTFZdFM1Y2JMbHlFY1A4NkJtOEh2M2JVWHcyS0hJV1Y5Q21KSHhhTC93djd3Q2ZUQnJadTMrUDBUb2phZHFMNVFIenNHcjRnSXVBUUg4M25aL0Y3OSt2SG5lbG1CV3JlaGFVZjFET3BKdTU0Y1NIVnBpd1RXSGpseUJGT21UT0VEdElld20vMWd1MmdScEpUdnRDRlg2azJpenM2R2RzOGV2bG0vRVYvZVJpVm56S3N4K0NiN0cvNlJTZk1tSWNBekFJc09MRUpRU0JDdVhidG1JY0gyazRRaWV1MnVYWHcrYndLdWxNdHhjOEVDNUlycENUL3dwZXkzcXJvS1pkb3lwR3hNUWR6YmNjZ2NsOW5pTHpEc0tIMk53SFp5YXFwNG1nL2hyeVFIU1NxMmJoVUtQdnhRT0VMOXQ4VjdUTFp2M3k0NDBvcUtpaXp2RENiNWhTUjN3Z1NoK3RneFlULzFNNjNtSEJBZGJYY2VTai80VmF2Vm5oSDMvaXpMR1pGSTRtdjJRRnA2dW1YQ3Y1Q2NJcUdTUnBobzlhRzllL2NLVDlOdTNicGxlWGNReVZtU2s0K0JIemhva0tQVDJSQ1FtOE16TldZOVF1Ynk1Y2xLcXFDK1hMb1VIN0Y4bnVTNmVQN0lUOHZJM0tqWVlkMnI1TGxLMkM4cFZzRkZzUDV0VFU4QmE5Q2dRZjVCUVVHOXE2dXJKVDdrUm4rbGUvOGtTUmVGdFNGRGhvQXFRTmE5ZS9qdzRmTUtoY0wwUk5JbWxRb3NNNmFzK0U0enZ5OCswa1JkWGQwT2QzZjMwZlBtejhkaThaakUzQ2pJNFdYeVRpZE9uTmhKdWRJSlIzOXNYYng0Y2E4NWMrYU1yNnFxa3ZyNStkbmNHMHFMY1pRV2hkb1ZBcjFPVEdJZGF1ejNnZVorb2VtVGs1UHpSYjkrL1liTW5qMGJTNVlzNFlPN3FTUWNPWElrTWpJeXZwc3hZOGJCcC8zRk9DRWhJWkxxZ2JUaTRtSnBLRVZuMWw2ZzJIQ2N2RnBOVGMxNWIyL3ZUREhid0ZNUVdOZlN4bDdCN0lyaWc1Q1ZsV1cydjVsLzVIOXkwUHR2c3YyWW5aMHRoSVNFbU9mOGtVVDVPK2RyMVR0bFdXMmVQd1RlYXQ2eEpJWS9DdDVNNEw4Q0RBRGQ1bjlTTDBsTk13QUFBQUJKUlU1RXJrSmdnZz09JywKICAgICAgICAgICAgYnJva2VuSW1nX3NtYWxsOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJZQUFBQVdDQVlBQUFERXRHdzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZOVVpGTWpVMk9VTTBRakk0TVRGRk1rSkRNa1U0UlVSRU1qZzNPRVZDTWpJaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk5VWkZNalUyT1VRMFFqSTRNVEZGTWtKRE1rVTRSVVJFTWpnM09FVkNNaklpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvMVJrVXlOVFk1UVRSQ01qZ3hNVVV5UWtNeVJUaEZSRVF5T0RjNFJVSXlNaUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG8xUmtVeU5UWTVRalJDTWpneE1VVXlRa015UlRoRlJFUXlPRGM0UlVJeU1pSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QdXFWQm5JQUFBVHBTVVJCVkhqYXJGVjlUTlJsSFAvODd2MDR6dU1FaERzUUVBVGl0aE5FalJjbklxU0hwcnhvMDlWVUVDM3pqNXpOTEcyMTFscHVEVnR6T1d2V3JPWmNtNnRwQmt2STBIYUtwRmx3SmNJaGQ4RHhLbDJIeDh1OWNmZjAvUjFZSHFOV1c4LzIrVDNQOC8wOXorZjdmYjdQNS92N2NmaXI3U2NJOGQrYW4xQkg2SHJVeUJnTFdiU2ZERTZDNzkvQTU1cVlHdXpyZnFCVWhyOUplMU5uRTR0bVJTQjJlOXlpV3gyL1F5RVhnM2ZzOW5qaDkvdmg4VTczWHA4UHpCL0F1TXVMTFlYcDg2d1d5NUc0K0lWQ2o4ZHpodlozUENTYVRjejllTStCZ3VjL1I0UmFCbFc0RlBQa0VpZ1YwdUJZTEJEQTRackNLbjBjUHFxN2czQ0ZFbVdyMDhWV3EvVVZuVTRuR2gwZC9ZdzQ3b1lRYTdUYVdMZmJKVm1pNGJDK1NJL3lYQzNVQ2pFQ0ZIWWd3Q2pTQVB3Q0Nhb01xYWkvY0JZdm5hdUdaOXd6dlZlakVmWDIyZzVtTDgwVTNPdXk4T1IzdUptYzZGdk41dWFzOVBRd2ZtNGJHY1lYelpQb3RQUkJLdUl3UlVmM1FZSWp1M093L1luSFlieHhDM2s1eTFIYmRBdGZYMnpDQThkdjBFWXBrTFJBUHJZaWQrVWJ4UGVlZ0I1WnphMnQxM2pTN3cwRzFCY1dZbUYwRE1xeU9Nam5SOEUwTUk0T3V4OEhLM093clNnYnN2Wk9ERlpWUVdtK2h3MzV5NUcxS2g5bjIrUzQwakVCajN0UyttZFNqVWFqa3crNnlXQmc3YnQyc1Y4cUs5bkZ3a0plTDZ6VGFtWTFEWFkyT01YWTBzd01abENyMk4wZE81aHA1MDVtcTY1bTY2Uml0bnFaanBsSEdEdCt3VVF4TWpmdGU1RlhoU0FqSStNbTcrQ2kyY3puQks2cEtTUWxKS0N1YUExU0Y2Vmg3YUlSRk9uVEVOODNoT09ieWpBZUNBVHozbi8vUGhvOFByejI5bEZjYWhtRVRCS3FBa0ZrWk9TVDVLSCtuZjUrbkxoOEdVcVJDRzZTVlh6OFFsd3FMa1pXNm1OSWQ0eWhabU1weHNnZVZBYVI1dGJXNHFxeEVZNll0YkFPT0tCUmhZVVNjeHpIWDIycHJhK3Y3UnhGVTFOZkh5VDNFb2ttTGc3R2lnb2NMU25CR0oxRVFxVDI0V0dzb1RYR3BtdndMbGlKL3Y0aHhLbkZrTXJFSWNSQnVSRzVsN3FQS2ZLYWlNaElvYit4RWErdVh3OG54MEVpazJHTVhzb2tFdGdIQmxEYzBJQzJ0aTVJWXBKaDZ3ZXlFNUxoOWpKRWhydURBcHVyUVBpNjk0M2E3VUp5Qk0ycFU4aVlNZkpOUWRoR2VPdjlEM0JkL0IyZVBaZ0NtV0Q2NnlKVkNsR2N2aDFmcG4yS3VZajVzMGhFS2hYS2FWQkE0T1VTZUdUaEo0UmRMK3pEalJzbW5EejhJYTZhR2lFWGhrRXVrRk94K0VOelBGTWdZWU1PeDc2d3FDaEJ1ZE9KM1dRYko4Z0pmQnJtelRoUUVVNFQ4dktXWUhHM0RvczFhYmhwL1FIWHU0eXdUdzZGRWhNcGY4cHZOV3AxeWlhN0hjK0ZoNE9MajBlRVZodjhvdXpsaGNtVHl1V1FrUXhqWTJPRGthOHJLVUN1ZlRVcXNyZkE0WHlBQ2M5RUtIRlBUODhWeW1sK05VME81ZWREUlFxSXpjekVUM1JSTC9NUmsyWjFaVnV4MStXQ2dsUVJYVkFBL2ViTitFb29SR241V2l6clhvcXQyVnN4NGh3SkpSNGFHa3JrQjNwQ0FrbExxOWZqbTdvNkhLYjVyellMVnJ5cnc3WmpUeUc1WkFNMmQzZUQyV3hJMnJnUktUazVVUE9wT1VPWEhKZUJ0T2kwMEFxaFZDUzM5L1FNOHNQamhHUFRrbUZ6dGFlcGxLUG9YYk5HdytaVC8weFYxZXdscm9jbExhSTBXR2lRWitycy9IbEphbW9FNzR6SzFwR1FtSGpDMXR2cmVEUUlzOFZpa0loRWh0elRwMUc5WncvMkh6aFFTL3NiLy9IblpUS1pVbHBhV25xb3Q5eStmVHVKVE5LNTRISzVYajkvL2p5Ym5Kdzg5SGRyK0lpNTJUKysvNnY5SWNBQUNIeGpHckNaSnFzQUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgIH07CgogICAgICAgIC8v5YiG5LqrYXBp77yb5pyJ6ZyA5rGC55qE54Wn552A5re75YqgCiAgICAgICAgLy9hcGnpobnvvIzor7fov5Tlm57nu5nkuIDkuKp7dXJsOnVybCx3U2l6ZTp7dzosaDp9fe+8jOiEmuacrOS8muiHquWKqOiwg+eUqHdpbmRvdy5vcGVu5omT5byA77yM5aaC5p6c5LiN6L+U5Zue5Lu75L2V55qE6K+d77yM6ISa5pys5bCG5LiN5YGa5Lu75L2V5YW25LuW5LqL5oOF44CCCiAgICAgICAgLy9hcGnnmoTlj4LmlbAKICAgICAgICAvKnsKICAgIHRpdGxlCiAgICBwaWMKICAgIHVybAp9ICovCiAgICAgICAgcHJlZnMuc2hhcmU9ewogICAgICAgICAgICB3ZWlibzp7CiAgICAgICAgICAgICAgICBkaXNhYmxlZDpmYWxzZSwKICAgICAgICAgICAgICAgIG5hbWU6J+aWsOa1quW+ruWNmicsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQ1hCSVdYTUFBQXNTQUFBTEVnSFMzWDc4QUFBQ2ZrbEVRVlE0amEyU1QyaVRCeGpHZisrWHIwdmEycXF0MDJudEVreG8wMjVEcVVwamRlQU9kajBZeElQZ3hZT0tlUEhtd2FnNzdiREwwSWxNS2dvZWVxZ0lRcmFwU090RnBGT2M0R1diMW4ra05xTFdLTnFtU1pzMDMvZnM0Q3BsWGpiY2Mzb1A3L3ZqZlovM2dRK1UvZHZHWjBmNVBPalNCZVNHbjNPbDZ6c20veE5nNGdRL1NHd3lZNW1FQit5Y3Y0K0w3d0YrV2g0T3JnNVZid2ZXQXBlYUh3NWZCcmh4Q09lekpycUF4OEF1SUZXdTBPbk9IUjZKdG40Vk1Ec2pLV3htSnFrSGlBRlVubFEzYWNuMGNRSmFBV3cyWTAxVmdQM3ZOc2pHNHJ1Qms4QmM2Si9BTWVCckhDMTBHa3FuYXJkbUk4NDhieVh3SzdEWEJSaU50bTREVGtreU0wTi9GNUxhemV5MEpKbHY1dVdDaTd5WHdaVFZGa3RtTEpDWXROdVJXUGhqMS8wZHFMTjV0ZFFrTnhQczdDVHd5UkkwTlVYNXpoMks1OU5VTWhtQWEwN2pkTExwNXNqRWkyT3MrY2lsM3JLeCtHbEp1MFBydTZ6aHlQZkt1d0hyNys5WExwZXpaREtwam80TzA4eU1YaC82eGdycG4yVm1yM3hwUy9qUnZldXp0Nzk4dW1HanZFSkJZMk5qaWtRaUF1UTRqbHpYMWREUWtDVEp5MDhxMi9hRnNyRzRzckg0MVZtVEhLQXV1SDZkbkpvYSt2cjYxTnpjVEc5dnIzcDZlcWhVS2hvWUdIanJTU2lJVlZVSlFGSjVMbUJnNXU2d3lmZHBiR3kwUkNKQlBCNjN3Y0ZCSE1leDd1NXV6TXdLWjgraFl0RUFYM0RrM1o5K2kwU2JScU90OTE0ZFBLenltM0UvbFVxcHBhWEZUeVFTU3FmVHZsY29hdno0ajM2MnBWMmowZFpTTmhiZk16YzdCbkJoZWJodVZhajZnTlhYN3dsOXVXR3hHLzRVZko5S1pvVHA2emRRUGw4Q2ZzbDczcmZ0bVFkL3ZBZVkxZEhGU3dNcmc2RlZEWUZBRzFBTFZNcFM1bjY1ZEd2SHN5ZjVmOGIrZjlGZmtzQVRFRjVMRFpnQUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICAgICAgYXBpOmZ1bmN0aW9uKGFyZ3MpewogICAgICAgICAgICAgICAgICAgIHZhciB1cmw9J2h0dHA6Ly9zZXJ2aWNlLndlaWJvLmNvbS9zaGFyZS9zaGFyZS5waHA/JysKICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlPScrYXJncy50aXRsZSsKICAgICAgICAgICAgICAgICAgICAgICAgJyZ1cmw9JythcmdzLnVybCsKICAgICAgICAgICAgICAgICAgICAgICAgJyZwaWM9JythcmdzLnBpYzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6dXJsLAogICAgICAgICAgICAgICAgICAgICAgICB3U2l6ZTp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOjUwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6NjIwLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB0OnsKICAgICAgICAgICAgICAgIG5hbWU6J+iFvuiur+W+ruWNmicsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQ1hCSVdYTUFBQXNTQUFBTEVnSFMzWDc4QUFBREwwbEVRVlE0alhXVFMyaGNWUUNHdjNQdXVmZk9USkp4RXNsa05FbFJtNWhvUlpPS2p5S0tTRVd3cU5XRldMc1FxUmJjMVVmVkxMb1JYYmdxaUNoMElZb1BhQ25XV3FsUU42bXBJUFhSYXFrazlaR09KUytTbVF6alpPN2ozSE9PaTRqRmhSLzhtMy81LzN4QytINFlQTGh6WC8vOWorenE2UzFYZkNsQkFJNy84aytucldWMWFYRnVidkxMVDVKakgreFR3VU5QdmJIeDhXZGVmUGFXNitqMFBTd09iUnlac1docjBOYVJPa2RxSVRhT3lCaFdLMzM5WWJsLzcrOGd4WWEzUGx0OVlldVcwb201T2xGbWNjNHlXQWpZTmRMSDdiMWQ1RDFKdFpWd3RGcmpTTFdPRUFJcEJUNkNYeTc4V2xlRnJ1NlNkTkJvcFRnYzJ3YTdlV2xzZ0ttRkptLytlSW1sZHNxTlBRVjJESlc1dTYvSXhMZXp0QkpMSWlBZjVQTEtHRXNyMWNSeHdtaDNnWW5OZzd4MmVwYlBaMnYvVG5GNm9jSEI2VVgyM3pQTXhQZ0F6MC85aGhDQ3pEb2hFMjFvUnBwMm9ubjZoZ3BmVmVzY25GNGtTelE3aDh1OE9qN0FwbEtlMmxyQzNza1o3cWhjd1dCZTBZNVNra3hJcWJXaEVTVkVVY0xtM2lLSHArZUo0cFFuUi9yWU16N0lZME5sM3JsdmxOQlpMamJXK0c2aHdkaVZuVVJ4U3BabFFxYmEwbWdseExHbUsvQllhRVRFN1pUaFlvaXg2dzkyK0I3bFVCSEhtbm83eFhPT09OYm9EQ25yYXluenpUWXJyWWlaV290cmlqbWFVY0p3VHhlcE1YaFNNdlZublpOL0xMUFNqTmhZS2pDOS9CZTFWa1E5MWtJNTYxaHRKeGpqK1BqblN4aHJlUDNlVVU1V1Yzamd3eG42aTNsK21HK0FFRHg4ZllXcnUzSWNuMW5BR0FmT0NpVTh3Wm8yZUw3aTdlOHYwdGNSOE1wZEk0d2RtS1NWR1phWFczaSt4NDVOQTd5NzdXWjJmL0VUTGV2d2xNUTRuQklDSXVOUXlrTTd4NTQ3aHpod3RvcTJqbysyMzRvbjRiYXJTaFJEbitlT24rUFRDMHNvWHdIZzB0UXBxUVNwQkJVb3NKYXQxL2J5eExHemRIYUduS2l1VUF3Vjc1K2Y0OHhTazJacVVEbC9YUTBIUmlkV1NhdmJUbm9GUC9ESWVkQ1Q5Nm11cGVBcGpzeldMb3NsUFB5Y2Qxa3k1NUJ0azBoMzd0UWhiVE55b1dKRHFZT2x0cWF6RUZESSsrVHlBVUhvRStaOHdsQVJCb293VkhpK3hEaURPLy9OWVlFZjVQeEhkKytYTjIzWkxycEtGWndESWRielA3aG1iYzZjK2ZwUWR2UzlsLzhHRWZPRlhWdjdBRVFBQUFBQVNVVk9SSzVDWUlJPScsCiAgICAgICAgICAgICAgICBhcGk6ZnVuY3Rpb24oYXJncyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybD0naHR0cDovL3YudC5xcS5jb20vc2hhcmUvc2hhcmUucGhwPycrCiAgICAgICAgICAgICAgICAgICAgICAgICd0aXRsZT0nK2FyZ3MudGl0bGUrCiAgICAgICAgICAgICAgICAgICAgICAgICcmdXJsPScrYXJncy51cmwrCiAgICAgICAgICAgICAgICAgICAgICAgICcmcGljPScrYXJncy5waWM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgd1NpemU6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDo1MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OjYyMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcVpvbmU6ewogICAgICAgICAgICAgICAgbmFtZTonUVHnqbrpl7QnLAogICAgICAgICAgICAgICAgaWNvbjonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUNYQklXWE1BQUFzU0FBQUxFZ0hTM1g3OEFBQUNEMGxFUVZRNGpiV1F2V3NUY1J5SG43dmY1YlZKMmthU3BsWFFLTDVRVVVQekJ6aFVYQlFjRlJ3NkNBRkJwem9vRktSUWtDSUJ4YTNTb1NDb09IWElJblFTRkJFTFJTaEMxYjdRMXFUQk5KZExUTzV5ZHo4SDI5QmdEVGo0MmI3d2ZSNCtmT0IveHNqRnMwWXVudTMwbzNTQW84RHF6bms0ZkdtcnROK2Yya0YrUzBUQ0lSRUpoNENiLzlUQXlNVUR3S3JuWUNJR2t1WkdvYmpUb3Q1Um9NL0d6Z0F4NEtyV0hjcDQrazhqclhYc0h6cTJYcDBDWGdMRjdpdkZUeTFCNGRXQXF5QWRRRVA5N1ZOVWxlajV4empsSExJMkQwQjFwWVMwYmFRRVhCZWdBYXdweGVjSGtzQmM4T1NGcExmdkxHcmdGTFZuVDdFV1BsQ3RPVmlXeEdwSWprOGViVFUxdDNUTXJjb3lNS3dBNUdlaUNXRE9uNGdNQmdaNkFCRHg2NkNxZkI0WmI0UHJtMlVhK2NvaU1Kd1lLZVZiRzZ4UDlVU0IxOEdCN3ZTdTVPdllNc2Nta20zd3owMzlJM0R4VUtaYyttUEVsU2VSaE9vUjMvc3VUN0tVdVlQWHIrRHpLWFFGQlNJVnd2QlVjSnRPLzVIYmxmd3VvKzBWMkthYjFJUUhNLytHRXpPekFMaG1FZG5jcHI3MENQZExGZHRzSm9HL0NXUktCQVgxdGZmVXZyM0YzSzRCNE92dFF0VUVFb0Z0eWhUd2JuK0I1YWE5cnNCWUs5UFlOcXJBUThDcGJ1cDMvYjNoa0tvSmJNdE43MlhhQkk3bHBveU5rZ05NQS9mUFBURHpBQXYzZk5PMWdqNE8zQUJTZTVuV2lQT2pYaS93QWhnYnlscUw3SlA1VWU4Z01BRmNHOHBhRnNBdmV0blRHQ2wyWW4wQUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICAgICAgYXBpOmZ1bmN0aW9uKGFyZ3MpewogICAgICAgICAgICAgICAgICAgIHZhciB1cmw9J2h0dHA6Ly9zbnMucXpvbmUucXEuY29tL2NnaS1iaW4vcXpzaGFyZS9jZ2lfcXpzaGFyZV9vbmVrZXk/JysKICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlPScrYXJncy50aXRsZSsKICAgICAgICAgICAgICAgICAgICAgICAgJyZwaWNzPScrYXJncy5waWMrCiAgICAgICAgICAgICAgICAgICAgICAgICcmdXJsPScrYXJncy51cmw7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgd1NpemU6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDo2NTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OjYyMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFuZm91OnsKICAgICAgICAgICAgICAgIG5hbWU6J+mlreWQpicsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQ1hCSVdYTUFBQXNTQUFBTEVnSFMzWDc4QUFBQmIwbEVRVlE0amFXVFh5NERVUlRHZjlPT0NrbGpUQk5DaUVrc2dCM29FbGlCTG1GMm9IWXdWbUM2QXV5ZzNwc1lQSkdJSXFtMGFYVmtwSTNTSEEvSG1ES3RCNzdrNXB4N2MrNTMvaHZybHlMZElYL0NmQmJNMWp0RW53UytBMzRIcWxIYTJNcENNYThId0gyQU53Rnp5a2dNZGd2SjU4MVo4RmJBTW1GajVqdFpwYU55eWdERERrU2UzcUZVZ0VNbjdibnlHVkY5QUVFUHdwRjBiUlBNK09JdXFqeU5ZQ3NQejBPWXkwNU9LV0VKUklwWElpSWlYbE9rZEt1NjM1YUpLRGRFcUluWWdVZ216ci9TZ2MwWlRlVTBVczh4N2dhdy82am5KeklBeHlHVTZocDY5UVdLMTRuQmVWOWx1UUZlVS9XZzk0UGdOL2h0V011Qms0TnQ2dzhFWGtzTFdsN1dRcC8zdFNNeHpIR2ZTb1hFVzB5eXQ2VDZ6czEzMnhTQnU2RHRBemdKVmRaZkowYzROb1dEbHNwcUJONnFEdGhKcU9FZnJldmJGK3hBZTBwTlo4QzVTTTlBM0hmclRPUzRxMi91dmM2QmtUOFRpY1pzbzVNRFoxckRIeTBhYUgycUVRd0I0Ny9yL0FFdXE5L2xSWlV5c0FBQUFBQkpSVTVFcmtKZ2dnPT0nLAogICAgICAgICAgICAgICAgYXBpOmZ1bmN0aW9uKGFyZ3MpewogICAgICAgICAgICAgICAgICAgIHZhciB1cmw9J2h0dHA6Ly9mYW5mb3UuY29tL3NoYXJlci9pbWFnZT8nKwogICAgICAgICAgICAgICAgICAgICAgICAndT0nK2FyZ3MudXJsKwogICAgICAgICAgICAgICAgICAgICAgICAnJnQ9JythcmdzLnRpdGxlKwogICAgICAgICAgICAgICAgICAgICAgICAnJmltZ19zcmM9JythcmdzLnBpYzsKICAgICAgICAgICAgICAgICAgICByZXR1cm57CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDp1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIHdTaXplOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6NTUwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdzo2NTAsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRpZWJhOnsKICAgICAgICAgICAgICAgIG5hbWU6J+eZvuW6pui0tOWQpycsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQ1hCSVdYTUFBQXNTQUFBTEVnSFMzWDc4QUFBQjZFbEVRVlE0amFXVHkyc1RVUlRHZnpPZFNiRk5wUVJiWDFEall5UEZsWXl1b2d0RkVjRnRCU2xkRmhjMUlNRkZRWXBkK0NqWWhXNFVYQWtpUlBTUFVFRXFpTkttUGhLU1NVSWJ6WU0wYlJhWlYzSmNoTVJFNDZiOU52ZHd6ejAvUHU1M3J4SXlUR0VIMGdEZWZneHVhL2pNcVRScXIwWWlibk52dmtoc3hRTEFURG1ZS2FjbnBDZmcyWk5OWGo2djh2QitHVFBsTUhVMVIvaDZ2aWVrQzFEWnFMZnI0VUN6VlNvMjl4eFgybldudEZhUnpiak16UmJ4KzFVZVA5M0g0a0tKaTVlR0dEL1JUemdTb1BQYzJDSDlEeUZrbUNJaUVuMVJrV01IRWhJeVRJa3RXeUlpVXF2VnBhVlUwcGJKaVRXWm5GaVRUTm9SRVpHUVlVcmJRZkNvai8wSE5mYU9hbVRTTGdPRENvc1B5dlRwRUw0WjRIVzB5cmVZUTJXalR2NlgxM2JSQmhpbmR4R09CQ2prUFk2UCs1aVp6cE9NMitpNlNybFU1ODdkRVpiZTF5Q29zMmVrNzk4N0FMaDh4Yy9Qbk1ldEd3VitmTFVCc0t3R0g5N1ZtSTBVV0hnMFNqYnRjdmlJcjNjS3lZVEx6SFNlTDUrYitYc2VhRnB6WFYxeG1MOWRZaXlvZDQ1MEE5NUV0MWhkdHZHOHY2TFNvTHJWNE5PU1JUYnQ5bzRSUU5QQnRob29xb0xqZ0RRRUcxQlVCWUJhclVGdTNmcy80TnJVTUxuMU92SHZEcnVIVk02ZUgyZzZlMVdsdXRuZ3BOSFB1UXVEM2ZaYTcyQTdDaG1tS0R2OXpyOEJySHNjTmZHUjNiUUFBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgICAgIGFwaTpmdW5jdGlvbihhcmdzKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHA6Ly90aWViYS5iYWlkdS5jb20vZi9jb21taXQvc2hhcmUvb3BlblNoYXJlQXBpPycrCiAgICAgICAgICAgICAgICAgICAgICAgICd0aXRsZT0nK2FyZ3MudGl0bGUrCiAgICAgICAgICAgICAgICAgICAgICAgICcmdXJsPScrYXJncy51cmwrCiAgICAgICAgICAgICAgICAgICAgICAgICcmcGljPScrYXJncy5waWM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgd1NpemU6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDo2MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OjYzMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVucmVuOnsKICAgICAgICAgICAgICAgIG5hbWU6J+S6uuS6uue9kScsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQ1hCSVdYTUFBQXNTQUFBTEVnSFMzWDc4QUFBQzEwbEVRVlE0alhXVFRXaFVWeFRIZi9NK25TVGpUQ2F4K2RBa3hrNWxHbzJ0dE1VR0JKdDBGRUZVc0phMGkwSlhRcEZ1N0tMRmdJc0tVZ3BkbFJZTUZBcFpLdFJOcllrTEtZVUtGaVdRdGdxMW5VQW1rR2dNaVpONU0rKzllKy9wSXZVUkl2M0RXZHh6N3Y5M3VQZHdVbXlTbmRrNTZPMDRlc2JKRlllYzNFdXZpWTRqWFoyZFVVK21iemJtZmhxWCttSjVzMmRkS2N2MmQ0Mk81WTVjQy8zUFoyVDhWa1ZFUk1KWXkvaXRpbXk1TUMzWncxZXEzbzZqWnpiYUhJQ1U3YVZiWHI4NHBZZmZQdmkwMklaWjFaaG1Hd0RQc1RETk5vMzJEUEhwL1MzKzN4Y3ZPemRmUFJ4TWYva2VZclFGa0I0NCs2MTZhK1JnVUdqRFBBcGh2a1psTlU2NlZGWmptRjlEVnpWQmNSdVUzam50N3hvZEE3RHNYSEhJM24veXczcDNIdVlDV0lvZ1VEU1VTUUFOWmFDbTRIRUljd0dOcml6cEYwZkhyUFMyWHNmdk9mWlIyTDBWbGdLb0t4REFHQ0lqQ1NBeUFzYUEwbEExR0dNSVgrN3kzSWNqSDFoTzI3NFJaYmxRMDZBQURTaWhWTWdtZ0ZJaEMwcVNHbFZGN1B1NEw3eHh6TEw4MWs0VEdWQUdqSUFST3RzZGp1OXVUUURIZDdmUzJlNGtkWlJCYTdDYnV3cFd5blpzUWdYYXJFZW9LUjNJUHpmbDBvRThoSHJEUFFXQXBZUEg4MWFvL2lNTGZkdGRKazcwUFFlWU9ORkgzM1ozL1FsR3NCc3hPbGdzVzNwNTVtZW5Gb0lTZXJvOTdwd2JTRXpucjg5eS92cHNjcjV6Ym9DZWJnK1U0SzQxaUIvOTlpTjJyamlVT1RrcGcxL2ZsNFZhSk0rMFVJMGtmMnBTOHFjbVphRzZJVitMWk05WHYwdnV5TFV3bGU3b3QvVEtnOXY2bjZtSmZXRkVSNU9iZEJ1K2RJL2xNTVZ5bUdMNDByMGszOUhrc2plT2FaU3ZmQ0gxeGJJTm9KN2N2VkZlNlQzMDYveVczajM5R2Q3ODlEWVBINnhCdGdsOGg2WHlVNzcvcGNJck96T2MvZVlQcG42NGVyWCs1K1dQUVNTVm9GT1c3ZmUvKzFtNjhQNkZ1dVY1cWlXTlRuc0EyRUdFVzZ2ajY5cGEvZjUzbjBTVkcrT0piZk52UDF0bk43LzNrTDIxZnhCQXJmeDE5Ly9XK1Y5b1JteTd5aStaN2dBQUFBQkpSVTVFcmtKZ2dnPT0nLAogICAgICAgICAgICAgICAgYXBpOmZ1bmN0aW9uKGFyZ3MpewogICAgICAgICAgICAgICAgICAgIHZhciB1cmw9J2h0dHA6Ly93aWRnZXQucmVucmVuLmNvbS9kaWFsb2cvc2hhcmU/JysKICAgICAgICAgICAgICAgICAgICAgICAgJ2xpbms9JythcmdzLnVybCsKICAgICAgICAgICAgICAgICAgICAgICAgJyZ0aXRsZT0nK2FyZ3MudGl0bGUrCiAgICAgICAgICAgICAgICAgICAgICAgICcmcGljPScrYXJncy5waWM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgd1NpemU6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDo2MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OjY1MCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZG91YmFuOnsKICAgICAgICAgICAgICAgIG5hbWU6J+ixhueToycsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQ1hCSVdYTUFBQXNTQUFBTEVnSFMzWDc4QUFBQmowbEVRVlE0aloyVHpTdUVVUlRHZi9lZFVUNDJYaUpGTVkybzJSQTFpb1hVS0R0c3NhRXMvQUhNemxaWlRsbE1GblkyRnN4T3pBSXhvUlRKMS9pWUtQbWVuV3k4Y3l6dWVNMUZ3bG1kVHM5NWVzNXpuNnVhSXgyeWM3M0xmNnE1c2hGRjJKWi9iYnNWdGlVMDNTTi9yZEIwanhDMnhRdHdkSjlrZkdrQ0JFQVErVjZVVXNydGoyNlRJT1NjSUJBb3J3Y0JFVEhBWU00TzcwNUFBUXE4NzREV21pQWJJNHUvdXJwdHFvdkUxYlpKNEdRY0FNNmZVblRQOUgyN0dCdWN4Vi9xdzNFY2ZXNHVnV2dEZUh4KzR1RG1HQ3lsWmViVTQzTWFmNm5QOE1nbFVGbTBYVkJNb0tJZVBKKzJBYnV3Mk1BYUJGNUx0M1ZsdFJ5TWJ2N29nZGZqY1hzalNDRi9POHZEOHdBRUpsdkl6OHRIb1hoNWZlRndkQXVBem1ndjhkTVZmYUtWb3dBZ2ZyWktLbjJKcjZTYTA0Y0xYbkcwVVZsMXFmUWw4ZVNLNFk5bGFGTXd0eDhEWUNnNG9FRVdEQVg3QVpqYlczQm5IemFFYllsc1JQOGM1Y2g2VkJqTFJua3RsYUM4cUF4RXlJajhtRVFyTzE4N1QrZ291OTg1Z3c2SENLaXZUL2lKRFpTaXFhcUJOeVNLOHJydzZhZDFBQUFBQUVsRlRrU3VRbUNDJywKICAgICAgICAgICAgICAgIGFwaTpmdW5jdGlvbihhcmdzKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsPSdodHRwOi8vc2h1by5kb3ViYW4uY29tLyUyMXNlcnZpY2Uvc2hhcmU/JysKICAgICAgICAgICAgICAgICAgICAgICAgJ2hyZWY9JythcmdzLnVybCsKICAgICAgICAgICAgICAgICAgICAgICAgJyZuYW1lPScrYXJncy50aXRsZSsKICAgICAgICAgICAgICAgICAgICAgICAgJyZpbWFnZT0nK2FyZ3MucGljOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDp1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIHdTaXplOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6MzUwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdzo2MDAsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgfTsKCiAgICAgICAgaWYgKHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGggIT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGggPSBmdW5jdGlvbihzdHIpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNsaWNlKDAsIHN0ci5sZW5ndGgpID09IHN0cjsKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldE1TdHIoZnVuYykgewogICAgICAgICAgICB2YXIgbGluZXMgPSBmdW5jLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIGxpbmVzID0gbGluZXMuc3Vic3RyaW5nKGxpbmVzLmluZGV4T2YoIi8qIikgKyAzLCBsaW5lcy5sYXN0SW5kZXhPZigiKi8iKSk7CiAgICAgICAgICAgIHJldHVybiBsaW5lczsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRvUkUob2JqLCBmbGFnKSB7CiAgICAgICAgICAgIGlmICghb2JqKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgfSBlbHNlIGlmIChmbGFnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChvYmosIGZsYWcpOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChvYmpbMF0sIG9ialsxXSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIGlmIChvYmouaW5kZXhPZignKicpICE9IC0xICYmIG9iai5pbmRleE9mKCcuKicpID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqID0gd2lsZGNhcmRUb1JlZ0V4cFN0cihvYmopOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAob2JqKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gd2lsZGNhcmRUb1JlZ0V4cFN0cih1cmxzdHIpIHsKICAgICAgICAgICAgaWYgKHVybHN0ci5zb3VyY2UpIHJldHVybiB1cmxzdHIuc291cmNlOwogICAgICAgICAgICB2YXIgcmVnID0gdXJsc3RyLnJlcGxhY2UoL1soKVxbXF17fXwrLixeJD9cXF0vZywgIlxcJCYiKS5yZXBsYWNlKC9cKisvZywgZnVuY3Rpb24oc3RyKXsKICAgICAgICAgICAgICAgIHJldHVybiBzdHIgPT09ICIqIiA/ICIuKiIgOiAiW14vXSoiOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuICJeIiArIHJlZyArICIkIjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzWFBhdGgoeHBhdGgpIHsKICAgICAgICAgICAgcmV0dXJuIHhwYXRoLnN0YXJ0c1dpdGgoJy4vJykgfHwgeHBhdGguc3RhcnRzV2l0aCgnLy8nKSB8fCB4cGF0aC5zdGFydHNXaXRoKCdpZCgnKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRNaXgoc2VsZWN0b3IsIGNvbnRleHROb2RlLCBkb2MpIHsKICAgICAgICAgICAgdmFyIHJldDsKICAgICAgICAgICAgaWYgKCFzZWxlY3RvciB8fCAhY29udGV4dE5vZGUpIHJldHVybiByZXQ7CiAgICAgICAgICAgIGRvYyA9IGRvYyB8fCBkb2N1bWVudDsKCiAgICAgICAgICAgIHZhciB0eXBlID0gdHlwZW9mIHNlbGVjdG9yOwogICAgICAgICAgICBpZiAodHlwZSA9PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgaWYgKGlzWFBhdGgoc2VsZWN0b3IpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0ID0gZ2V0RWxlbWVudEJ5WHBhdGgoc2VsZWN0b3IsIGNvbnRleHROb2RlLCBkb2MpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXQgPSBjb250ZXh0Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcmV0ID0gc2VsZWN0b3IoY29udGV4dE5vZGUsIGRvYyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxhdW5jaEZ1bGxTY3JlZW4oZWxlbWVudCkgewogICAgICAgICAgICBpZiAoZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikgewogICAgICAgICAgICAgICAgZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oRWxlbWVudC5BTExPV19LRVlCT0FSRF9JTlBVVCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNhbmNlbEZ1bGxTY3JlZW4oKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikgewogICAgICAgICAgICAgICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDmo4DmtYvnvKnmlL4KICAgICAgICBmdW5jdGlvbiBkZXRlY3Rab29tICgpewogICAgICAgICAgICB2YXIgcmF0aW8gPSAwLAogICAgICAgICAgICAgICAgc2NyZWVuID0gd2luZG93LnNjcmVlbiwKICAgICAgICAgICAgICAgIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOwoKICAgICAgICAgICAgaWYgKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAofnVhLmluZGV4T2YoJ21zaWUnKSkgewogICAgICAgICAgICAgICAgaWYgKHNjcmVlbi5kZXZpY2VYRFBJICYmIHNjcmVlbi5sb2dpY2FsWERQSSkgewogICAgICAgICAgICAgICAgICAgIHJhdGlvID0gc2NyZWVuLmRldmljZVhEUEkgLyBzY3JlZW4ubG9naWNhbFhEUEk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAod2luZG93Lm91dGVyV2lkdGggIT09IHVuZGVmaW5lZCAmJiB3aW5kb3cuaW5uZXJXaWR0aCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICByYXRpbyA9IHdpbmRvdy5vdXRlcldpZHRoIC8gd2luZG93LmlubmVyV2lkdGg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyYXRpbyl7CiAgICAgICAgICAgICAgICByYXRpbyA9IE1hdGgucm91bmQocmF0aW8gKiAxMDApOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcmF0aW87CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluS9jee9rgogICAgICAgIGZ1bmN0aW9uIGdldENvbnRlbnRDbGllbnRSZWN0KHRhcmdldCl7CiAgICAgICAgICAgIHZhciByZWN0PXRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgdmFyIGNvbXBTdHlsZT11bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpOwogICAgICAgICAgICB2YXIgcEZsb2F0PXBhcnNlRmxvYXQ7CiAgICAgICAgICAgIHZhciB0b3A9cmVjdC50b3AgKyBwRmxvYXQoY29tcFN0eWxlLnBhZGRpbmdUb3ApICsgcEZsb2F0KGNvbXBTdHlsZS5ib3JkZXJUb3BXaWR0aCk7CiAgICAgICAgICAgIHZhciByaWdodD1yZWN0LnJpZ2h0IC0gcEZsb2F0KGNvbXBTdHlsZS5wYWRkaW5nUmlnaHQpIC0gcEZsb2F0KGNvbXBTdHlsZS5ib3JkZXJSaWdodFdpZHRoKTsKICAgICAgICAgICAgdmFyIGJvdHRvbT1yZWN0LmJvdHRvbSAtIHBGbG9hdChjb21wU3R5bGUucGFkZGluZ0JvdHRvbSkgLSBwRmxvYXQoY29tcFN0eWxlLmJvcmRlckJvdHRvbVdpZHRoKTsKICAgICAgICAgICAgdmFyIGxlZnQ9cmVjdC5sZWZ0ICsgcEZsb2F0KGNvbXBTdHlsZS5wYWRkaW5nTGVmdCkgKyBwRmxvYXQoY29tcFN0eWxlLmJvcmRlckxlZnRXaWR0aCk7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB0b3A6dG9wLAogICAgICAgICAgICAgICAgcmlnaHQ6cmlnaHQsCiAgICAgICAgICAgICAgICBib3R0b206Ym90dG9tLAogICAgICAgICAgICAgICAgbGVmdDpsZWZ0LAogICAgICAgICAgICAgICAgd2lkdGg6cmlnaHQtbGVmdCwKICAgICAgICAgICAgICAgIGhlaWdodDpib3R0b20tdG9wLAogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIC8v6I635Y+W56qX5Y+j5aSn5bCPLgogICAgICAgIGZ1bmN0aW9uIGdldFdpbmRvd1NpemUoKXsKICAgICAgICAgICAgLyoKICAgICAgICAvL+WMheWQq+a7muWKqOadoQogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGg6d2luZG93LmlubmVySGVpZ2h0LAogICAgICAgICAgICB3OndpbmRvdy5pbm5lcldpZHRoLAogICAgICAgIH07CiAgICAqLwoKICAgICAgICAgICAgLy/ljrvpmaTmu5rliqjmnaHnmoTnqpflj6PlpKflsI8KICAgICAgICAgICAgdmFyIGRlPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgICAgICAgdmFyIGJvZHk9ZG9jdW1lbnQuYm9keTsKICAgICAgICAgICAgdmFyIGJhY2tDb21wYXQ9ZG9jdW1lbnQuY29tcGF0TW9kZT09J0JhY2tDb21wYXQnOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgaDpiYWNrQ29tcGF0PyBib2R5LmNsaWVudEhlaWdodCA6IGRlLmNsaWVudEhlaWdodCwKICAgICAgICAgICAgICAgIHc6YmFja0NvbXBhdD8gYm9keS5jbGllbnRXaWR0aCA6IGRlLmNsaWVudFdpZHRoLAogICAgICAgICAgICB9OwoKICAgICAgICB9OwoKICAgICAgICAvL+iOt+WPluW3sua7muWKqOeahOi3neemuwogICAgICAgIGZ1bmN0aW9uIGdldFNjcm9sbGVkKGNvbnRhaW5lcil7CiAgICAgICAgICAgIGlmKGNvbnRhaW5lcil7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHg6Y29udGFpbmVyLnNjcm9sbExlZnQsCiAgICAgICAgICAgICAgICAgICAgeTpjb250YWluZXIuc2Nyb2xsVG9wLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHg6J3Njcm9sbFgnIGluIHdpbmRvdyA/IHdpbmRvdy5zY3JvbGxYIDogKCdwYWdlWE9mZnNldCcgaW4gd2luZG93ID8gd2luZG93LnBhZ2VYT2Zmc2V0IDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0KSwKICAgICAgICAgICAgICAgIHk6J3Njcm9sbFknIGluIHdpbmRvdyA/IHdpbmRvdy5zY3JvbGxZIDogKCdwYWdlWU9mZnNldCcgaW4gd2luZG93ID8gd2luZG93LnBhZ2VZT2Zmc2V0IDogIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApLAogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIC8veHBhdGgg6I635Y+W5Y2V5Liq5YWD57SgCiAgICAgICAgZnVuY3Rpb24gZ2V0RWxlbWVudEJ5WHBhdGgoeHBhdGgsY29udGV4dE5vZGUsZG9jKXsKICAgICAgICAgICAgZG9jPWRvYyB8fCBkb2N1bWVudDsKICAgICAgICAgICAgY29udGV4dE5vZGU9Y29udGV4dE5vZGUgfHwgZG9jOwogICAgICAgICAgICByZXR1cm4gZG9jLmV2YWx1YXRlKHhwYXRoLGNvbnRleHROb2RlLG51bGwsOSxudWxsKS5zaW5nbGVOb2RlVmFsdWU7CiAgICAgICAgfTsKCgogICAgICAgIC8v5LqL5Lu25pSv5oyB5qOA5rWLLgogICAgICAgIGZ1bmN0aW9uIGV2ZW50U3VwcG9ydGVkKCBldmVudE5hbWUsZWxlbSApewogICAgICAgICAgICBlbGVtID0gZWxlbSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgZXZlbnROYW1lID0gIm9uIiArIGV2ZW50TmFtZTsKICAgICAgICAgICAgdmFyIGlzU3VwcG9ydGVkID0gKGV2ZW50TmFtZSBpbiBlbGVtKTsKICAgICAgICAgICAgaWYgKCFpc1N1cHBvcnRlZCl7CiAgICAgICAgICAgICAgICBpZighZWxlbS5zZXRBdHRyaWJ1dGUpey8vc2V0QXR0cmlidXRl5piv5YWD57Sg6IqC54K555qE5pa55rOVCiAgICAgICAgICAgICAgICAgICAgZWxlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgc2V0QXR0cjsKICAgICAgICAgICAgICAgIGlmKCFlbGVtLmhhc0F0dHJpYnV0ZShldmVudE5hbWUpKXsKICAgICAgICAgICAgICAgICAgICBzZXRBdHRyPXRydWU7CiAgICAgICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCAicmV0dXJuOyIpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlzU3VwcG9ydGVkID0gdHlwZW9mIGVsZW1bZXZlbnROYW1lXSA9PSAiZnVuY3Rpb24iOwogICAgICAgICAgICAgICAgaWYoc2V0QXR0cillbGVtLnJlbW92ZUF0dHJpYnV0ZShldmVudE5hbWUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gaXNTdXBwb3J0ZWQ7CiAgICAgICAgfTsKCgogICAgICAgIC8v5qOA5rWL5bGe5oCn5pSv5oyBLmRvbeWxnuaApwogICAgICAgIC8v6L+U5Zue5bim5YmN57yA55qE5Y+v5Lul55u05o6l5omn6KGM5piv5bGe5oCnCiAgICAgICAgZnVuY3Rpb24gcHJvU3VwcG9ydGVkKHByb05hbWUsZWxlbSl7CiAgICAgICAgICAgIC8v5Yik5pat56ys5LiA5Liq5a2X5q+N5piv5ZCm5aSn5YaZ77yM5aaC5p6c5piv55qE6K+d77yM5Li65p6E6YCg5Ye95pWw77yM5YmN57yA5Lmf6KaB5aSn5YaZCiAgICAgICAgICAgIHZhciBwcmVmaXg9L15bQS1aXS8udGVzdChwcm9OYW1lKT8gWycnLCdXZWJLaXQtJywnTy0nLCdNb3otJywnTVMtJ10gOiBbJycsJ3dlYmtpdC0nLCdvLScsJ21vei0nLCdtcy0nXTsKICAgICAgICAgICAgdmFyIGk9MDsKICAgICAgICAgICAgdmFyIHBfaTsKICAgICAgICAgICAgdmFyIHNQcm9OYW1lOwogICAgICAgICAgICBlbGVtID0gZWxlbSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgd2hpbGUodHlwZW9mIChwX2k9cHJlZml4W2krK10pIT0ndW5kZWZpbmVkJyl7CiAgICAgICAgICAgICAgICBzUHJvTmFtZT0ocF9pK3Byb05hbWUpLnJlcGxhY2UoLy0oW0Etel0pL2csZnVuY3Rpb24oYSxiKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHNQcm9OYW1lKTsKICAgICAgICAgICAgICAgIGlmKHNQcm9OYW1lIGluIGVsZW0pcmV0dXJuIHNQcm9OYW1lOwogICAgICAgICAgICB9OwogICAgICAgIH07CgoKICAgICAgICAvL2Nzc+WxnuaAp+aUr+aMgQogICAgICAgIC8v5bim5YmN57yA55qE6buY6K6k5Li65aSn5YaZ77yI5omA5pyJ5rWP6KeI5Zmo5pSv5oyB77yJCiAgICAgICAgLy/mr5TlpoJXZWJraXRUcmFuc2Zvcm0sTW96VHJhbnNmb3JtLE9UcmFuc2ZvbXIKICAgICAgICAvL2Nocm9tZea1j+iniOWZqOWkp+Wwj+WGmeWJjee8gOmDveihjOOAggogICAgICAgIC8vZmlyZWZveCxvcGVyYeWPquiDveWkp+WGmQogICAgICAgIC8vaWUgOSvlj6rog73lsI/lhpkKICAgICAgICBmdW5jdGlvbiBjc3NQcm9TdXBwb3J0ZWQocHJvTmFtZSxlbGVtLGNhcGl0YWxpemUpewogICAgICAgICAgICBpZihjYXBpdGFsaXplIT09ZmFsc2UpY2FwaXRhbGl6ZT10cnVlOwogICAgICAgICAgICBwcm9OYW1lPXByb05hbWUudG9Mb3dlckNhc2UoKTsKCiAgICAgICAgICAgIHZhciBwcmVmaXg9WycnLCctd2Via2l0LScsJy1vLScsJy1tb3otJywnLW1zLSddOwogICAgICAgICAgICBlbGVtPWVsZW0gfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHZhciBzdHlsZT1lbGVtLnN0eWxlOwogICAgICAgICAgICB2YXIgY2FtZWxQcm87CgogICAgICAgICAgICAvLyDkvJrmnInkuKrplJnor68gaW52YWxpZCAnaW4nIG9wZXJhbmQgc3R5bGUKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wLGlpPXByZWZpeC5sZW5ndGg7aTxpaTtpKyspewogICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdD10cnVlOwogICAgICAgICAgICAgICAgICAgIGNhbWVsUHJvPShwcmVmaXhbaV0rcHJvTmFtZSkucmVwbGFjZSgvLShbYS16XSkvZyxmdW5jdGlvbihhLGIpewogICAgICAgICAgICAgICAgICAgICAgICBiPWIudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZmlyc3QpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3Q9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighY2FwaXRhbGl6ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYj1iLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGNhbWVsUHJvKTsKICAgICAgICAgICAgICAgICAgICBpZihjYW1lbFBybyBpbiBzdHlsZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYW1lbFBybzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2goZXgpIHt9CgogICAgICAgICAgICBpZighY2FwaXRhbGl6ZSlyZXR1cm47CiAgICAgICAgICAgIHJldHVybiBjc3NQcm9TdXBwb3J0ZWQocHJvTmFtZSxlbGVtLGZhbHNlKTsKCiAgICAgICAgfTsKCiAgICAgICAgLy9jc3PlsZ7mgKflgLzmlK/mjIEKICAgICAgICBmdW5jdGlvbiBjc3NWYWx1ZVN1cHBvcnRlZChwcm9OYW1lLHZhbHVlLGVsZW0pewogICAgICAgICAgICB2YXIgcHJlZml4PVsnJywnLXdlYmtpdC0nLCctby0nLCctbW96LScsJy1tcy0nXTsKICAgICAgICAgICAgZWxlbT1lbGVtIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICB2YXIgc3R5bGU9ZWxlbS5zdHlsZTsKICAgICAgICAgICAgdmFyIHByZWZpeGVkVmFsdWU7CiAgICAgICAgICAgIGZvcih2YXIgaT0wLGlpPXByZWZpeC5sZW5ndGg7aTxpaTtpKyspewogICAgICAgICAgICAgICAgcHJlZml4ZWRWYWx1ZT1wcmVmaXhbaV0gKyB2YWx1ZTsKICAgICAgICAgICAgICAgIHN0eWxlW3Byb05hbWVdPXByZWZpeGVkVmFsdWU7CiAgICAgICAgICAgICAgICBpZihzdHlsZVtwcm9OYW1lXT09cHJlZml4ZWRWYWx1ZSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZWZpeGVkVmFsdWU7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwogICAgICAgIH07CgoKICAgICAgICAvL2VsZW0uZGF0YXNldOeahOWFvOWuueWunueOsAogICAgICAgIC8vaWXkuI3mlK/mjIHvvJtmaXJlZm94R03lgqjlrZjkuI3og73lj43mmKDliLDlhYPntKDlsZ7mgKfkuIrjgIIKICAgICAgICBmdW5jdGlvbiBkYXRhc2V0KGVsZW0scHJvLHZhbHVlKXsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldERhdGFQcmVmaXgoKXsKICAgICAgICAgICAgICAgIHJldHVybiAnZGF0YS0nICsgcHJvLnJlcGxhY2UoL1tBLVpdL2csZnVuY3Rpb24obSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICctJyArIG0udG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYodHlwZW9mIHZhbHVlPT0ndW5kZWZpbmVkJyl7Ly/lj5blgLwKICAgICAgICAgICAgICAgIGlmKGVsZW0uZGF0YXNldCl7CiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlbGVtLmRhdGFzZXRbcHJvXTsKICAgICAgICAgICAgICAgIH1lbHNley8v5rKh5pyJ5Y+W5Yiw5YC877yM6L+U5ZuedW5kZWZpbmVk77yMZ2V0QXR0cmlidXRl6buY6K6k5piv6L+U5ZuebnVsbO+8jOaJgOS7peWIpOaWreS4gOS4i+OAggogICAgICAgICAgICAgICAgICAgIHZhciBwcmVmaXhlZFBybz1nZXREYXRhUHJlZml4KCk7CiAgICAgICAgICAgICAgICAgICAgaWYoZWxlbS5oYXNBdHRyaWJ1dGUocHJlZml4ZWRQcm8pKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9ZWxlbS5nZXRBdHRyaWJ1dGUocHJlZml4ZWRQcm8pOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGdldERhdGFQcmVmaXgoKSx2YWx1ZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfTsKCgogICAgICAgIC8v6YeN5paw5qOA5p+l5oKs5rWu5Zu+54mHCiAgICAgICAgZnVuY3Rpb24gaW1nUmVIb3ZlcihpbWcpewogICAgICAgICAgICAvL+imgeajgOafpeeahOWbvueJh++8jOaYr+W9k+WJjeaCrOa1rueahOOAggogICAgICAgICAgICBpZighZmxvYXRCYXIuc2hvd24gfHwgZmxvYXRCYXIuZGF0YS5pbWcgIT0gaW1nKXJldHVybjsKICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpbWcpOwoKICAgICAgICAgICAgdmFyIG1Ib3Zlcj1kb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudCcpOwogICAgICAgICAgICB2YXIgY3I9aW1nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICBtSG92ZXIuaW5pdE1vdXNlRXZlbnQoJ21vdXNlb3ZlcicsdHJ1ZSx0cnVlLHdpbmRvdywwLCBjci5sZWZ0ICsgMTAsIGNyLnRvcCArIDEwLCBjci5sZWZ0ICsgMTAsIGNyLnRvcCArIDEwLCBmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSwgMCxudWxsKTsKICAgICAgICAgICAgaW1nLmRpc3BhdGNoRXZlbnQobUhvdmVyKTsKICAgICAgICB9OwoKICAgICAgICAvLyDojrflj5bnnJ/mraPnmoR1bnNhZmVXaW5kb3csY2hyb21l6YeM6Z2i5Lmf6IO96K6/6Zeu5Yiw55yf5a6e546v5aKD55qE5Y+Y6YePCiAgICAgICAgLy8g5ZyoIGNocm9tZSAzNyDmtYvor5Xml6DmlYgKICAgICAgICBpZighZW52aXIuZmlyZWZveCAmJiAhZW52aXIub3BlcmEgJiYgIWVudmlyLmllICYmICFzdG9yYWdlLnN1cHBvcnRHTSl7CiAgICAgICAgICAgIDsoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BpY1ZpZXdlci1yZXR1cm4tdW5zYWZlV2luZG93JyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cgPSBlLmRldGFpbDsKICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCh1bnNhZmVXaW5kb3cuJCk7CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKICAgICAgICAgICAgICAgIC8v6aG16Z2i6ISa5pysCiAgICAgICAgICAgICAgICB2YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICAgICAgICAgIHMudGV4dENvbnRlbnQ9JygnICsgKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGN1c0V2ZW50PWRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpOwogICAgICAgICAgICAgICAgICAgIGN1c0V2ZW50LmluaXRDdXN0b21FdmVudCgncGljVmlld2VyLXJldHVybi11bnNhZmVXaW5kb3cnLGZhbHNlLGZhbHNlLHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXNFdmVudCk7CiAgICAgICAgICAgICAgICB9KS50b1N0cmluZygpICsnKSgpJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocyk7CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgfTsKCgogICAgICAgIC8v5oqb5Ye66ZSZ6K+v5Yiw6ZSZ6K+v5o6n5Yi25Y+wCiAgICAgICAgZnVuY3Rpb24gdGhyb3dFcnJvckluZm8oZXJyKXsKICAgICAgICAgICAgaWYoY29uc29sZSAmJiBjb25zb2xlLmVycm9yKXsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UgKyAnXG5cbicgKyAoZXJyLnN0YWNrdHJhY2U/IGVyci5zdGFja3RyYWNlIDogJycpICsgJ1xuXG4nICwgZXJyKTsKICAgICAgICAgICAgfTsKICAgICAgICB9OwoKICAgICAgICAvL+WvueixoeWFi+mahgogICAgICAgIGZ1bmN0aW9uIGNsb25lT2JqZWN0KG9iaixkZWVwKXsKICAgICAgICAgICAgdmFyIG9ial9pOwogICAgICAgICAgICB2YXIgcmV0PUFycmF5LmlzQXJyYXkob2JqKT8gW10gOiB7fTsKICAgICAgICAgICAgZm9yKHZhciBpIGluIG9iail7CiAgICAgICAgICAgICAgICBpZighb2JqLmhhc093blByb3BlcnR5KGkpKWNvbnRpbnVlOwogICAgICAgICAgICAgICAgb2JqX2k9b2JqW2ldOwogICAgICAgICAgICAgICAgaWYoIWRlZXAgfHwgdHlwZW9mIG9ial9pIT0nb2JqZWN0JyB8fCBvYmpfaT09PW51bGwgfHwgb2JqX2kubm9kZVR5cGUpewogICAgICAgICAgICAgICAgICAgIHJldFtpXT1vYmpfaTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHJldFtpXT1jbG9uZU9iamVjdChvYmpfaSxkZWVwKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgfTsKCiAgICAgICAgLy/pl6rng4HlhYPntKDjgIIKICAgICAgICBmdW5jdGlvbiBmbGFzaEVsZShlbGUsZHVyYXRpb24pewogICAgICAgICAgICBpZihkYXRhc2V0KGVsZSwncHZGbGFzaGluZycpKXJldHVybjsKICAgICAgICAgICAgaWYoZWxlLm9mZnNldEhlaWdodD09MClyZXR1cm47CiAgICAgICAgICAgIGRhdGFzZXQoZWxlLCdwdkZsYXNoaW5nJywnMScpOwoKICAgICAgICAgICAgdmFyIG9PdXRsaW5lPWVsZS5zdHlsZS5vdXRsaW5lOwogICAgICAgICAgICB2YXIgb091dGxpbmVPZmZzZXQ9ZWxlLnN0eWxlLm91dGxpbmVPZmZzZXQ7CiAgICAgICAgICAgIHZhciBvT3BhY2l0eT1lbGUuc3R5bGUub3BhY2l0eTsKICAgICAgICAgICAgdmFyIG9UcmFuc2Zvcm09ZWxlLnN0eWxlW3N1cHBvcnQuY3NzVHJhbnNmb3JtXTsKCiAgICAgICAgICAgIHZhciBjb3VudD0wOwogICAgICAgICAgICB2YXIgc3RhcnRUaW1lPURhdGUubm93KCk7CiAgICAgICAgICAgIGR1cmF0aW9uPWR1cmF0aW9uPyBkdXJhdGlvbiA6IDEyMDA7CgogICAgICAgICAgICB2YXIgZmxhc2hJbnRlcnZhbD1zZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIG91dGxpbmU9J25vbmUnLAogICAgICAgICAgICAgICAgICAgIG91dGxpbmVPZmZzZXQ9MCwKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5PTAuMywKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09Jyc7CgogICAgICAgICAgICAgICAgaWYoY291bnQgJSAyID09IDApewogICAgICAgICAgICAgICAgICAgIG91dGxpbmU9JzVweCBkYXNoZWQgcmdiYSgyNTUsMCwwLDAuOTUpJzsKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5PTAuOTU7CiAgICAgICAgICAgICAgICAgICAgb3V0bGluZU9mZnNldD0nMXB4JzsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09J3NjYWxlKDEuMSknOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgaWYoKERhdGUubm93KCkgLSBzdGFydFRpbWUpID4gZHVyYXRpb24pewogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGZsYXNoSW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lPW9PdXRsaW5lOwogICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5PW9PcGFjaXR5OwogICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lT2Zmc2V0PW9PdXRsaW5lT2Zmc2V0OwogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09b1RyYW5zZm9ybTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wdi1mbGFzaGluZycpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGVsZS5zdHlsZS5vdXRsaW5lPW91dGxpbmU7CiAgICAgICAgICAgICAgICBlbGUuc3R5bGUub3V0bGluZU9mZnNldD1vdXRsaW5lT2Zmc2V0OwogICAgICAgICAgICAgICAgZWxlLnN0eWxlLm9wYWNpdHk9b3BhY2l0eTsKICAgICAgICAgICAgICAgIGVsZS5zdHlsZVtzdXBwb3J0LmNzc1RyYW5zZm9ybV09dHJhbnNmb3JtOwoKICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgIH0sODApOwogICAgICAgIH07CgogICAgICAgIC8v5pSv5oyB5oOF5Ya1LgogICAgICAgIHZhciBzdXBwb3J0PXsKICAgICAgICAgICAgY3NzVHJhbnNmb3JtOmNzc1Byb1N1cHBvcnRlZCgndHJhbnNmb3JtJyksCiAgICAgICAgICAgIGNzc0N1cnNvclZhbHVlOnsKICAgICAgICAgICAgICAgIHpvb21Jbjpjc3NWYWx1ZVN1cHBvcnRlZCgnY3Vyc29yJywnem9vbS1pbicpLAogICAgICAgICAgICAgICAgem9vbU91dDpjc3NWYWx1ZVN1cHBvcnRlZCgnY3Vyc29yJywnem9vbS1vdXQnKSwKICAgICAgICAgICAgICAgIGdyYWI6Y3NzVmFsdWVTdXBwb3J0ZWQoJ2N1cnNvcicsJ2dyYWInKSwKICAgICAgICAgICAgICAgIGdyYWJiaW5nOmNzc1ZhbHVlU3VwcG9ydGVkKCdjdXJzb3InLCdncmFiYmluZycpLAogICAgICAgICAgICB9LAogICAgICAgIH07CgoKICAgICAgICAvL2NvbnNvbGUubG9nKCfmtY/op4jlmajnmoTkuIDkupvlr7nosaHmlK/mjIHmg4XlhrU6JyxzdXBwb3J0KTsKCiAgICAgICAgLy/liqjnlLvnrpfms5UKICAgICAgICAvKgogICAgICAgICB0OiBjdXJyZW50IHRpbWXvvIjlvZPliY3ml7bpl7TvvInvvJsKICAgICAgICAgYjogYmVnaW5uaW5nIHZhbHVl77yI5Yid5aeL5YC877yJ77ybCiAgICAgICAgIGM6IGNoYW5nZSBpbiB2YWx1Ze+8iOWPmOWMlumHj++8ie+8mwogICAgICAgICBkOiBkdXJhdGlvbu+8iOaMgee7reaXtumXtO+8ieOAggogICAgICAgICovCgogICAgICAgIHZhciBUd2VlbiA9IHsKICAgICAgICAgICAgQ3ViaWM6IHsKICAgICAgICAgICAgICAgIGVhc2VJbk91dDpmdW5jdGlvbih0LGIsYyxkKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWMvMiooTWF0aC5jb3MoTWF0aC5QSSp0L2QpLTEpK2IKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICB9OwoKICAgICAgICAvL2ltZ1JlYWR5CiAgICAgICAgdmFyIGltZ1JlYWR5PShmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgaVJJbnRlcnZhbCwKICAgICAgICAgICAgICAgIGlSUmVhZHlGbj1bXSwKICAgICAgICAgICAgICAgIGlzcmNzPVtdCiAgICAgICAgICAgIDsKCiAgICAgICAgICAgIHZhciB0aW1lTGltaXQ9MyAqIDYwICogMTAwMDsvLzPliIbpkp8KCiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrUmVhZHkoKXsKICAgICAgICAgICAgICAgIHZhciBub3c9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MCxpaT1pUlJlYWR5Rm4ubGVuZ3RoLGlSUmVhZHlGbl9pO2k8aWk7aSsrKXsKICAgICAgICAgICAgICAgICAgICBpUlJlYWR5Rm5faT1pUlJlYWR5Rm5baV07CiAgICAgICAgICAgICAgICAgICAgLy9ub3cgLSBpUlJlYWR5Rm5faS5zdGFydFRpbWUgPj0gdGltZUxpbWl0IHx8CiAgICAgICAgICAgICAgICAgICAgaWYoaVJSZWFkeUZuX2koKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlSUmVhZHlGbi5zcGxpY2UoaSwxKTsKICAgICAgICAgICAgICAgICAgICAgICAgaXNyY3Muc3BsaWNlKGksMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICAgICAgICAgICAgaWktLTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NoZWNrUmVhZHknLGlSUmVhZHlGbi5sZW5ndGgpCiAgICAgICAgICAgICAgICBpZihpUlJlYWR5Rm4ubGVuZ3RoPT0wKXsKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGlSSW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgIGlSSW50ZXJ2YWw9bnVsbDsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CgoKCiAgICAgICAgICAgIHZhciBpbWdSZWFkeT1mdW5jdGlvbihpbWcsb3B0cyl7CgogICAgICAgICAgICAgICAgaWYoL05vZGVMaXN0fEhUTUxDb2xsZWN0aW9uLy50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbWcpKSAgfHwgQXJyYXkuaXNBcnJheShpbWcpKXsKICAgICAgICAgICAgICAgICAgICBhcnJheUZuLmZvckVhY2guY2FsbChpbWcsZnVuY3Rpb24oaW1nLGluZGV4LGFycmF5KXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdSZWFkeShpbWcsb3B0cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZighKGltZyBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdF9pbWc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgICAgICAgICAgICAgICAgdF9pbWcuc3JjPWltZzsKICAgICAgICAgICAgICAgICAgICBpbWc9dF9pbWc7CiAgICAgICAgICAgICAgICAgICAgdF9pbWc9bnVsbDsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHJlYWR5LGxvYWQsZXJyb3IsbG9hZEVuZCxhYm9ydCx0aW1lb3V0LHRpbWU7CiAgICAgICAgICAgICAgICByZWFkeT1vcHRzLnJlYWR5OwogICAgICAgICAgICAgICAgbG9hZD1vcHRzLmxvYWQ7CiAgICAgICAgICAgICAgICBlcnJvcj1vcHRzLmVycm9yOwogICAgICAgICAgICAgICAgbG9hZEVuZD1vcHRzLmxvYWRFbmQ7CiAgICAgICAgICAgICAgICBhYm9ydD1vcHRzLmFib3J0OwogICAgICAgICAgICAgICAgdGltZW91dD1vcHRzLnRpbWVvdXQ7CiAgICAgICAgICAgICAgICB0aW1lPXR5cGVvZiBvcHRzLnRpbWU9PSdudW1iZXInPyBvcHRzLnRpbWUgOiAwOwoKICAgICAgICAgICAgICAgIGlmKHRpbWUpewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWxvYWRFbmREb25lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0ZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjPSBwcmVmcy5pY29ucy5icm9rZW5JbWdfc21hbGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aW1lb3V0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0LmNhbGwoaW1nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OmltZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTondGltZW91dCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEVuZERvbmU9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxvYWRFbmQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFbmQuY2FsbChpbWcsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6aW1nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOid0aW1lb3V0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0sdGltZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBzcmM9aW1nLnNyYzsKICAgICAgICAgICAgICAgIHZhciBsb2FkRW5kRG9uZTsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnbyh0eXBlLGUpewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCh0eXBlKXsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG9hZCc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvKCdyZWFkeScpOy8v5aaC5p6c55u05o6l6Kem5Y+RbG9hZO+8jOmCo+S5iOWFiOinpuWPkXJlYWR5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsb2FkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkLmNhbGwoaW1nLGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighbG9hZEVuZERvbmUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFbmREb25lPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobG9hZEVuZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFbmQuY2FsbChpbWcsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVhZHknOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFyZWFkeSB8fCByZWFkeUhhbmRsZXIuZG9uZSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeUhhbmRsZXIuZG9uZT10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHkuY2FsbChpbWcsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDppbWcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToncmVhZHknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXJyb3InOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlcnJvcil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IuY2FsbChpbWcsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWxvYWRFbmREb25lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRW5kRG9uZT10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxvYWRFbmQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRW5kLmNhbGwoaW1nLGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIGFib3J0ZWQ7CiAgICAgICAgICAgICAgICB2YXIgcmV0PXsKICAgICAgICAgICAgICAgICAgICBpbWc6aW1nLAogICAgICAgICAgICAgICAgICAgIGFib3J0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFsb2FkRW5kRG9uZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydGVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVMaXN0ZW5lcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYz0gcHJlZnMuaWNvbnMuYnJva2VuSW1nX3NtYWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYWJvcnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0LmNhbGwoaW1nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OmltZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTonYWJvcnQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFbmREb25lPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsb2FkRW5kKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRW5kLmNhbGwoaW1nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OmltZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTonYWJvcnQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZWFkeUhhbmRsZXIoKXsvL+WwveW/q+eahOajgOa1i+WbvueJh+Wkp+Wwjy4KICAgICAgICAgICAgICAgICAgICBpZihsb2FkRW5kRG9uZSB8fCBhYm9ydGVkKXJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIGlmKGltZy5uYXR1cmFsV2lkdGg9PTAgfHwgaW1nLm5hdHVyYWxIZWlnaHQ9PTApcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGdvKCdyZWFkeScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbG9hZEhhbmRsZXIoZSl7CiAgICAgICAgICAgICAgICAgICAgZ28oJ2xvYWQnLGUpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvckhhbmRsZXIoZSl7CiAgICAgICAgICAgICAgICAgICAgZ28oJ2Vycm9yJyxlKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoKXsKICAgICAgICAgICAgICAgICAgICBpbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsbG9hZEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJyxlcnJvckhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vcmVhZHnlv4XpobvlnKhsb2Fk5LmL5YmN6Kem5Y+R44CCCgogICAgICAgICAgICAgICAgaWYoaW1nLmNvbXBsZXRlKXsvL+WbvueJh+W3sue7j+WKoOi9veWujOaIkC4KICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgaW1nLndpZHRoPT0nbnVtYmVyJyAmJiBpbWcud2lkdGggJiYgaW1nLmhlaWdodCl7Ly/lm77niYcKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYWJvcnRlZClyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbygnbG9hZCcsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6J2xvYWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDppbWcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwwKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvL+i/meS4jeaYr+WbvueJhy5vcGVyYeS8muivhuWIq+mUmeivry4KICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYWJvcnRlZClyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbygnZXJyb3InLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOidlcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OmltZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9LDApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyxsb2FkSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsZXJyb3JIYW5kbGVyLHRydWUpOwoKCiAgICAgICAgICAgICAgICBpZihyZWFkeSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4PWlzcmNzLmluZGV4T2Yoc3JjKTsKICAgICAgICAgICAgICAgICAgICBpZihpbmRleD09LTEpewogICAgICAgICAgICAgICAgICAgICAgICBpc3Jjcy5wdXNoKHNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5SGFuZGxlci5zdGFydFRpbWU9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlSUmVhZHlGbi5wdXNoKHJlYWR5SGFuZGxlcik7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGlSUmVhZHlGbltpbmRleF0uc3RhcnRUaW1lPSBEYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGlmKCFpUkludGVydmFsKXsKICAgICAgICAgICAgICAgICAgICAgICAgaVJJbnRlcnZhbD1zZXRJbnRlcnZhbChjaGVja1JlYWR5LDY2KTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmV0dXJuIGltZ1JlYWR5OwogICAgICAgIH0pKCk7CgoKICAgICAgICB2YXIgYWRkV2hlZWxFdmVudD0oZnVuY3Rpb24oKXsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFN1cHBvcnRFdmVudE5hbWUoKXsKICAgICAgICAgICAgICAgIHZhciByZXQ9J0RPTU1vdXNlU2Nyb2xsJzsKICAgICAgICAgICAgICAgIGlmKGV2ZW50U3VwcG9ydGVkKCd3aGVlbCcpKXsvL3czYyBGRj49MTcgaWU+PTkKICAgICAgICAgICAgICAgICAgICByZXQ9J3doZWVsJzsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKGV2ZW50U3VwcG9ydGVkKCdtb3VzZXdoZWVsJykpey8vb3BlcmEsY2hyb21lCiAgICAgICAgICAgICAgICAgICAgcmV0PSdtb3VzZXdoZWVsJzsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIGV2ZW50TmFtZTsKCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlbGUsY2FsbGJhY2ssdXNlQ2FwdHVyZSl7CiAgICAgICAgICAgICAgICBpZighZXZlbnROYW1lKXsKICAgICAgICAgICAgICAgICAgICBldmVudE5hbWU9Z2V0U3VwcG9ydEV2ZW50TmFtZSgpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGU9ZS50eXBlOwogICAgICAgICAgICAgICAgICAgIHZhciBuZTsKICAgICAgICAgICAgICAgICAgICBpZih0eXBlIT0nd2hlZWwnKXsKICAgICAgICAgICAgICAgICAgICAgICAgbmU9e307CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSBpbiBlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lW2ldPWVbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBuZS50eXBlPSd3aGVlbCc7CiAgICAgICAgICAgICAgICAgICAgICAgIG5lLmRlbHRhWD0wOwogICAgICAgICAgICAgICAgICAgICAgICBuZS5kZWx0YVk9MDsKICAgICAgICAgICAgICAgICAgICAgICAgbmUuZGVsdGFaPTA7CiAgICAgICAgICAgICAgICAgICAgICAgIG5lLmRlbHRhTW9kZT0xOy8vbGluZQogICAgICAgICAgICAgICAgICAgICAgICBuZS5wcmV2ZW50RGVmYXVsdD1lLnByZXZlbnREZWZhdWx0LmJpbmQoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5lLnN0b3BQcm9wYWdhdGlvbj1lLnN0b3BQcm9wYWdhdGlvbi5iaW5kKGUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHg9MCx5PTA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBlLmF4aXM9PSdudW1iZXInKXsvL0RPTU1vdXNlU2Nyb2xsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlLmF4aXM9PTIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9ZS5kZXRhaWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PWUuZGV0YWlsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL29wZXJh5pep6LW354mI5pys55qEbW91c2V3aGVlbOWPquaUr+aMgXnovbTnmoTmu5rliqgsZS53aGVlbERlbHRhWSB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBlLndoZWVsRGVsdGFZPT0ndW5kZWZpbmVkJyB8fCAgZS53aGVlbERlbHRhWSE9MCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeT0tZS53aGVlbERlbHRhLzQwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeD0tZS53aGVlbERlbHRhLzQwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgbmUuZGVsdGFZID15OwogICAgICAgICAgICAgICAgICAgICAgICBuZS5kZWx0YVggPXg7CgogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyxuZT8gbmUgOiBlKTsKICAgICAgICAgICAgICAgIH0sdXNlQ2FwdHVyZSB8fCBmYWxzZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSkoKTsKCgogICAgICAgIHZhciBhZGRDdXNNb3VzZUV2ZW50PShmdW5jdGlvbigpewoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U3VwcG9ydGVkKCl7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIG1vdXNlbGVhdmU6ZXZlbnRTdXBwb3J0ZWQoJ21vdXNlbGVhdmUnKSwKICAgICAgICAgICAgICAgICAgICBtb3VzZWVudGVyOmV2ZW50U3VwcG9ydGVkKCdtb3VzZWVudGVyJyksCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIHN1cHBvcnQ7CiAgICAgICAgICAgIHZhciBtYXA9ewogICAgICAgICAgICAgICAgbW91c2VsZWF2ZTonbW91c2VvdXQnLAogICAgICAgICAgICAgICAgbW91c2VlbnRlcjonbW91c2VvdmVyJywKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0eXBlLCBlbGUsIGZuKXsvL+S6i+S7tuexu+Wei++8jOWFg+e0oO+8jOebkeWQrOWHveaVsAogICAgICAgICAgICAgICAgaWYoIXN1cHBvcnQpewogICAgICAgICAgICAgICAgICAgIHN1cHBvcnQ9Z2V0U3VwcG9ydGVkKCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIGNocm9tZSAzMCsg6Jm954S25pSv5oyBIG1vdXNlZW50ZXLvvIzkvYbmmK/lrZjlnKjpl67popgKICAgICAgICAgICAgICAgIGlmKHN1cHBvcnRbdHlwZV0gJiYgISh0eXBlID09ICdtb3VzZWVudGVyJyAmJiB3aW5kb3cuY2hyb21lKSl7CiAgICAgICAgICAgICAgICAgICAgZWxlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSxmbixmYWxzZSk7Ly9tb3VzZWxlYXZlLGVudGVy5LiN5YaS5rOhCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcihtYXBbdHlwZV0sZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWxhdGVkVGFyZ2V0PWUucmVsYXRlZFRhcmdldDsvL21vdXNlb3V077yM5Y675b6A55qE5YWD57Sg77ybbW91c2VvdmVy77yM5p2l6Ieq55qE5YWD57SgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuLmNhbGwodGhpcyxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9LHRydWUpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKCiAgICAgICAgfSkoKTsKCgogICAgICAgIC8v5bqTCiAgICAgICAgZnVuY3Rpb24gR2FsbGVyeUMoKXsKICAgICAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGdhbGxlcnk7CiAgICAgICAgdmFyIGdhbGxlcnlNb2RlOwoKICAgICAgICBHYWxsZXJ5Qy5wcm90b3R5cGU9ewogICAgICAgICAgICBpbml0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLmFkZFN0eWxlKCk7CiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKCiAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnk9Y29udGFpbmVyOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZT0ncHYtZ2FsbGVyeS1jb250YWluZXInOwogICAgICAgICAgICAgICAgY29udGFpbmVyLnRhYkluZGV4PTE7Ly/kuLrkuobojrflj5bnhKbngrnvvIzmnaXmiKrojrfplK7nm5jkuovku7YKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUw9CiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtZmxvYXQtbGVmdCI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gdGl0bGU9IicraTE4bigicGljSW5mbyIpKyciIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtbGVmdC1pbWctaW5mbyI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1sZWZ0LWltZy1pbmZvLXJlc29sdXRpb24iIHRpdGxlPSInK2kxOG4oInJlc29sdXRpb24iKSsnIj4wIHggMDwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWxlZnQtaW1nLWluZm8tY291bnQiIHRpdGxlPSInK2kxOG4oInBpY051bSIpKyciPu+8iDEgLyAx77yJPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtbGVmdC1pbWctaW5mby1zY2FsaW5nIiB0aXRsZT0iJytpMThuKCJzY2FsZVJhdGlvIikrJyI+77yIMTAwJe+8iTwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWxlZnQtaW1nLWluZm8tZGVzY3JpcHRpb24iIHRpdGxlPSInK2kxOG4oInBpY05vdGUiKSsnIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPGlucHV0IHR5cGU9InJhbmdlIiBpZD0ibWluc2l6ZVciIG1pbj0iMCIgbWF4PSIxMDAiIHZhbHVlPSIwIiB0aXRsZT0iV2lkdGgiPiAnKwogICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJtaW5zaXplSCIgbWluPSIwIiBtYXg9IjEwMCIgdmFsdWU9IjAiIHRpdGxlPSJIZWlnaHQiPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHRpdGxlPSInK2kxOG4oImV4aXRDb2xsZWN0aW9uVGlwIikrJyIgY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kIHB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWV4aXQtY29sbGVjdGlvbiI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4+JytpMThuKCJleGl0Q29sbGVjdGlvbiIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICAnPHNwYW4gdGl0bGU9IicraTE4bigibG9hZEFsbFRpcCIpKyciIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1uZXh0UGFnZSI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4+JytpMThuKCJsb2FkQWxsIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHRpdGxlPSInK2kxOG4oImZpZGRsZVRpcCIpKyciIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1vcGVyYXRlIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3Bhbj4nK2kxOG4oImZpZGRsZSIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdCI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbGxlY3QtaWNvbiI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb2xsZWN0LXRleHQiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtY29sbGVjdCI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gdGl0bGU9IicraTE4bigiY29sbGVjdERldGFpbFRpcCIpKyciIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1jb2xsZWN0LWRlc2NyaXB0aW9uIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3Bhbj4nK2kxOG4oImNvbGxlY3REZXRhaWwiKSsn77yaPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzx0ZXh0YXJlYSBkYXRhLXByZWZzPSJkZXNjcmlwdGlvbiIgY29scz0iMjUiIHJvd3M9IjUiPjwvdGV4dGFyZWE+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXIiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHRpdGxlPSInK2kxOG4oInBsYXlTbGlkZSIpKyciIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1zbGlkZS1zaG93Ij4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmRfb3ZlcmxheWVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9uIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1idXR0b24taW5uZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctY291bnRkb3duIiB0aXRsZT0iJytpMThuKCJjb3VudERvd24iKSsnIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LXNsaWRlLXNob3ciPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgdGl0bGU9IicraTE4bigic2xpZGVHYXBUaXAiKSsnIj4nKwogICAgICAgICAgICAgICAgICAgICc8aW5wdXQgZGF0YS1wcmVmcz0iaW50ZXJ2YWwiIHN0ZXA9IjEiIG1pbj0iMSIgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iNSIgLz4nKwogICAgICAgICAgICAgICAgICAgICc8c3Bhbj4nK2kxOG4oInNsaWRlR2FwIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiAgdGl0bGU9IicraTE4bigic2xpZGVCYWNrVGlwIikrJyI+JysKICAgICAgICAgICAgICAgICAgICAnPGlucHV0IGlkPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1zbGlkZS1zaG93LWJhY2t3YXJkIiBkYXRhLXByZWZzPSJiYWNrd2FyZCIgdHlwZT0iY2hlY2tib3giIC8+JysKICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0tc2xpZGUtc2hvdy1iYWNrd2FyZCI+JytpMThuKCJzbGlkZUJhY2siKSsn44CA44CA44CAPC9sYWJlbD4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiAgdGl0bGU9IicraTE4bigic2xpZGVXYWl0VGlwIikrJyI+JysKICAgICAgICAgICAgICAgICAgICAnPGlucHV0IGlkPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1zbGlkZS1zaG93LXdhaXQiIGRhdGEtcHJlZnM9IndhaXQiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiAvPicrCiAgICAgICAgICAgICAgICAgICAgJzxsYWJlbCBmb3I9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtLXNsaWRlLXNob3ctd2FpdCI+JytpMThuKCJzbGlkZVdhaXQiKSsnPC9sYWJlbD4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiAgdGl0bGU9IicraTE4bigic2xpZGVTa2lwRXJyb3JUaXAiKSsnIj4nKwogICAgICAgICAgICAgICAgICAgICc8aW5wdXQgaWQ9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtLXNsaWRlLXNob3ctc2tpcEVycm9ySW1nIiBkYXRhLXByZWZzPSJza2lwRXJyb3JJbWciIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiAvPicrCiAgICAgICAgICAgICAgICAgICAgJzxsYWJlbCBmb3I9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtLXNsaWRlLXNob3ctc2tpcEVycm9ySW1nIj4nK2kxOG4oInNsaWRlU2tpcEVycm9yIikrJzwvbGFiZWw+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXIiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHRpdGxlPSInK2kxOG4oInR5cGVUaXAiKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY2F0ZWdvcnkiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuPicraTE4bigidHlwZSIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWNhdGVnb3J5Ij4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiB0aXRsZT0iJytpMThuKCJjb21tYW5kVGlwIikrJyIgY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kIHB2LWdhbGxlcnktaGVhZC1jb21tYW5kLW90aGVycyI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4+JytpMThuKCJjb21tYW5kIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3Qtb3RoZXJzIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtY29tbWFuZD0icHNJbWFnZSIgdGl0bGU9IicraTE4bigib25saW5lRWRpdFRpcCIscHJlZnMuZ2FsbGVyeS5lZGl0U2l0ZSkrJyI+JytpMThuKCJvbmxpbmVFZGl0IikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtY29tbWFuZD0iZXhwb3J0SW1hZ2VzIiB0aXRsZT0iJytpMThuKCJleHBvcnRJbWFnZXNUaXAiKSsnIj4nK2kxOG4oImV4cG9ydEltYWdlcyIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiBkYXRhLWNvbW1hbmQ9ImNvcHlJbWFnZXMiIHRpdGxlPSInK2kxOG4oImNvcHlJbWFnZXNVcmxUaXAiKSsnIj4nK2kxOG4oImNvcHlJbWFnZXNVcmwiKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgZGF0YS1jb21tYW5kPSJzY3JvbGxJbnRvVmlldyIgdGl0bGU9IicraTE4bigiZmluZEluUGFnZVRpcCIpKyciPicraTE4bigiZmluZEluUGFnZSIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiBkYXRhLWNvbW1hbmQ9ImVudGVyQ29sbGVjdGlvbiIgdGl0bGU9IicraTE4bigidmlld0NvbGxlY3Rpb25UaXAiKSsnIj4nK2kxOG4oInZpZXdDb2xsZWN0aW9uIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtY29tbWFuZD0iZG93bmxvYWRJbWFnZSIgdGl0bGU9IicraTE4bigiZG93bmxvYWRJbWFnZVRpcCIpKyciPicraTE4bigiZG93bmxvYWRJbWFnZSIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiBkYXRhLWNvbW1hbmQ9Im9wZW5Jbk5ld1dpbmRvdyIgdGl0bGU9IicraTE4bigib3BlbkluTmV3V2luZG93VGlwIikrJyI+JytpMThuKCJvcGVuSW5OZXdXaW5kb3ciKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgdGl0bGU9IicraTE4bigiYXV0b1JlZnJlc2hUaXAiKSsnIj4nKwogICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT0iY2hlY2tib3giICBkYXRhLWNvbW1hbmQ9InNjcm9sbFRvRW5kQW5kUmVsb2FkIi8+JysKICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGRhdGEtY29tbWFuZD0ic2Nyb2xsVG9FbmRBbmRSZWxvYWQiPicraTE4bigiYXV0b1JlZnJlc2giKSsnPC9sYWJlbD4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gaWQ9InB2LWdhbGxlcnktZnVsbHNjcmVlbmJ0biIgY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiBkYXRhLWNvbW1hbmQ9ImZ1bGxTY3JlZW4iPicraTE4bigiZW50ZXJGdWxsc2MiKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgZGF0YS1jb21tYW5kPSJvcGVuUHJlZnMiPicraTE4bigiY29uZmlnIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiB0aXRsZT0iJytpMThuKCJzaGFyZSIpKyciIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1zaGFyZSI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4+JytpMThuKCJzaGFyZSIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LXNoYXJlIj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiB0aXRsZT0iJytpMThuKCJjbG9zZUdhbGxlcnkiKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY2xvc2UiPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1ib2R5Ij4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaW1nLWNvbnRhaW5lciI+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWltZy1jb250ZW50Ij4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1pbWctcGFyZW50Ij4nKwogICAgICAgICAgICAgICAgICAgICc8aW1nIHRpdGxlPSInK2kxOG4oInJlZnJlc2hXaGVuRXJyb3IiKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1pbWdfYnJva2VuIiBzcmM9IicrcHJlZnMuaWNvbnMuYnJva2VuSW1nKyciIC8+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXZlcnRpY2FsLWFsaWduLWhlbHBlciI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaW1nLWNvbnRyb2xlciBwdi1nYWxsZXJ5LWltZy1jb250cm9sZXItcHJlIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaW1nLWNvbnRyb2xlciBwdi1nYWxsZXJ5LWltZy1jb250cm9sZXItbmV4dCI+PC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zY3JvbGxiYXItaCBwdi1nYWxsZXJ5LWltZy1zY3JvbGxiYXItaCI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2Nyb2xsYmFyLWgtdHJhY2sgcHYtZ2FsbGVyeS1pbWctc2Nyb2xsYmFyLWgtdHJhY2siPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci1oLWhhbmRsZSBwdi1nYWxsZXJ5LWltZy1zY3JvbGxiYXItaC1oYW5kbGUiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zY3JvbGxiYXItdiBwdi1nYWxsZXJ5LWltZy1zY3JvbGxiYXItdiI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2Nyb2xsYmFyLXYtdHJhY2sgcHYtZ2FsbGVyeS1pbWctc2Nyb2xsYmFyLXYtdHJhY2siPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci12LWhhbmRsZSBwdi1nYWxsZXJ5LWltZy1zY3JvbGxiYXItdi1oYW5kbGUiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZSIgdGl0bGU9IicraTE4bigic3dpdGNoU2xpZGUiKSsnIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1jb250ZW50Ij48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNpZGViYXItY29udGFpbmVyIiB1bnNlbGVjdGFibGU9Im9uIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRlbnQiID4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2lkZWJhci1jb250cm9sZXIgcHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRyb2xlci1wcmUiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRyb2xlciBwdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVyLW5leHQiPjwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciI+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zY3JvbGxiYXItaCBwdi1nYWxsZXJ5LXRodW1iLXNjcm9sbGJhci1oIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zY3JvbGxiYXItaC10cmFjayBwdi1nYWxsZXJ5LXRodW1iLXNjcm9sbGJhci1oLXRyYWNrIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zY3JvbGxiYXItaC1oYW5kbGUgcHYtZ2FsbGVyeS10aHVtYi1zY3JvbGxiYXItaC1oYW5kbGUiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci12IHB2LWdhbGxlcnktdGh1bWItc2Nyb2xsYmFyLXYiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci12LXRyYWNrIHB2LWdhbGxlcnktdGh1bWItc2Nyb2xsYmFyLXYtdHJhY2siPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci12LWhhbmRsZSBwdi1nYWxsZXJ5LXRodW1iLXNjcm9sbGJhci12LWhhbmRsZSI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpOwoKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcigiI21pbnNpemVXIikub25pbnB1dD1mdW5jdGlvbigpe3NlbGYuY2hhbmdlTWluVmlldygpO307CiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcigiI21pbnNpemVIIikub25pbnB1dD1mdW5jdGlvbigpe3NlbGYuY2hhbmdlTWluVmlldygpO307CiAgICAgICAgICAgICAgICB2YXIgbWF4aW1pemVUcmlnZ2VyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICAgIHRoaXMubWF4aW1pemVUcmlnZ2VyPW1heGltaXplVHJpZ2dlcjsKICAgICAgICAgICAgICAgIG1heGltaXplVHJpZ2dlci5pbm5lckhUTUw9Jy0nK2kxOG4oInJldHVyblRvR2FsbGVyeSIpKyctPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktbWF4aW1pemUtdHJpZ2dlci1jbG9zZSIgdGl0bGU9IicraTE4bigiY2xvc2VHYWxsZXJ5IikrJyI+PC9zcGFuPic7CiAgICAgICAgICAgICAgICBtYXhpbWl6ZVRyaWdnZXIuY2xhc3NOYW1lPSdwdi1nYWxsZXJ5LW1heGltaXplLXRyaWdnZXInOwoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWF4aW1pemVUcmlnZ2VyKTsKCgogICAgICAgICAgICAgICAgdmFyIHZhbGlkUG9zPVsndG9wJywncmlnaHQnLCdib3R0b20nLCdsZWZ0J107CiAgICAgICAgICAgICAgICB2YXIgc0JhclBvc2l0aW9uPXByZWZzLmdhbGxlcnkuc2lkZWJhclBvc2l0aW9uOwogICAgICAgICAgICAgICAgaWYodmFsaWRQb3MuaW5kZXhPZihzQmFyUG9zaXRpb24pPT0tMSl7CiAgICAgICAgICAgICAgICAgICAgc0JhclBvc2l0aW9uPSdib3R0b20nOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLnNCYXJQb3NpdGlvbj1zQmFyUG9zaXRpb247CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2xhc3NOYW1lPSdwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJfc2VsZWN0ZWQtJyArIHNCYXJQb3NpdGlvbjsKCgogICAgICAgICAgICAgICAgdmFyIHNCYXJEaXJlY3Rpb249J3YnOy8v5Z6C55u05pS+572uCiAgICAgICAgICAgICAgICB2YXIgaXNIb3Jpem9udGFsPWZhbHNlOwogICAgICAgICAgICAgICAgaWYoc0JhclBvc2l0aW9uPT0ndG9wJyB8fCBzQmFyUG9zaXRpb249PSdib3R0b20nKXsKICAgICAgICAgICAgICAgICAgICBzQmFyRGlyZWN0aW9uPSdoJzsvL+awtOW5s+aUvue9rgogICAgICAgICAgICAgICAgICAgIGlzSG9yaXpvbnRhbD10cnVlOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuc0JhckRpcmVjdGlvbj1zQmFyRGlyZWN0aW9uOwogICAgICAgICAgICAgICAgdGhpcy5pc0hvcml6b250YWw9aXNIb3Jpem9udGFsOwoKICAgICAgICAgICAgICAgIHZhciBjbGFzc1ByZWZpeD0ncHYtZ2FsbGVyeS0nOwogICAgICAgICAgICAgICAgdmFyIHZhbGlkQ2xhc3M9WwogICAgICAgICAgICAgICAgICAgICdoZWFkJywKCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtbGVmdC1pbWctaW5mbycsCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtbGVmdC1pbWctaW5mby1kZXNjcmlwdGlvbicsCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtbGVmdC1pbWctaW5mby1yZXNvbHV0aW9uJywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1sZWZ0LWltZy1pbmZvLWNvdW50JywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1sZWZ0LWltZy1pbmZvLXNjYWxpbmcnLAoKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLWNsb3NlJywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLW5leHRQYWdlJywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLW9wZXJhdGUnLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtc2xpZGUtc2hvdycsCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtY29tbWFuZC1zbGlkZS1zaG93LWJ1dHRvbi1pbm5lcicsCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtY29tbWFuZC1zbGlkZS1zaG93LWNvdW50ZG93bicsCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtY29tbWFuZC1jb2xsZWN0JywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLWV4aXQtY29sbGVjdGlvbicsCgogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtZHJvcC1saXN0LWNhdGVnb3J5JywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1vdGhlcnMnLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtZHJvcC1saXN0LXNoYXJlJywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1zbGlkZS1zaG93JywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1jb2xsZWN0JywKCiAgICAgICAgICAgICAgICAgICAgJ2JvZHknLAoKICAgICAgICAgICAgICAgICAgICAnaW1nLWNvbnRhaW5lcicsCgogICAgICAgICAgICAgICAgICAgICdpbWctc2Nyb2xsYmFyLWgnLAogICAgICAgICAgICAgICAgICAgICdpbWctc2Nyb2xsYmFyLWgtaGFuZGxlJywKICAgICAgICAgICAgICAgICAgICAnaW1nLXNjcm9sbGJhci1oLXRyYWNrJywKCiAgICAgICAgICAgICAgICAgICAgJ2ltZy1zY3JvbGxiYXItdicsCiAgICAgICAgICAgICAgICAgICAgJ2ltZy1zY3JvbGxiYXItdi1oYW5kbGUnLAogICAgICAgICAgICAgICAgICAgICdpbWctc2Nyb2xsYmFyLXYtdHJhY2snLAoKICAgICAgICAgICAgICAgICAgICAndGh1bWItc2Nyb2xsYmFyLWgnLAogICAgICAgICAgICAgICAgICAgICd0aHVtYi1zY3JvbGxiYXItaC1oYW5kbGUnLAogICAgICAgICAgICAgICAgICAgICd0aHVtYi1zY3JvbGxiYXItaC10cmFjaycsCgogICAgICAgICAgICAgICAgICAgICd0aHVtYi1zY3JvbGxiYXItdicsCiAgICAgICAgICAgICAgICAgICAgJ3RodW1iLXNjcm9sbGJhci12LWhhbmRsZScsCiAgICAgICAgICAgICAgICAgICAgJ3RodW1iLXNjcm9sbGJhci12LXRyYWNrJywKCiAgICAgICAgICAgICAgICAgICAgJ2ltZy1jb250ZW50JywKICAgICAgICAgICAgICAgICAgICAnaW1nLXBhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgJ2ltZ19icm9rZW4nLAoKICAgICAgICAgICAgICAgICAgICAnaW1nLWNvbnRyb2xlci1wcmUnLAogICAgICAgICAgICAgICAgICAgICdpbWctY29udHJvbGVyLW5leHQnLAoKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci10b2dnbGUnLAogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLXRvZ2dsZS1jb250ZW50JywKCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItY29udGFpbmVyJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci1jb250ZW50JywKCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItY29udHJvbGVyLXByZScsCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItY29udHJvbGVyLW5leHQnLAoKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lcicsCiAgICAgICAgICAgICAgICBdOwoKICAgICAgICAgICAgICAgIHZhciBlbGVNYXBzPXt9OwogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzPWVsZU1hcHM7CgogICAgICAgICAgICAgICAgdmFsaWRDbGFzcy5mb3JFYWNoKGZ1bmN0aW9uKGMpewogICAgICAgICAgICAgICAgICAgIGVsZU1hcHNbY109Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy4nKyBjbGFzc1ByZWZpeCArIGMpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdmFyIHBvc0NsYXNzPVsvL+mcgOimgea3u+WKoCd0b3AgYm90dG9tIGxlZnQgcmlnaHQnY2xhc3PnmoTlhYPntKAKICAgICAgICAgICAgICAgICAgICAnaW1nLWNvbnRhaW5lcicsCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItdG9nZ2xlJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci1jb250YWluZXInLAogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJywKICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICBwb3NDbGFzcy5mb3JFYWNoKGZ1bmN0aW9uKGMpewogICAgICAgICAgICAgICAgICAgIGVsZU1hcHNbY10uY2xhc3NMaXN0LmFkZChjbGFzc1ByZWZpeCArIGMgKyAnLScgK3NCYXJQb3NpdGlvbik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB2YXIgaHZDbGFzcz1bLy/pnIDopoHmt7vliqAndiBoJ2NsYXNz55qE5YWD57SgCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItdG9nZ2xlJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci10b2dnbGUtY29udGVudCcsCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItY29udGFpbmVyJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci1jb250ZW50JywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci1jb250cm9sZXItcHJlJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci1jb250cm9sZXItbmV4dCcsCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItdGh1bWJuYWlscy1jb250YWluZXInLAogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgIGh2Q2xhc3MuZm9yRWFjaChmdW5jdGlvbihjKXsKICAgICAgICAgICAgICAgICAgICBlbGVNYXBzW2NdLmNsYXNzTGlzdC5hZGQoY2xhc3NQcmVmaXggKyBjICsgJy0nICsgc0JhckRpcmVjdGlvbik7CiAgICAgICAgICAgICAgICB9KTsKCgoKICAgICAgICAgICAgICAgIC8v5Zu+54mH5Yy65Z+f5rC05bmz5pa55ZCR55qE5rua5Yqo5p2hCiAgICAgICAgICAgICAgICB2YXIgaW1nU2Nyb2xsYmFySD1uZXcgdGhpcy5TY3JvbGxiYXIoewogICAgICAgICAgICAgICAgICAgIGJhcjplbGVNYXBzWydpbWctc2Nyb2xsYmFyLWgnXSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGU6ZWxlTWFwc1snaW1nLXNjcm9sbGJhci1oLWhhbmRsZSddLAogICAgICAgICAgICAgICAgICAgIHRyYWNrOmVsZU1hcHNbJ2ltZy1zY3JvbGxiYXItaC10cmFjayddLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydpbWctY29udGVudCddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUpOwogICAgICAgICAgICAgICAgdGhpcy5pbWdTY3JvbGxiYXJIPWltZ1Njcm9sbGJhckg7CgogICAgICAgICAgICAgICAgLy/lm77niYfljLrln5/lnoLnm7TmlrnlkJHnmoTmu5rliqjmnaEKICAgICAgICAgICAgICAgIHZhciBpbWdTY3JvbGxiYXJWPW5ldyB0aGlzLlNjcm9sbGJhcih7CiAgICAgICAgICAgICAgICAgICAgYmFyOmVsZU1hcHNbJ2ltZy1zY3JvbGxiYXItdiddLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZTplbGVNYXBzWydpbWctc2Nyb2xsYmFyLXYtaGFuZGxlJ10sCiAgICAgICAgICAgICAgICAgICAgdHJhY2s6ZWxlTWFwc1snaW1nLXNjcm9sbGJhci12LXRyYWNrJ10sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2ltZy1jb250ZW50J10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UpOwogICAgICAgICAgICAgICAgdGhpcy5pbWdTY3JvbGxiYXJWPWltZ1Njcm9sbGJhclY7CgogICAgICAgICAgICAgICAgLy/nvKnnlaXlm77ljLrln5/nmoTmu5rliqjmnaEKICAgICAgICAgICAgICAgIHZhciB0aHVtYlNjcm9sbGJhcjsKICAgICAgICAgICAgICAgIGlmKGlzSG9yaXpvbnRhbCl7CiAgICAgICAgICAgICAgICAgICAgdGh1bWJTY3JvbGxiYXI9bmV3IHRoaXMuU2Nyb2xsYmFyKHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFyOmVsZU1hcHNbJ3RodW1iLXNjcm9sbGJhci1oJ10sCiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZTplbGVNYXBzWyd0aHVtYi1zY3JvbGxiYXItaC1oYW5kbGUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2s6ZWxlTWFwc1sndGh1bWItc2Nyb2xsYmFyLWgtdHJhY2snXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGh1bWJTY3JvbGxiYXI9bmV3IHRoaXMuU2Nyb2xsYmFyKHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFyOmVsZU1hcHNbJ3RodW1iLXNjcm9sbGJhci12J10sCiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZTplbGVNYXBzWyd0aHVtYi1zY3JvbGxiYXItdi1oYW5kbGUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2s6ZWxlTWFwc1sndGh1bWItc2Nyb2xsYmFyLXYtdHJhY2snXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLnRodW1iU2Nyb2xsYmFyPXRodW1iU2Nyb2xsYmFyOwoKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CgogICAgICAgICAgICAgICAgdmFyIGltZ1N0YXRpc3RpY3M9ey8v5Zu+54mH55qE5oC757G777yM57uf6K6hLOWIneWni+WMluWAvAogICAgICAgICAgICAgICAgICAgIHJ1bGU6ewogICAgICAgICAgICAgICAgICAgICAgICBzaG93bjp0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBjb3VudDowLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjppMThuKCJhZHZhbmNlZFJ1bGVzVGlwIiksCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6aTE4bigiYWR2YW5jZWRSdWxlcyIpLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdHBSdWxlOnsKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd246dHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6MCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246aTE4bigidHBSdWxlc1RpcCIpLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOmkxOG4oInRwUnVsZXMiKSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHNjYWxlOnsKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd246dHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6MCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246aTE4bigic2NhbGVSdWxlc1RpcCIpLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOmkxOG4oInNjYWxlUnVsZXMiKSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZvcmNlOnsKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd246dHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6MCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246aTE4bigibm9TY2FsZVJ1bGVzVGlwIiksCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6aTE4bigibm9TY2FsZVJ1bGVzIiksCiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgLy8gbmV3CiAgICAgICAgICAgICAgICAgICAgLy8gc2NhbGVab29tUmVzaXplZDogewogICAgICAgICAgICAgICAgICAgIC8vICBzaG93bjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgLy8gIGNvdW50OiAwLAogICAgICAgICAgICAgICAgICAgIC8vICBkZXNjcmlwdGlvbjogJ+e8qeaUvueahOWbvueJh++8jOWbvueJh+WwuuWvuOacgOWwkeebuOW3ruavlOS+iyAnICsgcHJlZnMuZ2FsbGVyeS56b29tcmVzaXplZCArICclJywKICAgICAgICAgICAgICAgICAgICAvLyAgbmFtZTogJ+Wwj+e8qeaUvicKICAgICAgICAgICAgICAgICAgICAvLyB9LAogICAgICAgICAgICAgICAgICAgIHNjYWxlU21hbGw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd246IHByZWZzLmdhbGxlcnkuc2hvd1NtYWxsU2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpMThuKCJzbWFsbFJ1bGVzVGlwIixwcmVmcy5nYWxsZXJ5LnNjYWxlU21hbGxTaXplKSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaTE4bigic21hbGxSdWxlcyIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmltZ1N0YXRpc3RpY3M9aW1nU3RhdGlzdGljczsKCiAgICAgICAgICAgICAgICAvL+eUn+aIkOWIhuexu+S4i+aLieWIl+ihqAogICAgICAgICAgICAgICAgdmFyIHR5cGVNYXJrPScnOwogICAgICAgICAgICAgICAgdmFyIGltZ1N0YXRpc3RpY3NfaTsKICAgICAgICAgICAgICAgIGZvcih2YXIgaSBpbiBpbWdTdGF0aXN0aWNzKXsKICAgICAgICAgICAgICAgICAgICBpZighaW1nU3RhdGlzdGljcy5oYXNPd25Qcm9wZXJ0eShpKSljb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBpbWdTdGF0aXN0aWNzX2k9aW1nU3RhdGlzdGljc1tpXTsKICAgICAgICAgICAgICAgICAgICB0eXBlTWFyays9CiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIHRpdGxlPSInK2ltZ1N0YXRpc3RpY3NfaS5kZXNjcmlwdGlvbisnIj4nKwogICAgICAgICAgICAgICAgICAgICAgICAnPGlucHV0IHR5cGU9ImNoZWNrYm94IiBkYXRhLXR5cGU9IicraSsnIiBpZD0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0tY2F0ZWdvcnktJytpKyciIC8+JysKICAgICAgICAgICAgICAgICAgICAgICAgJzxsYWJlbCBmb3I9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtLWNhdGVnb3J5LScraSsnIj4nK2ltZ1N0YXRpc3RpY3NfaS5uYW1lKyc8L2xhYmVsPicrCiAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JzsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtZHJvcC1saXN0LWNhdGVnb3J5J10uaW5uZXJIVE1MPXR5cGVNYXJrOwoKCiAgICAgICAgICAgICAgICAvL+aUtuiXj+ebuOWFswogICAgICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb249ewogICAgICAgICAgICAgICAgICAgIGdldE1hdGNoZWQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLmFsbCB8fCB0aGlzLmdldCgpKS5fZmluZChmdW5jdGlvbih2YWx1ZSxpbmRleCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZS5zcmM9PXNlbGYuc3JjKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgY2hlY2s6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy/ku47nvJPlrZjmlbDmja7kuK3mo4Dmn6XjgIIKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQ9dGhpcy5nZXRNYXRjaGVkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGU9bWF0Y2hlZD8gbWF0Y2hlZFswXSA6IG51bGw7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRBcmVhVmFsdWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWdoTGlnaHQoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRBcmVhVmFsdWU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0QXJlYS52YWx1ZT10aGlzLmZhdm9yaXRlPyB0aGlzLmZhdm9yaXRlLmRlc2NyaXB0aW9uIDogc2VsZi5lbGVNYXBzWydoZWFkLWxlZnQtaW1nLWluZm8tZGVzY3JpcHRpb24nXS50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGhpZ2hMaWdodDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtY29sbGVjdCddLmNsYXNzTGlzdFt0aGlzLmZhdm9yaXRlPyAnYWRkJyA6ICdyZW1vdmUnXSgncHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdC1mYXZvcml0ZScpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYWRkOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGU9ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOnNlbGYuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJTcmM6ZGF0YXNldChzZWxmLnJlbGF0ZWRUaHVtYiwndGh1bWJTcmMnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdHVyYWxTaXplOnNlbGYuaW1nTmF0dXJhbFNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjp0aGlzLnRleHRBcmVhLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgLy/kuLrkuobpmLLmraLlpJrkuKrpobXpnaLlkIzml7bnmoTlgqjlrZjvvIzmt7vliqDliY3vvIzlhYjovb3lhaXmnIDmlrDnmoTmlbDmja7jgIIKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy/mo4Dmn6XmmK/lkKblt7Lnu4/lnKjph4zpnaLkuoYKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQ9dGhpcy5nZXRNYXRjaGVkKCk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZihtYXRjaGVkKXsvL+WmguaenOW3sue7j+WtmOWcqO+8jOWIoOmZpOaXp+eahOOAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGwuc3BsaWNlKG1hdGNoZWRbMV0sMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsLnVuc2hpZnQodGhpcy5mYXZvcml0ZSk7Ly/mt7vliqDliLDmnIDliY3pnaLjgIIKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWdoTGlnaHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZW1vdmU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy/ojrflvpfmnIDmlrDmlbDmja4KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy/mo4Dmn6XmmK/lkKblt7Lnu4/lnKjph4zpnaLkuoYKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQ9dGhpcy5nZXRNYXRjaGVkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hdGNoZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGwuc3BsaWNlKG1hdGNoZWRbMV0sMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZT1udWxsOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZ2hMaWdodCgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2F2ZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oJ3B2X2NvbGxlY3Rpb24nLGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh0aGlzLmFsbCkpKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdldDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0PXN0b3JhZ2UuZ2V0SXRlbSgncHZfY29sbGVjdGlvbicpIHx8ICdbXSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldD1KU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChyZXQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0PVtdOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbD1yZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlbnRlcjpmdW5jdGlvbigpewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5hbGwubGVuZ3RoPT0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGkxOG4oIm5vQ29sbGVjdGlvbllldCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubU1vZGU9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbj10aGlzLmRyb3BMaXN0QnV0dG9uOwogICAgICAgICAgICAgICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQ9aTE4bigiZXhpdENvbGxlY3Rpb24iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldChidXR0b24sJ2NvbW1hbmQnLCdleGl0Q29sbGVjdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRCdXR0b24uc3R5bGUuZGlzcGxheT0naW5saW5lLWJsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLmNsYXNzTGlzdC5hZGQoJ3B2LWdhbGxlcnktc2lkZWJhci10aHVtYm5haWxzX2hpZGUtc3BhbicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy/nlJ/miJBkb20KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lcj1jb250YWluZXI7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YV9pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Bhbk1hcms9Jyc7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpPTA7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKGRhdGFfaT10aGlzLmFsbFtpKytdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5NYXJrICs9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyIiAnKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgZGF0YS1uYXR1cmFsLXNpemU9IicgKyBKU09OLnN0cmluZ2lmeShkYXRhX2kubmF0dXJhbFNpemUpLnJlcGxhY2UoLyIvZywnJnF1b3Q7JykgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciIGRhdGEtc3JjPSInICsgZGF0YV9pLnNyYyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyIgZGF0YS10aHVtYi1zcmM9IicgKyBkYXRhX2kudGh1bWJTcmMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciPicrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXZlcnRpY2FsLWFsaWduLWhlbHBlciI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItbG9hZGluZyIgdGl0bGU9IicraTE4bigibG9hZGluZyIpKycuLi4uLi4iPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JzsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTD1zcGFuTWFyazsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CgoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZD1zZWxmLnNlbGVjdGVkOy8v5aSH5Lu9CgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdChjb250YWluZXIuY2hpbGRyZW5bMF0pOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRodW1iU2Nyb2xsYmFyLnJlc2V0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZFRodW1iKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBleGl0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLm1Nb2RlKXJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubU1vZGU9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidXR0b249dGhpcy5kcm9wTGlzdEJ1dHRvbjsKICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50PWkxOG4oInZpZXdDb2xsZWN0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoYnV0dG9uLCdjb21tYW5kJywnZW50ZXJDb2xsZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZEJ1dHRvbi5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLnJlbW92ZUNoaWxkKHRoaXMuY29udGFpbmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLmNsYXNzTGlzdC5yZW1vdmUoJ3B2LWdhbGxlcnktc2lkZWJhci10aHVtYm5haWxzX2hpZGUtc3BhbicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3QodGhpcy5zZWxlY3RlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGh1bWJTY3JvbGxiYXIucmVzZXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkVGh1bWIoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRleHRBcmVhOmVsZU1hcHNbJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3QtY29sbGVjdCddLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyksCiAgICAgICAgICAgICAgICAgICAgZHJvcExpc3RCdXR0b246ZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1vdGhlcnMnXS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb21tYW5kJD0iQ29sbGVjdGlvbiJdJyksCiAgICAgICAgICAgICAgICAgICAgaGVhZEJ1dHRvbjplbGVNYXBzWydoZWFkLWNvbW1hbmQtZXhpdC1jb2xsZWN0aW9uJ10sCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbj1jb2xsZWN0aW9uOwoKICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3QtY29sbGVjdCddLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGlmKCFjb2xsZWN0aW9uLmZhdm9yaXRlKXJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmZhdm9yaXRlW2RhdGFzZXQodGFyZ2V0LCdwcmVmcycpXT10YXJnZXQudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbGxlY3Rpb24uc2F2ZVRpbWVyKTsKICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnNhdmVUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24uc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgIH0sNTAwKTsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CgoKICAgICAgICAgICAgICAgIHZhciBzbGlkZVNob3c9ewogICAgICAgICAgICAgICAgICAgIG9wdHM6ewogICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbDo1MDAwLAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0OnRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t3YXJkOmZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBza2lwRXJyb3JJbWc6dHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgcnVuOmZhbHNlLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgLy90aW1pbmc6CiAgICAgICAgICAgICAgICAgICAgLy9zZWxlY3Qo6YCJ5Lit5LiL5LiA5Liq5Zu+54mH5ZCO77yI57yp55Wl5Zu+5qCP6YCJ5Lit5LqG77yJ77yM6L+Y5rKh5byA5aeL6K+75Y+W5aSn5Zu+77yI5LiA6Iis6YCJ5Lit5ZCO77yM5bu25pe2MjAwbXPlvIDlp4vor7vlj5blpKflm77vvIkpLAogICAgICAgICAgICAgICAgICAgIC8vbG9hZEVuZCjlvZPliY3mmL7npLrlm77niYflt7Lnu4/or7vlj5blrozmiJDlkI4pLAogICAgICAgICAgICAgICAgICAgIC8vY2xpY2so54K55Ye75oyJ6ZKuKSwKICAgICAgICAgICAgICAgICAgICAvL2NoYW5nZSjmlLnlj5jorr7nva4pCiAgICAgICAgICAgICAgICAgICAgcnVuOmZ1bmN0aW9uKHRpbWluZyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLm9wdHMucnVuKXJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRpbWluZyE9J2xvYWRFbmQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGltaW5nPT0nY2xpY2snIHx8IHRpbWluZz09J3NlbGVjdCcpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuZ2V0RWxlKCkpey8v5rKh5pyJ6KaB5YiH5o2i5Yiw55qE5Zu+54mH5LqG77yM5YGc5q2iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leGl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMub3B0cy5za2lwRXJyb3JJbWcpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5pbWdFcnJvciAmJiAhc2VsZi5pc0xvYWRpbmcpey8v56Gu5L+d5piv5b2T5YmN5Zu+54mH5ZKM6YCJ5Lit57yp55Wl5Zu+5LiA6Ie055qE5pe25YCZCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3QodGhpcy5nZXRFbGUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLm9wdHMud2FpdCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aW1pbmchPSdzZWxlY3QnICYmICh0aW1pbmc9PSdsb2FkRW5kJyAgfHwgKCFzZWxmLmlzTG9hZGluZyAmJiAoc2VsZi5pbWcuY29tcGxldGUgfHwgc2VsZi5pbWdFcnJvcikpKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nbygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aW1pbmchPSdsb2FkRW5kJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nbygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBnZXRFbGU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0VGh1bVNwYW4odGhpcy5vcHRzLmJhY2t3YXJkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZ286ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7Ly/lgZzmraLkuIrmrKHnmoTjgIIKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludGVydmFsPXRoaXMub3B0cy5pbnRlcnZhbDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9zZWxmPXRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuc2V0Q291bnRkb3duKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfc2VsZi5jb3VudGRvd25UaW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdChfc2VsZi5nZXRFbGUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0saW50ZXJ2YWwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0VGltZT1EYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZG93blRpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5zZXRDb3VudGRvd24oaW50ZXJ2YWwgLSAoRGF0ZS5ub3coKS1zdGFydFRpbWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwxMDApOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc3RvcDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvdW50ZG93bih0aGlzLm9wdHMuaW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jb3VudGRvd25UaW1lcik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBleGl0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5ydW49dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hTdGF0dXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzZXRDb3VudGRvd246ZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1jb3VudGRvd24nXS50ZXh0Q29udGVudD0odmFsdWUvMTAwMCkudG9GaXhlZCgyKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHN3aXRjaFN0YXR1czpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMucnVuPSF0aGlzLm9wdHMucnVuOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1idXR0b24taW5uZXInXS5jbGFzc0xpc3RbdGhpcy5vcHRzLnJ1bj8gJ2FkZCcgOiAncmVtb3ZlJ10oJ3B2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9uLWlubmVyX3N0b3AnKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNoZWNrOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5ydW4/ICB0aGlzLnJ1bignY2xpY2snKSA6IHRoaXMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHNsaWRlU2hvdy5zZXRDb3VudGRvd24oc2xpZGVTaG93Lm9wdHMuaW50ZXJ2YWwpOzsKICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVTaG93PXNsaWRlU2hvdzsKCiAgICAgICAgICAgICAgICAvL+W5u+eBr+eJh+aSreaUvuS4i+aLieWIl+ihqGNoYW5nZeS6i+S7tueahOWkhOeQhgogICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1zbGlkZS1zaG93J10uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgcHJlZnM9ZGF0YXNldCh0YXJnZXQsJ3ByZWZzJyk7CiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0LnR5cGU9PSdjaGVja2JveCcpewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT10YXJnZXQuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9cGFyc2VGbG9hdCh0YXJnZXQudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpc05hTih2YWx1ZSkpey8v5peg5pWICiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1zbGlkZVNob3cub3B0c1twcmVmc10gLyAxMDAwOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT12YWx1ZT4wID8gdmFsdWUgOiAxOwogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWU9dmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICo9IDEwMDA7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzbGlkZVNob3cub3B0c1twcmVmc109dmFsdWU7CiAgICAgICAgICAgICAgICAgICAgc2xpZGVTaG93LnJ1bignY2hhbmdlJyk7CiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzbGlkZVNob3cub3B0cyk7CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKCiAgICAgICAgICAgICAgICAvL+WIhuexu+S4i+aLieWIl+ihqOeahOeCueWHu+WPkeeUn2NoYW5nZeS6i+S7tueahOWkhOeQhgogICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1jYXRlZ29yeSddLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZT1kYXRhc2V0KHRhcmdldCwndHlwZScpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuaVN0YXRpc0NvcHlbdHlwZV0uc2hvd249dGFyZ2V0LmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zd2l0Y2hUaHVtYlZpc2libGUoKTsvL+WIh+aNouWbvueJh+exu+WIq+aYvumakDsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CgoKICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZEVsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIiksc3JjU3BsaXQ7CiAgICAgICAgICAgICAgICAvL+WRveS7pOS4i+aLieWIl+ihqOeahOeCueWHu+WkhOeQhgogICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1vdGhlcnMnXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgaWYoZS5idXR0b24hPTApcmV0dXJuOy8v5bem6ZSuCiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWFuZD1kYXRhc2V0KHRhcmdldCwnY29tbWFuZCcpOwogICAgICAgICAgICAgICAgICAgIGlmKCFjb21tYW5kKXJldHVybjsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2goY29tbWFuZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ29wZW5Jbk5ld1dpbmRvdyc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oc2VsZi5zcmMsJ19ibGFuaycpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BzSW1hZ2UnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKChwcmVmcy5nYWxsZXJ5LmVkaXRTaXRlPT0nUGl4bHInPydodHRwczovL3BpeGxyLmNvbS9lZGl0b3IvP2ltYWdlPSc6J2h0dHBzOi8vd3d3LnRvb2xwaWMuY29tL2FwaWVkaXRvci5odG1sP2ltYWdlPScpK3NlbGYuc3JjLCdfYmxhbmsnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzY3JvbGxJbnRvVmlldyc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29sbGVjdGlvbi5tTW9kZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoaTE4bigiaW5Db2xsZWN0aW9uIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRlZFRodW1iPXNlbGYucmVsYXRlZFRodW1iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4PWFycmF5Rm4uaW5kZXhPZi5jYWxsKHNlbGYuaW1nU3BhbnMscmVsYXRlZFRodW1iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRJbWc9c2VsZi5kYXRhW2luZGV4XS5pbWc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0SW1nKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKHRhcmdldEltZykgfHwgdW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUodGFyZ2V0SW1nKS5kaXNwbGF5PT0nbm9uZScpey8v5Zu+54mH5LiN5a2Y5Zyo5paH5qGj5Lit77yM5oiW6ICF6ZqQ6JeP5LqG44CCCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGkxOG4oImNhbnRGaW5kIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbmltaXplKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5hdmlnYXRlVG9JbWcodGFyZ2V0SW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2hFbGUodGFyZ2V0SW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNley8vZnJhbWXlj5HpgIHov4fmnaXnmoTml7blgJnliKDpmaTkuobkuI3og73kvKDpgIHnmoTlm77niYcKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncHYtbmF2aWdhdGVUb0ltZycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3B2LW5hdmlnYXRlVG9JbWcnLGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighZS5kZXRhaWwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoaTE4bigiY2FudEZpbmQiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWluaW1pemUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpey8v5bCGZnJhbWXmu5rliqjliLDkuK3pl7TkvY3nva4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGYuaWZyYW1lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5hdmlnYXRlVG9JbWcoc2VsZi5pZnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7Ly/pl67pl65mcmFtZeOAguOAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSUQ6bWVzc2FnZUlELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiduYXZpZ2F0ZVRvSW1nJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOnNlbGYuZnJvbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCcqJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdleHBvcnRJbWFnZXMnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5leHBvcnRJbWFnZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkb3dubG9hZEltYWdlJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY1NwbGl0PXNlbGYuc3JjLnNwbGl0KCIvIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEVsZS5ocmVmPXNlbGYuc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRFbGUuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsc3JjU3BsaXRbc3JjU3BsaXQubGVuZ3RoLTFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkRWxlLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29weUltYWdlcyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvcHlJbWFnZXModHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2Nyb2xsVG9FbmRBbmRSZWxvYWQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gdGFyZ2V0LnBhcmVudE5vZGUuZmlyc3RDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSAhY2hlY2tib3guY2hlY2tlZDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmcy5nYWxsZXJ5LnNjcm9sbEVuZEFuZExvYWQgPSBjaGVja2JveC5jaGVja2VkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bGxTY3JlZW4nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Z1bGxzY3JlZW5idG4nKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxGdWxsU2NyZWVuKCkpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQudGV4dENvbnRlbnQgPSBpMThuKCJlbnRlckZ1bGxzYyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuYnRuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXVuY2hGdWxsU2NyZWVuKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdmdWxsc2NyZWVuYnRuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQudGV4dENvbnRlbnQgPSBpMThuKCJleGl0RnVsbHNjIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZnVsbHNjcmVlbmJ0bicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ29wZW5QcmVmcyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuUHJlZnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbnRlckNvbGxlY3Rpb24nOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6L+b5YWl566h55CG5qih5byPCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmVudGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXhpdENvbGxlY3Rpb24nOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YCA5Ye6566h55CG5qih5byPCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmV4aXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKICAgICAgICAgICAgICAgIC8vIOebkeinhuWFqOWxj+eahOWPmOWMlgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZnVsbFNjcmVlbkNoYW5nZWQoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCAmJiAvLyBhbHRlcm5hdGl2ZSBzdGFuZGFyZCBtZXRob2QKICAgICAgICAgICAgICAgICAgICAgICAgIWRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICFkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCAmJgogICAgICAgICAgICAgICAgICAgICAgICAhZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwdi1nYWxsZXJ5LWZ1bGxzY3JlZW5idG4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ0bikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gaTE4bigiZW50ZXJGdWxsc2MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5yZW1vdmVDbGFzcygnZnVsbHNjcmVlbmJ0bicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsIGZ1bGxTY3JlZW5DaGFuZ2VkLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3pmdWxsc2NyZWVuY2hhbmdlJywgZnVsbFNjcmVlbkNoYW5nZWQsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBmdWxsU2NyZWVuQ2hhbmdlZCwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIC8v55Sf5oiQ5YiG5Lqr55qE5LiL5ouJ5YiX6KGoCiAgICAgICAgICAgICAgICB2YXIgc2hhcmVNYXJrPScnOwogICAgICAgICAgICAgICAgdmFyIHNoYXJlSXRlbTsKICAgICAgICAgICAgICAgIGZvcih2YXIgaSBpbiBwcmVmcy5zaGFyZSl7CiAgICAgICAgICAgICAgICAgICAgaWYoIXByZWZzLnNoYXJlLmhhc093blByb3BlcnR5KGkpKWNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIHNoYXJlSXRlbT1wcmVmcy5zaGFyZVtpXTsKICAgICAgICAgICAgICAgICAgICBpZihzaGFyZUl0ZW0uZGlzYWJsZWQpY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgc2hhcmVNYXJrKz0oCiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtc2l0ZT0iJytpKyciIHN0eWxlPSJcCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKFwnJysgc2hhcmVJdGVtLmljb24gKydcJyk7XAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOjRweCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6MjRweDsiPicrc2hhcmVJdGVtLm5hbWUrJzwvc3Bhbj4nKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1zaGFyZSddLmlubmVySFRNTD1zaGFyZU1hcms7CgogICAgICAgICAgICAgICAgLy/liIbkuqvkuIvmi4nliJfooajnmoTngrnlh7vlpITnkIYKICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3Qtc2hhcmUnXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgaWYoZS5idXR0b24hPTApcmV0dXJuOy8v5bem6ZSuCiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICB2YXIgc2l0ZT1kYXRhc2V0KHRhcmdldCwnc2l0ZScpOwogICAgICAgICAgICAgICAgICAgIGlmKCFzaXRlKXJldHVybjsKICAgICAgICAgICAgICAgICAgICB2YXIgc2l0ZV9pbmZvPXByZWZzLnNoYXJlW3NpdGVdOwogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbT1zaXRlX2luZm8uYXBpLmNhbGwoc2VsZi5pbWcsewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTplbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQudGl0bGUpLAogICAgICAgICAgICAgICAgICAgICAgICBwaWM6ZW5jb2RlVVJJQ29tcG9uZW50KHNlbGYuc3JjKSwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOmVuY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbi5ocmVmKSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZighcGFyYW0pcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHBhcmFtLnVybCwnX2JsYW5rJywnaGVpZ2h0PScrcGFyYW0ud1NpemUuaCsnLHdpZHRoPScrcGFyYW0ud1NpemUudysnLGxlZnQ9MzAsdG9wPTMwLGxvY2F0aW9uPW5vLHN0YXR1cz1ubyx0b29sYmFyPW5vLG1lbnViYXI9bm8sc2Nyb2xsYmFycz15ZXMnKTsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CgoKCiAgICAgICAgICAgICAgICB2YXIgbG9hZFRodW1ic1RpbWVyOwogICAgICAgICAgICAgICAgZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsZnVuY3Rpb24oZSl7Ly/lj5HnlJ9zY3JvbGzkuovku7bml7bliqDovb3nvKnnlaXlm74KICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobG9hZFRodW1ic1RpbWVyKTsvL+WKoOS4quW7tuaXtu+8jOWcqOi/nue7reinpuWPkeeahOaXtuWAmee8k+S4gOe8k+OAggogICAgICAgICAgICAgICAgICAgIGxvYWRUaHVtYnNUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZFRodW1iKCk7CiAgICAgICAgICAgICAgICAgICAgfSwyMDApOwogICAgICAgICAgICAgICAgfSxmYWxzZSk7CgogICAgICAgICAgICAgICAgdmFyIGNhblNjcm9sbD10cnVlOwogICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvQ2hhbmdlPWZ1bmN0aW9uKG5leHQpewogICAgICAgICAgICAgICAgICAgIGlmKGNhblNjcm9sbCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmdhbGxlcnkudHJhbnNpdGlvbil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5TY3JvbGw9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuU2Nyb2xsPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDUwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA/IHNlbGYuc2VsZWN0TmV4dCgpIDogc2VsZi5zZWxlY3RQcmV2aW91cygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFkZFdoZWVsRXZlbnQoZWxlTWFwc1snYm9keSddLGZ1bmN0aW9uKGUpey8vd2hlZWzkuovku7YKICAgICAgICAgICAgICAgICAgICBpZihlLmRlbHRhWiE9MClyZXR1cm47Ly966L20CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgaWYoZWxlTWFwc1snc2lkZWJhci1jb250YWluZXInXS5jb250YWlucyh0YXJnZXQpKXsvL+e8qeeVpeWbvuWMuua7muWKqOa7mui9rue/u+WbvueJhwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2U9c2VsZi50aHVtYlNwYW5PdXRlclNpemU7CgogICAgICAgICAgICAgICAgICAgICAgICBpZihlLmRlbHRhWTwwIHx8IGUuZGVsdGFYPDApey8v5ZCR5LiK5ruaCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZT0tZGlzdGFuY2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHRodW1iU2Nyb2xsYmFyLnNjcm9sbEJ5KGRpc3RhbmNlKQogICAgICAgICAgICAgICAgICAgIH1lbHNley8v5Zu+54mH5Yy65Z+f5rua5YqoCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZT0xMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUuZGVsdGFZIT0wKXsvL3novbQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGYuaW1nLmNsYXNzTGlzdC5jb250YWlucygncHYtZ2FsbGVyeS1pbWdfem9vbS1vdXQnKSl7Ly/lm77niYflj6/ku6XnvKnlsI/ml7bvvIzmu5rliqjlm77niYfvvIzlkKbliJnliIfmjaLlm77niYfjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlLmRlbHRhWSA8IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZT0tZGlzdGFuY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVNYXBzWydpbWctc2Nyb2xsYmFyLWgnXS5jb250YWlucyh0YXJnZXQpKXsvL+WmguaenOWcqOaoquWQkea7muWKqOadoeS4iuOAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTY3JvbGxiYXJILnNjcm9sbEJ5KGRpc3RhbmNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nU2Nyb2xsYmFyVi5zY3JvbGxCeShkaXN0YW5jZSkgJiYgcHJlZnMuZ2FsbGVyeS5zY3JvbGxFbmRUb0NoYW5nZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb0NoYW5nZShlLmRlbHRhWSA+IDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvQ2hhbmdlKGUuZGVsdGFZID4gMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvL3jovbQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUuZGVsdGFYIDwgMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2U9LWRpc3RhbmNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1Njcm9sbGJhckguc2Nyb2xsQnkoZGlzdGFuY2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKCiAgICAgICAgICAgICAgICAvL2ZvY3VzLGJsdXI7CiAgICAgICAgICAgICAgICBhZGRDdXNNb3VzZUV2ZW50KCdtb3VzZWVudGVyJyxjb250YWluZXIsZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGFkZEN1c01vdXNlRXZlbnQoJ21vdXNlbGVhdmUnLGNvbnRhaW5lcixmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1cigpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy/kuIrkuIvlt6blj7PliIfmjaLlm77niYcs56m65qC86ZSu5qih5ouf5rua5Yqo5LiA6aG1CgogICAgICAgICAgICAgICAgdmFyIHZhbGlkS2V5Q29kZT1bMzgsMzksNDAsMzcsMzIsOV0vL+S4iuWPs+S4i+W3piwzMuepuuagvCx0YWLnpoHmraLnhKbngrnliIfmjaLjgIIKICAgICAgICAgICAgICAgIHZhciBrZXlEb3duOwoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciBrZXlDb2RlPWUua2V5Q29kZTsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXg9dmFsaWRLZXlDb2RlLmluZGV4T2Yoa2V5Q29kZSk7CiAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXg9PS0xKXJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKCiAgICAgICAgICAgICAgICAgICAgaWYoIWNvbnRhaW5lci5jb250YWlucyh0YXJnZXQpKXJldHVybjsvL+inpuWPkeeEpueCueS4jeWGjWdhbGxlcnnph4zpnaLjgIIKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgIGlmKGtleUNvZGU9PTkpcmV0dXJuOy8vdGFi6ZSuCiAgICAgICAgICAgICAgICAgICAgaWYoa2V5Q29kZT09MzIpey8vMzLnqbrmoLzvvIzmqKHmi5/mu5rliqjkuIDpobUKICAgICAgICAgICAgICAgICAgICAgICAgaW1nU2Nyb2xsYmFyVi5zY3JvbGxCeVBhZ2VzKDEpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgaWYoa2V5RG93bilyZXR1cm47Ly/lt7LmjInkuIvjgIIKICAgICAgICAgICAgICAgICAgICBrZXlEb3duPXRydWU7CgogICAgICAgICAgICAgICAgICAgIHZhciBzdG9wOwogICAgICAgICAgICAgICAgICAgIHN3aXRjaChpbmRleCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDo7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdFByZXZpb3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wPXNlbGYuc2ltcGxlU2xpZGVTaG93KHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTo7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdE5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3A9c2VsZi5zaW1wbGVTbGlkZVNob3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGtleVVwSGFuZGxlcihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS5rZXlDb2RlIT12YWxpZEtleUNvZGVbaW5kZXhdKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLGtleVVwSGFuZGxlcixmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGtleURvd249ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJyxrZXlVcEhhbmRsZXIsZmFsc2UpOwoKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CgoKICAgICAgICAgICAgICAgIHZhciBpbWdEcmFnZWQ7CiAgICAgICAgICAgICAgICBlbGVNYXBzWydpbWctcGFyZW50J10uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxmdW5jdGlvbihlKXsvL+WmguaenOWbvueJh+WwuuWvuOWkp+S6juWxj+W5leeahOaXtuWAmeaMieS9j+WbvueJh+i/m+ihjOaLluenuwogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgaWYoZS5idXR0b24hPTAgfHwgdGFyZ2V0Lm5vZGVOYW1lIT0nSU1HJylyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgdmFyIGJpZ2dlcj10YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwdi1nYWxsZXJ5LWltZ196b29tLW91dCcpOy8v5aaC5p6c5piv5aSn5LqO5bGP5bmVCgogICAgICAgICAgICAgICAgICAgIHZhciBvQ2xpZW50PXsKICAgICAgICAgICAgICAgICAgICAgICAgeDplLmNsaWVudFgsCiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZS5jbGllbnRZLAogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBvU2Nyb2xsPXsKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDpzZWxmLmltZ1Njcm9sbGJhckguZ2V0U2Nyb2xsZWQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wOnNlbGYuaW1nU2Nyb2xsYmFyVi5nZXRTY3JvbGxlZCgpLAogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlRmlyZWRDb3VudD0wOwogICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlSGFuZGxlcj1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgbW92ZUZpcmVkQ291bnQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYobW92ZUZpcmVkQ291bnQ8Mil7Ly/nu5nkuKrnvJPlhrLjgILjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nRHJhZ2VkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJpZ2dlcil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUuY3Vyc29yPSBzdXBwb3J0LmNzc0N1cnNvclZhbHVlLmdyYWJiaW5nIHx8ICdwb2ludGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nU2Nyb2xsYmFyVi5zY3JvbGwob1Njcm9sbC50b3AtKGUuY2xpZW50WS1vQ2xpZW50LnkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nU2Nyb2xsYmFySC5zY3JvbGwob1Njcm9sbC5sZWZ0LShlLmNsaWVudFgtb0NsaWVudC54KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHVwSGFuZGxlcj1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUuY3Vyc29yPScnOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy/mi5bmm7PkuYvlkI7pmLvmraLpmo/lkI7lj6/og73kuqfnlJ9jbGlja+S6i+S7tuS6p+eUn+eahOWkp+Wwj+WIh+aNouOAggogICAgICAgICAgICAgICAgICAgICAgICAvL+ehruS/neWcqOmaj+WQjueahGNsaWNr5LqL5Lu25Y+R55Sf5ZCO5omn6KGMCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ0RyYWdlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLHVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLG1vdmVIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLHVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CgogICAgICAgICAgICAgICAgZWxlTWFwc1snaW1nLXBhcmVudCddLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXsvL+eCueWHu+WbvueJh+acrOi6q+WwseihjOWbvueJh+e8qeaUvuWkhOeQhgogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgaWYoZS5idXR0b24hPTAgfHwgdGFyZ2V0Lm5vZGVOYW1lIT0nSU1HJylyZXR1cm47CgogICAgICAgICAgICAgICAgICAgIGlmKGltZ0RyYWdlZCl7Ly/lnKjmi5bliqjlkI7op6blj5HnmoRjbGlja+S6i+S7tu+8jOWPlua2iOaOieOAguWFjeW+l+S4gOaLluWKqOWujOWwseeri+WNs+i/m+ihjOeahOe8qeaUvuOAguOAguOAggogICAgICAgICAgICAgICAgICAgICAgICBpbWdEcmFnZWQ9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwdi1nYWxsZXJ5LWltZ196b29tLWluJykpey8v5pS+5aSnCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZml0Q29udGFpbnM9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6b29tWCA9IHR5cGVvZiBlLm9mZnNldFg9PSd1bmRlZmluZWQnID8gZS5sYXllclggOiBlLm9mZnNldFg7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6b29tWSA9IHR5cGVvZiBlLm9mZnNldFk9PSd1bmRlZmluZWQnID8gZS5sYXllclkgOiBlLm9mZnNldFk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY2FsZVg9em9vbVgvdGFyZ2V0Lm9mZnNldFdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NhbGVZPXpvb21ZL3RhcmdldC5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZml0VG9TY3JlZW4oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeDpzY2FsZVgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OnNjYWxlWSwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHYtZ2FsbGVyeS1pbWdfem9vbS1vdXQnKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZml0Q29udGFpbnM9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5maXRUb1NjcmVlbigpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKCiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxmdW5jdGlvbihlKXsvL+m8oOagh+aMieWcqOWvvOiIquS4iu+8jOWIh+aNouWbvueJhwogICAgICAgICAgICAgICAgICAgIGlmKGUuYnV0dG9uIT0wKXJldHVybjsvL+W3pumUrgogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0Lm5vZGVOYW1lPT0nSU1HJyllLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaGVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3A7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHRhcmdldCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZWxlTWFwc1snaW1nLWNvbnRyb2xlci1wcmUnXTo7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZWxlTWFwc1snc2lkZWJhci1jb250cm9sZXItcHJlJ106ey8v5LiK5LiA5LiqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdFByZXZpb3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wPXNlbGYuc2ltcGxlU2xpZGVTaG93KHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZWxlTWFwc1snaW1nLWNvbnRyb2xlci1uZXh0J106OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGVsZU1hcHNbJ3NpZGViYXItY29udHJvbGVyLW5leHQnXTp7Ly/kuIvkuIDkuKoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0TmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcD1zZWxmLnNpbXBsZVNsaWRlU2hvdygpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1vdXNlVXBIYW5kbGVyKGUpewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZVVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGlmKG1hdGNoZWQpewogICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLG1vdXNlVXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LGZhbHNlKTsKCiAgICAgICAgICAgICAgICBlbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpey8v54K55Ye757yp55Wl5Zu+5YiH5o2iCiAgICAgICAgICAgICAgICAgICAgaWYoZS5idXR0b24hPTApcmV0dXJuOy8v5bem6ZSuCiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0UDsKICAgICAgICAgICAgICAgICAgICBpZighZGF0YXNldCh0YXJnZXQsJ3NyYycpICYmICh0YXJnZXRQPXRhcmdldC5wYXJlbnROb2RlKSAmJiAhZGF0YXNldCh0YXJnZXRQLCdzcmMnKSlyZXR1cm47CgogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0KHRhcmdldFA/IHRhcmdldFAgOiB0YXJnZXQpOwogICAgICAgICAgICAgICAgfSxmYWxzZSk7CgogICAgICAgICAgICAgICAgLy/ngrnlh7vor7vlj5bplJnor6/nmoTlm77niYfljaDkvY3nrKbph43mlrDor7vlj5YKICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2ltZ19icm9rZW4nXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5pc0xvYWRpbmcpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdChzZWxmLmVycm9yU3Bhbik7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0SW1nKHNlbGYuZXJyb3JTcGFuKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSxmYWxzZSk7CgoKICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2hlYWQnXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7Ly/pobbmoI/kuIrpnaLnmoTlkb3ku6QKICAgICAgICAgICAgICAgICAgICBpZihlLmJ1dHRvbiE9MClyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBpZihlbGVNYXBzWydoZWFkLWNvbW1hbmQtY2xvc2UnXT09dGFyZ2V0KXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1vcGVyYXRlJ10uY29udGFpbnModGFyZ2V0KSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1JlYWR5KHNlbGYuc3JjLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEltZ1dpbmRvd0ModGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihlbGVNYXBzWydoZWFkLWNvbW1hbmQtbmV4dFBhZ2UnXS5jb250YWlucyh0YXJnZXQpKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHRTcGFuPWVsZU1hcHNbJ2hlYWQtY29tbWFuZC1uZXh0UGFnZSddLnF1ZXJ5U2VsZWN0b3IoInNwYW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGV4dFNwYW4uaW5uZXJIVE1MPT1pMThuKCJsb2FkaW5nIikpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFNwYW4uaW5uZXJIVE1MPWkxOG4oImxvYWRBbGwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3Bhbi5pbm5lckhUTUw9aTE4bigibG9hZGluZyIpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbXBsZXRlUGFnZXM9W107CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubmV4dFBhZ2UoKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihlbGVNYXBzWydoZWFkLWNvbW1hbmQtY29sbGVjdCddLmNvbnRhaW5zKHRhcmdldCkpewogICAgICAgICAgICAgICAgICAgICAgICBpZihjb2xsZWN0aW9uLmZhdm9yaXRlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5hZGQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihlbGVNYXBzWydoZWFkLWNvbW1hbmQtZXhpdC1jb2xsZWN0aW9uJ10uY29udGFpbnModGFyZ2V0KSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24uZXhpdCgpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1zbGlkZS1zaG93J10uY29udGFpbnModGFyZ2V0KSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlU2hvdy5zd2l0Y2hTdGF0dXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVTaG93LmNoZWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB9LGZhbHNlKTsKCgogICAgICAgICAgICAgICAgLy/ngrnlh7vov5jljp/jgIIKICAgICAgICAgICAgICAgIG1heGltaXplVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldD09dGhpcyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvdygpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc2l6ZUhhbmRsZXIoKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5taW5pbWl6ZWQ9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CgoKICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2l6ZUhhbmRsZXI9dGhpcy5yZXNpemVIYW5kbGVyLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl9rZXlEb3duTGlzdGVuZXI9dGhpcy5rZXlEb3duTGlzdGVuZXIuYmluZCh0aGlzKTsKICAgICAgICAgICAgICAgIHRoaXMuX2tleVVwTGlzdGVuZXI9dGhpcy5rZXlVcExpc3RlbmVyLmJpbmQodGhpcyk7CgogICAgICAgICAgICAgICAgLy/mj5LlhaXliqjmgIHnlJ/miJDnmoRjc3PmlbDmja7jgIIKICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsU1NoZWV0Lmluc2VydFJ1bGUoJy5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyeycrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoaXNIb3Jpem9udGFsID8gJ3dpZHRoJyA6ICdoZWlnaHQnKSArICc6JyAgKyAoaXNIb3Jpem9udGFsID8gIHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZU1hcHNbJ3NpZGViYXItdGh1bWJuYWlscy1jb250YWluZXInXSkuaGVpZ2h0IDogdW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddKS53aWR0aCkpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ30nLHRoaXMuZ2xvYmFsU1NoZWV0LmNzc1J1bGVzLmxlbmd0aCk7CgogICAgICAgICAgICAgICAgdGhpcy5mb3JjZVJlcGFpbnRUaW1lcz0wOwoKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd249ZmFsc2U7CgogICAgICAgICAgICAgICAgLy8g5oiR5re75Yqg55qE6YOo5YiGCiAgICAgICAgICAgICAgICB0aGlzLmluaXRUb2dnbGVCYXIoKTsKICAgICAgICAgICAgICAgIHRoaXMuaW5pdFpvb20oKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGNoYW5nZU1pblZpZXc6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBtYXhTaXplPTAsbWluU2l6ZT0wOwogICAgICAgICAgICAgICAgdmFyIHNpemVJbnB1dFc9dGhpcy5nYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoIiNtaW5zaXplVyIpOwogICAgICAgICAgICAgICAgc2l6ZUlucHV0Vy50aXRsZT1zaXplSW5wdXRXLnZhbHVlKyJweCI7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWl0ZW0pcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uc2l6ZVc+bWF4U2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2l6ZT1pdGVtLnNpemVXOwogICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uc2l6ZVc8bWluU2l6ZSB8fCBtaW5TaXplPT0wKQogICAgICAgICAgICAgICAgICAgICAgICBtaW5TaXplPWl0ZW0uc2l6ZVc7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHNpemVJbnB1dFcubWF4PW1heFNpemU7CiAgICAgICAgICAgICAgICBzaXplSW5wdXRXLm1pbj1taW5TaXplOwogICAgICAgICAgICAgICAgbWF4U2l6ZT0wO21pblNpemU9MDsKICAgICAgICAgICAgICAgIHZhciBzaXplSW5wdXRIPXRoaXMuZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCIjbWluc2l6ZUgiKTsKICAgICAgICAgICAgICAgIHNpemVJbnB1dEgudGl0bGU9c2l6ZUlucHV0SC52YWx1ZSsicHgiOwogICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgIGlmKCFpdGVtKXJldHVybjsKICAgICAgICAgICAgICAgICAgICBpZihpdGVtLnNpemVIPm1heFNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgIG1heFNpemU9aXRlbS5zaXplSDsKICAgICAgICAgICAgICAgICAgICBpZihpdGVtLnNpemVIPG1pblNpemUgfHwgbWluU2l6ZT09MCkKICAgICAgICAgICAgICAgICAgICAgICAgbWluU2l6ZT1pdGVtLnNpemVIOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzaXplSW5wdXRILm1heD1tYXhTaXplOwogICAgICAgICAgICAgICAgc2l6ZUlucHV0SC5taW49bWluU2l6ZTsKCiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWl0ZW0pcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHZhciBzcGFuTWFyaz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJzcGFuLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYi1jb250YWluZXJbZGF0YS1zcmM9JyIraXRlbS5zcmMrIiddIik7CiAgICAgICAgICAgICAgICAgICAgaWYoc3Bhbk1hcmspewogICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLnNpemVXPHNpemVJbnB1dFcudmFsdWUgfHwgaXRlbS5zaXplSDxzaXplSW5wdXRILnZhbHVlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5NYXJrLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsuc3R5bGUuZGlzcGxheT0iIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5pdFRvZ2dsZUJhcjogZnVuY3Rpb24oKSB7ICAvLyDmmK/lkKbmmL7npLrliIfmjaIgc2lkZWJhciDmjInpkq4KICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAqIFRPRE/vvJrku7/pgKDkuIvpnaLnmoTpk77mjqXph43mlrDmlLnpgKDov4fvvJ8KICAgICAgICAgKiBodHRwOi8vaW1hZ2UuYmFpZHUuY29tL2RldGFpbC9uZXdpbmRleD9jb2w9JUU4JUI1JTg0JUU4JUFFJUFGJnRhZz0lRTQlQkQlOTMlRTglODIlQjImcG49MCZwaWQ9NTEyMzY2MjgyMTY4ODE0MjQ3OCZhaWQ9JnVzZXJfaWQ9MTAwODYmc2V0aWQ9LTEmc29ydD0wJm5ld3NQbj00JnN0YXI9JmZyPWhvdHdvcmQmZnJvbT0xCiAgICAgICAgICovCiAgICAgICAgICAgICAgICBpZiAocHJlZnMuZ2FsbGVyeS5zaWRlYmFyVG9nZ2xlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRvZ2dsZUJhciA9IHRoaXMuZWxlTWFwc1snc2lkZWJhci10b2dnbGUnXTsKICAgICAgICAgICAgICAgICAgICB0b2dnbGVCYXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlLmhlaWdodCA9ICcxMnB4JzsKICAgICAgICAgICAgICAgICAgICB0b2dnbGVCYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnNob3dIaWRlQm90dG9tLmJpbmQodGhpcyksIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgICAgLy8g6aG26YOo5ZyG6KeSCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwcmVmcy5nYWxsZXJ5LnNpZGViYXJQb3NpdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHggOHB4IDAgMCc7ICAvLyDlt6bkuIrjgIHlj7PkuIrjgIHlj7PkuIvjgIHlt6bkuIsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0b3AnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwIDAgOHB4IDhweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVCYXIuc3R5bGUuaGVpZ2h0ID0gJzYwcHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwIDhweCA4cHggMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlLmhlaWdodCA9ICc2MHB4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUJhci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4IDAgMCA4cHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBzaG93SGlkZUJvdHRvbTogZnVuY3Rpb24oKSB7ICAvLyDmmL7npLrpmpDol48gc2lkZWJhci1jb250YWluZXIKICAgICAgICAgICAgICAgIHZhciBzaWRlYmFyQ29udGFpbmVyID0gdGhpcy5lbGVNYXBzWydzaWRlYmFyLWNvbnRhaW5lciddLAogICAgICAgICAgICAgICAgICAgIGlzSGlkZGVuID0gc2lkZWJhckNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID09ICdoaWRkZW4nOwoKICAgICAgICAgICAgICAgIHNpZGViYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IGlzSGlkZGVuID8gJ3Zpc2libGUnIDogJ2hpZGRlbic7CgogICAgICAgICAgICAgICAgdmFyIHNpZGViYXJQb3NpdGlvbiA9IHByZWZzLmdhbGxlcnkuc2lkZWJhclBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgIGNhcGl0YWxpemUgPSBmdW5jdGlvbihzdHJpbmcpIHsgLy8g5bCG5a2X56ym5Liy5Lit5q+P5Liq5Y2V6K+N6aaW5a2X5q+N5aSn5YaZCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3b3JkcyA9IHN0cmluZy5zcGxpdCgiICIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3Jkc1tpXSA9IHdvcmRzW2ldLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZHNbaV0uc2xpY2UoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmRzLmpvaW4oIiAiKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIOS/ruato+S4i+WbvueJh+W6lemDqOeahOmrmOW6pgogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydpbWctY29udGFpbmVyJ10uc3R5bGVbJ2JvcmRlcicgKyBjYXBpdGFsaXplKHNpZGViYXJQb3NpdGlvbildID0gaXNIaWRkZW4gPwogICAgICAgICAgICAgICAgICAgIHByZWZzLmdhbGxlcnkuc2lkZWJhclNpemUgKyAncHggc29saWQgdHJhbnNwYXJlbnQnIDoKICAgICAgICAgICAgICAgICcwJzsKICAgICAgICAgICAgICAgIC8vIOS/ruato+W6lemDqOi3neemuwogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydzaWRlYmFyLXRvZ2dsZSddLnN0eWxlW3NpZGViYXJQb3NpdGlvbl0gPSBpc0hpZGRlbiA/ICctNXB4JyA6ICcwJzsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5pdFpvb206IGZ1bmN0aW9uKCkgeyAgLy8g5aaC5p6c5pyJ5pS+5aSn77yM5YiZ5oqK5Zu+54mH5Y+KIHNpZGViYXIg6YOo5YiG57yp5pS+5q+U546H5pS55Li6IDEKICAgICAgICAgICAgICAgIGlmIChwcmVmcy5nYWxsZXJ5LmF1dG9ab29tICYmIGRvY3VtZW50LmJvZHkuc3R5bGUuem9vbSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgb1pvb20gPSBkZXRlY3Rab29tKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9ab29tID4gMTAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlTWFwc1snYm9keSddLnN0eWxlLnpvb20gPSAxMDAgLyBvWm9vbTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBnZXRUaHVtU3BhbjpmdW5jdGlvbihwcmV2aW91cyxyZWxhdGVkVGFyZ2V0KXsKICAgICAgICAgICAgICAgIHZhciByZXQ7CiAgICAgICAgICAgICAgICB2YXIgcnQgPSByZWxhdGVkVGFyZ2V0IHx8IHRoaXMuc2VsZWN0ZWQ7CiAgICAgICAgICAgICAgICBpZighcnQpcmV0dXJuOwogICAgICAgICAgICAgICAgd2hpbGUoKHJ0PXByZXZpb3VzID8gcnQucHJldmlvdXNFbGVtZW50U2libGluZyA6IHJ0Lm5leHRFbGVtZW50U2libGluZykpewogICAgICAgICAgICAgICAgICAgIGlmKHJ0LmNsaWVudFdpZHRoIT0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0PXJ0OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByZXZpb3VzOmZhbHNlLAogICAgICAgICAgICBzZWxlY3RQcmV2aW91czpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91cz10cnVlOwogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5nZXRUaHVtU3Bhbih0cnVlKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlbGVjdE5leHQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuZ2V0VGh1bVNwYW4oKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlbGVjdDpmdW5jdGlvbihlbGUsbm9UcmFuc2l0aW9uKXsKICAgICAgICAgICAgICAgIGlmKCFlbGUgfHwgdGhpcy5zZWxlY3RlZD09ZWxlKXJldHVybjsKICAgICAgICAgICAgICAgIGlmKHRoaXMuc2VsZWN0ZWQpewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNlbGVjdGVkQ2xhc3NOYW1lKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkLmNsYXNzTGlzdC5yZW1vdmUoJ3B2LWdhbGxlcnktc2lkZWJhci10aHVtYl9zZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QuYWRkKHRoaXMuc2VsZWN0ZWRDbGFzc05hbWUpOwogICAgICAgICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQoJ3B2LWdhbGxlcnktc2lkZWJhci10aHVtYl9zZWxlY3RlZCcpOwoKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQ9ZWxlOwogICAgICAgICAgICAgICAgdGhpcy5hcnJvd1Zpc2liKCk7CgogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRJbWdUaW1lcik7CiAgICAgICAgICAgICAgICBpZihwcmVmcy5nYWxsZXJ5LnRyYW5zaXRpb24pewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEltZ1RpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXsvL+W/q+mAn+i3s+i9rOeahOaXtuWAmeS4jeimgeWwneivleivu+WPluWbvueJh+OAggogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRJbWcoZWxlKTsKICAgICAgICAgICAgICAgICAgICB9LDIwMCk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRJbWcoZWxlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW50b1ZpZXcobm9UcmFuc2l0aW9uKTsKICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VSZXBhaW50KCk7CiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlU2hvdy5ydW4oJ3NlbGVjdCcpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2FkVGh1bWI6ZnVuY3Rpb24oKXsvL+ivu+WPluWPr+inhuiMg+WbtOmHjOmdoueahOe8qeeVpeWbvgogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIHZhciBwcm89c2VsZi5pc0hvcml6b250YWwgPyBbJ3Njcm9sbExlZnQnLCdjbGllbnRXaWR0aCcsJ29mZnNldExlZnQnLCdvZmZzZXRXaWR0aCddIDogWydzY3JvbGxUb3AnLCdjbGllbnRIZWlnaHQnLCdvZmZzZXRUb3AnLCdvZmZzZXRIZWlnaHQnXTsKICAgICAgICAgICAgICAgIHZhciB0aHVtYkM9c2VsZi5lbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ107CgogICAgICAgICAgICAgICAgdmFyIHNjcm9sbGVkPXRodW1iQ1twcm9bMF1dOwoKICAgICAgICAgICAgICAgIHZhciBsb2FkU3RvcERpcz1zY3JvbGxlZCArIHRodW1iQ1twcm9bMV1dOwoKICAgICAgICAgICAgICAgIHZhciBpbWdTcGFucz1zZWxmLnNlbGVjdGVkLnBhcmVudE5vZGUuY2hpbGRyZW47CiAgICAgICAgICAgICAgICB2YXIgc3Bhbl9pOwogICAgICAgICAgICAgICAgdmFyIHNwYW5PZmZzZXQ7CiAgICAgICAgICAgICAgICB2YXIgdGh1bWI7CgogICAgICAgICAgICAgICAgdmFyIGk9MAogICAgICAgICAgICAgICAgd2hpbGUoc3Bhbl9pPWltZ1NwYW5zW2krK10pewogICAgICAgICAgICAgICAgICAgIGlmKHNwYW5faS5jbGllbnRXaWR0aD09MCljb250aW51ZTsvL+makOiXj+eahAoKICAgICAgICAgICAgICAgICAgICBzcGFuT2Zmc2V0PXNwYW5faVtwcm9bMl1dOwogICAgICAgICAgICAgICAgICAgIGlmKHNwYW5PZmZzZXQgKyBzcGFuX2lbcHJvWzNdXSA8PSBzY3JvbGxlZCljb250aW51ZTsvL+WcqOa7muWKqOadoeS4iumdouS6hgogICAgICAgICAgICAgICAgICAgIGlmKHNwYW5PZmZzZXQgPj0gbG9hZFN0b3BEaXMpYnJlYWs7Ly/lnKjmu5rliqjmnaHkuIvpnaLkuoYKCiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YXNldChzcGFuX2ksJ3RodW1iTG9hZGVkJykpY29udGludWU7Ly/lt7Lnu4/liqDovb3kuobnvKnnlaXlm74KCiAgICAgICAgICAgICAgICAgICAgdGh1bWI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgICAgICAgICAgICAgICAgdGh1bWIuc3JjPWRhdGFzZXQoc3Bhbl9pLCd0aHVtYlNyYycpIHx8IGRhdGFzZXQoc3Bhbl9pLCdzcmMnKSB8fCBwcmVmcy5pY29ucy5icm9rZW5JbWdfc21hbGw7CiAgICAgICAgICAgICAgICAgICAgdGh1bWIuY2xhc3NOYW1lPSdwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWInOwoKICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KHNwYW5faSwndGh1bWJMb2FkZWQnLCd0cnVlJyk7CiAgICAgICAgICAgICAgICAgICAgc3Bhbl9pLmFwcGVuZENoaWxkKHRodW1iKTsKCiAgICAgICAgICAgICAgICAgICAgaW1nUmVhZHkodGh1bWIsewogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjpmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3JjPXByZWZzLmljb25zLmJyb2tlbkltZ19zbWFsbDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlbGVjdGVkSW50b1ZpZXc6ZnVuY3Rpb24obm9UcmFuc2l0aW9uKXsKICAgICAgICAgICAgICAgIHZhciB0aHVtQkM9dGhpcy5lbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ107CiAgICAgICAgICAgICAgICB2YXIgcHJvPXRoaXMuaXNIb3Jpem9udGFsID8gWydvZmZzZXRMZWZ0JywnY2xpZW50V2lkdGgnLCdvZmZzZXRXaWR0aCddIDogWydvZmZzZXRUb3AnLCdjbGllbnRIZWlnaHQnLCdvZmZzZXRIZWlnaHQnXSA7CiAgICAgICAgICAgICAgICAvL+mcgOimgea7muWKqOeahOi3neemu+OAggogICAgICAgICAgICAgICAgdmFyIG5lZWRTY3JvbGxEaXM9IHRoaXMuc2VsZWN0ZWRbcHJvWzBdXTsKICAgICAgICAgICAgICAgIC8v5bC95Y+v6IO955qE5bGF5Lit5pi+56S6CiAgICAgICAgICAgICAgICB2YXIgdGh1bUJDQ2xpZW50PXRodW1CQ1twcm9bMV1dOwogICAgICAgICAgICAgICAgdmFyIHNjcm9sbENlbnRlcj1NYXRoLm1heCgodGh1bUJDQ2xpZW50IC0gdGhpcy5zZWxlY3RlZFtwcm9bMl1dKS8yLDApOwoKICAgICAgICAgICAgICAgIHRoaXMudGh1bWJTY3JvbGxiYXIuc2Nyb2xsKG5lZWRTY3JvbGxEaXMgLSBzY3JvbGxDZW50ZXIsZmFsc2UsIW5vVHJhbnNpdGlvbik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldEltZzpmdW5jdGlvbihlbGUpewogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgICAgIHZhciBzcmMgPSBkYXRhc2V0KGVsZSwnc3JjJyk7CgogICAgICAgICAgICAgICAgdGhpcy5sYXN0TG9hZGluZz1zcmM7Ly/orrDkvY/mnIDlkI7or7vlj5bnmoTlm77niYcKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nPXRydWU7Ly/ooajnpLrpgInmi6nnmoTlm77niYfmraPlnKjor7vlj5YKCiAgICAgICAgICAgICAgICAvLyDnibnmrornmoQgeGhyIOaWueW8j+iOt+WPlgogICAgICAgICAgICAgICAgdmFyIHhociA9IGRhdGFzZXQoZWxlLCAneGhyJyk7CiAgICAgICAgICAgICAgICBpZiAoeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHhockVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoZWxlLCAneGhyJywgJycpOwogICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KGVsZSwgJ3NyYycsIGRhdGFzZXQoZWxlLCAndGh1bWItc3JjJykpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmdldEltZyhlbGUpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgeGhyTG9hZC5sb2FkKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzcmMsCiAgICAgICAgICAgICAgICAgICAgICAgIHhocjogSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoeGhyKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGNiOiBmdW5jdGlvbihpbWdTcmMsIGltZ1NyY3MsIGNhcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdTcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KGVsZSwgJ3NyYycsIGltZ1NyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldChlbGUsICd4aHInLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5nZXRJbWcoZWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyRXJyb3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogeGhyRXJyb3IKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGFsbExvYWRpbmc9dGhpcy5hbGxMb2FkaW5nOwogICAgICAgICAgICAgICAgaWYoYWxsTG9hZGluZy5pbmRleE9mKHNyYykhPS0xKXsvL+WcqOivu+WPlumYn+WIl+S4reOAggogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBhbGxMb2FkaW5nLnB1c2goc3JjKTsKCiAgICAgICAgICAgICAgICAvL+S4iuS4gOS4quivu+WPluS4reeahOWbvueJh++8jOS4jeaYr+W9k+WJjeaYvuekuueahOOAgumCo+S5iOebtOaOpee7iOatogogICAgICAgICAgICAgICAgdmFyIHByZUltZ1I9dGhpcy5pbWdSZWFkeTsKICAgICAgICAgICAgICAgIGlmKHByZUltZ1IgJiYgdGhpcy5pbWcpewogICAgICAgICAgICAgICAgICAgIGlmKHByZUltZ1IuaW1nLnNyYyE9dGhpcy5zcmMpewogICAgICAgICAgICAgICAgICAgICAgICBwcmVJbWdSLmFib3J0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZUltZ1IucmVtb3ZlTEkoKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgLy/mmL7npLror7vlj5bmjIfnpLrlmajjgIIKICAgICAgICAgICAgICAgIHZhciBsb2FkaW5nSW5kaWNhdG9yPWVsZS5xdWVyeVNlbGVjdG9yKCcucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iLWxvYWRpbmcnKTsKICAgICAgICAgICAgICAgIGxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheT0nYmxvY2snOwoKCiAgICAgICAgICAgICAgICB0aGlzLmltZ1JlYWR5PWltZ1JlYWR5KHNyYyx7CiAgICAgICAgICAgICAgICAgICAgcmVhZHk6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy/ku47or7vlj5bpmJ/liJfkuK3liKDpmaToh6rlt7EKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4PWFsbExvYWRpbmcuaW5kZXhPZihzcmMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCE9LTEpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsTG9hZGluZy5zcGxpY2UoaW5kZXgsMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBpZihzcmMhPXNlbGYubGFzdExvYWRpbmcpcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0luZGljYXRvci5zdHlsZS5kaXNwbGF5PScnOwogICAgICAgICAgICAgICAgICAgICAgICBpZihwcmVJbWdSKXByZUltZ1IuYWJvcnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSW1nKHRoaXMsZWxlKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGxvYWRFbmQ6ZnVuY3Rpb24oZSl7Ly/lnKhsb2FkZW5k5ZCO5byA5aeL6aKE6K+744CCCiAgICAgICAgICAgICAgICAgICAgICAgIC8v5LuO6K+75Y+W6Zif5YiX5Lit5Yig6Zmk6Ieq5bexCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleD1hbGxMb2FkaW5nLmluZGV4T2Yoc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXghPS0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbExvYWRpbmcuc3BsaWNlKGluZGV4LDEpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3JjIT1zZWxmLmxhc3RMb2FkaW5nKXJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUudHlwZT09J2Vycm9yJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXk9Jyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yU3Bhbj1lbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwcmVJbWdSKXByZUltZ1IuYWJvcnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEltZyh0aGlzLGVsZSx0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2xpZGVTaG93LnJ1bignbG9hZEVuZCcpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLCfpooTor7vlvIDlp4snKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJlZnMuZ2FsbGVyeS5wcmVsb2FkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGYucHJlbG9hZGluZyl7Ly/nu5PmnZ/kuIrmrKHnmoTpooTor7vjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByZWxvYWRpbmcuYWJvcnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByZWxvYWRpbmc9bmV3IHNlbGYuUHJlbG9hZChlbGUsc2VsZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByZWxvYWRpbmcucHJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB0aGlzLmltZ1JlYWR5LnJlbW92ZUxJPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0luZGljYXRvci5zdHlsZS5kaXNwbGF5PScnOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWRJbWc6ZnVuY3Rpb24oaW1nLHJlbGF0ZWRUaHVtYixlcnJvcil7CiAgICAgICAgICAgICAgICBpZihpbWcubm9kZU5hbWUhPSdJTUcnKXsvL+WFiOivu+WPluOAggogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW1nKGltZyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZih0aGlzLmltZyl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmltZyk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBpbWdOYXR1cmFsU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDppbWcubmF0dXJhbEhlaWdodCwKICAgICAgICAgICAgICAgICAgICB3OmltZy5uYXR1cmFsV2lkdGgsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5pbWdOYXR1cmFsU2l6ZT1pbWdOYXR1cmFsU2l6ZTsKCiAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ2hlYWQtbGVmdC1pbWctaW5mby1yZXNvbHV0aW9uJ10udGV4dENvbnRlbnQ9aW1nTmF0dXJhbFNpemUudyArICcgeCAnICsgaW1nTmF0dXJhbFNpemUuaDsKICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxzPXRoaXMuZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLmNoaWxkTm9kZXMsaT0wOwogICAgICAgICAgICAgICAgd2hpbGUodGh1bWJuYWlsc1tpXSE9cmVsYXRlZFRodW1iICYmIGk8dGh1bWJuYWlscy5sZW5ndGgpaSsrOwogICAgICAgICAgICAgICAgaWYoaTx0aHVtYm5haWxzLmxlbmd0aCl0aGlzLmVsZU1hcHNbJ2hlYWQtbGVmdC1pbWctaW5mby1jb3VudCddLnRleHRDb250ZW50PSLvvIgiKyhpKzEpKyIgLyAiK3RodW1ibmFpbHMubGVuZ3RoKyLvvIkiOwogICAgICAgICAgICAgICAgLy8g5Yqg5LiK5Zu+54mH55qE5rOo6YeKCiAgICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSBkZWNvZGVVUklDb21wb25lbnQoZGF0YXNldChyZWxhdGVkVGh1bWIsICdkZXNjcmlwdGlvbicpKSwKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TGVuZ3RoID0gcHJlZnMuZ2FsbGVyeS5kZXNjcmlwdGlvbkxlbmd0aDsKICAgICAgICAgICAgICAgIHRoaXMuZWxlTWFwc1snaGVhZC1sZWZ0LWltZy1pbmZvLWRlc2NyaXB0aW9uJ10udGl0bGUgPSBkZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgIHRoaXMuZWxlTWFwc1snaGVhZC1sZWZ0LWltZy1pbmZvLWRlc2NyaXB0aW9uJ10udGV4dENvbnRlbnQ9IGRlc2NyaXB0aW9uLmxlbmd0aCA+IGRlZmF1bHRMZW5ndGggPwogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uLnNsaWNlKDAsIGRlZmF1bHRMZW5ndGgpICsgJy4uLicgOgogICAgICAgICAgICAgICAgZGVzY3JpcHRpb247CgogICAgICAgICAgICAgICAgdGhpcy5pbWc9aW1nOwogICAgICAgICAgICAgICAgdGhpcy5zcmM9aW1nLnNyYzsKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nPWZhbHNlOwoKICAgICAgICAgICAgICAgIHRoaXMucmVsYXRlZFRodW1iPXJlbGF0ZWRUaHVtYjsKICAgICAgICAgICAgICAgIGltZy5jbGFzc05hbWU9J3B2LWdhbGxlcnktaW1nJzsKCiAgICAgICAgICAgICAgICBpZihlcnJvcil7CiAgICAgICAgICAgICAgICAgICAgaWYocmVsYXRlZFRodW1iLnF1ZXJ5U2VsZWN0b3IoImltZyIpLnNyYz09dGhpcy5pbWcuc3JjKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdFcnJvcj10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydpbWdfYnJva2VuJ10uc3R5bGUuZGlzcGxheT0naW5saW5lLWJsb2NrJzsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyY3M9ZGF0YXNldChyZWxhdGVkVGh1bWIsICdzcmNzJykuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcub25sb2FkPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nTmF0dXJhbFNpemU9ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6dGhpcy5uYXR1cmFsSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6dGhpcy5uYXR1cmFsV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nTmF0dXJhbFNpemU9aW1nTmF0dXJhbFNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpdFRvU2NyZWVuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Jjcyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JjPXNyY3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQocmVsYXRlZFRodW1iLCAnc3Jjcycsc3Jjcy5qb2luKCIsIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3JjKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KHJlbGF0ZWRUaHVtYiwgJ3NyYycsc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5vbmVycm9yPWZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNyYz1yZWxhdGVkVGh1bWIucXVlcnlTZWxlY3RvcigiaW1nIikuc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KHJlbGF0ZWRUaHVtYiwgJ3NyYycsdGhpcy5zcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5zcmM9c3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5pbWcuc3JjPXJlbGF0ZWRUaHVtYi5xdWVyeVNlbGVjdG9yKCJpbWciKS5zcmM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdFcnJvcj1mYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ2ltZ19icm9rZW4nXS5zdHlsZS5kaXNwbGF5PScnOwogICAgICAgICAgICAgICAgICAgIGlmKCFkYXRhc2V0KHJlbGF0ZWRUaHVtYiwnbmF0dXJhbFNpemUnKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQocmVsYXRlZFRodW1iLCduYXR1cmFsU2l6ZScsSlNPTi5zdHJpbmdpZnkoaW1nTmF0dXJhbFNpemUpKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdHlsZWQoKXsKICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGUub3BhY2l0eT0xOwogICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZVtzdXBwb3J0LmNzc1RyYW5zZm9ybV09J3NjYWxlKDEpJzsKICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIGlmKHByZWZzLmdhbGxlcnkudHJhbnNpdGlvbil7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChzdHlsZWQsMCk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBzdHlsZWQoKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydpbWctcGFyZW50J10uYXBwZW5kQ2hpbGQoaW1nKTsKCiAgICAgICAgICAgICAgICB0aGlzLmZpdENvbnRhaW5zPXByZWZzLmdhbGxlcnkuZml0VG9TY3JlZW47Ly/pgILlupTlsY/luZUKCiAgICAgICAgICAgICAgICB0aGlzLmZpdFRvU2NyZWVuKHsKICAgICAgICAgICAgICAgICAgICB4OjAsCiAgICAgICAgICAgICAgICAgICAgeTowLAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYodGhpcy5wcmV2aW91cyl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91cz1mYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1Njcm9sbGJhclYuc2Nyb2xsQnkoOTk5OTk5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbi5jaGVjaygpOy8v5qOA5p+l5piv5ZCm5Zyo5pS26JeP6YeM6Z2i44CCCgogICAgICAgICAgICB9LAogICAgICAgICAgICBmaXRUb1NjcmVlbjpmdW5jdGlvbihzY2FsZSl7CgogICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lcj10aGlzLmVsZU1hcHNbJ2ltZy1jb250ZW50J107CiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDpjb250YWluZXIuY2xpZW50SGVpZ2h0LAogICAgICAgICAgICAgICAgICAgIHc6Y29udGFpbmVyLmNsaWVudFdpZHRoLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgaW1nPXRoaXMuaW1nOwoKICAgICAgICAgICAgICAgIGltZy5jbGFzc0xpc3QucmVtb3ZlKCdwdi1nYWxsZXJ5LWltZ196b29tLWluJyk7CiAgICAgICAgICAgICAgICBpbWcuY2xhc3NMaXN0LnJlbW92ZSgncHYtZ2FsbGVyeS1pbWdfem9vbS1vdXQnKTsKCiAgICAgICAgICAgICAgICB2YXIgaW1nU3R5PWltZy5zdHlsZTsKICAgICAgICAgICAgICAgIGltZ1N0eS53aWR0aD0nJzsKICAgICAgICAgICAgICAgIGltZ1N0eS5oZWlnaHQ9Jyc7CgogICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRTU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDpjb250YWluZXIuc2Nyb2xsSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgIHc6Y29udGFpbmVyLnNjcm9sbFdpZHRoLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBsYXJnZXI9Y29udGVudFNTaXplLmg+Y29udGFpbmVyU2l6ZS5oIHx8IGNvbnRlbnRTU2l6ZS53PmNvbnRhaW5lclNpemUudzsKCiAgICAgICAgICAgICAgICB2YXIgc2NhbGVkPScxMDAlJzsKCiAgICAgICAgICAgICAgICBpZih0aGlzLmZpdENvbnRhaW5zICYmICEoc2NhbGUgJiYgc2NhbGUueD09MCAmJiBzY2FsZS55PT0wICYmIHRoaXMuaW1nTmF0dXJhbFNpemUuaC90aGlzLmltZ05hdHVyYWxTaXplLncgPiAyLjUpKXsvL+mAguW6lOWxj+W5lQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nU2Nyb2xsYmFyVi5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdTY3JvbGxiYXJILmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICBpZihsYXJnZXIpewogICAgICAgICAgICAgICAgICAgICAgICBpbWcuY2xhc3NMaXN0LmFkZCgncHYtZ2FsbGVyeS1pbWdfem9vbS1pbicpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihjb250ZW50U1NpemUuaC9jb250ZW50U1NpemUudyA+PWNvbnRhaW5lclNpemUuaC9jb250YWluZXJTaXplLncpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodD10aGlzLmltZ05hdHVyYWxTaXplLmgtKGNvbnRlbnRTU2l6ZS5oIC0gY29udGFpbmVyU2l6ZS5oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1N0eS5oZWlnaHQ9aGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlZD1oZWlnaHQvdGhpcy5pbWdOYXR1cmFsU2l6ZS5oOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3aWR0aD10aGlzLmltZ05hdHVyYWxTaXplLnctKGNvbnRlbnRTU2l6ZS53IC0gY29udGFpbmVyU2l6ZS53KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1N0eS53aWR0aD13aWR0aCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZWQ9d2lkdGgvdGhpcy5pbWdOYXR1cmFsU2l6ZS53OwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBzY2FsZWQ9KHNjYWxlZCoxMDApLnRvRml4ZWQoMikgKyAnJSc7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocHJlZnMuZ2FsbGVyeS5maXRUb1NjcmVlblNtYWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pbWdOYXR1cmFsU2l6ZS5oL3RoaXMuaW1nTmF0dXJhbFNpemUudyA+PWNvbnRhaW5lclNpemUuaC9jb250YWluZXJTaXplLncpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodD1jb250ZW50U1NpemUuaC01MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD1oZWlnaHQ8MD9jb250ZW50U1NpemUuaDpoZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTdHkuaGVpZ2h0PWhlaWdodCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZWQ9aGVpZ2h0L3RoaXMuaW1nTmF0dXJhbFNpemUuaDsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2lkdGg9Y29udGVudFNTaXplLnctNTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD13aWR0aDwwP2NvbnRlbnRTU2l6ZS53OndpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3R5LndpZHRoPXdpZHRoICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlZD13aWR0aC90aGlzLmltZ05hdHVyYWxTaXplLnc7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlZD0oc2NhbGVkKjEwMCkudG9GaXhlZCgyKSArICclJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZXsvL+S4jeWBmuWwuuWvuOiwg+aVtAogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nU2Nyb2xsYmFyVi5yZXNldCgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nU2Nyb2xsYmFySC5yZXNldCgpOwoKICAgICAgICAgICAgICAgICAgICBpZihsYXJnZXIpewogICAgICAgICAgICAgICAgICAgICAgICBpbWcuY2xhc3NMaXN0LmFkZCgncHYtZ2FsbGVyeS1pbWdfem9vbS1vdXQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2NhbGUpey8v6YCa6L+H6byg5qCH54K55Ye76L+b6KGM55qE5YiH5o2i44CCCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1Njcm9sbGJhckguc2Nyb2xsKGNvbnRhaW5lci5zY3JvbGxXaWR0aCAqIHNjYWxlLnggLSBjb250YWluZXJTaXplLncvMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1Njcm9sbGJhclYuc2Nyb2xsKGNvbnRhaW5lci5zY3JvbGxIZWlnaHQgKiBzY2FsZS55IC0gY29udGFpbmVyU2l6ZS5oLzIpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICB2YXIgaW1nU2NhbGVkSW5mbz10aGlzLmVsZU1hcHNbJ2hlYWQtbGVmdC1pbWctaW5mby1zY2FsaW5nJ107CiAgICAgICAgICAgICAgICBpbWdTY2FsZWRJbmZvLnRleHRDb250ZW50PSfvvIgnK3NjYWxlZCsn77yJJzsKICAgICAgICAgICAgICAgIGlmKHNjYWxlZCE9JzEwMCUnKXsKICAgICAgICAgICAgICAgICAgICBpbWdTY2FsZWRJbmZvLnN0eWxlLmNvbG9yPScjRTlDQ0NDJzsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGltZ1NjYWxlZEluZm8uc3R5bGUuY29sb3I9Jyc7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIF9kYXRhQ2FjaGU6IHt9LAogICAgICAgICAgICBfYXBwZW5kVGh1bWJTcGFuczogZnVuY3Rpb24oZGF0YSwgaW5kZXgpIHsgIC8vIOa3u+WKoOe8qeeVpeWbvuagj+eahCBzcGFucwogICAgICAgICAgICAgICAgdmFyIGlTdGF0aXNDb3B5ID0gdGhpcy5pU3RhdGlzQ29weTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluZGV4ID09ICd1bmRlZmluZWQnICYmIHRoaXMuc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICAgICAgICBpbmRleCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuaW1nU3BhbnMpLmluZGV4T2YodGhpcy5zZWxlY3RlZCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbHMgPSB0aGlzLmVsZU1hcHNbJ3NpZGViYXItdGh1bWJuYWlscy1jb250YWluZXInXTsKICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+aWsOeahO+8jOWImea3u+WKoO+8jOWQpuWImemHjee9ruW5tua3u+WKoOOAggogICAgICAgICAgICAgICAgaWYgKCFkYXRhKXsKICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxzLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFDYWNoZSA9IHt9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKGRhdGEgfHwgdGhpcy5kYXRhKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBpZighaXRlbSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaVN0YXRpc0NvcHlbaXRlbS50eXBlXS5jb3VudCsrOwogICAgICAgICAgICAgICAgICAgIHZhciBzcGFuTWFyaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlscy5hcHBlbmRDaGlsZChzcGFuTWFyayk7CiAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsub3V0ZXJIVE1MID0gJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyJyArCiAgICAgICAgICAgICAgICAgICAgICAgICciIGRhdGEtdHlwZT0iJyArIGl0ZW0udHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICciIGRhdGEtc3JjPSInICsgaXRlbS5zcmMgKwogICAgICAgICAgICAgICAgICAgICAgICAnIiBkYXRhLXNyY3M9IicgKyAoaXRlbS5zcmNzP2l0ZW0uc3Jjcy5qb2luKCIsIik6IiIpICsKICAgICAgICAgICAgICAgICAgICAgICAgKGl0ZW0ueGhyID8gJyIgZGF0YS14aHI9IicgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoaXRlbS54aHIpKSA6ICcnKSArCiAgICAgICAgICAgICAgICAgICAgICAgICciIGRhdGEtZGVzY3JpcHRpb249IicgKyBlbmNvZGVVUklDb21wb25lbnQoaXRlbS5kZXNjcmlwdGlvbiB8fCAnJykgKwogICAgICAgICAgICAgICAgICAgICAgICAnIiBkYXRhLXRodW1iLXNyYz0iJyArIGl0ZW0uaW1nU3JjICsKICAgICAgICAgICAgICAgICAgICAgICAgJyIgdGl0bGU9IicgKyAoaXRlbS5pbWc/aXRlbS5pbWcudGl0bGU6IiIpICsKICAgICAgICAgICAgICAgICAgICAgICAgJyI+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItbG9hZGluZyIgdGl0bGU9IicraTE4bigibG9hZGluZyIpKycuLi4uLi4iPjwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAgICAgKGRhdGEgfHwgdGhpcy5kYXRhKS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICBpZighZClyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGF0YUNhY2hlW2QuaW1nU3JjXSA9IHRydWU7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvL+WGmeWFpeexu+WIq+aVsOaNruOAggogICAgICAgICAgICAgICAgdmFyIGdhbGxlcnkgPSB0aGlzLmdhbGxlcnk7CiAgICAgICAgICAgICAgICB2YXIgaW5wdXQsIGxhYmVsLCBpU3RhdGlzQ29weV9pOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gaVN0YXRpc0NvcHkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWlTdGF0aXNDb3B5Lmhhc093blByb3BlcnR5KGkpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBpU3RhdGlzQ29weV9pID0gaVN0YXRpc0NvcHlbaV07CiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJyNwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1jYXRlZ29yeS0nICsgaSk7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IGlTdGF0aXNDb3B5X2kuc2hvd247CiAgICAgICAgICAgICAgICAgICAgaWYgKGlTdGF0aXNDb3B5X2kuY291bnQgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgncHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW1fZGlzYWJsZWQnKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ3B2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtX2Rpc2FibGVkJyk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsW2Zvcj0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0tY2F0ZWdvcnktJyArIGkgKyAnIl0nKTsKICAgICAgICAgICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGxhYmVsLnRleHRDb250ZW50LnJlcGxhY2UoL++8iC4q77yJL2ksICcnKSArICfvvIgnICsgaVN0YXRpc0NvcHlfaS5jb3VudCArICfvvIknOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLmltZ1NwYW5zID0gdGh1bWJuYWlscy5jaGlsZHJlbjsKCiAgICAgICAgICAgICAgICB0aGlzLnRodW1iU2Nyb2xsYmFyLnJlc2V0KCk7CgogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5pbWdTcGFuc1tpbmRleF0sIHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2FkOmZ1bmN0aW9uKGRhdGEsIGZyb20sIHJlbG9hZCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLnNob3duIHx8IHRoaXMubWluaW1pemVkKXsvL+WPquWFgeiuuOaJk+W8gOS4gOS4qizor7flhYjlhbPmjonlvZPliY3lt7Lnu4/miZPlvIDnmoTlupMKCiAgICAgICAgICAgICAgICAgICAgaWYoZnJvbSl7Ly9mcmFtZeWPkemAgei/h+adpeeahOaVsOaNruOAggogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6J3NlbmRGYWlsJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOmZyb20sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sJyonKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLm1pbmltaXplZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfor7flhYjlhbPmjonlvZPliY3lt7Lnu4/miZPlvIDnmoTlupMnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2hFbGUodGhpcy5tYXhpbWl6ZVRyaWdnZXIpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgaWYoZnJvbSl7Ly/mnaXoh6pmcmFtZe+8jOiOt+WPlui/meS4qmZyYW1l5omA5Zyo55qEaWZyYW1l5qCH562+44CC5a6a5L2N5Yiw5Zu+54mH55qE5pe25YCZ6KaB55So5Yiw44CCCiAgICAgICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDonZ2V0SWZyYW1lT2JqZWN0JywKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93SWQ6ZnJvbSwKICAgICAgICAgICAgICAgICAgICB9LCcqJyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncHYtZ2V0SWZyYW1lT2JqZWN0JyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pZnJhbWU9ZS5kZXRhaWw7CiAgICAgICAgICAgICAgICAgICAgfSx0cnVlKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHVuaXF1ZT10aGlzLnVuaXF1ZShkYXRhKTsKICAgICAgICAgICAgICAgIGRhdGE9dW5pcXVlLmRhdGE7CiAgICAgICAgICAgICAgICB2YXIgaW5kZXg9dW5pcXVlLmluZGV4OwoKICAgICAgICAgICAgICAgIGlmIChyZWxvYWQgJiYgdGhpcy5kYXRhLmxlbmd0aCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCfmsqHmnInmlrDlop7nmoTlm77niYcnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpOy8v6L+Y5Y6f5a+56LGh55qE5LiA5Lqb5L+u5pS577yM5Lul5L6/5aSN55So44CCCiAgICAgICAgICAgICAgICB0aGlzLnNob3cocmVsb2FkKTsKCiAgICAgICAgICAgICAgICB0aGlzLmRhdGE9ZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMuZnJvbT1mcm9tOy8v5aaC5p6c5p2l6IeqZnJhbWXvvIzpgqPkuYjov5nkuKpmcm9t5bqU6K+l5L+d5a2Y5LqG6YKj5LiqZnJhbWXnmoTnqpflj6NpZO+8jOS+v+S6juS7peWQjumAmuS/oeOAggoKICAgICAgICAgICAgICAgIHRoaXMuX2FwcGVuZFRodW1iU3BhbnMobnVsbCwgaW5kZXgpOwoKICAgICAgICAgICAgICAgIHRoaXMucnVuT25jZSgpOwoKICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVGh1bWJWaXNpYmxlKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsZWFyOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhQ2FjaGUgPSB7fTsKCiAgICAgICAgICAgICAgICB0aGlzLmFsbExvYWRpbmc9W107Ly/or7vlj5bkuK3nmoTlm77niYfmlbDnu4QKICAgICAgICAgICAgICAgIHRoaXMuaVN0YXRpc0NvcHk9Y2xvbmVPYmplY3QodGhpcy5pbWdTdGF0aXN0aWNzLHRydWUpOy8v5Zu+54mH57uf6K6h5Ymv5pysCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkPT1udWxsOwogICAgICAgICAgICAgICAgaWYodGhpcy5pbWcpewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nPW51bGw7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgLy/or7vlj5bplJnor6/nmoTlm77niYfljaDkvY3nrKYKICAgICAgICAgICAgICAgIHRoaXMuZWxlTWFwc1snaW1nX2Jyb2tlbiddLnN0eWxlLmRpc3BsYXk9Jyc7CiAgICAgICAgICAgICAgICAvL+a4heepumRvbQogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10uaW5uZXJIVE1MPScnOwogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydoZWFkLWxlZnQtaW1nLWluZm8tcmVzb2x1dGlvbiddLnRleHRDb250ZW50PScwIHggMCc7CiAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ2hlYWQtbGVmdC1pbWctaW5mby1jb3VudCddLnRleHRDb250ZW50PSfvvIgxIC8gMe+8iSc7CiAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ2hlYWQtbGVmdC1pbWctaW5mby1zY2FsaW5nJ10udGV4dENvbnRlbnQ9J++8iDEwMCXvvIknOwogICAgICAgICAgICAgICAgLy/pmpDol4/mu5rliqjmnaEKICAgICAgICAgICAgICAgIHRoaXMuaW1nU2Nyb2xsYmFyVi5oaWRlKCk7CiAgICAgICAgICAgICAgICB0aGlzLmltZ1Njcm9sbGJhckguaGlkZSgpOwogICAgICAgICAgICAgICAgdGhpcy50aHVtYlNjcm9sbGJhci5oaWRlKCk7CiAgICAgICAgICAgICAgICAvL+mHjee9rnN0eWxlOwogICAgICAgICAgICAgICAgdGhpcy50aHVtYlZpc2libGVTdHlsZS50ZXh0Q29udGVudD0nJzsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHVuaXF1ZTpmdW5jdGlvbihkYXRhKXsKICAgICAgICAgICAgICAgIHZhciBpbWdTcmM7CiAgICAgICAgICAgICAgICBpZihkYXRhLnRhcmdldCkKICAgICAgICAgICAgICAgIGltZ1NyYz1kYXRhLnRhcmdldC5zcmM7CgogICAgICAgICAgICAgICAgdmFyIGRhdGFfaSwKICAgICAgICAgICAgICAgICAgICBkYXRhX2lfc3JjLAogICAgICAgICAgICAgICAgICAgIGRhdGFTcmNzPVtdOwoKICAgICAgICAgICAgICAgIHZhciBpbmRleDsKCiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MCxpaT1kYXRhLmxlbmd0aDtpPGlpO2krKyl7CiAgICAgICAgICAgICAgICAgICAgZGF0YV9pPWRhdGFbaV07CiAgICAgICAgICAgICAgICAgICAgZGF0YV9pX3NyYz1kYXRhX2kuc3JjOwogICAgICAgICAgICAgICAgICAgIGlmKGRhdGFTcmNzLmluZGV4T2YoZGF0YV9pX3NyYykhPS0xKXsvL+W3sue7j+WtmOWcqAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNwbGljZShpLDEpOy8v56e76ZmkCiAgICAgICAgICAgICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICAgICAgICAgICAgaWktLTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBkYXRhU3Jjcy5wdXNoKGRhdGFfaV9zcmMpOwoKICAgICAgICAgICAgICAgICAgICBpZihpbWdTcmM9PWRhdGFfaV9zcmMpewogICAgICAgICAgICAgICAgICAgICAgICBpbmRleD1pOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBpbmRleCA9PSd1bmRlZmluZWQnKXsKICAgICAgICAgICAgICAgICAgICBpbmRleD0wOwogICAgICAgICAgICAgICAgICAgIGRhdGEudW5zaGlmdChkYXRhLnRhcmdldCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhLnRhcmdldDsKCiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGRhdGE6ZGF0YSwKICAgICAgICAgICAgICAgICAgICBpbmRleDppbmRleCwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGtleURvd25MaXN0ZW5lcjpmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIHN3aXRjaChlLmtleUNvZGUpewogICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmltZ1dpbmRvdy5jbG9zZS5lc2NLZXkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBrZXlVcExpc3RlbmVyOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgc3dpdGNoKGUua2V5Q29kZSl7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA4MjoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZz10aGlzLmltZzsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNzc1RyYW5zZm9ybT1pbWcuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaVRyYW5zZm9ybT1jc3NUcmFuc2Zvcm0ucmVwbGFjZSgvcm90YXRlXChbXildKlwpL2ksJycpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRlZFJhZGlhbnM9Y3NzVHJhbnNmb3JtLmluZGV4T2YoInJvdGF0ZSIpIT0tMT9jc3NUcmFuc2Zvcm0ucmVwbGFjZSgvLipyb3RhdGVcKChbLVxkXC5dKykuKi9pLCckMScpOjA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBQST1NYXRoLlBJOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luPXBhcnNlRmxvYXQocm90YXRlZFJhZGlhbnMpICsoZS5zaGlmdEtleT8tOTA6OTApICogUEkvMTgwOwogICAgICAgICAgICAgICAgICAgICAgICBpZihvcmlnaW4+PTIqUEkgfHwgb3JpZ2luPD0tMipQSSB8fCgtMC4xPG9yaWdpbiAmJiBvcmlnaW48MC4xKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW49MDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dID0gJyByb3RhdGUoJysgb3JpZ2luICsncmFkKSAnICsgaVRyYW5zZm9ybTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNob3c6ZnVuY3Rpb24ocmVsb2FkKXsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd249dHJ1ZTsKICAgICAgICAgICAgICAgIGdhbGxlcnlNb2RlPXRydWU7CgogICAgICAgICAgICAgICAgaWYgKCFyZWxvYWQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVzPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRlT3ZlcmZsb3c9ewogICAgICAgICAgICAgICAgICAgICAgICB4OmRlcy5vdmVyZmxvd1gsCiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZGVzLm92ZXJmbG93WSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGRlcy5vdmVyZmxvdz0naGlkZGVuJzsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnkuc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnkuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJyx0aGlzLl9yZXNpemVIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsdGhpcy5fa2V5RG93bkxpc3RlbmVyLHRydWUpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLHRoaXMuX2tleVVwTGlzdGVuZXIsdHJ1ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsb3NlOmZ1bmN0aW9uKHJlbG9hZCl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJyx0aGlzLl9rZXlEb3duTGlzdGVuZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsdGhpcy5fa2V5VXBMaXN0ZW5lcix0cnVlKTsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd249ZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLm1pbmltaXplZD1mYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoIXJlbG9hZCkgewogICAgICAgICAgICAgICAgICAgIGdhbGxlcnlNb2RlPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeS5ibHVyKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5LnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgIHZhciBkZXM9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlOwogICAgICAgICAgICAgICAgICAgIGRlcy5vdmVyZmxvd1g9dGhpcy5kZU92ZXJmbG93Lng7CiAgICAgICAgICAgICAgICAgICAgZGVzLm92ZXJmbG93WT10aGlzLmRlT3ZlcmZsb3cueTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlU2hvdy5leGl0KCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uLmV4aXQoKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJyx0aGlzLl9yZXNpemVIYW5kbGVyLHRydWUpOwoKICAgICAgICAgICAgICAgICAgICAvLyDpgIDlh7rlhajlsY8KICAgICAgICAgICAgICAgICAgICB2YXIgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWdhbGxlcnktZnVsbHNjcmVlbmJ0bicpOwogICAgICAgICAgICAgICAgICAgIGlmIChidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdmdWxsc2NyZWVuYnRuJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsRnVsbFNjcmVlbigpOwogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSBpMThuKCJlbnRlckZ1bGxzYyIpOwogICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnZnVsbHNjcmVlbmJ0bicpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY3VyUGFnZTpkb2N1bWVudCwKICAgICAgICAgICAgZ2V0UGFnZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIHBhZ2VOdW09MDsKICAgICAgICAgICAgICAgIGlmKC9bX1wtXVxkKyhcLmh0bWwpPyQvLnRlc3QodGhpcy5ocmVmKSl7CiAgICAgICAgICAgICAgICAgICAgcGFnZU51bT10aGlzLmhyZWYucmVwbGFjZSgvLipbXC1fXShcZCspKFwuaHRtbCk/JC8sIiQxIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgY3VyUGFnZT10aGlzLmN1clBhZ2U7CiAgICAgICAgICAgICAgICBsZXQgcHJlPWN1clBhZ2UucXVlcnlTZWxlY3RvcigiYS5wcmV2Iik7CiAgICAgICAgICAgICAgICBsZXQgbmV4dD1jdXJQYWdlLnF1ZXJ5U2VsZWN0b3IoImEubmV4dCIpOwogICAgICAgICAgICAgICAgaWYoIXByZSlwcmU9Y3VyUGFnZS5xdWVyeVNlbGVjdG9yKCJhI3ByZXYiKTsKICAgICAgICAgICAgICAgIGlmKCFuZXh0KW5leHQ9Y3VyUGFnZS5xdWVyeVNlbGVjdG9yKCJhI25leHQiKTsKICAgICAgICAgICAgICAgIGlmKCFwcmUpcHJlPWN1clBhZ2UucXVlcnlTZWxlY3RvcigiYSNsZWZ0Rml4Iik7CiAgICAgICAgICAgICAgICBpZighbmV4dCluZXh0PWN1clBhZ2UucXVlcnlTZWxlY3RvcigiYSNyaWdodEZpeCIpOwogICAgICAgICAgICAgICAgaWYoIXByZSB8fCAhbmV4dCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IGFUYWdzPWN1clBhZ2UucXVlcnlTZWxlY3RvckFsbCgiYSIpOwogICAgICAgICAgICAgICAgICAgIGlmKCFwcmUpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJlZixwcmVzLHByZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8YVRhZ3MubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYVRhZz1hVGFnc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZWYgJiYgcHJlcyAmJiBwcmV0KWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXByZWYpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKC/kuIrkuIDpobUvLnRlc3QoYVRhZy5pbm5lckhUTUwpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZj1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFwcmVzKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhVGFnLmlubmVySFRNTD09IiZsdDsiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlcz1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFwcmV0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhVGFnLmlubmVySFRNTD09IsKrIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXQ9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihwYWdlTnVtPT0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYVRhZy5nZXRBdHRyaWJ1dGUoImhyZWYiKSAmJiBhVGFnLmdldEF0dHJpYnV0ZSgiaHJlZiIpLmluZGV4T2YodGhpcy5ocmVmLnJlcGxhY2UoLy4qXC8oW15cL10rKSQvLCIkMSIpLnJlcGxhY2UoL1tfLV1cZCsvLCIiKSkhPS0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldD1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoYVRhZy5nZXRBdHRyaWJ1dGUoImhyZWYiKSAmJiBhVGFnLmdldEF0dHJpYnV0ZSgiaHJlZiIpLnJlcGxhY2UoLy4qW1wtX10oXGQrKShcLmh0bWwpPyQvLCIkMSIpPT1wYWdlTnVtLTEpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV0PWFUYWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHByZT1wcmVmfHxwcmVzfHxwcmV0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZighbmV4dCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ZixuZXh0cyxuZXh0dDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxhVGFncy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhVGFnPWFUYWdzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobmV4dGYgJiYgbmV4dHMgJiYgbmV4dHQpYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighbmV4dGYpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKC/kuIvkuIDpobUvLnRlc3QoYVRhZy5pbm5lckhUTUwpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dGY9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighbmV4dHMpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFUYWcuaW5uZXJIVE1MPT0iJmd0OyIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0cz1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFuZXh0dCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYVRhZy5pbm5lckhUTUw9PSLCuyIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0dD1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGFUYWcuaGFzQXR0cmlidXRlKCJocmVmIikgJiYgYVRhZy5nZXRBdHRyaWJ1dGUoImhyZWYiKS5yZXBsYWNlKC8uKltcLV9dKFxkKykoXC5odG1sKT8kLywiJDEiKT09cGFyc2VJbnQocGFnZU51bSkrMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHR0PWFUYWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ9bmV4dGZ8fG5leHRzfHxuZXh0dDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZighcHJlKXByZT1jdXJQYWdlLnF1ZXJ5U2VsZWN0b3IoIi5wcmV2PmEiKTsKICAgICAgICAgICAgICAgIGlmKCFuZXh0KW5leHQ9Y3VyUGFnZS5xdWVyeVNlbGVjdG9yKCIubmV4dD5hIik7CiAgICAgICAgICAgICAgICBpZighcHJlICYmICFuZXh0KXsKICAgICAgICAgICAgICAgICAgICBsZXQgcGFnZURpdj1jdXJQYWdlLnF1ZXJ5U2VsZWN0b3IoImRpdi53cC1wYWdlbmF2aSIpOwogICAgICAgICAgICAgICAgICAgIGlmKHBhZ2VEaXYpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VyPXBhZ2VEaXYucXVlcnlTZWxlY3Rvcigic3Bhbi5jdXJyZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZT1jdXIucHJldmlvdXNTaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICBuZXh0PWN1ci5uZXh0U2libGluZzsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cj1jdXJQYWdlLnF1ZXJ5U2VsZWN0b3IoImRpdi5hcnRpY2xlLXBhZ2luZz5zcGFuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1cil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmU9Y3VyLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0PWN1ci5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4ge3ByZTpwcmUsbmV4dDpuZXh0fTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2Fub25pY2FsVXJpOmZ1bmN0aW9uKHNyYywgYmFzZV9wYXRoKXsKICAgICAgICAgICAgICAgIGlmKHNyYy5jaGFyQXQoMCk9PSIjIilyZXR1cm4gbG9jYXRpb24uaHJlZitzcmM7CiAgICAgICAgICAgICAgICB2YXIgcm9vdF9wYWdlID0gL15bXj8jXSpcLy8uZXhlYyhsb2NhdGlvbi5ocmVmKVswXSwKICAgICAgICAgICAgICAgICAgICByb290X2RvbWFpbiA9IC9eXHcrXDpcL1wvXC8/W15cL10rLy5leGVjKHJvb3RfcGFnZSlbMF0sCiAgICAgICAgICAgICAgICAgICAgYWJzb2x1dGVfcmVnZXggPSAvXlx3K1w6XC9cLy87CiAgICAgICAgICAgICAgICBzcmM9c3JjLnJlcGxhY2UoL1wuXC8vLCIiKTsKICAgICAgICAgICAgICAgIGlmICgvXlwvXC9cLz8vLnRlc3Qoc3JjKSl7CiAgICAgICAgICAgICAgICAgICAgc3JjID0gbG9jYXRpb24ucHJvdG9jb2wgKyBzcmM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICghYWJzb2x1dGVfcmVnZXgudGVzdChzcmMpICYmIHNyYy5jaGFyQXQoMCkgIT0gIi8iKXsKICAgICAgICAgICAgICAgICAgICBzcmMgPSAoYmFzZV9wYXRoIHx8ICIiKSArIHNyYzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAoYWJzb2x1dGVfcmVnZXgudGVzdChzcmMpID8gc3JjIDogKChzcmMuY2hhckF0KDApID09ICIvIiA/IHJvb3RfZG9tYWluIDogcm9vdF9wYWdlKSArIHNyYykpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjb21wbGV0ZVBhZ2VzOltsb2NhdGlvbi5ocmVmXSwKICAgICAgICAgICAgaHJlZjpsb2NhdGlvbi5ocmVmLAogICAgICAgICAgICBwcmVQYWdlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgcGFnZU9iaj10aGlzLmdldFBhZ2UoKSxzZWxmPXRoaXMsdGV4dFNwYW49dGhpcy5lbGVNYXBzWydoZWFkLWNvbW1hbmQtbmV4dFBhZ2UnXS5xdWVyeVNlbGVjdG9yKCJzcGFuIik7CiAgICAgICAgICAgICAgICBpZih0ZXh0U3Bhbi5pbm5lckhUTUwhPWkxOG4oImxvYWRpbmciKSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGxvYWRPdmVyPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgdGV4dFNwYW4uaW5uZXJIVE1MPSI8Zm9udCBjb2xvcj0ncmVkJz4iK2kxOG4oImxvYWRlZEFsbCIpKyI8L2ZvbnQ+IjsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGV4dFNwYW4uaW5uZXJIVE1MPWkxOG4oImxvYWRBbGwiKTt9LDE1MDApOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmKCFwYWdlT2JqLnByZSl7CiAgICAgICAgICAgICAgICAgICAgbG9hZE92ZXIoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgcHJlVXJsPXBhZ2VPYmoucHJlOwogICAgICAgICAgICAgICAgaWYocHJlVXJsLnRhZ05hbWUhPSJBIil7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQT1wcmVVcmwucXVlcnlTZWxlY3RvcigiYSIpOwogICAgICAgICAgICAgICAgICAgIGlmKGNoaWxkQSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZVVybD1jaGlsZEE7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKHByZVVybD1wcmVVcmwucGFyZW50RWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwcmVVcmwubm9kZU5hbWU9PSdBJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXByZVVybClyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGhyZWY9cHJlVXJsLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwogICAgICAgICAgICAgICAgaWYoc2VsZi5jb21wbGV0ZVBhZ2VzLmluZGV4T2YoaHJlZikhPS0xKXsKICAgICAgICAgICAgICAgICAgICBsb2FkT3ZlcigpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHNlbGYuY29tcGxldGVQYWdlcy5wdXNoKGhyZWYpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2VsZi5ocmVmPXNlbGYuY2Fub25pY2FsVXJpKGhyZWYpOwogICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczp7IlJlZmVyZXIiOiArIHdpbmRvdy5sb2NhdGlvbi5ocmVmfSwKICAgICAgICAgICAgICAgICAgICB1cmw6IHNlbGYuaHJlZiwKICAgICAgICAgICAgICAgICAgICBvdmVycmlkZU1pbWVUeXBlOiJ0ZXh0L2h0bWw7Y2hhcnNldD0iK2RvY3VtZW50LmNoYXJzZXQsCiAgICAgICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBodG1sPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IGQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1clBhZ2U9aHRtbDsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZ3M9aHRtbC5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wdi1nYWxsZXJ5LWNvbnRhaW5lcicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbG9hZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wdi1nYWxsZXJ5LXByZWxvYWRlZC1pbWctY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpbWdzKS5maWx0ZXIoZnVuY3Rpb24oaW1nKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGNvbnRhaW5lci5jb250YWlucyhpbWcpIHx8IChwcmVsb2FkQ29udGFpbmVyJiZwcmVsb2FkQ29udGFpbmVyLmNvbnRhaW5zKGltZykpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ3MuZm9yRWFjaChmdW5jdGlvbihpbWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc3JjPWltZy5nZXRBdHRyaWJ1dGUoInNyYyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWlzcmMpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNyYz1zZWxmLmNhbm9uaWNhbFVyaShpc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLl9kYXRhQ2FjaGVbaXNyY10pIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaW1nLnNyYyA9IGlzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaW1nLm9ubG9hZD1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmaW5kUGljKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgIXNlbGYuX2RhdGFDYWNoZVt0aGlzLnNyY10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhLnB1c2gocmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXBwZW5kVGh1bWJTcGFucyhbcmVzdWx0XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZFRodW1iKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RhdGFDYWNoZVt0aGlzLnNyY10gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmdhbGxlcnkubG9hZEFsbClzZWxmLnByZVBhZ2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBsb2FkT3ZlcigpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBuZXh0UGFnZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIHBhZ2VPYmo9dGhpcy5nZXRQYWdlKCksc2VsZj10aGlzLHRleHRTcGFuPXRoaXMuZWxlTWFwc1snaGVhZC1jb21tYW5kLW5leHRQYWdlJ10ucXVlcnlTZWxlY3Rvcigic3BhbiIpOwogICAgICAgICAgICAgICAgaWYodGV4dFNwYW4uaW5uZXJIVE1MIT1pMThuKCJsb2FkaW5nIikpewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBsb2FkT3Zlcj1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmdhbGxlcnkubG9hZEFsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3VyUGFnZT1kb2N1bWVudDsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ocmVmPWxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJlUGFnZSgpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3Bhbi5pbm5lckhUTUw9Ijxmb250IGNvbG9yPSdyZWQnPiIraTE4bigibG9hZGVkQWxsIikrIjwvZm9udD4iOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGV4dFNwYW4uaW5uZXJIVE1MPWkxOG4oImxvYWRBbGwiKTt9LDE1MDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZighcGFnZU9iai5uZXh0KXsKICAgICAgICAgICAgICAgICAgICBsb2FkT3ZlcigpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuZXh0VXJsPXBhZ2VPYmoubmV4dDsKICAgICAgICAgICAgICAgIGlmKG5leHRVcmwudGFnTmFtZSE9IkEiKXsKICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRBPW5leHRVcmwucXVlcnlTZWxlY3RvcigiYSIpOwogICAgICAgICAgICAgICAgICAgIGlmKGNoaWxkQSl7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRVcmw9Y2hpbGRBOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZShuZXh0VXJsPW5leHRVcmwucGFyZW50RWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuZXh0VXJsLm5vZGVOYW1lPT0nQScpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFuZXh0VXJsKXJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgaHJlZj1uZXh0VXJsLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwogICAgICAgICAgICAgICAgaWYoc2VsZi5jb21wbGV0ZVBhZ2VzLmluZGV4T2YoaHJlZikhPS0xKXsKICAgICAgICAgICAgICAgICAgICBsb2FkT3ZlcigpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHNlbGYuY29tcGxldGVQYWdlcy5wdXNoKGhyZWYpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2VsZi5ocmVmPXNlbGYuY2Fub25pY2FsVXJpKGhyZWYpOwogICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBzZWxmLmhyZWYsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczp7IlJlZmVyZXIiOiArIHdpbmRvdy5sb2NhdGlvbi5ocmVmfSwKICAgICAgICAgICAgICAgICAgICBvdmVycmlkZU1pbWVUeXBlOiJ0ZXh0L2h0bWw7Y2hhcnNldD0iK2RvY3VtZW50LmNoYXJzZXQsCiAgICAgICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBodG1sPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IGQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1clBhZ2U9aHRtbDsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZ3M9aHRtbC5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wdi1nYWxsZXJ5LWNvbnRhaW5lcicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbG9hZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wdi1nYWxsZXJ5LXByZWxvYWRlZC1pbWctY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpbWdzKS5maWx0ZXIoZnVuY3Rpb24oaW1nKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGNvbnRhaW5lci5jb250YWlucyhpbWcpIHx8IChwcmVsb2FkQ29udGFpbmVyJiZwcmVsb2FkQ29udGFpbmVyLmNvbnRhaW5zKGltZykpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ3MuZm9yRWFjaChmdW5jdGlvbihpbWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc3JjPWltZy5nZXRBdHRyaWJ1dGUoInNyYyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWlzcmMpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNyYz1zZWxmLmNhbm9uaWNhbFVyaShpc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLl9kYXRhQ2FjaGVbaXNyY10pIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaW1nLnNyYyA9IGlzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaW1nLm9ubG9hZD1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmaW5kUGljKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgIXNlbGYuX2RhdGFDYWNoZVt0aGlzLnNyY10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhLnB1c2gocmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXBwZW5kVGh1bWJTcGFucyhbcmVzdWx0XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZFRodW1iKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RhdGFDYWNoZVt0aGlzLnNyY10gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmdhbGxlcnkubG9hZEFsbClzZWxmLm5leHRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgbG9hZE92ZXIoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcnVuT25jZTpmdW5jdGlvbigpey8v6L+Q6KGM5LiA5qyh5p2l6I635Y+W5p+Q5Lqb5pWw5o2u44CCCiAgICAgICAgICAgICAgICB2YXIgdGh1bWJTcGFuQ1M9dW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5zZWxlY3RlZCk7CiAgICAgICAgICAgICAgICB0aGlzLnRodW1iU3Bhbk91dGVyU2l6ZT10aGlzLmlzSG9yaXpvbnRhbD8KICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkLm9mZnNldFdpZHRoICsgcGFyc2VGbG9hdCh0aHVtYlNwYW5DUy5tYXJnaW5MZWZ0KSArIHBhcnNlRmxvYXQodGh1bWJTcGFuQ1MubWFyZ2luUmlnaHQpIDoKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQub2Zmc2V0SGVpZ2h0ICsgcGFyc2VGbG9hdCh0aHVtYlNwYW5DUy5tYXJnaW5Ub3ApICsgcGFyc2VGbG9hdCh0aHVtYlNwYW5DUy5tYXJnaW5Cb3R0b20pOwoKCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMudGh1bWJTcGFuT3V0ZXJTaXplKTsKCiAgICAgICAgICAgICAgICB0aGlzLnJ1bk9uY2U9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBtaW5pbWl6ZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgICAgICAgICAgdGhpcy5tYXhpbWl6ZVRyaWdnZXIuc3R5bGUuZGlzcGxheT0nYmxvY2snOwogICAgICAgICAgICAgICAgdGhpcy5taW5pbWl6ZWQ9dHJ1ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbmF2aWdhdGVUb0ltZzpmdW5jdGlvbih0YXJnZXRJbWcpewogICAgICAgICAgICAgICAgdGFyZ2V0SW1nLnNjcm9sbEludG9WaWV3KCk7Ly/lhYjosIPnlKjljp/mlrnms5XvvIzlj6/ku6XorqlvdmVyZmxvdyBoaWRkZW7nmoTmu5rliqjlh7rmnaXjgIIKCiAgICAgICAgICAgICAgICAvL+iuqeWbvueJh+i/keWPr+iDveeahOWxheS4rQogICAgICAgICAgICAgICAgdmFyIGltZ0JDUmVjdD1nZXRDb250ZW50Q2xpZW50UmVjdCh0YXJnZXRJbWcpOwogICAgICAgICAgICAgICAgdmFyIHdTaXplPWdldFdpbmRvd1NpemUoKTsKCiAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoaW1nQkNSZWN0LmxlZnQgLSAod1NpemUudyAtIGltZ0JDUmVjdC53aWR0aCkvMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdCQ1JlY3QudG9wIC0gKHdTaXplLmggLSBpbWdCQ1JlY3QuaGVpZ2h0KS8yKTsKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN3aXRjaFRodW1iVmlzaWJsZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIHN0eWxlPXRoaXMudGh1bWJWaXNpYmxlU3R5bGU7CiAgICAgICAgICAgICAgICB2YXIgY291bnQ9MDsKICAgICAgICAgICAgICAgIHZhciBzdHlsZVRleHQ9W107CiAgICAgICAgICAgICAgICB2YXIgaVN0YXRpc0NvcHk9dGhpcy5pU3RhdGlzQ29weTsKICAgICAgICAgICAgICAgIHZhciBpU3RhdGlzQ29weV9pOwoKICAgICAgICAgICAgICAgIGZvcih2YXIgaSBpbiBpU3RhdGlzQ29weSl7CiAgICAgICAgICAgICAgICAgICAgaWYoIWlTdGF0aXNDb3B5Lmhhc093blByb3BlcnR5KGkpKWNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIGlTdGF0aXNDb3B5X2k9aVN0YXRpc0NvcHlbaV07CiAgICAgICAgICAgICAgICAgICAgaWYoaVN0YXRpc0NvcHlfaS5zaG93bil7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kz1pU3RhdGlzQ29weV9pLmNvdW50OwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZVRleHQucHVzaCgnLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYi1jb250YWluZXJbZGF0YS10eXBlPSInK2krJyJdJyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy/lhpnlhaVzdHlsZTsKICAgICAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50PXN0eWxlVGV4dC5qb2luKCcsJykgKyAne1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmUgIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfSc7CgogICAgICAgICAgICAgICAgLy/liJ3lp4vljJbnvKnnlaXlm77ljLrnmoTmu5rliqjmnaEKICAgICAgICAgICAgICAgIHRoaXMudGh1bWJTY3JvbGxiYXIucmVzZXQoKTsKICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dWaXNpYigpOwoKICAgICAgICAgICAgICAgIC8v6L295YWl57yp55Wl5Zu+CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRUaHVtYigpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmb3JjZVJlcGFpbnQ6ZnVuY3Rpb24oKXsvL+ino+WGs29wZXJh55qEZml4ZWTlhYPntKDvvIzlvZPmu5rliqjmnaHkuI3lho3mnIDpq5jlpITnmoTml7blgJnvvIzkuI3ph43nu5hmaXhlZOWFg+e0oOeahOmXrumimOOAggogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZm9yY2VSZXBhaW50VGltZXIpOwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VSZXBhaW50VGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGlmKGVudmlyLm9wZXJhKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mb3JjZVJlcGFpbnRUaW1lcyAlIDIgPT0wID8gd2luZG93LnNjcm9sbEJ5KDAsMSkgOiB3aW5kb3cuc2Nyb2xsQnkoMCwtMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZm9yY2VSZXBhaW50VGltZXMrKzsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwzMzMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZXNpemVIYW5kbGVyOmZ1bmN0aW9uKCl7Ly/nqpflj6Plj5jljJbml7bvvIzosIPmlbTkuIDkupvkuJzopb/jgIIKICAgICAgICAgICAgICAgIHRoaXMudGh1bWJTY3JvbGxiYXIucmVzZXQoKTsKICAgICAgICAgICAgICAgIC8vdGhpcy5zZWxlY3RlZEludG9WaWV3KCk7CiAgICAgICAgICAgICAgICB0aGlzLmZpdFRvU2NyZWVuKCk7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRUaHVtYigpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfaXNMYXN0U3BhbjogZnVuY3Rpb24oc3BhbikgeyAgLy8g55So5LqO5Yik5pat5piv5ZCm6Ieq5Yqo6YeN6L2977yM5piv5ZCm5piv5pyA5ZCO5Yeg5Liq5Zu+54mHCiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZC5jbGllbnRXaWR0aCA9PSAwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybiB0cnVlOwoKICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuaW1nU3BhbnMpLmluZGV4T2Yoc3Bhbik7CiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLmltZ1NwYW5zLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBpZiAodG90YWwgLSBpbmRleCA8IHByZWZzLmdhbGxlcnkuc2Nyb2xsRW5kQW5kTG9hZF9udW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBhcnJvd1Zpc2liOmZ1bmN0aW9uKCl7Ly/lvZPlvZPliY3pgInmi6nlhYPntKDnmoTliY3pnaLmiJbogIXlkI7pnaLmsqHmnInlhYPntKDnmoTml7blgJnpmpDol4/mjqfliLbnrq3lpLQKCiAgICAgICAgICAgICAgICB2YXIgaWNwcz10aGlzLmVsZU1hcHNbJ2ltZy1jb250cm9sZXItcHJlJ10uc3R5bGU7CiAgICAgICAgICAgICAgICB2YXIgaWNucz10aGlzLmVsZU1hcHNbJ2ltZy1jb250cm9sZXItbmV4dCddLnN0eWxlOwogICAgICAgICAgICAgICAgdmFyIHNjcHM9dGhpcy5lbGVNYXBzWydzaWRlYmFyLWNvbnRyb2xlci1wcmUnXS5zdHlsZTsKICAgICAgICAgICAgICAgIHZhciBzY25zPXRoaXMuZWxlTWFwc1snc2lkZWJhci1jb250cm9sZXItbmV4dCddLnN0eWxlOwoKICAgICAgICAgICAgICAgIC8v5LiL5LiA5byg55qE566t5aS0CiAgICAgICAgICAgICAgICB2YXIgbmV4dFNwYW4gPSB0aGlzLmdldFRodW1TcGFuKCk7CiAgICAgICAgICAgICAgICBpZiAobmV4dFNwYW4pIHsKICAgICAgICAgICAgICAgICAgICBpY25zLmRpc3BsYXk9Jyc7CiAgICAgICAgICAgICAgICAgICAgc2Nucy5kaXNwbGF5PScnOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgaWNucy5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgICAgICBzY25zLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyDmnIDlkI7lh6DlvKDlm77niYfvvIzmu5rliLDlupXpg6jmt7vliqDmlrDnmoTlm77niYcKICAgICAgICAgICAgICAgIGlmIChwcmVmcy5nYWxsZXJ5LnNjcm9sbEVuZEFuZExvYWQgJiYgdGhpcy5faXNMYXN0U3BhbihuZXh0U3BhbikpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvRW5kQW5kUmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy/kuIrkuIDlvKDnmoTnrq3lpLQKICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2V0VGh1bVNwYW4odHJ1ZSkpewogICAgICAgICAgICAgICAgICAgIGljcHMuZGlzcGxheT0nJzsKICAgICAgICAgICAgICAgICAgICBzY3BzLmRpc3BsYXk9Jyc7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBpY3BzLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgIHNjcHMuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAogICAgICAgICAgICBzaW1wbGVTbGlkZVNob3c6ZnVuY3Rpb24oYmFja3dhcmQsaW50ZXJ2YWwpewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNsaWRlU2hvd0ludGVydmFsKTsvL+W5u+eBr+aSreaUvu+8jOWPquWFgeiuuOWtmOWcqOS4gOS4qu+8jOWQpuWImeW+l+S5seWllwoKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICB2YXIgc2xpZGVTaG93SW50ZXJ2YWw9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB2YXIgYmVmb3JlPXNlbGYuc2VsZWN0ZWQ7CiAgICAgICAgICAgICAgICAgICAgYmFja3dhcmQgPyBzZWxmLnNlbGVjdFByZXZpb3VzKCkgOiBzZWxmLnNlbGVjdE5leHQoKTsKICAgICAgICAgICAgICAgICAgICBpZihiZWZvcmUgPT0gc2VsZi5zZWxlY3RlZCl7Ly/msqHmnInkuIvkuIDkuKrlhYPntKDkuobjgILjgIIKICAgICAgICAgICAgICAgICAgICAgICAgc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LChpbnRlcnZhbD8gaW50ZXJ2YWwgOiA4MDApKTsKCiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlU2hvd0ludGVydmFsPXNsaWRlU2hvd0ludGVydmFsOwoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN0b3AoKXsKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNsaWRlU2hvd0ludGVydmFsKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmV0dXJuIHN0b3A7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICByZWxvYWQ6IGZ1bmN0aW9uKCkgeyAgLy8g6YeN5paw5Yqg6L295omA5pyJ5Zu+54mH5Yiw5bqT6YeM6Z2iCiAgICAgICAgICAgICAgICAvLyDlh73mlbDlnKggTG9hZGluZ0FuaW1DIOS4rQogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmdldEFsbFZhbGlkSW1ncygpOwogICAgICAgICAgICAgICAgLy8g6K6+572u5b2T5YmN6YCJ5Lit55qE5Zu+54mHCiAgICAgICAgICAgICAgICBkYXRhLnRhcmdldCA9IHsKICAgICAgICAgICAgICAgICAgICBzcmM6IHRoaXMuc2VsZWN0ZWQuZGF0YXNldC5zcmMKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy5jbG9zZSh0cnVlKTsKCiAgICAgICAgICAgICAgICB0aGlzLmxvYWQoZGF0YSwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlbG9hZE5ldzogZnVuY3Rpb24oKSB7ICAvLyDliqDovb3mlrDnmoTlm77niYfliLDlupPph4zpnaIKICAgICAgICAgICAgICAgIHZhciBuZXdlciA9IHRydWU7CiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0QWxsVmFsaWRJbWdzKG5ld2VyKTsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX2FwcGVuZFRodW1iU3BhbnMoZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldEFsbFZhbGlkSW1nczpmdW5jdGlvbihuZXdlcil7CiAgICAgICAgICAgICAgICB2YXIgdmFsaWRJbWdzID0gW107CiAgICAgICAgICAgICAgICB2YXIgaW1ncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKSwKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHYtZ2FsbGVyeS1jb250YWluZXInKSwKICAgICAgICAgICAgICAgICAgICBwcmVsb2FkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnB2LWdhbGxlcnktcHJlbG9hZGVkLWltZy1jb250YWluZXInKTsKCiAgICAgICAgICAgICAgICBpbWdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaW1ncyk7CiAgICAgICAgICAgICAgICBhcnJheUZuLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpZnJhbWUiKSxmdW5jdGlvbihpZnJhbWUpewogICAgICAgICAgICAgICAgICAgIGlmKGlmcmFtZS5zcmMucmVwbGFjZSgvXC9bXlwvXSokLywiIikuaW5kZXhPZihsb2NhdGlvbi5ob3N0bmFtZSkhPS0xKQogICAgICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheUZuLmZvckVhY2guY2FsbChpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJyksZnVuY3Rpb24oaW1nKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdzLnB1c2goaW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIOaOkumZpOW6k+mHjOmdoueahOWbvueJhwogICAgICAgICAgICAgICAgaW1ncyA9IGltZ3MuZmlsdGVyKGZ1bmN0aW9uKGltZyl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoY29udGFpbmVyLmNvbnRhaW5zKGltZykgfHwgKHByZWxvYWRDb250YWluZXImJnByZWxvYWRDb250YWluZXIuY29udGFpbnMoaW1nKSkpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy8g5bey57uP5Zyo5Zu+5bqT6YeM6Z2i55qECiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgICAgICBpbWdzLmZvckVhY2goZnVuY3Rpb24oaW1nKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld2VyICYmIHNlbGYuX2RhdGFDYWNoZVtpbWcuc3JjXSkgcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmluZFBpYyhpbWcpOwogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRJbWdzLnB1c2gocmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhLnB1c2gocmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2RhdGFDYWNoZVtpbWcuc3JjXSA9IHRydWU7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRJbWdzOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzY3JvbGxUb0VuZEFuZFJlbG9hZDogZnVuY3Rpb24oKSB7ICAvLyDmu5rliqjkuLvnqpflj6PliLDmnIDlupXpg6jvvIznhLblkI7oh6rliqjph43ovb3lupPnmoTlm77niYcKCiAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgOTk5OTk5OSk7CgogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYucmVsb2FkVGltZW91dCk7CiAgICAgICAgICAgICAgICBzZWxmLnJlbG9hZFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbG9hZE5ldygpOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cG9ydEltYWdlczogZnVuY3Rpb24gKCkgeyAgLy8g5a+85Ye65omA5pyJ5Zu+54mH5Yiw5paw56qX5Y+jCiAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iLWNvbnRhaW5lcltkYXRhLXNyY10nKTsKICAgICAgICAgICAgICAgIHZhciBhcnIgPSBbXS5tYXAuY2FsbChub2RlcywgZnVuY3Rpb24obm9kZSl7CiAgICAgICAgICAgICAgICAgICAgaWYodW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSkuZGlzcGxheT09Im5vbmUiKXJldHVybiAiIjsKICAgICAgICAgICAgICAgICAgICBlbHNlIHJldHVybiAnPGRpdj48aW1nIHNyYz0nICsgbm9kZS5kYXRhc2V0LnNyYyArICc+PC9kaXY+JwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gZG9jdW1lbnQudGl0bGU7CgogICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnXAogICAgICAgICAgICAgICAgIDxoZWFkPlwKICAgICAgICAgICAgICAgICA8dGl0bGU+JyArIHRpdGxlICsgJyAnK2kxOG4oImV4cG9ydEltYWdlcyIpKyc8L3RpdGxlPlwKICAgICAgICAgICAgICAgICA8c3R5bGU+XAogICAgICAgICAgICAgICAgIC50b1RvcHt3aWR0aDoyOHB4O2hlaWdodDoyOHB4O2JvcmRlci1yYWRpdXM6MTRweDtwb3NpdGlvbjogZml4ZWQ7cmlnaHQ6MnB4O2JvdHRvbTogMnB4O2N1cnNvcjogcG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7b3BhY2l0eTouMztwYWRkaW5nOjBlbSFpbXBvcnRhbnQ7Ym9yZGVyOjBweCFpbXBvcnRhbnQ7fVwKICAgICAgICAgICAgICAgICAudG9Ub3A6aG92ZXJ7b3BhY2l0eToxfVwKICAgICAgICAgICAgICAgICAudG9Ub3A+c3BhbntoZWlnaHQ6MjhweDtsaW5lLWhlaWdodDoyOHB4O2Rpc3BsYXk6YmxvY2s7Y29sb3I6I0ZGRjt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MjBweDt9XAogICAgICAgICAgICAgICAgIC5ncmlkey1tb3otY29sdW1uLWNvdW50OjQ7LXdlYmtpdC1jb2x1bW4tY291bnQ6NDtjb2x1bW4tY291bnQ6NDstbW96LWNvbHVtbi1nYXA6IDFlbTstd2Via2l0LWNvbHVtbi1nYXA6IDFlbTtjb2x1bW4tZ2FwOiAxZW07fVwKICAgICAgICAgICAgICAgICAuZ3JpZD5kaXZ7cGFkZGluZzogMWVtO21hcmdpbjogMCAwIDFlbSAwOy1tb3otcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOy13ZWJraXQtY29sdW1uLWJyZWFrLWluc2lkZTogYXZvaWQ7YnJlYWstaW5zaWRlOiBhdm9pZDtib3JkZXI6IDFweCBzb2xpZCAjMDAwO31cCiAgICAgICAgICAgICAgICAgLmdyaWQ+ZGl2PmltZ3t3aWR0aDogMTAwJTttYXJnaW4tYm90dG9tOjEwcHg7fVwKICAgICAgICAgICAgICAgICAubGlzdD5kaXYge3RleHQtYWxpZ246Y2VudGVyO31cCiAgICAgICAgICAgICAgICAgLmxpc3Q+ZGl2PmltZyB7IG1heC13aWR0aDogMTAwJTsgfVwKICAgICAgICAgICAgICAgICAuZ3JpZEJpZ3ttYXJnaW46IDBweDt9XAogICAgICAgICAgICAgICAgIC5ncmlkQmlnPmRpdiB7IGZsb2F0OiBsZWZ0O21hcmdpbjogMHB4IDBweCAxcHggMXB4O31cCiAgICAgICAgICAgICAgICAgLmdyaWRCaWc+ZGl2PmltZyB7IG1heC13aWR0aDogMTAwJTsgfVwKICAgICAgICAgICAgICAgICAuc2VsZWN0e29wYWNpdHk6IDAuMzM7fVwKICAgICAgICAgICAgICAgICA8L3N0eWxlPlwKICAgICAgICAgICAgICAgICA8L2hlYWQ+XAogICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvVG9wIj5cCiAgICAgICAgICAgICAgICAgICAgPHNwYW4+77+qPC9zcGFuPlwKICAgICAgICAgICAgICAgICA8L2Rpdj5cCiAgICAgICAgICAgICAgICAgPGJvZHkgY2xhc3M9IicrcHJlZnMuZ2FsbGVyeS5leHBvcnRUeXBlKyciPlwKICAgICAgICAgICAgICAgICA8cCBzdHlsZT0id2lkdGg6MTAwdnc7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjsiPlwKICAgICAgICAgICAgICAgICA8aW1nIGlkPSJiaWdJbWciIHN0eWxlPSJwb2ludGVyLWV2ZW50czpub25lO3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6OTk5O21heC1oZWlnaHQ6MTAwdmg7dG9wOjBweDthbGlnbi1zZWxmOmNlbnRlcjsiPjwvcD5cCiAgICAgICAgICAgICAgICAgPHA+44CQJytpMThuKCJwaWNUaXRsZSIpKyfjgJHvvJonICsgdGl0bGUgKyAnPC9wPlwKICAgICAgICAgICAgICAgICA8cD7jgJAnK2kxOG4oInBpY051bSIpKyfjgJHvvJonICsgbm9kZXMubGVuZ3RoICsgJyA8c2VsZWN0IG9uY2hhbmdlPSJkb2N1bWVudC5ib2R5LmNsYXNzTmFtZT10aGlzLm9wdGlvbnNbdGhpcy5vcHRpb25zLnNlbGVjdGVkSW5kZXhdLnZhbHVlIj48b3B0aW9uIHZhbHVlPSJncmlkIiAnKyhwcmVmcy5nYWxsZXJ5LmV4cG9ydFR5cGU9PSJncmlkIj8ic2VsZWN0ZWQ9J3NlbGVjdGVkJyI6IiIpKyc+JytpMThuKCJncmlkIikrJzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9ImdyaWRCaWciICcrKHByZWZzLmdhbGxlcnkuZXhwb3J0VHlwZT09ImdyaWRCaWciPyJzZWxlY3RlZD0nc2VsZWN0ZWQnIjoiIikrJz4nK2kxOG4oImdyaWRCaWciKSsnPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0ibGlzdCIgJysocHJlZnMuZ2FsbGVyeS5leHBvcnRUeXBlPT0ibGlzdCI/InNlbGVjdGVkPSdzZWxlY3RlZCciOiIiKSsnPicraTE4bigibGlzdCIpKyc8L29wdGlvbj4gPC9zZWxlY3Q+IFwKICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iYnV0dG9uIiB2YWx1ZT0iJytpMThuKCJleHBvcnRJbWFnZXNVcmwiKSsnIiBvbmNsaWNrPSJ2YXIgaW1nU3RyPVwnXCcsc2VsTGlzdD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwnLnNlbGVjdD5pbWdcJyk7aWYoc2VsTGlzdC5sZW5ndGg9PTApW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCdpbWdcJyksZnVuY3Rpb24oaSl7aW1nU3RyKz1pLnNyYytcJyBcXG5cJ30pO2Vsc2V7W10uZm9yRWFjaC5jYWxsKHNlbExpc3QsZnVuY3Rpb24oaSl7aW1nU3RyKz1pLnNyYytcJyBcXG5cJ30pO313aW5kb3cucHJvbXB0KFwnJytpMThuKCJleHBvcnRJbWFnZXNVcmxQb3AiKSsnXCcsaW1nU3RyKTsiPlwKICAgICAgICAgICAgICAgICA8L3A+JzsKCiAgICAgICAgICAgICAgICBodG1sICs9IGFyci5qb2luKCdcbicpICsKICAgICAgICAgICAgICAgICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+XAogICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi50b1RvcCIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oKXtcCiAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxJbnRvVmlldygpO1wKICAgICAgICAgICAgICAgICB9KTtcCiAgICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImRpdj5pbWciKSxmdW5jdGlvbihpKXtcCiAgICAgICAgICAgICAgICAgaS5vbm1vdXNlb3Zlcj1pLm9ubW91c2Vtb3ZlPWZ1bmN0aW9uKGUpe2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNiaWdJbWciKS5zcmM9ZS5jdHJsS2V5P3RoaXMuc3JjOiIiO307XAogICAgICAgICAgICAgICAgIGkub25tb3VzZW91dD1mdW5jdGlvbihlKXtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYmlnSW1nIikuc3JjPSIiO31cCiAgICAgICAgICAgICAgICAgfSk7XAogICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJib2R5PmRpdiIpLGZ1bmN0aW9uKGkpe1wKICAgICAgICAgICAgICAgICBpLm9uY2xpY2s9ZnVuY3Rpb24oKXt0aGlzLmNsYXNzTGlzdC50b2dnbGUoInNlbGVjdCIpfVwKICAgICAgICAgICAgICAgICB9KTtcCiAgICAgICAgICAgICAgICAgPC9zY3JpcHQ+PC9ib2R5Pic7CiAgICAgICAgICAgICAgICBHTV9vcGVuSW5UYWIoJ2RhdGE6dGV4dC9odG1sO2NoYXJzZXQ9dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudChodG1sKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvcHlJbWFnZXM6IGZ1bmN0aW9uKGlzQWxlcnQpIHsKICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyW2RhdGEtc3JjXScpOwogICAgICAgICAgICAgICAgdmFyIHVybHMgPSBbXTsKICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChub2RlcywgZnVuY3Rpb24obm9kZSl7CiAgICAgICAgICAgICAgICAgICAgaWYoZ2V0Q29tcHV0ZWRTdHlsZShub2RlKS5kaXNwbGF5IT0ibm9uZSIpCiAgICAgICAgICAgICAgICAgICAgICAgIHVybHMucHVzaChub2RlLmRhdGFzZXQuc3JjKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIEdNX3NldENsaXBib2FyZCh1cmxzLmpvaW4oIlxuIikpOwoKICAgICAgICAgICAgICAgIGlmIChpc0FsZXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoaTE4bigiY29weVN1Y2Nlc3MiLHVybHMubGVuZ3RoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBQcmVsb2FkOmZ1bmN0aW9uKGVsZSxvcmlUaGlzKXsKICAgICAgICAgICAgICAgIHRoaXMuZWxlPWVsZTsKICAgICAgICAgICAgICAgIHRoaXMub3JpVGhpcz1vcmlUaGlzOy8v5Li7dGhpcwogICAgICAgICAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFNjcm9sbGJhcjpmdW5jdGlvbihzY3JvbGxiYXIsY29udGFpbmVyLGlzSG9yaXpvbnRhbCl7CiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGJhcj1zY3JvbGxiYXI7CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lcj1jb250YWluZXI7CiAgICAgICAgICAgICAgICB0aGlzLmlzSG9yaXpvbnRhbD1pc0hvcml6b250YWwKICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgYWRkU3R5bGU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBzdHlsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICAgICAgc3R5bGUudHlwZT0ndGV4dC9jc3MnOwogICAgICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQ9J1wKICAgICAgICAgICAgICAgICAvKuacgOWkluWxguWuueWZqCovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWNvbnRhaW5lciB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcCiAgICAgICAgICAgICAgICAgICAgdG9wOiAwO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBtaW4td2lkdGg6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDpub25lO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDoyMTQ3NDgzNjQ3O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAvKuWFqOWxgGJvcmRlci1ib3gqL1wKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1jb250YWluZXIgc3BhbntcCiAgICAgICAgICAgICAgICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94O1wKICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS42O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWNvbnRhaW5lciAqIHtcCiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8q54K55Ye76L+Y5Y6f55qE5bel5YW35p2hKi9cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtdHJpZ2dlcntcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246Zml4ZWQ7XAogICAgICAgICAgICAgICAgICAgIGJvdHRvbToxNXB4O1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjE1cHg7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDojMDAwO1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAuNjtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OjEwcHg7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxNnB4O1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDowO1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjp3aGl0ZTtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6M3B4IDNweCAwIDAgIzMzMztcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDo4OTk5OTk5OTg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtdHJpZ2dlcjpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTowLjk7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtdHJpZ2dlci1jbG9zZXtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDoxMHB4O1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDozMHB4O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjEwcHggMDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MjRweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDp1cmwoIicrcHJlZnMuaWNvbnMubG9hZGluZ0NhbmNsZSsnIikgY2VudGVyIG5vLXJlcGVhdDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS10cmlnZ2VyLWNsb3NlOmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLyrpobbmoI8qL1wKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkIHtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MzBweDtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDoxO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOnJnYigwLDAsMCk7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMzMzMzMzO1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOnJpZ2h0O1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDowO1wKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiM3NTc1NzU7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6NDJweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkID4gc3BhbntcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8q6aG25qCP5bem6L65Ki9cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1mbG9hdC1sZWZ0e1wKICAgICAgICAgICAgICAgICAgICBmbG9hdDpsZWZ0O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpsZWZ0O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6NXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtZmxvYXQtbGVmdCA+IHNwYW57XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtZmxvYXQtbGVmdCA+IHNwYW4gPiAqe1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1sZWZ0LWltZy1pbmZve1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6aGVscDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWxlZnQtaW1nLWluZm8tZGVzY3JpcHRpb24ge1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAvKumhtuagj+mHjOmdoueahOaMiemSruagt+W8jy3lvIDlp4sqL1wKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmR7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjEwMCU7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MCA4cHg7XAogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246Y2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDoxO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIC1vLXVzZXItc2VsZWN0OiBub25lO1wKICAgICAgICAgICAgICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIC1tb3otdXNlci1zZWxlY3Q6IC1tb3otbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLyrovoXliqnngrnlh7vkuovku7bnmoTnlJ/miJDvvIxjb3VudGRvd24qL1wKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmRfb3ZlcmxheWVye1wKICAgICAgICAgICAgICAgICAgICB0b3A6MDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDowO1wKICAgICAgICAgICAgICAgICAgICByaWdodDowO1wKICAgICAgICAgICAgICAgICAgICBib3R0b206MDtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgPiAqe1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNsb3Nle1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgdG9wOjA7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OjA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjQwcHg7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgIzMzMzMzMztcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDp0cmFuc3BhcmVudCBuby1yZXBlYXQgY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOnVybCgiJytwcmVmcy5pY29ucy5sb2FkaW5nQ2FuY2xlKyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1jb3VudGRvd257XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTowLjhlbTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1idXR0b257XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6MzZweDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjE4cHg7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoxOHB4O1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6MnB4IHNvbGlkICM3NTc1NzU7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDozcHg7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OjA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9uLWlubmVye1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmlubGluZS1ibG9jaztcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOm5vbmU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6NHB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOjRweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6OHB4IHNvbGlkICM3NTc1NzU7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1idXR0b24taW5uZXJfc3RvcHtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiM3NTc1NzU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbGxlY3QtaWNvbntcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoyMHB4O1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDoyMHB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50IHVybCgiJyArIHByZWZzLmljb25zLmZpdmVQb2ludGVkU3RhciArICciKSAwIDAgbm8tcmVwZWF0O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb2xsZWN0LWljb24gfiAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdC10ZXh0OjphZnRlcntcCiAgICAgICAgICAgICAgICAgICAgY29udGVudDoiJytpMThuKCJjb2xsZWN0IikrJyI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbGxlY3QtZmF2b3JpdGUgPiAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdC1pY29ue1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOi00MHB4IDAgIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdC1mYXZvcml0ZSA+IC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb2xsZWN0LXRleHQ6OmFmdGVye1wKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiInK2kxOG4oImNvbGxlY3RlZCIpKyciO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1leGl0LWNvbGxlY3Rpb257XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiM5MzkzMDAgIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZDpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojMjcyNzI3O1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjojY2NjO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8qZHJvcGxpc3QqL1wKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0e1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OjAgMCAzcHggIzgwODA4MDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojMjcyNzI3O1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS42O1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmxlZnQ7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MTBweDtcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6I2NjYztcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDotMXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbXtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpibG9jaztcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzoycHggNXB4O1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm93cmFwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1jb2xsZWN0LWRlc2NyaXB0aW9ue1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ZGVmYXVsdDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0tY29sbGVjdC1kZXNjcmlwdGlvbiA+IHRleHRhcmVhe1wKICAgICAgICAgICAgICAgICAgICByZXNpemU6Ym90aDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6YXV0bztcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OmF1dG87XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtX2Rpc2FibGVke1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjojNzU3NTc1O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSBpbnB1dCArICp7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDozcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIGlucHV0W3R5cGU9bnVtYmVyXXtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpsZWZ0O1wKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6NTBweDtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjIwcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtID4gKiB7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0gbGFiZWwge1wKICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbTpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8qY29udGFpbmVyKi9cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbnRhaW5lcntcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAvKiBhZnRlcuS8quexu+eUn+aIkOagh+ivhuS4i+aLieiPnOWNleeahOS4ieinkuWbvuaghyovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXIgPiAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQ6OmFmdGVye1wKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiIiO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmlubGluZS1ibG9jaztcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXRvcDo3cHggc29saWQgIzc1NzU3NTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6NXB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6NXB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDo1cHg7XAogICAgICAgICAgICAgICAgICAgIC1tb3otdHJhbnNpdGlvbjphbGwgMC4zcyBlYXNlLWluLW91dCAwcztcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOmFsbCAwLjNzIGVhc2UtaW4tb3V0IDBzO1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOmFsbCAwLjNzIGVhc2UtaW4tb3V0IDBzO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXI6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6MCAwIDNweCAjODA4MDgwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXI6aG92ZXIgPiAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmR7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzI3MjcyNztcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6I2NjYztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyOmhvdmVyID4gLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kOjphZnRlcntcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDE4MGRlZyk7XAogICAgICAgICAgICAgICAgICAgIC1tb3otdHJhbnNmb3JtOnJvdGF0ZSgxODBkZWcpO1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06cm90YXRlKDE4MGRlZyk7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6N3B4IHNvbGlkICNjY2M7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbnRhaW5lcjpob3ZlciAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdC1pY29ue1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMHB4IDA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbnRhaW5lcjpob3ZlciAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1idXR0b257XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjojY2NjO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXI6aG92ZXIgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9uLWlubmVye1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdC1jb2xvcjojY2NjO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXI6aG92ZXIgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9uLWlubmVyX3N0b3B7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjojY2NjO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXI6aG92ZXIgPiAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0e1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8q6aG25qCP6YeM6Z2i55qE5oyJ6ZKu5qC35byPLee7k+adnyovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWJvZHkge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDMwcHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDowO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZy1jb250YWluZXIge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjAsMjAsMjAsMC45Nik7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZy1jb250YWluZXItdG9wIHtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogJysgcHJlZnMuZ2FsbGVyeS5zaWRlYmFyU2l6ZSArJ3B4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZy1jb250YWluZXItcmlnaHQge1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6ICcrIHByZWZzLmdhbGxlcnkuc2lkZWJhclNpemUgKydweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWctY29udGFpbmVyLWJvdHRvbSB7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206ICcrIHByZWZzLmdhbGxlcnkuc2lkZWJhclNpemUgKydweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWctY29udGFpbmVyLWxlZnQge1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogJysgcHJlZnMuZ2FsbGVyeS5zaWRlYmFyU2l6ZSArJ3B4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8q5aSn5Zu+5Yy65Z+f55qE5YiH5o2i5o6n5Yi25oyJ6ZKuKi9cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaW1nLWNvbnRyb2xlcntcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIHRvcDo1MCU7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDo2MHB4O1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDo1MHB4O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOi0zMHB4O1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTowLjM7XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6MTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWctY29udHJvbGVyLXByZXtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDpyZ2JhKDcwLDcwLDcwLDAuNSkgdXJsKCInK3ByZWZzLmljb25zLmFycm93TGVmdCsnIikgbm8tcmVwZWF0IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDoxMHB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZy1jb250cm9sZXItbmV4dHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDpyZ2JhKDcwLDcwLDcwLDAuNSkgdXJsKCInK3ByZWZzLmljb25zLmFycm93UmlnaHQrJyIpIG5vLXJlcGVhdCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OjEwcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaW1nLWNvbnRyb2xlcjpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDE0MCwxNDAsMTQwLDAuNSk7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC45O1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLyrmu5rliqjmnaHmoLflvI8tLeW8gOWniyovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNjcm9sbGJhci1oLFwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItdntcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjE7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC4zO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOm5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLWh7XAogICAgICAgICAgICAgICAgICAgIGJvdHRvbToxMHB4O1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjA7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OjA7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMHB4O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MCAycHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLXZ7XAogICAgICAgICAgICAgICAgICAgIHRvcDowO1wKICAgICAgICAgICAgICAgICAgICBib3R0b206MDtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6MTBweDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTBweDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjJweCAwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNjcm9sbGJhci1oOmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItdjpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItaDpob3ZlcixcCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLXY6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC45O1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLWgtdHJhY2ssXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNjcm9sbGJhci12LXRyYWNre1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgdG9wOjA7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6MDtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOjA7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgxMDAsMTAwLDEwMCwxKTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjJweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItaC1oYW5kbGUsXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNjcm9sbGJhci12LWhhbmRsZXtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6YmxhY2s7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLWgtaGFuZGxle1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItdi1oYW5kbGV7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLWgtaGFuZGxlOmhvdmVyLFwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItdi1oYW5kbGU6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzUwMjEyMTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItaC1oYW5kbGU6YWN0aXZlLFwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItdi1oYW5kbGU6YWN0aXZle1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiMzOTFBMUE7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLyrmu5rliqjmnaHmoLflvI8tLee7k+adnyovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZy1jb250ZW50e1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDoxMDAlO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6aGlkZGVuO1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjA7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OjA7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTowO1wKICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTpub3dyYXA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaW1nLXBhcmVudHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWdfYnJva2Vue1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjpwb2ludGVyO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZ3tcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XC8q6L6F5YqpZS5sYXllclgsbGF5ZXJZKi9cCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6YXV0bztcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OmF1dG87XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjVweCBzb2xpZCAjMzEzMTMxO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MTBweDtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTowLjY7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDAuOSk7XAogICAgICAgICAgICAgICAgICAgIC1tb3otdHJhbnNmb3JtOnNjYWxlKDAuOSk7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTpzY2FsZSgwLjkpO1wKICAgICAgICAgICAgICAgICAgICAnKwogICAgICAgICAgICAgICAgICAgICAgICAocHJlZnMuZ2FsbGVyeS50cmFuc2l0aW9uID8gKCdcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMTVzIGVhc2UtaW4tb3V0LFwKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybSAwLjFzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgICAgICAtbW96LXRyYW5zaXRpb246IG9wYWNpdHkgMC4xNXMgZWFzZS1pbi1vdXQsXAogICAgICAgICAgICAgICAgICAgIC1tb3otdHJhbnNmb3JtIDAuMXMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4xNXMgZWFzZS1pbi1vdXQsXAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybSAwLjFzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgICAgICAnKSA6ICcnKSArICdcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWdfem9vbS1vdXR7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjonK3N1cHBvcnQuY3NzQ3Vyc29yVmFsdWUuem9vbU91dCsnO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZ196b29tLWlue1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6JytzdXBwb3J0LmNzc0N1cnNvclZhbHVlLnpvb21JbisnO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xle1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiKDAsMCwwKTtcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6Izc1NzU3NTtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm93cmFwO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDoxO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGU6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiNjY2M7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaHtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ODBweDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6LTQwcHg7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6NTAlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlLXZ7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDo4MHB4O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOi00MHB4O1wKICAgICAgICAgICAgICAgICAgICB0b3A6NTAlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlLXRvcHtcCiAgICAgICAgICAgICAgICAgICAgdG9wOi01cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtcmlnaHR7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0Oi01cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtYm90dG9te1wKICAgICAgICAgICAgICAgICAgICBib3R0b206LTVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1sZWZ0e1wKICAgICAgICAgICAgICAgICAgICBsZWZ0Oi01cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtY29udGVudHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm9ybWFsO1wKICAgICAgICAgICAgICAgICAgICB3b3JkLXdyYXA6YnJlYWstd29yZDtcCiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3ctd3JhcDpicmVhay13b3JkO1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDoxLjE7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxMnB4O1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjJweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1jb250ZW50LXZ7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjEuMWVtO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8q5L6n6L655qCP5byA5aeLKi9cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250YWluZXIge1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiKDAsMCwwKTtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzo1cHg7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OjA7XAogICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOm5vd3JhcDtcCiAgICAgICAgICAgICAgICAgICAgLW8tdXNlci1zZWxlY3Q6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIC1tb3otdXNlci1zZWxlY3Q6IC1tb3otbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250YWluZXItaCB7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogJysgcHJlZnMuZ2FsbGVyeS5zaWRlYmFyU2l6ZSArJ3B4O1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRhaW5lci12IHtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcrIHByZWZzLmdhbGxlcnkuc2lkZWJhclNpemUgKydweDtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udGFpbmVyLXRvcCB7XAogICAgICAgICAgICAgICAgICAgIHRvcDogMDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDogMDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgIzMzMzMzMztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRhaW5lci1yaWdodCB7XAogICAgICAgICAgICAgICAgICAgIHRvcDogMDtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDA7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OjFweCBzb2xpZCAjMzMzMzMzO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udGFpbmVyLWJvdHRvbSB7XAogICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDogMDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXRvcDoxcHggc29saWQgIzMzMzMzMztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRhaW5lci1sZWZ0IHtcCiAgICAgICAgICAgICAgICAgICAgdG9wOiAwO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6MXB4IHNvbGlkICMzMzMzMzM7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250ZW50IHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpsZWZ0O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udGVudC1oIHtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogOTAlO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogNDBweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiA0MHB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udGVudC12IHtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA5MCU7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOiA0MHB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiA0MHB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVye1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjEpIG5vLXJlcGVhdCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250cm9sZXI6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwwLjMpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVyLXByZS1oLFwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRyb2xlci1uZXh0LWh7XAogICAgICAgICAgICAgICAgICAgIHRvcDowO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDozNnB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRyb2xlci1wcmUtdixcCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250cm9sZXItbmV4dC12e1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDozNnB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVyLXByZS1oIHtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDogLTQwcHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiJytwcmVmcy5pY29ucy5hcnJvd0xlZnQrJyIpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVyLW5leHQtaCB7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtNDBweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLmFycm93UmlnaHQrJyIpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVyLXByZS12IHtcCiAgICAgICAgICAgICAgICAgICAgdG9wOiAtNDBweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLmFycm93VG9wKyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRyb2xlci1uZXh0LXYge1wKICAgICAgICAgICAgICAgICAgICBib3R0b206IC00MHB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIicrcHJlZnMuaWNvbnMuYXJyb3dCb3R0b20rJyIpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJuYWlscy1jb250YWluZXIge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjA7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjA7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OjA7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJuYWlscy1jb250YWluZXIgc3BhbntcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJuYWlscy1jb250YWluZXItaHtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6MXB4IHNvbGlkICM0NjQ2NDY7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yaWdodDoxcHggc29saWQgIzQ2NDY0NjtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm93cmFwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJuYWlscy1jb250YWluZXItdntcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXRvcDoxcHggc29saWQgIzQ2NDY0NjtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgIzQ2NDY0NjtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm9ybWFsO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJuYWlscy1jb250YWluZXItdG9wIHtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206NXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJuYWlscy1jb250YWluZXItcmlnaHQge1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6NXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJuYWlscy1jb250YWluZXItYm90dG9tIHtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy10b3A6NXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJuYWlscy1jb250YWluZXItbGVmdCB7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6NXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyIHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjJweCBzb2xpZCByZ2IoNTIsNTIsNTIpO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MnB4O1wKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6MDtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm93cmFwO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6MDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDowO1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIDAuMnMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246YWxsIDAuMnMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lci1oICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iLWNvbnRhaW5lciB7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjowIDJweDtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjEwMCU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lci12ICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iLWNvbnRhaW5lciB7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjoycHggMDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHNfaGlkZS1zcGFuID4gLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYi1jb250YWluZXIge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYi1jb250YWluZXI6aG92ZXIge1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6MnB4IHNvbGlkIHJnYig1NywxNDksMjExKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iX3NlbGVjdGVkIHtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjJweCBzb2xpZCByZ2IoMjI5LDU5LDYyKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iX3NlbGVjdGVkLXRvcCB7XAogICAgICAgICAgICAgICAgICAgIHRvcDo1cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYl9zZWxlY3RlZC1yaWdodCB7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6LTVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iX3NlbGVjdGVkLWJvdHRvbSB7XAogICAgICAgICAgICAgICAgICAgIHRvcDotNXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJfc2VsZWN0ZWQtbGVmdCB7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6NXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItbG9hZGluZ3tcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIHRvcDowO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjA7XAogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246Y2VudGVyO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDoxMDAlO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAuNjtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDpibGFjayB1cmwoIicrIHByZWZzLmljb25zLmxvYWRpbmcgKyAnIikgbm8tcmVwZWF0IGNlbnRlciA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYi1sb2FkaW5nOmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAuODtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iIHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgbWF4LWhlaWdodDogMTAwJSAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXJ7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjA7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MDtcCiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTpoaWRkZW47XAogICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOm5vd3JhcDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZWQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgJzsKICAgICAgICAgICAgICAgIHZhciBoZWFkPWRvY3VtZW50LmhlYWQ7CiAgICAgICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsU1NoZWV0PXN0eWxlLnNoZWV0OwoKICAgICAgICAgICAgICAgIHZhciBzdHlsZTI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICAgICAgICAgIHRoaXMudGh1bWJWaXNpYmxlU3R5bGU9c3R5bGUyOwogICAgICAgICAgICAgICAgc3R5bGUyLnR5cGU9J3RleHQvY3NzJzsKICAgICAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUyKTsKCiAgICAgICAgICAgICAgICAvLyDorqkgZGVzY3JpcHRpb24g55qE5paH5a2X5YaF5a655rqi5Ye655So54K554K554K5KC4uLinnnIHnlaXlj7fooajnpLoKICAgICAgICAgICAgICAgIC8vIC5wdi1nYWxsZXJ5LWhlYWQtbGVmdC1pbWctaW5mby1kZXNjcmlwdGlvbiB7CiAgICAgICAgICAgICAgICAvLyAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgICAgICAvLyAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgICAgICAgICAgICAvLyAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAgICAgICAgIC8vICAgICB3aWR0aDogMjdlbTsKICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgfTsKCgogICAgICAgIEdhbGxlcnlDLnByb3RvdHlwZS5QcmVsb2FkLnByb3RvdHlwZT17Ly/pooTor7vlr7nosaEKICAgICAgICAgICAgaW5pdDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYoIXRoaXMuY29udGFpbmVyKXsvL+mihOivu+eahOWbvueJh+mDveS7jemHjOmdogogICAgICAgICAgICAgICAgICAgIHZhciBkaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZT0ncHYtZ2FsbGVyeS1wcmVsb2FkZWQtaW1nLWNvbnRhaW5lcic7CiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICAgICAgICAgICAgICBHYWxsZXJ5Qy5wcm90b3R5cGUuUHJlbG9hZC5wcm90b3R5cGUuY29udGFpbmVyPWRpdjsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLm1heD1wcmVmcy5nYWxsZXJ5Lm1heDsKICAgICAgICAgICAgICAgIHRoaXMubmV4dE51bWJlcj0wOwogICAgICAgICAgICAgICAgdGhpcy5uZXh0RWxlPXRoaXMuZWxlOwogICAgICAgICAgICAgICAgdGhpcy5wcmVOdW1iZXI9MDsKICAgICAgICAgICAgICAgIHRoaXMucHJlRWxlPXRoaXMuZWxlOwogICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb249J3ByZSc7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByZWxvYWQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBlbGU9dGhpcy5nZXRQcmVsb2FkRWxlKCk7CiAgICAgICAgICAgICAgICBpZighZWxlKXsKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCfpooTor7vmraPluLjnu5PmnZ8nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ+ato+WcqOmihOivu++8micsZWxlKTsKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICB0aGlzLmltZ1JlYWR5PWltZ1JlYWR5KGRhdGFzZXQoZWxlLCdzcmMnKSx7CiAgICAgICAgICAgICAgICAgICAgbG9hZEVuZDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxmLmFib3J0ZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygn5by65Yi257uI5q2i5LqGJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoZWxlLCdwcmVsb2FkZWQnLCd0cnVlJykKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdGltZTo2MCAqIDEwMDAsLy/pmZDml7bkuIDliIbpkp/vvIzlkKbliJnlvLrliLbnu5PmnZ/lubblvIDlp4vpooTor7vkuIvkuIDlvKDjgIIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRQcmVsb2FkRWxlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZigodGhpcy5tYXg8PXRoaXMubmV4dE51bWJlciAmJiB0aGlzLm1heDw9dGhpcy5wcmVOdW1iZXIpIHx8ICghdGhpcy5uZXh0RWxlICYmICF0aGlzLnByZUVsZSkpewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgZWxlPXRoaXMuZGlyZWN0aW9uPT0ncHJlJz8gIHRoaXMuZ2V0TmV4dCgpIDogdGhpcy5nZXRQcmV2aW91cygpOwogICAgICAgICAgICAgICAgaWYoZWxlICYmICFkYXRhc2V0KGVsZSwncHJlbG9hZGVkJykpewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGU7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQcmVsb2FkRWxlKCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXROZXh0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLm5leHROdW1iZXIrKzsKICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uPSduZXh0JzsKICAgICAgICAgICAgICAgIGlmKCF0aGlzLm5leHRFbGUpcmV0dXJuOwogICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLm5leHRFbGUgPSB0aGlzLm9yaVRoaXMuZ2V0VGh1bVNwYW4oZmFsc2UsdGhpcy5uZXh0RWxlKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFByZXZpb3VzOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLnByZU51bWJlcisrOwogICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb249J3ByZSc7CiAgICAgICAgICAgICAgICBpZighdGhpcy5wcmVFbGUpcmV0dXJuOwogICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnByZUVsZSA9IHRoaXMub3JpVGhpcy5nZXRUaHVtU3Bhbih0cnVlLHRoaXMucHJlRWxlKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFib3J0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLmFib3J0ZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgIGlmKHRoaXMuaW1nUmVhZHkpewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nUmVhZHkuYWJvcnQoKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgfTsKCgogICAgICAgIEdhbGxlcnlDLnByb3RvdHlwZS5TY3JvbGxiYXIucHJvdG90eXBlPXsvL+a7muWKqOadoeWvueixoQogICAgICAgICAgICBpbml0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgYmFyPXRoaXMuc2Nyb2xsYmFyLmJhcjsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd249YmFyLm9mZnNldFdpZHRoIT0wOwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGJhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLGZ1bmN0aW9uKGUpey8v54K55Ye75rua5Yqo5p2h5Yy65Z+f77yM6K+l5bmy54K55LuA5LmI77yBCiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZT1zZWxmLnNjcm9sbGJhci5oYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWNrPXNlbGYuc2Nyb2xsYmFyLnRyYWNrOwogICAgICAgICAgICAgICAgICAgIHN3aXRjaCh0YXJnZXQpewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGhhbmRsZTp7Ly/miYvmn4TvvJvlip/og73vvIzmi5bliqjmiYvmn4TmnaXmu5rliqjnqpflj6MKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm89c2VsZi5pc0hvcml6b250YWwgPyBbJ2xlZnQnLCdjbGllbnRYJ10gOiBbJ3RvcCcsJ2NsaWVudFknXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvSE9mZnNldD1wYXJzZUZsb2F0KGhhbmRsZS5zdHlsZVtwcm9bMF1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvQ2xpZW50PWVbcHJvWzFdXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZUhhbmRsZXI9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zY3JvbGwob0hPZmZzZXQgKyBlW3Byb1sxXV0gLSBvQ2xpZW50LHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cEhhbmRsZXI9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLG1vdmVIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLHVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLG1vdmVIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsdXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgdHJhY2s6ey8v6L2o6YGT77yb5Yqf6IO977yM5oyJ5L2P5LiN5pS+5p2l6L+e57ut5rua5Yqo5LiA5Liq6aG16Z2i55qE6Led56a7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvPXNlbGYuaXNIb3Jpem9udGFsID8gWydsZWZ0Jywnb2Zmc2V0WCcsJ2xheWVyWCcsJ2NsaWVudFdpZHRoJywnb2Zmc2V0V2lkdGgnXSA6IFsndG9wJyAsICdvZmZzZXRZJyAsJ2xheWVyWScsJ2NsaWVudEhlaWdodCcsJ29mZnNldEhlaWdodCddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaWNrT2Zmc2V0PXR5cGVvZiBlW3Byb1sxXV09PSd1bmRlZmluZWQnID8gIGVbcHJvWzJdXSA6IGVbcHJvWzFdXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVPZmZzZXQ9cGFyc2VGbG9hdChoYW5kbGUuc3R5bGVbcHJvWzBdXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlU2l6ZT1oYW5kbGVbcHJvWzRdXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bmRlcj0gY2xpY2tPZmZzZXQgPiBoYW5kbGVPZmZzZXQgOy8v54K55Ye75Zyo5rua5Yqo5omL5p+E55qE5LiL5pa5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyU2l6ZT1zZWxmLmNvbnRhaW5lcltwcm9bM11dOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGw9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNjcm9sbEJ5KHVuZGVyPyAgKGNvbnRhaW5lclNpemUgLSAxMCkgOiAoLWNvbnRhaW5lclNpemUgKyAxMCkpOy8v5rua5Yqo5LiA5Liq6aG16Z2i6Led56a75bCR5LiA54K5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrU3RvcD1mdW5jdGlvbigpey8v5b2T5omL5p+E5Yiw6L6+54K55Ye75L2N572u5pe25YGc5q2iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZU9mZnNldD1wYXJzZUZsb2F0KGhhbmRsZS5zdHlsZVtwcm9bMF1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjbGlja09mZnNldCA+PSBoYW5kbGVPZmZzZXQgJiYgY2xpY2tPZmZzZXQgPD0gKGhhbmRsZU9mZnNldCArIGhhbmRsZVNpemUpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVvdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNjcm9sbEludGVydmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbEludGVydmFsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja1N0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDEyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tTdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDMwMCk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrU3RvcCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cEhhbmRsZXI9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsVGltZW91dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzY3JvbGxJbnRlcnZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsdXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLHVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgfSx0cnVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVzZXQ6ZnVuY3Rpb24oKXsvL+WIpOaWrea7muWKqOadoeivpeaYvuekuui/mOaYr+makOiXjwoKICAgICAgICAgICAgICAgIHZhciBwcm89dGhpcy5pc0hvcml6b250YWwgPyBbJ3Njcm9sbFdpZHRoJywnY2xpZW50V2lkdGgnLCd3aWR0aCddIDogWydzY3JvbGxIZWlnaHQnLCdjbGllbnRIZWlnaHQnLCdoZWlnaHQnXTsKCiAgICAgICAgICAgICAgICAvL+WmguaenOWGheWuueWkp+S6juWuueWZqOeahGNvbnRlbnTljLrln58KCiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsU2l6ZT10aGlzLmNvbnRhaW5lcltwcm9bMF1dOwogICAgICAgICAgICAgICAgdmFyIGNsaWVudFNpemU9dGhpcy5jb250YWluZXJbcHJvWzFdXTsKICAgICAgICAgICAgICAgIHZhciBzY3JvbGxNYXg9c2Nyb2xsU2l6ZSAtIGNsaWVudFNpemU7CiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1heD1zY3JvbGxNYXg7CiAgICAgICAgICAgICAgICBpZihzY3JvbGxNYXg+MCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWNrU2l6ZT10aGlzLnNjcm9sbGJhci50cmFja1twcm9bMV1dOwogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2tTaXplPXRyYWNrU2l6ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlU2l6ZT1NYXRoLmZsb29yKChjbGllbnRTaXplL3Njcm9sbFNpemUpICogdHJhY2tTaXplKTsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVTaXplPU1hdGgubWF4KDIwLGhhbmRsZVNpemUpOy8v6ZmQ5Yi25omL5p+E55qE5pyA5bCP5aSn5bCPOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU2l6ZT1oYW5kbGVTaXplOwogICAgICAgICAgICAgICAgICAgIHRoaXMub25lPSh0cmFja1NpemUtaGFuZGxlU2l6ZSkgLyBzY3JvbGxNYXg7Ly/kuIDkuKrlg4/ntKDlr7nlupTnmoTmu5rliqjmnaHplb/luqYKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGJhci5oYW5kbGUuc3R5bGVbcHJvWzJdXT0gaGFuZGxlU2l6ZSArICdweCc7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGwodGhpcy5nZXRTY3JvbGxlZCgpKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvdzpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYodGhpcy5zaG93bilyZXR1cm47CiAgICAgICAgICAgICAgICB0aGlzLnNob3duPXRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGJhci5iYXIuc3R5bGUuZGlzcGxheT0nYmxvY2snOwogICAgICAgICAgICB9LAogICAgICAgICAgICBoaWRlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZighdGhpcy5zaG93bilyZXR1cm47CiAgICAgICAgICAgICAgICB0aGlzLnNob3duPWZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIuYmFyLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzY3JvbGxCeTpmdW5jdGlvbihkaXN0YW5jZSxoYW5kbGVEaXN0YW5jZSl7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGwodGhpcy5nZXRTY3JvbGxlZCgpICsgKGhhbmRsZURpc3RhbmNlPyAgZGlzdGFuY2UgLyB0aGlzLm9uZSA6ICBkaXN0YW5jZSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzY3JvbGxCeVBhZ2VzOmZ1bmN0aW9uKG51bSl7CiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbCh0aGlzLmdldFNjcm9sbGVkKCkgKyAodGhpcy5jb250YWluZXJbKHRoaXMuaXNIb3Jpem9udGFsID8gJ2NsaWVudFdpZHRoJyA6ICdjbGllbnRIZWlnaHQnKV0gLSAxMCkgKiBudW0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzY3JvbGw6ZnVuY3Rpb24oZGlzdGFuY2UsaGFuZGxlRGlzdGFuY2UsdHJhbnNpdGlvbil7CiAgICAgICAgICAgICAgICBpZighdGhpcy5zaG93bilyZXR1cm47CgogICAgICAgICAgICAgICAgLy/mu5rliqjlrp7pmYXmu5rliqjmnaEKICAgICAgICAgICAgICAgIHZhciBfZGlzdGFuY2U9ZGlzdGFuY2U7CiAgICAgICAgICAgICAgICBfZGlzdGFuY2U9aGFuZGxlRGlzdGFuY2U/ICBkaXN0YW5jZSAvIHRoaXMub25lIDogIGRpc3RhbmNlOwogICAgICAgICAgICAgICAgX2Rpc3RhbmNlPU1hdGgubWF4KDAsX2Rpc3RhbmNlKTsKICAgICAgICAgICAgICAgIF9kaXN0YW5jZT1NYXRoLm1pbihfZGlzdGFuY2UsdGhpcy5zY3JvbGxNYXgpOwoKCiAgICAgICAgICAgICAgICB2YXIgcHJvPXRoaXMuaXNIb3Jpem9udGFsPyBbJ2xlZnQnLCdzY3JvbGxMZWZ0J10gOiBbJ3RvcCcsJ3Njcm9sbFRvcCddOwoKCiAgICAgICAgICAgICAgICAvL+a7muWKqOiZmuaLn+a7muWKqOadoQogICAgICAgICAgICAgICAgLy/moLnmja7mr5TkvovovazmjaLkuLrmu5rliqjmnaHkuIrlupTor6Xmu5rliqjnmoTot53nprvjgIIKICAgICAgICAgICAgICAgIGRpc3RhbmNlPWhhbmRsZURpc3RhbmNlPyBkaXN0YW5jZSA6IHRoaXMub25lICogZGlzdGFuY2U7CiAgICAgICAgICAgICAgICAvL+WkhOeQhumdnuazleWAvAogICAgICAgICAgICAgICAgZGlzdGFuY2U9TWF0aC5tYXgoMCxkaXN0YW5jZSk7Ly/lpoLmnpzlgLzlsI/kuo4w6YKj5LmI5Y+WMAogICAgICAgICAgICAgICAgZGlzdGFuY2U9TWF0aC5taW4oZGlzdGFuY2UsdGhpcy50cmFja1NpemUgLSB0aGlzLmhhbmRsZVNpemUpOy8v5aSn5LqO5p6B6ZmQ5YC877yM5Y+W5p6B6ZmQ5YC8CgogICAgICAgICAgICAgICAgdmFyIHNocz10aGlzLnNjcm9sbGJhci5oYW5kbGUuc3R5bGU7CiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyPXRoaXMuY29udGFpbmVyOwogICAgICAgICAgICAgICAgaWYodHJhbnNpdGlvbil7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRyYW5zaXRpb25JbnRlcnZhbCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBzdGFydD0wOwogICAgICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbj0xMDsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGNTdGFydD10aGlzLmdldFNjcm9sbGVkKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNDaGFuZ2U9X2Rpc3RhbmNlLWNTdGFydDsKICAgICAgICAgICAgICAgICAgICB2YXIgc1N0YXJ0PXBhcnNlRmxvYXQoc2hzW3Byb1swXV0pOwogICAgICAgICAgICAgICAgICAgIHZhciBzQ2hhbmdlPWRpc3RhbmNlLXNTdGFydDsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25JbnRlcnZhbD1zZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY0VuZD1Ud2Vlbi5DdWJpYy5lYXNlSW5PdXQoc3RhcnQsY1N0YXJ0LGNDaGFuZ2UsZHVyYXRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc0VuZD1Ud2Vlbi5DdWJpYy5lYXNlSW5PdXQoc3RhcnQsc1N0YXJ0LHNDaGFuZ2UsZHVyYXRpb24pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyW3Byb1sxXV09Y0VuZDsKICAgICAgICAgICAgICAgICAgICAgICAgc2hzW3Byb1swXV09c0VuZCArICdweCc7CgogICAgICAgICAgICAgICAgICAgICAgICBzdGFydCsrOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzdGFydD49ZHVyYXRpb24pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0cmFuc2l0aW9uSW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0sMzUpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25JbnRlcnZhbD10cmFuc2l0aW9uSW50ZXJ2YWw7CgogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIG5vU2Nyb2xsPXNoc1twcm9bMF1dPT1kaXN0YW5jZSArICdweCc7CiAgICAgICAgICAgICAgICBzaHNbcHJvWzBdXT1kaXN0YW5jZSArICdweCc7CiAgICAgICAgICAgICAgICBjb250YWluZXJbcHJvWzFdXT1fZGlzdGFuY2U7CiAgICAgICAgICAgICAgICByZXR1cm4gbm9TY3JvbGw7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFNjcm9sbGVkOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICByZXR1cm4gIHRoaXMuY29udGFpbmVyWyh0aGlzLmlzSG9yaXpvbnRhbCA/ICdzY3JvbGxMZWZ0JyA6ICdzY3JvbGxUb3AnKV07CiAgICAgICAgICAgIH0sCiAgICAgICAgfTsKCgogICAgICAgIC8v5pS+5aSn6ZWcCiAgICAgICAgZnVuY3Rpb24gTWFnbmlmaWVyQyhpbWcsZGF0YSl7CiAgICAgICAgICAgIHRoaXMuaW1nPWltZzsKICAgICAgICAgICAgdGhpcy5kYXRhPWRhdGE7CiAgICAgICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgIH07CgogICAgICAgIE1hZ25pZmllckMuYWxsPVtdOwogICAgICAgIE1hZ25pZmllckMuc3R5bGVaSW5kZXg9OTAwMDAwMDAwOy8v5YWo5bGAei1pbmRleDsKICAgICAgICBNYWduaWZpZXJDLnpvb21SYW5nZT1wcmVmcy5tYWduaWZpZXIud2hlZWxab29tLnJhbmdlLnNsaWNlKDApLnNvcnQoKTsvL+WNh+W6jwogICAgICAgIE1hZ25pZmllckMuem9vbVJhbmdlUj1NYWduaWZpZXJDLnpvb21SYW5nZS5zbGljZSgwKS5yZXZlcnNlKCk7Ly/pmY3luo8KCiAgICAgICAgTWFnbmlmaWVyQy5wcm90b3R5cGU9ewogICAgICAgICAgICBpbml0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLmFkZFN0eWxlKCk7CiAgICAgICAgICAgICAgICBNYWduaWZpZXJDLmFsbC5wdXNoKHRoaXMpOwogICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CgogICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZT0ncHYtbWFnbmlmaWVyLWNvbnRhaW5lcic7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CgogICAgICAgICAgICAgICAgdGhpcy5tYWduaWZpZXI9Y29udGFpbmVyOwoKICAgICAgICAgICAgICAgIHZhciBpbWdOYXR1cmFsU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDp0aGlzLmltZy5uYXR1cmFsSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgIHc6dGhpcy5pbWcubmF0dXJhbFdpZHRoLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLmltZ05hdHVyYWxTaXplPWltZ05hdHVyYWxTaXplOwoKICAgICAgICAgICAgICAgIHZhciBjcz1jb250YWluZXIuc3R5bGU7CiAgICAgICAgICAgICAgICBjcy56SW5kZXg9TWFnbmlmaWVyQy5zdHlsZVpJbmRleCsrOwoKCgogICAgICAgICAgICAgICAgdmFyIG1heERpYT1NYXRoLmNlaWwoTWF0aC5zcXJ0KE1hdGgucG93KDEvMippbWdOYXR1cmFsU2l6ZS53LDIpICsgTWF0aC5wb3coMS8yKmltZ05hdHVyYWxTaXplLmgsMikpICogMik7CiAgICAgICAgICAgICAgICB0aGlzLm1heERpYT1tYXhEaWE7CgogICAgICAgICAgICAgICAgdmFyIHJhZGl1cz1wcmVmcy5tYWduaWZpZXIucmFkaXVzOwogICAgICAgICAgICAgICAgcmFkaXVzPU1hdGgubWluKG1heERpYS8yLHJhZGl1cyk7CiAgICAgICAgICAgICAgICB0aGlzLnJhZGl1cz1yYWRpdXM7CiAgICAgICAgICAgICAgICB2YXIgZGlhbWV0ZXI9cmFkaXVzICogMjsKICAgICAgICAgICAgICAgIHRoaXMuZGlhbWV0ZXI9ZGlhbWV0ZXI7CgogICAgICAgICAgICAgICAgY3Mud2lkdGg9ZGlhbWV0ZXIgKyAncHgnOwogICAgICAgICAgICAgICAgY3MuaGVpZ2h0PWRpYW1ldGVyICsgJ3B4JzsKICAgICAgICAgICAgICAgIGNzLmJvcmRlclJhZGl1cz1yYWRpdXMrMSArICdweCc7CiAgICAgICAgICAgICAgICBjcy5iYWNrZ3JvdW5kSW1hZ2U9J3VybCgiJysgdGhpcy5pbWcuc3JjICsnIiknOwogICAgICAgICAgICAgICAgY3MubWFyZ2luTGVmdD0gLXJhZGl1cyArJ3B4JzsKICAgICAgICAgICAgICAgIGNzLm1hcmdpblRvcD0gLXJhZGl1cyArJ3B4JzsKCiAgICAgICAgICAgICAgICB2YXIgaW1nUG9zPWdldENvbnRlbnRDbGllbnRSZWN0KHRoaXMuZGF0YS5pbWcpOwogICAgICAgICAgICAgICAgdmFyIHdTY3JvbGxlZD1nZXRTY3JvbGxlZCgpOwogICAgICAgICAgICAgICAgdmFyIGltZ1JhbmdlPXsvL+WbvueJh+aJgOWcqOiMg+WbtAogICAgICAgICAgICAgICAgICAgIHg6W2ltZ1Bvcy5sZWZ0ICsgd1Njcm9sbGVkLnggLCBpbWdQb3MucmlnaHQgKyB3U2Nyb2xsZWQueF0sCiAgICAgICAgICAgICAgICAgICAgeTpbaW1nUG9zLnRvcCArIHdTY3JvbGxlZC55LCBpbWdQb3MuYm90dG9tICsgd1Njcm9sbGVkLnldLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBpbWdXPWltZ1JhbmdlLnhbMV0gLSBpbWdSYW5nZS54WzBdOwogICAgICAgICAgICAgICAgdmFyIGltZ0g9aW1nUmFuZ2UueVsxXSAtIGltZ1JhbmdlLnlbMF07CiAgICAgICAgICAgICAgICAvL+WmguaenOWbvueJh+WkquWwj+eahOivne+8jOi/m+ihjOiMg+WbtOaJqeWkp+OAggogICAgICAgICAgICAgICAgdmFyIG1pblNpemU9NjA7CiAgICAgICAgICAgICAgICBpZihpbWdXIDwgbWluU2l6ZSl7CiAgICAgICAgICAgICAgICAgICAgaW1nUmFuZ2UueFsxXSArPShtaW5TaXplIC0gaW1nVykvMjsKICAgICAgICAgICAgICAgICAgICBpbWdSYW5nZS54WzBdIC09KG1pblNpemUgLSBpbWdXKS8yOwogICAgICAgICAgICAgICAgICAgIGltZ1c9bWluU2l6ZTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZihpbWdIIDwgbWluU2l6ZSl7CiAgICAgICAgICAgICAgICAgICAgaW1nUmFuZ2UueVsxXSArPShtaW5TaXplIC0gaW1nSCkvMjsKICAgICAgICAgICAgICAgICAgICBpbWdSYW5nZS55WzBdIC09KG1pblNpemUgLSBpbWdIKS8yOwogICAgICAgICAgICAgICAgICAgIGltZ0g9bWluU2l6ZTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmltZ1NpemU9ewogICAgICAgICAgICAgICAgICAgIHc6aW1nVywKICAgICAgICAgICAgICAgICAgICBoOmltZ0gsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5pbWdSYW5nZT1pbWdSYW5nZTsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5pbWdSYW5nZSx0aGlzLmltZ1NpemUpOwoKICAgICAgICAgICAgICAgIHRoaXMuc2V0TW91c2VSYW5nZSgpOwoKCiAgICAgICAgICAgICAgICB0aGlzLm1vdmUoewogICAgICAgICAgICAgICAgICAgIHBhZ2VYOmltZ1JhbmdlLnhbMF0sCiAgICAgICAgICAgICAgICAgICAgcGFnZVk6aW1nUmFuZ2UueVswXSwKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHRoaXMuX2ZvY3VzPXRoaXMuZm9jdXMuYmluZCh0aGlzKTsKICAgICAgICAgICAgICAgIHRoaXMuX2JsdXI9dGhpcy5ibHVyLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlPXRoaXMubW92ZS5iaW5kKHRoaXMpOwogICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlPXRoaXMucmVtb3ZlLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl9wYXVzZT10aGlzLnBhdXNlLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl96b29tPXRoaXMuem9vbS5iaW5kKHRoaXMpOwoKICAgICAgICAgICAgICAgIGlmKHByZWZzLm1hZ25pZmllci53aGVlbFpvb20uZW5hYmxlZCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tTGV2ZWw9MTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHREaWE9ZGlhbWV0ZXI7CiAgICAgICAgICAgICAgICAgICAgYWRkV2hlZWxFdmVudChjb250YWluZXIsdGhpcy5fem9vbSxmYWxzZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLHRoaXMuX2ZvY3VzLGZhbHNlKTsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsdGhpcy5fYmx1cixmYWxzZSk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLHRoaXMuX3JlbW92ZSxmYWxzZSk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRoaXMuX3BhdXNlLGZhbHNlKTsKCgogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyx0aGlzLl9tb3ZlLHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRTdHlsZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYoTWFnbmlmaWVyQy5zdHlsZSlyZXR1cm47CiAgICAgICAgICAgICAgICB2YXIgc3R5bGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICAgICAgICAgIHN0eWxlLnR5cGU9J3RleHQvY3NzJzsKICAgICAgICAgICAgICAgIE1hZ25pZmllckMuc3R5bGU9c3R5bGU7CiAgICAgICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudD0nXAogICAgICAgICAgICAgICAgICAgIC5wdi1tYWduaWZpZXItY29udGFpbmVye1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1vcmlnaW46Ym9yZGVyLWJveDtcCiAgICAgICAgICAgICAgICAgICAgLW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6Ym9yZGVyLWJveDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjNweCBzb2xpZCAjQ0NDQ0NDO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnJnYmEoNDAsIDQwLCA0MCwgMC45KSBuby1yZXBlYXQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LW1hZ25pZmllci1jb250YWluZXJfZm9jdXN7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAwcHggNnB4IHJnYmEoMCwgMCwgMCwgMC43KTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtbWFnbmlmaWVyLWNvbnRhaW5lcl9wYXVzZXtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOnJlZDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvY3VzOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLm1hZ25pZmllci5jbGFzc0xpc3QuYWRkKCdwdi1tYWduaWZpZXItY29udGFpbmVyX2ZvY3VzJyk7CiAgICAgICAgICAgICAgICB0aGlzLm1hZ25pZmllci5zdHlsZS56SW5kZXg9TWFnbmlmaWVyQy5zdHlsZVpJbmRleCsrOwogICAgICAgICAgICB9LAogICAgICAgICAgICBibHVyOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLm1hZ25pZmllci5jbGFzc0xpc3QucmVtb3ZlKCdwdi1tYWduaWZpZXItY29udGFpbmVyX2ZvY3VzJyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1vdmU6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICB2YXIgbW91c2VDb29yPXsKICAgICAgICAgICAgICAgICAgICB4OmUucGFnZVgsCiAgICAgICAgICAgICAgICAgICAgeTplLnBhZ2VZLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBtb3VzZVJhbmdlPXRoaXMubW91c2VSYW5nZTsKICAgICAgICAgICAgICAgIHZhciBpbWdSYW5nZT10aGlzLmltZ1JhbmdlOwoKICAgICAgICAgICAgICAgIGlmKCAhKG1vdXNlQ29vci54ID49IG1vdXNlUmFuZ2UueFswXSAmJiBtb3VzZUNvb3IueCA8PSBtb3VzZVJhbmdlLnhbMV0gJiYgbW91c2VDb29yLnkgPj0gbW91c2VSYW5nZS55WzBdICYmIG1vdXNlQ29vci55IDw9IG1vdXNlUmFuZ2UueVsxXSkpcmV0dXJuOy8v5aaC5p6c5LiN5YaN6byg5qCH6IyD5Zu0CiAgICAgICAgICAgICAgICBpZihtb3VzZUNvb3IueCA+IGltZ1JhbmdlLnhbMV0pewogICAgICAgICAgICAgICAgICAgIG1vdXNlQ29vci54ID0gaW1nUmFuZ2UueFsxXTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKG1vdXNlQ29vci54IDwgaW1nUmFuZ2UueFswXSl7CiAgICAgICAgICAgICAgICAgICAgbW91c2VDb29yLnggPSBpbWdSYW5nZS54WzBdOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmKG1vdXNlQ29vci55ID4gaW1nUmFuZ2UueVsxXSl7CiAgICAgICAgICAgICAgICAgICAgbW91c2VDb29yLnkgPSBpbWdSYW5nZS55WzFdOwogICAgICAgICAgICAgICAgfWVsc2UgaWYobW91c2VDb29yLnkgPCBpbWdSYW5nZS55WzBdKXsKICAgICAgICAgICAgICAgICAgICBtb3VzZUNvb3IueSA9IGltZ1JhbmdlLnlbMF07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBtcz10aGlzLm1hZ25pZmllci5zdHlsZTsKICAgICAgICAgICAgICAgIG1zLnRvcD0gbW91c2VDb29yLnkgKyAncHgnOwogICAgICAgICAgICAgICAgbXMubGVmdD0gbW91c2VDb29yLnggKyAncHgnOwoKICAgICAgICAgICAgICAgIHZhciByYWRpdXM9dGhpcy5yYWRpdXM7CiAgICAgICAgICAgICAgICB2YXIgaW1nU2l6ZT10aGlzLmltZ1NpemU7CiAgICAgICAgICAgICAgICB2YXIgaW1nTmF0dXJhbFNpemU9dGhpcy5pbWdOYXR1cmFsU2l6ZTsKICAgICAgICAgICAgICAgIHZhciBweD0tKChtb3VzZUNvb3IueC1pbWdSYW5nZS54WzBdKS9pbWdTaXplLncgKiBpbWdOYXR1cmFsU2l6ZS53KSArIHJhZGl1cyArJ3B4JzsKICAgICAgICAgICAgICAgIHZhciBweT0tKChtb3VzZUNvb3IueS1pbWdSYW5nZS55WzBdKS9pbWdTaXplLmggKiBpbWdOYXR1cmFsU2l6ZS5oKSArIHJhZGl1cyArJ3B4JzsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocHgscHkpOwogICAgICAgICAgICAgICAgbXMuYmFja2dyb3VuZFBvc2l0aW9uPXB4ICsgJyAnICsgcHk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldE5leHRab29tTGV2ZWw6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBsZXZlbDsKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICBpZih0aGlzLnpvb21PdXQpey8v57yp5bCPCiAgICAgICAgICAgICAgICAgICAgTWFnbmlmaWVyQy56b29tUmFuZ2VSLl9maW5kKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUgPCBzZWxmLnpvb21MZXZlbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbD12YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIE1hZ25pZmllckMuem9vbVJhbmdlLl9maW5kKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUgPiBzZWxmLnpvb21MZXZlbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbD12YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGxldmVsOwogICAgICAgICAgICB9LAogICAgICAgICAgICB6b29tOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgaWYoZS5kZWx0YVk9PT0wKXJldHVybjsvL+mdnlnovbTnmoTmu5rliqgKICAgICAgICAgICAgICAgIGlmKHByZWZzLm1hZ25pZmllci53aGVlbFpvb20ucGF1c2VGaXJzdCAmJiAhdGhpcy5wYXVzZWQpcmV0dXJuOwogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgaWYoZS5kZWx0YVkgPCAwKXsvL+WQkeS4iua7mu+8jOaUvuWkp++8mwogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuZGlhbWV0ZXIgPj0gdGhpcy5tYXhEaWEpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbU91dD1mYWxzZTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbU91dD10cnVlOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBsZXZlbD10aGlzLmdldE5leHRab29tTGV2ZWwoKTsKICAgICAgICAgICAgICAgIGlmKCFsZXZlbClyZXR1cm47CgogICAgICAgICAgICAgICAgdGhpcy56b29tTGV2ZWw9bGV2ZWw7CiAgICAgICAgICAgICAgICB2YXIgZGlhbWV0ZXI9dGhpcy5kZWZhdWx0RGlhICogbGV2ZWw7CiAgICAgICAgICAgICAgICBpZihkaWFtZXRlciA+IHRoaXMubWF4RGlhKXsKICAgICAgICAgICAgICAgICAgICBkaWFtZXRlciA9IHRoaXMubWF4RGlhOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgcmFkaXVzPWRpYW1ldGVyLzIKICAgICAgICAgICAgICAgIHRoaXMuZGlhbWV0ZXI9ZGlhbWV0ZXI7CiAgICAgICAgICAgICAgICB2YXIgYlJhZGl1cz10aGlzLnJhZGl1czsKICAgICAgICAgICAgICAgIHRoaXMucmFkaXVzPXJhZGl1czsKICAgICAgICAgICAgICAgIHRoaXMuc2V0TW91c2VSYW5nZSgpOwogICAgICAgICAgICAgICAgdmFyIG1zPXRoaXMubWFnbmlmaWVyLnN0eWxlOwogICAgICAgICAgICAgICAgbXMud2lkdGg9ZGlhbWV0ZXIrJ3B4JzsKICAgICAgICAgICAgICAgIG1zLmhlaWdodD1kaWFtZXRlcisncHgnOwogICAgICAgICAgICAgICAgbXMuYm9yZGVyUmFkaXVzPXJhZGl1cysxICsgJ3B4JzsKICAgICAgICAgICAgICAgIG1zLm1hcmdpbkxlZnQ9LXJhZGl1cysncHgnOwogICAgICAgICAgICAgICAgbXMubWFyZ2luVG9wPS1yYWRpdXMrJ3B4JzsKICAgICAgICAgICAgICAgIHZhciBiQlA9bXMuYmFja2dyb3VuZFBvc2l0aW9uLnNwbGl0KCcgJyk7CiAgICAgICAgICAgICAgICBtcy5iYWNrZ3JvdW5kUG9zaXRpb249cGFyc2VGbG9hdChiQlBbMF0pICsgKHJhZGl1cyAtIGJSYWRpdXMpICsgJ3B4JyArICcgJyArIChwYXJzZUZsb2F0KGJCUFsxXSkgKyAoIHJhZGl1cyAtIGJSYWRpdXMpICsgJ3B4Jyk7CgogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXVzZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYodGhpcy5wYXVzZWQpewogICAgICAgICAgICAgICAgICAgIHRoaXMubWFnbmlmaWVyLmNsYXNzTGlzdC5yZW1vdmUoJ3B2LW1hZ25pZmllci1jb250YWluZXJfcGF1c2UnKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLHRoaXMuX21vdmUsdHJ1ZSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1hZ25pZmllci5jbGFzc0xpc3QuYWRkKCdwdi1tYWduaWZpZXItY29udGFpbmVyX3BhdXNlJyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyx0aGlzLl9tb3ZlLHRydWUpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMucGF1c2VkPSF0aGlzLnBhdXNlZDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0TW91c2VSYW5nZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIGltZ1JhbmdlPXRoaXMuaW1nUmFuZ2U7CiAgICAgICAgICAgICAgICB2YXIgcmFkaXVzPXRoaXMucmFkaXVzOwogICAgICAgICAgICAgICAgdGhpcy5tb3VzZVJhbmdlPXsvL+m8oOagh+a0u+WKqOiMg+WbtAogICAgICAgICAgICAgICAgICAgIHg6W2ltZ1JhbmdlLnhbMF0tcmFkaXVzICwgaW1nUmFuZ2UueFsxXSArIHJhZGl1c10sCiAgICAgICAgICAgICAgICAgICAgeTpbaW1nUmFuZ2UueVswXS1yYWRpdXMgLCBpbWdSYW5nZS55WzFdICsgcmFkaXVzXSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlbW92ZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5tYWduaWZpZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm1hZ25pZmllcik7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLHRoaXMuX21vdmUsdHJ1ZSk7CiAgICAgICAgICAgICAgICBNYWduaWZpZXJDLmFsbC5zcGxpY2UoTWFnbmlmaWVyQy5hbGwuaW5kZXhPZih0aGlzKSwxKTsKICAgICAgICAgICAgfSwKICAgICAgICB9OwoKICAgICAgICAvL+WbvueJh+eql+WPowogICAgICAgIGZ1bmN0aW9uIEltZ1dpbmRvd0MoaW1nLCBkYXRhKXsKICAgICAgICAgICAgdGhpcy5pbWc9aW1nOwogICAgICAgICAgICB0aGlzLnNyYz1pbWcuc3JjOwogICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOwoKICAgICAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgfTsKCiAgICAgICAgSW1nV2luZG93Qy5hbGw9W107Ly/miYDmnInnmoTnqpflj6Plr7nosaEKICAgICAgICBJbWdXaW5kb3dDLnN0eWxlWkluZGV4PTIxNDc0ODM2NDc7Ly/lhajlsYB6LWluZGV4OwogICAgICAgIEltZ1dpbmRvd0Muem9vbVJhbmdlPXByZWZzLmltZ1dpbmRvdy56b29tLnJhbmdlLnNsaWNlKDApLnNvcnQoKTsvL+WNh+W6jwogICAgICAgIEltZ1dpbmRvd0Muem9vbVJhbmdlUj1JbWdXaW5kb3dDLnpvb21SYW5nZS5zbGljZSgwKS5yZXZlcnNlKCk7Ly/pmY3luo8KICAgICAgICBJbWdXaW5kb3dDLm92ZXJsYXllcj1udWxsOwoKCiAgICAgICAgSW1nV2luZG93Qy5wcm90b3R5cGU9ewogICAgICAgICAgICBpbml0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgLy/lm77niYfmmK/lkKblt7Lnu4/ooqvmiZPlvIAKICAgICAgICAgICAgICAgIGlmKEltZ1dpbmRvd0MuYWxsLl9maW5kKGZ1bmN0aW9uKGl3aW4pewogICAgICAgICAgICAgICAgICAgIGlmKGl3aW4uc3JjPT1zZWxmLnNyYyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGl3aW4uZmlyc3RPcGVuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KSlyZXR1cm47CgogICAgICAgICAgICAgICAgdGhpcy5hZGRTdHlsZSgpOwoKICAgICAgICAgICAgICAgIHZhciBpbWc9dGhpcy5pbWc7CiAgICAgICAgICAgICAgICBpbWcuY2xhc3NOYW1lPSdwdi1waWMtd2luZG93LXBpYyBwdi1waWMtaWdub3JlZCc7CiAgICAgICAgICAgICAgICBpbWcuc3R5bGUuY3NzVGV4dD0nXAogICAgICAgICAgICAgICAgIHRvcDowcHg7XAogICAgICAgICAgICAgICAgIGxlZnQ6MHB4O1wKICAgICAgICAgICAgICAgICAnOwoKICAgICAgICAgICAgICAgIHZhciBpbWdOYXR1cmFsU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDppbWcubmF0dXJhbEhlaWdodCwKICAgICAgICAgICAgICAgICAgICB3OmltZy5uYXR1cmFsV2lkdGgsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5pbWdOYXR1cmFsU2l6ZT1pbWdOYXR1cmFsU2l6ZTsKCiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0PSdcCiAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgIHRvcDowcHg7XAogICAgICAgICAgICAgICAgIGxlZnQ6MHB4O1wKICAgICAgICAgICAgICAgICAnOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZT0ncHYtcGljLXdpbmRvdy1jb250YWluZXInOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTD0KICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctcm90YXRlLWluZGljYXRvciI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctcm90YXRlLWluZGljYXRvci1wb2ludGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXJvdGF0ZS1vdmVybGF5ZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10b29sYmFyIiB1bnNlbGVjdGFibGU9Im9uIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi1oYW5kIHB2LXBpYy13aW5kb3ctdGItdG9vbCIgdGl0bGU9IicraTE4bigiaGFuZCIpKyciPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWJhZGdlLWNvbnRhaW5lciBwdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtY29udGFpbmVyIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi1yb3RhdGUgcHYtcGljLXdpbmRvdy10Yi10b29sIiB0aXRsZT0i5peL6L2sIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItdG9vbC1iYWRnZSI+MDwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51IHB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1yb3RhdGUiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtaXRlbSI+MDwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWl0ZW0iPis5MDwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWl0ZW0iPi05MDwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLXRvb2wtYmFkZ2UtY29udGFpbmVyIHB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1jb250YWluZXIiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLXpvb20gcHYtcGljLXdpbmRvdy10Yi10b29sIiB0aXRsZT0iJytpMThuKCJzY2FsZSIpKyciPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWJhZGdlIj4wPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUgcHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LXpvb20iPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtaXRlbSI+MTwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWl0ZW0iPiswLjE8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1pdGVtIj4tMC4xPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItZmxpcC1ob3Jpem9udGFsIHB2LXBpYy13aW5kb3ctdGItY29tbWFuZCIgdGl0bGU9IicraTE4bigiaG9yaXpvbnRhbEZsaXAiKSsnIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItZmxpcC12ZXJ0aWNhbCBwdi1waWMtd2luZG93LXRiLWNvbW1hbmQiIHRpdGxlPSInK2kxOG4oInZlcnRpY2FsRmxpcCIpKyciPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctY2xvc2UiPjwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctc2VhcmNoIiB0aXRsZT0iJytpMThuKCJzaW1pbGFySW1hZ2UiKSsnIj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXJhbmdlIj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LWRlc2NyaXB0aW9uIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy1zZWFyY2gtc3RhdGUiPjwvc3Bhbj4nOwoKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoaW1nLGNvbnRhaW5lci5maXJzdENoaWxkKTsKCiAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdz1jb250YWluZXI7CgogICAgICAgICAgICAgICAgdmFyIHRvb2xNYXA9ewogICAgICAgICAgICAgICAgICAgICdoYW5kJzpjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy13aW5kb3ctdGItaGFuZCcpLAogICAgICAgICAgICAgICAgICAgICdyb3RhdGUnOmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXdpbmRvdy10Yi1yb3RhdGUnKSwKICAgICAgICAgICAgICAgICAgICAnem9vbSc6Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXRiLXpvb20nKSwKICAgICAgICAgICAgICAgICAgICAnZmgnOmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXdpbmRvdy10Yi1mbGlwLWhvcml6b250YWwnKSwKICAgICAgICAgICAgICAgICAgICAnZnYnOmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXdpbmRvdy10Yi1mbGlwLXZlcnRpY2FsJyksCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy50b29sTWFwPXRvb2xNYXA7CgoKICAgICAgICAgICAgICAgIC8v5YWz6ZetCiAgICAgICAgICAgICAgICB2YXIgY2xvc2VCdXR0b249Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LWNsb3NlJyk7CiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jc3NUZXh0PSd0b3A6IC0yNHB4O3JpZ2h0OiAwcHg7JzsKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VCdXR0b249Y2xvc2VCdXR0b247CiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKICAgICAgICAgICAgICAgIHZhciBzZWFyY2hCdXR0b249Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXNlYXJjaCcpOwogICAgICAgICAgICAgICAgc2VhcmNoQnV0dG9uLnN0eWxlLmNzc1RleHQ9J3RvcDogLTI0cHg7cmlnaHQ6IDUwcHg7JzsKICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoQnV0dG9uPXNlYXJjaEJ1dHRvbjsKICAgICAgICAgICAgICAgIHZhciBzcmNzLCBmcm9tOwogICAgICAgICAgICAgICAgaW1nLm9uZXJyb3I9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoaTE4bigibG9hZE5leHRTaW1pbGFyIiksaW1nLnBhcmVudE5vZGUpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhpbWcuc3JjK2kxOG4oImxvYWRFcnJvciIpKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3JjPXNlbGYuc3Jjcy5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgIGlmKHNyYylpbWcuc3JjPXNyYzsKICAgICAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICAgICBpZihmcm9tPHNlYXJjaFNvcnQubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20rKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaEltZ0J5SW1nKHNlbGYuaW1nLnNyYywgc2VsZi5pbWcucGFyZW50Tm9kZSwgZnVuY3Rpb24oc3JjcywgaW5kZXgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb209aW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zcmNzPXNyY3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWcuc3JjPXNyY3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sbnVsbCxudWxsLGZyb20pOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlYXJjaFN0YXRlKGkxOG4oImZpbmROb1BpYyIpLGltZy5wYXJlbnROb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZSgiIixpbWcucGFyZW50Tm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDIwMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGltZy5vbmxvYWQ9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoIiIsaW1nLnBhcmVudE5vZGUpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nTmF0dXJhbFNpemU9ewogICAgICAgICAgICAgICAgICAgICAgICBoOmltZy5uYXR1cmFsSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICB3OmltZy5uYXR1cmFsV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzZWxmLnpvb20oMSk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5maXRUb1NjcmVlbigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2VhcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBzb3J0U2VhcmNoKCk7CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW1nQnlJbWcoc2VsZi5pbWcuc3JjLCBzZWxmLmltZy5wYXJlbnROb2RlLCBmdW5jdGlvbihzcmNzLCBpbmRleCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyb209aW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3Jjcz1zcmNzOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltZy5zcmM9c3Jjcy5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSxmYWxzZSk7CgogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICog6K+05piOCiAgICAgICAgICogMeOAgeWvueWOn+adpeeahOmAguW6lOWxj+W5leetieWKn+iDveS8muacieW9seWTje+8jOaaguaXtuemgeeUqOOAggogICAgICAgICAqIDLjgIHliIbkuLogYWJzb2x1dGUg5ZKM6buY6K6k55qEMuenjeaDheWGtQogICAgICAgICAqLwogICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSkgewogICAgICAgICAgICAgICAgICAgIHZhciBkZXNjcmlwdGlvblNwYW4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy13aW5kb3ctZGVzY3JpcHRpb24nKTsKICAgICAgICAgICAgICAgICAgICAvLyBkZXNjcmlwdGlvblNwYW4uc3R5bGUuY3NzVGV4dCA9ICdcCiAgICAgICAgICAgICAgICAgICAgLy8gIGJvdHRvbTogLTQwcHg7XAogICAgICAgICAgICAgICAgICAgIC8vICBsZWZ0OiAxMHB4O1wKICAgICAgICAgICAgICAgICAgICAvLyAnOwogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uU3Bhbi50ZXh0Q29udGVudCA9IHRoaXMuZGF0YS5kZXNjcmlwdGlvbiB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAvLyBkZXNjcmlwdGlvblNwYW4uc3R5bGUuZGlzcGxheSA9IHRoaXMuZGF0YS5kZXNjcmlwdGlvbiA/ICdibG9jaycgOiAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25TcGFuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvblNwYW4gPSBkZXNjcmlwdGlvblNwYW47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHRvb2xiYXI9Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXRvb2xiYXInKTsKICAgICAgICAgICAgICAgIHRvb2xiYXIuc3R5bGUuY3NzVGV4dD0nXAp0b3A6IDBweDtcCmxlZnQ6IC00NXB4O1wKJzsKICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhcj10b29sYmFyOwoKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUb29sQ2xhc3M9J3B2LXBpYy13aW5kb3ctdGItdG9vbC1zZWxlY3RlZCc7CgogICAgICAgICAgICAgICAgdGhpcy52aWV3UmFuZ2U9Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXJhbmdlJyk7CgogICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVJbmRpY2F0b3I9Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXJvdGF0ZS1pbmRpY2F0b3InKTsKICAgICAgICAgICAgICAgIHRoaXMucm90YXRlSVBvaW50ZXI9Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXJvdGF0ZS1pbmRpY2F0b3ItcG9pbnRlcicpOwogICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVPdmVybGF5ZXI9Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXJvdGF0ZS1vdmVybGF5ZXInKTsKCgogICAgICAgICAgICAgICAgdGhpcy5oS2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMucktleVVwPXRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnpLZXlVcD10cnVlOwoKICAgICAgICAgICAgICAgIHRoaXMuc3BhY2VLZXlVcD10cnVlOwogICAgICAgICAgICAgICAgdGhpcy5jdHJsS2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuYWx0S2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRLZXlVcD10cnVlOwoKICAgICAgICAgICAgICAgIC8v57yp5pS+5bel5YW355qE5omp5bGV6I+c5Y2VCiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS16b29tJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQ9dGFyZ2V0LnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2godGV4dCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJzEnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPTE7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnKzAuMSc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9c2VsZi56b29tTGV2ZWwgKyAwLjE7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnLTAuMSc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9c2VsZi56b29tTGV2ZWwgLSAwLjE7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB2YWx1ZSE9J3VuZGVmaW5lZCcpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnpvb20odmFsdWUse3g6MCx5OjB9KTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSx0cnVlKTsKCiAgICAgICAgICAgICAgICAvL+aXi+i9rOW3peWFt+eahOaJqeWxleiPnOWNlQogICAgICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtcm90YXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQ9dGFyZ2V0LnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjb252ZXJ0KGRlZyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWcgKiBNYXRoLlBJLzE4MDsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBzd2l0Y2godGV4dCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJzAnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPTA7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnKzkwJzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1zZWxmLnJvdGF0ZWRSYWRpYW5zICsgY29udmVydCg5MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnLTkwJzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1zZWxmLnJvdGF0ZWRSYWRpYW5zIC0gY29udmVydCg5MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgUEk9TWF0aC5QSTsKICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgdmFsdWUhPSd1bmRlZmluZWQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWU+PTIqUEkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUtPTIqUEk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHZhbHVlPDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUrPTIqUEk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucm90YXRlKHZhbHVlLHRydWUpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKICAgICAgICAgICAgICAgIHRvb2xiYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxmdW5jdGlvbihlKXsvL+m8oOagh+aMieS4i+mAieaLqeW3peWFtwogICAgICAgICAgICAgICAgICAgIHNlbGYudG9vbGJhckV2ZW50SGFuZGxlcihlKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKCiAgICAgICAgICAgICAgICB0b29sYmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJyxmdW5jdGlvbihlKXsvL+m8oOagh+WPjOWHu+W3peWFtwogICAgICAgICAgICAgICAgICAgIHNlbGYudG9vbGJhckV2ZW50SGFuZGxlcihlKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKCiAgICAgICAgICAgICAgICAvL+mYu+atoua1j+iniOWZqOWvueWbvueJh+eahOm7mOiupOaOp+WItuihjOS4ugogICAgICAgICAgICAgICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgfSxmYWxzZSk7CgoKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLGZ1bmN0aW9uKGUpey8v5b2T5oyJ5LiL55qE5pe277yM5omn6KGM5bmz56e777yM57yp5pS+77yM5peL6L2s5pON5L2cCiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdXaW5kb3dFdmVudEhhbmRsZXIoZSk7CiAgICAgICAgICAgICAgICB9LGZhbHNlKTsKCiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpey8v6Zi75q2ib3BlcmEgY3RybCvngrnlh7vkv53lrZjlm77niYcKICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ1dpbmRvd0V2ZW50SGFuZGxlcihlKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKICAgICAgICAgICAgICAgIGlmKHByZWZzLmltZ1dpbmRvdy56b29tLm1vdXNlV2hlZWxab29tKXsvL+aYr+WQpuS9v+eUqOm8oOagh+e8qeaUvgogICAgICAgICAgICAgICAgICAgIGFkZFdoZWVsRXZlbnQoY29udGFpbmVyLGZ1bmN0aW9uKGUpey8v5rua6L2u57yp5pS+CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nV2luZG93RXZlbnRIYW5kbGVyKGUpOwogICAgICAgICAgICAgICAgICAgIH0sZmFsc2UpOwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgaWYocHJlZnMuaW1nV2luZG93Lm92ZXJsYXllci5zaG93bil7Ly/mmK/lkKbmmL7npLropobnm5blsYIKICAgICAgICAgICAgICAgICAgICB2YXIgb3ZlcmxheWVyPUltZ1dpbmRvd0Mub3ZlcmxheWVyOwogICAgICAgICAgICAgICAgICAgIGlmKCFvdmVybGF5ZXIpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3ZlcmxheWVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgSW1nV2luZG93Qy5vdmVybGF5ZXI9b3ZlcmxheWVyOwogICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5ZXIuY2xhc3NOYW1lPSdwdi1waWMtd2luZG93LW92ZXJsYXllcic7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheWVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheWVyLnN0eWxlLmJhY2tncm91bmRDb2xvcj1wcmVmcy5pbWdXaW5kb3cub3ZlcmxheWVyLmNvbG9yOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheWVyLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy/mmK/lkKbngrnlh7vlm77niYflpJbpg6jlhbPpl60KICAgICAgICAgICAgICAgIGlmKHByZWZzLmltZ1dpbmRvdy5jbG9zZS5jbGlja091dHNpZGUudHJpZ2dlcil7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNsaWNrT3V0c2lkZT1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWNvbnRhaW5lci5jb250YWlucyh0YXJnZXQpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrT3V0c2lkZT1jbGlja091dHNpZGU7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihwcmVmcy5pbWdXaW5kb3cuY2xvc2UuY2xpY2tPdXRzaWRlLnRyaWdnZXIsY2xpY2tPdXRzaWRlLHRydWUpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvL+aYr+WQpuWPjOWHu+WbvueJh+acrOi6q+WFs+mXrQogICAgICAgICAgICAgICAgaWYocHJlZnMuaW1nV2luZG93LmNsb3NlLmRibENsaWNrSW1nV2luZG93KXsKICAgICAgICAgICAgICAgICAgICB2YXIgZGJsQ2xpY2tJbWdXaW5kb3c9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldD09Y29udGFpbmVyIHx8IHRhcmdldD09aW1nIHx8IHRhcmdldD09c2VsZi5yb3RhdGVPdmVybGF5ZXIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsZGJsQ2xpY2tJbWdXaW5kb3csdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CiAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLmFsbC5wdXNoKHRoaXMpOwoKICAgICAgICAgICAgICAgIHRoaXMuX2JsdXI9dGhpcy5ibHVyLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl9mb2N1c2VkS2V5ZG93bj10aGlzLmZvY3VzZWRLZXlkb3duLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl9mb2N1c2VkS2V5dXA9dGhpcy5mb2N1c2VkS2V5dXAuYmluZCh0aGlzKTsKCiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZWRSYWRpYW5zPTA7Ly/lt7Lnu4/ml4vovaznmoTop5LluqYKICAgICAgICAgICAgICAgIHRoaXMuem9vbUxldmVsPTE7Ly/nvKnmlL7nuqfliKsKICAgICAgICAgICAgICAgIHRoaXMuc2V0VG9vbEJhZGdlKCd6b29tJywxKTsKCiAgICAgICAgICAgICAgICAvL+mAieS4rem7mOiupOW3peWFtwogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUb29sKHByZWZzLmltZ1dpbmRvdy5kZWZhdWx0VG9vbCk7CgogICAgICAgICAgICAgICAgdGhpcy5maXJzdE9wZW4oKTsKICAgICAgICAgICAgfSwKCgogICAgICAgICAgICBhZGRTdHlsZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYoSW1nV2luZG93Qy5zdHlsZSlyZXR1cm47CiAgICAgICAgICAgICAgICB2YXIgc3R5bGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICAgICAgICAgIEltZ1dpbmRvd0Muc3R5bGU9c3R5bGU7CiAgICAgICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudD0nXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lciB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg0MCw0MCw0MCwwLjkpO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHg7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogNXB4IHNvbGlkICNjY2M7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAwO1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1wKICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXMge1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsMCwwLDAuNik7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNsb3NlLFwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1zZWFyY2gsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRvb2xiYXIsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnV7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdG9vbGJhciB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzUzNTM1MztcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMDtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC45O1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XAogICAgICAgICAgICAgICAgICAgIC1vLXVzZXItc2VsZWN0OiBub25lO1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1wKICAgICAgICAgICAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiAtbW96LW5vbmU7XAogICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRvb2xiYXI6aG92ZXIge1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRvb2xiYXJfZm9jdXMge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jbG9zZSB7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICByaWdodDogMHB4O1wKICAgICAgICAgICAgICAgICAgICB0b3A6IC0yNHB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB1cmwoIicrcHJlZnMuaWNvbnMuY2xvc2UrJyIpIG5vLXJlcGVhdCBjZW50ZXIgYm90dG9tO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE3cHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NnB4O1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjk7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOjJweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojMTc3MUZGO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNsb3NlOmhvdmVyIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZWQ7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctY2xvc2VfZm9jdXMge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1zZWFyY2gge1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDUwcHg7XAogICAgICAgICAgICAgICAgICAgIHRvcDogLTI0cHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHVybCgiJytwcmVmcy5pY29ucy5zZWFyY2hCdG4rJyIpIG5vLXJlcGVhdCBjZW50ZXIgYm90dG9tO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE3cHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NnB4O1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjk7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOjJweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojMTc3MUZGO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXNlYXJjaDpob3ZlciB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmVkO1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXNlYXJjaF9mb2N1cyB7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWRlc2NyaXB0aW9uIHtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcCiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjBweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXNlYXJjaC1zdGF0ZSB7XAogICAgICAgICAgICAgICAgICAgIHRvcDogMTBweDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDogMTBweDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMTtcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmZmMDA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1MDBweDtcCiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiBsYXJnZTtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDFweCAwIDAgIzAwMCwtMXB4IDAgMCAjMDAwLDAgMXB4IDAgIzAwMCwwIC0xcHggMCAjMDAwO1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRleHQtc2hhZG93OiMwMDAgMXB4IDAgMCwjMDAwIDAgMXB4IDAsIzAwMCAtMXB4IDAgMCwjMDAwIDAgLTFweCAwO1wKICAgICAgICAgICAgICAgICAgICAtbW96LXRleHQtc2hhZG93OiMwMDAgMXB4IDAgMCwjMDAwIDAgMXB4IDAsIzAwMCAtMXB4IDAgMCwjMDAwIDAgLTFweCAwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXBpYyB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XC8qb3BlcmHmiorlm77niYforr7nva5kaXNwbGF5OmJsb2Nr5Lya5Ye6546w5riy5p+T6Zeu6aKY77yM5Lya5pyJ5q6L5b2x77yM6L+Y5Lya5byV5Y+R5YW25LuW5ZCE56eN6Zeu6aKY77yM5ZCT5bC/Ki9cCiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOm5vbmU7XAogICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDpub25lO1wKICAgICAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOm5vbmU7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1waWNfZm9jdXMge1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNnB4IGJsYWNrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLWNvbW1hbmR7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6Y29udGVudC1ib3g7XAogICAgICAgICAgICAgICAgICAgIC1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI0cHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNHB4O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDhweCA2cHggNnB4O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50IG5vLXJlcGVhdCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAycHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjODY4Njg2O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLW9yaWdpbjogY29udGVudC1ib3g7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdG9vbGJhciA+IHNwYW46bGFzdC1jaGlsZCB7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbDpob3ZlcixcCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItY29tbWFuZDpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDJweCBzb2xpZCByZWQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1zZWxlY3RlZHtcCiAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAyMXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwwLjMpICxpbnNldCAwIC0yMXB4IDAgcmdiYSgwLDAsMCwwLjMpO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdDoycHggc29saWQgIzE3NzFGRjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy10Yi1oYW5kIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLmhhbmQrJyIpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXJvdGF0ZSB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiJytwcmVmcy5pY29ucy5yb3RhdGUrJyIpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXpvb20ge1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIicrcHJlZnMuaWNvbnMuem9vbSsnIik7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItZmxpcC1ob3Jpem9udGFsIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLmZsaXBIb3Jpem9udGFsKyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy10Yi1mbGlwLXZlcnRpY2FsIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLmZsaXBWZXJ0aWNhbCsnIik7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1iYWRnZS1jb250YWluZXIge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtYmFkZ2Uge1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIHRvcDogLTNweDtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDFweDtcCiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDNweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0Y5MztcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTBweDtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjogYmxhY2s7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudXtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIHRvcDowO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDotMXB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiM1MzUzNTM7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDo0MHB4O1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjojQzNDM0MzO1wKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6MTJweDtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6MHB4IC0xcHggMHB4IGJsYWNrO1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAuNztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51OmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAuOTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWl0ZW17XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6YmxvY2s7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OjEuNTtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MTBweDtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjODY4Njg2O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtaXRlbTpsYXN0LWNoaWxke1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtaXRlbTpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OjJweCBzb2xpZCByZWQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1pdGVtOmFjdGl2ZXtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzoxMXB4IDlweCA5cHggMTFweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWNvbnRhaW5lcjpob3ZlciAucHYtcGljLXdpbmRvdy10Yi10b29se1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdDoycHggc29saWQgcmVkO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtY29udGFpbmVyOmhvdmVyIC5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnV7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6YmxvY2s7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1jb250YWluZXI6OmFmdGVye1wKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiIiO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6MXB4O1wKICAgICAgICAgICAgICAgICAgICBib3R0b206MnB4O1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDowO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjNweCBzb2xpZCAjQzNDM0MzO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wLWNvbG9yOnRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdC1jb2xvcjp0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTowLjU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctb3ZlcmxheWVye1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246Zml4ZWQ7XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6OTk5OTk5OTk5O1wKICAgICAgICAgICAgICAgICAgICB0b3A6MDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDowO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXJvdGF0ZS1pbmRpY2F0b3J7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246Zml4ZWQ7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjI1MHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MjUwcHg7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MTBweDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDotMTM1cHg7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0Oi0xMzVweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDp0cmFuc3BhcmVudCB1cmwoIicrIHByZWZzLmljb25zLnJvdGF0ZUluZGljYXRvckJHICsnIikgbm8tcmVwZWF0IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1yb3RhdGUtaW5kaWNhdG9yLXBvaW50ZXJ7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6YmxvY2s7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OmF1dG87XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDphdXRvO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50IHVybCgiJysgcHJlZnMuaWNvbnMucm90YXRlSW5kaWNhdG9yUG9pbnRlciArJyIpIG5vLXJlcGVhdCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjYwcHg7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoyNDBweDtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XAogICAgICAgICAgICAgICAgICAgIHRvcDo1cHg7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTpyb3RhdGUoMC4xZGVnKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1yb3RhdGUtb3ZlcmxheWVyey8q5b2T5YiH5o2i5Yiw5peL6L2s5bel5YW355qE5pe25YCZ5pi+56S66L+Z5Liq6KaG55uW5bGC77yM54S25ZCO5peL6L2s5oyH56S65Zmo5pi+56S65Zyo6L+Z5Liq6KaG55uW5bGC55qE5LiL6Z2iKi9cCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIHRvcDowO1wKICAgICAgICAgICAgICAgICAgICBib3R0b206MDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDowO1wKICAgICAgICAgICAgICAgICAgICByaWdodDowO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctcmFuZ2V7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwcHg7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDBweDtcCiAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMHB4IDBweCA1cHggcmdiYSgwLCAwLCAwLCAwLjgpO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDI1NSwgMCwgMCwgMC4xNTApO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGZpcnN0T3BlbjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpOwogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvdz10aGlzLmltZ1dpbmRvdzsKICAgICAgICAgICAgICAgIHZhciBzY3JvbGxlZD1nZXRTY3JvbGxlZCgpOwogICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLmxlZnQ9LTUgKyBzY3JvbGxlZC54ICsgJ3B4JzsKICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5zdHlsZS50b3A9LTUgKyBzY3JvbGxlZC55ICsgJ3B4JzsKCiAgICAgICAgICAgICAgICBpZihwcmVmcy5pbWdXaW5kb3cuZml0VG9TY3JlZW4pewogICAgICAgICAgICAgICAgICAgIHRoaXMuZml0VG9TY3JlZW4oKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbnRlcih0cnVlLHRydWUpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgLy93aW5kb3fnmoTlsLrlr7gKICAgICAgICAgICAgICAgICAgICB2YXIgd1NpemU9Z2V0V2luZG93U2l6ZSgpOwogICAgICAgICAgICAgICAgICAgIC8v56m66ZqZCiAgICAgICAgICAgICAgICAgICAgd1NpemUuaCAtPSAxNjsKICAgICAgICAgICAgICAgICAgICB3U2l6ZS53IC09IDE2OwoKICAgICAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93Q1M9dW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUoaW1nV2luZG93KTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3RTaXplPXsKICAgICAgICAgICAgICAgICAgICAgICAgaDpwYXJzZUZsb2F0KGltZ1dpbmRvd0NTLmhlaWdodCksCiAgICAgICAgICAgICAgICAgICAgICAgIHc6cGFyc2VGbG9hdChpbWdXaW5kb3dDUy53aWR0aCksCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZW50ZXIocmVjdFNpemUudyA8PSB3U2l6ZS53ICwgcmVjdFNpemUuaCA8PSB3U2l6ZS5oKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy5rZWVwU2NyZWVuSW5zaWRlKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGtlZXBTY3JlZW5JbnNpZGU6ZnVuY3Rpb24oKXsvL+S/neaMgeaMiemSruWcqOWxj+W5lemHjOmdoi4KICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3c9dGhpcy5pbWdXaW5kb3c7CiAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93RnVsbFNpemU9ewogICAgICAgICAgICAgICAgICAgIGg6aW1nV2luZG93Lm9mZnNldEhlaWdodCwKICAgICAgICAgICAgICAgICAgICB3OmltZ1dpbmRvdy5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHdpbmRvd1NpemU9Z2V0V2luZG93U2l6ZSgpOwoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGtlZXBTSShvYmosb2Zmc2V0RGlyZWN0aW9uLGRlZmF1bHRWYWx1ZSwgb3V0KXsKICAgICAgICAgICAgICAgICAgICB2YXIgb2JqUmVjdD1vYmouZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG9ialN0eWxlPW9iai5zdHlsZTsKCiAgICAgICAgICAgICAgICAgICAgd2hpbGUob2Zmc2V0RGlyZWN0aW9uLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvRD1vZmZzZXREaXJlY3Rpb25bMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvRFY9ZGVmYXVsdFZhbHVlWzBdOwogICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXREaXJlY3Rpb24uc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvVmFsdWU9cGFyc2VGbG9hdChvYmpTdHlsZVtvRF0pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChvRCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0b3AnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZT1vVmFsdWUgLSBvYmpSZWN0LnRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvYmpSZWN0LnRvcDwwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU9TWF0aC5taW4obmV3VmFsdWUsaW1nV2luZG93RnVsbFNpemUuaCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlPU1hdGgubWF4KG5ld1ZhbHVlLG9EVik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0Jzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU9b1ZhbHVlICsgKG9ialJlY3QucmlnaHQgLSB3aW5kb3dTaXplLncpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9ialJlY3QucmlnaHQgPiB3aW5kb3dTaXplLncpey8v5bGP5bmV5aSWCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlPU1hdGgubWluKG5ld1ZhbHVlLGltZ1dpbmRvd0Z1bGxTaXplLncpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZT1NYXRoLm1heChuZXdWYWx1ZSxvRFYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZT1vVmFsdWUgKyAob2JqUmVjdC5ib3R0b20gLSB3aW5kb3dTaXplLmgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9ialJlY3QuYm90dG9tID4gd2luZG93U2l6ZS5oKXsvL+Wxj+W5leWklgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZT1NYXRoLm1pbihuZXdWYWx1ZSxpbWdXaW5kb3dGdWxsU2l6ZS5oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU9TWF0aC5tYXgobmV3VmFsdWUsb0RWKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlPW9WYWx1ZSAtIG9ialJlY3QubGVmdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvYmpSZWN0LmxlZnQ8MCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlPU1hdGgubWluKG5ld1ZhbHVlLGltZ1dpbmRvd0Z1bGxTaXplLncpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZT1NYXRoLm1heChuZXdWYWx1ZSxvRFYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhuZXdWYWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9ialN0eWxlW29EXT1uZXdWYWx1ZSArICdweCc7CgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGtlZXBTSSh0aGlzLmNsb3NlQnV0dG9uLFsndG9wJywncmlnaHQnXSxbLTI0LDBdKTsKICAgICAgICAgICAgICAgIGtlZXBTSSh0aGlzLnNlYXJjaEJ1dHRvbixbJ3RvcCcsJ3JpZ2h0J10sWy0yNCw1MF0pOwogICAgICAgICAgICAgICAga2VlcFNJKHRoaXMudG9vbGJhcixbJ3RvcCcsJ2xlZnQnXSxbMCwtNDVdKTsKCiAgICAgICAgICAgICAgICAvLyDkv53mjIHms6jph4rlnKjlm77niYfph4zpnaIKICAgICAgICAgICAgICAgIC8vIGtlZXBTSSh0aGlzLmRlc2NyaXB0aW9uU3BhbixbJ2JvdHRvbScsICdsZWZ0J10sWy00MCwgMTBdKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZml0VG9TY3JlZW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciB3U2l6ZT1nZXRXaW5kb3dTaXplKCk7CiAgICAgICAgICAgICAgICAvL+epuumamQogICAgICAgICAgICAgICAgd1NpemUuaCAtPSAxNjsKICAgICAgICAgICAgICAgIHdTaXplLncgLT0gMTY7CgogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvdz10aGlzLmltZ1dpbmRvdzsKICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3dDUz11bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpbWdXaW5kb3cpOwogICAgICAgICAgICAgICAgdmFyIHJlY3RTaXplPXsKICAgICAgICAgICAgICAgICAgICBoOnBhcnNlRmxvYXQoaW1nV2luZG93Q1MuaGVpZ2h0KSwKICAgICAgICAgICAgICAgICAgICB3OnBhcnNlRmxvYXQoaW1nV2luZG93Q1Mud2lkdGgpLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgc2l6ZTsKICAgICAgICAgICAgICAgIGlmKHJlY3RTaXplLncgLSB3U2l6ZS53PjAgfHwgcmVjdFNpemUuaCAtIHdTaXplLmg+MCl7Ly/otoXlh7rlsY/luZXvvIzpgqPkuYjnvKnlsI/jgIIKICAgICAgICAgICAgICAgICAgICBpZihyZWN0U2l6ZS53L3JlY3RTaXplLmggPiB3U2l6ZS53L3dTaXplLmgpewogICAgICAgICAgICAgICAgICAgICAgICBzaXplPXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6d1NpemUudywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6d1NpemUudyAvIChyZWN0U2l6ZS53L3JlY3RTaXplLmgpLAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBzaXplPXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6d1NpemUuaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6d1NpemUuaCAqIChyZWN0U2l6ZS53L3JlY3RTaXplLmgpLAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKHRoaXMuZ2V0Um90YXRlZEltZ0NsaVNpemUoc2l6ZSkudy90aGlzLmltZ05hdHVyYWxTaXplLncpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2VudGVyOmZ1bmN0aW9uKGhvcml6b250YWwsdmVydGljYWwpewogICAgICAgICAgICAgICAgaWYoIWhvcml6b250YWwgJiYgIXZlcnRpY2FsKXJldHVybjsKICAgICAgICAgICAgICAgIHZhciB3U2l6ZT1nZXRXaW5kb3dTaXplKCk7CiAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93PXRoaXMuaW1nV2luZG93OwogICAgICAgICAgICAgICAgdmFyIHNjcm9sbGVkPWdldFNjcm9sbGVkKCk7CiAgICAgICAgICAgICAgICBpZihob3Jpem9udGFsKWltZ1dpbmRvdy5zdHlsZS5sZWZ0PSAod1NpemUudyAtIGltZ1dpbmRvdy5vZmZzZXRXaWR0aCkvMiArIHNjcm9sbGVkLnggKydweCc7CiAgICAgICAgICAgICAgICBpZih2ZXJ0aWNhbClpbWdXaW5kb3cuc3R5bGUudG9wPSAod1NpemUuaCAtIGltZ1dpbmRvdy5vZmZzZXRIZWlnaHQpLzIgKyBzY3JvbGxlZC55ICsncHgnOwogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIG1vdmU6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICB0aGlzLndvcmtpbmc9dHJ1ZTsKICAgICAgICAgICAgICAgIHZhciBjdXJzb3I9dGhpcy5jdXJzb3I7CiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvcignaGFuZGluZycpOwoKICAgICAgICAgICAgICAgIHZhciBtb3VzZUNvb3I9ewogICAgICAgICAgICAgICAgICAgIHg6ZS5wYWdlWCwKICAgICAgICAgICAgICAgICAgICB5OmUucGFnZVksCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvdz10aGlzLmltZ1dpbmRvdzsKICAgICAgICAgICAgICAgIHZhciBpbWdXU3R5bGU9aW1nV2luZG93LnN0eWxlOwogICAgICAgICAgICAgICAgdmFyIG9yaU9mZnNldD17CiAgICAgICAgICAgICAgICAgICAgbGVmdDpwYXJzZUZsb2F0KGltZ1dTdHlsZS5sZWZ0KSwKICAgICAgICAgICAgICAgICAgICB0b3A6cGFyc2VGbG9hdChpbWdXU3R5bGUudG9wKSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgdmFyIG1vdmVIYW5kbGVyPWZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGltZ1dTdHlsZS5sZWZ0PW9yaU9mZnNldC5sZWZ0KyBlLnBhZ2VYLW1vdXNlQ29vci54ICsncHgnOwogICAgICAgICAgICAgICAgICAgIGltZ1dTdHlsZS50b3A9b3JpT2Zmc2V0LnRvcCArIGUucGFnZVktbW91c2VDb29yLnkgKydweCc7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5rZWVwU2NyZWVuSW5zaWRlKCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIG1vdXNldXBIYW5kbGVyPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlQ3Vyc29yKGN1cnNvcik7CiAgICAgICAgICAgICAgICAgICAgc2VsZi53b3JraW5nPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmKHNlbGYudGVtcEhhbmQgJiYgc2VsZi5zcGFjZUtleVVwKXsvL+WmguaenOaYr+S4tOaXtuWIh+aNouWIsOaKk+aJi+W3peWFt++8jOW5s+enu+WujOaIkOWQjui/lOWbnuS4iuS4quW3peWFtwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRlbXBIYW5kPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZUN1cnNvcihzZWxmLnNlbGVjdGVkVG9vbCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLG1vdmVIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLG1vdXNldXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZXVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcm90YXRlOmZ1bmN0aW9uKG9yaWdpbix0b3BMZWZ0KXsKCiAgICAgICAgICAgICAgICB2YXIgaW1nPXRoaXMuaW1nOwogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvdz10aGlzLmltZ1dpbmRvdzsKCiAgICAgICAgICAgICAgICB2YXIgaVRyYW5zZm9ybT1pbWcuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dLnJlcGxhY2UoL3JvdGF0ZVwoW14pXSpcKS9pLCcnKTsKCiAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93Q1M9dW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUoaW1nV2luZG93KTsKICAgICAgICAgICAgICAgIHZhciBpbWdSZWN0U2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDpwYXJzZUZsb2F0KGltZ1dpbmRvd0NTLmhlaWdodCksCiAgICAgICAgICAgICAgICAgICAgdzpwYXJzZUZsb2F0KGltZ1dpbmRvd0NTLndpZHRoKSwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHJlY3RPZmZzZXQ9ewogICAgICAgICAgICAgICAgICAgIHRvcDpwYXJzZUZsb2F0KGltZ1dpbmRvdy5zdHlsZS50b3ApLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6cGFyc2VGbG9hdChpbWdXaW5kb3cuc3R5bGUubGVmdCksCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBpbWdTaXplPXsKICAgICAgICAgICAgICAgICAgICBoOmltZy5jbGllbnRIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgdzppbWcuY2xpZW50V2lkdGgsCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBpbWdPZmZzZXQ9ewogICAgICAgICAgICAgICAgICAgIHRvcDpwYXJzZUZsb2F0KGltZy5zdHlsZS50b3ApLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6cGFyc2VGbG9hdChpbWcuc3R5bGUubGVmdCksCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICB2YXIgUEk9TWF0aC5QSTsKCiAgICAgICAgICAgICAgICB2YXIgcm90YXRlPWZ1bmN0aW9uIChyYWRpYW5zKXsKICAgICAgICAgICAgICAgICAgICBpZihzZWxmLnJvdGF0ZWRSYWRpYW5zPT1yYWRpYW5zKXJldHVybjsKICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dID0gJyByb3RhdGUoJysgcmFkaWFucyArJ3JhZCkgJyArIGlUcmFuc2Zvcm07Ly/ml4vovazlm77niYcKICAgICAgICAgICAgICAgICAgICBzZWxmLnJvdGF0ZUlQb2ludGVyLnN0eWxlW3N1cHBvcnQuY3NzVHJhbnNmb3JtXT0ncm90YXRlKCcrIHJhZGlhbnMgKydyYWQpJzsvL+aXi+i9rOaMh+ekuuWZqAoKICAgICAgICAgICAgICAgICAgICBzZWxmLnJvdGF0ZWRSYWRpYW5zPXJhZGlhbnM7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRUb29sQmFkZ2UoJ3JvdGF0ZScscmFkaWFucy8oUEkvMTgwKSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBhZnRlcmltZ1JlY3RTaXplPXNlbGYuZ2V0Um90YXRlZEltZ1JlY3RTaXplKCByYWRpYW5zLCBpbWdTaXplICk7CiAgICAgICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLndpZHRoPWFmdGVyaW1nUmVjdFNpemUudyArJ3B4JzsKICAgICAgICAgICAgICAgICAgICBpbWdXaW5kb3cuc3R5bGUuaGVpZ2h0PWFmdGVyaW1nUmVjdFNpemUuaCArICdweCc7CgogICAgICAgICAgICAgICAgICAgIGlmKCF0b3BMZWZ0KXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRJbWdXaW5kb3dPZmZzZXQocmVjdE9mZnNldCxpbWdSZWN0U2l6ZSxhZnRlcmltZ1JlY3RTaXplKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBzZWxmLnNldEltZ09mZnNldChpbWdPZmZzZXQsaW1nUmVjdFNpemUsYWZ0ZXJpbWdSZWN0U2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5rZWVwU2NyZWVuSW5zaWRlKCk7CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICBpZih0eXBlb2Ygb3JpZ2luPT0nbnVtYmVyJyl7CiAgICAgICAgICAgICAgICAgICAgcm90YXRlKG9yaWdpbik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgdGhpcy53b3JraW5nPXRydWU7CgogICAgICAgICAgICAgICAgdmFyIGxhc3RSb3RhdGVkUmFkaWFucz10aGlzLnJvdGF0ZWRSYWRpYW5zOwogICAgICAgICAgICAgICAgdGhpcy5zaGlmdEtleVVwPXRydWU7CiAgICAgICAgICAgICAgICB2YXIgc2hpZnRSb3RhdGVTdGVwPXByZWZzLmltZ1dpbmRvdy5zaGlmdFJvdGF0ZVN0ZXAgLyAoMTgwL01hdGguUEkpOy8v6L2s5oiQ5byn5bqmCgogICAgICAgICAgICAgICAgdmFyIG1vdmVIYW5kbGVyPWZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHNlbGYucm90YXRlSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICB2YXIgcmFkaWFucz1sYXN0Um90YXRlZFJhZGlhbnMgKyBNYXRoLmF0YW4yKCBlLmNsaWVudFkgLSBvcmlnaW4ueSwgZS5jbGllbnRYIC0gb3JpZ2luLnggKTsKICAgICAgICAgICAgICAgICAgICBpZihyYWRpYW5zPj0yKlBJKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmFkaWFucy09MipQSTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihyYWRpYW5zPDApewogICAgICAgICAgICAgICAgICAgICAgICByYWRpYW5zKz0yKlBJOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGlmKCFzZWxmLnNoaWZ0S2V5VXApey8v5aaC5p6c5oyJ5LiL5LqGc2hpZnTplK7vvIzpgqPkuYjmraXov5vnvKnmlL4KICAgICAgICAgICAgICAgICAgICAgICAgcmFkaWFucyAtPSByYWRpYW5zICUgc2hpZnRSb3RhdGVTdGVwOwogICAgICAgICAgICAgICAgICAgICAgICByYWRpYW5zICs9IHNoaWZ0Um90YXRlU3RlcDsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJvdGF0ZShyYWRpYW5zKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIG1vdXNldXBIYW5kbGVyPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgc2VsZi53b3JraW5nPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIHNlbGYucm90YXRlSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsbW91c2V1cEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZXVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29udmVydFRvVmFsaWRSYWRpYW5zOmZ1bmN0aW9uKHJhZGlhbnMpewogICAgICAgICAgICAgICAgLy/ovazmiJAwLTkw55qE562J5Lu36KeS5bqm44CCCiAgICAgICAgICAgICAgICB2YXIgUEk9TWF0aC5QSTsKICAgICAgICAgICAgICAgIGlmKHJhZGlhbnMgPiBQSSl7CiAgICAgICAgICAgICAgICAgICAgcmFkaWFucyA9IDIqUEkgLSByYWRpYW5zOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmKHJhZGlhbnMgPiAxLzIqUEkpewogICAgICAgICAgICAgICAgICAgIHJhZGlhbnMgPSBQSSAtIHJhZGlhbnM7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIHJhZGlhbnM7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFJvdGF0ZWRJbWdSZWN0U2l6ZTpmdW5jdGlvbiggcmFkaWFucywgaW1nU2l6ZSApey8v6YCa6L+H5peL6L2s5ZCO55qE6KeS5bqm5ZKM5Zu+54mH55qE5aSn5bCP77yM5rGC6Jma5ouf55+p5b2i55qE5aSn5bCPCiAgICAgICAgICAgICAgICBpbWdTaXplPSBpbWdTaXplID8gaW1nU2l6ZSA6ewogICAgICAgICAgICAgICAgICAgIGg6dGhpcy5pbWcuY2xpZW50SGVpZ2h0LAogICAgICAgICAgICAgICAgICAgIHc6dGhpcy5pbWcuY2xlbnRXaWR0aCwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYodHlwZW9mIHJhZGlhbnM9PT0ndW5kZWZpbmVkJyl7CiAgICAgICAgICAgICAgICAgICAgcmFkaWFucyA9IHRoaXMucm90YXRlZFJhZGlhbnM7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHJhZGlhbnM9dGhpcy5jb252ZXJ0VG9WYWxpZFJhZGlhbnMocmFkaWFucyk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBoOnRoaXMubm90RXhwb25lbnRpYWwoaW1nU2l6ZS5oKiBNYXRoLmNvcyhyYWRpYW5zKSArIGltZ1NpemUudyAqIE1hdGguc2luKHJhZGlhbnMpKSwKICAgICAgICAgICAgICAgICAgICB3OnRoaXMubm90RXhwb25lbnRpYWwoaW1nU2l6ZS5oKiBNYXRoLnNpbihyYWRpYW5zKSArIGltZ1NpemUudyAqIE1hdGguY29zKHJhZGlhbnMpKSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFJvdGF0ZWRJbWdDbGlTaXplOmZ1bmN0aW9uKHJlY3RTaXplLHJhZGlhbnMpey8v6YCa6L+H6Jma5ouf55+p5b2i55qE5aSn5bCP5ZKM5Zu+54mH55qE5peL6L2s6KeS5bqm77yM5rGC5Zu+54mH55qE5aSn5bCPCgogICAgICAgICAgICAgICAgaWYodHlwZW9mIHJhZGlhbnM9PT0ndW5kZWZpbmVkJyl7CiAgICAgICAgICAgICAgICAgICAgcmFkaWFucyA9IHRoaXMucm90YXRlZFJhZGlhbnM7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHJhZGlhbnM9dGhpcy5jb252ZXJ0VG9WYWxpZFJhZGlhbnMocmFkaWFucyk7CgogICAgICAgICAgICAgICAgaWYocmFkaWFucz09MCl7CiAgICAgICAgICAgICAgICAgICAgLy9yYWRpYW5zPU1hdGguUEkvMTgwICogMS8xMDA7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY3RTaXplOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgaD0ocmVjdFNpemUuaC1yZWN0U2l6ZS53ICogTWF0aC50YW4ocmFkaWFucykpLyhNYXRoLmNvcyhyYWRpYW5zKS1NYXRoLnNpbihyYWRpYW5zKSpNYXRoLnRhbihyYWRpYW5zKSk7CiAgICAgICAgICAgICAgICB2YXIgdz0ocmVjdFNpemUuaCAtIGgqTWF0aC5jb3MocmFkaWFucykpL01hdGguc2luKHJhZGlhbnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBoOmgsCiAgICAgICAgICAgICAgICAgICAgdzp3LAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldEltZ09mZnNldDpmdW5jdGlvbihvcmlPZmZzZXQsYkltZ1NpemUsYUltZ1NpemUpewogICAgICAgICAgICAgICAgdmFyIGltZ1N0eWxlPXRoaXMuaW1nLnN0eWxlOwoKICAgICAgICAgICAgICAgIC8v6YG/5YWN5Ye6546w5oyH5pWw5b2i5byP55qE5pWw5a2X5ZKM5Y2V5L2N55u45Yqg77yM5a+86Ie05Y+Y5oiQ5peg5pWI5YC8CiAgICAgICAgICAgICAgICB2YXIgdG9wPXRoaXMubm90RXhwb25lbnRpYWwob3JpT2Zmc2V0LnRvcCArIChhSW1nU2l6ZS5oLWJJbWdTaXplLmgpKjEvMikgKyAncHgnOwogICAgICAgICAgICAgICAgdmFyIGxlZnQ9dGhpcy5ub3RFeHBvbmVudGlhbChvcmlPZmZzZXQubGVmdCArIChhSW1nU2l6ZS53LWJJbWdTaXplLncpKjEvMikgICsgJ3B4JzsKICAgICAgICAgICAgICAgIGltZ1N0eWxlLnRvcD0gdG9wOwogICAgICAgICAgICAgICAgaW1nU3R5bGUubGVmdD0gbGVmdDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0SW1nV2luZG93T2Zmc2V0OmZ1bmN0aW9uKG9yaU9mZnNldCxiSW1nV2luZG93U2l6ZSxhSW1nV2lkbm93U2l6ZSxyYXRpbyl7CiAgICAgICAgICAgICAgICByYXRpbz0gcmF0aW8/IHJhdGlvIDoge3g6MS8yLHk6MS8yfTsKICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3dTdHlsZT10aGlzLmltZ1dpbmRvdy5zdHlsZTsKICAgICAgICAgICAgICAgIHZhciB0b3A9b3JpT2Zmc2V0LnRvcCAtIChhSW1nV2lkbm93U2l6ZS5oLWJJbWdXaW5kb3dTaXplLmgpKnJhdGlvLnkgKyAncHgnOwogICAgICAgICAgICAgICAgdmFyIGxlZnQ9b3JpT2Zmc2V0LmxlZnQgLSAoYUltZ1dpZG5vd1NpemUudy1iSW1nV2luZG93U2l6ZS53KSpyYXRpby54ICsgJ3B4JzsKICAgICAgICAgICAgICAgIGltZ1dpbmRvd1N0eWxlLnRvcD0gdG9wOwogICAgICAgICAgICAgICAgaW1nV2luZG93U3R5bGUubGVmdD0gbGVmdDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgem9vbTpmdW5jdGlvbihlLHJhdGlvKXsvL2Xlj6/og73mmK91bmRlZmluZWQs5Y+v6IO95piv5LqL5Lu25a+56LGh77yM5Y+v6IO95piv55u05o6l55qE57yp5pS+57qn5Yir5pWw5a2XCiAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93PXRoaXMuaW1nV2luZG93OwogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvd0NTPXVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGltZ1dpbmRvdyk7CiAgICAgICAgICAgICAgICB2YXIgaW1nUmVjdFNpemU9ewogICAgICAgICAgICAgICAgICAgIGg6cGFyc2VGbG9hdChpbWdXaW5kb3dDUy5oZWlnaHQpLAogICAgICAgICAgICAgICAgICAgIHc6cGFyc2VGbG9hdChpbWdXaW5kb3dDUy53aWR0aCksCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciByZWN0T2Zmc2V0PXsKICAgICAgICAgICAgICAgICAgICB0b3A6cGFyc2VGbG9hdChpbWdXaW5kb3cuc3R5bGUudG9wKSwKICAgICAgICAgICAgICAgICAgICBsZWZ0OnBhcnNlRmxvYXQoaW1nV2luZG93LnN0eWxlLmxlZnQpLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgaW1nPXRoaXMuaW1nOwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKCiAgICAgICAgICAgICAgICB2YXIgem9vbT1mdW5jdGlvbihsZXZlbCl7Ly/nvKnmlL7liLDmjIflrprnuqfliKsKICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgbGV2ZWw9PSd1bmRlZmluZWQnIHx8IGxldmVsPDAgfHwgbGV2ZWw9PXNlbGYuem9vbUxldmVsKXJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGFmdGVySW1nU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgICAgIGg6c2VsZi5pbWdOYXR1cmFsU2l6ZS5oICogbGV2ZWwsCiAgICAgICAgICAgICAgICAgICAgICAgIHc6c2VsZi5pbWdOYXR1cmFsU2l6ZS53ICogbGV2ZWwsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpbWcud2lkdGg9YWZ0ZXJJbWdTaXplLnc7CiAgICAgICAgICAgICAgICAgICAgaW1nLmhlaWdodD1hZnRlckltZ1NpemUuaDsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGFmdGVyaW1nUmVjdFNpemU9c2VsZi5nZXRSb3RhdGVkSW1nUmVjdFNpemUoIHNlbGYucm90YXRlZFJhZGlhbnMsIGFmdGVySW1nU2l6ZSApOwogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYWZ0ZXJpbWdSZWN0U2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLndpZHRoPWFmdGVyaW1nUmVjdFNpemUudyArJ3B4JzsKICAgICAgICAgICAgICAgICAgICBpbWdXaW5kb3cuc3R5bGUuaGVpZ2h0PWFmdGVyaW1nUmVjdFNpemUuaCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRJbWdXaW5kb3dPZmZzZXQocmVjdE9mZnNldCxpbWdSZWN0U2l6ZSxhZnRlcmltZ1JlY3RTaXplLHJhdGlvKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLnNldEltZ09mZnNldCh7dG9wOjAsbGVmdDowfSxhZnRlckltZ1NpemUsYWZ0ZXJpbWdSZWN0U2l6ZSk7Ly/lpoLmnpzml4vovazkuobvvIzosIPmlbTlgY/np7sKICAgICAgICAgICAgICAgICAgICBzZWxmLnpvb21MZXZlbD1sZXZlbDsKICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFRvb2xCYWRnZSgnem9vbScsbGV2ZWwpOwogICAgICAgICAgICAgICAgICAgIHNlbGYua2VlcFNjcmVlbkluc2lkZSgpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZih0eXBlb2YgZSE9J29iamVjdCcpewogICAgICAgICAgICAgICAgICAgIHJhdGlvPXJhdGlvPyByYXRpbyA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgeDoxLzIsCiAgICAgICAgICAgICAgICAgICAgICAgIHk6MS8yLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgem9vbShlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMud29ya2luZz10cnVlOwoKICAgICAgICAgICAgICAgIHJhdGlvPXRoaXMuZ2V0Wm9vbVJhdGlvKHsKICAgICAgICAgICAgICAgICAgICB4OmUuY2xpZW50WCwKICAgICAgICAgICAgICAgICAgICB5OmUuY2xpZW50WSwKICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICB2YXIgbW92ZWQ7CiAgICAgICAgICAgICAgICB2YXIgbGFzdFBhZ2VYPWUucGFnZVg7CiAgICAgICAgICAgICAgICB2YXIgY3VycmVudExldmVsPXRoaXMuem9vbUxldmVsOwogICAgICAgICAgICAgICAgdmFyIG1vdmVGaXJlZD0wOwogICAgICAgICAgICAgICAgdmFyIG1vdmVIYW5kbGVyPWZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIG1vdmVGaXJlZCsrCiAgICAgICAgICAgICAgICAgICAgaWYobW92ZUZpcmVkIDwgMil7Ly/mnInml7blgJnngrnlh7vnmoTml7blgJnkuI3lsI/lv4PkvJrop6blj5HkuIDlj5Ftb3ZlCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIG1vdmVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2VYPWUucGFnZVg7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxldmVsOwogICAgICAgICAgICAgICAgICAgIGlmKHBhZ2VYID4gbGFzdFBhZ2VYKXsvL+WQkeWPs+enu++8jHpvb21pbuaJqeWkpwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZUN1cnNvcignem9vbScsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXZlbD0wLjA1OwogICAgICAgICAgICAgICAgICAgIH1lbHNley8v5ZCR5bem56e777yMem9vbW91dOe8qeWwjwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZUN1cnNvcignem9vbScsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPS0wLjA1OwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgbGFzdFBhZ2VYPXBhZ2VYOwogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMZXZlbCArPSBsZXZlbDsKICAgICAgICAgICAgICAgICAgICB6b29tKGN1cnJlbnRMZXZlbCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBtb3VzZXVwSGFuZGxlcj1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBzZWxmLndvcmtpbmc9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxtb3ZlSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZXVwSGFuZGxlcix0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGxldmVsPXNlbGYuZ2V0TmV4dFpvb21MZXZlbCgpOwoKICAgICAgICAgICAgICAgICAgICBpZihzZWxmLnpvb21PdXQgJiYgc2VsZi5hbHRLZXlVcCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuem9vbU91dD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBpZighbW92ZWQpey8v5aaC5p6c5rKh5pyJ5bmz56e757yp5pS+44CCCiAgICAgICAgICAgICAgICAgICAgICAgIHpvb20obGV2ZWwpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlQ3Vyc29yKCd6b29tJyxzZWxmLnpvb21PdXQpOwoKICAgICAgICAgICAgICAgICAgICBpZihzZWxmLnRlbXBab29tICYmIHNlbGYuY3RybEtleVVwICYmIHNlbGYuYWx0S2V5VXApewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRlbXBab29tPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZUN1cnNvcihzZWxmLnNlbGVjdGVkVG9vbCk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZXVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0TmV4dFpvb21MZXZlbDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIGxldmVsOwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGlmKHRoaXMuem9vbU91dCl7Ly/nvKnlsI8KICAgICAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLnpvb21SYW5nZVIuX2ZpbmQoZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSA8IHNlbGYuem9vbUxldmVsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPXZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgSW1nV2luZG93Qy56b29tUmFuZ2UuX2ZpbmQoZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSA+IHNlbGYuem9vbUxldmVsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPXZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbGV2ZWw7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFpvb21SYXRpbzpmdW5jdGlvbihtb3VzZUNvb3IpewogICAgICAgICAgICAgICAgdmFyIGliY1JlY3Q9dGhpcy5pbWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICB2YXIgcmF0aW89ewogICAgICAgICAgICAgICAgICAgIHg6KG1vdXNlQ29vci54LWliY1JlY3QubGVmdCkvaWJjUmVjdC53aWR0aCwKICAgICAgICAgICAgICAgICAgICB5Oihtb3VzZUNvb3IueS1pYmNSZWN0LnRvcCkvaWJjUmVjdC5oZWlnaHQsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYocmF0aW8ueDwwKXsKICAgICAgICAgICAgICAgICAgICByYXRpby54PTAKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJhdGlvLng+MSl7CiAgICAgICAgICAgICAgICAgICAgcmF0aW8ueD0xCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYocmF0aW8ueTwwKXsKICAgICAgICAgICAgICAgICAgICByYXRpby55PTAKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJhdGlvLnk+MSl7CiAgICAgICAgICAgICAgICAgICAgcmF0aW8ueT0xCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIHJhdGlvOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhZXJpYWxWaWV3OmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgdGhpcy53b3JraW5nPXRydWU7CiAgICAgICAgICAgICAgICAvL+iusOS9j+eOsOWcqOeahOe8qeaUvuavlOS+iwogICAgICAgICAgICAgICAgdmFyIGNMZXZlbD10aGlzLnpvb21MZXZlbDsKCiAgICAgICAgICAgICAgICB2YXIgd1NpemU9Z2V0V2luZG93U2l6ZSgpOwogICAgICAgICAgICAgICAgd1NpemUuaCAtPSAxNjsKICAgICAgICAgICAgICAgIHdTaXplLncgLT0gMTY7CgogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvdz10aGlzLmltZ1dpbmRvdzsKICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3dDUz11bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpbWdXaW5kb3cpOwogICAgICAgICAgICAgICAgdmFyIHJlY3RTaXplPXsKICAgICAgICAgICAgICAgICAgICBoOnBhcnNlRmxvYXQoaW1nV2luZG93Q1MuaGVpZ2h0KSwKICAgICAgICAgICAgICAgICAgICB3OnBhcnNlRmxvYXQoaW1nV2luZG93Q1Mud2lkdGgpLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciByZWN0UmF0aW89cmVjdFNpemUuaC9yZWN0U2l6ZS53OwogICAgICAgICAgICAgICAgdmFyIHdpbmRvd1JhdGlvPXdTaXplLmgvd1NpemUudzsKCiAgICAgICAgICAgICAgICB2YXIgc2l6ZTsKICAgICAgICAgICAgICAgIHZhciByYW5nZVNpemU9e307CiAgICAgICAgICAgICAgICBpZihyZWN0UmF0aW8gPiB3aW5kb3dSYXRpbyl7CiAgICAgICAgICAgICAgICAgICAgc2l6ZT17CiAgICAgICAgICAgICAgICAgICAgICAgIGg6d1NpemUuaCwKICAgICAgICAgICAgICAgICAgICAgICAgdzp3U2l6ZS5oIC8gcmVjdFJhdGlvLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmFuZ2VTaXplLmg9TWF0aC5taW4od1NpemUuaCAqICAoc2l6ZS5oIC8gcmVjdFNpemUuaCksIHNpemUuaCk7CiAgICAgICAgICAgICAgICAgICAgcmFuZ2VTaXplLnc9TWF0aC5taW4ocmFuZ2VTaXplLmggLyB3aW5kb3dSYXRpbyAsIHNpemUudyk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBzaXplPXsKICAgICAgICAgICAgICAgICAgICAgICAgdzp3U2l6ZS53LAogICAgICAgICAgICAgICAgICAgICAgICBoOndTaXplLncgKiByZWN0UmF0aW8sCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByYW5nZVNpemUudz1NYXRoLm1pbih3U2l6ZS53ICogIChzaXplLncgLyByZWN0U2l6ZS53KSwgc2l6ZS53KTsKICAgICAgICAgICAgICAgICAgICByYW5nZVNpemUuaD1NYXRoLm1pbihyYW5nZVNpemUudyAqIHdpbmRvd1JhdGlvICwgc2l6ZS5oKTsKICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIHRoaXMuem9vbSh0aGlzLmdldFJvdGF0ZWRJbWdDbGlTaXplKHNpemUpLncvdGhpcy5pbWdOYXR1cmFsU2l6ZS53KTsKCiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlcih0cnVlLHRydWUpOwoKICAgICAgICAgICAgICAgIHRoaXMua2VlcFNjcmVlbkluc2lkZSgpOwoKICAgICAgICAgICAgICAgIHZhciB2aWV3UmFuZ2U9dGhpcy52aWV3UmFuZ2U7CiAgICAgICAgICAgICAgICB2YXIgdlJTPXZpZXdSYW5nZS5zdHlsZTsKICAgICAgICAgICAgICAgIHZSUy5kaXNwbGF5PSdibG9jayc7CiAgICAgICAgICAgICAgICB2UlMuaGVpZ2h0PXJhbmdlU2l6ZS5oICsgJ3B4JzsKICAgICAgICAgICAgICAgIHZSUy53aWR0aD1yYW5nZVNpemUudyArICdweCc7CiAgICAgICAgICAgICAgICB2UlMudG9wPTAgKyAncHgnOwogICAgICAgICAgICAgICAgdlJTLmxlZnQ9MCArICdweCc7CgoKCiAgICAgICAgICAgICAgICB2YXIgdmlld1JhbmdlUmVjdD12aWV3UmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsZWQ9Z2V0U2Nyb2xsZWQoKTsKICAgICAgICAgICAgICAgIHZhciB2aWV3UmFuZ2VDZW50ZXJDb29yPXsKICAgICAgICAgICAgICAgICAgICB4OnZpZXdSYW5nZVJlY3QubGVmdCArIHNjcm9sbGVkLnggKyAxLzIgKiByYW5nZVNpemUudywKICAgICAgICAgICAgICAgICAgICB5OnZpZXdSYW5nZVJlY3QudG9wICsgc2Nyb2xsZWQueSArIDEvMiAqIHJhbmdlU2l6ZS5oLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwoKICAgICAgICAgICAgICAgIHZhciBtb3ZlUmFuZ2U9ewogICAgICAgICAgICAgICAgICAgIHg6WzgsOCtzaXplLnctcmFuZ2VTaXplLnddLAogICAgICAgICAgICAgICAgICAgIHk6WzgsOCtzaXplLmgtcmFuZ2VTaXplLmhdCiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRWaWV3UmFuZ2VQb3NpdGlvbihwYWdlWFkpewogICAgICAgICAgICAgICAgICAgIHZhciB0b3A9cGFnZVhZLnkgLSB2aWV3UmFuZ2VDZW50ZXJDb29yLnk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQ9cGFnZVhZLnggLSB2aWV3UmFuZ2VDZW50ZXJDb29yLng7CiAgICAgICAgICAgICAgICAgICAgaWYodG9wPD1tb3ZlUmFuZ2UueVswXSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvcD1tb3ZlUmFuZ2UueVswXTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZih0b3A+PW1vdmVSYW5nZS55WzFdKXsKICAgICAgICAgICAgICAgICAgICAgICAgdG9wPW1vdmVSYW5nZS55WzFdOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdlJTLnRvcD0gdG9wICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICBpZihsZWZ0PD1tb3ZlUmFuZ2UueFswXSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ9bW92ZVJhbmdlLnhbMF07CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYobGVmdD49bW92ZVJhbmdlLnhbMV0pewogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0PW1vdmVSYW5nZS54WzFdOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdlJTLmxlZnQ9IGxlZnQgKyAncHgnOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBzZXRWaWV3UmFuZ2VQb3NpdGlvbih7CiAgICAgICAgICAgICAgICAgICAgeDplLnBhZ2VYLAogICAgICAgICAgICAgICAgICAgIHk6ZS5wYWdlWSwKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHZhciBtb3ZlSGFuZGxlcj1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBzZXRWaWV3UmFuZ2VQb3NpdGlvbih7CiAgICAgICAgICAgICAgICAgICAgICAgIHg6ZS5wYWdlWCwKICAgICAgICAgICAgICAgICAgICAgICAgeTplLnBhZ2VZLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgbW91c2V1cEhhbmRsZXI9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBzZWxmLndvcmtpbmc9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdmlld1JhbmdlLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgIHNlbGYuem9vbShjTGV2ZWwpOwogICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxlZD1nZXRTY3JvbGxlZCgpOwogICAgICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5zdHlsZS50b3A9IC0xMyAtICByZWN0U2l6ZS5oICogKChwYXJzZUZsb2F0KHZSUy50b3ApIC0gbW92ZVJhbmdlLnlbMF0pL3NpemUuaCkgKyBzY3JvbGxlZC55ICsncHgnOwogICAgICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5zdHlsZS5sZWZ0PSAtMTMgLSByZWN0U2l6ZS53ICogKChwYXJzZUZsb2F0KHZSUy5sZWZ0KSAtIG1vdmVSYW5nZS54WzBdKS9zaXplLncpICsgc2Nyb2xsZWQueCArJ3B4JzsKCiAgICAgICAgICAgICAgICAgICAgLy/or7TmmI7lm77niYfnmoTpq5jluqbmsqHmnInlsY/luZXpq5jvvIzlsYXkuK0KICAgICAgICAgICAgICAgICAgICAvL+ivtOaYjuWbvueJh+eahOWuveW6puayoeacieWxj+W5leWuve+8jOWxheS4rQogICAgICAgICAgICAgICAgICAgIHNlbGYuY2VudGVyKHJhbmdlU2l6ZS53ID09IHNpemUudyAsIHJhbmdlU2l6ZS5oID09IHNpemUuaCk7CgogICAgICAgICAgICAgICAgICAgIHNlbGYua2VlcFNjcmVlbkluc2lkZSgpOwoKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLG1vdmVIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLG1vdXNldXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZXVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0VG9vbEJhZGdlOmZ1bmN0aW9uKHRvb2wsY29udGVudCl7CiAgICAgICAgICAgICAgICB2YXIgc2NhbGU9MDsKICAgICAgICAgICAgICAgIHN3aXRjaCh0b29sKXsKICAgICAgICAgICAgICAgICAgICBjYXNlICd6b29tJzp7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlPTI7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6ewogICAgICAgICAgICAgICAgICAgICAgICBzY2FsZT0xOwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OmJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29udGVudD10eXBlb2YgY29udGVudD09J3N0cmluZyc/IGNvbnRlbnQgOiBjb250ZW50LnRvRml4ZWQoc2NhbGUpOwogICAgICAgICAgICAgICAgdGhpcy50b29sTWFwW3Rvb2xdLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudD1jb250ZW50OwogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RFeHBvbmVudGlhbDpmdW5jdGlvbihudW0pey8v5LiN6KaB6L2s5Li65oyH5pWw5b2i5Yq/CiAgICAgICAgICAgICAgICBpZihudW0+MCl7CiAgICAgICAgICAgICAgICAgICAgaWYobnVtID49IDk5OTk5OTk5OTk5OTk5OTkzNDQ2Myl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAgOTk5OTk5OTk5OTk5OTk5OTM0NDYzOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKG51bSA8PSAwLjAwMDAwMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwLjAwMDAwMTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfWVsc2UgaWYobnVtIDwgMCl7CiAgICAgICAgICAgICAgICAgICAgaWYobnVtID49IC0wLjAwMDAwMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMC4wMDAwMDE7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYobnVtIDw9IC05OTk5OTk5OTk5OTk5OTk5MzQ0NjMpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTk5OTk5OTk5OTk5OTk5OTkzNDQ2MwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHJldHVybiBudW07CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBibHVyOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgaWYoIXRoaXMuZm9jdXNlZClyZXR1cm47CiAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93ID10aGlzLmltZ1dpbmRvdzsKICAgICAgICAgICAgICAgIC8v54K55Ye7aW1nV2lub2R355qE5aSW6YOo55qE5pe25YCZ5aSx5Y6754Sm54K5CiAgICAgICAgICAgICAgICBpZihlIT09dHJ1ZSAmJiBpbWdXaW5kb3cuY29udGFpbnMoZS50YXJnZXQpKXJldHVybjsKICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKCdwdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1cycpOwogICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3B2LXBpYy13aW5kb3ctdG9vbGJhcl9mb2N1cycpOwogICAgICAgICAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdwdi1waWMtd2luZG93LWNsb3NlX2ZvY3VzJyk7CiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdwdi1waWMtd2luZG93LXNlYXJjaF9mb2N1cycpOwogICAgICAgICAgICAgICAgdGhpcy5pbWcuY2xhc3NMaXN0LnJlbW92ZSgncHYtcGljLXdpbmRvdy1waWNfZm9jdXMnKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsdGhpcy5fYmx1cix0cnVlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRoaXMuX2ZvY3VzZWRLZXlkb3duLHRydWUpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLHRoaXMuX2ZvY3VzZWRLZXl1cCx0cnVlKTsKICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQ3Vyc29yKCdkZWZhdWx0Jyk7CiAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLnNlbGVjdGVkVG9vbD10aGlzLnNlbGVjdGVkVG9vbDsKICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZD1mYWxzZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9jdXM6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGlmKHRoaXMuZm9jdXNlZClyZXR1cm47CiAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5jbGFzc0xpc3QuYWRkKCdwdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1cycpOwogICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmNsYXNzTGlzdC5hZGQoJ3B2LXBpYy13aW5kb3ctdG9vbGJhcl9mb2N1cycpOwogICAgICAgICAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwdi1waWMtd2luZG93LWNsb3NlX2ZvY3VzJyk7CiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwdi1waWMtd2luZG93LXNlYXJjaF9mb2N1cycpOwogICAgICAgICAgICAgICAgdGhpcy5pbWcuY2xhc3NMaXN0LmFkZCgncHYtcGljLXdpbmRvdy1waWNfZm9jdXMnKTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nV2luZG93LnN0eWxlLnpJbmRleD0gSW1nV2luZG93Qy5zdHlsZVpJbmRleDsKICAgICAgICAgICAgICAgIHRoaXMuekluZGV4PUltZ1dpbmRvd0Muc3R5bGVaSW5kZXg7CiAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLnN0eWxlWkluZGV4ICsrOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsdGhpcy5fZm9jdXNlZEtleWRvd24sdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsdGhpcy5fZm9jdXNlZEtleXVwLHRydWUpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyx0aGlzLl9ibHVyLHRydWUpOwoKICAgICAgICAgICAgICAgIC8v6L+Y5Y6f6byg5qCH5qC35byP44CCCiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvcih0aGlzLnNlbGVjdGVkVG9vbCk7CgogICAgICAgICAgICAgICAgaWYocHJlZnMuaW1nV2luZG93LnN5bmNTZWxlY3RlZFRvb2wgJiYgSW1nV2luZG93Qy5zZWxlY3RlZFRvb2wpewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9vbChJbWdXaW5kb3dDLnNlbGVjdGVkVG9vbCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZD10cnVlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmb2N1c2VkS2V5dXA6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICB2YXIga2V5Q29kZT1lLmtleUNvZGU7CiAgICAgICAgICAgICAgICB2YXIgdmFsaWQ9WzMyLDE4LDE2LDcyLDE3LDcyLDgyLDkwLDY3XTsKICAgICAgICAgICAgICAgIGlmKHZhbGlkLmluZGV4T2Yoa2V5Q29kZSk9PS0xKXJldHVybjsKCiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgc3dpdGNoKGtleUNvZGUpewogICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6ey8v56m65qC86ZSu77yM5Li05pe25YiH5o2i5Yiw56e75YqoCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BhY2VLZXlVcD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZighdGhpcy50ZW1wSGFuZClyZXR1cm47Ly/lpoLmnpzkuYvliY3msqHmnInkuLTml7bliIfmjaLliLDmipPmiYvlt6XlhbfvvIjlvZPlt7Lnu4/lnKjlt6XkvZznmoTml7blgJnvvIzmjInkuIvnqbrmoLzkuI3kvJrkuLTml7bliIfmjaLliLDmipPmiYvlt6XlhbfvvIkKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMud29ya2luZyl7Ly/mnb7lvIDmjInplK7nmoTml7blgJnvvIzmsqHmnInlnKjnu6fnu63lubPnp7vkuobjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEhhbmQ9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvcih0aGlzLnNlbGVjdGVkVG9vbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6ey8vYWx06ZSu55uY5YiH5o2i57yp5bCP5pS+5aSn44CCCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWx0S2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuem9vbU91dClyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLndvcmtpbmcpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tT3V0PWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VDdXJzb3IoJ3pvb20nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudGVtcFpvb20gJiYgdGhpcy5jdHJsS2V5VXApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcFpvb209ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VDdXJzb3IodGhpcy5zZWxlY3RlZFRvb2wpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjp7Ly9zaGlmdOmUru+8jOaXi+i9rOeahOaXtuWAmeaMieS9j3NoaWZ06ZSu77yM5q2l6L+b57yp5pS+44CCCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRLZXlVcD10cnVlOwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OnsvL2N0cmzplK4KICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY3RybGtleURvd25UaW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmp1c3RDS2V5VXApey8v5aaC5p6c5Yia5omN5rKh5pyJ5p2+5byAY++8jOinhOmBv+WIkuivjei9r+S7tueahGN0cmwrY+advuW8gAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHJsS2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLnRlbXBab29tKXJldHVybjsvL+WmguaenOayoeacieWIh+aNouWIsOS6hue8qeaUvgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMud29ya2luZyAmJiB0aGlzLmFsdEtleVVwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBab29tPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQ3Vyc29yKHRoaXMuc2VsZWN0ZWRUb29sKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNjc6ey8vY+mUrgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmp1c3RDS2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuanVzdENLZXlVcFRpbWVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qdXN0Q0tleVVwVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5qdXN0Q0tleVVwPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9LDEwMCkKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA3Mjp7Ly9o6ZSuCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaEtleVVwPXRydWU7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgODI6ey8vcumUrgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJLZXlVcD10cnVlOwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDkwOnsvL3rplK4KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56S2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpicmVhazsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYoWzcyLDgyLDkwXS5pbmRleE9mKGtleUNvZGUpIT0tMSl7CiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMud29ya2luZyAmJiB0aGlzLnJlc3RvcmVCZWZvcmVUb29sKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlQmVmb3JlVG9vbD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUb29sKHRoaXMuYmVmb3JlVG9vbCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvY3VzZWRLZXlkb3duOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgdmFyIGtleUNvZGU9ZS5rZXlDb2RlOwogICAgICAgICAgICAgICAgdmFyIHZhbGlkPVszMiw4Miw3Miw5MCwxOCwxNiwxNywyNyw2N107Ly/mnInmlYjnmoTmjInplK4KICAgICAgICAgICAgICAgIGlmKHZhbGlkLmluZGV4T2Yoa2V5Q29kZSk9PS0xKSByZXR1cm47CgogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICAgIGlmKHRoaXMud29ya2luZyl7Ly93b3JraW5n55qE5pe25YCZ5Lmf5Y+v5Lul5o6l5Y+X5oyJ5LiLc2hpZnTplK7vvIzku6Xkvr/ml4vovaznmoTml7blgJnlj6/ku6Xku7vkvZXml7blgJnmjInkuIsKICAgICAgICAgICAgICAgICAgICBpZihrZXlDb2RlPT0xNil7Ly9zaGlmdOmUrgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0S2V5VXA9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHN3aXRjaChrZXlDb2RlKXsKICAgICAgICAgICAgICAgICAgICBjYXNlIDgyOnsvL3LplK4s5YiH5o2i5Yiw5peL6L2s5bel5YW3CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucktleVVwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucktleVVwPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWZvcmVUb29sPXRoaXMuc2VsZWN0ZWRUb29sOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUb29sKCdyb3RhdGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA3Mjp7Ly9o6ZSuLOWIh+aNouWIsOaKk+aJi+W3peWFtwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmhLZXlVcCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhLZXlVcD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlVG9vbD10aGlzLnNlbGVjdGVkVG9vbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9vbCgnaGFuZCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDkwOnsvL3rplK4s5YiH5o2i5Yiw57yp5pS+5bel5YW3CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuektleVVwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuektleVVwPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWZvcmVUb29sPXRoaXMuc2VsZWN0ZWRUb29sOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUb29sKCd6b29tJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6ey8v56m65qC86ZSu6Zi75q2iLOS4tOaXtuWIh+aNouWIsOaKk+aJi+WKn+iDvQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnNwYWNlS2V5VXApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGFjZUtleVVwPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zZWxlY3RlZFRvb2whPSdoYW5kJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wSGFuZD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQ3Vyc29yKCdoYW5kJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OnsvL2FsdOmUrizlnKjlvZPliY3pgInmi6nmmK/nvKnmlL7lt6XlhbfnmoTml7blgJnvvIzmjInkuIvnmoTml7blgJnliIfmjaLliLDnvKnlsI/lip/og70KICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5hbHRLZXlVcCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigodGhpcy5zZWxlY3RlZFRvb2whPSd6b29tJyAmJiAhdGhpcy50ZW1wWm9vbSkgfHwgdGhpcy56b29tT3V0KXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbU91dD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHRLZXlVcD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQ3Vyc29yKCd6b29tJyx0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzp7Ly9jdHJs6ZSu5Li05pe25YiH5o2i5Yiw57yp5pS+5bel5YW3CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY3RybEtleVVwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0cmxrZXlEb3duVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpey8v6KeE6YG/6K+N5YW46L2v5Lu255qEY3RybCtj77yM5LiA556s6Ze05YiH5o2i5Yiw57yp5pS+55qE6Zeu6aKYCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jdHJsS2V5VXA9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5zZWxlY3RlZFRvb2whPSd6b29tJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGVtcFpvb209dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VDdXJzb3IoJ3pvb20nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwxMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDY3OnsvL2PplK4KICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY3RybGtleURvd25UaW1lcik7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6ey8vZXNl5YWz6Zet56qX5Y+jCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmltZ1dpbmRvdy5jbG9zZS5lc2NLZXkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpicmVhazsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICB0b29sYmFyRXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICB2YXIgdG9vbE1hcD10aGlzLnRvb2xNYXA7CiAgICAgICAgICAgICAgICBmb3IodmFyIGkgaW4gdG9vbE1hcCl7CiAgICAgICAgICAgICAgICAgICAgaWYodG9vbE1hcC5oYXNPd25Qcm9wZXJ0eShpKSAmJiB0b29sTWFwW2ldPT10YXJnZXQpewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goZS50eXBlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ21vdXNlZG93bic6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9vbChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RibGNsaWNrJzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYmxjbGlja0NvbW1hbmQoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OmJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW1nV2luZG93RXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIHN3aXRjaChlLnR5cGUpewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NsaWNrJzp7Ly/pmLvmraJvcGVyYeeahOWbvueJh+S/neWtmAogICAgICAgICAgICAgICAgICAgICAgICBpZihlLmN0cmxLZXkgJiYgZS50YXJnZXQubm9kZU5hbWU9PSdJTUcnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW91c2Vkb3duJzp7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmZvY3VzZWQpey8v5aaC5p6c5rKh5pyJZm9jdXPvvIzlhYhmb2N1cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rZWVwU2NyZWVuSW5zaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICBpZihlLmJ1dHRvbj09Mil7Ly/nlLHkuo5yb3RhdGXml7blgJnnmoTopobnm5blsYLpl67popjvvIzkv67lpI3lj7PplK7nmoTlm77niYfoj5zljZXlvLnlh7oKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldCE9dGhpcy5yb3RhdGVPdmVybGF5ZXIpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRlT3ZlcmxheWVyLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwSGFuZGxlcj1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLHVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucm90YXRlT3ZlcmxheWVyLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyx1cEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBpZihlLmJ1dHRvbiE9MCB8fCAodGFyZ2V0IT10aGlzLmltZ1dpbmRvdyAmJiB0YXJnZXQhPXRoaXMuaW1nICYmIHRhcmdldCE9dGhpcy5yb3RhdGVPdmVybGF5ZXIpKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRUb29sPXRoaXMuc2VsZWN0ZWRUb29sOwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnRlbXBIYW5kKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYodGhpcy50ZW1wWm9vbSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb20oZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHNlbGVjdGVkVG9vbD09J2hhbmQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZUJlZm9yZVRvb2w9IXRoaXMuaEtleVVwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5oS2V5VXApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNley8v6bif556w6KeG5Zu+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZXJpYWxWaWV3KGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoc2VsZWN0ZWRUb29sPT0ncm90YXRlJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luPXsvL+aXi+i9rOWOn+eCuQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6ZS5jbGllbnRYIC0gMzAsLy/nqI3lvq7lgY/lt6bkuIDngrnjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OmUuY2xpZW50WSAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBySVM9dGhpcy5yb3RhdGVJbmRpY2F0b3Iuc3R5bGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JJUy5kaXNwbGF5PSdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBySVMudG9wPW9yaWdpbi55ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJJUy5sZWZ0PW9yaWdpbi54ICsgJ3B4JzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVCZWZvcmVUb29sPSF0aGlzLnJLZXlVcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRlKG9yaWdpbik7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHNlbGVjdGVkVG9vbD09J3pvb20nKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZUJlZm9yZVRvb2w9IXRoaXMuektleVVwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICd3aGVlbCc6ewogICAgICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5mb2N1c2VkKXJldHVybjsvL+WmguaenOayoeaciWZvY3VzCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUuZGVsdGFZPT09MClyZXR1cm47Ly/pnZ5Z6L2055qE5rua5YqoCiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy53b3JraW5nKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaVpvb21PdXQ9dGhpcy56b29tT3V0OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21PdXQgPSAhIShlLmRlbHRhWSA+IDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGlvPXRoaXMuZ2V0Wm9vbVJhdGlvKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6ZS5jbGllbnRYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeTplLmNsaWVudFksCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxldmVsPXRoaXMuZ2V0TmV4dFpvb21MZXZlbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKGxldmVsLHJhdGlvKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tT3V0PW9yaVpvb21PdXQ7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6YnJlYWs7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZGJsY2xpY2tDb21tYW5kOmZ1bmN0aW9uKHRvb2wpewogICAgICAgICAgICAgICAgdmFyIGRvbmU7CiAgICAgICAgICAgICAgICBzd2l0Y2godG9vbCl7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGFuZCc6ey8v5Y+M5Ye75bGF5LitLOW5tuS4lOmAguW6lOWxj+W5lQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb20oMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZml0VG9TY3JlZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZW50ZXIodHJ1ZSx0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rZWVwU2NyZWVuSW5zaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6ey8v5Y+M5Ye76L+Y5Y6f5peL6L2sCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucm90YXRlZFJhZGlhbnM9PTApcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBkb25lPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRlKDAsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvb20nOnsvL+WPjOWHu+i/mOWOn+e8qeaUvgogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnpvb21MZXZlbD09MSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKDEse3g6MCx5OjB9KTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpicmVhazsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYoKHRvb2w9PSdyb3RhdGUnIHx8IHRvb2w9PSd6b29tJykgJiYgZG9uZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbGVkPWdldFNjcm9sbGVkKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvdz10aGlzLmltZ1dpbmRvdzsKICAgICAgICAgICAgICAgICAgICB2YXIgaW1nV2lub2Rvd1JlY3Q9aW1nV2luZG93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3dTdHlsZT1pbWdXaW5kb3cuc3R5bGU7CiAgICAgICAgICAgICAgICAgICAgaWYoaW1nV2lub2Rvd1JlY3QubGVmdDw0MCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1dpbmRvd1N0eWxlLmxlZnQ9NDAgKyBzY3JvbGxlZC54ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGlmKGltZ1dpbm9kb3dSZWN0LnRvcDwtNSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1dpbmRvd1N0eWxlLnRvcD0tNSArIHNjcm9sbGVkLnkgKydweCc7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmtlZXBTY3JlZW5JbnNpZGUoKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICB9LAogICAgICAgICAgICBkb0ZsaXBDb21tYW5kOmZ1bmN0aW9uKGNvbW1hbmQpewogICAgICAgICAgICAgICAgdmFyIG1hcD17CiAgICAgICAgICAgICAgICAgICAgZnY6Wy9zY2FsZVlcKFteKV0qXCkvaSwnIHNjYWxlWSgtMSkgJ10sCiAgICAgICAgICAgICAgICAgICAgZmg6Wy9zY2FsZVhcKFteKV0qXCkvaSwnIHNjYWxlWCgtMSkgJ10sCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBpVHJhbnNmb3JtPXRoaXMuaW1nLnN0eWxlW3N1cHBvcnQuY3NzVHJhbnNmb3JtXTsKCiAgICAgICAgICAgICAgICB2YXIgdG9vbENsYXNzTGlzdD10aGlzLnRvb2xNYXBbY29tbWFuZF0uY2xhc3NMaXN0OwoKICAgICAgICAgICAgICAgIGlmKG1hcFtjb21tYW5kXVswXS50ZXN0KGlUcmFuc2Zvcm0pKXsKICAgICAgICAgICAgICAgICAgICBpVHJhbnNmb3JtPWlUcmFuc2Zvcm0ucmVwbGFjZShtYXBbY29tbWFuZF1bMF0sJycpOwogICAgICAgICAgICAgICAgICAgIHRvb2xDbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2VsZWN0ZWRUb29sQ2xhc3MpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgaVRyYW5zZm9ybSArPSBtYXBbY29tbWFuZF1bMV07CiAgICAgICAgICAgICAgICAgICAgdG9vbENsYXNzTGlzdC5hZGQodGhpcy5zZWxlY3RlZFRvb2xDbGFzcyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5pbWcuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dPWlUcmFuc2Zvcm07CgogICAgICAgICAgICB9LAogICAgICAgICAgICBzZWxlY3RUb29sOmZ1bmN0aW9uKHRvb2wpewogICAgICAgICAgICAgICAgdmFyIGNvbW1hbmQ9WydmdicsJ2ZoJ107CiAgICAgICAgICAgICAgICBpZihjb21tYW5kLmluZGV4T2YodG9vbCk9PS0xKXsvL+W3peWFt+mAieaLqQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc2VsZWN0ZWRUb29sPT10b29sKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodG9vbD09InJvdGF0ZSIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFBJPU1hdGguUEk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU9dGhpcy5yb3RhdGVkUmFkaWFucyArIDkwICogUEkvMTgwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWU+PTIqUEkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLT0yKlBJOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGUodmFsdWUsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRUb29sPXRoaXMuc2VsZWN0ZWRUb29sOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUb29sPXRvb2w7CiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy50ZW1wSGFuZCB8fCB0aGlzLnRlbXBab29tKXsvL+S4tOaXtuW3peWFt+S4reOAguS4jeWPmOm8oOaghwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVPdmVybGF5ZXIuc3R5bGUuZGlzcGxheT0odG9vbD09J3JvdGF0ZSc/ICdibG9jaycgOiAnbm9uZScpOy8v6L+Z5Liq6KaG55uW5bGC5piv5Li65LqG5o2V5o2J5Y+M5Ye75oiW6ICF5Y2V5Ye75LqL5Lu244CCCgogICAgICAgICAgICAgICAgICAgIGlmKHNlbGVjdGVkVG9vbCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbE1hcFtzZWxlY3RlZFRvb2xdLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZWxlY3RlZFRvb2xDbGFzcyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xNYXBbdG9vbF0uY2xhc3NMaXN0LmFkZCh0aGlzLnNlbGVjdGVkVG9vbENsYXNzKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvcih0b29sKTsKICAgICAgICAgICAgICAgIH1lbHNley8v5ZG95LukCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb0ZsaXBDb21tYW5kKHRvb2wpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2hhbmdlQ3Vyc29yOmZ1bmN0aW9uKHRvb2wsem9vbU91dCl7CiAgICAgICAgICAgICAgICBpZih0b29sPT0nem9vbScpewogICAgICAgICAgICAgICAgICAgIHRvb2wrPXpvb21PdXQ/ICctb3V0JyA6ICctaW4nOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmKHRoaXMuY3Vyc29yPT10b29sKXJldHVybjsKICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yPXRvb2w7CgogICAgICAgICAgICAgICAgdmFyIGN1cnNvcjsKCiAgICAgICAgICAgICAgICBzd2l0Y2godG9vbCl7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGFuZCc6ewogICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I9c3VwcG9ydC5jc3NDdXJzb3JWYWx1ZS5ncmFiIHx8ICdwb2ludGVyJzsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGFuZGluZyc6ewogICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I9c3VwcG9ydC5jc3NDdXJzb3JWYWx1ZS5ncmFiYmluZyB8fCAncG9pbnRlcic7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvb20taW4nOnsKICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yPXN1cHBvcnQuY3NzQ3Vyc29yVmFsdWUuem9vbUluOwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICd6b29tLW91dCc6ewogICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I9c3VwcG9ydC5jc3NDdXJzb3JWYWx1ZS56b29tT3V0OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdyb3RhdGUnOnsKICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yPSdwcm9ncmVzcyc7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlZmF1bHQnOnsKICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yPScnOwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYodHlwZW9mIGN1cnNvciE9J3VuZGVmaW5lZCcpewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nV2luZG93LnN0eWxlLmN1cnNvcj1jdXJzb3I7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHJlbW92ZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYodGhpcy5yZW1vdmVkKXJldHVybjsKICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlZD10cnVlOwogICAgICAgICAgICAgICAgdGhpcy5ibHVyKHRydWUpOwogICAgICAgICAgICAgICAgdGhpcy5pbWcuc3JjPSBwcmVmcy5pY29ucy5icm9rZW5JbWdfc21hbGw7Ly/lpoLmnpzlnKjliqDovb3kuK3lj5bmtojvvIzlm77niYfkuZ/lj5bmtojor7vlj5bjgIIKCiAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuaW1nV2luZG93KTsKCiAgICAgICAgICAgICAgICAvL+eCueWHu+eCueWHu+WklumDqOWFs+mXreeahOebkeWQrAogICAgICAgICAgICAgICAgaWYocHJlZnMuaW1nV2luZG93LmNsb3NlLmNsaWNrT3V0c2lkZS5lbmFibGVkKXsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHByZWZzLmltZ1dpbmRvdy5jbG9zZS5jbGlja091dHNpZGUudHJpZ2dlcix0aGlzLmNsaWNrT3V0c2lkZSx0cnVlKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIGluZGV4PUltZ1dpbmRvd0MuYWxsLmluZGV4T2YodGhpcyk7CiAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLmFsbC5zcGxpY2UoaW5kZXgsMSk7CgogICAgICAgICAgICAgICAgLy9mb2N1cyBuZXh0CiAgICAgICAgICAgICAgICBpZihJbWdXaW5kb3dDLmFsbC5sZW5ndGg9PTApewogICAgICAgICAgICAgICAgICAgIGlmKEltZ1dpbmRvd0Mub3ZlcmxheWVyKXsKICAgICAgICAgICAgICAgICAgICAgICAgSW1nV2luZG93Qy5vdmVybGF5ZXIuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHZhciB0b3Btb3N0PTA7CiAgICAgICAgICAgICAgICAgICAgSW1nV2luZG93Qy5hbGwuZm9yRWFjaChmdW5jdGlvbihpd2luKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXdpbi56SW5kZXggPiB0b3Btb3N0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcG1vc3Q9aXdpbjsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZih0b3Btb3N0KXsKICAgICAgICAgICAgICAgICAgICAgICAgdG9wbW9zdC5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgfSwKCiAgICAgICAgfTsKCiAgICAgICAgLy8g6L295YWl5Yqo55S7CiAgICAgICAgZnVuY3Rpb24gTG9hZGluZ0FuaW1DKGRhdGEsYnV0dG9uVHlwZSx3YWl0SW1nTG9hZCxvcGVuSW5Ub3BXaW5kb3cpewogICAgICAgICAgICB0aGlzLmFyZ3M9YXJyYXlGbi5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTsKICAgICAgICAgICAgdGhpcy5kYXRhPWRhdGE7Ly9kYXRhCiAgICAgICAgICAgIHRoaXMuYnV0dG9uVHlwZT1idXR0b25UeXBlOy8v54K55Ye755qE5oyJ6ZKu57G75Z6LCiAgICAgICAgICAgIHRoaXMub3BlbkluVG9wV2luZG93PW9wZW5JblRvcFdpbmRvdzsvL+aYr+WQpuWcqOmhtuWxgueql+WPo+aJk+W8gO+8jOWmguaenOWcqGZyYW1l6YeM6Z2i55qE6K+dCiAgICAgICAgICAgIHRoaXMud2FpdEltZ0xvYWQ9d2FpdEltZ0xvYWQ7Ly/mmK/lkKbnrYnlvoXlrozlhajor7vlj5blkI7miZPlvIAKICAgICAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgfTsKCiAgICAgICAgTG9hZGluZ0FuaW1DLmFsbD1bXTsKCiAgICAgICAgTG9hZGluZ0FuaW1DLnByb3RvdHlwZT17CiAgICAgICAgICAgIGluaXQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIExvYWRpbmdBbmltQy5hbGwucHVzaCh0aGlzKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkU3R5bGUoKTsKICAgICAgICAgICAgICAgIHZhciBjb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwoKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWU9J3B2LWxvYWRpbmctY29udGFpbmVyJzsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ0FuaW09Y29udGFpbmVyOwoKICAgICAgICAgICAgICAgIGNvbnRhaW5lci50aXRsZT1pMThuKCJsb2FkaW5nIikrJzonICsgdGhpcy5kYXRhLnNyYzsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUw9CiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1sb2FkaW5nLWJ1dHRvbiBwdi1sb2FkaW5nLXJldHJ5IiB0aXRsZT0i6YeN6K+VIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWxvYWRpbmctYnV0dG9uIHB2LWxvYWRpbmctY2FuY2xlIiB0aXRsZT0i5Y+W5raIIj48L3NwYW4+JzsKCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CgogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdGNsPWUudGFyZ2V0LmNsYXNzTGlzdDsKICAgICAgICAgICAgICAgICAgICBpZih0Y2wuY29udGFpbnMoJ3B2LWxvYWRpbmctY2FuY2xlJykpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ1JlYWR5LmFib3J0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYodGNsLmNvbnRhaW5zKCdwdi1sb2FkaW5nLXJldHJ5JykpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBuZXcgTG9hZGluZ0FuaW1DKHNlbGYuYXJnc1swXSxzZWxmLmFyZ3NbMV0sc2VsZi5hcmdzWzJdLHNlbGYuYXJnc1szXSk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CgogICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NpdGlvbigpOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ1dHRvblR5cGUgPT0gJ2N1cnJlbnQnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1nKHRoaXMuZGF0YS5pbWdTcmMpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGF0YS54aHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5idXR0b25UeXBlID09ICdzZWFyY2gnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRTZWFyY2goKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmcm9tPTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VhcmNoRnVuPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW1nQnlJbWcoc2VsZi5kYXRhLmltZ1NyYywgbnVsbCwgZnVuY3Rpb24oc3JjcywgaW5kZXgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjPXNyY3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXg9PTMpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSW1nKHNyYywgc3Jjcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbT1pbmRleCsxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSW1nKHNyYywgc3Jjcywgc2VhcmNoRnVuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yKCLnvZHnu5zplJnor68iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcigi5rKh5pyJ5om+5Yiw5Y6f5Zu+Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnJvbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoRnVuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkSW1nKHRoaXMuZGF0YS5zcmN8fHRoaXMuZGF0YS5pbWdTcmMsIHRoaXMuZGF0YS5zcmNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHhockxvYWQubG9hZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMuZGF0YS5zcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHI6IHRoaXMuZGF0YS54aHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYjogZnVuY3Rpb24oaW1nU3JjLCBpbWdTcmNzLCBjYXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ1NyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRJbWcoaW1nU3JjLCBpbWdTcmNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZXJyb3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRTdHlsZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYoTG9hZGluZ0FuaW1DLnN0eWxlQWRkZWQpcmV0dXJuOwogICAgICAgICAgICAgICAgTG9hZGluZ0FuaW1DLnN0eWxlQWRkZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgIHZhciBzdHlsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICAgICAgc3R5bGUudHlwZT0ndGV4dC9jc3MnOwogICAgICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQ9J1wKICAgICAgICAgICAgICAgIC5wdi1sb2FkaW5nLWNvbnRhaW5lciB7XAogICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgIHotaW5kZXg6OTk5OTk5OTk3O1wKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGJsYWNrIHVybCgiJytwcmVmcy5pY29ucy5sb2FkaW5nKyciKSBjZW50ZXIgbm8tcmVwZWF0O1wKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtb3JpZ2luOiBjb250ZW50LWJveDtcCiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XAogICAgICAgICAgICAgICAgcGFkZGluZzogMXB4IDMwcHggMXB4IDJweDtcCiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XAogICAgICAgICAgICAgICAgb3BhY2l0eTogMC43O1wKICAgICAgICAgICAgICAgIGhlaWdodDogMjRweDtcCiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDI0cHg7XAogICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMnB4IDJweCAwcHggIzY2NjtcCiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC4xNXMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjE1cyBlYXNlLWluLW91dDtcCiAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgLnB2LWxvYWRpbmctY29udGFpbmVyOmhvdmVyIHtcCiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjk7XAogICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgIC5wdi1sb2FkaW5nLWJ1dHRvbiB7XAogICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1wKICAgICAgICAgICAgICAgIGhlaWdodDogMjRweDtcCiAgICAgICAgICAgICAgICB3aWR0aDogMjRweDtcCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgICAgICAgICAgcmlnaHQ6IDA7XAogICAgICAgICAgICAgICAgdG9wOiAwO1wKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNDtcCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50IGNlbnRlciBuby1yZXBlYXQ7XAogICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMTVzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4xNXMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgIC5wdi1sb2FkaW5nLWJ1dHRvbjpob3ZlciB7XAogICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcCiAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgLnB2LWxvYWRpbmctY2FuY2xle1wKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiJytwcmVmcy5pY29ucy5sb2FkaW5nQ2FuY2xlKyciKTtcCiAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgLnB2LWxvYWRpbmctcmV0cnl7XAogICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiJytwcmVmcy5pY29ucy5yZXRyeSsnIik7XAogICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgIC5wdi1sb2FkaW5nLWNvbnRhaW5lcl9lcnJvcntcCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOm5vbmU7XAogICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgIC5wdi1sb2FkaW5nLWNvbnRhaW5lcl9lcnJvcjo6YWZ0ZXJ7XAogICAgICAgICAgICAgICAgY29udGVudDoiJytpMThuKCJsb2FkRXJyb3IiKSsnIjtcCiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjRweDtcCiAgICAgICAgICAgICAgICBjb2xvcjogcmVkO1wKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcCiAgICAgICAgICAgICAgICBkaXNwbGF5OmlubGluZTtcCiAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgLnB2LWxvYWRpbmctY29udGFpbmVyX2Vycm9yIC5wdi1sb2FkaW5nLWNhbmNsZXtcCiAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgIC5wdi1sb2FkaW5nLWNvbnRhaW5lcl9lcnJvciAucHYtbG9hZGluZy1yZXRyeXtcCiAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrO1wKICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlbW92ZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYoIXRoaXMucmVtb3ZlZCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQW5pbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMubG9hZGluZ0FuaW0pOwogICAgICAgICAgICAgICAgICAgIExvYWRpbmdBbmltQy5hbGwuc3BsaWNlKExvYWRpbmdBbmltQy5hbGwuaW5kZXhPZih0aGlzKSwxKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVycm9yOmZ1bmN0aW9uKG1zZyxpbWcsZSl7CiAgICAgICAgICAgICAgICBpZihtc2cpY29uc29sZS5kZWJ1Zyhtc2cpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQW5pbS5jbGFzc0xpc3QuYWRkKCdwdi1sb2FkaW5nLWNvbnRhaW5lcl9lcnJvcicpOwogICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygncGljdmlld2VyIENFIOi9veWFpeWkp+WbvumUmeivr++8miVvJywgdGhpcy5kYXRhKTsKCiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB9LDMwMDApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXRQb3NpdGlvbjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uPWdldENvbnRlbnRDbGllbnRSZWN0KHRoaXMuZGF0YS5pbWcpOwogICAgICAgICAgICAgICAgdmFyIGNzPXRoaXMubG9hZGluZ0FuaW0uc3R5bGU7CiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsZWQ9Z2V0U2Nyb2xsZWQoKTsKICAgICAgICAgICAgICAgIGNzLnRvcD1wb3NpdGlvbi50b3AgKyBzY3JvbGxlZC55ICsxICsgJ3B4JzsKICAgICAgICAgICAgICAgIGNzLmxlZnQ9cG9zaXRpb24ubGVmdCArIHNjcm9sbGVkLnggKzEgKyAncHgnOwogICAgICAgICAgICAgICAgY3MucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIOagueaNriBpbWdTcmMg6L295YWl5Zu+54mH77yMaW1nU3JjcyDkuLrlpIfnlKjlm77niYflnLDlnYDvvIxpbWdTcmMg5Yqg6L295aSx6LSl5aSH55SoCiAgICAgICAgICAgIGxvYWRJbWc6IGZ1bmN0aW9uKGltZ1NyYywgaW1nU3JjcywgbmV4dEZ1bikgewogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgICAgIGltZy5zcmMgPSBpbWdTcmM7CgogICAgICAgICAgICAgICAgdmFyIG9wdHMgPSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW1nU3JjcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBpbWdTcmNzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSW1nKHNyYywgaW1nU3JjcywgbmV4dEZ1bik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZihuZXh0RnVuKSBuZXh0RnVuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugc2VsZi5lcnJvcignJywgdGhpcywgZSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgb3B0c1tzZWxmLndhaXRJbWdMb2FkID8gJ2xvYWQnIDogJ3JlYWR5J10gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkKHRoaXMsIGUpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBzZWxmLmltZ1JlYWR5ID0gaW1nUmVhZHkoaW1nLCBvcHRzKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGxvYWQ6ZnVuY3Rpb24oaW1nLGUpewogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nPWltZzsKICAgICAgICAgICAgICAgIHZhciBidXR0b25UeXBlPXRoaXMuYnV0dG9uVHlwZTsKCiAgICAgICAgICAgICAgICBpZihidXR0b25UeXBlPT0nZ2FsbGVyeScpewogICAgICAgICAgICAgICAgICAgIHZhciBhbGxEYXRhPXRoaXMuZ2V0QWxsVmFsaWRJbWdzKCk7CiAgICAgICAgICAgICAgICAgICAgYWxsRGF0YS50YXJnZXQ9dGhpcy5kYXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YT1hbGxEYXRhOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgZnVuY3Rpb24gb3BlbkluVG9wKCl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGE9c2VsZi5kYXRhOwoKICAgICAgICAgICAgICAgICAgICAvL+WIoOmZpOS4jeiDveWPkemAgeeahOmhueOAggogICAgICAgICAgICAgICAgICAgIHZhciBkZWxDYW50Q2xvbmU9ZnVuY3Rpb24ob2JqKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW9iailyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmouaW1nOwogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqLmltZ1BBOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YSkpewogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVNlbnRTdWNjZXNzRGF0YT1mcmFtZVNlbnREYXRhOwogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVNlbnREYXRhPWNsb25lT2JqZWN0KGRhdGEsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbENhbnRDbG9uZShkYXRhLnRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihvYmopewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQ2FudENsb25lKG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBkZWxDYW50Q2xvbmUoZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOmltZy5zcmMsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDonb3BlbicsCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblR5cGU6YnV0dG9uVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgdG86J3RvcCcsCiAgICAgICAgICAgICAgICAgICAgfSwnKicpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZih0aGlzLm9wZW5JblRvcFdpbmRvdyAmJiBpc0ZyYW1lICYmIHRvcFdpbmRvd1ZhbGlkIT09ZmFsc2UgJiYgYnV0dG9uVHlwZSE9J21hZ25pZmllcicpewogICAgICAgICAgICAgICAgICAgIGlmKHRvcFdpbmRvd1ZhbGlkKXsKICAgICAgICAgICAgICAgICAgICAgICAgb3BlbkluVG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7Ly/lhYjlj5Hmtojmga/pl67pl67pobblsYLnqpflj6PmmK/kuI3mmK/pnZ5mcmFtZXNldOeql+WPowogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6J3RvcFdpbmRvd1ZhbGlkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOid0b3AnLAogICAgICAgICAgICAgICAgICAgICAgICB9LCcqJyk7CgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwdi10b3BXaW5kb3dWYWxpZCcsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BXaW5kb3dWYWxpZD1lLmRldGFpbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvcFdpbmRvd1ZhbGlkKXsvL+WmguaenOmhtuWxgueql+WPo+acieaViAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5JblRvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vcGVuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9LHRydWUpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuKCk7CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldEFsbFZhbGlkSW1nczpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIGRvYz13aW5kb3cucGFyZW50PT13aW5kb3c/ZG9jdW1lbnQ6d2luZG93LnBhcmVudC5kb2N1bWVudDsKICAgICAgICAgICAgICAgIHZhciB2YWxpZEltZ3M9W10saW1nc0hhbmRsZT1mdW5jdGlvbihpbWdzKXsKICAgICAgICAgICAgICAgICAgICBhcnJheUZuLmZvckVhY2guY2FsbChpbWdzLGZ1bmN0aW9uKGltZyxpbmRleCxpbWdzKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdD1maW5kUGljKGltZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZEltZ3MucHVzaChyZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGltZ3NIYW5kbGUoZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKSk7CiAgICAgICAgICAgICAgICBhcnJheUZuLmZvckVhY2guY2FsbChkb2MucXVlcnlTZWxlY3RvckFsbCgiaWZyYW1lIiksZnVuY3Rpb24oaWZyYW1lKXsKICAgICAgICAgICAgICAgICAgICBpZihpZnJhbWUuc3JjLnJlcGxhY2UoL1wvW15cL10qJC8sIiIpLmluZGV4T2YobG9jYXRpb24uaG9zdG5hbWUpIT0tMSkKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nc0hhbmRsZShpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJykpOwogICAgICAgICAgICAgICAgICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZEltZ3M7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9wZW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHN3aXRjaCh0aGlzLmJ1dHRvblR5cGUpewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2dhbGxlcnknOnsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWdhbGxlcnkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeT1uZXcgR2FsbGVyeUMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeS5sb2FkKHRoaXMuZGF0YSx0aGlzLmZyb20pOwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdtYWduaWZpZXInOnsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE1hZ25pZmllckModGhpcy5pbWcsdGhpcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWN0dWFsJzo7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VhcmNoJzo7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VycmVudCc6OwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ29yaWdpbmFsJzp7Ly9vcmlnaW5hbCDmmK/kuLrkuoblhbzlrrnku6XliY3nmoTop4TliJkKICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEltZ1dpbmRvd0ModGhpcy5pbWcsIHRoaXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICB9OwoKICAgICAgICAvL+W3peWFt+agjwogICAgICAgIGZ1bmN0aW9uIEZsb2F0QmFyQygpewogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9OwoKICAgICAgICBGbG9hdEJhckMucHJvdG90eXBlPXsKICAgICAgICAgICAgaW5pdDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5hZGRTdHlsZSgpOwogICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuaWQ9J3B2LWZsb2F0LWJhci1jb250YWluZXInOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTD0KICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWZsb2F0LWJhci1idXR0b24iPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZmxvYXQtYmFyLWJ1dHRvbiI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1mbG9hdC1iYXItYnV0dG9uIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWZsb2F0LWJhci1idXR0b24iPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZmxvYXQtYmFyLWJ1dHRvbiI+PC9zcGFuPic7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CgogICAgICAgICAgICAgICAgdmFyIGJ1dHRvbnM9ewogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9ucz1idXR0b25zOwogICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbj1jb250YWluZXIuY2hpbGRyZW47CgogICAgICAgICAgICAgICAgYXJyYXlGbi5mb3JFYWNoLmNhbGwodGhpcy5jaGlsZHJlbixmdW5jdGlvbihjaGlsZCxpbmRleCl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlTWFwPXsKICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsOmkxOG4oImFjdHVhbEJ0biIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2g6aTE4bigic2VhcmNoQnRuIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbGxlcnk6aTE4bigiZ2FsbGVyeUJ0biIpLAogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50OmkxOG4oImN1cnJlbnRCdG4iKSwKICAgICAgICAgICAgICAgICAgICAgICAgbWFnbmlmaWVyOmkxOG4oIm1hZ25pZmllckJ0biIpLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbk5hbWU9cHJlZnMuZmxvYXRCYXIuYnV0b25PcmRlcltpbmRleF07CiAgICAgICAgICAgICAgICAgICAgYnV0dG9uc1tidXR0b25OYW1lXT1jaGlsZDsKICAgICAgICAgICAgICAgICAgICBjaGlsZC50aXRsZT10aXRsZU1hcFtidXR0b25OYW1lXTsKICAgICAgICAgICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdwdi1mbG9hdC1iYXItYnV0dG9uLScgKyBidXR0b25OYW1lKTsKICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICB0aGlzLmZsb2F0QmFyPWNvbnRhaW5lcjsKCgogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvblR5cGU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBmb3IodmFyIHR5cGUgaW4gYnV0dG9ucyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFidXR0b25zLmhhc093blByb3BlcnR5KHR5cGUpKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0PT1idXR0b25zW3R5cGVdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblR5cGU9dHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWYoIWJ1dHRvblR5cGUpcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLm9wZW4oZSxidXR0b25UeXBlKTsKCiAgICAgICAgICAgICAgICB9LHRydWUpOwoKCiAgICAgICAgICAgICAgICBhZGRDdXNNb3VzZUV2ZW50KCdtb3VzZWxlYXZlJyxjb250YWluZXIsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuaGlkZVRpbWVyKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGVUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIH0scHJlZnMuZmxvYXRCYXIuaGlkZURlbGF5KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGFkZEN1c01vdXNlRXZlbnQoJ21vdXNlZW50ZXInLGNvbnRhaW5lcixmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5oaWRlVGltZXIpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsSGFuZGxlcj10aGlzLnNjcm9sbEhhbmRsZXIuYmluZCh0aGlzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkU3R5bGU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBzdHlsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICAgICAgc3R5bGUudHlwZT0ndGV4dC9jc3MnOwogICAgICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQ9J1wKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDo5OTk5OTk5OTk4O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHg7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAwO1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDtcCiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXI6aG92ZXIge1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNwdi1mbG9hdC1iYXItY29udGFpbmVyIC5wdi1mbG9hdC1iYXItYnV0dG9uIHtcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxOHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjowO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAxcHggMCAzcHggMHB4IHJnYmEoMCwwLDAsMC45KTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgY2VudGVyIG5vLXJlcGVhdDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOjEwMCUgMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1vcmlnaW46IGNvbnRlbnQtYm94O1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG1hcmdpbi1yaWdodCAwLjE1cyBlYXNlLWluLW91dCAsICB3aWR0aCAwLjE1cyBlYXNlLWluLW91dCAsICBoZWlnaHQgMC4xNXMgZWFzZS1pbi1vdXQgO1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBtYXJnaW4tcmlnaHQgMC4xNXMgZWFzZS1pbi1vdXQgLCAgd2lkdGggMC4xNXMgZWFzZS1pbi1vdXQgLCAgaGVpZ2h0IDAuMTVzIGVhc2UtaW4tb3V0IDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbjpub3QoOmxhc3QtY2hpbGQpe1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IC0xNHB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNwdi1mbG9hdC1iYXItY29udGFpbmVyIC5wdi1mbG9hdC1iYXItYnV0dG9uOmZpcnN0LWNoaWxkIHtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogNDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbjpudGgtY2hpbGQoMikge1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiAzO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNwdi1mbG9hdC1iYXItY29udGFpbmVyIC5wdi1mbG9hdC1iYXItYnV0dG9uOm50aC1jaGlsZCgzKSB7XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXIgLnB2LWZsb2F0LWJhci1idXR0b246bGFzdC1jaGlsZCB7XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDE7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXI6aG92ZXIgPiAucHYtZmxvYXQtYmFyLWJ1dHRvbiB7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI0cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXI6aG92ZXIgPiAucHYtZmxvYXQtYmFyLWJ1dHRvbjpub3QoOmxhc3QtY2hpbGQpIHtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXIgLnB2LWZsb2F0LWJhci1idXR0b24tYWN0dWFsIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTp1cmwoIicrIHByZWZzLmljb25zLmFjdHVhbCArJyIpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNwdi1mbG9hdC1iYXItY29udGFpbmVyIC5wdi1mbG9hdC1iYXItYnV0dG9uLXNlYXJjaCB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKCInKyBwcmVmcy5pY29ucy5zZWFyY2ggKyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbi1nYWxsZXJ5IHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTp1cmwoIicrIHByZWZzLmljb25zLmdhbGxlcnkgKyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbi1jdXJyZW50IHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTp1cmwoIicrIHByZWZzLmljb25zLmN1cnJlbnQgKyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbi1tYWduaWZpZXIge1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOnVybCgiJysgcHJlZnMuaWNvbnMubWFnbmlmaWVyICsnIik7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzdGFydDpmdW5jdGlvbihkYXRhKXsKCiAgICAgICAgICAgICAgICAvL+ivu+WPluS4reeahOWbvueJhyzkuI3mmL7npLrmta7liqjmoI8s6LCD5pW06K+75Y+W5Zu+5qCH55qE5L2N572uLgogICAgICAgICAgICAgICAgaWYoTG9hZGluZ0FuaW1DLmFsbC5fZmluZChmdW5jdGlvbihpdGVtLGluZGV4LGFycmF5KXsKICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmltZz09aXRlbS5kYXRhLmltZyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KSlyZXR1cm47CgoKICAgICAgICAgICAgICAgIC8v6KKr5pS+5aSn6ZWc55uv5LiK55qE5Zu+54mHLOS4jeimgeaYvuekuua1ruWKqOagjy4KICAgICAgICAgICAgICAgIGlmKE1hZ25pZmllckMuYWxsLl9maW5kKGZ1bmN0aW9uKGl0ZW0saW5kZXgsYXJyYXkpewogICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuaW1nPT1pdGVtLmRhdGEuaW1nKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0pKXJldHVybjsKCiAgICAgICAgICAgICAgICB0aGlzLmRhdGE9ZGF0YTsKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZXIpOwoKICAgICAgICAgICAgICAgIHZhciBpbWdPdXRIYW5kbGVyPWZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JyxpbWdPdXRIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLnNob3dUaW1lcik7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuaGlkZVRpbWVyKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGVUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIH0scHJlZnMuZmxvYXRCYXIuaGlkZURlbGF5KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZ2xvYmFyT3V0VGltZXIpOwogICAgICAgICAgICAgICAgdGhpcy5nbG9iYXJPdXRUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ly/nqI3lvq7lu7bml7bjgILplJnlvIDnlLHkuo5jc3MgaG92ZXLmoLflvI/lj5HnlJ/nmoRvdXQ7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLGltZ091dEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICB9LDE1MCk7CgogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2hvd1RpbWVyKTsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3coKTsKICAgICAgICAgICAgICAgIH0scHJlZnMuZmxvYXRCYXIuc2hvd0RlbGF5KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0QnV0dG9uOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLmRhdGEubm9BY3R1YWwpewogICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uc1snYWN0dWFsJ10uc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25zWydtYWduaWZpZXInXS5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uc1snYWN0dWFsJ10uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbnNbJ21hZ25pZmllciddLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaW1nLm5vZGVOYW1lICE9ICdJTUcnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25zWydnYWxsZXJ5J10uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAvL3RoaXMuYnV0dG9uc1snY3VycmVudCddLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uc1snZ2FsbGVyeSddLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7CiAgICAgICAgICAgICAgICAgICAgLy90aGlzLmJ1dHRvbnNbJ2N1cnJlbnQnXS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXRQb3NpdGlvbjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgLy/lpoLmnpzlm77niYfooqvliKDpmaTkuobvvIzmiJbogIXpmpDol4/kuobjgIIKICAgICAgICAgICAgICAgIGlmKHRoaXMuZGF0YS5pbWcub2Zmc2V0V2lkdGg9PTApewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciB0YXJnZXRQb3NpPWdldENvbnRlbnRDbGllbnRSZWN0KHRoaXMuZGF0YS5pbWcpOwogICAgICAgICAgICAgICAgdmFyIHdpbmRvd1NpemU9Z2V0V2luZG93U2l6ZSgpOwogICAgICAgICAgICAgICAgdmFyIGltZz10aGlzLmRhdGEuaW1nOwoKICAgICAgICAgICAgICAgIHZhciBmbG9hdEJhclBvc2k9cHJlZnMuZmxvYXRCYXIucG9zaXRpb24udG9Mb3dlckNhc2UoKS5zcGxpdCgvXHMrLyk7CgogICAgICAgICAgICAgICAgdmFyIG9mZnNldFg9cHJlZnMuZmxvYXRCYXIub2Zmc2V0Lng7CiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WT1wcmVmcy5mbG9hdEJhci5vZmZzZXQueTsKCgogICAgICAgICAgICAgICAgdmFyIHNjcm9sbGVkPWdldFNjcm9sbGVkKCk7CgogICAgICAgICAgICAgICAgdmFyIGZicz10aGlzLmZsb2F0QmFyLnN0eWxlOwogICAgICAgICAgICAgICAgdmFyIHNldFBvc2l0aW9uPXsKICAgICAgICAgICAgICAgICAgICB0b3A6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgZmJzLm9wYWNpdHk9MTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvcD10YXJnZXRQb3NpLnRvcCArIHNjcm9sbGVkLnk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldFBvc2kudG9wICsgb2Zmc2V0WSA8IDApey8v5ruh6Laz5Zu+5qCH6KKr6YGu5L2P55qE5p2h5Lu2LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wPXNjcm9sbGVkLnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRZPTA7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGZicy50b3A9dG9wICsgb2Zmc2V0WSArICdweCc7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByaWdodDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBmYnMub3BhY2l0eT0xOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHQ9d2luZG93U2l6ZS53IC0gdGFyZ2V0UG9zaS5yaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocmlnaHQgPCBvZmZzZXRYKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0PSAtc2Nyb2xsZWQueDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFg9MDsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodCAtPXNjcm9sbGVkLng7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGZicy5yaWdodD1yaWdodCAtIG9mZnNldFggKyAncHgnOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZicy5vcGFjaXR5PTE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib3R0b209d2luZG93U2l6ZS5oIC0gdGFyZ2V0UG9zaS5ib3R0b207CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJvdHRvbSA8PSBvZmZzZXRZKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbT0tc2Nyb2xsZWQueTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFk9MDsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b20gLT0gc2Nyb2xsZWQueTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgZmJzLmJvdHRvbT1ib3R0b20gLSBvZmZzZXRZICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGxlZnQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgZmJzLm9wYWNpdHk9MTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQ9dGFyZ2V0UG9zaS5sZWZ0ICsgc2Nyb2xsZWQueDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0UG9zaS5sZWZ0ICsgb2Zmc2V0WCA8IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdD1zY3JvbGxlZC54OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WD0wOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBmYnMubGVmdD1sZWZ0ICsgb2Zmc2V0WCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjZW50ZXI6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgZmJzLm9wYWNpdHk9MTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQ9dGFyZ2V0UG9zaS5sZWZ0ICsgc2Nyb2xsZWQueCArIG9mZnNldFg7CiAgICAgICAgICAgICAgICAgICAgICAgIGZicy5sZWZ0PWxlZnQgKyBpbWcud2lkdGgvMiArICdweCc7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBoaWRlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZicy5vcGFjaXR5PTA7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgc2V0UG9zaXRpb25bZmxvYXRCYXJQb3NpWzBdXSgpOwogICAgICAgICAgICAgICAgaWYoZmxvYXRCYXJQb3NpLmxlbmd0aD4xKQogICAgICAgICAgICAgICAgc2V0UG9zaXRpb25bZmxvYXRCYXJQb3NpWzFdXSgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzaG93OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLnNldFBvc2l0aW9uKCkpcmV0dXJuOwogICAgICAgICAgICAgICAgdGhpcy5zaG93bj10cnVlOwogICAgICAgICAgICAgICAgdGhpcy5zZXRCdXR0b24oKTsKICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRCYXIuc3R5bGUuZGlzcGxheT0nYmxvY2snOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVyKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLHRoaXMuX3Njcm9sbEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJyx0aGlzLl9zY3JvbGxIYW5kbGVyLHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBoaWRlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zaG93VGltZXIpOwogICAgICAgICAgICAgICAgdGhpcy5zaG93bj1mYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRCYXIuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJyx0aGlzLl9zY3JvbGxIYW5kbGVyLHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzY3JvbGxIYW5kbGVyOmZ1bmN0aW9uKCl7Ly/mm7TmlrDlnZDmoIcKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNjcm9sbFVwZGF0ZVRpbWVyKTsKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFVwZGF0ZVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFBvc2l0aW9uKCk7CiAgICAgICAgICAgICAgICB9LDEwMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9wZW46ZnVuY3Rpb24oZSxidXR0b25UeXBlKXsKICAgICAgICAgICAgICAgIHZhciB3YWl0SW1nTG9hZCA9IGUgJiYgZS5jdHJsS2V5ID8gIXByZWZzLndhaXRJbWdMb2FkIDogcHJlZnMud2FpdEltZ0xvYWQ7IC8v5oyJ5L2PY3RybOWPluWPjeWQkeWAvAogICAgICAgICAgICAgICAgdmFyIG9wZW5JblRvcFdpbmRvdyA9IGUgJiYgZS5zaGlmdEtleSA/ICFwcmVmcy5mcmFtZXNQaWNPcGVuSW5Ub3BXaW5kb3cgOiBwcmVmcy5mcmFtZXNQaWNPcGVuSW5Ub3BXaW5kb3c7IC8v5oyJ5L2Pc2hpZnTlj5blj43lkJHlgLwKICAgICAgICAgICAgICAgIGlmICghd2FpdEltZ0xvYWQgJiYgYnV0dG9uVHlwZSA9PSAnbWFnbmlmaWVyJyAmJiAhZW52aXIuY2hyb21lKSB7IC8v6Z2eY2hyb21l55qEYmFja2dyb3VuZC1pbWFnZemcgOimgeWFqOmDqOi9veWFpeWQjuaJjeiDveaYvuekuuWHuuadpQogICAgICAgICAgICAgICAgICAgIHdhaXRJbWdMb2FkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBuZXcgTG9hZGluZ0FuaW1DKHRoaXMuZGF0YSwgYnV0dG9uVHlwZSwgd2FpdEltZ0xvYWQsIG9wZW5JblRvcFdpbmRvdyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgKiDmj5Dlj5boh6ogTW91c2VvdmVyIFBvcHVwIEltYWdlIFZpZXdlciDohJrmnKzvvIznlKjkuo4geGhyIOaWueW8j+eahOiOt+WPlgogICAgICAgICovCiAgICAgICAgICAgIHZhciB4aHJMb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBfID0ge307CgogICAgICAgICAgICB2YXIgY2FjaGVzID0ge307CiAgICAgICAgICAgIHZhciBoYW5kbGVFcnJvcjsKCiAgICAgICAgICAgIC8qKgogICAgICogQHBhcmFtICBxICDlm77niYfnmoTpgInmi6nlmajmiJblh73mlbAKICAgICAqIEBwYXJhbSAgYyAg5Zu+54mH6K+05piO55qE6YCJ5oup5Zmo5oiW5Ye95pWwCiAgICAgKi8KICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VQYWdlKHVybCwgcSwgYywgcG9zdCwgY2IpIHsKICAgICAgICAgICAgICAgIGRvd25sb2FkUGFnZSh1cmwsIHBvc3QsIGZ1bmN0aW9uKGh0bWwpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaXVybCwgaXVybHMgPSBbXSwgY2FwLCBkb2MgPSBjcmVhdGVEb2MoaHRtbCk7CgogICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBxID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXVybCA9IHEoaHRtbCwgZG9jKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5vZGVzID0gZmluZE5vZGVzKHEsIGRvYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl1cmxzLnB1c2goZmluZEZpbGUobm9kZSwgdXJsKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpdXJsID0gaXVybHMuc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FwID0gYyhodG1sLCBkb2MpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbm9kZXMgPSBmaW5kTm9kZXMoYywgZG9jKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FwID0gY25vZGVzLmxlbmd0aCA/IGZpbmRDYXB0aW9uKGNub2RlWzBdKSA6IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8g57yT5a2YCiAgICAgICAgICAgICAgICAgICAgaWYgKGl1cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVzW3VybF0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdXJsOiBpdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXVybHM6IGl1cmxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwOiBjYXAKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGNiKGl1cmwsIGl1cmxzLCBjYXApOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkUGFnZSh1cmwsIHBvc3QsIGNiKSB7CiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXEuc3RhdHVzID4gMzk5KSB0aHJvdyAnU2VydmVyIGVycm9yOiAnICsgcmVxLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKHJlcS5yZXNwb25zZVRleHQsIHJlcS5maW5hbFVybCB8fCB1cmwpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGhhbmRsZUVycm9yCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYocG9zdCkgewogICAgICAgICAgICAgICAgICAgIG9wdHMubWV0aG9kID0gJ1BPU1QnOwogICAgICAgICAgICAgICAgICAgIG9wdHMuZGF0YSA9IHBvc3Q7CiAgICAgICAgICAgICAgICAgICAgb3B0cy5oZWFkZXJzID0geydDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLCdSZWZlcmVyJzp1cmx9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KG9wdHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVEb2ModGV4dCkgewogICAgICAgICAgICAgICAgdmFyIGRvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgncGljVmlld2VyQ0UnKTsKICAgICAgICAgICAgICAgIGRvYy5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gdGV4dDsKICAgICAgICAgICAgICAgIHJldHVybiBkb2M7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmROb2RlcyhxLCBkb2MpIHsKICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IFtdLAogICAgICAgICAgICAgICAgICAgIG5vZGU7CiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocSkpIHEgPSBbcV07CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcS5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgICAgIG5vZGUgPSBxcyhxW2ldLCBkb2MpOwogICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBmaW5kRmlsZShuLCB1cmwpIHsKICAgICAgICAgICAgICAgIHZhciBwYXRoID0gbi5zcmMgfHwgbi5ocmVmOwogICAgICAgICAgICAgICAgcmV0dXJuIHBhdGggPyBwYXRoLnRyaW0oKSA6IGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBmaW5kQ2FwdGlvbihuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbi5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKSB8fCBuLmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCBuLnRleHRDb250ZW50OwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBxcyhzLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbi5xdWVyeVNlbGVjdG9yKHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfLmxvYWQgPSBmdW5jdGlvbihvcHQpIHsKICAgICAgICAgICAgICAgIHZhciBpbmZvID0gY2FjaGVzW29wdC51cmxdOwogICAgICAgICAgICAgICAgaWYgKGluZm8pIHsKICAgICAgICAgICAgICAgICAgICBvcHQuY2IoaW5mby5pdXJsLCBpbmZvLmlydWxzLCBpbmZvLmNhcCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yID0gb3B0Lm9uZXJyb3IgfHwgZnVuY3Rpb24oKSB7fTsKCiAgICAgICAgICAgICAgICBwYXJzZVBhZ2Uob3B0LnVybCwgb3B0Lnhoci5xLCBvcHQueGhyLmMsIG9wdC5wb3N0LCBvcHQuY2IpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmV0dXJuIF87CiAgICAgICAgfSgpOwoKCiAgICAgICAgLyoqCiAgICAgICAgICog5YW85a65IE1vdXNldmVyIFBvcHVwIEltYWdlIFZpZXdlciDohJrmnKzop4TliJkKICAgICAgICAgKiDop4TliJnor7TmmI7lnLDlnYDvvJpodHRwOi8vdzlwLmNvL3VzZXJzY3JpcHRzL21waXYvaG9zdF9ydWxlcy5odG1sCiAgICAgICAgICovCiAgICAgICAgdmFyIE1QSVYgPSAoZnVuY3Rpb24oKSB7CgogICAgICAgICAgICB2YXIgaG9zdHMgPSBSdWxlLk1QSVY7CgogICAgICAgICAgICB2YXIgZCA9IGRvY3VtZW50LCB3biA9IHdpbmRvdzsKICAgICAgICAgICAgdmFyIGNmZyA9IHsKICAgICAgICAgICAgICAgIHRodW1ic29ubHk6IHRydWUsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIOaIkeaWsOWKoOeahAogICAgICAgICAgICB2YXIgcmd4SFRUUHMgPSAvXmh0dHBzPzpcL1wvKD86d3d3XC4pPy87CgogICAgICAgICAgICBmdW5jdGlvbiBsb2FkUnVsZSgpIHsKICAgICAgICAgICAgICAgIHZhciBydWxlcyA9IFJ1bGUuTVBJVjsKCiAgICAgICAgICAgICAgICB2YXIgaXNTdHJpbmdGbiA9IGZ1bmN0aW9uKGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGEgPT0gJ3N0cmluZycgJiYgYS5pbmRleE9mKCdyZXR1cm4gJykgPiAtMTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcnVsZXMuZm9yRWFjaChmdW5jdGlvbihoKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaC5yKSBoLnIgPSB0b1JFKGguciwgJ2knKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNTdHJpbmdGbihoLnMpKSBoLnMgPSBuZXcgRnVuY3Rpb24oJ20nLCAnbm9kZScsIGgucyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlzU3RyaW5nRm4oaC5xKSkgaC5xID0gbmV3IEZ1bmN0aW9uKCd0ZXh0JywgJ2RvYycsIGgucSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlzU3RyaW5nRm4oaC5jKSkgaC5jID0gbmV3IEZ1bmN0aW9uKCd0ZXh0JywgJ2RvYycsIGguYyk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChleCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNUElWIOinhOWImeaXoOaViDogJW8nLCBoLCBleCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uKGhuLCBoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFoLmQgfHwgaG4uaW5kZXhPZihoLmQpID4gLTE7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGhvc3RzID0gcnVsZXMuZmlsdGVyKGZpbHRlci5iaW5kKG51bGwsIGxvY2F0aW9uLmhvc3RuYW1lKSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGhvc3RzOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBoYXNCZyhub2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZSA/IHduLmdldENvbXB1dGVkU3R5bGUobm9kZSkuYmFja2dyb3VuZEltYWdlICE9ICdub25lJyAmJiBub2RlLmNsYXNzTmFtZS5pbmRleE9mKCdZVExULScpIDwgMCA6IGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiByZWwyYWJzKHJlbCwgYWJzKSB7CiAgICAgICAgICAgICAgICBpZihyZWwuaW5kZXhPZignLy8nKSA9PT0gMCkgcmVsID0gJ2h0dHA6JyArIHJlbDsKICAgICAgICAgICAgICAgIHZhciByZSA9IC9eKFthLXpdKzopP1wvXC8vOwogICAgICAgICAgICAgICAgaWYocmUudGVzdChyZWwpKSAgcmV0dXJuIHJlbDsKICAgICAgICAgICAgICAgIGlmKCFyZS5leGVjKGFicykpIHJldHVybjsKICAgICAgICAgICAgICAgIGlmKHJlbFswXSA9PSAnLycpIHJldHVybiBhYnMuc3Vic3RyKDAsIGFicy5pbmRleE9mKCcvJywgUmVnRXhwLmxhc3RNYXRjaC5sZW5ndGgpKSArIHJlbDsKICAgICAgICAgICAgICAgIHJldHVybiBhYnMuc3Vic3RyKDAsIGFicy5sYXN0SW5kZXhPZignLycpKSArICcvJyArIHJlbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIOaIkeaWsOWinuS6hueJueauiueahOabv+aNouaooeW8jwogICAgICAgICAgICAgKiDop4TliJnvvJoKICAgICAgICAgICAgICogICB7InIiOiJob3RpbWdcXC5jb20vaW1hZ2UiLCAicyI6Ii9pbWFnZS9kaXJlY3QvIn0KICAgICAgICAgICAgICogICDmioogaW1hZ2Ug5pu/5o2i5Li6IGRpcmVjdCDvvIzlsLHmmK8gLnJlcGxhY2UoL2ltYWdlLywgImRpcmVjdCIpCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBmdW5jdGlvbiByZXBsYWNlKHMsIG0sIHIsIGh0dHApIHsKICAgICAgICAgICAgICAgIGlmKCFtKSByZXR1cm4gczsKCiAgICAgICAgICAgICAgICBpZiAociAmJiBzLnN0YXJ0c1dpdGgoJ3I7JykpIHsgIC8vIOeJueauiueahOabv+aNouaooeW8jwogICAgICAgICAgICAgICAgICAgIHMgPSBtLmlucHV0LnJlcGxhY2Uociwgcy5zbGljZSgyKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYocy5pbmRleE9mKCcvJykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbWlkID0gL1teXFxdXC8vLmV4ZWMocykuaW5kZXgrMTsKICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gcy5sYXN0SW5kZXhPZignLycpOwogICAgICAgICAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAocy5zdWJzdHJpbmcoMSwgbWlkKSwgcy5zdWJzdHIoZW5kKzEpKTsKICAgICAgICAgICAgICAgICAgICBzID0gbS5pbnB1dC5yZXBsYWNlKHJlLCBzLnN1YnN0cmluZyhtaWQrMSwgZW5kKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IG0ubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoJyQnK2ksIG1baV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIXMuc3RhcnRzV2l0aCgnaHR0cCcpICYmIGh0dHApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHR0cCArIHM7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Qobm9kZSwgcSkgewogICAgICAgICAgICAgICAgaWYocSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gbm9kZTsKICAgICAgICAgICAgICAgICAgICB3aGlsZSh0YWcobiA9IG4ucGFyZW50Tm9kZSkgIT0gJ0JPRFknKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hdGNoZXMobiwgcSkpIHJldHVybiBuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgnKicpOwogICAgICAgICAgICAgICAgZm9yKHZhciBpID0gbm9kZXMubGVuZ3RoOyBpLS0gJiYgKG4gPSBub2Rlc1tpXSk7KSB7CiAgICAgICAgICAgICAgICAgICAgaWYobi5vZmZzZXRIZWlnaHQgPiBub2RlLm9mZnNldEhlaWdodCkgbm9kZSA9IG47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbWF0Y2hlcyhuLCBxKSB7CiAgICAgICAgICAgICAgICB2YXIgcCA9IEVsZW1lbnQucHJvdG90eXBlLCBtID0gcC5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgcC53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgcC5vTWF0Y2hlc1NlbGVjdG9yIHx8IHAubWF0Y2hlc1NlbGVjdG9yIHx8IHAubWF0Y2hlczsKICAgICAgICAgICAgICAgIGlmKG0pIHJldHVybiBtLmNhbGwobiwgcSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHRhZyhuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbiAmJiBuLnRhZ05hbWUgJiYgbi50YWdOYW1lLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHFzKHMsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBuLnF1ZXJ5U2VsZWN0b3Iocyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlTm9kZShub2RlKSB7CiAgICAgICAgICAgICAgICB2YXIgYSwgaW1nLCB1cmwsIGluZm87CiAgICAgICAgICAgICAgICBpZih0YWcobm9kZSkgPT0gJ0EnKSB7CiAgICAgICAgICAgICAgICAgICAgYSA9IG5vZGU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYobm9kZS5wYXJlbnROb2RlKXsKICAgICAgICAgICAgICAgICAgICBpZih0YWcobm9kZSkgPT0gJ0lNRycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nID0gbm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nLnNyYy5zdWJzdHIoMCwgNSkgIT0gJ2RhdGE6JykgdXJsID0gcmVsMmFicyhpbWcuc3JjLCBsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaW5mbyA9IGZpbmRJbmZvKHVybCwgbm9kZSk7CiAgICAgICAgICAgICAgICAgICAgaWYoaW5mbykgcmV0dXJuIGluZm87CiAgICAgICAgICAgICAgICAgICAgYSA9IHRhZyhub2RlLnBhcmVudE5vZGUpID09ICdBJyA/IG5vZGUucGFyZW50Tm9kZSA6ICh0YWcobm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUpID09ICdBJyA/IG5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlIDogZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoYSkgewogICAgICAgICAgICAgICAgICAgIGlmKGNmZy50aHVtYnNvbmx5ICYmICEoaW1nIHx8IHFzKCdpJywgYSkgfHwgYS5yZWwgPT0gJ3RoZWF0ZXInKSAmJiAhaGFzQmcoYSkgJiYgIWhhc0JnKGEucGFyZW50Tm9kZSkgJiYgIWhhc0JnKGEuZmlyc3RFbGVtZW50Q2hpbGQpKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgdXJsID0gYS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kZWQtdXJsJykgfHwgYS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZnVsbC11cmwnKSB8fCBhLmdldEF0dHJpYnV0ZSgnZGF0YS11cmwnKSB8fCBhLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgaWYodXJsLnN1YnN0cigwLCA1KSA9PSAnZGF0YTonKSB1cmwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHVybC5pbmRleE9mKCcvL3QuY28vJykgPiAtMSkgdXJsID0gJ2h0dHA6Ly8nICsgYS50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICBpbmZvID0gZmluZEluZm8odXJsLCBhKTsKICAgICAgICAgICAgICAgICAgICBpZihpbmZvKSByZXR1cm4gaW5mbzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGltZykgcmV0dXJuIHt1cmw6aW1nLnNyYywgbm9kZTppbWcsIHJlY3Q6cmVjdChpbWcpLCBkaXN0aW5jdDp0cnVlfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZGVjb2RlVVJJQ29tcG9uZW50RXgodXJpQ29tcG9uZW50KXsKICAgICAgICAgICAgICAgIGlmKCF1cmlDb21wb25lbnQpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAgdXJpQ29tcG9uZW50OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHJldDsKICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICByZXQgPSBkZWNvZGVVUklDb21wb25lbnQodXJpQ29tcG9uZW50KTsKICAgICAgICAgICAgICAgIH1jYXRjaChleCl7CiAgICAgICAgICAgICAgICAgICAgcmV0ID0gdW5lc2NhcGUodXJpQ29tcG9uZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBmdW5jdGlvbiBmaW5kSW5mbyh1cmwsIG5vZGUsIG5vSHRtbCwgc2tpcEhvc3QpIHsKICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbiA9IGhvc3RzLmxlbmd0aCwgdG4gPSB0YWcobm9kZSksIGgsIG0sIGh0bWwsIHVybHMsIFVSTCwgaHR0cDsgaSA8IGxlbiAmJiAoaCA9IGhvc3RzW2ldKTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoaC5lICYmICFtYXRjaGVzKG5vZGUsIGguZSkgfHwgaCA9PSBza2lwSG9zdCkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgaWYoaC5yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGguaHRtbCAmJiAhbm9IdG1sICYmICh0biA9PSAnQScgfHwgdG4gPT0gJ0lNRycgfHwgaC5lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWh0bWwpIGh0bWwgPSBub2RlLm91dGVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBoLnIuZXhlYyhodG1sKQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYodXJsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDljrvmjonliY3pnaLnmoQgaHR0cHM6Ly8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVSTCA9IHVybC5yZXBsYWNlKHJneEhUVFBzLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwID0gdXJsLnNsaWNlKDAsIHVybC5sZW5ndGggLSBVUkwubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBoLnIuZXhlYyhVUkwpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBtID0gdXJsID8gLy4qLy5leGVjKHVybCkgOiBbXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoIW0gfHwgdG4gPT0gJ0lNRycgJiYgISgncycgaW4gaCkpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIGlmKCdzJyBpbiBoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybHMgPSAoQXJyYXkuaXNBcnJheShoLnMpID8gaC5zIDogW2guc10pLm1hcChmdW5jdGlvbihzKSB7IGlmKHR5cGVvZiBzID09ICdzdHJpbmcnKSByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50RXgocmVwbGFjZShzLCBtLCBoLnIsIGh0dHApKTsgaWYodHlwZW9mIHMgPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHMobSwgbm9kZSk7IHJldHVybiBzOyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoQXJyYXkuaXNBcnJheSh1cmxzWzBdKSkgdXJscyA9IHVybHNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHVybHNbMF0gPT09IGZhbHNlKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdXJscyA9IHVybHMubWFwKGZ1bmN0aW9uKHUpIHsgcmV0dXJuIHUgPyBkZWNvZGVVUklDb21wb25lbnRFeCh1KSA6IHU7IH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybHMgPSBbbS5pbnB1dF07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKChoLmZvbGxvdyA9PT0gdHJ1ZSB8fCB0eXBlb2YgaC5mb2xsb3cgPT0gJ2Z1bmN0aW9uJyAmJiBoLmZvbGxvdyh1cmxzWzBdKSkgJiYgIWgucSkgcmV0dXJuIGZpbmRJbmZvKHVybHNbMF0sIG5vZGUsIGZhbHNlLCBoKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gZGVidWcoJ01QSVYg5om+5Yiw55qE6KeE5YiZ5pivICVvJywgaCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogbm9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmxzLnNoaWZ0KCksCiAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6IHVybHMsCiAgICAgICAgICAgICAgICAgICAgICAgIHI6IGguciwKICAgICAgICAgICAgICAgICAgICAgICAgczogaC5zLAogICAgICAgICAgICAgICAgICAgICAgICBxOiBoLnEsCiAgICAgICAgICAgICAgICAgICAgICAgIGM6IGguYywKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZzogaC5nID8gbG9hZEdhbGxlcnlQYXJzZXIoaC5nKSA6IGguZywKICAgICAgICAgICAgICAgICAgICAgICAgeGhyOiBoLnhociwKICAgICAgICAgICAgICAgICAgICAgICAgcG9zdDogdHlwZW9mIGgucG9zdCA9PSAnZnVuY3Rpb24nID8gaC5wb3N0KG0pIDogaC5wb3N0LAogICAgICAgICAgICAgICAgICAgICAgICBmb2xsb3c6IGguZm9sbG93LAogICAgICAgICAgICAgICAgICAgICAgICBjc3M6IGguY3NzLAogICAgICAgICAgICAgICAgICAgICAgICAvLyBtYW51YWw6IGgubWFudWFsLAogICAgICAgICAgICAgICAgICAgICAgICBkaXN0aW5jdDogaC5kaXN0aW5jdCwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjdDogcmVjdChub2RlLCBoLnJlY3QpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFRPRE8KICAgICAgICAgICAgZnVuY3Rpb24gcnVsZXNUb1N0cmluZyhydWxlcykgewogICAgICAgICAgICAgICAgdmFyIG5ld1J1bGVzID0gW107CgogICAgICAgICAgICAgICAgcnVsZXMuZm9yRWFjaChmdW5jdGlvbihoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0luZm8gPSB7fQogICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGgpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gJ3InKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmZvLnIgPSBoLnIgaW5zdGFuY2VvZiBSZWdFeHAgPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGguci50b1N0cmluZygpIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcGFyc2VOb2RlOiBwYXJzZU5vZGUsCiAgICAgICAgICAgICAgICBmaW5kSW5mbzogZmluZEluZm8sCiAgICAgICAgICAgICAgICBsb2FkUnVsZTogbG9hZFJ1bGUsCiAgICAgICAgICAgIH0KCiAgICAgICAgfSkoKTsKCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBydW4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICB2YXIgbWF0Y2hlZFJ1bGUsCiAgICAgICAgICAgIFVSTD1sb2NhdGlvbi5ocmVmLAogICAgICAgICAgICBmbG9hdEJhcjsKCiAgICAgICAgZnVuY3Rpb24gZmluZFBpYyhpbWcpewogICAgICAgICAgICAvL+iOt+WPluWMheijuWltZ+eahOesrOS4gOS4qmHlhYPntKDjgIIKICAgICAgICAgICAgdmFyIGltZ1BOPWltZzsKICAgICAgICAgICAgdmFyIGltZ1BBOwogICAgICAgICAgICB3aGlsZShpbWdQTj1pbWdQTi5wYXJlbnRFbGVtZW50KXsKICAgICAgICAgICAgICAgIGlmKGltZ1BOLm5vZGVOYW1lPT0nQScpewogICAgICAgICAgICAgICAgICAgIGltZ1BBPWltZ1BOOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBpUEFTcmM9aW1nUEE/IGltZ1BBLmhyZWYgOiAnJzsKICAgICAgICAgICAgLy9iYXNlNjTlrZfnrKbkuLLov4fplb/lr7zoh7TmraPliJnljLnphY3ljaHmrbvmtY/op4jlmagKICAgICAgICAgICAgdmFyIGJhc2U2NEltZz0vXmRhdGE6W147XSs7YmFzZTY0LC9pLnRlc3QoaW1nLnNyYyk7CiAgICAgICAgICAgIHZhciBzcmMsICAvLyDlpKflm77lnLDlnYAKICAgICAgICAgICAgICAgIHNyY3MsICAvLyDlpIfnlKjnmoTlpKflm77lnLDlnYAKICAgICAgICAgICAgICAgIHR5cGUsICAvLyDnsbvliKsKICAgICAgICAgICAgICAgIG5vQWN0dWFsID0gZmFsc2UsIC8v5rKh5pyJ5Y6f5Zu+CiAgICAgICAgICAgICAgICBpbWdTcmMgPSBpbWcuc3JjLCAgLy8gaW1nIOiKgueCueeahCBzcmMKICAgICAgICAgICAgICAgIHhociwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOyAgLy8g5Zu+54mH55qE5rOo6YeKCgogICAgICAgICAgICBpZighc3JjICYmIG1hdGNoZWRSdWxlKXsvLyDpgJrov4fpq5jnuqfop4TliJnojrflj5YuCiAgICAgICAgICAgICAgICAvLyDmjpLpmaQKICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkUnVsZS5leGNsdWRlICYmIG1hdGNoZWRSdWxlLmV4Y2x1ZGUudGVzdChpbWdTcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTcmM9bWF0Y2hlZFJ1bGUuZ2V0SW1hZ2UuY2FsbChpbWcsaW1nLGltZ1BBKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nU3JjIT1uZXdTcmMpIHNyYz1uZXdTcmM7CiAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGVycil7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93RXJyb3JJbmZvKGVycik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZihzcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3JjKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjcyA9IHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IHNyY3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICdydWxlJzsKICAgICAgICAgICAgICAgICAgICAgICAgeGhyID0gbWF0Y2hlZFJ1bGUueGhyOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWRSdWxlLmxhenlBdHRyKSB7ICAvLyDnlLHkuo7ph4fnlKjkuoblu7bov5/liqDovb3mioDmnK/vvIzmiYDku6Xlm77niYflj6/og73kuLogbG9hZGluZy5naWYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyYyA9IGltZy5nZXRBdHRyaWJ1dGUobWF0Y2hlZFJ1bGUubGF6eUF0dHIpIHx8IGltZy5zcmM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkUnVsZS5kZXNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBnZXRFbGVtZW50TWl4KG1hdGNoZWRSdWxlLmRlc2NyaXB0aW9uLCBpbWcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG5vZGUuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IG5vZGUudGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAoIXNyYyAmJiAhYmFzZTY0SW1nKSB7IC8vIOWFvOWuuSBNUElWIOiEmuacrOinhOWImQogICAgICAgICAgICAgICAgdmFyIGluZm8gPSBNUElWLnBhcnNlTm9kZShpbWcpOwogICAgICAgICAgICAgICAgaWYgKGluZm8gJiYgaW5mby51cmwgJiYgKGluZm8udXJsICE9IGltZ1NyYykpIHsKICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ3J1bGUnOwogICAgICAgICAgICAgICAgICAgIHNyYyA9IGluZm8udXJsOwogICAgICAgICAgICAgICAgICAgIHNyY3MgPSBpbmZvLnVybHM7CiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8ucSkgewogICAgICAgICAgICAgICAgICAgICAgICB4aHIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxOiBpbmZvLnEKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCFzcmMgJiYgIWJhc2U2NEltZyl7Ly/pgY3ljobpgJrphY3op4TliJkKICAgICAgICAgICAgICAgIHRwcnVsZXMuX2ZpbmQoZnVuY3Rpb24ocnVsZSxpbmRleCxhcnJheSl7CiAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICBzcmM9cnVsZS5jYWxsKGltZyxpbWcsaW1nUEEpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzcmMpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygn5Yy56YWN55qE6YCa6YWN6KeE5YiZJyxydWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1jYXRjaChlcnIpewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9ySW5mbyhlcnIpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmKHNyYyl0eXBlPSd0cFJ1bGUnOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYoIXNyYyAmJiBpbWdQQSl7Ly/pk77mjqXlj6/og73mmK/kuIDlvKDlm77niYcuLi4KICAgICAgICAgICAgICAgIGlmKC9cLig/OmpwZ3xqcGVnfHBuZ3xnaWZ8Ym1wKShcP1teXD9dKik/JC9pLnRlc3QoaVBBU3JjKSAmJiBpUEFTcmMhPWltZy5zcmMpewogICAgICAgICAgICAgICAgICAgIHNyYz1pUEFTcmM7CiAgICAgICAgICAgICAgICAgICAgc3Jjcz1baW1nU3JjXTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZihzcmMpdHlwZT0nc2NhbGUnOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIGltZ0FTPXsvL+WunumZheWwuuWvuOOAggogICAgICAgICAgICAgICAgaDppbWcubmF0dXJhbEhlaWdodCwKICAgICAgICAgICAgICAgIHc6aW1nLm5hdHVyYWxXaWR0aCwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYoIXNyYyB8fCBzcmM9PWltZ1NyYyl7Ly/mnKzlm77niYfmmK/lkKbooqvnvKnmlL4uCiAgICAgICAgICAgICAgICBub0FjdHVhbD10cnVlOwoKICAgICAgICAgICAgICAgIHZhciBpbWdDU3R5bGU9dW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUoaW1nKTsKICAgICAgICAgICAgICAgIHZhciBpbWdDUz17CiAgICAgICAgICAgICAgICAgICAgaDogcGFyc2VGbG9hdChpbWdDU3R5bGUuaGVpZ2h0KSwKICAgICAgICAgICAgICAgICAgICB3OiBwYXJzZUZsb2F0KGltZ0NTdHlsZS53aWR0aCksCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYoIShpbWdBUy53PT1pbWdDUy53ICYmIGltZ0FTLmg9PWltZ0NTLmgpKXsvL+WmguaenOS4jeaYr+S4pOiAheWujOWFqOebuOetiSzpgqPkuYjooqvnvKnmlL7kuoYuCiAgICAgICAgICAgICAgICAgICAgaWYoaW1nQVMuaCA+IHByZWZzLmZsb2F0QmFyLm1pblNpemVMaW1pdC5oICYmIGltZ0FTLncgPiBwcmVmcy5mbG9hdEJhci5taW5TaXplTGltaXQudyl7Ly/mnIDlsI/pmZDlrprliKTmlq0uCiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1pbWdTcmM7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3NjYWxlJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBpZihwcmVmcy5mbG9hdEJhci5mb3JjZVNob3cuZW5hYmxlZCAmJiAoaW1nQ1Mudz5wcmVmcy5mbG9hdEJhci5mb3JjZVNob3cuc2l6ZS53ICYmIGltZ0NTLmg+cHJlZnMuZmxvYXRCYXIuZm9yY2VTaG93LnNpemUuaCkpewogICAgICAgICAgICAgICAgICAgICAgICBzcmM9aW1nU3JjOwogICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdmb3JjZSc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYoIXNyYylyZXR1cm47CiAgICAgICAgICAgIGlmIChpbWdBUy5oIDwgcHJlZnMuZ2FsbGVyeS5zY2FsZVNtYWxsU2l6ZSAmJiBpbWdBUy53IDwgcHJlZnMuZ2FsbGVyeS5zY2FsZVNtYWxsU2l6ZSkgewogICAgICAgICAgICAgICAgdHlwZSA9ICdzY2FsZVNtYWxsJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgc3JjPWRlY29kZVVSSUNvbXBvbmVudChzcmMpOwogICAgICAgICAgICB9Y2F0Y2goZSl7fQoKICAgICAgICAgICAgdmFyIHJldCA9IHsKICAgICAgICAgICAgICAgIHNyYzogc3JjLCAgICAgICAgICAgICAgICAgIC8vIOW+l+WIsOeahHNyYwogICAgICAgICAgICAgICAgc3Jjczogc3JjcywgICAgICAgICAgICAgICAgLy8g5aSa5LiqIHNyY++8jOWksei0peS6huS8muWwneivleS4i+S4gOS4qgogICAgICAgICAgICAgICAgdHlwZTogdHlwZSwgICAgICAgICAgICAgICAgLy8g6YCa6L+H5ZOq56eN5pa55byP5b6X5Yiw55qECiAgICAgICAgICAgICAgICBpbWdTcmM6IGltZ1NyYywgICAgICAgICAgICAvLyDlpITnkIbnmoTlm77niYfnmoRzcmMKICAgICAgICAgICAgICAgIGlQQVNyYzogaVBBU3JjLCAgICAgICAgICAgIC8vIOWbvueJh+eahOesrOS4gOS4queItmHlhYPntKDnmoTpk77mjqXlnLDlnYAKICAgICAgICAgICAgICAgIHNpemVIOmltZ0FTLmgsCiAgICAgICAgICAgICAgICBzaXplVzppbWdBUy53LAoKICAgICAgICAgICAgICAgIG5vQWN0dWFsOm5vQWN0dWFsLAogICAgICAgICAgICAgICAgeGhyOiB4aHIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfHwgJycsCgogICAgICAgICAgICAgICAgaW1nOiBpbWcsICAgICAgICAgICAgICAgICAgLy8g5aSE55CG55qE5Zu+54mHCiAgICAgICAgICAgICAgICBpbWdQQTogaW1nUEEsICAgICAgICAgICAgICAvLyDlm77niYfnmoTnrKzkuIDkuKrniLZh5YWD57SgCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRNYXRjaGVkUnVsZSgpIHsKICAgICAgICAgICAgdmFyIHJ1bGUgPSBzaXRlSW5mby5fZmluZChmdW5jdGlvbihzaXRlLCBpbmRleCwgYXJyYXkpIHsKICAgICAgICAgICAgICAgIGlmIChzaXRlLnVybCAmJiB0b1JFKHNpdGUudXJsKS50ZXN0KFVSTCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBydWxlID0gcnVsZSA/IHJ1bGVbMF0gOiBmYWxzZTsKCiAgICAgICAgICAgIHJldHVybiBydWxlOwogICAgICAgIH0KCiAgICAgICAgdmFyIGlzRnJhbWU9d2luZG93IT13aW5kb3cucGFyZW50OwogICAgICAgIHZhciB0b3BXaW5kb3dWYWxpZDsvL2ZyYW1lc2V055qE56qX5Y+j6L+Z5Liq5qCH6K6w5Li6ZmFsc2UKICAgICAgICB2YXIgZnJhbWVTZW50RGF0YTsKICAgICAgICB2YXIgZnJhbWVTZW50U3VjY2Vzc0RhdGE7CiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShlKXsgLy8gY29udGVudHNjcmlwdOmHjOmdoueahG1lc3NhZ2Xnm5HlkKzvvIznm5HlkKzmnaXoh6rliKvnmoTnqpflj6PnmoTmlbDmja7jgIIKICAgICAgICAgICAgdmFyIGRhdGE9ZS5kYXRhOwogICAgICAgICAgICBpZiggIWRhdGEgfHwgIWRhdGEubWVzc2FnZUlEIHx8IGRhdGEubWVzc2FnZUlEICE9IG1lc3NhZ2VJRCApcmV0dXJuOy8v6YCa5L+hSUTorqTor4EKICAgICAgICAgICAgdmFyIHNvdXJjZT1lLnNvdXJjZTsKICAgICAgICAgICAgLy9jaHJvbWXkuK3miYDmnIl3aW5kb3fnqpflj6PnmoTlvJXnlKjpg73mmK91bmRlZmluZWQKICAgICAgICAgICAgaWYodHlwZW9mIHNvdXJjZT09J3VuZGVmaW5lZCcgfHwgc291cmNlIT09d2luZG93KXsvL+adpeiHquWIq+eahOeql+WPowogICAgICAgICAgICAgICAgaWYoIWlzRnJhbWUpey8v6aG25bGC56qX5Y+jCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1hbmQ9ZGF0YS5jb21tYW5kOwogICAgICAgICAgICAgICAgICAgIHN3aXRjaChjb21tYW5kKXsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3Blbic6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmM9ZGF0YS5zcmM7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUmVhZHkoaW1nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2FkaW5nQW5pbUMucHJvdG90eXBlLm9wZW4uY2FsbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWc6aW1nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTpkYXRhLmRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25UeXBlOmRhdGEuYnV0dG9uVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206ZGF0YS5mcm9tLC8v5p2l6Ieq5ZOq5Liq56qX5Y+jCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICduYXZpZ2F0ZVRvSW1nJzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VzRXZlbnQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXNFdmVudC5pbml0Q3VzdG9tRXZlbnQoJ3B2LW5hdmlnYXRlVG9JbWcnLGZhbHNlLGZhbHNlLGRhdGEuZXhpc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXNFdmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndG9wV2luZG93VmFsaWQnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuZnJvbSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOid0b3BXaW5kb3dWYWxpZF9mcmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQ6ZG9jdW1lbnQuYm9keS5ub2RlTmFtZSE9J0ZSQU1FU0VUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzpkYXRhLmZyb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCcqJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIH1lbHNley8vZnJhbWXnqpflj6MKICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWFuZD1kYXRhLmNvbW1hbmQ7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGNvbW1hbmQpewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICduYXZpZ2F0ZVRvSW1nJzp7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWZyYW1lU2VudERhdGEudW5pcXVlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdW5pcXVlPUdhbGxlcnlDLnByb3RvdHlwZS51bmlxdWUoZnJhbWVTZW50RGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVTZW50RGF0YT11bmlxdWUuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVNlbnREYXRhLnVuaXF1ZT10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRJbWc9ZnJhbWVTZW50RGF0YVtkYXRhLmluZGV4XS5pbWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3Q9KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyh0YXJnZXRJbWcpICYmIHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldEltZykuZGlzcGxheSE9J25vbmUnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihleGlzdCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZ2FsbGVyeSAmJiBnYWxsZXJ5LnNob3duKXsvL2ZyYW1l6YeM6Z2i5Lmf5omT5byA5LqG5LiA5Liq5ZGi44CCCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbGxlcnkubWluaW1pemUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2FsbGVyeUMucHJvdG90eXBlLm5hdmlnYXRlVG9JbWcodGFyZ2V0SW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2hFbGUodGFyZ2V0SW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiduYXZpZ2F0ZVRvSW1nJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdDpleGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzpkYXRhLmZyb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCcqJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VuZEZhaWwnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lU2VudERhdGE9ZnJhbWVTZW50U3VjY2Vzc0RhdGE7Ly9mcmFtZVNlbnREYXRh6YeN572u5Li65Y+R6YCB5oiQ5Yqf55qE5pWw5o2u44CCCiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndG9wV2luZG93VmFsaWRfZnJhbWUnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXNFdmVudD1kb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c0V2ZW50LmluaXRDdXN0b21FdmVudCgncHYtdG9wV2luZG93VmFsaWQnLGZhbHNlLGZhbHNlLGRhdGEudmFsaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXNFdmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICAvL+mhtemdouiEmuacrOeUqOadpei9rOWPkea2iOaBrwogICAgICAgIC8v5Y6f5ZugY2hyb21l55qEY29udGVudHNjcmlwdOaXoOazleiuv+mXrumdnuiHquW3seWklueahOWIq+eahOeql+WPo+OAgumDveS8mui/lOWbnnVuZGVmaW5lZO+8jOiHqueEtuS5n+aXoOazleWQkeWFtuS7lueahOeql+WPo+WPkemAgeS/oeaBryzov5nph4znlKhwYWdlc2NyaXB05YGa5Liq5Lit6Ze05Luj55CGCiAgICAgICAgLy/pgJrorq/pgLvovpEuLkHpobXpnaLnmoRjb250ZW50c2NyaXB05Y+R6YCB5YiwQemhtemdoueahHBhZ2VzY3JpcHTvvIxwYWdlc2NyaXB06L2s5Lqk57uZQumhtemdoueahGNvbnRlbnRzY3JpcHQKICAgICAgICB2YXIgbWVzc2FnZUlEPSdwdi0wLjUxMDY3OTU2NzAzMTI1OTgnOwoKICAgICAgICBmdW5jdGlvbiBhZGRQYWdlU2NyaXB0KCkgewoKICAgICAgICAgICAgdmFyIHBhZ2VTY3JpcHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAgICAgICAgIHBhZ2VTY3JpcHQuaWQgPSAncGljdmlld2VyLXBhZ2Utc2NyaXB0JzsKCiAgICAgICAgICAgIHZhciBwYWdlU2NyaXB0VGV4dD1mdW5jdGlvbihtZXNzYWdlSUQpewogICAgICAgICAgICAgICAgdmFyIGZyYW1lSUQ9TWF0aC5yYW5kb20oKTsKICAgICAgICAgICAgICAgIHZhciBmcmFtZXM9ewogICAgICAgICAgICAgICAgICAgIHRvcDp3aW5kb3cudG9wLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGE9ZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIGlmKCAhZGF0YSB8fCAhZGF0YS5tZXNzYWdlSUQgfHwgZGF0YS5tZXNzYWdlSUQgIT0gbWVzc2FnZUlEIClyZXR1cm47Ly/pgJrkv6FJROiupOivgQogICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2U9ZS5zb3VyY2U7CiAgICAgICAgICAgICAgICAgICAgaWYoc291cmNlPT09d2luZG93KXsvL+adpeiHqmNvbnRlbnRzY3JpcHQs5Y+R6YCB5Ye65Y67LOaIluiAheW5suWYm+OAggogICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnRvKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZnJvbT1mcmFtZUlEOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVzW2RhdGEudG9dLnBvc3RNZXNzYWdlKGRhdGEsJyonKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goZGF0YS5jb21tYW5kKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdnZXRJZnJhbWVPYmplY3QnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZyYW1lV2luZG93PWZyYW1lc1tkYXRhLndpbmRvd0lkXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlmcmFtZXM9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lmcmFtZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SWZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9aWZyYW1lcy5sZW5ndGgtMSA7IGk+PTAgOyBpLS0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1lPWlmcmFtZXNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpZnJhbWUuY29udGVudFdpbmRvdz09PWZyYW1lV2luZG93KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZnJhbWU9aWZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1c0V2ZW50PWRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXNFdmVudC5pbml0Q3VzdG9tRXZlbnQoJ3B2LWdldElmcmFtZU9iamVjdCcsZmFsc2UsZmFsc2UsdGFyZ2V0SWZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXNFdmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7Ly/mnaXoh6rliKvnmoTnqpflj6PnmoTvvIxjb250ZW50c2NyaXB05Y+v5Lul55u05o6l5o6l5pS277yM6L+Z6YeM5L+d5a2Y5LiL5p2l6Ieq55qE56qX5Y+j55qE5byV55SoCiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lc1tkYXRhLmZyb21dPXNvdXJjZTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSx0cnVlKQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcGFnZVNjcmlwdC50ZXh0Q29udGVudD0nKCcgKyBwYWdlU2NyaXB0VGV4dC50b1N0cmluZygpICsgJykoJysgSlNPTi5zdHJpbmdpZnkobWVzc2FnZUlEKSArJyknOwogICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHBhZ2VTY3JpcHQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xpa1RvT3BlbihkYXRhKXsKICAgICAgICAgICAgdmFyIHByZXZlbnREZWZhdWx0ID0gbWF0Y2hlZFJ1bGUuY2xpa1RvT3Blbi5wcmV2ZW50RGVmYXVsdDsKCiAgICAgICAgICAgIGZ1bmN0aW9uIG1vdXNlb3V0KCl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsbW91c2VvdXQsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsY2xpY2ssdHJ1ZSk7CiAgICAgICAgICAgICAgICBpZihkYXRhLmltZ1BBICYmIHByZXZlbnREZWZhdWx0KXsKICAgICAgICAgICAgICAgICAgICBkYXRhLmltZ1BBLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjbGlja0EsZmFsc2UpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGNsaWNrKGUpewogICAgICAgICAgICAgICAgaWYoZS5idXR0b24hPTApcmV0dXJuOwogICAgICAgICAgICAgICAgRmxvYXRCYXJDLnByb3RvdHlwZS5vcGVuLmNhbGwoewogICAgICAgICAgICAgICAgICAgIGRhdGE6ZGF0YSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZFJ1bGUuY2xpa1RvT3Blbi50eXBlKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGNsaWNrQShlKXsvL+mYu+atomHnmoTpu5jorqTooYzkuLoKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjbGljayx0cnVlKTsKCiAgICAgICAgICAgIGlmKGRhdGEuaW1nUEEgJiYgcHJldmVudERlZmF1bHQpewogICAgICAgICAgICAgICAgZGF0YS5pbWdQQS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY2xpY2tBLGZhbHNlKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsvL+eojeW+ruW7tuaXtuOAgumUmeW8gOeUseS6jmNzcyBob3Zlcuagt+W8j+WPkeeUn+eahG91dDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0Jyxtb3VzZW91dCx0cnVlKTsKICAgICAgICAgICAgfSwxMDApOwoKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBtb3VzZW91dCgpOwogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgLy/nm5HlkKwgbW91c2VvdmVyCiAgICAgICAgdmFyIGNhbmNsZVByZUNUTzsKICAgICAgICBmdW5jdGlvbiBnbG9iYWxNb3VzZW92ZXJIYW5kbGVyKGUpewoKICAgICAgICAgICAgaWYoZS5hbHRLZXkpcmV0dXJuOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKGUpOwogICAgICAgICAgICBpZihnYWxsZXJ5TW9kZSlyZXR1cm47Ly/lupPmqKHlvI/lhajlsY/kuK0uLi4uLi4KCiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDsKCiAgICAgICAgICAgIGlmICghdGFyZ2V0IHx8ICF0YXJnZXQuY2xhc3NMaXN0IHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3B2LXBpYy1pZ25vcmVkJykpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g5omp5bGV5qih5byP77yM5qOA5p+l5YmN6Z2i5LiA5Liq5piv5ZCm5Li6IGltZwogICAgICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lICE9ICdJTUcnICYmIG1hdGNoZWRSdWxlICYmIG1hdGNoZWRSdWxlLmV4dCkgewogICAgICAgICAgICAgICAgdmFyIF90eXBlID0gdHlwZW9mIG1hdGNoZWRSdWxlLmV4dDsKICAgICAgICAgICAgICAgIGlmIChfdHlwZSA9PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWF0Y2hlZFJ1bGUuZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZpb3VzJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZpb3VzLTInOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdHlwZSA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gbWF0Y2hlZFJ1bGUuZXh0KHRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChleCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9ySW5mbyhleCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldCkgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lICE9ICdJTUcnICYmIHR5cGVvZiB0YXJnZXQuY2xhc3NOYW1lID09PSAnc3RyaW5nJyAmJiB0YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoInB2LWZsb2F0LWJhciIpPT0tMSl7CiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0U3R5bGU9Z2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpOwogICAgICAgICAgICAgICAgaWYocHJlZnMuZmxvYXRCYXIubGlzdGVuQmcgJiYgdGFyZ2V0U3R5bGUuYmFja2dyb3VuZEltYWdlICYmIC9edXJsLy50ZXN0KHRhcmdldFN0eWxlLmJhY2tncm91bmRJbWFnZSkgJiYgdGFyZ2V0U3R5bGUuYmFja2dyb3VuZEltYWdlLmluZGV4T2YoImFib3V0OmJsYW5rIik9PS0xICYmIHRhcmdldFN0eWxlLndpZHRoLnJlcGxhY2UoInB4IiwiIik+cHJlZnMuZmxvYXRCYXIubWluU2l6ZUxpbWl0LncgJiYgdGFyZ2V0U3R5bGUuaGVpZ2h0LnJlcGxhY2UoInB4IiwiIik+cHJlZnMuZmxvYXRCYXIubWluU2l6ZUxpbWl0LmgpewogICAgICAgICAgICAgICAgICAgIHZhciBzcmM9dGFyZ2V0U3R5bGUuYmFja2dyb3VuZEltYWdlLnJlcGxhY2UoL3VybFwoWyInXSguKilbIiddXCkvLCIkMSIpLG5zcmM9c3JjLG5vQWN0dWFsPXRydWUsdHlwZT0ic2NhbGUiOwogICAgICAgICAgICAgICAgICAgIHZhciBpbWc9e3NyYzpzcmN9OwogICAgICAgICAgICAgICAgICAgIHRwcnVsZXMuX2ZpbmQoZnVuY3Rpb24ocnVsZSxpbmRleCxhcnJheSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5zcmM9cnVsZS5jYWxsKGltZyxpbWcsbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuc3JjKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJ0cFJ1bGUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vQWN0dWFsPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGVycil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9ySW5mbyhlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmM6IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgbm9BY3R1YWw6bm9BY3R1YWwsCiAgICAgICAgICAgICAgICAgICAgICAgIGltZzogdGFyZ2V0CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHRhcmdldC5jaGlsZHJlbi5sZW5ndGg8PTIgJiYgdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoImltZyIpLmxlbmd0aD09MSl7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PXRhcmdldC5jaGlsZHJlblswXTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHRhcmdldC5wYXJlbnROb2RlKXsKICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXQucGFyZW50Tm9kZS5ub2RlTmFtZT09J0lNRycpewogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9dGFyZ2V0LnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkucG9zaXRpb249PSJhYnNvbHV0ZSIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ0NoaWxkPXRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nQ2hpbGQubGVuZ3RoPT0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9aW1nQ2hpbGRbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghdGFyZ2V0IHx8ICFyZXN1bHQgJiYgdGFyZ2V0Lm5vZGVOYW1lICE9ICdJTUcnKSByZXR1cm47CgogICAgICAgICAgICBpZiAoIXJlc3VsdCkgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gZmluZFBpYyh0YXJnZXQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihyZXN1bHQpewogICAgICAgICAgICAgICAgaWYoIWZsb2F0QmFyKXsKICAgICAgICAgICAgICAgICAgICBmbG9hdEJhcj1uZXcgRmxvYXRCYXJDKCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYocmVzdWx0LnR5cGU9PSdydWxlJyAmJiBtYXRjaGVkUnVsZS5jbGlrVG9PcGVuICYmIG1hdGNoZWRSdWxlLmNsaWtUb09wZW4uZW5hYmxlZCl7CiAgICAgICAgICAgICAgICAgICAgaWYoY2FuY2xlUHJlQ1RPKXsvL+WPlua2iOS4iuasoeeahO+8jOmYsuatouS4gOasoeeCueWHu+aJk+W8gOWkmuW8oOWbvueJhwogICAgICAgICAgICAgICAgICAgICAgICBjYW5jbGVQcmVDVE8oKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNhbmNsZVByZUNUTz1jbGlrVG9PcGVuKHJlc3VsdCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZmxvYXRCYXIuc3RhcnQocmVzdWx0KTsvL+WHuueOsOaCrOa1ruW3peWFt+agjwogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaXNLZXlEb3duRWZmZWN0aXZlVGFyZ2V0KHRhcmdldCkgewogICAgICAgICAgICB2YXIgbG9jYWxOYW1lID0gdGFyZ2V0LmxvY2FsTmFtZTsKCiAgICAgICAgICAgIC8vIOehruS/neWFieagh+S4jeaYr+WumuS9jeWcqOaWh+Wtl+i+k+WFpeahhuaIlumAieaLqeahhgogICAgICAgICAgICBpZiAobG9jYWxOYW1lID09ICd0ZXh0YXJlYScgfHwgbG9jYWxOYW1lID09ICdpbnB1dCcgfHwgbG9jYWxOYW1lID09ICdzZWxlY3QnKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgLy8g6KeG6aKR5pKt5pS+5ZmoCiAgICAgICAgICAgIGlmIChsb2NhbE5hbWUgPT0gJ29iamVjdCcgfHwgbG9jYWxOYW1lID09ICdlbWJlZCcpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICAvLyDnmb7luqbotLTlkKflm57lpI3ovpPlhaXnmoTpl67popgKICAgICAgICAgICAgaWYgKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScpID09ICd0cnVlJykKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gb3BlbkdhbGxlcnkoKXsKICAgICAgICAgICAgaWYoIWdhbGxlcnkpewogICAgICAgICAgICAgICAgZ2FsbGVyeT1uZXcgR2FsbGVyeUMoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBnYWxsZXJ5LmRhdGE9W107CiAgICAgICAgICAgIHZhciBhbGxEYXRhPWdhbGxlcnkuZ2V0QWxsVmFsaWRJbWdzKCk7CiAgICAgICAgICAgIGlmKGFsbERhdGEubGVuZ3RoPDEpcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGdhbGxlcnkuZGF0YT1hbGxEYXRhOwogICAgICAgICAgICBnYWxsZXJ5LmxvYWQoZ2FsbGVyeS5kYXRhKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGtleWRvd24oZXZlbnQpIHsKICAgICAgICAgICAgdmFyIGtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQua2V5Q29kZSkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgaWYoZXZlbnQuY3RybEtleSAmJiBrZXk9PXByZWZzLmZsb2F0QmFyLmtleXNbJ2dhbGxlcnknXSl7CiAgICAgICAgICAgICAgICBvcGVuR2FsbGVyeSgpOwogICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgICAgIGlmIChmbG9hdEJhciAmJiBmbG9hdEJhci5zaG93biAmJiBpc0tleURvd25FZmZlY3RpdmVUYXJnZXQoZXZlbnQudGFyZ2V0KSkgewogICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHByZWZzLmZsb2F0QmFyLmtleXMpLnNvbWUoZnVuY3Rpb24oYWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gJ2VuYWJsZScpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSBwcmVmcy5mbG9hdEJhci5rZXlzW2FjdGlvbl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0QmFyLm9wZW4obnVsbCwgYWN0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbWF0Y2hlZFJ1bGUgPSBnZXRNYXRjaGVkUnVsZSgpOwoKICAgICAgICAvLyDmt7vliqDoh6rlrprkuYnmoLflvI8KICAgICAgICBpZiAobWF0Y2hlZFJ1bGUgJiYgbWF0Y2hlZFJ1bGUuY3NzKSB7CiAgICAgICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnOwogICAgICAgICAgICBzdHlsZS5pZCA9ICdnbS1waWN2aWV3ZXItc2l0ZS1zdHlsZSc7CiAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gbWF0Y2hlZFJ1bGUuY3NzOwogICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICB9CgogICAgICAgIE1QSVYubG9hZFJ1bGUoKTsKCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlLCB0cnVlKTsKCiAgICAgICAgYWRkUGFnZVNjcmlwdCgpOwoKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBnbG9iYWxNb3VzZW92ZXJIYW5kbGVyLCB0cnVlKTsKCiAgICAgICAgdmFyIGRlYnVnOyAgLy8g6LCD6K+V5Ye95pWwCgogICAgICAgIEdNX2NvbmZpZy5pbml0KHsKICAgICAgICAgICAgaWQ6ICdwdi1wcmVmcycsCiAgICAgICAgICAgIHRpdGxlOiBHTV9jb25maWcuY3JlYXRlKCdhJywgewogICAgICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8yNDIwNC1waWN2aWV3ZXItY2UnLAogICAgICAgICAgICAgICAgdGFyZ2V0OiAnX2JsYW5rJywKICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAnUGljdmlld2VyIENFKyAnK2kxOG4oImNvbmZpZyIpLAogICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oIm9wZW5Ib21lUGFnZSIpCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBpc1RhYnM6IHRydWUsCiAgICAgICAgICAgIHNraW46ICd0YWInLAogICAgICAgICAgICBmcmFtZVN0eWxlOiB7CiAgICAgICAgICAgICAgICB3aWR0aDogJzQ4MHB4JywKICAgICAgICAgICAgICAgIHpJbmRleDonMjE0NzQ4MzY0OCcsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNzczogWwogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyBpbnB1dFt0eXBlPSd0ZXh0J10geyB3aWR0aDogNTBweDsgfSAiLAogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyBpbnB1dFt0eXBlPSdudW1iZXInXSB7IHdpZHRoOiA1MHB4OyB9ICIsCiAgICAgICAgICAgICAgICAiI3B2LXByZWZzIC5pbmxpbmUgLmNvbmZpZ192YXIgeyBtYXJnaW4tbGVmdDogNnB4OyB9IiwKICAgICAgICAgICAgICAgICIjcHYtcHJlZnMgbGFiZWwuc2l6ZSB7IHdpZHRoOiAyMDVweDsgfSIsCiAgICAgICAgICAgICAgICAiI3B2LXByZWZzIHNwYW4uc2VwLXggeyBtYXJnaW4tbGVmdDogMHB4ICFpbXBvcnRhbnQ7IH0iLAogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyBsYWJlbC5zZXAteCB7IG1hcmdpbi1yaWdodDogNXB4OyB9IiwKICAgICAgICAgICAgICAgICIjcHYtcHJlZnMgbGFiZWwuZmxvYXRCYXIta2V5IHsgbWFyZ2luLWxlZnQ6IDIwcHg7IHdpZHRoOiAxMDBweDsgfSIsCiAgICAgICAgICAgICAgICAiI3B2LXByZWZzIGlucHV0LmNvbG9yIHsgd2lkdGg6IDEyMHB4OyB9IiwKICAgICAgICAgICAgICAgICIjcHYtcHJlZnMgaW5wdXQub3JkZXIgeyB3aWR0aDogMjUwcHg7IH0iLAogICAgICAgICAgICBdLmpvaW4oJ1xuJyksCiAgICAgICAgICAgIGZpZWxkczogewogICAgICAgICAgICAgICAgLy8g5rWu5Yqo5bel5YW35qCPCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIucG9zaXRpb24nOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oInBvc2l0aW9uIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAndG9wIGxlZnQnOiBpMThuKCJ0b3BMZWZ0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICd0b3AgcmlnaHQnOiBpMThuKCJ0b3BSaWdodCIpLAogICAgICAgICAgICAgICAgICAgICAgICAnYm90dG9tIHJpZ2h0JzogaTE4bigiYm90dG9tUmlnaHQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2JvdHRvbSBsZWZ0JzogaTE4bigiYm90dG9tTGVmdCIpLAogICAgICAgICAgICAgICAgICAgICAgICAndG9wIGNlbnRlcic6IGkxOG4oInRvcENlbnRlciIpLAogICAgICAgICAgICAgICAgICAgICAgICAnYm90dG9tIGNlbnRlcic6IGkxOG4oImJvdHRvbUNlbnRlciIpLAogICAgICAgICAgICAgICAgICAgICAgICAnaGlkZSc6IGkxOG4oImhpZGUiKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5wb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgICBzZWN0aW9uOiBbaTE4bigiZmxvYXRCYXIiKV0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLnNob3dEZWxheSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigic2hvd0RlbGF5IiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5zaG93RGVsYXksCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICcgJytpMThuKCJtcyIpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5oaWRlRGVsYXknOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImhpZGVEZWxheSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2hpZGVEZWxheScsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5oaWRlRGVsYXksCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICcgJytpMThuKCJtcyIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmZvcmNlU2hvdy5zaXplLncnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImZvcmNlU2hvdyIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NpemUnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIuZm9yY2VTaG93LnNpemUudywKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigiZm9yY2VTaG93VGlwIiksCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ3N0YXJ0JywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIuZm9yY2VTaG93LnNpemUuaCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJyB4ICcsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2VwLXgnLAogICAgICAgICAgICAgICAgICAgIGFmdGVyOiAnICcraTE4bigicHgiKSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmZvcmNlU2hvdy5zaXplLmgsCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ2VuZCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLm1pblNpemVMaW1pdC53JzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJtaW5TaXplTGltaXQiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW50JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzaXplJywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLm1pblNpemVMaW1pdC53LAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJtaW5TaXplTGltaXRUaXAiKSwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnc3RhcnQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5taW5TaXplTGltaXQuaCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJyB4ICcsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2VwLXgnLAogICAgICAgICAgICAgICAgICAgIGFmdGVyOiAnICcraTE4bigicHgiKSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLm1pblNpemVMaW1pdC5oLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdlbmQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5idXRvbk9yZGVyJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJidXRvbk9yZGVyIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ29yZGVyJywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmJ1dG9uT3JkZXIuam9pbignLCAnKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIubGlzdGVuQmcnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImxpc3RlbkJnIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmxpc3RlbkJnLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJsaXN0ZW5CZ1RpcCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgLy8g5oyJ6ZSuCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIua2V5cy5lbmFibGUnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImtleXNFbmFibGUiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIua2V5cy5lbmFibGUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIua2V5cy5hY3R1YWwnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImtleXNBY3R1YWwiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZmxvYXRCYXIta2V5JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmtleXMuYWN0dWFsLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJrZXlzQWN0dWFsVGlwIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIua2V5cy5zZWFyY2gnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImtleXNTZWFyY2giKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZmxvYXRCYXIta2V5JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmtleXMuc2VhcmNoLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJrZXlzU2VhcmNoVGlwIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIua2V5cy5jdXJyZW50JzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJrZXlzQ3VycmVudCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmbG9hdEJhci1rZXknLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIua2V5cy5jdXJyZW50LAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJrZXlzQ3VycmVudFRpcCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmtleXMubWFnbmlmaWVyJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJrZXlzTWFnbmlmaWVyIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Zsb2F0QmFyLWtleScsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5rZXlzLm1hZ25pZmllciwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigia2V5c01hZ25pZmllclRpcCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmtleXMuZ2FsbGVyeSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigia2V5c0dhbGxlcnkiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZmxvYXRCYXIta2V5JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmtleXMuZ2FsbGVyeSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigia2V5c0dhbGxlcnlUaXAiKQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAvLyDmlL7lpKfplZwKICAgICAgICAgICAgICAgICdtYWduaWZpZXIucmFkaXVzJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJtYWduaWZpZXJSYWRpdXMiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW50JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLm1hZ25pZmllci5yYWRpdXMsCiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbjogW2kxOG4oIm1hZ25pZmllciIpXSwKICAgICAgICAgICAgICAgICAgICBhZnRlcjogJyAnK2kxOG4oInB4IikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnbWFnbmlmaWVyLndoZWVsWm9vbS5lbmFibGVkJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJtYWduaWZpZXJXaGVlbFpvb21FbmFibGVkIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLm1hZ25pZmllci53aGVlbFpvb20uZW5hYmxlZCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnbWFnbmlmaWVyLndoZWVsWm9vbS5yYW5nZSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigibWFnbmlmaWVyV2hlZWxab29tUmFuZ2UiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dGFyZWEnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMubWFnbmlmaWVyLndoZWVsWm9vbS5yYW5nZS5qb2luKCcsICcpLAogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAvLyDlm77lupMKICAgICAgICAgICAgICAgICdnYWxsZXJ5LmZpdFRvU2NyZWVuJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5Rml0VG9TY3JlZW4iKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5maXRUb1NjcmVlbiwKICAgICAgICAgICAgICAgICAgICBzZWN0aW9uOiBbaTE4bigiZ2FsbGVyeSIpXSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigiZ2FsbGVyeUZpdFRvU2NyZWVuVGlwIiksCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ3N0YXJ0JywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5maXRUb1NjcmVlblNtYWxsJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5Rml0VG9TY3JlZW5TbWFsbCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmZpdFRvU2NyZWVuU21hbGwsCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ2VuZCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkuc2Nyb2xsRW5kVG9DaGFuZ2UnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LnNjcm9sbEVuZFRvQ2hhbmdlLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2VUaXAiKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LmV4cG9ydFR5cGUnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlFeHBvcnRUeXBlIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAnZ3JpZCc6IGkxOG4oImdyaWQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2dyaWRCaWcnOiBpMThuKCJncmlkQmlnIiksCiAgICAgICAgICAgICAgICAgICAgICAgICdsaXN0JzogaTE4bigibGlzdCIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuZXhwb3J0VHlwZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5sb2FkQWxsJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5TG9hZEFsbCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmxvYWRBbGwsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oImdhbGxlcnlMb2FkQWxsVGlwIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5zY2FsZVNtYWxsU2l6ZSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeVNjYWxlU21hbGxTaXplMSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5zY2FsZVNtYWxsU2l6ZSwKICAgICAgICAgICAgICAgICAgICBhZnRlcjogaTE4bigiZ2FsbGVyeVNjYWxlU21hbGxTaXplMiIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkuc2hvd1NtYWxsU2l6ZSc6ewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5U2hvd1NtYWxsU2l6ZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LnNob3dTbWFsbFNpemUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS50cmFuc2l0aW9uJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5VHJhbnNpdGlvbiIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LnRyYW5zaXRpb24KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5zaWRlYmFyUG9zaXRpb24nOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlTaWRlYmFyUG9zaXRpb24iKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICdib3R0b20nOiBpMThuKCJib3R0b20iKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ3JpZ2h0JzogaTE4bigicmlnaHQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBpMThuKCJsZWZ0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICd0b3AnOiBpMThuKCJ0b3AiKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LnNpZGViYXJQb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnc3RhcnQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LnNpZGViYXJTaXplJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5U2lkZWJhclNpemUiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW50JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuc2lkZWJhclNpemUsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oImdhbGxlcnlTaWRlYmFyU2l6ZVRpcCIpLAogICAgICAgICAgICAgICAgICAgIGFmdGVyOiAnICcraTE4bigicHgiKSwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnZW5kJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5tYXgnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlNYXgxIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5Lm1heCwKICAgICAgICAgICAgICAgICAgICBhZnRlcjogaTE4bigiZ2FsbGVyeU1heDIiKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LmF1dG9ab29tJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5QXV0b1pvb20iKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5hdXRvWm9vbSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigiZ2FsbGVyeUF1dG9ab29tVGlwIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5kZXNjcmlwdGlvbkxlbmd0aCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5kZXNjcmlwdGlvbkxlbmd0aCwKICAgICAgICAgICAgICAgICAgICBhZnRlcjogaTE4bigiZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMiIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkuYXV0b09wZW5TaXRlcyc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeUF1dG9PcGVuU2l0ZXMiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dGFyZWEnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5hdXRvT3BlblNpdGVzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkuZWRpdFNpdGUnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlFZGl0U2l0ZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ1BpeGxyJzogJ1BpeGxyJywKICAgICAgICAgICAgICAgICAgICAgICAgJ1Rvb2xwaWMnOiAnVG9vbHBpYycKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5lZGl0U2l0ZSwKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgLy8g5Zu+54mH56qX5Y+jCiAgICAgICAgICAgICAgICAnaW1nV2luZG93LmZpdFRvU2NyZWVuJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbWdXaW5kb3dGaXRUb1NjcmVlbiIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cuZml0VG9TY3JlZW4sCiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbjogW2kxOG4oImltZ1dpbmRvdyIpXSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigiaW1nV2luZG93Rml0VG9TY3JlZW5UaXAiKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnaW1nV2luZG93LmNsb3NlLmRlZmF1bHRUb29sJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbWdXaW5kb3dEZWZhdWx0VG9vbCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2hhbmQnOiBpMThuKCJoYW5kIiksCiAgICAgICAgICAgICAgICAgICAgICAgICdyb3RhdGUnOiBpMThuKCJyb3RhdGUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ3pvb20nOiBpMThuKCJ6b29tIiksCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmltZ1dpbmRvdy5jbG9zZS5kZWZhdWx0VG9vbCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnaW1nV2luZG93LmNsb3NlLmVzY0tleSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiaW1nV2luZG93RXNjS2V5IiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmltZ1dpbmRvdy5jbG9zZS5lc2NLZXksCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ3N0YXJ0JywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnaW1nV2luZG93LmNsb3NlLmRibENsaWNrSW1nV2luZG93JzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbWdXaW5kb3dEYmxDbGlja0ltZ1dpbmRvdyIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cuY2xvc2UuZGJsQ2xpY2tJbWdXaW5kb3csCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy5jbG9zZS5jbGlja091dHNpZGUnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImltZ1dpbmRvd0NsaWNrT3V0c2lkZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJyc6IGkxOG4oIm5vbmUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogaTE4bigiY2xpY2siKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2RibGNsaWNrJzogaTE4bigiZGJsY2xpY2siKSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93LmNsb3NlLmNsaWNrT3V0c2lkZSwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnZW5kJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnaW1nV2luZG93Lm92ZXJsYXllci5zaG93bic6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiaW1nV2luZG93T3ZlcmxheWVyU2hvd24iKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93Lm92ZXJsYXllci5zaG93biwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnc3RhcnQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdpbWdXaW5kb3cub3ZlcmxheWVyLmNvbG9yJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbWdXaW5kb3dPdmVybGF5ZXJDb2xvciIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdjb2xvcicsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cub3ZlcmxheWVyLmNvbG9yLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdlbmQnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy5zaGlmdFJvdGF0ZVN0ZXAnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDEiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW50JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmltZ1dpbmRvdy5zaGlmdFJvdGF0ZVN0ZXAsCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6IGkxOG4oImltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDIiKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdpbWdXaW5kb3cuem9vbS5tb3VzZVdoZWVsWm9vbSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiaW1nV2luZG93TW91c2VXaGVlbFpvb20iKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93Lnpvb20ubW91c2VXaGVlbFpvb20sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy56b29tLnJhbmdlJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbWdXaW5kb3dab29tUmFuZ2UiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dGFyZWEnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93Lnpvb20ucmFuZ2Uuam9pbignLCAnKSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigiaW1nV2luZG93Wm9vbVJhbmdlVGlwIiksCiAgICAgICAgICAgICAgICAgICAgYXR0cjogewogICAgICAgICAgICAgICAgICAgICAgICAic3BlbGxjaGVjayI6ICJmYWxzZSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIC8vIOWFtuWugwogICAgICAgICAgICAgICAgJ3dhaXRJbWdMb2FkJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJ3YWl0SW1nTG9hZCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy53YWl0SW1nTG9hZCwKICAgICAgICAgICAgICAgICAgICBzZWN0aW9uOiBbaTE4bigib3RoZXJzIildLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJ3YWl0SW1nTG9hZFRpcCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2RlYnVnJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJkZWJ1ZyIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5kZWJ1ZwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmaXJzdEVuZ2luZSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZmlyc3RFbmdpbmUiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJUaW5leWUiOiJUaW5leWUiLAogICAgICAgICAgICAgICAgICAgICAgICAiR29vZ2xlIjoiR29vZ2xlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIkJhaWR1IjoiQmFpZHUiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZpcnN0RW5naW5lLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXZlbnRzOiB7CiAgICAgICAgICAgICAgICBvcGVuOiBmdW5jdGlvbihkb2MsIHdpbiwgZnJhbWUpIHsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzYXZlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBsb2FkUHJlZnMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwoKCiAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgnUGljdmlld2VyIENFKyAnK2kxOG4oImNvbmZpZyIpLCBvcGVuUHJlZnMpOwoKICAgICAgICBsb2FkUHJlZnMoKTsKCiAgICAgICAgaWYocHJlZnMuZ2FsbGVyeS5hdXRvT3BlblNpdGVzICYmIG5ldyBSZWdFeHAocHJlZnMuZ2FsbGVyeS5hdXRvT3BlblNpdGVzKS50ZXN0KGxvY2F0aW9uLmhyZWYpKXsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe29wZW5HYWxsZXJ5KCk7fSwyMDAwKTsKICAgICAgICB9CgogICAgICAgIC8vIOazqOWGjOaMiemUrgogICAgICAgIGlmIChwcmVmcy5mbG9hdEJhci5rZXlzLmVuYWJsZSkgewogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5ZG93biwgZmFsc2UpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gb3BlblByZWZzKCkgewogICAgICAgICAgICBHTV9jb25maWcub3BlbigpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbG9hZFByZWZzKCkgewogICAgICAgICAgICAvLyDmoLnmja4gR01fY29uZmlnIOeahCBrZXkg6L295YWl6K6+572u5YiwIHByZWZzCiAgICAgICAgICAgIE9iamVjdC5rZXlzKEdNX2NvbmZpZy5maWVsZHMpLmZvckVhY2goZnVuY3Rpb24oa2V5U3RyKSB7CiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IGtleVN0ci5zcGxpdCgnLicpOwogICAgICAgICAgICAgICAgdmFyIGxhc3RLZXkgPSBrZXlzLnBvcCgpOwoKICAgICAgICAgICAgICAgIHZhciBsYXN0UHJlZiA9IGtleXMucmVkdWNlKGZ1bmN0aW9uKHByZXZpb3VzVmFsdWUsIGN1cktleSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1ZhbHVlW2N1cktleV07CiAgICAgICAgICAgICAgICB9LCBwcmVmcykgfHwgcHJlZnM7CgogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gR01fY29uZmlnLmdldChrZXlTdHIpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICAgIC8vIOeJueauiueahAogICAgICAgICAgICAgICAgICAgIGlmIChrZXlTdHIgPT0gJ21hZ25pZmllci53aGVlbFpvb20ucmFuZ2UnIHx8IGtleVN0ciA9PSAnaW1nV2luZG93Lnpvb20ucmFuZ2UnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQcmVmW2xhc3RLZXldID0gdmFsdWUuc3BsaXQoL1ss77yMXVxzKi8pLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBwYXJzZUZsb2F0KHMpfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGtleVN0ciA9PSAnZmxvYXRCYXIuYnV0b25PcmRlcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFByZWZbbGFzdEtleV0gPSB2YWx1ZS5yZXBsYWNlKC9eXHMqfFxzKiQvZywiIikuc3BsaXQoL1xzKlss77yMXVxzKi8pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQcmVmW2xhc3RLZXldID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGRlYnVnID0gcHJlZnMuZGVidWcgPyBjb25zb2xlLmRlYnVnLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbigpIHt9OwogICAgICAgIH0KCiAgICB9OwoKICAgIGZ1bmN0aW9uIGluaXQyKCl7CiAgICAgICAgaW5pdCh0b3BPYmplY3Qsd2luZG93LGRvY3VtZW50LGFycmF5Rm4sZW52aXIsc3RvcmFnZSx1bnNhZmVXaW5kb3cpOwogICAgfTsKCgogICAgLy/lpKfoh7Tmo4DmtYvov5DooYznjq/looMKICAgIHZhciBlbnZpcj17CiAgICAgICAgaWU6dHlwZW9mIGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PSAnbnVtYmVyJywKICAgICAgICBmaXJlZm94OnR5cGVvZiBYUENOYXRpdmVXcmFwcGVyID09ICdmdW5jdGlvbicsCiAgICAgICAgb3BlcmE6ISF3aW5kb3cub3BlcmEsCiAgICAgICAgY2hyb21lOiEhd2luZG93LmNocm9tZSwKICAgIH07CgogICAgLy9pZeeahOivne+8jOS4jeaUr+aMgSA8IGllOeeahOeJiOacrAogICAgaWYoZW52aXIuaWUgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDwgOSl7CiAgICAgICAgcmV0dXJuOwogICAgfTsKCgogICAgdmFyIGFycmF5Rm49KGZ1bmN0aW9uKCl7CiAgICAgICAgLy9BcnJheeeahOafkOS6m+aWueazleWvueaJgOacieeahOexu+aVsOe7hOmDveacieaViO+8jOavlOWmgkhUTUxDb2xsZWN0aW9uLE5vZGVMaXN0LERPTVN0cmluZ0xpc3QuLi4uLgoKICAgICAgICAvL+a3u+WKoOS4gOS4quW9k+WHveaVsOi/lOWbnnRydWXml7bvvIzov5Tlm55bYXJyYXlbaW5kZXhdLGluZGV4Xe+8jOW5tuS4lOi3s+WHuuW+queOr+eahOaWueazlQogICAgICAgIC8v57G75Ly85YGa5YiwIGZvciDlvqrnjq/vvIzlnKjmu6HotrPmnaHku7bnmoTml7blgJnnm7TmjqVicmVha+i3s+WHuueahOaViOaenOOAggogICAgICAgIGlmKHR5cGVvZiBBcnJheS5wcm90b3R5cGVbJ19maW5kJ10hPSdmdW5jdGlvbicpewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCdfZmluZCcsewogICAgICAgICAgICAgICAgdmFsdWU6ZnVuY3Rpb24oY2FsbGJhY2sgLCB0aGlzQXJnKXsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcyA9PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvciggInRoaXMgaXMgbnVsbCBvciBub3QgZGVmaW5lZCIgKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCBjYWxsYmFjayArICIgaXMgbm90IGEgZnVuY3Rpb24iICk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBsID0gdGhpcy5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBoYXNPd25Qcm9wZXJ0eT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5CiAgICAgICAgICAgICAgICAgICAgOwoKCiAgICAgICAgICAgICAgICAgICAgd2hpbGUoaTxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLGkpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrLmNhbGwoIHRoaXNBcmcsIHZhbHVlLCBpLCB0aGlzICk9PT10cnVlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3ZhbHVlLGksdGhpc107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB3cml0YWJsZTp0cnVlLAogICAgICAgICAgICAgICAgZW51bWVyYWJsZTpmYWxzZSwvL+S4juWOn+eUn+aWueazleS4gOagt+S4jeWPr+aemuS4vu+8jOe7tOaKpOe9kemhteWSjOiwkOOAguOAguOAggogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOnRydWUsCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHZhciBhcnJheVByb3RvPUFycmF5LnByb3RvdHlwZTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBfZmluZDphcnJheVByb3RvLl9maW5kLAogICAgICAgICAgICBzbGljZTphcnJheVByb3RvLnNsaWNlLAogICAgICAgICAgICBmb3JFYWNoOmFycmF5UHJvdG8uZm9yRWFjaCwKICAgICAgICAgICAgc29tZTphcnJheVByb3RvLnNvbWUsCiAgICAgICAgICAgIGV2ZXJ5OmFycmF5UHJvdG8uZXZlcnksCiAgICAgICAgICAgIG1hcDphcnJheVByb3RvLm1hcCwKICAgICAgICAgICAgZmlsdGVyOmFycmF5UHJvdG8uZmlsdGVyLAogICAgICAgICAgICBpbmRleE9mOmFycmF5UHJvdG8uaW5kZXhPZiwKICAgICAgICAgICAgbGFzdEluZGV4T2Y6YXJyYXlQcm90by5sYXN0SW5kZXhPZiwKICAgICAgICB9OwoKICAgIH0pKCk7CgoKICAgIHZhciBzdG9yYWdlPXsKICAgICAgICBzdXBwb3J0R006IHR5cGVvZiBHTV9nZXRWYWx1ZT09J2Z1bmN0aW9uJyAmJiB0eXBlb2YgR01fZ2V0VmFsdWUoJ2EnLCdiJykhPSd1bmRlZmluZWQnLC8vY2hyb21l55qEZ23lh73mlbDlvI/nqbrlh73mlbAKICAgICAgICBteEFwcFN0b3JhZ2U6KGZ1bmN0aW9uKCl7Ly/lgrLmuLjmianlsZXlgqjlrZjmjqXlj6MKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5leHRlcm5hbC5teEdldFJ1bnRpbWUoKS5zdG9yYWdlOwogICAgICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIH07CiAgICAgICAgfSkoKSwKICAgICAgICBvcGVyYVVKU1N0b3JhZ2U6KGZ1bmN0aW9uKCl7Ly9vcGVyYSB1c2VyanPlhajlsYDlrZjlgqjmjqXlj6MKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5vcGVyYS5zY3JpcHRTdG9yYWdlOwogICAgICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIH07CiAgICAgICAgfSkoKSwKICAgICAgICBzZXRJdGVtOmZ1bmN0aW9uKGtleSx2YWx1ZSl7CiAgICAgICAgICAgIGlmKHRoaXMub3BlcmFVSlNTdG9yYWdlKXsKICAgICAgICAgICAgICAgIHRoaXMub3BlcmFVSlNTdG9yYWdlLnNldEl0ZW0oa2V5LHZhbHVlKTsKICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5teEFwcFN0b3JhZ2UpewogICAgICAgICAgICAgICAgdGhpcy5teEFwcFN0b3JhZ2Uuc2V0Q29uZmlnKGtleSx2YWx1ZSk7CiAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMuc3VwcG9ydEdNKXsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKGtleSx2YWx1ZSk7CiAgICAgICAgICAgIH1lbHNlIGlmKHdpbmRvdy5sb2NhbFN0b3JhZ2UpewogICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSx2YWx1ZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBnZXRJdGVtOmZ1bmN0aW9uKGtleSl7CiAgICAgICAgICAgIHZhciB2YWx1ZTsKICAgICAgICAgICAgaWYodGhpcy5vcGVyYVVKU1N0b3JhZ2UpewogICAgICAgICAgICAgICAgdmFsdWU9dGhpcy5vcGVyYVVKU1N0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgICAgICAgICB9ZWxzZSBpZih0aGlzLm14QXBwU3RvcmFnZSl7CiAgICAgICAgICAgICAgICB2YWx1ZT10aGlzLm14QXBwU3RvcmFnZS5nZXRDb25maWcoa2V5KTsKICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5zdXBwb3J0R00pewogICAgICAgICAgICAgICAgdmFsdWU9R01fZ2V0VmFsdWUoa2V5KTsKICAgICAgICAgICAgfWVsc2UgaWYod2luZG93LmxvY2FsU3RvcmFnZSl7CiAgICAgICAgICAgICAgICB2YWx1ZT13aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgIH0sCiAgICB9OwoKICAgIGZ1bmN0aW9uIGdldFVybCh1cmwsIGNhbGxiYWNrLCBvbkVycm9yKXsKICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICBvbmxvYWQ6IGNhbGxiYWNrLAogICAgICAgICAgICBvbmVycm9yOiBvbkVycm9yCiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0U2VhcmNoU3RhdGUod29yZHMsaW1nQ29uKXsKICAgICAgICBpZih3b3Jkcyljb25zb2xlLmluZm8od29yZHMpOwogICAgICAgIHZhciBzZWFyY2hTdGF0ZSA9IChpbWdDb24/aW1nQ29uOmRvY3VtZW50KS5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXNlYXJjaC1zdGF0ZScpOwogICAgICAgIGlmKHNlYXJjaFN0YXRlKXNlYXJjaFN0YXRlLmlubmVySFRNTD13b3JkczsKICAgIH0KCiAgICB2YXIgc2VhcmNoU29ydD1bIlRpbmV5ZSIsIkdvb2dsZSIsIkJhaWR1Il07CiAgICBmdW5jdGlvbiBzb3J0U2VhcmNoKCl7CiAgICAgICAgZm9yKHZhciBpPTA7aTxzZWFyY2hTb3J0Lmxlbmd0aDtpKyspewogICAgICAgICAgICBpZihzZWFyY2hTb3J0W2ldPT1wcmVmcy5maXJzdEVuZ2luZSl7CiAgICAgICAgICAgICAgICBzZWFyY2hTb3J0LnNwbGljZShpLDEpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2VhcmNoU29ydC51bnNoaWZ0KHByZWZzLmZpcnN0RW5naW5lKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWFyY2hJbWdCeUltZyhpbWdTcmMsIGltZ0NvbiwgY2FsbEJhY2ssIG9uRXJyb3IsIG5vbmVSZXN1bHQsIHNlYXJjaEZyb20pewogICAgICAgIGxldCBzcmNzPVtdOwogICAgICAgIHZhciBzZWFyY2hCYWlkdT1mdW5jdGlvbigpewogICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShpMThuKCJiZWdpblNlYXJjaEltZyIsIueZvuW6piIpLGltZ0Nvbik7CiAgICAgICAgICAgIGdldFVybCgiaHR0cDovL2ltYWdlLmJhaWR1LmNvbS9uL3NhbWU/cXVlcnlJbWFnZVVybD0iK2VuY29kZVVSSUNvbXBvbmVudChpbWdTcmMpKyImaXNndWVzc3dvcmQ9MSZybj0zMCZmcj1wYyZwbj0wJnNvcnQ9c2l6ZSIsIGZ1bmN0aW9uKGQpewogICAgICAgICAgICAgICAgbGV0IGJhaWR1SnNvbjsKICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICBiYWlkdUpzb249SlNPTi5wYXJzZShkLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoaTE4bigiZmluZE5vUGljIiksaW1nQ29uKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlYXJjaFN0YXRlKCIiLGltZ0Nvbik7CiAgICAgICAgICAgICAgICAgICAgfSwyMDAwKTsKICAgICAgICAgICAgICAgICAgICBzZWFyY2hOZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoYmFpZHVKc29uLmRhdGFbMF0pewogICAgICAgICAgICAgICAgICAgIHNyY3M9W107CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpbWdEYXRhIG9mIGJhaWR1SnNvbi5kYXRhKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Jjcy5sZW5ndGg+MilicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgc3Jjcy5wdXNoKGltZ0RhdGEub2JqVVJMKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoaTE4bigiZmluZE92ZXJCZWdpbkxvYWQiLFsi55m+5bqmIixzcmNzLmxlbmd0aF0pLGltZ0Nvbik7CiAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2tGdW4oc3Jjcyk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBzZWFyY2hOZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBvbkVycm9yKTsKICAgICAgICB9OwogICAgICAgIHZhciBzZWFyY2hHb29nbGU9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoaTE4bigiYmVnaW5TZWFyY2hJbWciLCJHb29nbGUiKSxpbWdDb24pOwogICAgICAgICAgICBnZXRVcmwoImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoYnlpbWFnZT9zYWZlPW9mZiZpbWFnZV91cmw9IitlbmNvZGVVUklDb21wb25lbnQoaW1nU3JjKSwgZnVuY3Rpb24oZCl7CiAgICAgICAgICAgICAgICBsZXQgZ29vZ2xlSHRtbD1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoJycpOwogICAgICAgICAgICAgICAgZ29vZ2xlSHRtbC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gZC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICBsZXQgc2l6ZVVybD1nb29nbGVIdG1sLnF1ZXJ5U2VsZWN0b3IoImRpdi5jYXJkLXNlY3Rpb24+ZGl2PmRpdj5zcGFuLmdsPmEiKTsKICAgICAgICAgICAgICAgIGlmKHNpemVVcmwpewogICAgICAgICAgICAgICAgICAgIGdldFVybCgiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbSIrc2l6ZVVybC5nZXRBdHRyaWJ1dGUoImhyZWYiKSwgZnVuY3Rpb24oZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZUh0bWwuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IGQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1ncz1nb29nbGVIdG1sLnF1ZXJ5U2VsZWN0b3JBbGwoImRpdi5yZ19tZXRhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGltZ3MubGVuZ3RoPT0wKXtzZWFyY2hOZXh0KCk7cmV0dXJuO30KICAgICAgICAgICAgICAgICAgICAgICAgc3Jjcz1bXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxpbWdzLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Jjcy5sZW5ndGg+MilicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBqc29uRGF0YT1KU09OLnBhcnNlKGltZ3NbaV0uaW5uZXJIVE1MKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY3MucHVzaChqc29uRGF0YS5vdSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoaTE4bigiZmluZE92ZXJCZWdpbkxvYWQiLFsiR29vZ2xlIixzcmNzLmxlbmd0aF0pLGltZ0Nvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxCYWNrRnVuKHNyY3MpOwogICAgICAgICAgICAgICAgICAgIH0sIG9uRXJyb3IpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoTmV4dCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBvbkVycm9yKTsKICAgICAgICB9OwogICAgICAgIHZhciBzZWFyY2hUaW5leWU9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoaTE4bigiYmVnaW5TZWFyY2hJbWciLCJUaW5leWUiKSxpbWdDb24pOwogICAgICAgICAgICBnZXRVcmwoImh0dHBzOi8vd3d3LnRpbmV5ZS5jb20vc2VhcmNoP3VybD0iK2VuY29kZVVSSUNvbXBvbmVudChpbWdTcmMpKyImc29ydD1zaXplIiwgZnVuY3Rpb24oZCl7CiAgICAgICAgICAgICAgICBsZXQgdGluZXllSHRtbD1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoJycpOwogICAgICAgICAgICAgICAgdGluZXllSHRtbC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gZC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICBsZXQgc2VhcmNoSW1nPXRpbmV5ZUh0bWwucXVlcnlTZWxlY3RvckFsbCgiLm1hdGNoLWRldGFpbHM+ZGl2Lm1hdGNoOmZpcnN0LW9mLXR5cGU+cC5pbWFnZS1saW5rOmZpcnN0LW9mLXR5cGU+YSIpOwogICAgICAgICAgICAgICAgaWYoc2VhcmNoSW1nLmxlbmd0aD4wKXsKICAgICAgICAgICAgICAgICAgICBzcmNzPVtdOwogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8c2VhcmNoSW1nLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICBpZihzcmNzLmxlbmd0aD4yKWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBzcmNzLnB1c2goc2VhcmNoSW1nW2ldLmhyZWYpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShpMThuKCJmaW5kT3ZlckJlZ2luTG9hZCIsWyJUaW5leWUiLHNyY3MubGVuZ3RoXSksaW1nQ29uKTsKICAgICAgICAgICAgICAgICAgICBjYWxsQmFja0Z1bihzcmNzKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHNlYXJjaE5leHQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgb25FcnJvcik7CiAgICAgICAgfTsKICAgICAgICB2YXIgc2VhcmNoTmV4dD1mdW5jdGlvbigpewogICAgICAgICAgICBzZWFyY2hGcm9tKys7CiAgICAgICAgICAgIGlmKHNlYXJjaEZyb208PXNlYXJjaFNvcnQubGVuZ3RoKXN3aXRjaFNlYXJjaCgpOwogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgaWYobm9uZVJlc3VsdClub25lUmVzdWx0KCk7CiAgICAgICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShpMThuKCJmaW5kTm9QaWMiKSxpbWdDb24pOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHNldFNlYXJjaFN0YXRlKCIiLGltZ0Nvbik7CiAgICAgICAgICAgICAgICB9LDIwMDApOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB2YXIgY2FsbEJhY2tGdW49ZnVuY3Rpb24oc3Jjcyl7CiAgICAgICAgICAgIGNhbGxCYWNrKHNyY3MsIHNlYXJjaEZyb20pOwogICAgICAgIH07CiAgICAgICAgaWYoIXNlYXJjaEZyb20pc2VhcmNoRnJvbT0xOwogICAgICAgIHZhciBzd2l0Y2hTZWFyY2g9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgc3dpdGNoKHNlYXJjaFNvcnRbc2VhcmNoRnJvbS0xXSl7CiAgICAgICAgICAgICAgICBjYXNlICJCYWlkdSI6CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoQmFpZHUoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgIkdvb2dsZSI6CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoR29vZ2xlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICJUaW5leWUiOgogICAgICAgICAgICAgICAgICAgIHNlYXJjaFRpbmV5ZSgpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBzZWFyY2hUaW5leWUoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgc3dpdGNoU2VhcmNoKCk7CiAgICB9CgogICAgaW5pdDIoKTsKCn0pKHRoaXMsd2luZG93LGRvY3VtZW50LCh0eXBlb2YgdW5zYWZlV2luZG93PT0ndW5kZWZpbmVkJz8gd2luZG93IDogdW5zYWZlV2luZG93KSk7"},{"name":"Userscript+ : Show Site All UserJS","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":["http://www.dev/Show-Site-All-UserJS/ui.html"],"orig_includes":["*"],"orig_matches":[],"orig_noframes":true,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1530109317244},"enabled":true,"position":7,"file_url":"https://greasyfork.org/scripts/24508-userscript-show-site-all-userjs/code/Userscript+%20:%20Show%20Site%20All%20UserJS.user.js","uuid":"df644cd5-9d20-41a2-8503-43863a75b4f7","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBVc2Vyc2NyaXB0KyA6IFNob3cgU2l0ZSBBbGwgVXNlckpTCi8vIEBuYW1lOnpoICAgICAgVXNlcnNjcmlwdCsgOiDmmL7npLrlvZPliY3nvZHnq5nmiYDmnInlj6/nlKjnmoRVc2VySlPohJrmnKwgSmFlZ2VyCi8vIEBuYW1lOnpoLUNOICAgVXNlcnNjcmlwdCsgOiDmmL7npLrlvZPliY3nvZHnq5nmiYDmnInlj6/nlKjnmoRVc2VySlPohJrmnKwgSmFlZ2VyCi8vIEBuYW1lOnpoLVRXICAgVXNlcnNjcmlwdCsgOiDpoa/npLrnlbbliY3ntrLnq5nmiYDmnInlj6/nlKjnmoRVc2VySlPohbPmnKwgSmFlZ2VyCi8vIEBuYW1lOmphICAgVXNlcnNjcmlwdCAr77ya54++5Zyo44Gu44K144Kk44OI44Gu5Yip55So5Y+v6IO944Gq44GZ44G544Gm44GuVXNlckpT44K544Kv44Oq44OX44OI44KS6KGo56S644GZ44KLSmFlZ2VyCi8vIEBuYW1lOnJ1LVJVICAgVXNlcnNjcmlwdCsgOiDQn9C+0LrQsNC30LDRgtGMINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQuNC1INGB0LrRgNC40L/RgtGLIChVc2VySlMpINC00LvRjyDRgdCw0LnRgtCwLiBKYWVnZXIKLy8gQG5hbWU6cnUgICBVc2Vyc2NyaXB0KyA6INCf0L7QutCw0LfQsNGC0Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GM0YHQutC40LUg0YHQutGA0LjQv9GC0YsgKFVzZXJKUykg0LTQu9GPINGB0LDQudGC0LAuIEphZWdlcgovLyBAbmFtZXNwYWNlICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9qYWUtamFlL1VzZXJzY3JpcHQtUGx1cwovLyBAdmVyc2lvbiAgICAgIDIuMy4xCi8vIEBkZXNjcmlwdGlvbiAgICAgICAgIFNob3cgY3VycmVudCBzaXRlIGFsbCBVc2VySlPvvIxUaGUgZWFzaWVyIHdheSB0byBpbnN0YWxsIFVzZXJKcyBmb3IgVGFtcGVybW9ua2V5LgovLyBAZGVzY3JpcHRpb246emggICAgICDmmL7npLrlvZPliY3nvZHnq5nnmoTmiYDmnInlj6/nlKhVc2VySlMoVGFtcGVybW9ua2V5KeiEmuacrCzkuqTmtYFRUee+pDoxMDQyNjczODMKLy8gQGRlc2NyaXB0aW9uOnpoLUNOICAg5pi+56S65b2T5YmN572R56uZ55qE5omA5pyJ5Y+v55SoVXNlckpTKFRhbXBlcm1vbmtleSnohJrmnKws5Lqk5rWBUVHnvqQ6MTA0MjY3MzgzCi8vIEBkZXNjcmlwdGlvbjp6aC1UVyAgIOmhr+ekuueVtuWJjee2suermeeahOaJgOacieWPr+eUqFVzZXJKUyhUYW1wZXJtb25rZXkp6IWz5pysLOS6pOa1gVFR576kOjEwNDI2NzM4MwovLyBAZGVzY3JpcHRpb246amEgICDnj77lnKjjga7jgrXjgqTjg4jjgafliKnnlKjlj6/og73jgarjgZnjgbnjgabjga5Vc2VySlPvvIhUYW1wZXJtb25rZXnvvInjgrnjgq/jg6rjg5fjg4jjgpLooajnpLrjgZfjgb7jgZnjgIIKLy8gQGRlc2NyaXB0aW9uOnJ1LVJVICAg0J/QvtC60LDQt9GL0LLQsNC10YIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GM0YHQutC40LUg0YHQutGA0LjQv9GC0YsgKFVzZXJKUykg0LTQu9GPINGB0LDQudGC0LAuINCb0LXQs9C60LjQuSDRgdC/0L7RgdC+0LEg0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GM0YHQutC40LUg0YHQutGA0LjQv9GC0Ysg0LTQu9GPIFRhbXBlcm1vbmtleS4KLy8gQGRlc2NyaXB0aW9uOnJ1ICAg0J/QvtC60LDQt9GL0LLQsNC10YIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GM0YHQutC40LUg0YHQutGA0LjQv9GC0YsgKFVzZXJKUykg0LTQu9GPINGB0LDQudGC0LAuINCb0LXQs9C60LjQuSDRgdC/0L7RgdC+0LEg0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GM0YHQutC40LUg0YHQutGA0LjQv9GC0Ysg0LTQu9GPIFRhbXBlcm1vbmtleS4KLy8gQGF1dGhvciAgICAgICBKYWVnZXIgPEphZWdlckNvZGVAZ21haWwuY29tPgovLyBAaWNvbiAgICAgICAgIGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBWUFBQUFmOC85aEFBQUFCbUpMUjBRQS93RC9BUCtndmFlVEFBQUFDWEJJV1hNQUFBc1RBQUFMRXdFQW1wd1lBQUFBQjNSSlRVVUgzZ2dFQkNRSE0zZlhzQUFBQVZkSlJFRlVPTXVka3oycXdrQVVoYy9nb0JhR0pCZ1V0QkNaeWowSUxrcHdBVzdCd3M0eU8zQUhMaUN0RUZEOEtWUkVrb2lGeFp6WDVBMktHZk40RjA0ek1OK2NlKzVjNExNVWdEbUFOWUJucm5WK3BsQlNpK0Z3eUhxOVRnQTJMUXB2Q2lFaUFCd01CdHp2OTVSU2ZvTkVIeThEWUJ6SHJOVnFWRXI5QldLY3FORm94RjZ2eDNhN3pjMW1ZeUM3M2E0TW9nQmc3dnMreitjek81ME9XNjBXdDlzdEs1VUtwOU1wajhjanE5V3FEVEJIbmpBZHh6R1FaclBKdytIQTMxb3VsemJBV2dMb0EwQ1daVkJLSVk1anpHWXpkTHRkRTlEbGNyRk5yWTk4em9icU9BNlRKS0hXMmpnNG5VNXNOQnBGRHA2bWhWZTVyc3ZWYXNVd0RIbTlYcW0xNXUxMm8rLzdIeTBnRDhLYXRPZDV2Ti92MUZvelRWTjZua2NoeEZ1STZoc0FBSU1nNE9QeE1KQ1hkdFRiUjdKSkNNRWdDSmhsR1VseVBCNFhmdW1veklucnVweE1KcFJTUnRabEtvTllsK20vNi93RHVXQWp0UGZzUXV3QUFBQUFTVVZPUks1Q1lJST0KLy8gQGluY2x1ZGUgICAgICAgICoKLy8gQGV4Y2x1ZGUgICAgICBodHRwOi8vd3d3LmRldi9TaG93LVNpdGUtQWxsLVVzZXJKUy91aS5odG1sCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzIzNDE5LWwtanMvY29kZS9sanMuanMKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjM0MjAtdXNlcmpzLWJhc2UtanMvY29kZS91c2VyanMtYmFzZWpzLmpzCi8vIEByZXNvdXJjZSAgICAgdWkgICAgIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYWUtamFlL1Nob3ctU2l0ZS1BbGwtVXNlckpTL21hc3Rlci9kaXN0L3VpLmh0bWw/Xz0xNTI5MjA2Mzc0MDQwCi8vIEByZXNvdXJjZSAgICAgdWlKcyAgIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYWUtamFlL1Nob3ctU2l0ZS1BbGwtVXNlckpTL21hc3Rlci9kaXN0L3VpLmpzP189MTUyOTIwNjM3NDA0MAovLyBAcmVzb3VyY2UgICAgIGNvdW50ICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvYnktc2l0ZS5qc29uCi8vIEBncmFudCAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICBHTV9nZXRSZXNvdXJjZVRleHQKLy8gQGdyYW50ICAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBub2ZyYW1lcwovLyBAY29ubmVjdCAgICAgY2RuLmJvb3Rjc3MuY29tCi8vIEBjb25uZWN0ICAgICByYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tCi8vIEBjb25uZWN0ICAgICBnaXN0LmdpdGh1YnVzZXJjb250ZW50LmNvbQovLyBAY29ubmVjdCAgICAgZ3JlYXN5Zm9yay5vcmcKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LWVuZAovLyA9PS9Vc2VyU2NyaXB0PT0KCnVuc2FmZVdpbmRvdy5HbUFqYXggPSBHTV94bWxodHRwUmVxdWVzdDsKCihmdW5jdGlvbigpIHsKCiAgICAndXNlIHN0cmljdCc7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIEZldGNoVXNlcmpzID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRmV0Y2hVc2VyanMoKSB7CiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZldGNoVXNlcmpzKTsKCiAgICAgICAgdGhpcy5ob3N0ID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLnNwbGl0KCcuJykuc3BsaWNlKC0yKS5qb2luKCcuJyk7CiAgICAgICAgdGhpcy5zaG93VGltZSA9IDEwOwogICAgICAgIHRoaXMucXVpZXRLZXkgPSAnamFlX2ZldGNoX3VzZXJqc19xdWlldCc7CiAgICAgICAgdGhpcy5jb3VudEtleSA9ICdqYWVfZmV0Y2hfdXNlcmpzX2NvdW50JzsKICAgICAgICB0aGlzLnRwbEJveCA9ICc8ZGl2IGlkPSJqYWVfdXNlcnNjcmlwdF9ib3giPjxzdHlsZT4uamFlLXVzZXJzY3JpcHR7cG9zaXRpb246Zml4ZWQ7d2lkdGg6MzcwcHg7Ym90dG9tOjEwcHg7cmlnaHQ6MjBweDt6LWluZGV4Ojk5OTk5OTk5OTk7aGVpZ2h0OjU2cHh9LmphZS11c2Vyc2NyaXB0LXNoYWRvd3tib3gtc2hhZG93OjAgMXB4IDRweCByZ2JhKDAsMCwwLC4zKSxcXHRcXHRcXHRcXHQwcHggMCAyMHB4IHJnYmEoMCwwLDAsLjEpIGluc2V0fS5qYWUtdXNlcnNjcmlwdC1zaGFkb3c6OmJlZm9yZSwuamFlLXVzZXJzY3JpcHQtc2hhZG93OjphZnRlcntjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6LTF9LmphZS11c2Vyc2NyaXB0LXNoYWRvdzo6YmVmb3JlLC5qYWUtdXNlcnNjcmlwdC1zaGFkb3c6OmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDotMTtib3R0b206MTVweDtsZWZ0OjEwcHg7d2lkdGg6NTAlO2hlaWdodDoyMCV9LmphZS11c2Vyc2NyaXB0LXNoYWRvdzo6YmVmb3JlLC5qYWUtdXNlcnNjcmlwdC1zaGFkb3c6OmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDotMTtib3R0b206MTVweDtsZWZ0OjEwcHg7d2lkdGg6NTAlO2hlaWdodDoyMCU7Ym94LXNoYWRvdzowIDE1cHggMTBweCByZ2JhKDAsMCwwLC43KTt0cmFuc2Zvcm06cm90YXRlKC0zZGVnKX0uamFlLXVzZXJzY3JpcHQtc2hhZG93OjphZnRlcntyaWdodDoxMHB4O2xlZnQ6YXV0bzt0cmFuc2Zvcm06cm90YXRlKDNkZWcpfTwvc3R5bGU+PGRpdiBjbGFzcz0iamFlLXVzZXJzY3JpcHQiIGNsYXNzPSIiPjwvZGl2PjwvZGl2Pic7CiAgICB9CgogICAgX2NyZWF0ZUNsYXNzKEZldGNoVXNlcmpzLCBbewogICAgICAgIGtleTogJ2dldENvdW50RGF0YScsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvdW50RGF0YShob3N0KSB7CiAgICAgICAgICAgIHZhciBjb3VudERhdGEgPSBHTV9nZXRSZXNvdXJjZVRleHQoJ2NvdW50Jyk7CiAgICAgICAgICAgIGNvdW50RGF0YSA9IEpTT04ucGFyc2UoY291bnREYXRhKTsKICAgICAgICAgICAgdmFyIGNvdW50ID0gY291bnREYXRhW2hvc3RdOwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHRoaXMuY291bnRLZXksIGNvdW50KTsKICAgICAgICAgICAgcmV0dXJuIGNvdW50OwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdzZXRTaXplJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U2l6ZSh3LCBoKSB7CiAgICAgICAgICAgICQoJy5qYWUtdXNlcnNjcmlwdCcpLmNzcyh7CiAgICAgICAgICAgICAgICB3aWR0aDogdywKICAgICAgICAgICAgICAgIGhlaWdodDogaAogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnYWRkRXZlbnRMaXN0ZW5lcicsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqYWVfdXNlcnNjcmlwdF9ib3gnKS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2JpbmRFdmVudCcsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmRFdmVudCgpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgICAgIHRoaXMudGltZUlkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkKCcjamFlX3VzZXJzY3JpcHRfYm94JykucmVtb3ZlKCk7CiAgICAgICAgICAgIH0sIHRoaXMuc2hvd1RpbWUgKiAxMDAwKTsKCiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignbWF4JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U2l6ZSg4NjAsIDQ5Mik7CiAgICAgICAgICAgICAgICAkKCcuamFlLXVzZXJzY3JpcHQnKS5hZGRDbGFzcygnamFlLXVzZXJzY3JpcHQtc2hhZG93Jyk7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMudGltZUlkKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ21pbicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICQoJy5qYWUtdXNlcnNjcmlwdCcpLnJlbW92ZUNsYXNzKCdqYWUtdXNlcnNjcmlwdC1zaGFkb3cnKTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTaXplKDM3MCwgNTYpOwogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShfdGhpcy5xdWlldEtleSwgMSk7CiAgICAgICAgICAgICAgICAkKCcjamFlX3VzZXJzY3JpcHRfYm94JykucmVtb3ZlKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdsb2FkaW5nJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLnRpbWVJZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdleGVjRnJhbWVKcycsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGV4ZWNGcmFtZUpzKGZyYW1lV2luZG93KSB7CiAgICAgICAgICAgIHZhciB1aUpzID0gR01fZ2V0UmVzb3VyY2VUZXh0KCd1aUpzJyk7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoanNTdHIpIHsKICAgICAgICAgICAgICAgIGZyYW1lV2luZG93LmV2YWwoanNTdHIpOwogICAgICAgICAgICB9LmNhbGwoZnJhbWVXaW5kb3csIHVpSnMpOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdyZW5kZXInLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5pc1F1aWV0KSB7CiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSB0aGlzLmdldENvdW50RGF0YSh0aGlzLmhvc3QpOwogICAgICAgICAgICAgICAgaWYgKGNvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCh0aGlzLnRwbEJveCk7CgogICAgICAgICAgICAgICAgICAgIHZhciB1aSA9IEdNX2dldFJlc291cmNlVGV4dCgndWknKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnamFlLXVzZXJzY3JpcHQnKVswXTsKICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gJzxpZnJhbWUgbmFtZT0iamFlRmV0Y2hVc2VySlNGcmFtZSIgc3JjPSJhYm91dDpibGFuayIgc3R5bGU9IndpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7Ym9yZGVyOjBweDtkaXNwbGF5OiBibG9jayFpbXBvcnRhbnQ7IiBhbGxvd1RyYW5zcGFyZW5jeT0idHJ1ZSI+PC9pZnJhbWU+JzsKICAgICAgICAgICAgICAgICAgICBkb20uaW5uZXJIVE1MID0gdHBsOwogICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWVEb20gPSBkb20uY2hpbGRyZW5bMF07CiAgICAgICAgICAgICAgICAgICAgaWZyYW1lLndyaXRlKGlmcmFtZURvbSwgdWkpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWNGcmFtZUpzKGphZUZldGNoVXNlckpTRnJhbWUud2luZG93KTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kRXZlbnQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdpc1F1aWV0JywKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgdmFyIHF1aWV0ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnF1aWV0S2V5KTsKICAgICAgICAgICAgcmV0dXJuIHF1aWV0ID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gRmV0Y2hVc2VyanM7Cn0oKTsKCmxqcy5leGVjKFsnalF1ZXJ5JywgJ2lmcmFtZSddLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgZnUgPSBuZXcgRmV0Y2hVc2VyanMoKTsKICAgIGZ1LnJlbmRlcigpOwp9KTsKCn0pKCk7"}],"settings":{"script_blacklist_server":[{"rules":["/https?:\\/\\/userscripts\\.org\\/scripts\\/(source|version)/(102614).*\\.user\\.js/"],"severity":"2"},{"name":"SaveFrom.net helper","reason":"Shows advertisements","rules":["/https?:\\/\\/sf-addon\\.com\\/.*\\/.*\\.user\\.js/","/https?:\\/\\/.*\\.sf-helper\\.com\\/.*\\.user\\.js/"],"severity":"3"}]}}